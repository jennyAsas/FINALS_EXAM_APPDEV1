var Lz=Object.create;var $x=Object.defineProperty,Fz=Object.defineProperties,Vz=Object.getOwnPropertyDescriptor,Bz=Object.getOwnPropertyDescriptors,Uz=Object.getOwnPropertyNames,v2=Object.getOwnPropertySymbols,b2=Object.getPrototypeOf,w2=Object.prototype.hasOwnProperty,zz=Object.prototype.propertyIsEnumerable,jz=Reflect.get;var y2=(n,e,t)=>e in n?$x(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,te=(n,e)=>{for(var t in e||={})w2.call(e,t)&&y2(n,t,e[t]);if(v2)for(var t of v2(e))zz.call(e,t)&&y2(n,t,e[t]);return n},Ee=(n,e)=>Fz(n,Bz(e));var $z=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Hz=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Uz(e))!w2.call(n,r)&&r!==t&&$x(n,r,{get:()=>e[r],enumerable:!(i=Vz(e,r))||i.enumerable});return n};var x2=(n,e,t)=>(t=n!=null?Lz(b2(n)):{},Hz(e||!n||!n.__esModule?$x(t,"default",{value:n,enumerable:!0}):t,n));var Gs=(n,e,t)=>jz(b2(n),t,e);var O=(n,e,t)=>new Promise((i,r)=>{var o=u=>{try{l(t.next(u))}catch(f){r(f)}},s=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(o,s);l((t=t.apply(n,e)).next())});var FD=$z((_x,SU)=>{"use strict";(function(n,e){typeof _x=="object"&&typeof SU<"u"?e(_x):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(_x,function(n){"use strict";var e="1.9.4";function t(a){var d,p,_,x;for(p=1,_=arguments.length;p<_;p++){x=arguments[p];for(d in x)a[d]=x[d]}return a}var i=Object.create||(function(){function a(){}return function(d){return a.prototype=d,new a}})();function r(a,d){var p=Array.prototype.slice;if(a.bind)return a.bind.apply(a,p.call(arguments,1));var _=p.call(arguments,2);return function(){return a.apply(d,_.length?_.concat(p.call(arguments)):arguments)}}var o=0;function s(a){return"_leaflet_id"in a||(a._leaflet_id=++o),a._leaflet_id}function l(a,d,p){var _,x,D,z;return z=function(){_=!1,x&&(D.apply(p,x),x=!1)},D=function(){_?x=arguments:(a.apply(p,arguments),setTimeout(z,d),_=!0)},D}function u(a,d,p){var _=d[1],x=d[0],D=_-x;return a===_&&p?a:((a-x)%D+D)%D+x}function f(){return!1}function m(a,d){if(d===!1)return a;var p=Math.pow(10,d===void 0?6:d);return Math.round(a*p)/p}function y(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function C(a){return y(a).split(/\s+/)}function T(a,d){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?i(a.options):{});for(var p in d)a.options[p]=d[p];return a.options}function U(a,d,p){var _=[];for(var x in a)_.push(encodeURIComponent(p?x.toUpperCase():x)+"="+encodeURIComponent(a[x]));return(!d||d.indexOf("?")===-1?"?":"&")+_.join("&")}var H=/\{ *([\w_ -]+) *\}/g;function j(a,d){return a.replace(H,function(p,_){var x=d[_];if(x===void 0)throw new Error("No value provided for variable "+p);return typeof x=="function"&&(x=x(d)),x})}var X=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function ae(a,d){for(var p=0;p<a.length;p++)if(a[p]===d)return p;return-1}var le="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function he(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var ct=0;function Se(a){var d=+new Date,p=Math.max(0,16-(d-ct));return ct=d+p,window.setTimeout(a,p)}var k=window.requestAnimationFrame||he("RequestAnimationFrame")||Se,E=window.cancelAnimationFrame||he("CancelAnimationFrame")||he("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function P(a,d,p){if(p&&k===Se)a.call(d);else return k.call(window,r(a,d))}function A(a){a&&E.call(window,a)}var R={__proto__:null,extend:t,create:i,bind:r,get lastId(){return o},stamp:s,throttle:l,wrapNum:u,falseFn:f,formatNum:m,trim:y,splitWords:C,setOptions:T,getParamString:U,template:j,isArray:X,indexOf:ae,emptyImageUrl:le,requestFn:k,cancelFn:E,requestAnimFrame:P,cancelAnimFrame:A};function F(){}F.extend=function(a){var d=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=d.__super__=this.prototype,_=i(p);_.constructor=d,d.prototype=_;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(d[x]=this[x]);return a.statics&&t(d,a.statics),a.includes&&(S(a.includes),t.apply(null,[_].concat(a.includes))),t(_,a),delete _.statics,delete _.includes,_.options&&(_.options=p.options?i(p.options):{},t(_.options,a.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var D=0,z=_._initHooks.length;D<z;D++)_._initHooks[D].call(this)}},d},F.include=function(a){var d=this.prototype.options;return t(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},F.mergeOptions=function(a){return t(this.prototype.options,a),this},F.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),p=typeof a=="function"?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function S(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=X(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ft={on:function(a,d,p){if(typeof a=="object")for(var _ in a)this._on(_,a[_],d);else{a=C(a);for(var x=0,D=a.length;x<D;x++)this._on(a[x],d,p)}return this},off:function(a,d,p){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var _ in a)this._off(_,a[_],d);else{a=C(a);for(var x=arguments.length===1,D=0,z=a.length;D<z;D++)x?this._off(a[D]):this._off(a[D],d,p)}return this},_on:function(a,d,p,_){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(a,d,p)===!1){p===this&&(p=void 0);var x={fn:d,ctx:p};_&&(x.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(x)}},_off:function(a,d,p){var _,x,D;if(this._events&&(_=this._events[a],!!_)){if(arguments.length===1){if(this._firingCount)for(x=0,D=_.length;x<D;x++)_[x].fn=f;delete this._events[a];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var z=this._listens(a,d,p);if(z!==!1){var Q=_[z];this._firingCount&&(Q.fn=f,this._events[a]=_=_.slice()),_.splice(z,1)}}},fire:function(a,d,p){if(!this.listens(a,p))return this;var _=t({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var x=this._events[a];if(x){this._firingCount=this._firingCount+1||1;for(var D=0,z=x.length;D<z;D++){var Q=x[D],Z=Q.fn;Q.once&&this.off(a,Z,Q.ctx),Z.call(Q.ctx||this,_)}this._firingCount--}}return p&&this._propagateEvent(_),this},listens:function(a,d,p,_){typeof a!="string"&&console.warn('"string" type argument expected');var x=d;typeof d!="function"&&(_=!!d,x=void 0,p=void 0);var D=this._events&&this._events[a];if(D&&D.length&&this._listens(a,x,p)!==!1)return!0;if(_){for(var z in this._eventParents)if(this._eventParents[z].listens(a,d,p,_))return!0}return!1},_listens:function(a,d,p){if(!this._events)return!1;var _=this._events[a]||[];if(!d)return!!_.length;p===this&&(p=void 0);for(var x=0,D=_.length;x<D;x++)if(_[x].fn===d&&_[x].ctx===p)return x;return!1},once:function(a,d,p){if(typeof a=="object")for(var _ in a)this._on(_,a[_],d,!0);else{a=C(a);for(var x=0,D=a.length;x<D;x++)this._on(a[x],d,p,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[s(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[s(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,t({layer:a.target,propagatedFrom:a.target},a),!0)}};Ft.addEventListener=Ft.on,Ft.removeEventListener=Ft.clearAllEventListeners=Ft.off,Ft.addOneTimeEventListener=Ft.once,Ft.fireEvent=Ft.fire,Ft.hasEventListeners=Ft.listens;var Li=F.extend(Ft);function Je(a,d,p){this.x=p?Math.round(a):a,this.y=p?Math.round(d):d}var kr=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};Je.prototype={clone:function(){return new Je(this.x,this.y)},add:function(a){return this.clone()._add(ke(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(ke(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Je(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Je(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=kr(this.x),this.y=kr(this.y),this},distanceTo:function(a){a=ke(a);var d=a.x-this.x,p=a.y-this.y;return Math.sqrt(d*d+p*p)},equals:function(a){return a=ke(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=ke(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function ke(a,d,p){return a instanceof Je?a:X(a)?new Je(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new Je(a.x,a.y):new Je(a,d,p)}function Jt(a,d){if(a)for(var p=d?[a,d]:a,_=0,x=p.length;_<x;_++)this.extend(p[_])}Jt.prototype={extend:function(a){var d,p;if(!a)return this;if(a instanceof Je||typeof a[0]=="number"||"x"in a)d=p=ke(a);else if(a=Kn(a),d=a.min,p=a.max,!d||!p)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=p.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(a){return ke((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return ke(this.min.x,this.max.y)},getTopRight:function(){return ke(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,p;return typeof a[0]=="number"||a instanceof Je?a=ke(a):a=Kn(a),a instanceof Jt?(d=a.min,p=a.max):d=p=a,d.x>=this.min.x&&p.x<=this.max.x&&d.y>=this.min.y&&p.y<=this.max.y},intersects:function(a){a=Kn(a);var d=this.min,p=this.max,_=a.min,x=a.max,D=x.x>=d.x&&_.x<=p.x,z=x.y>=d.y&&_.y<=p.y;return D&&z},overlaps:function(a){a=Kn(a);var d=this.min,p=this.max,_=a.min,x=a.max,D=x.x>d.x&&_.x<p.x,z=x.y>d.y&&_.y<p.y;return D&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var d=this.min,p=this.max,_=Math.abs(d.x-p.x)*a,x=Math.abs(d.y-p.y)*a;return Kn(ke(d.x-_,d.y-x),ke(p.x+_,p.y+x))},equals:function(a){return a?(a=Kn(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Kn(a,d){return!a||a instanceof Jt?a:new Jt(a,d)}function Ei(a,d){if(a)for(var p=d?[a,d]:a,_=0,x=p.length;_<x;_++)this.extend(p[_])}Ei.prototype={extend:function(a){var d=this._southWest,p=this._northEast,_,x;if(a instanceof Oe)_=a,x=a;else if(a instanceof Ei){if(_=a._southWest,x=a._northEast,!_||!x)return this}else return a?this.extend(vt(a)||_t(a)):this;return!d&&!p?(this._southWest=new Oe(_.lat,_.lng),this._northEast=new Oe(x.lat,x.lng)):(d.lat=Math.min(_.lat,d.lat),d.lng=Math.min(_.lng,d.lng),p.lat=Math.max(x.lat,p.lat),p.lng=Math.max(x.lng,p.lng)),this},pad:function(a){var d=this._southWest,p=this._northEast,_=Math.abs(d.lat-p.lat)*a,x=Math.abs(d.lng-p.lng)*a;return new Ei(new Oe(d.lat-_,d.lng-x),new Oe(p.lat+_,p.lng+x))},getCenter:function(){return new Oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new Oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Oe||"lat"in a?a=vt(a):a=_t(a);var d=this._southWest,p=this._northEast,_,x;return a instanceof Ei?(_=a.getSouthWest(),x=a.getNorthEast()):_=x=a,_.lat>=d.lat&&x.lat<=p.lat&&_.lng>=d.lng&&x.lng<=p.lng},intersects:function(a){a=_t(a);var d=this._southWest,p=this._northEast,_=a.getSouthWest(),x=a.getNorthEast(),D=x.lat>=d.lat&&_.lat<=p.lat,z=x.lng>=d.lng&&_.lng<=p.lng;return D&&z},overlaps:function(a){a=_t(a);var d=this._southWest,p=this._northEast,_=a.getSouthWest(),x=a.getNorthEast(),D=x.lat>d.lat&&_.lat<p.lat,z=x.lng>d.lng&&_.lng<p.lng;return D&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return a?(a=_t(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function _t(a,d){return a instanceof Ei?a:new Ei(a,d)}function Oe(a,d,p){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,p!==void 0&&(this.alt=+p)}Oe.prototype={equals:function(a,d){if(!a)return!1;a=vt(a);var p=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return p<=(d===void 0?1e-9:d)},toString:function(a){return"LatLng("+m(this.lat,a)+", "+m(this.lng,a)+")"},distanceTo:function(a){return bo.distance(this,vt(a))},wrap:function(){return bo.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,p=d/Math.cos(Math.PI/180*this.lat);return _t([this.lat-d,this.lng-p],[this.lat+d,this.lng+p])},clone:function(){return new Oe(this.lat,this.lng,this.alt)}};function vt(a,d,p){return a instanceof Oe?a:X(a)&&typeof a[0]!="object"?a.length===3?new Oe(a[0],a[1],a[2]):a.length===2?new Oe(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Oe(a.lat,"lng"in a?a.lng:a.lon,a.alt):d===void 0?null:new Oe(a,d,p)}var zn={latLngToPoint:function(a,d){var p=this.projection.project(a),_=this.scale(d);return this.transformation._transform(p,_)},pointToLatLng:function(a,d){var p=this.scale(d),_=this.transformation.untransform(a,p);return this.projection.unproject(_)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,p=this.scale(a),_=this.transformation.transform(d.min,p),x=this.transformation.transform(d.max,p);return new Jt(_,x)},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?u(a.lng,this.wrapLng,!0):a.lng,p=this.wrapLat?u(a.lat,this.wrapLat,!0):a.lat,_=a.alt;return new Oe(p,d,_)},wrapLatLngBounds:function(a){var d=a.getCenter(),p=this.wrapLatLng(d),_=d.lat-p.lat,x=d.lng-p.lng;if(_===0&&x===0)return a;var D=a.getSouthWest(),z=a.getNorthEast(),Q=new Oe(D.lat-_,D.lng-x),Z=new Oe(z.lat-_,z.lng-x);return new Ei(Q,Z)}},bo=t({},zn,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var p=Math.PI/180,_=a.lat*p,x=d.lat*p,D=Math.sin((d.lat-a.lat)*p/2),z=Math.sin((d.lng-a.lng)*p/2),Q=D*D+Math.cos(_)*Math.cos(x)*z*z,Z=2*Math.atan2(Math.sqrt(Q),Math.sqrt(1-Q));return this.R*Z}}),Rr=6378137,ou={R:Rr,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,p=this.MAX_LATITUDE,_=Math.max(Math.min(p,a.lat),-p),x=Math.sin(_*d);return new Je(this.R*a.lng*d,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(a){var d=180/Math.PI;return new Oe((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:(function(){var a=Rr*Math.PI;return new Jt([-a,-a],[a,a])})()};function su(a,d,p,_){if(X(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=d,this._c=p,this._d=_}su.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return d=d||1,a.x=d*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return d=d||1,new Je((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};function mr(a,d,p,_){return new su(a,d,p,_)}var Jr=t({},bo,{code:"EPSG:3857",projection:ou,transformation:(function(){var a=.5/(Math.PI*ou.R);return mr(a,.5,-a,.5)})()}),Ra=t({},Jr,{code:"EPSG:900913"});function As(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Ds(a,d){var p="",_,x,D,z,Q,Z;for(_=0,D=a.length;_<D;_++){for(Q=a[_],x=0,z=Q.length;x<z;x++)Z=Q[x],p+=(x?"L":"M")+Z.x+" "+Z.y;p+=d?Ce.svg?"z":"x":""}return p||"M0 0"}var $o=document.documentElement.style,ks="ActiveXObject"in window,au=ks&&!document.addEventListener,eh="msLaunchUri"in navigator&&!("documentMode"in document),Na=Ki("webkit"),zc=Ki("android"),Rs=Ki("android 2")||Ki("android 3"),cu=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Sp=zc&&Ki("Google")&&cu<537&&!("AudioNode"in window),Ho=!!window.opera,Ns=!eh&&Ki("chrome"),Ls=Ki("gecko")&&!Na&&!Ho&&!ks,Ot=!Ns&&Ki("safari"),Dt=Ki("phantom"),wo="OTransition"in $o,lu=navigator.platform.indexOf("Win")===0,jc=ks&&"transition"in $o,uu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Rs,Nr="MozPerspective"in $o,du=!window.L_DISABLE_3D&&(jc||uu||Nr)&&!wo&&!Dt,qo=typeof orientation<"u"||Ki("mobile"),La=qo&&Na,Mp=qo&&uu,th=!window.PointerEvent&&window.MSPointerEvent,Fs=!!(window.PointerEvent||th),$c="ontouchstart"in window||!!window.TouchEvent,hu=!window.L_NO_TOUCH&&($c||Fs),Xr=qo&&Ho,Fa=qo&&Ls,Va=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fi=(function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",f,d),window.removeEventListener("testPassiveEventSupport",f,d)}catch{}return a})(),fu=(function(){return!!document.createElement("canvas").getContext})(),eo=!!(document.createElementNS&&As("svg").createSVGRect),pu=!!eo&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),to=!eo&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),gu=navigator.platform.indexOf("Mac")===0,Vt=navigator.platform.indexOf("Linux")===0;function Ki(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ce={ie:ks,ielt9:au,edge:eh,webkit:Na,android:zc,android23:Rs,androidStock:Sp,opera:Ho,chrome:Ns,gecko:Ls,safari:Ot,phantom:Dt,opera12:wo,win:lu,ie3d:jc,webkit3d:uu,gecko3d:Nr,any3d:du,mobile:qo,mobileWebkit:La,mobileWebkit3d:Mp,msPointer:th,pointer:Fs,touch:hu,touchNative:$c,mobileOpera:Xr,mobileGecko:Fa,retina:Va,passiveEvents:Fi,canvas:fu,svg:eo,vml:to,inlineSvg:pu,mac:gu,linux:Vt},Lr=Ce.msPointer?"MSPointerDown":"pointerdown",nh=Ce.msPointer?"MSPointerMove":"pointermove",ih=Ce.msPointer?"MSPointerUp":"pointerup",Qi=Ce.msPointer?"MSPointerCancel":"pointercancel",mu={touchstart:Lr,touchmove:nh,touchend:ih,touchcancel:Qi},rh={touchstart:vu,touchmove:xo,touchend:xo,touchcancel:xo},Yi={},Hc=!1;function Ba(a,d,p){return d==="touchstart"&&Ua(),rh[d]?(p=rh[d].bind(this,p),a.addEventListener(mu[d],p,!1),p):(console.warn("wrong event specified:",d),f)}function Go(a,d,p){if(!mu[d]){console.warn("wrong event specified:",d);return}a.removeEventListener(mu[d],p,!1)}function _i(a){Yi[a.pointerId]=a}function _u(a){Yi[a.pointerId]&&(Yi[a.pointerId]=a)}function qc(a){delete Yi[a.pointerId]}function Ua(){Hc||(document.addEventListener(Lr,_i,!0),document.addEventListener(nh,_u,!0),document.addEventListener(ih,qc,!0),document.addEventListener(Qi,qc,!0),Hc=!0)}function xo(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var p in Yi)d.touches.push(Yi[p]);d.changedTouches=[d],a(d)}}function vu(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&cn(d),xo(a,d)}function yu(a){var d={},p,_;for(_ in a)p=a[_],d[_]=p&&p.bind?p.bind(a):p;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var Op=200;function Wo(a,d){a.addEventListener("dblclick",d);var p=0,_;function x(D){if(D.detail!==1){_=D.detail;return}if(!(D.pointerType==="mouse"||D.sourceCapabilities&&!D.sourceCapabilities.firesTouchEvents)){var z=Wc(D);if(!(z.some(function(Z){return Z instanceof HTMLLabelElement&&Z.attributes.for})&&!z.some(function(Z){return Z instanceof HTMLInputElement||Z instanceof HTMLSelectElement}))){var Q=Date.now();Q-p<=Op?(_++,_===2&&d(yu(D))):_=1,p=Q}}}return a.addEventListener("click",x),{dblclick:d,simDblclick:x}}function bu(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}var Ko=Qn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Vi=Qn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ii=Vi==="webkitTransition"||Vi==="OTransition"?Vi+"End":"transitionend";function Vs(a){return typeof a=="string"?document.getElementById(a):a}function za(a,d){var p=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!p||p==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(a,null);p=_?_[d]:null}return p==="auto"?null:p}function yt(a,d,p){var _=document.createElement(a);return _.className=d||"",p&&p.appendChild(_),_}function an(a){var d=a.parentNode;d&&d.removeChild(a)}function Bs(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Fr(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function Vr(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function ja(a,d){if(a.classList!==void 0)return a.classList.contains(d);var p=Us(a);return p.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(p)}function Xe(a,d){if(a.classList!==void 0)for(var p=C(d),_=0,x=p.length;_<x;_++)a.classList.add(p[_]);else if(!ja(a,d)){var D=Us(a);wu(a,(D?D+" ":"")+d)}}function yn(a,d){a.classList!==void 0?a.classList.remove(d):wu(a,y((" "+Us(a)+" ").replace(" "+d+" "," ")))}function wu(a,d){a.className.baseVal===void 0?a.className=d:a.className.baseVal=d}function Us(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Pi(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&Ap(a,d)}function Ap(a,d){var p=!1,_="DXImageTransform.Microsoft.Alpha";try{p=a.filters.item(_)}catch{if(d===1)return}d=Math.round(d*100),p?(p.Enabled=d!==100,p.Opacity=d):a.style.filter+=" progid:"+_+"(opacity="+d+")"}function Qn(a){for(var d=document.documentElement.style,p=0;p<a.length;p++)if(a[p]in d)return a[p];return!1}function hn(a,d,p){var _=d||new Je(0,0);a.style[Ko]=(Ce.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(p?" scale("+p+")":"")}function tn(a,d){a._leaflet_pos=d,Ce.any3d?hn(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function Bi(a){return a._leaflet_pos||new Je(0,0)}var Qo,De,no;if("onselectstart"in document)Qo=function(){Ke(window,"selectstart",cn)},De=function(){Wt(window,"selectstart",cn)};else{var Ui=Qn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qo=function(){if(Ui){var a=document.documentElement.style;no=a[Ui],a[Ui]="none"}},De=function(){Ui&&(document.documentElement.style[Ui]=no,no=void 0)}}function _r(){Ke(window,"dragstart",cn)}function xu(){Wt(window,"dragstart",cn)}var zs,Cu;function Eu(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Gc(),zs=a,Cu=a.style.outlineStyle,a.style.outlineStyle="none",Ke(window,"keydown",Gc))}function Gc(){zs&&(zs.style.outlineStyle=Cu,zs=void 0,Cu=void 0,Wt(window,"keydown",Gc))}function oh(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function vr(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var vi={__proto__:null,TRANSFORM:Ko,TRANSITION:Vi,TRANSITION_END:Ii,get:Vs,getStyle:za,create:yt,remove:an,empty:Bs,toFront:Fr,toBack:Vr,hasClass:ja,addClass:Xe,removeClass:yn,setClass:wu,getClass:Us,setOpacity:Pi,testProp:Qn,setTransform:hn,setPosition:tn,getPosition:Bi,get disableTextSelection(){return Qo},get enableTextSelection(){return De},disableImageDrag:_r,enableImageDrag:xu,preventOutline:Eu,restoreOutline:Gc,getSizedParentNode:oh,getScale:vr};function Ke(a,d,p,_){if(d&&typeof d=="object")for(var x in d)Pu(a,x,d[x],p);else{d=C(d);for(var D=0,z=d.length;D<z;D++)Pu(a,d[D],p,_)}return this}var Zi="_leaflet_events";function Wt(a,d,p,_){if(arguments.length===1)Ji(a),delete a[Zi];else if(d&&typeof d=="object")for(var x in d)Tu(a,x,d[x],p);else if(d=C(d),arguments.length===2)Ji(a,function(Q){return ae(d,Q)!==-1});else for(var D=0,z=d.length;D<z;D++)Tu(a,d[D],p,_);return this}function Ji(a,d){for(var p in a[Zi]){var _=p.split(/\d/)[0];(!d||d(_))&&Tu(a,_,null,null,p)}}var Iu={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pu(a,d,p,_){var x=d+s(p)+(_?"_"+s(_):"");if(a[Zi]&&a[Zi][x])return this;var D=function(Q){return p.call(_||a,Q||window.event)},z=D;!Ce.touchNative&&Ce.pointer&&d.indexOf("touch")===0?D=Ba(a,d,D):Ce.touch&&d==="dblclick"?D=Wo(a,D):"addEventListener"in a?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?a.addEventListener(Iu[d]||d,D,Ce.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(D=function(Q){Q=Q||window.event,Yo(a,Q)&&z(Q)},a.addEventListener(Iu[d],D,!1)):a.addEventListener(d,z,!1):a.attachEvent("on"+d,D),a[Zi]=a[Zi]||{},a[Zi][x]=D}function Tu(a,d,p,_,x){x=x||d+s(p)+(_?"_"+s(_):"");var D=a[Zi]&&a[Zi][x];if(!D)return this;!Ce.touchNative&&Ce.pointer&&d.indexOf("touch")===0?Go(a,d,D):Ce.touch&&d==="dblclick"?bu(a,D):"removeEventListener"in a?a.removeEventListener(Iu[d]||d,D,!1):a.detachEvent("on"+d,D),a[Zi][x]=null}function bn(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Su(a){return Pu(a,"wheel",bn),this}function $a(a){return Ke(a,"mousedown touchstart dblclick contextmenu",bn),a._leaflet_disable_click=!0,this}function cn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function zi(a){return cn(a),bn(a),this}function Wc(a){if(a.composedPath)return a.composedPath();for(var d=[],p=a.target;p;)d.push(p),p=p.parentNode;return d}function Br(a,d){if(!d)return new Je(a.clientX,a.clientY);var p=vr(d),_=p.boundingClientRect;return new Je((a.clientX-_.left)/p.x-d.clientLeft,(a.clientY-_.top)/p.y-d.clientTop)}var io=Ce.linux&&Ce.chrome?window.devicePixelRatio:Ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Kc(a){return Ce.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/io:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Yo(a,d){var p=d.relatedTarget;if(!p)return!0;try{for(;p&&p!==a;)p=p.parentNode}catch{return!1}return p!==a}var Qe={__proto__:null,on:Ke,off:Wt,stopPropagation:bn,disableScrollPropagation:Su,disableClickPropagation:$a,preventDefault:cn,stop:zi,getPropagationPath:Wc,getMousePosition:Br,getWheelDelta:Kc,isExternalTarget:Yo,addListener:Ke,removeListener:Wt},sh=Li.extend({run:function(a,d,p,_){this.stop(),this._el=a,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Bi(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=P(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,p=this._duration*1e3;d<p?this._runFrame(this._easeOut(d/p),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var p=this._startPos.add(this._offset.multiplyBy(a));d&&p._round(),tn(this._el,p),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),bt=Li.extend({options:{crs:Jr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=T(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(vt(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Vi&&Ce.any3d&&!Ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ke(this._proxy,Ii,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,p){if(d=d===void 0?this._zoom:this._limitZoom(d),a=this._limitCenter(vt(a),d,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=t({animate:p.animate},p.zoom),p.pan=t({animate:p.animate,duration:p.duration},p.pan));var _=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,p.zoom):this._tryAnimatedPan(a,p.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(a,d,p.pan&&p.pan.noMoveStart),this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return a=a||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,d)},zoomOut:function(a,d){return a=a||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,d)},setZoomAround:function(a,d,p){var _=this.getZoomScale(d),x=this.getSize().divideBy(2),D=a instanceof Je?a:this.latLngToContainerPoint(a),z=D.subtract(x).multiplyBy(1-1/_),Q=this.containerPointToLatLng(x.add(z));return this.setView(Q,d,{zoom:p})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():_t(a);var p=ke(d.paddingTopLeft||d.padding||[0,0]),_=ke(d.paddingBottomRight||d.padding||[0,0]),x=this.getBoundsZoom(a,!1,p.add(_));if(x=typeof d.maxZoom=="number"?Math.min(d.maxZoom,x):x,x===1/0)return{center:a.getCenter(),zoom:x};var D=_.subtract(p).divideBy(2),z=this.project(a.getSouthWest(),x),Q=this.project(a.getNorthEast(),x),Z=this.unproject(z.add(Q).divideBy(2).add(D),x);return{center:Z,zoom:x}},fitBounds:function(a,d){if(a=_t(a),!a.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(a,d);return this.setView(p.center,p.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(a=ke(a).round(),d=d||{},!a.x&&!a.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new sh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Xe(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,p,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,p){if(p=p||{},p.animate===!1||!Ce.any3d)return this.setView(a,d,p);this._stop();var _=this.project(this.getCenter()),x=this.project(a),D=this.getSize(),z=this._zoom;a=vt(a),d=d===void 0?z:d;var Q=Math.max(D.x,D.y),Z=Q*this.getZoomScale(z,d),se=x.distanceTo(_)||1,be=1.42,qe=be*be;function wt(Zn){var B_=Zn?-1:1,Dz=Zn?Z:Q,kz=Z*Z-Q*Q+B_*qe*qe*se*se,Rz=2*Dz*qe*se,jx=kz/Rz,_2=Math.sqrt(jx*jx+1)-jx,Nz=_2<1e-9?-18:Math.log(_2);return Nz}function br(Zn){return(Math.exp(Zn)-Math.exp(-Zn))/2}function Si(Zn){return(Math.exp(Zn)+Math.exp(-Zn))/2}function Eo(Zn){return br(Zn)/Si(Zn)}var jr=wt(0);function hh(Zn){return Q*(Si(jr)/Si(jr+be*Zn))}function Sz(Zn){return Q*(Si(jr)*Eo(jr+be*Zn)-br(jr))/qe}function Mz(Zn){return 1-Math.pow(1-Zn,1.5)}var Oz=Date.now(),g2=(wt(1)-jr)/be,Az=p.duration?1e3*p.duration:1e3*g2*.8;function m2(){var Zn=(Date.now()-Oz)/Az,B_=Mz(Zn)*g2;Zn<=1?(this._flyToFrame=P(m2,this),this._move(this.unproject(_.add(x.subtract(_).multiplyBy(Sz(B_)/se)),z),this.getScaleZoom(Q/hh(B_),z),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),m2.call(this),this},flyToBounds:function(a,d){var p=this._getBoundsCenterZoom(a,d);return this.flyTo(p.center,p.zoom,d)},setMaxBounds:function(a){return a=_t(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var p=this.getCenter(),_=this._limitCenter(p,this._zoom,_t(a));return p.equals(_)||this.panTo(_,d),this._enforcingBounds=!1,this},panInside:function(a,d){d=d||{};var p=ke(d.paddingTopLeft||d.padding||[0,0]),_=ke(d.paddingBottomRight||d.padding||[0,0]),x=this.project(this.getCenter()),D=this.project(a),z=this.getPixelBounds(),Q=Kn([z.min.add(p),z.max.subtract(_)]),Z=Q.getSize();if(!Q.contains(D)){this._enforcingBounds=!0;var se=D.subtract(Q.getCenter()),be=Q.extend(D).getSize().subtract(Z);x.x+=se.x<0?-be.x:be.x,x.y+=se.y<0?-be.y:be.y,this.panTo(this.unproject(x),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=t({animate:!1,pan:!0},a===!0?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),_=d.divideBy(2).round(),x=p.divideBy(2).round(),D=_.subtract(x);return!D.x&&!D.y?this:(a.animate&&a.pan?this.panBy(D):(a.pan&&this._rawPanBy(D),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=t({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=r(this._handleGeolocationResponse,this),p=r(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,p,a):navigator.geolocation.getCurrentPosition(d,p,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var d=a.code,p=a.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var d=a.coords.latitude,p=a.coords.longitude,_=new Oe(d,p),x=_.toBounds(a.coords.accuracy*2),D=this._locateOptions;if(D.setView){var z=this.getBoundsZoom(x);this.setView(_,D.maxZoom?Math.min(z,D.maxZoom):z)}var Q={latlng:_,bounds:x,timestamp:a.timestamp};for(var Z in a.coords)typeof a.coords[Z]=="number"&&(Q[Z]=a.coords[Z]);this.fire("locationfound",Q)}},addHandler:function(a,d){if(!d)return this;var p=this[a]=new d(this);return this._handlers.push(p),this.options[a]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),an(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)an(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var p="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),_=yt("div",p,d||this._mapPane);return a&&(this._panes[a]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),p=this.unproject(a.getTopRight());return new Ei(d,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,p){a=_t(a),p=ke(p||[0,0]);var _=this.getZoom()||0,x=this.getMinZoom(),D=this.getMaxZoom(),z=a.getNorthWest(),Q=a.getSouthEast(),Z=this.getSize().subtract(p),se=Kn(this.project(Q,_),this.project(z,_)).getSize(),be=Ce.any3d?this.options.zoomSnap:1,qe=Z.x/se.x,wt=Z.y/se.y,br=d?Math.max(qe,wt):Math.min(qe,wt);return _=this.getScaleZoom(br,_),be&&(_=Math.round(_/(be/100))*(be/100),_=d?Math.ceil(_/be)*be:Math.floor(_/be)*be),Math.max(x,Math.min(D,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Je(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var p=this._getTopLeftPoint(a,d);return new Jt(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var p=this.options.crs;return d=d===void 0?this._zoom:d,p.scale(a)/p.scale(d)},getScaleZoom:function(a,d){var p=this.options.crs;d=d===void 0?this._zoom:d;var _=p.zoom(a*p.scale(d));return isNaN(_)?1/0:_},project:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(vt(a),d)},unproject:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(ke(a),d)},layerPointToLatLng:function(a){var d=ke(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){var d=this.project(vt(a))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(vt(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(_t(a))},distance:function(a,d){return this.options.crs.distance(vt(a),vt(d))},containerPointToLayerPoint:function(a){return ke(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return ke(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(ke(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(vt(a)))},mouseEventToContainerPoint:function(a){return Br(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=Vs(a);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ke(d,"scroll",this._onScroll,this),this._containerId=s(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ce.any3d,Xe(a,"leaflet-container"+(Ce.touch?" leaflet-touch":"")+(Ce.retina?" leaflet-retina":"")+(Ce.ielt9?" leaflet-oldie":"")+(Ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=za(a,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),tn(this._mapPane,new Je(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Xe(a.markerPane,"leaflet-zoom-hide"),Xe(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d,p){tn(this._mapPane,new Je(0,0));var _=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var x=this._zoom!==d;this._moveStart(x,p)._move(a,d)._moveEnd(x),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,p,_){d===void 0&&(d=this._zoom);var x=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),_?p&&p.pinch&&this.fire("zoom",p):((x||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){tn(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[s(this._container)]=this;var d=a?Wt:Ke;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Ce.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=P(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var p=[],_,x=d==="mouseout"||d==="mouseover",D=a.target||a.srcElement,z=!1;D;){if(_=this._targets[s(D)],_&&(d==="click"||d==="preclick")&&this._draggableMoved(_)){z=!0;break}if(_&&_.listens(d,!0)&&(x&&!Yo(D,a)||(p.push(_),x))||D===this._container)break;D=D.parentNode}return!p.length&&!z&&!x&&this.listens(d,!0)&&(p=[this]),p},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(d))){var p=a.type;p==="mousedown"&&Eu(d),this._fireDOMEvent(a,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,p){if(a.type==="click"){var _=t({},a);_.type="preclick",this._fireDOMEvent(_,_.type,p)}var x=this._findEventTargets(a,d);if(p){for(var D=[],z=0;z<p.length;z++)p[z].listens(d,!0)&&D.push(p[z]);x=D.concat(x)}if(x.length){d==="contextmenu"&&cn(a);var Q=x[0],Z={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var se=Q.getLatLng&&(!Q._radius||Q._radius<=10);Z.containerPoint=se?this.latLngToContainerPoint(Q.getLatLng()):this.mouseEventToContainerPoint(a),Z.layerPoint=this.containerPointToLayerPoint(Z.containerPoint),Z.latlng=se?Q.getLatLng():this.layerPointToLatLng(Z.layerPoint)}for(z=0;z<x.length;z++)if(x[z].fire(d,Z,!0),Z.originalEvent._stopped||x[z].options.bubblingMouseEvents===!1&&ae(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return Bi(this._mapPane)||new Je(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){var p=a&&d!==void 0?this._getNewPixelOrigin(a,d):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var p=this.getSize()._divideBy(2);return this.project(a,d)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,p){var _=this._getNewPixelOrigin(p,d);return this.project(a,d)._subtract(_)},_latLngBoundsToNewLayerBounds:function(a,d,p){var _=this._getNewPixelOrigin(p,d);return Kn([this.project(a.getSouthWest(),d)._subtract(_),this.project(a.getNorthWest(),d)._subtract(_),this.project(a.getSouthEast(),d)._subtract(_),this.project(a.getNorthEast(),d)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,p){if(!p)return a;var _=this.project(a,d),x=this.getSize().divideBy(2),D=new Jt(_.subtract(x),_.add(x)),z=this._getBoundsOffset(D,p,d);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?a:this.unproject(_.add(z),d)},_limitOffset:function(a,d){if(!d)return a;var p=this.getPixelBounds(),_=new Jt(p.min.add(a),p.max.add(a));return a.add(this._getBoundsOffset(_,d))},_getBoundsOffset:function(a,d,p){var _=Kn(this.project(d.getNorthEast(),p),this.project(d.getSouthWest(),p)),x=_.min.subtract(a.min),D=_.max.subtract(a.max),z=this._rebound(x.x,-D.x),Q=this._rebound(x.y,-D.y);return new Je(z,Q)},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),p=this.getMaxZoom(),_=Ce.any3d?this.options.zoomSnap:1;return _&&(a=Math.round(a/_)*_),Math.max(d,Math.min(p,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var p=this._getCenterOffset(a)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,d),!0)},_createAnimProxy:function(){var a=this._proxy=yt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var p=Ko,_=this._proxy.style[p];hn(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),_===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){an(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();hn(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(d),x=this._getCenterOffset(a)._divideBy(1-1/_);return p.animate!==!0&&!this.getSize().contains(x)?!1:(P(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(a,d,!0)},this),!0)},_animateZoom:function(a,d,p,_){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,Xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&yn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Mu(a,d){return new bt(a,d)}var ji=F.extend({options:{position:"topright"},initialize:function(a){T(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),p=this.getPosition(),_=a._controlCorners[p];return Xe(d,"leaflet-control"),p.indexOf("bottom")!==-1?_.insertBefore(d,_.firstChild):_.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(an(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Zo=function(a){return new ji(a)};bt.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",p=this._controlContainer=yt("div",d+"control-container",this._container);function _(x,D){var z=d+x+" "+d+D;a[x+D]=yt("div",z,p)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)an(this._controlCorners[a]);an(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Co=ji.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,p,_){return p<_?-1:_<p?1:0}},initialize:function(a,d,p){T(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in a)this._addLayer(a[_],_);for(_ in d)this._addLayer(d[_],_,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ji.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(s(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):yn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=yt("div",a),p=this.options.collapsed;d.setAttribute("aria-haspopup",!0),$a(d),Su(d);var _=this._section=yt("section",a+"-list");p&&(this._map.on("click",this.collapse,this),Ke(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=yt("a",a+"-toggle",d);x.href="#",x.title="Layers",x.setAttribute("role","button"),Ke(x,{keydown:function(D){D.keyCode===13&&this._expandSafely()},click:function(D){cn(D),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=yt("div",a+"-base",_),this._separator=yt("div",a+"-separator",_),this._overlaysList=yt("div",a+"-overlays",_),d.appendChild(_)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&s(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,p){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:p}),this.options.sortLayers&&this._layers.sort(r(function(_,x){return this.options.sortFunction(_.layer,x.layer,_.name,x.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Bs(this._baseLayersList),Bs(this._overlaysList),this._layerControlInputs=[];var a,d,p,_,x=0;for(p=0;p<this._layers.length;p++)_=this._layers[p],this._addItem(_),d=d||_.overlay,a=a||!_.overlay,x+=_.overlay?0:1;return this.options.hideSingleBase&&(a=a&&x>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(s(a.target)),p=d.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;p&&this._map.fire(p,d)},_createRadioElement:function(a,d){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=p,_.firstChild},_addItem:function(a){var d=document.createElement("label"),p=this._map.hasLayer(a.layer),_;a.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=p):_=this._createRadioElement("leaflet-base-layers_"+s(this),p),this._layerControlInputs.push(_),_.layerId=s(a.layer),Ke(_,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+a.name;var D=document.createElement("span");d.appendChild(D),D.appendChild(_),D.appendChild(x);var z=a.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,d,p,_=[],x=[];this._handlingClick=!0;for(var D=a.length-1;D>=0;D--)d=a[D],p=this._getLayer(d.layerId).layer,d.checked?_.push(p):d.checked||x.push(p);for(D=0;D<x.length;D++)this._map.hasLayer(x[D])&&this._map.removeLayer(x[D]);for(D=0;D<_.length;D++)this._map.hasLayer(_[D])||this._map.addLayer(_[D]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,d,p,_=this._map.getZoom(),x=a.length-1;x>=0;x--)d=a[x],p=this._getLayer(d.layerId).layer,d.disabled=p.options.minZoom!==void 0&&_<p.options.minZoom||p.options.maxZoom!==void 0&&_>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Ke(a,"click",cn),this.expand();var d=this;setTimeout(function(){Wt(a,"click",cn),d._preventClick=!1})}}),Ou=function(a,d,p){return new Co(a,d,p)},Tn=ji.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",p=yt("div",d+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,d+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,d+"-out",p,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,p,_,x){var D=yt("a",p,_);return D.innerHTML=a,D.href="#",D.title=d,D.setAttribute("role","button"),D.setAttribute("aria-label",d),$a(D),Ke(D,"click",zi),Ke(D,"click",x,this),Ke(D,"click",this._refocusOnMap,this),D},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";yn(this._zoomInButton,d),yn(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Xe(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Xe(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});bt.mergeOptions({zoomControl:!0}),bt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Tn,this.addControl(this.zoomControl))});var Au=function(a){return new Tn(a)},ah=ji.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",p=yt("div",d),_=this.options;return this._addScales(_,d+"-line",p),a.on(_.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),p},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,p){a.metric&&(this._mScale=yt("div",d,p)),a.imperial&&(this._iScale=yt("div",d,p))},_update:function(){var a=this._map,d=a.getSize().y/2,p=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(p)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a),p=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,p,d/a)},_updateImperial:function(a){var d=a*3.2808399,p,_,x;d>5280?(p=d/5280,_=this._getRoundNum(p),this._updateScale(this._iScale,_+" mi",_/p)):(x=this._getRoundNum(d),this._updateScale(this._iScale,x+" ft",x/d))},_updateScale:function(a,d,p){a.style.width=Math.round(this.options.maxWidth*p)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),p=a/d;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,d*p}}),ro=function(a){return new ah(a)},Du='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Jo=ji.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ce.inlineSvg?Du+" ":"")+"Leaflet</a>"},initialize:function(a){T(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=yt("div","leaflet-control-attribution"),$a(this._container);for(var d in a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var p=[];this.options.prefix&&p.push(this.options.prefix),a.length&&p.push(a.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});bt.mergeOptions({attributionControl:!0}),bt.addInitHook(function(){this.options.attributionControl&&new Jo().addTo(this)});var Xo=function(a){return new Jo(a)};ji.Layers=Co,ji.Zoom=Tn,ji.Scale=ah,ji.Attribution=Jo,Zo.layers=Ou,Zo.zoom=Au,Zo.scale=ro,Zo.attribution=Xo;var Xi=F.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Xi.addTo=function(a,d){return a.addHandler(d,this),this};var es={Events:Ft},ch=Ce.touch?"touchstart mousedown":"mousedown",Ur=Li.extend({options:{clickTolerance:3},initialize:function(a,d,p,_){T(this,_),this._element=a,this._dragStartTarget=d||a,this._preventOutline=p},enable:function(){this._enabled||(Ke(this._dragStartTarget,ch,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ur._dragging===this&&this.finishDrag(!0),Wt(this._dragStartTarget,ch,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!ja(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Ur._dragging===this&&this.finishDrag();return}if(!(Ur._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Ur._dragging=this,this._preventOutline&&Eu(this._element),_r(),Qo(),!this._moving)){this.fire("down");var d=a.touches?a.touches[0]:a,p=oh(this._element);this._startPoint=new Je(d.clientX,d.clientY),this._startPos=Bi(this._element),this._parentScale=vr(p);var _=a.type==="mousedown";Ke(document,_?"mousemove":"touchmove",this._onMove,this),Ke(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var d=a.touches&&a.touches.length===1?a.touches[0]:a,p=new Je(d.clientX,d.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,cn(a),this._moved||(this.fire("dragstart"),this._moved=!0,Xe(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),tn(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){yn(document.body,"leaflet-dragging"),this._lastTarget&&(yn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wt(document,"mousemove touchmove",this._onMove,this),Wt(document,"mouseup touchend touchcancel",this._onUp,this),xu(),De();var d=this._moved&&this._moving;this._moving=!1,Ur._dragging=!1,d&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function zr(a,d,p){var _,x=[1,4,2,8],D,z,Q,Z,se,be,qe,wt;for(D=0,be=a.length;D<be;D++)a[D]._code=oo(a[D],d);for(Q=0;Q<4;Q++){for(qe=x[Q],_=[],D=0,be=a.length,z=be-1;D<be;z=D++)Z=a[D],se=a[z],Z._code&qe?se._code&qe||(wt=$s(se,Z,qe,d,p),wt._code=oo(wt,d),_.push(wt)):(se._code&qe&&(wt=$s(se,Z,qe,d,p),wt._code=oo(wt,d),_.push(wt)),_.push(Z));a=_}return a}function Qc(a,d){var p,_,x,D,z,Q,Z,se,be;if(!a||a.length===0)throw new Error("latlngs not passed");Ti(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var qe=vt([0,0]),wt=_t(a),br=wt.getNorthWest().distanceTo(wt.getSouthWest())*wt.getNorthEast().distanceTo(wt.getNorthWest());br<1700&&(qe=Ha(a));var Si=a.length,Eo=[];for(p=0;p<Si;p++){var jr=vt(a[p]);Eo.push(d.project(vt([jr.lat-qe.lat,jr.lng-qe.lng])))}for(Q=Z=se=0,p=0,_=Si-1;p<Si;_=p++)x=Eo[p],D=Eo[_],z=x.y*D.x-D.y*x.x,Z+=(x.x+D.x)*z,se+=(x.y+D.y)*z,Q+=z*3;Q===0?be=Eo[0]:be=[Z/Q,se/Q];var hh=d.unproject(ke(be));return vt([hh.lat+qe.lat,hh.lng+qe.lng])}function Ha(a){for(var d=0,p=0,_=0,x=0;x<a.length;x++){var D=vt(a[x]);d+=D.lat,p+=D.lng,_++}return vt([d/_,p/_])}var qa={__proto__:null,clipPolygon:zr,polygonCenter:Qc,centroid:Ha};function js(a,d){if(!d||!a.length)return a.slice();var p=d*d;return a=$i(a,p),a=ku(a,p),a}function Yc(a,d,p){return Math.sqrt(Bt(a,d,p,!0))}function ts(a,d,p){return Bt(a,d,p)}function ku(a,d){var p=a.length,_=typeof Uint8Array<"u"?Uint8Array:Array,x=new _(p);x[0]=x[p-1]=1,Ga(a,x,d,0,p-1);var D,z=[];for(D=0;D<p;D++)x[D]&&z.push(a[D]);return z}function Ga(a,d,p,_,x){var D=0,z,Q,Z;for(Q=_+1;Q<=x-1;Q++)Z=Bt(a[Q],a[_],a[x],!0),Z>D&&(z=Q,D=Z);D>p&&(d[z]=1,Ga(a,d,p,_,z),Ga(a,d,p,z,x))}function $i(a,d){for(var p=[a[0]],_=1,x=0,D=a.length;_<D;_++)ns(a[_],a[x])>d&&(p.push(a[_]),x=_);return x<D-1&&p.push(a[D-1]),p}var Zc;function Jc(a,d,p,_,x){var D=_?Zc:oo(a,p),z=oo(d,p),Q,Z,se;for(Zc=z;;){if(!(D|z))return[a,d];if(D&z)return!1;Q=D||z,Z=$s(a,d,Q,p,x),se=oo(Z,p),Q===D?(a=Z,D=se):(d=Z,z=se)}}function $s(a,d,p,_,x){var D=d.x-a.x,z=d.y-a.y,Q=_.min,Z=_.max,se,be;return p&8?(se=a.x+D*(Z.y-a.y)/z,be=Z.y):p&4?(se=a.x+D*(Q.y-a.y)/z,be=Q.y):p&2?(se=Z.x,be=a.y+z*(Z.x-a.x)/D):p&1&&(se=Q.x,be=a.y+z*(Q.x-a.x)/D),new Je(se,be,x)}function oo(a,d){var p=0;return a.x<d.min.x?p|=1:a.x>d.max.x&&(p|=2),a.y<d.min.y?p|=4:a.y>d.max.y&&(p|=8),p}function ns(a,d){var p=d.x-a.x,_=d.y-a.y;return p*p+_*_}function Bt(a,d,p,_){var x=d.x,D=d.y,z=p.x-x,Q=p.y-D,Z=z*z+Q*Q,se;return Z>0&&(se=((a.x-x)*z+(a.y-D)*Q)/Z,se>1?(x=p.x,D=p.y):se>0&&(x+=z*se,D+=Q*se)),z=a.x-x,Q=a.y-D,_?z*z+Q*Q:new Je(x,D)}function Ti(a){return!X(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function Xc(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ti(a)}function er(a,d){var p,_,x,D,z,Q,Z,se;if(!a||a.length===0)throw new Error("latlngs not passed");Ti(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var be=vt([0,0]),qe=_t(a),wt=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());wt<1700&&(be=Ha(a));var br=a.length,Si=[];for(p=0;p<br;p++){var Eo=vt(a[p]);Si.push(d.project(vt([Eo.lat-be.lat,Eo.lng-be.lng])))}for(p=0,_=0;p<br-1;p++)_+=Si[p].distanceTo(Si[p+1])/2;if(_===0)se=Si[0];else for(p=0,D=0;p<br-1;p++)if(z=Si[p],Q=Si[p+1],x=z.distanceTo(Q),D+=x,D>_){Z=(D-_)/x,se=[Q.x-Z*(Q.x-z.x),Q.y-Z*(Q.y-z.y)];break}var jr=d.unproject(ke(se));return vt([jr.lat+be.lat,jr.lng+be.lng])}var c={__proto__:null,simplify:js,pointToSegmentDistance:Yc,closestPointOnSegment:ts,clipSegment:Jc,_getEdgeIntersection:$s,_getBitCode:oo,_sqClosestPointOnSegment:Bt,isFlat:Ti,_flat:Xc,polylineCenter:er},h={project:function(a){return new Je(a.lng,a.lat)},unproject:function(a){return new Oe(a.y,a.x)},bounds:new Jt([-180,-90],[180,90])},g={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Jt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var d=Math.PI/180,p=this.R,_=a.lat*d,x=this.R_MINOR/p,D=Math.sqrt(1-x*x),z=D*Math.sin(_),Q=Math.tan(Math.PI/4-_/2)/Math.pow((1-z)/(1+z),D/2);return _=-p*Math.log(Math.max(Q,1e-10)),new Je(a.lng*d*p,_)},unproject:function(a){for(var d=180/Math.PI,p=this.R,_=this.R_MINOR/p,x=Math.sqrt(1-_*_),D=Math.exp(-a.y/p),z=Math.PI/2-2*Math.atan(D),Q=0,Z=.1,se;Q<15&&Math.abs(Z)>1e-7;Q++)se=x*Math.sin(z),se=Math.pow((1-se)/(1+se),x/2),Z=Math.PI/2-2*Math.atan(D*se)-z,z+=Z;return new Oe(z*d,a.x*d/p)}},v={__proto__:null,LonLat:h,Mercator:g,SphericalMercator:ou},N=t({},bo,{code:"EPSG:3395",projection:g,transformation:(function(){var a=.5/(Math.PI*g.R);return mr(a,.5,-a,.5)})()}),V=t({},bo,{code:"EPSG:4326",projection:h,transformation:mr(1/180,1,-1/180,.5)}),K=t({},zn,{projection:h,transformation:mr(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var p=d.lng-a.lng,_=d.lat-a.lat;return Math.sqrt(p*p+_*_)},infinite:!0});zn.Earth=bo,zn.EPSG3395=N,zn.EPSG3857=Jr,zn.EPSG900913=Ra,zn.EPSG4326=V,zn.Simple=K;var Ie=Li.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[s(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[s(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var p=this.getEvents();d.on(p,this),this.once("remove",function(){d.off(p,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});bt.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=s(a);return this._layers[d]?this:(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var d=s(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return s(a)in this._layers},eachLayer:function(a,d){for(var p in this._layers)a.call(d,this._layers[p]);return this},_addLayers:function(a){a=a?X(a)?a:[a]:[];for(var d=0,p=a.length;d<p;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[s(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=s(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,p=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var x=this._zoomBoundLayers[_].options;a=x.minZoom===void 0?a:Math.min(a,x.minZoom),d=x.maxZoom===void 0?d:Math.max(d,x.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var lt=Ie.extend({initialize:function(a,d){T(this,d),this._layers={};var p,_;if(a)for(p=0,_=a.length;p<_;p++)this.addLayer(a[p])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){var d=typeof a=="number"?a:this.getLayerId(a);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),p,_;for(p in this._layers)_=this._layers[p],_[a]&&_[a].apply(_,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var p in this._layers)a.call(d,this._layers[p]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return s(a)}}),Pe=function(a,d){return new lt(a,d)},ot=lt.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),lt.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),lt.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Ei;for(var d in this._layers){var p=this._layers[d];a.extend(p.getBounds?p.getBounds():p.getLatLng())}return a}}),At=function(a,d){return new ot(a,d)},Yn=F.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){T(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var p=this._getIconUrl(a);if(!p){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(p,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(_,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(a,d){var p=this.options,_=p[d+"Size"];typeof _=="number"&&(_=[_,_]);var x=ke(_),D=ke(d==="shadow"&&p.shadowAnchor||p.iconAnchor||x&&x.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(p.className||""),D&&(a.style.marginLeft=-D.x+"px",a.style.marginTop=-D.y+"px"),x&&(a.style.width=x.x+"px",a.style.height=x.y+"px")},_createImg:function(a,d){return d=d||document.createElement("img"),d.src=a,d},_getIconUrl:function(a){return Ce.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function wn(a){return new Yn(a)}var yr=Yn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof yr.imagePath!="string"&&(yr.imagePath=this._detectIconPath()),(this.options.imagePath||yr.imagePath)+Yn.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(p,_,x){var D=_.exec(p);return D&&D[x]};return a=d(a,/^url\((['"])?(.+)\1\)$/,2),a&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=yt("div","leaflet-default-icon-path",document.body),d=za(a,"background-image")||za(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d),d)return d;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Hs=Xi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Ur(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Xe(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,p=d._map,_=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,D=Bi(d._icon),z=p.getPixelBounds(),Q=p.getPixelOrigin(),Z=Kn(z.min._subtract(Q).add(x),z.max._subtract(Q).subtract(x));if(!Z.contains(D)){var se=ke((Math.max(Z.max.x,D.x)-Z.max.x)/(z.max.x-Z.max.x)-(Math.min(Z.min.x,D.x)-Z.min.x)/(z.min.x-Z.min.x),(Math.max(Z.max.y,D.y)-Z.max.y)/(z.max.y-Z.max.y)-(Math.min(Z.min.y,D.y)-Z.min.y)/(z.min.y-Z.min.y)).multiplyBy(_);p.panBy(se,{animate:!1}),this._draggable._newPos._add(se),this._draggable._startPos._add(se),tn(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=P(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=P(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,p=d._shadow,_=Bi(d._icon),x=d._map.layerPointToLatLng(_);p&&tn(p,_),d._latlng=x,a.latlng=x,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),M_=Ie.extend({options:{icon:new yr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){T(this,d),this._latlng=vt(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=vt(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=a.icon.createIcon(this._icon),_=!1;p!==this._icon&&(this._icon&&this._removeIcon(),_=!0,a.title&&(p.title=a.title),p.tagName==="IMG"&&(p.alt=a.alt||"")),Xe(p,d),a.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ke(p,"focus",this._panOnFocus,this);var x=a.icon.createShadow(this._shadow),D=!1;x!==this._shadow&&(this._removeShadow(),D=!0),x&&(Xe(x,d),x.alt=""),this._shadow=x,a.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&D&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wt(this._icon,"focus",this._panOnFocus,this),an(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&an(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&tn(this._icon,a),this._shadow&&tn(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(Xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Hs)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Hs(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Pi(this._icon,a),this._shadow&&Pi(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var d=this.options.icon.options,p=d.iconSize?ke(d.iconSize):ke(0,0),_=d.iconAnchor?ke(d.iconAnchor):ke(0,0);a.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:p.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function uz(a,d){return new M_(a,d)}var el=Ie.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return T(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),O_=el.extend({options:{fill:!0,radius:10},initialize:function(a,d){T(this,d),this._latlng=vt(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=vt(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return el.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,p=this._clickTolerance(),_=[a+p,d+p];this._pxBounds=new Jt(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function dz(a,d){return new O_(a,d)}var Vx=O_.extend({initialize:function(a,d,p){if(typeof d=="number"&&(d=t({},p,{radius:d})),T(this,d),this._latlng=vt(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Ei(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:el.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,p=this._map,_=p.options.crs;if(_.distance===bo.distance){var x=Math.PI/180,D=this._mRadius/bo.R/x,z=p.project([d+D,a]),Q=p.project([d-D,a]),Z=z.add(Q).divideBy(2),se=p.unproject(Z).lat,be=Math.acos((Math.cos(D*x)-Math.sin(d*x)*Math.sin(se*x))/(Math.cos(d*x)*Math.cos(se*x)))/x;(isNaN(be)||be===0)&&(be=D/Math.cos(Math.PI/180*d)),this._point=Z.subtract(p.getPixelOrigin()),this._radius=isNaN(be)?0:Z.x-p.project([se,a-be]).x,this._radiusY=Z.y-z.y}else{var qe=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(qe).x}this._updateBounds()}});function hz(a,d,p){return new Vx(a,d,p)}var Wa=el.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){T(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d=1/0,p=null,_=Bt,x,D,z=0,Q=this._parts.length;z<Q;z++)for(var Z=this._parts[z],se=1,be=Z.length;se<be;se++){x=Z[se-1],D=Z[se];var qe=_(a,x,D,!0);qe<d&&(d=qe,p=_(a,x,D))}return p&&(p.distance=Math.sqrt(d)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return er(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=vt(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Ei,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Ti(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],p=Ti(a),_=0,x=a.length;_<x;_++)p?(d[_]=vt(a[_]),this._bounds.extend(d[_])):d[_]=this._convertLatLngs(a[_]);return d},_project:function(){var a=new Jt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new Je(a,a);this._rawPxBounds&&(this._pxBounds=new Jt([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,p){var _=a[0]instanceof Oe,x=a.length,D,z;if(_){for(z=[],D=0;D<x;D++)z[D]=this._map.latLngToLayerPoint(a[D]),p.extend(z[D]);d.push(z)}else for(D=0;D<x;D++)this._projectLatlngs(a[D],d,p)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,p,_,x,D,z,Q,Z;for(p=0,x=0,D=this._rings.length;p<D;p++)for(Z=this._rings[p],_=0,z=Z.length;_<z-1;_++)Q=Jc(Z[_],Z[_+1],a,_,!0),Q&&(d[x]=d[x]||[],d[x].push(Q[0]),(Q[1]!==Z[_+1]||_===z-2)&&(d[x].push(Q[1]),x++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,p=0,_=a.length;p<_;p++)a[p]=js(a[p],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var p,_,x,D,z,Q,Z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(p=0,D=this._parts.length;p<D;p++)for(Q=this._parts[p],_=0,z=Q.length,x=z-1;_<z;x=_++)if(!(!d&&_===0)&&Yc(a,Q[x],Q[_])<=Z)return!0;return!1}});function fz(a,d){return new Wa(a,d)}Wa._flat=Xc;var lh=Wa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Qc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var d=Wa.prototype._convertLatLngs.call(this,a),p=d.length;return p>=2&&d[0]instanceof Oe&&d[0].equals(d[p-1])&&d.pop(),d},_setLatLngs:function(a){Wa.prototype._setLatLngs.call(this,a),Ti(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ti(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,p=new Je(d,d);if(a=new Jt(a.min.subtract(p),a.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,x=this._rings.length,D;_<x;_++)D=zr(this._rings[_],a,!0),D.length&&this._parts.push(D)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d=!1,p,_,x,D,z,Q,Z,se;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(D=0,Z=this._parts.length;D<Z;D++)for(p=this._parts[D],z=0,se=p.length,Q=se-1;z<se;Q=z++)_=p[z],x=p[Q],_.y>a.y!=x.y>a.y&&a.x<(x.x-_.x)*(a.y-_.y)/(x.y-_.y)+_.x&&(d=!d);return d||Wa.prototype._containsPoint.call(this,a,!0)}});function pz(a,d){return new lh(a,d)}var Ka=ot.extend({initialize:function(a,d){T(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d=X(a)?a:a.features,p,_,x;if(d){for(p=0,_=d.length;p<_;p++)x=d[p],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var D=this.options;if(D.filter&&!D.filter(a))return this;var z=A_(a,D);return z?(z.feature=R_(a),z.defaultOptions=z.options,this.resetStyle(z),D.onEachFeature&&D.onEachFeature(a,z),this.addLayer(z)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=t({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&(typeof d=="function"&&(d=d(a.feature)),a.setStyle(d))}});function A_(a,d){var p=a.type==="Feature"?a.geometry:a,_=p?p.coordinates:null,x=[],D=d&&d.pointToLayer,z=d&&d.coordsToLatLng||Bx,Q,Z,se,be;if(!_&&!p)return null;switch(p.type){case"Point":return Q=z(_),ZD(D,a,Q,d);case"MultiPoint":for(se=0,be=_.length;se<be;se++)Q=z(_[se]),x.push(ZD(D,a,Q,d));return new ot(x);case"LineString":case"MultiLineString":return Z=D_(_,p.type==="LineString"?0:1,z),new Wa(Z,d);case"Polygon":case"MultiPolygon":return Z=D_(_,p.type==="Polygon"?1:2,z),new lh(Z,d);case"GeometryCollection":for(se=0,be=p.geometries.length;se<be;se++){var qe=A_({geometry:p.geometries[se],type:"Feature",properties:a.properties},d);qe&&x.push(qe)}return new ot(x);case"FeatureCollection":for(se=0,be=p.features.length;se<be;se++){var wt=A_(p.features[se],d);wt&&x.push(wt)}return new ot(x);default:throw new Error("Invalid GeoJSON object.")}}function ZD(a,d,p,_){return a?a(d,p):new M_(p,_&&_.markersInheritOptions&&_)}function Bx(a){return new Oe(a[1],a[0],a[2])}function D_(a,d,p){for(var _=[],x=0,D=a.length,z;x<D;x++)z=d?D_(a[x],d-1,p):(p||Bx)(a[x]),_.push(z);return _}function Ux(a,d){return a=vt(a),a.alt!==void 0?[m(a.lng,d),m(a.lat,d),m(a.alt,d)]:[m(a.lng,d),m(a.lat,d)]}function k_(a,d,p,_){for(var x=[],D=0,z=a.length;D<z;D++)x.push(d?k_(a[D],Ti(a[D])?0:d-1,p,_):Ux(a[D],_));return!d&&p&&x.length>0&&x.push(x[0].slice()),x}function uh(a,d){return a.feature?t({},a.feature,{geometry:d}):R_(d)}function R_(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var zx={toGeoJSON:function(a){return uh(this,{type:"Point",coordinates:Ux(this.getLatLng(),a)})}};M_.include(zx),Vx.include(zx),O_.include(zx),Wa.include({toGeoJSON:function(a){var d=!Ti(this._latlngs),p=k_(this._latlngs,d?1:0,!1,a);return uh(this,{type:(d?"Multi":"")+"LineString",coordinates:p})}}),lh.include({toGeoJSON:function(a){var d=!Ti(this._latlngs),p=d&&!Ti(this._latlngs[0]),_=k_(this._latlngs,p?2:d?1:0,!0,a);return d||(_=[_]),uh(this,{type:(p?"Multi":"")+"Polygon",coordinates:_})}}),lt.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(p){d.push(p.toGeoJSON(a).geometry.coordinates)}),uh(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(a);var p=d==="GeometryCollection",_=[];return this.eachLayer(function(x){if(x.toGeoJSON){var D=x.toGeoJSON(a);if(p)_.push(D.geometry);else{var z=R_(D);z.type==="FeatureCollection"?_.push.apply(_,z.features):_.push(z)}}}),p?uh(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function JD(a,d){return new Ka(a,d)}var gz=JD,N_=Ie.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,p){this._url=a,this._bounds=_t(d),T(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){an(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Fr(this._image),this},bringToBack:function(){return this._map&&Vr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=_t(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",d=this._image=a?this._url:yt("img");if(Xe(d,"leaflet-image-layer"),this._zoomAnimated&&Xe(d,"leaflet-zoom-animated"),this.options.className&&Xe(d,this.options.className),d.onselectstart=f,d.onmousemove=f,d.onload=r(this.fire,this,"load"),d.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;hn(this._image,p,d)},_reset:function(){var a=this._image,d=new Jt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=d.getSize();tn(a,d.min),a.style.width=p.x+"px",a.style.height=p.y+"px"},_updateOpacity:function(){Pi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),mz=function(a,d,p){return new N_(a,d,p)},XD=N_.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",d=this._image=a?this._url:yt("video");if(Xe(d,"leaflet-image-layer"),this._zoomAnimated&&Xe(d,"leaflet-zoom-animated"),this.options.className&&Xe(d,this.options.className),d.onselectstart=f,d.onmousemove=f,d.onloadeddata=r(this.fire,this,"load"),a){for(var p=d.getElementsByTagName("source"),_=[],x=0;x<p.length;x++)_.push(p[x].src);this._url=p.length>0?_:[d.src];return}X(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var D=0;D<this._url.length;D++){var z=yt("source");z.src=this._url[D],d.appendChild(z)}}});function _z(a,d,p){return new XD(a,d,p)}var e2=N_.extend({_initImage:function(){var a=this._image=this._url;Xe(a,"leaflet-image-layer"),this._zoomAnimated&&Xe(a,"leaflet-zoom-animated"),this.options.className&&Xe(a,this.options.className),a.onselectstart=f,a.onmousemove=f}});function vz(a,d,p){return new e2(a,d,p)}var qs=Ie.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,d){a&&(a instanceof Oe||X(a))?(this._latlng=vt(a),T(this,d)):(T(this,a),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Pi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Pi(this._container,1),this.bringToFront(),this.options.interactive&&(Xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Pi(this._container,0),this._removeTimeout=setTimeout(r(an,void 0,this._container),200)):an(this._container),this.options.interactive&&(yn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=vt(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Fr(this._container),this},bringToBack:function(){return this._map&&Vr(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof ot){d=null;var p=this._source._layers;for(var _ in p)if(p[_]._map){d=p[_];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else if(d.getBounds)a=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=ke(this.options.offset),p=this._getAnchor();this._zoomAnimated?tn(this._container,a.add(p)):d=d.add(a).add(p);var _=this._containerBottom=-d.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=_+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});bt.include({_initOverlay:function(a,d,p,_){var x=d;return x instanceof a||(x=new a(_).setContent(d)),p&&x.setLatLng(p),x}}),Ie.include({_initOverlay:function(a,d,p,_){var x=p;return x instanceof a?(T(x,_),x._source=this):(x=d&&!_?d:new a(_,this),x.setContent(p)),x}});var L_=qs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,qs.prototype.openOn.call(this,a)},onAdd:function(a){qs.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof el||this._source.on("preclick",bn))},onRemove:function(a){qs.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof el||this._source.off("preclick",bn))},getEvents:function(){var a=qs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=yt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=yt("div",a+"-content-wrapper",d);if(this._contentNode=yt("div",a+"-content",p),$a(d),Su(this._contentNode),Ke(d,"contextmenu",bn),this._tipContainer=yt("div",a+"-tip-container",d),this._tip=yt("div",a+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=yt("a",a+"-close-button",d);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',Ke(_,"click",function(x){cn(x),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var p=a.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),d.width=p+1+"px",d.whiteSpace="",d.height="";var _=a.offsetHeight,x=this.options.maxHeight,D="leaflet-popup-scrolled";x&&_>x?(d.height=x+"px",Xe(a,D)):yn(a,D),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),p=this._getAnchor();tn(this._container,d.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,d=parseInt(za(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+d,_=this._containerWidth,x=new Je(this._containerLeft,-p-this._containerBottom);x._add(Bi(this._container));var D=a.layerPointToContainerPoint(x),z=ke(this.options.autoPanPadding),Q=ke(this.options.autoPanPaddingTopLeft||z),Z=ke(this.options.autoPanPaddingBottomRight||z),se=a.getSize(),be=0,qe=0;D.x+_+Z.x>se.x&&(be=D.x+_-se.x+Z.x),D.x-be-Q.x<0&&(be=D.x-Q.x),D.y+p+Z.y>se.y&&(qe=D.y+p-se.y+Z.y),D.y-qe-Q.y<0&&(qe=D.y-Q.y),(be||qe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([be,qe]))}},_getAnchor:function(){return ke(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),yz=function(a,d){return new L_(a,d)};bt.mergeOptions({closePopupOnClick:!0}),bt.include({openPopup:function(a,d,p){return this._initOverlay(L_,a,d,p).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Ie.include({bindPopup:function(a,d){return this._popup=this._initOverlay(L_,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof ot||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){zi(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof el)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var F_=qs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){qs.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){qs.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=qs.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",d=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=yt("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,p,_=this._map,x=this._container,D=_.latLngToContainerPoint(_.getCenter()),z=_.layerPointToContainerPoint(a),Q=this.options.direction,Z=x.offsetWidth,se=x.offsetHeight,be=ke(this.options.offset),qe=this._getAnchor();Q==="top"?(d=Z/2,p=se):Q==="bottom"?(d=Z/2,p=0):Q==="center"?(d=Z/2,p=se/2):Q==="right"?(d=0,p=se/2):Q==="left"?(d=Z,p=se/2):z.x<D.x?(Q="right",d=0,p=se/2):(Q="left",d=Z+(be.x+qe.x)*2,p=se/2),a=a.subtract(ke(d,p,!0)).add(be).add(qe),yn(x,"leaflet-tooltip-right"),yn(x,"leaflet-tooltip-left"),yn(x,"leaflet-tooltip-top"),yn(x,"leaflet-tooltip-bottom"),Xe(x,"leaflet-tooltip-"+Q),tn(x,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Pi(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return ke(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),bz=function(a,d){return new F_(a,d)};bt.include({openTooltip:function(a,d,p){return this._initOverlay(F_,a,d,p).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Ie.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(F_,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var d=a?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[d](p),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof ot||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&(Ke(d,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Ke(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var d=a.latlng,p,_;this._tooltip.options.sticky&&a.originalEvent&&(p=this._map.mouseEventToContainerPoint(a.originalEvent),_=this._map.containerPointToLayerPoint(p),d=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(d)}});var t2=Yn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&a.tagName==="DIV"?a:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Bs(d),d.appendChild(p.html)):d.innerHTML=p.html!==!1?p.html:"",p.bgPos){var _=ke(p.bgPos);d.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function wz(a){return new t2(a)}Yn.Default=yr;var Dp=Ie.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){T(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),an(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Fr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Vr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Je?a:new Je(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d=this.getPane().children,p=-a(-1/0,1/0),_=0,x=d.length,D;_<x;_++)D=d[_].style.zIndex,d[_]!==this._container&&D&&(p=a(p,+D));isFinite(p)&&(this.options.zIndex=p+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ce.ielt9){Pi(this._container,this.options.opacity);var a=+new Date,d=!1,p=!1;for(var _ in this._tiles){var x=this._tiles[_];if(!(!x.current||!x.loaded)){var D=Math.min(1,(a-x.loaded)/200);Pi(x.el,D),D<1?d=!0:(x.active?p=!0:this._onOpaqueTile(x),x.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),d&&(A(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=yt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(a!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===a?(this._levels[p].el.style.zIndex=d-Math.abs(a-p),this._onUpdateLevel(p)):(an(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var _=this._levels[a],x=this._map;return _||(_=this._levels[a]={},_.el=yt("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=d,_.origin=x.project(x.unproject(x.getPixelOrigin()),a).round(),_.zoom=a,this._setZoomTransform(_,x.getCenter(),x.getZoom()),f(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var a,d,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)d=this._tiles[a],d.retain=d.current;for(a in this._tiles)if(d=this._tiles[a],d.current&&!d.active){var _=d.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)an(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,p,_){var x=Math.floor(a/2),D=Math.floor(d/2),z=p-1,Q=new Je(+x,+D);Q.z=+z;var Z=this._tileCoordsToKey(Q),se=this._tiles[Z];return se&&se.active?(se.retain=!0,!0):(se&&se.loaded&&(se.retain=!0),z>_?this._retainParent(x,D,z,_):!1)},_retainChildren:function(a,d,p,_){for(var x=2*a;x<2*a+2;x++)for(var D=2*d;D<2*d+2;D++){var z=new Je(x,D);z.z=p+1;var Q=this._tileCoordsToKey(z),Z=this._tiles[Q];if(Z&&Z.active){Z.retain=!0;continue}else Z&&Z.loaded&&(Z.retain=!0);p+1<_&&this._retainChildren(x,D,p+1,_)}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return d.minNativeZoom!==void 0&&a<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,p,_){var x=Math.round(d);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var D=this.options.updateWhenZooming&&x!==this._tileZoom;(!_||D)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(a),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var p in this._levels)this._setZoomTransform(this._levels[p],a,d)},_setZoomTransform:function(a,d,p){var _=this._map.getZoomScale(p,a.zoom),x=a.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(d,p)).round();Ce.any3d?hn(a.el,x,_):tn(a.el,x)},_resetGrid:function(){var a=this._map,d=a.options.crs,p=this._tileSize=this.getTileSize(),_=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],_).x/p.x),Math.ceil(a.project([0,d.wrapLng[1]],_).x/p.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],_).y/p.x),Math.ceil(a.project([d.wrapLat[1],0],_).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,p=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),_=d.getZoomScale(p,this._tileZoom),x=d.project(a,this._tileZoom).floor(),D=d.getSize().divideBy(_*2);return new Jt(x.subtract(D),x.add(D))},_update:function(a){var d=this._map;if(d){var p=this._clampZoom(d.getZoom());if(a===void 0&&(a=d.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(a),x=this._pxBoundsToTileRange(_),D=x.getCenter(),z=[],Q=this.options.keepBuffer,Z=new Jt(x.getBottomLeft().subtract([Q,-Q]),x.getTopRight().add([Q,-Q]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var se in this._tiles){var be=this._tiles[se].coords;(be.z!==this._tileZoom||!Z.contains(new Je(be.x,be.y)))&&(this._tiles[se].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(a,p);return}for(var qe=x.min.y;qe<=x.max.y;qe++)for(var wt=x.min.x;wt<=x.max.x;wt++){var br=new Je(wt,qe);if(br.z=this._tileZoom,!!this._isValidTile(br)){var Si=this._tiles[this._tileCoordsToKey(br)];Si?Si.current=!0:z.push(br)}}if(z.sort(function(jr,hh){return jr.distanceTo(D)-hh.distanceTo(D)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Eo=document.createDocumentFragment();for(wt=0;wt<z.length;wt++)this._addTile(z[wt],Eo);this._level.el.appendChild(Eo)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var p=this._globalTileRange;if(!d.wrapLng&&(a.x<p.min.x||a.x>p.max.x)||!d.wrapLat&&(a.y<p.min.y||a.y>p.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(a);return _t(this.options.bounds).overlaps(_)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,p=this.getTileSize(),_=a.scaleBy(p),x=_.add(p),D=d.unproject(_,a.z),z=d.unproject(x,a.z);return[D,z]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),p=new Ei(d[0],d[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),p=new Je(+d[0],+d[1]);return p.z=+d[2],p},_removeTile:function(a){var d=this._tiles[a];d&&(an(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Xe(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=f,a.onmousemove=f,Ce.ielt9&&this.options.opacity<1&&Pi(a,this.options.opacity)},_addTile:function(a,d){var p=this._getTilePos(a),_=this._tileCoordsToKey(a),x=this.createTile(this._wrapCoords(a),r(this._tileReady,this,a));this._initTile(x),this.createTile.length<2&&P(r(this._tileReady,this,a,null,x)),tn(x,p),this._tiles[_]={el:x,coords:a,current:!0},d.appendChild(x),this.fire("tileloadstart",{tile:x,coords:a})},_tileReady:function(a,d,p){d&&this.fire("tileerror",{error:d,tile:p,coords:a});var _=this._tileCoordsToKey(a);p=this._tiles[_],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Pi(p.el,0),A(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),d||(Xe(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ce.ielt9||!this._map._fadeAnimated?P(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new Je(this._wrapX?u(a.x,this._wrapX):a.x,this._wrapY?u(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new Jt(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function xz(a){return new Dp(a)}var dh=Dp.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,d=T(this,d),d.detectRetina&&Ce.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&d===void 0&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var p=document.createElement("img");return Ke(p,"load",r(this._tileOnLoad,this,d,p)),Ke(p,"error",r(this._tileOnError,this,d,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(a),p},getTileUrl:function(a){var d={r:Ce.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=p),d["-y"]=p}return j(this._url,t(d,this.options))},_tileOnLoad:function(a,d){Ce.ielt9?setTimeout(r(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,p){var _=this.options.errorTileUrl;_&&d.getAttribute("src")!==_&&(d.src=_),a(p,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,d=this.options.maxZoom,p=this.options.zoomReverse,_=this.options.zoomOffset;return p&&(a=d-a),a+_},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(d=this._tiles[a].el,d.onload=f,d.onerror=f,!d.complete)){d.src=le;var p=this._tiles[a].coords;an(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:p})}},_removeTile:function(a){var d=this._tiles[a];if(d)return d.el.setAttribute("src",le),Dp.prototype._removeTile.call(this,a)},_tileReady:function(a,d,p){if(!(!this._map||p&&p.getAttribute("src")===le))return Dp.prototype._tileReady.call(this,a,d,p)}});function n2(a,d){return new dh(a,d)}var i2=dh.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var p=t({},this.defaultWmsParams);for(var _ in d)_ in this.options||(p[_]=d[_]);d=T(this,d);var x=d.detectRetina&&Ce.retina?2:1,D=this.getTileSize();p.width=D.x*x,p.height=D.y*x,this.wmsParams=p},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,dh.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),p=this._crs,_=Kn(p.project(d[0]),p.project(d[1])),x=_.min,D=_.max,z=(this._wmsVersion>=1.3&&this._crs===V?[x.y,x.x,D.y,D.x]:[x.x,x.y,D.x,D.y]).join(","),Q=dh.prototype.getTileUrl.call(this,a);return Q+U(this.wmsParams,Q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(a,d){return t(this.wmsParams,a),d||this.redraw(),this}});function Cz(a,d){return new i2(a,d)}dh.WMS=i2,n2.wms=Cz;var Qa=Ie.extend({options:{padding:.1},initialize:function(a){T(this,a),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var p=this._map.getZoomScale(d,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,d),D=_.multiplyBy(-p).add(x).subtract(this._map._getNewPixelOrigin(a,d));Ce.any3d?hn(this._container,D,p):tn(this._container,D)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),p=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new Jt(p,p.add(d.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),r2=Qa.extend({options:{tolerance:0},getEvents:function(){var a=Qa.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Ke(a,"mousemove",this._onMouseMove,this),Ke(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ke(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,an(this._container),Wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var d in this._layers)a=this._layers[d],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qa.prototype._update.call(this);var a=this._bounds,d=this._container,p=a.getSize(),_=Ce.retina?2:1;tn(d,a.min),d.width=_*p.x,d.height=_*p.y,d.style.width=p.x+"px",d.style.height=p.y+"px",Ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Qa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[s(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,p=d.next,_=d.prev;p?p.prev=_:this._drawLast=_,_?_.next=p:this._drawFirst=p,delete a._order,delete this._layers[s(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var d=a.options.dashArray.split(/[, ]+/),p=[],_,x;for(x=0;x<d.length;x++){if(_=Number(d[x]),isNaN(_))return;p.push(_)}a.options._dashArray=p}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||P(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Jt,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var p=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)a=_.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(this._drawing){var p,_,x,D,z=a._parts,Q=z.length,Z=this._ctx;if(Q){for(Z.beginPath(),p=0;p<Q;p++){for(_=0,x=z[p].length;_<x;_++)D=z[p][_],Z[_?"lineTo":"moveTo"](D.x,D.y);d&&Z.closePath()}this._fillStroke(Z,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var d=a._point,p=this._ctx,_=Math.max(Math.round(a._radius),1),x=(Math.max(Math.round(a._radiusY),1)||_)/_;x!==1&&(p.save(),p.scale(1,x)),p.beginPath(),p.arc(d.x,d.y/x,_,0,Math.PI*2,!1),x!==1&&p.restore(),this._fillStroke(p,a)}},_fillStroke:function(a,d){var p=d.options;p.fill&&(a.globalAlpha=p.fillOpacity,a.fillStyle=p.fillColor||p.color,a.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=p.opacity,a.lineWidth=p.weight,a.strokeStyle=p.color,a.lineCap=p.lineCap,a.lineJoin=p.lineJoin,a.stroke())},_onClick:function(a){for(var d=this._map.mouseEventToLayerPoint(a),p,_,x=this._drawFirst;x;x=x.next)p=x.layer,p.options.interactive&&p._containsPoint(d)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(p))&&(_=p);this._fireEvent(_?[_]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(yn(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var p,_,x=this._drawFirst;x;x=x.next)p=x.layer,p.options.interactive&&p._containsPoint(d)&&(_=p);_!==this._hoveredLayer&&(this._handleMouseOut(a),_&&(Xe(this._container,"leaflet-interactive"),this._fireEvent([_],a,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,p){this._map._fireDOMEvent(d,p||d.type,a)},_bringToFront:function(a){var d=a._order;if(d){var p=d.next,_=d.prev;if(p)p.prev=_;else return;_?_.next=p:p&&(this._drawFirst=p),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(d){var p=d.next,_=d.prev;if(_)_.next=p;else return;p?p.prev=_:_&&(this._drawLast=_),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function o2(a){return Ce.canvas?new r2(a):null}var kp=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ez={_initContainer:function(){this._container=yt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qa.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=kp("shape");Xe(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=kp("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[s(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;an(d),a.removeInteractiveTarget(d),delete this._layers[s(a)]},_updateStyle:function(a){var d=a._stroke,p=a._fill,_=a.options,x=a._container;x.stroked=!!_.stroke,x.filled=!!_.fill,_.stroke?(d||(d=a._stroke=kp("stroke")),x.appendChild(d),d.weight=_.weight+"px",d.color=_.color,d.opacity=_.opacity,_.dashArray?d.dashStyle=X(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=_.lineCap.replace("butt","flat"),d.joinstyle=_.lineJoin):d&&(x.removeChild(d),a._stroke=null),_.fill?(p||(p=a._fill=kp("fill")),x.appendChild(p),p.color=_.fillColor||_.color,p.opacity=_.fillOpacity):p&&(x.removeChild(p),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),p=Math.round(a._radius),_=Math.round(a._radiusY||p);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+p+","+_+" 0,"+65535*360)},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){Fr(a._container)},_bringToBack:function(a){Vr(a._container)}},V_=Ce.vml?kp:As,Rp=Qa.extend({_initContainer:function(){this._container=V_("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=V_("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){an(this._container),Wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qa.prototype._update.call(this);var a=this._bounds,d=a.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,p.setAttribute("width",d.x),p.setAttribute("height",d.y)),tn(p,a.min),p.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=V_("path");a.options.className&&Xe(d,a.options.className),a.options.interactive&&Xe(d,"leaflet-interactive"),this._updateStyle(a),this._layers[s(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){an(a._path),a.removeInteractiveTarget(a._path),delete this._layers[s(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,p=a.options;d&&(p.stroke?(d.setAttribute("stroke",p.color),d.setAttribute("stroke-opacity",p.opacity),d.setAttribute("stroke-width",p.weight),d.setAttribute("stroke-linecap",p.lineCap),d.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?d.setAttribute("stroke-dasharray",p.dashArray):d.removeAttribute("stroke-dasharray"),p.dashOffset?d.setAttribute("stroke-dashoffset",p.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),p.fill?(d.setAttribute("fill",p.fillColor||p.color),d.setAttribute("fill-opacity",p.fillOpacity),d.setAttribute("fill-rule",p.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,Ds(a._parts,d))},_updateCircle:function(a){var d=a._point,p=Math.max(Math.round(a._radius),1),_=Math.max(Math.round(a._radiusY),1)||p,x="a"+p+","+_+" 0 1,0 ",D=a._empty()?"M0 0":"M"+(d.x-p)+","+d.y+x+p*2+",0 "+x+-p*2+",0 ";this._setPath(a,D)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){Fr(a._path)},_bringToBack:function(a){Vr(a._path)}});Ce.vml&&Rp.include(Ez);function s2(a){return Ce.svg||Ce.vml?new Rp(a):null}bt.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var d=this._paneRenderers[a];return d===void 0&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&o2(a)||s2(a)}});var a2=lh.extend({initialize:function(a,d){lh.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=_t(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function Iz(a,d){return new a2(a,d)}Rp.create=V_,Rp.pointsToPath=Ds,Ka.geometryToLayer=A_,Ka.coordsToLatLng=Bx,Ka.coordsToLatLngs=D_,Ka.latLngToCoords=Ux,Ka.latLngsToCoords=k_,Ka.getFeature=uh,Ka.asFeature=R_,bt.mergeOptions({boxZoom:!0});var c2=Xi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Ke(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){an(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qo(),_r(),this._startPoint=this._map.mouseEventToContainerPoint(a),Ke(document,{contextmenu:zi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=yt("div","leaflet-zoom-box",this._container),Xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new Jt(this._point,this._startPoint),p=d.getSize();tn(this._box,d.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(an(this._box),yn(this._container,"leaflet-crosshair")),De(),xu(),Wt(document,{contextmenu:zi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var d=new Ei(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});bt.addInitHook("addHandler","boxZoom",c2),bt.mergeOptions({doubleClickZoom:!0});var l2=Xi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,p=d.getZoom(),_=d.options.zoomDelta,x=a.originalEvent.shiftKey?p-_:p+_;d.options.doubleClickZoom==="center"?d.setZoom(x):d.setZoomAround(a.containerPoint,x)}});bt.addInitHook("addHandler","doubleClickZoom",l2),bt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var u2=Xi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Ur(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yn(this._map._container,"leaflet-grab"),yn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=_t(this._map.options.maxBounds);this._offsetLimit=Kn(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),p=this._initialWorldOffset,_=this._draggable._newPos.x,x=(_-d+p)%a+d-p,D=(_+d+p)%a-d-p,z=Math.abs(x+p)<Math.abs(D+p)?x:D;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(a){var d=this._map,p=d.options,_=!p.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),_)d.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),D=(this._lastTime-this._times[0])/1e3,z=p.easeLinearity,Q=x.multiplyBy(z/D),Z=Q.distanceTo([0,0]),se=Math.min(p.inertiaMaxSpeed,Z),be=Q.multiplyBy(se/Z),qe=se/(p.inertiaDeceleration*z),wt=be.multiplyBy(-qe/2).round();!wt.x&&!wt.y?d.fire("moveend"):(wt=d._limitOffset(wt,d.options.maxBounds),P(function(){d.panBy(wt,{duration:qe,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});bt.addInitHook("addHandler","dragging",u2),bt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var d2=Xi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Ke(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,p=a.scrollTop||d.scrollTop,_=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(_,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d=this._panKeys={},p=this.keyCodes,_,x;for(_=0,x=p.left.length;_<x;_++)d[p.left[_]]=[-1*a,0];for(_=0,x=p.right.length;_<x;_++)d[p.right[_]]=[a,0];for(_=0,x=p.down.length;_<x;_++)d[p.down[_]]=[0,a];for(_=0,x=p.up.length;_<x;_++)d[p.up[_]]=[0,-1*a]},_setZoomDelta:function(a){var d=this._zoomKeys={},p=this.keyCodes,_,x;for(_=0,x=p.zoomIn.length;_<x;_++)d[p.zoomIn[_]]=a;for(_=0,x=p.zoomOut.length;_<x;_++)d[p.zoomOut[_]]=-a},_addHooks:function(){Ke(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d=a.keyCode,p=this._map,_;if(d in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(_=this._panKeys[d],a.shiftKey&&(_=ke(_).multiplyBy(3)),p.options.maxBounds&&(_=p._limitOffset(ke(_),p.options.maxBounds)),p.options.worldCopyJump){var x=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(_)));p.panTo(x)}else p.panBy(_)}else if(d in this._zoomKeys)p.setZoom(p.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;zi(a)}}});bt.addInitHook("addHandler","keyboard",d2),bt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var h2=Xi.extend({addHooks:function(){Ke(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=Kc(a),p=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var _=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),_),zi(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),p=this._map.options.zoomSnap||0;a._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,D=p?Math.ceil(x/p)*p:x,z=a._limitZoom(d+(this._delta>0?D:-D))-d;this._delta=0,this._startTime=null,z&&(a.options.scrollWheelZoom==="center"?a.setZoom(d+z):a.setZoomAround(this._lastMousePos,d+z))}});bt.addInitHook("addHandler","scrollWheelZoom",h2);var Pz=600;bt.mergeOptions({tapHold:Ce.touchNative&&Ce.safari&&Ce.mobile,tapTolerance:15});var f2=Xi.extend({addHooks:function(){Ke(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var d=a.touches[0];this._startPos=this._newPos=new Je(d.clientX,d.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Ke(document,"touchend",cn),Ke(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Pz),Ke(document,"touchend touchcancel contextmenu",this._cancel,this),Ke(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Wt(document,"touchend",cn),Wt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Wt(document,"touchend touchcancel contextmenu",this._cancel,this),Wt(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new Je(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var p=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});p._simulated=!0,d.target.dispatchEvent(p)}});bt.addInitHook("addHandler","tapHold",f2),bt.mergeOptions({touchZoom:Ce.touch,bounceAtZoomLimits:!0});var p2=Xi.extend({addHooks:function(){Xe(this._map._container,"leaflet-touch-zoom"),Ke(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yn(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(!(!a.touches||a.touches.length!==2||d._animatingZoom||this._zooming)){var p=d.mouseEventToContainerPoint(a.touches[0]),_=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(p.add(_)._divideBy(2))),this._startDist=p.distanceTo(_),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),Ke(document,"touchmove",this._onTouchMove,this),Ke(document,"touchend touchcancel",this._onTouchEnd,this),cn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var d=this._map,p=d.mouseEventToContainerPoint(a.touches[0]),_=d.mouseEventToContainerPoint(a.touches[1]),x=p.distanceTo(_)/this._startDist;if(this._zoom=d.getScaleZoom(x,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&x<1||this._zoom>d.getMaxZoom()&&x>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var D=p._add(_)._divideBy(2)._subtract(this._centerPoint);if(x===1&&D.x===0&&D.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(D),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var z=r(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=P(z,this,!0),cn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});bt.addInitHook("addHandler","touchZoom",p2),bt.BoxZoom=c2,bt.DoubleClickZoom=l2,bt.Drag=u2,bt.Keyboard=d2,bt.ScrollWheelZoom=h2,bt.TapHold=f2,bt.TouchZoom=p2,n.Bounds=Jt,n.Browser=Ce,n.CRS=zn,n.Canvas=r2,n.Circle=Vx,n.CircleMarker=O_,n.Class=F,n.Control=ji,n.DivIcon=t2,n.DivOverlay=qs,n.DomEvent=Qe,n.DomUtil=vi,n.Draggable=Ur,n.Evented=Li,n.FeatureGroup=ot,n.GeoJSON=Ka,n.GridLayer=Dp,n.Handler=Xi,n.Icon=Yn,n.ImageOverlay=N_,n.LatLng=Oe,n.LatLngBounds=Ei,n.Layer=Ie,n.LayerGroup=lt,n.LineUtil=c,n.Map=bt,n.Marker=M_,n.Mixin=es,n.Path=el,n.Point=Je,n.PolyUtil=qa,n.Polygon=lh,n.Polyline=Wa,n.Popup=L_,n.PosAnimation=sh,n.Projection=v,n.Rectangle=a2,n.Renderer=Qa,n.SVG=Rp,n.SVGOverlay=e2,n.TileLayer=dh,n.Tooltip=F_,n.Transformation=su,n.Util=R,n.VideoOverlay=XD,n.bind=r,n.bounds=Kn,n.canvas=o2,n.circle=hz,n.circleMarker=dz,n.control=Zo,n.divIcon=wz,n.extend=t,n.featureGroup=At,n.geoJSON=JD,n.geoJson=gz,n.gridLayer=xz,n.icon=wn,n.imageOverlay=mz,n.latLng=vt,n.latLngBounds=_t,n.layerGroup=Pe,n.map=Mu,n.marker=uz,n.point=ke,n.polygon=pz,n.polyline=fz,n.popup=yz,n.rectangle=Iz,n.setOptions=T,n.stamp=s,n.svg=s2,n.svgOverlay=vz,n.tileLayer=n2,n.tooltip=bz,n.transformation=mr,n.version=e,n.videoOverlay=_z;var Tz=window.L;n.noConflict=function(){return window.L=Tz,this},window.L=n})});var Hx;function U_(){return Hx}function Ws(n){let e=Hx;return Hx=n,e}var C2=Symbol("NotFound");function fh(n){return n===C2||n?.name==="\u0275NotFound"}var tr=null,z_=!1,qx=1,qz=null,nr=Symbol("SIGNAL");function tt(n){let e=tr;return tr=n,e}function q_(){return tr}var ph={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function gh(n){if(z_)throw new Error("");if(tr===null)return;tr.consumerOnSignalRead(n);let e=tr.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=tr.recomputing;if(i&&(t=e!==void 0?e.nextProducer:tr.producers,t!==void 0&&t.producer===n)){tr.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===tr&&(!i||Wz(r,tr)))return;let o=_h(tr),s={producer:n,consumer:tr,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};tr.producersTail=s,e!==void 0?e.nextProducer=s:tr.producers=s,o&&T2(n,s)}function E2(){qx++}function G_(n){if(!(_h(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===qx)){if(!n.producerMustRecompute(n)&&!Fp(n)){H_(n);return}n.producerRecomputeValue(n),H_(n)}}function Gx(n){if(n.consumers===void 0)return;let e=z_;z_=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||Gz(i)}}finally{z_=e}}function Wx(){return tr?.consumerAllowSignalWrites!==!1}function Gz(n){n.dirty=!0,Gx(n),n.consumerMarkedDirty?.(n)}function H_(n){n.dirty=!1,n.lastCleanEpoch=qx}function mh(n){return n&&I2(n),tt(n)}function I2(n){n.producersTail=void 0,n.recomputing=!0}function Lp(n,e){tt(e),n&&P2(n)}function P2(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(_h(n))do t=Kx(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Fp(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(G_(t),i!==t.version))return!0}return!1}function Vp(n){if(_h(n)){let e=n.producers;for(;e!==void 0;)e=Kx(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function T2(n,e){let t=n.consumersTail,i=_h(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)T2(r.producer,r)}function Kx(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!_h(e)){let o=e.producers;for(;o!==void 0;)o=Kx(o)}return t}function _h(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function W_(n){qz?.(n)}function Wz(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function K_(n,e){return Object.is(n,e)}function Q_(n,e){let t=Object.create(Kz);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(G_(t),gh(t),t.value===Np)throw t.error;return t.value};return i[nr]=t,W_(t),i}var j_=Symbol("UNSET"),$_=Symbol("COMPUTING"),Np=Symbol("ERRORED"),Kz=Ee(te({},ph),{value:j_,dirty:!0,error:null,equal:K_,kind:"computed",producerMustRecompute(n){return n.value===j_||n.value===$_},producerRecomputeValue(n){if(n.value===$_)throw new Error("");let e=n.value;n.value=$_;let t=mh(n),i,r=!1;try{i=n.computation(),tt(null),r=e!==j_&&e!==Np&&i!==Np&&n.equal(e,i)}catch(o){i=Np,n.error=o}finally{Lp(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function Qz(){throw new Error}var S2=Qz;function M2(n){S2(n)}function Qx(n){S2=n}var Yz=null;function Yx(n,e){let t=Object.create(Y_);t.value=n,e!==void 0&&(t.equal=e);let i=()=>O2(t);return i[nr]=t,W_(t),[i,s=>vh(t,s),s=>Zx(t,s)]}function O2(n){return gh(n),n.value}function vh(n,e){Wx()||M2(n),n.equal(n.value,e)||(n.value=e,Zz(n))}function Zx(n,e){Wx()||M2(n),vh(n,e(n.value))}var Y_=Ee(te({},ph),{equal:K_,value:void 0,kind:"signal"});function Zz(n){n.version++,E2(),Gx(n),Yz?.(n)}function st(n){return typeof n=="function"}function yh(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Z_=yh(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ru(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var kn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(st(i))try{i()}catch(o){e=o instanceof Z_?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{A2(o)}catch(s){e=e??[],s instanceof Z_?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Z_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)A2(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ru(t,e)}remove(e){let{_finalizers:t}=this;t&&Ru(t,e),e instanceof n&&e._removeParent(this)}};kn.EMPTY=(()=>{let n=new kn;return n.closed=!0,n})();var Jx=kn.EMPTY;function J_(n){return n instanceof kn||n&&"closed"in n&&st(n.remove)&&st(n.add)&&st(n.unsubscribe)}function A2(n){st(n)?n():n.unsubscribe()}var is={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bh={setTimeout(n,e,...t){let{delegate:i}=bh;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=bh;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function X_(n){bh.setTimeout(()=>{let{onUnhandledError:e}=is;if(e)e(n);else throw n})}function Bp(){}var D2=Xx("C",void 0,void 0);function k2(n){return Xx("E",void 0,n)}function R2(n){return Xx("N",n,void 0)}function Xx(n,e,t){return{kind:n,value:e,error:t}}var Nu=null;function wh(n){if(is.useDeprecatedSynchronousErrorHandling){let e=!Nu;if(e&&(Nu={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Nu;if(Nu=null,t)throw i}}else n()}function N2(n){is.useDeprecatedSynchronousErrorHandling&&Nu&&(Nu.errorThrown=!0,Nu.error=n)}var Lu=class extends kn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,J_(e)&&e.add(this)):this.destination=ej}static create(e,t,i){return new tl(e,t,i)}next(e){this.isStopped?t1(R2(e),this):this._next(e)}error(e){this.isStopped?t1(k2(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?t1(D2,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Jz=Function.prototype.bind;function e1(n,e){return Jz.call(n,e)}var n1=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){e0(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){e0(i)}else e0(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){e0(t)}}},tl=class extends Lu{constructor(e,t,i){super();let r;if(st(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&is.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&e1(e.next,o),error:e.error&&e1(e.error,o),complete:e.complete&&e1(e.complete,o)}):r=e}this.destination=new n1(r)}};function e0(n){is.useDeprecatedSynchronousErrorHandling?N2(n):X_(n)}function Xz(n){throw n}function t1(n,e){let{onStoppedNotification:t}=is;t&&bh.setTimeout(()=>t(n,e))}var ej={closed:!0,next:Bp,error:Xz,complete:Bp};var xh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wr(n){return n}function t0(...n){return i1(n)}function i1(n){return n.length===0?wr:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var ze=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=nj(t)?t:new tl(t,i,r);return wh(()=>{let{operator:s,source:l}=this;o.add(s?s.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=L2(i),new i((r,o)=>{let s=new tl({next:l=>{try{t(l)}catch(u){o(u),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[xh](){return this}pipe(...t){return i1(t)(this)}toPromise(t){return t=L2(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function L2(n){var e;return(e=n??is.Promise)!==null&&e!==void 0?e:Promise}function tj(n){return n&&st(n.next)&&st(n.error)&&st(n.complete)}function nj(n){return n&&n instanceof Lu||tj(n)&&J_(n)}function r1(n){return st(n?.lift)}function xt(n){return e=>{if(r1(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ft(n,e,t,i,r){return new o1(n,e,t,i,r)}var o1=class extends Lu{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(l){try{t(l)}catch(u){e.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ch(){return xt((n,e)=>{let t=null;n._refCount++;let i=ft(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Eh=class extends ze{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,r1(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kn;let t=this.getSubject();e.add(this.source.subscribe(ft(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kn.EMPTY)}return e}refCount(){return Ch()(this)}};var F2=yh(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Cn=(()=>{class n extends ze{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new n0(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new F2}next(t){wh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){wh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){wh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Jx:(this.currentObservers=null,o.push(t),new kn(()=>{this.currentObservers=null,Ru(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new ze;return t.source=this,t}}return n.create=(e,t)=>new n0(e,t),n})(),n0=class extends Cn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:Jx}};var Ut=class extends Cn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var s1={now(){return(s1.delegate||Date).now()},delegate:void 0};var i0=class extends kn{constructor(e,t){super()}schedule(e,t=0){return this}};var Up={setInterval(n,e,...t){let{delegate:i}=Up;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Up;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ih=class extends i0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Up.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Up.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ru(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ph=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Ph.now=s1.now;var Th=class extends Ph{constructor(e,t=Ph.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var zp=new Th(Ih);var r0=class extends Ih{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var o0=class extends Th{};var a1=new o0(r0);var $r=new ze(n=>n.complete());function V2(n){return n&&st(n.schedule)}function B2(n){return n[n.length-1]}function s0(n){return st(B2(n))?n.pop():void 0}function nl(n){return V2(B2(n))?n.pop():void 0}function Vu(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function z2(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(m){try{f(i.next(m))}catch(y){s(y)}}function u(m){try{f(i.throw(m))}catch(y){s(y)}}function f(m){m.done?o(m.value):r(m.value).then(l,u)}f((i=i.apply(n,e||[])).next())})}function U2(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fu(n){return this instanceof Fu?(this.v=n,this):new Fu(n)}function j2(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(T){return function(U){return Promise.resolve(U).then(T,y)}}function l(T,U){i[T]&&(r[T]=function(H){return new Promise(function(j,X){o.push([T,H,j,X])>1||u(T,H)})},U&&(r[T]=U(r[T])))}function u(T,U){try{f(i[T](U))}catch(H){C(o[0][3],H)}}function f(T){T.value instanceof Fu?Promise.resolve(T.value.v).then(m,y):C(o[0][2],T)}function m(T){u("next",T)}function y(T){u("throw",T)}function C(T,U){T(U),o.shift(),o.length&&u(o[0][0],o[0][1])}}function $2(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof U2=="function"?U2(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(l,u){s=n[o](s),r(l,u,s.done,s.value)})}}function r(o,s,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},s)}}var a0=n=>n&&typeof n.length=="number"&&typeof n!="function";function c0(n){return st(n?.then)}function l0(n){return st(n[xh])}function u0(n){return Symbol.asyncIterator&&st(n?.[Symbol.asyncIterator])}function d0(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ij(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var h0=ij();function f0(n){return st(n?.[h0])}function p0(n){return j2(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Fu(t.read());if(r)return yield Fu(void 0);yield yield Fu(i)}}finally{t.releaseLock()}})}function g0(n){return st(n?.getReader)}function Jn(n){if(n instanceof ze)return n;if(n!=null){if(l0(n))return rj(n);if(a0(n))return oj(n);if(c0(n))return sj(n);if(u0(n))return H2(n);if(f0(n))return aj(n);if(g0(n))return cj(n)}throw d0(n)}function rj(n){return new ze(e=>{let t=n[xh]();if(st(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oj(n){return new ze(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function sj(n){return new ze(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,X_)})}function aj(n){return new ze(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function H2(n){return new ze(e=>{lj(n,e).catch(t=>e.error(t))})}function cj(n){return H2(p0(n))}function lj(n,e){var t,i,r,o;return z2(this,void 0,void 0,function*(){try{for(t=$2(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Hr(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function il(n,e=0){return xt((t,i)=>{t.subscribe(ft(i,r=>Hr(i,n,()=>i.next(r),e),()=>Hr(i,n,()=>i.complete(),e),r=>Hr(i,n,()=>i.error(r),e)))})}function rl(n,e=0){return xt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function q2(n,e){return Jn(n).pipe(rl(e),il(e))}function G2(n,e){return Jn(n).pipe(rl(e),il(e))}function W2(n,e){return new ze(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function K2(n,e){return new ze(t=>{let i;return Hr(t,e,()=>{i=n[h0](),Hr(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>st(i?.return)&&i.return()})}function m0(n,e){if(!n)throw new Error("Iterable cannot be null");return new ze(t=>{Hr(t,e,()=>{let i=n[Symbol.asyncIterator]();Hr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Q2(n,e){return m0(p0(n),e)}function Y2(n,e){if(n!=null){if(l0(n))return q2(n,e);if(a0(n))return W2(n,e);if(c0(n))return G2(n,e);if(u0(n))return m0(n,e);if(f0(n))return K2(n,e);if(g0(n))return Q2(n,e)}throw d0(n)}function ln(n,e){return e?Y2(n,e):Jn(n)}function Le(...n){let e=nl(n);return ln(n,e)}function Sh(n,e){let t=st(n)?n:()=>n,i=r=>r.error(t());return new ze(e?r=>e.schedule(i,0,r):i)}function c1(n){return!!n&&(n instanceof ze||st(n.lift)&&st(n.subscribe))}var rs=yh(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ol(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new tl({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new rs)}});n.subscribe(o)})}function pe(n,e){return xt((t,i)=>{let r=0;t.subscribe(ft(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:uj}=Array;function dj(n,e){return uj(e)?n(...e):n(e)}function _0(n){return pe(e=>dj(n,e))}var{isArray:hj}=Array,{getPrototypeOf:fj,prototype:pj,keys:gj}=Object;function v0(n){if(n.length===1){let e=n[0];if(hj(e))return{args:e,keys:null};if(mj(e)){let t=gj(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function mj(n){return n&&typeof n=="object"&&fj(n)===pj}function y0(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function xr(...n){let e=nl(n),t=s0(n),{args:i,keys:r}=v0(n);if(i.length===0)return ln([],e);let o=new ze(_j(i,e,r?s=>y0(r,s):wr));return t?o.pipe(_0(t)):o}function _j(n,e,t=wr){return i=>{Z2(e,()=>{let{length:r}=n,o=new Array(r),s=r,l=r;for(let u=0;u<r;u++)Z2(e,()=>{let f=ln(n[u],e),m=!1;f.subscribe(ft(i,y=>{o[u]=y,m||(m=!0,l--),l||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function Z2(n,e,t){n?Hr(t,n,e):e()}function J2(n,e,t,i,r,o,s,l){let u=[],f=0,m=0,y=!1,C=()=>{y&&!u.length&&!f&&e.complete()},T=H=>f<i?U(H):u.push(H),U=H=>{o&&e.next(H),f++;let j=!1;Jn(t(H,m++)).subscribe(ft(e,X=>{r?.(X),o?T(X):e.next(X)},()=>{j=!0},void 0,()=>{if(j)try{for(f--;u.length&&f<i;){let X=u.shift();s?Hr(e,s,()=>U(X)):U(X)}C()}catch(X){e.error(X)}}))};return n.subscribe(ft(e,T,()=>{y=!0,C()})),()=>{l?.()}}function jn(n,e,t=1/0){return st(e)?jn((i,r)=>pe((o,s)=>e(i,o,r,s))(Jn(n(i,r))),t):(typeof e=="number"&&(t=e),xt((i,r)=>J2(i,r,n,t)))}function sl(n=1/0){return jn(wr,n)}function X2(){return sl(1)}function Mh(...n){return X2()(ln(n,nl(n)))}function jp(n){return new ze(e=>{Jn(n()).subscribe(e)})}function l1(...n){let e=s0(n),{args:t,keys:i}=v0(n),r=new ze(o=>{let{length:s}=t;if(!s){o.complete();return}let l=new Array(s),u=s,f=s;for(let m=0;m<s;m++){let y=!1;Jn(t[m]).subscribe(ft(o,C=>{y||(y=!0,f--),l[m]=C},()=>u--,void 0,()=>{(!u||!y)&&(f||o.next(i?y0(i,l):l),o.complete())}))}});return e?r.pipe(_0(e)):r}function Cr(n,e){return xt((t,i)=>{let r=0;t.subscribe(ft(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Ya(n){return xt((e,t)=>{let i=null,r=!1,o;i=e.subscribe(ft(t,void 0,void 0,s=>{o=Jn(n(s,Ya(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function ek(n,e,t,i,r){return(o,s)=>{let l=t,u=e,f=0;o.subscribe(ft(s,m=>{let y=f++;u=l?n(u,m,y):(l=!0,m),i&&s.next(u)},r&&(()=>{l&&s.next(u),s.complete()})))}}function al(n,e){return st(e)?jn(n,e,1):jn(n,1)}function $p(n,e=zp){return xt((t,i)=>{let r=null,o=null,s=null,l=()=>{if(r){r.unsubscribe(),r=null;let f=o;o=null,i.next(f)}};function u(){let f=s+n,m=e.now();if(m<f){r=this.schedule(void 0,f-m),i.add(r);return}l()}t.subscribe(ft(i,f=>{o=f,s=e.now(),r||(r=e.schedule(u,n),i.add(r))},()=>{l(),i.complete()},void 0,()=>{o=r=null}))})}function cl(n){return xt((e,t)=>{let i=!1;e.subscribe(ft(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Mi(n){return n<=0?()=>$r:xt((e,t)=>{let i=0;e.subscribe(ft(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function b0(n,e=wr){return n=n??vj,xt((t,i)=>{let r,o=!0;t.subscribe(ft(i,s=>{let l=e(s);(o||!n(r,l))&&(o=!1,r=l,i.next(s))}))})}function vj(n,e){return n===e}function w0(n=yj){return xt((e,t)=>{let i=!1;e.subscribe(ft(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function yj(){return new rs}function Hp(n){return xt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Za(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Cr((r,o)=>n(r,o,i)):wr,Mi(1),t?cl(e):w0(()=>new rs))}function Oh(n){return n<=0?()=>$r:xt((e,t)=>{let i=[];e.subscribe(ft(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function u1(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Cr((r,o)=>n(r,o,i)):wr,Oh(1),t?cl(e):w0(()=>new rs))}function x0(n,e){return xt(ek(n,e,arguments.length>=2,!0))}function qr(...n){let e=nl(n);return xt((t,i)=>{(e?Mh(n,t,e):Mh(n,t)).subscribe(i)})}function Hi(n,e){return xt((t,i)=>{let r=null,o=0,s=!1,l=()=>s&&!r&&i.complete();t.subscribe(ft(i,u=>{r?.unsubscribe();let f=0,m=o++;Jn(n(u,m)).subscribe(r=ft(i,y=>i.next(e?e(u,y,m,f++):y),()=>{r=null,l()}))},()=>{s=!0,l()}))})}function Ah(n){return xt((e,t)=>{Jn(n).subscribe(ft(t,()=>t.complete(),Bp)),!t.closed&&e.subscribe(t)})}function Xn(n,e,t){let i=st(n)||e||t?{next:n,error:e,complete:t}:n;return i?xt((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let l=!0;r.subscribe(ft(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;l=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;l=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;l&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):wr}function tk(n){let e=tt(null);try{return n()}finally{tt(e)}}var ll=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},C1=new ll("20.3.15");var P0="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",fe=class extends Error{code;constructor(e,t){super(hl(e,t)),this.code=e}};function bj(n){return`NG0${Math.abs(n)}`}function hl(n,e){return`${bj(n)}${e?": "+e:""}`}var ss=globalThis;function nn(n){for(let e in n)if(n[e]===nn)return e;throw Error("")}function rk(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Xa(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Xa).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function T0(n,e){return n?e?`${n} ${e}`:n:e||""}var wj=nn({__forward_ref__:nn});function Io(n){return n.__forward_ref__=Io,n.toString=function(){return Xa(this())},n}function qi(n){return E1(n)?n():n}function E1(n){return typeof n=="function"&&n.hasOwnProperty(wj)&&n.__forward_ref__===Io}function ge(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function as(n){return{providers:n.providers||[],imports:n.imports||[]}}function Kp(n){return xj(n,S0)}function I1(n){return Kp(n)!==null}function xj(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Cj(n){let e=n?.[S0]??null;return e||null}function h1(n){return n&&n.hasOwnProperty(E0)?n[E0]:null}var S0=nn({\u0275prov:nn}),E0=nn({\u0275inj:nn}),we=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ge({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function P1(n){return n&&!!n.\u0275providers}var T1=nn({\u0275cmp:nn}),S1=nn({\u0275dir:nn}),M1=nn({\u0275pipe:nn}),O1=nn({\u0275mod:nn}),Gp=nn({\u0275fac:nn}),$u=nn({__NG_ELEMENT_ID__:nn}),nk=nn({__NG_ENV_ID__:nn});function tc(n){return typeof n=="string"?n:n==null?"":String(n)}function ok(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():tc(n)}var sk=nn({ngErrorCode:nn}),Ej=nn({ngErrorMessage:nn}),Ij=nn({ngTokenPath:nn});function A1(n,e){return ak("",-200,e)}function M0(n,e){throw new fe(-201,!1)}function ak(n,e,t){let i=new fe(e,n);return i[sk]=e,i[Ej]=n,t&&(i[Ij]=t),i}function Pj(n){return n[sk]}var f1;function ck(){return f1}function Er(n){let e=f1;return f1=n,e}function D1(n,e,t){let i=Kp(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;M0(n,"Injector")}var Tj={},Bu=Tj,p1="__NG_DI_FLAG__",g1=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=Uu(t)||0;try{return this.injector.get(e,i&8?null:Bu,i)}catch(r){if(fh(r))return r;throw r}}};function Sj(n,e=0){let t=U_();if(t===void 0)throw new fe(-203,!1);if(t===null)return D1(n,void 0,e);{let i=Mj(e),r=t.retrieve(n,i);if(fh(r)){if(i.optional)return null;throw r}return r}}function Ge(n,e=0){return(ck()||Sj)(qi(n),e)}function $(n,e){return Ge(n,Uu(e))}function Uu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Mj(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function m1(n){let e=[];for(let t=0;t<n.length;t++){let i=qi(n[t]);if(Array.isArray(i)){if(i.length===0)throw new fe(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let l=i[s],u=Oj(l);typeof u=="number"?u===-1?r=l.token:o|=u:r=l}e.push(Ge(r,o))}else e.push(Ge(i))}return e}function lk(n,e){return n[p1]=e,n.prototype[p1]=e,n}function Oj(n){return n[p1]}function ul(n,e){let t=n.hasOwnProperty(Gp);return t?n[Gp]:null}function uk(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function dk(n){return n.flat(Number.POSITIVE_INFINITY)}function O0(n,e){n.forEach(t=>Array.isArray(t)?O0(t,e):e(t))}function k1(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Qp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function hk(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function A0(n,e,t){let i=kh(n,e);return i>=0?n[i|1]=t:(i=~i,hk(n,i,e,t)),i}function D0(n,e){let t=kh(n,e);if(t>=0)return n[t|1]}function kh(n,e){return Aj(n,e,1)}function Aj(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var fl={},Ir=[],pl=new we(""),R1=new we("",-1),N1=new we(""),Wp=class{get(e,t=Bu){if(t===Bu){let r=ak("",-201);throw r.name="\u0275NotFound",r}return t}};function L1(n){return n[O1]||null}function nc(n){return n[T1]||null}function F1(n){return n[S1]||null}function fk(n){return n[M1]||null}function Pr(n){return{\u0275providers:n}}function pk(...n){return{\u0275providers:V1(!0,n),\u0275fromNgModule:!0}}function V1(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return O0(e,s=>{let l=s;I0(l,o,[],i)&&(r||=[],r.push(l))}),r!==void 0&&gk(r,o),t}function gk(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];B1(r,o=>{e(o,i)})}}function I0(n,e,t,i){if(n=qi(n),!n)return!1;let r=null,o=h1(n),s=!o&&nc(n);if(!o&&!s){let u=n.ngModule;if(o=h1(u),o)r=u;else return!1}else{if(s&&!s.standalone)return!1;r=n}let l=i.has(r);if(s){if(l)return!1;if(i.add(r),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let f of u)I0(f,e,t,i)}}else if(o){if(o.imports!=null&&!l){i.add(r);let f;try{O0(o.imports,m=>{I0(m,e,t,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&gk(f,e)}if(!l){let f=ul(r)||(()=>new r);e({provide:r,useFactory:f,deps:Ir},r),e({provide:N1,useValue:r,multi:!0},r),e({provide:pl,useValue:()=>Ge(r),multi:!0},r)}let u=o.providers;if(u!=null&&!l){let f=n;B1(u,m=>{e(m,f)})}}else return!1;return r!==n&&n.providers!==void 0}function B1(n,e){for(let t of n)P1(t)&&(t=t.\u0275providers),Array.isArray(t)?B1(t,e):e(t)}var Dj=nn({provide:String,useValue:nn});function mk(n){return n!==null&&typeof n=="object"&&Dj in n}function kj(n){return!!(n&&n.useExisting)}function Rj(n){return!!(n&&n.useFactory)}function zu(n){return typeof n=="function"}function _k(n){return!!n.useClass}var Yp=new we(""),C0={},ik={},d1;function Zp(){return d1===void 0&&(d1=new Wp),d1}var $n=class{},ju=class extends $n{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,v1(e,s=>this.processProvider(s)),this.records.set(R1,Dh(void 0,this)),r.has("environment")&&this.records.set($n,Dh(void 0,this));let o=this.records.get(Yp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(N1,Ir,{self:!0}))}retrieve(e,t){let i=Uu(t)||0;try{return this.get(e,Bu,i)}catch(r){if(fh(r))return r;throw r}}destroy(){qp(this),this._destroyed=!0;let e=tt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),tt(e)}}onDestroy(e){return qp(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){qp(this);let t=Ws(this),i=Er(void 0),r;try{return e()}finally{Ws(t),Er(i)}}get(e,t=Bu,i){if(qp(this),e.hasOwnProperty(nk))return e[nk](this);let r=Uu(i),o,s=Ws(this),l=Er(void 0);try{if(!(r&4)){let f=this.records.get(e);if(f===void 0){let m=Bj(e)&&Kp(e);m&&this.injectableDefInScope(m)?f=Dh(_1(e),C0):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f,r)}let u=r&2?Zp():this.parent;return t=r&8&&t===Bu?null:t,u.get(e,t)}catch(u){let f=Pj(u);throw f===-200||f===-201?new fe(f,null):u}finally{Er(l),Ws(s)}}resolveInjectorInitializers(){let e=tt(null),t=Ws(this),i=Er(void 0),r;try{let o=this.get(pl,Ir,{self:!0});for(let s of o)s()}finally{Ws(t),Er(i),tt(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Xa(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=qi(e);let t=zu(e)?e:qi(e&&e.provide),i=Lj(e);if(!zu(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Dh(void 0,C0,!0),r.factory=()=>m1(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=tt(null);try{if(t.value===ik)throw A1(Xa(e));return t.value===C0&&(t.value=ik,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&Vj(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{tt(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=qi(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function _1(n){let e=Kp(n),t=e!==null?e.factory:ul(n);if(t!==null)return t;if(n instanceof we)throw new fe(204,!1);if(n instanceof Function)return Nj(n);throw new fe(204,!1)}function Nj(n){if(n.length>0)throw new fe(204,!1);let t=Cj(n);return t!==null?()=>t.factory(n):()=>new n}function Lj(n){if(mk(n))return Dh(void 0,n.useValue);{let e=U1(n);return Dh(e,C0)}}function U1(n,e,t){let i;if(zu(n)){let r=qi(n);return ul(r)||_1(r)}else if(mk(n))i=()=>qi(n.useValue);else if(Rj(n))i=()=>n.useFactory(...m1(n.deps||[]));else if(kj(n))i=(r,o)=>Ge(qi(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=qi(n&&(n.useClass||n.provide));if(Fj(n))i=()=>new r(...m1(n.deps));else return ul(r)||_1(r)}return i}function qp(n){if(n.destroyed)throw new fe(205,!1)}function Dh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Fj(n){return!!n.deps}function Vj(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Bj(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function v1(n,e){for(let t of n)Array.isArray(t)?v1(t,e):t&&P1(t)?v1(t.\u0275providers,e):e(t)}function ei(n,e){let t;n instanceof ju?(qp(n),t=n):t=new g1(n);let i,r=Ws(t),o=Er(void 0);try{return e()}finally{Ws(r),Er(o)}}function vk(){return ck()!==void 0||U_()!=null}var cs=0,Ve=1,nt=2,yi=3,Po=4,To=5,Rh=6,Nh=7,Hn=8,ic=9,Ks=10,fn=11,Lh=12,z1=13,Hu=14,so=15,gl=16,qu=17,Qs=18,Jp=19,j1=20,Ja=21,k0=22,Xp=23,ao=24,Gu=25,Wu=26,Sn=27,yk=1,$1=6,ml=7,eg=8,Ku=9,Rn=10;function Ys(n){return Array.isArray(n)&&typeof n[yk]=="object"}function ls(n){return Array.isArray(n)&&n[yk]===!0}function H1(n){return(n.flags&4)!==0}function _l(n){return n.componentOffset>-1}function Fh(n){return(n.flags&1)===1}function Zs(n){return!!n.template}function Vh(n){return(n[nt]&512)!==0}function Qu(n){return(n[nt]&256)===256}var q1="svg",bk="math";function So(n){for(;Array.isArray(n);)n=n[cs];return n}function G1(n,e){return So(e[n])}function us(n,e){return So(e[n.index])}function tg(n,e){return n.data[e]}function R0(n,e){return n[e]}function W1(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Mo(n,e){let t=e[n];return Ys(t)?t:t[cs]}function wk(n){return(n[nt]&4)===4}function N0(n){return(n[nt]&128)===128}function xk(n){return ls(n[yi])}function Oo(n,e){return e==null?null:n[e]}function K1(n){n[qu]=0}function Q1(n){n[nt]&1024||(n[nt]|=1024,N0(n)&&Bh(n))}function Ck(n,e){for(;n>0;)e=e[Hu],n--;return e}function ng(n){return!!(n[nt]&9216||n[ao]?.dirty)}function L0(n){n[Ks].changeDetectionScheduler?.notify(8),n[nt]&64&&(n[nt]|=1024),ng(n)&&Bh(n)}function Bh(n){n[Ks].changeDetectionScheduler?.notify(0);let e=dl(n);for(;e!==null&&!(e[nt]&8192||(e[nt]|=8192,!N0(e)));)e=dl(e)}function Y1(n,e){if(Qu(n))throw new fe(911,!1);n[Ja]===null&&(n[Ja]=[]),n[Ja].push(e)}function Ek(n,e){if(n[Ja]===null)return;let t=n[Ja].indexOf(e);t!==-1&&n[Ja].splice(t,1)}function dl(n){let e=n[yi];return ls(e)?e[yi]:e}function Z1(n){return n[Nh]??=[]}function J1(n){return n.cleanup??=[]}function Ik(n,e,t,i){let r=Z1(e);r.push(t),n.firstCreatePass&&J1(n).push(i,r.length-1)}var ut={lFrame:Bk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var y1=!1;function Pk(){return ut.lFrame.elementDepthCount}function Tk(){ut.lFrame.elementDepthCount++}function X1(){ut.lFrame.elementDepthCount--}function F0(){return ut.bindingsEnabled}function Sk(){return ut.skipHydrationRootTNode!==null}function eC(n){return ut.skipHydrationRootTNode===n}function tC(){ut.skipHydrationRootTNode=null}function je(){return ut.lFrame.lView}function En(){return ut.lFrame.tView}function q(n){return ut.lFrame.contextLView=n,n[Hn]}function G(n){return ut.lFrame.contextLView=null,n}function ti(){let n=nC();for(;n!==null&&n.type===64;)n=n.parent;return n}function nC(){return ut.lFrame.currentTNode}function Mk(){let n=ut.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Uh(n,e){let t=ut.lFrame;t.currentTNode=n,t.isParent=e}function iC(){return ut.lFrame.isParent}function Ok(){ut.lFrame.isParent=!1}function Ak(){return ut.lFrame.contextLView}function rC(){return y1}function oC(n){let e=y1;return y1=n,e}function ig(){let n=ut.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Dk(){return ut.lFrame.bindingIndex}function kk(n){return ut.lFrame.bindingIndex=n}function rc(){return ut.lFrame.bindingIndex++}function V0(n){let e=ut.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Rk(){return ut.lFrame.inI18n}function Nk(n,e){let t=ut.lFrame;t.bindingIndex=t.bindingRootIndex=n,B0(e)}function Lk(){return ut.lFrame.currentDirectiveIndex}function B0(n){ut.lFrame.currentDirectiveIndex=n}function Fk(n){let e=ut.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function sC(){return ut.lFrame.currentQueryIndex}function U0(n){ut.lFrame.currentQueryIndex=n}function Uj(n){let e=n[Ve];return e.type===2?e.declTNode:e.type===1?n[To]:null}function aC(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=Uj(o),r===null||(o=o[Hu],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=ut.lFrame=Vk();return i.currentTNode=e,i.lView=n,!0}function z0(n){let e=Vk(),t=n[Ve];ut.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Vk(){let n=ut.lFrame,e=n===null?null:n.child;return e===null?Bk(n):e}function Bk(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Uk(){let n=ut.lFrame;return ut.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var cC=Uk;function j0(){let n=Uk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function zk(n){return(ut.lFrame.contextLView=Ck(n,ut.lFrame.contextLView))[Hn]}function Js(){return ut.lFrame.selectedIndex}function vl(n){ut.lFrame.selectedIndex=n}function rg(){let n=ut.lFrame;return tg(n.tView,n.selectedIndex)}function re(){ut.lFrame.currentNamespace=q1}function _e(){zj()}function zj(){ut.lFrame.currentNamespace=null}function jk(){return ut.lFrame.currentNamespace}var $k=!0;function $0(){return $k}function og(n){$k=n}function b1(n,e=null,t=null,i){let r=lC(n,e,t,i);return r.resolveInjectorInitializers(),r}function lC(n,e=null,t=null,i,r=new Set){let o=[t||Ir,pk(n)];return i=i||(typeof n=="object"?void 0:Xa(n)),new ju(o,e||Zp(),i||null,r)}var mn=class n{static THROW_IF_NOT_FOUND=Bu;static NULL=new Wp;static create(e,t){if(Array.isArray(e))return b1({name:""},t,e,"");{let i=e.name??"";return b1({name:i},e.parent,e.providers,i)}}static \u0275prov=ge({token:n,providedIn:"any",factory:()=>Ge(R1)});static __NG_ELEMENT_ID__=-1},ni=new we(""),ds=(()=>{class n{static __NG_ELEMENT_ID__=jj;static __NG_ENV_ID__=t=>t}return n})(),w1=class extends ds{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Qu(this._lView)}onDestroy(e){let t=this._lView;return Y1(t,e),()=>Ek(t,e)}};function jj(){return new w1(je())}var os=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Tr=new we("",{providedIn:"root",factory:()=>{let n=$($n),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(os),e.handleError(t))}}}),Hk={provide:pl,useValue:()=>void $(os),multi:!0};function uC(n){return typeof n=="function"&&n[nr]!==void 0}function pn(n,e){let[t,i,r]=Yx(n,e?.equal),o=t,s=o[nr];return o.set=i,o.update=r,o.asReadonly=qk.bind(o),o}function qk(){let n=this[nr];if(n.readonlyFn===void 0){let e=()=>this();e[nr]=n,n.readonlyFn=e}return n.readonlyFn}function dC(n){return uC(n)&&typeof n.set=="function"}var H0=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=$j}return n})();function $j(){return new H0(je(),ti())}var ec=class{},q0=new we("",{providedIn:"root",factory:()=>!1});var hC=new we(""),fC=new we(""),Xs=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ut(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ze(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ge({token:n,providedIn:"root",factory:()=>new n})}return n})(),zh=(()=>{class n{internalPendingTasks=$(Xs);scheduler=$(ec);errorHandler=$(Tr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=ge({token:n,providedIn:"root",factory:()=>new n})}return n})();function sg(...n){}var pC=(()=>{class n{static \u0275prov=ge({token:n,providedIn:"root",factory:()=>new x1})}return n})(),x1=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function Wh(n){return{toString:n}.toString()}var G0="__parameters__";function Qj(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function Yj(n,e,t){return Wh(()=>{let i=Qj(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return l.annotation=s,l;function l(u,f,m){let y=u.hasOwnProperty(G0)?u[G0]:Object.defineProperty(u,G0,{value:[]})[G0];for(;y.length<=m;)y.push(null);return(y[m]=y[m]||[]).push(s),u}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var On=lk(Yj("Optional"),8);function Zj(n){return typeof n=="function"}var iv=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function TR(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var na=(()=>{let n=()=>SR;return n.ngInherit=!0,n})();function SR(n){return n.type.prototype.ngOnChanges&&(n.setInput=Xj),Jj}function Jj(){let n=OR(this),e=n?.current;if(e){let t=n.previous;if(t===fl)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Xj(n,e,t,i,r){let o=this.declaredInputs[i],s=OR(n)||e9(n,{previous:fl,current:null}),l=s.current||(s.current={}),u=s.previous,f=u[o];l[o]=new iv(f&&f.currentValue,t,u===fl),TR(n,e,r,t)}var MR="__ngSimpleChanges__";function OR(n){return n[MR]||null}function e9(n,e){return n[MR]=e}var Gk=[];var un=function(n,e=null,t){for(let i=0;i<Gk.length;i++){let r=Gk[i];r(n,e,t)}};function t9(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=SR(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function AR(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:m}=o;s&&(n.contentHooks??=[]).push(-t,s),l&&((n.contentHooks??=[]).push(t,l),(n.contentCheckHooks??=[]).push(t,l)),u&&(n.viewHooks??=[]).push(-t,u),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),m!=null&&(n.destroyHooks??=[]).push(t,m)}}function J0(n,e,t){DR(n,e,3,t)}function X0(n,e,t,i){(n[nt]&3)===t&&DR(n,e,t,i)}function gC(n,e){let t=n[nt];(t&3)===e&&(t&=16383,t+=1,n[nt]=t)}function DR(n,e,t,i){let r=i!==void 0?n[qu]&65535:0,o=i??-1,s=e.length-1,l=0;for(let u=r;u<s;u++)if(typeof e[u+1]=="number"){if(l=e[u],i!=null&&l>=i)break}else e[u]<0&&(n[qu]+=65536),(l<o||o==-1)&&(n9(n,t,e,u),n[qu]=(n[qu]&4294901760)+u+2),u++}function Wk(n,e){un(4,n,e);let t=tt(null);try{e.call(n)}finally{tt(t),un(5,n,e)}}function n9(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],l=n[s];r?n[nt]>>14<n[qu]>>16&&(n[nt]&3)===e&&(n[nt]+=16384,Wk(l,o)):Wk(l,o)}var $h=-1,Zu=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function i9(n){return(n.flags&8)!==0}function r9(n){return(n.flags&16)!==0}function o9(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],l=t[i++];n.setAttribute(e,s,l,o)}else{let o=r,s=t[++i];s9(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function kR(n){return n===3||n===4||n===6}function s9(n){return n.charCodeAt(0)===64}function Hh(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?Kk(n,t,r,null,e[++i]):Kk(n,t,r,null,null))}}return n}function Kk(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let l=n[o++];if(typeof l=="number"){if(l===e){s=-1;break}else if(l>e){s=o-1;break}}}for(;o<n.length;){let l=n[o];if(typeof l=="number")break;if(l===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function RR(n){return n!==$h}function rv(n){return n&32767}function a9(n){return n>>16}function ov(n,e){let t=a9(n),i=e;for(;t>0;)i=i[Hu],t--;return i}var PC=!0;function sv(n){let e=PC;return PC=n,e}var c9=256,NR=c9-1,LR=5,l9=0,ea={};function u9(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty($u)&&(i=t[$u]),i==null&&(i=t[$u]=l9++);let r=i&NR,o=1<<r;e.data[n+(r>>LR)]|=o}function av(n,e){let t=FR(n,e);if(t!==-1)return t;let i=e[Ve];i.firstCreatePass&&(n.injectorIndex=e.length,mC(i.data,n),mC(e,null),mC(i.blueprint,null));let r=sE(n,e),o=n.injectorIndex;if(RR(r)){let s=rv(r),l=ov(r,e),u=l[Ve].data;for(let f=0;f<8;f++)e[o+f]=l[s+f]|u[s+f]}return e[o+8]=r,o}function mC(n,e){n.push(0,0,0,0,0,0,0,0,e)}function FR(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function sE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=jR(r),i===null)return $h;if(t++,r=r[Hu],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return $h}function TC(n,e,t){u9(n,e,t)}function d9(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(kR(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function VR(n,e,t){if(t&8||n!==void 0)return n;M0(e,"NodeInjector")}function BR(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[ic],o=Er(void 0);try{return r?r.get(e,i,t&8):D1(e,i,t&8)}finally{Er(o)}}return VR(i,e,t)}function UR(n,e,t,i=0,r){if(n!==null){if(e[nt]&2048&&!(i&2)){let s=g9(n,e,t,i,ea);if(s!==ea)return s}let o=zR(n,e,t,i,ea);if(o!==ea)return o}return BR(e,t,i,r)}function zR(n,e,t,i,r){let o=f9(t);if(typeof o=="function"){if(!aC(e,n,i))return i&1?VR(r,t,i):BR(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&8))M0(t);else return s}finally{cC()}}else if(typeof o=="number"){let s=null,l=FR(n,e),u=$h,f=i&1?e[so][To]:null;for((l===-1||i&4)&&(u=l===-1?sE(n,e):e[l+8],u===$h||!Yk(i,!1)?l=-1:(s=e[Ve],l=rv(u),e=ov(u,e)));l!==-1;){let m=e[Ve];if(Qk(o,l,m.data)){let y=h9(l,e,t,s,i,f);if(y!==ea)return y}u=e[l+8],u!==$h&&Yk(i,e[Ve].data[l+8]===f)&&Qk(o,l,e)?(s=m,l=rv(u),e=ov(u,e)):l=-1}}return r}function h9(n,e,t,i,r,o){let s=e[Ve],l=s.data[n+8],u=i==null?_l(l)&&PC:i!=s&&(l.type&3)!==0,f=r&1&&o===l,m=ev(l,s,t,u,f);return m!==null?lg(e,s,m,l,r):ea}function ev(n,e,t,i,r){let o=n.providerIndexes,s=e.data,l=o&1048575,u=n.directiveStart,f=n.directiveEnd,m=o>>20,y=i?l:l+m,C=r?l+m:f;for(let T=y;T<C;T++){let U=s[T];if(T<u&&t===U||T>=u&&U.type===t)return T}if(r){let T=s[u];if(T&&Zs(T)&&T.type===t)return u}return null}function lg(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof Zu){let l=o;if(l.resolving){let T=ok(s[t]);throw A1(T)}let u=sv(l.canSeeViewProviders);l.resolving=!0;let f=s[t].type||s[t],m,y=l.injectImpl?Er(l.injectImpl):null,C=aC(n,i,0);try{o=n[t]=l.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&t9(t,s[t],e)}finally{y!==null&&Er(y),sv(u),l.resolving=!1,cC()}}return o}function f9(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty($u)?n[$u]:void 0;return typeof e=="number"?e>=0?e&NR:p9:e}function Qk(n,e,t){let i=1<<n;return!!(t[e+(n>>LR)]&i)}function Yk(n,e){return!(n&2)&&!(n&1&&e)}var Yu=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return UR(this._tNode,this._lView,e,Uu(i),t)}};function p9(){return new Yu(ti(),je())}function ia(n){return Wh(()=>{let e=n.prototype.constructor,t=e[Gp]||SC(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Gp]||SC(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function SC(n){return E1(n)?()=>{let e=SC(qi(n));return e&&e()}:ul(n)}function g9(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[nt]&2048&&!Vh(s);){let l=zR(o,s,t,i|2,ea);if(l!==ea)return l;let u=o.parent;if(!u){let f=s[j1];if(f){let m=f.get(t,ea,i);if(m!==ea)return m}u=jR(s),s=s[Hu]}o=u}return r}function jR(n){let e=n[Ve],t=e.type;return t===2?e.declTNode:t===1?n[To]:null}function gg(n){return d9(ti(),n)}function m9(){return Kh(ti(),je())}function Kh(n,e){return new ir(us(n,e))}var ir=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=m9}return n})();function _9(n){return n instanceof ir?n.nativeElement:n}function v9(){return this._results[Symbol.iterator]()}var cv=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Cn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=dk(e);(this._changesDetected=!uk(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=v9};function $R(n){return(n.flags&128)===128}var aE=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(aE||{}),HR=new Map,y9=0;function b9(){return y9++}function w9(n){HR.set(n[Jp],n)}function MC(n){HR.delete(n[Jp])}var Zk="__ngContext__";function qh(n,e){Ys(e)?(n[Zk]=e[Jp],w9(e)):n[Zk]=e}function qR(n){return WR(n[Lh])}function GR(n){return WR(n[Po])}function WR(n){for(;n!==null&&!ls(n);)n=n[Po];return n}var OC;function cE(n){OC=n}function lE(){if(OC!==void 0)return OC;if(typeof document<"u")return document;throw new fe(210,!1)}var Iv=new we("",{providedIn:"root",factory:()=>x9}),x9="ng",Pv=new we(""),sc=new we("",{providedIn:"platform",factory:()=>"unknown"});var Tv=new we("",{providedIn:"root",factory:()=>lE().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var C9="h",E9="b";var KR="r";var QR="di";var YR=!1,ZR=new we("",{providedIn:"root",factory:()=>YR});var uE=new we("");var I9=(n,e,t,i)=>{};function P9(n,e,t,i){I9(n,e,t,i)}function dE(n){return(n.flags&32)===32}var T9=()=>null;function JR(n,e,t=!1){return T9(n,e,t)}function XR(n,e){let t=n.contentQueries;if(t!==null){let i=tt(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let l=n.data[s];U0(o),l.contentQueries(2,e[s],s)}}}finally{tt(i)}}}function AC(n,e,t){U0(0);let i=tt(null);try{e(n,t)}finally{tt(i)}}function hE(n,e,t){if(H1(e)){let i=tt(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let l=n.data[s];if(l.contentQueries){let u=t[s];l.contentQueries(1,u,s)}}}finally{tt(i)}}}var oc=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(oc||{});var W0;function S9(){if(W0===void 0&&(W0=null,ss.trustedTypes))try{W0=ss.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return W0}function Sv(n){return S9()?.createHTML(n)||n}var K0;function eN(){if(K0===void 0&&(K0=null,ss.trustedTypes))try{K0=ss.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return K0}function Jk(n){return eN()?.createHTML(n)||n}function Xk(n){return eN()?.createScriptURL(n)||n}var lv=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${P0})`}};function id(n){return n instanceof lv?n.changingThisBreaksApplicationSecurity:n}function Mv(n,e){let t=tN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${P0})`)}return t===e}function tN(n){return n instanceof lv&&n.getTypeName()||null}function M9(n){let e=new kC(n);return O9()?new DC(e):e}var DC=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Sv(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},kC=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Sv(e),t}};function O9(){try{return!!new window.DOMParser().parseFromString(Sv(""),"text/html")}catch{return!1}}var A9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fE(n){return n=String(n),n.match(A9)?n:"unsafe:"+n}function ac(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function mg(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var nN=ac("area,br,col,hr,img,wbr"),iN=ac("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rN=ac("rp,rt"),D9=mg(rN,iN),k9=mg(iN,ac("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),R9=mg(rN,ac("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),eR=mg(nN,k9,R9,D9),oN=ac("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),N9=ac("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),L9=ac("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),F9=mg(oN,N9,L9),V9=ac("script,style,template"),RC=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=z9(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=U9(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=tR(e).toLowerCase();if(!eR.hasOwnProperty(t))return this.sanitizedSomething=!0,!V9.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,l=s.toLowerCase();if(!F9.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let u=o.value;oN[l]&&(u=fE(u)),this.buf.push(" ",s,'="',nR(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=tR(e).toLowerCase();eR.hasOwnProperty(t)&&!nN.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(nR(e))}};function B9(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function U9(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw sN(e);return e}function z9(n){let e=n.firstChild;if(e&&B9(n,e))throw sN(e);return e}function tR(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function sN(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var j9=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$9=/([^\#-~ |!])/g;function nR(n){return n.replace(/&/g,"&amp;").replace(j9,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace($9,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Q0;function aN(n,e){let t=null;try{Q0=Q0||M9(n);let i=e?String(e):"";t=Q0.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=Q0.getInertBodyElement(i)}while(i!==o);let l=new RC().sanitizeChildren(iR(t)||t);return Sv(l)}finally{if(t){let i=iR(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function iR(n){return"content"in n&&H9(n)?n.content:null}function H9(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var q9=/^>|^->|<!--|-->|--!>|<!-$/g,G9=/(<|>)/g,W9="\u200B$1\u200B";function K9(n){return n.replace(q9,e=>e.replace(G9,W9))}function Q9(n,e){return n.createText(e)}function Y9(n,e,t){n.setValue(e,t)}function Z9(n,e){return n.createComment(K9(e))}function cN(n,e,t){return n.createElement(e,t)}function uv(n,e,t,i,r){n.insertBefore(e,t,i,r)}function lN(n,e,t){n.appendChild(e,t)}function rR(n,e,t,i,r){i!==null?uv(n,e,t,i,r):lN(n,e,t)}function uN(n,e,t,i){n.removeChild(null,e,t,i)}function J9(n,e,t){n.setAttribute(e,"style",t)}function X9(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function dN(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&o9(n,e,i),r!==null&&X9(n,e,r),o!==null&&J9(n,e,o)}var _g=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(_g||{});function Ov(n){let e=gE();return e?Jk(e.sanitize(_g.HTML,n)||""):Mv(n,"HTML")?Jk(id(n)):aN(lE(),tc(n))}function xn(n){let e=gE();return e?e.sanitize(_g.URL,n)||"":Mv(n,"URL")?id(n):fE(tc(n))}function hN(n){let e=gE();if(e)return Xk(e.sanitize(_g.RESOURCE_URL,n)||"");if(Mv(n,"ResourceURL"))return Xk(id(n));throw new fe(904,!1)}function e$(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?hN:xn}function pE(n,e,t){return e$(e,t)(n)}function gE(){let n=je();return n&&n[Ks].sanitizer}function fN(n){return n instanceof Function?n():n}function t$(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var pN="ng-template";function n$(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&t$(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(mE(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function mE(n){return n.type===4&&n.value!==pN}function i$(n,e,t){let i=n.type===4&&!t?pN:n.value;return e===i}function r$(n,e,t){let i=4,r=n.attrs,o=r!==null?a$(r):0,s=!1;for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="number"){if(!s&&!hs(i)&&!hs(u))return!1;if(s&&hs(u))continue;s=!1,i=u|i&1;continue}if(!s)if(i&4){if(i=2|i&1,u!==""&&!i$(n,u,t)||u===""&&e.length===1){if(hs(i))return!1;s=!0}}else if(i&8){if(r===null||!n$(n,r,u,t)){if(hs(i))return!1;s=!0}}else{let f=e[++l],m=o$(u,r,mE(n),t);if(m===-1){if(hs(i))return!1;s=!0;continue}if(f!==""){let y;if(m>o?y="":y=r[m+1].toLowerCase(),i&2&&f!==y){if(hs(i))return!1;s=!0}}}}return hs(i)||s}function hs(n){return(n&1)===0}function o$(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return c$(e,n)}function s$(n,e,t=!1){for(let i=0;i<e.length;i++)if(r$(n,e[i],t))return!0;return!1}function a$(n){for(let e=0;e<n.length;e++){let t=n[e];if(kR(t))return e}return n.length}function c$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function oR(n,e){return n?":not("+e.trim()+")":e}function l$(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let l=n[++t];r+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!hs(s)&&(e+=oR(o,r),r=""),i=s,o=o||!hs(i);t++}return r!==""&&(e+=oR(o,r)),e}function u$(n){return n.map(l$).join(",")}function d$(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!hs(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var rr={};function _E(n,e,t,i,r,o,s,l,u,f,m){let y=Sn+i,C=y+r,T=h$(y,C),U=typeof f=="function"?f():f;return T[Ve]={type:n,blueprint:T,template:t,queries:null,viewQuery:l,declTNode:e,data:T.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:U,incompleteFirstPass:!1,ssrId:m}}function h$(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:rr);return t}function f$(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=_E(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function vE(n,e,t,i,r,o,s,l,u,f,m){let y=e.blueprint.slice();return y[cs]=r,y[nt]=i|4|128|8|64|1024,(f!==null||n&&n[nt]&2048)&&(y[nt]|=2048),K1(y),y[yi]=y[Hu]=n,y[Hn]=t,y[Ks]=s||n&&n[Ks],y[fn]=l||n&&n[fn],y[ic]=u||n&&n[ic]||null,y[To]=o,y[Jp]=b9(),y[Rh]=m,y[j1]=f,y[so]=e.type==2?n[so]:y,y}function p$(n,e,t){let i=us(e,n),r=f$(t),o=n[Ks].rendererFactory,s=yE(n,vE(n,r,null,gN(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function gN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function mN(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function yE(n,e){return n[Lh]?n[z1][Po]=e:n[Lh]=e,n[z1]=e,e}function M(n=1){_N(En(),je(),Js()+n,!1)}function _N(n,e,t,i){if(!i)if((e[nt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&J0(e,o,t)}else{let o=n.preOrderHooks;o!==null&&X0(e,o,0,t)}vl(t)}var Av=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Av||{});function NC(n,e,t,i){let r=tt(null);try{let[o,s,l]=n.inputs[t],u=null;(s&Av.SignalBased)!==0&&(u=e[o][nr]),u!==null&&u.transformFn!==void 0?i=u.transformFn(i):l!==null&&(i=l.call(e,i)),n.setInput!==null?n.setInput(e,u,i,t,o):TR(e,u,o,i)}finally{tt(r)}}var ta=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ta||{}),g$;function bE(n,e){return g$(n,e)}var Ju=new Set,Dv=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Dv||{}),rd=new we(""),sR=new Set;function ra(n){sR.has(n)||(sR.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var vN=!1,LC=class extends Cn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,vk()&&(this.destroyRef=$(ds,{optional:!0})??void 0,this.pendingTasks=$(Xs,{optional:!0})??void 0)}emit(e){let t=tt(null);try{super.next(e)}finally{tt(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let l=super.subscribe({next:r,error:o,complete:s});return e instanceof kn&&e.add(l),l}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Mn=LC;function yN(n){let e,t;function i(){n=sg;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function aR(n){return queueMicrotask(()=>n()),()=>{n=sg}}var wE="isAngularZone",dv=wE+"_ID",m$=0,kt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Mn(!1);onMicrotaskEmpty=new Mn(!1);onStable=new Mn(!1);onError=new Mn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=vN}=e;if(typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,y$(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(wE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new fe(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,_$,sg,sg);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},_$={};function xE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function v$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){yN(()=>{n.callbackScheduled=!1,FC(n),n.isCheckStableRunning=!0,xE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),FC(n)}function y$(n){let e=()=>{v$(n)},t=m$++;n._inner=n._inner.fork({name:"angular",properties:{[wE]:!0,[dv]:t,[dv+t]:!0},onInvokeTask:(i,r,o,s,l,u)=>{if(b$(u))return i.invokeTask(o,s,l,u);try{return cR(n),i.invokeTask(o,s,l,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),lR(n)}},onInvoke:(i,r,o,s,l,u,f)=>{try{return cR(n),i.invoke(o,s,l,u,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!w$(u)&&e(),lR(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,FC(n),xE(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function FC(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function cR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lR(n){n._nesting--,xE(n)}var hv=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Mn;onMicrotaskEmpty=new Mn;onStable=new Mn;onError=new Mn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function b$(n){return bN(n,"__ignore_ng_zone__")}function w$(n){return bN(n,"__scheduler_tick__")}function bN(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var CE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ge({token:n,providedIn:"root",factory:()=>new n})}return n})(),wN=[0,1,2,3],xN=(()=>{class n{ngZone=$(kt);scheduler=$(ec);errorHandler=$(os,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){$(rd,{optional:!0})}execute(){let t=this.sequences.size>0;t&&un(16),this.executing=!0;for(let i of wN)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&un(17)}register(t){let{view:i}=t;i!==void 0?((i[Gu]??=[]).push(t),Bh(i),i[nt]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(Dv.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ge({token:n,providedIn:"root",factory:()=>new n})}return n})(),fv=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Gu];e&&(this.view[Gu]=e.filter(t=>t!==this))}};function vg(n,e){let t=e?.injector??$(mn);return ra("NgAfterNextRender"),C$(n,t,e,!0)}function x$(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function C$(n,e,t,i){let r=e.get(CE);r.impl??=e.get(xN);let o=e.get(rd,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ds):null,l=e.get(H0,null,{optional:!0}),u=new fv(r.impl,x$(n),l?.view,i,s,o?.snapshot(null));return r.impl.register(u),u}var CN=new we("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function EN(n,e,t){let i=n.get(CN);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function E$(n,e){let t=n.get(CN);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)t.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function I$(n,e){for(let[t,i]of e)EN(n,i.animateFns)}function uR(n,e,t,i){let r=n?.[Wu]?.enter;e!==null&&r&&r.has(t.index)&&I$(i,r)}function jh(n,e,t,i,r,o,s,l){if(r!=null){let u,f=!1;ls(r)?u=r:Ys(r)&&(f=!0,r=r[cs]);let m=So(r);n===0&&i!==null?(uR(l,i,o,t),s==null?lN(e,i,m):uv(e,i,m,s||null,!0)):n===1&&i!==null?(uR(l,i,o,t),uv(e,i,m,s||null,!0)):n===2?dR(l,o,t,y=>{uN(e,m,f,y)}):n===3&&dR(l,o,t,()=>{e.destroyNode(m)}),u!=null&&V$(e,n,t,u,o,i,s)}}function P$(n,e){IN(n,e),e[cs]=null,e[To]=null}function T$(n,e,t,i,r,o){i[cs]=r,i[To]=e,Rv(n,i,t,1,r,o)}function IN(n,e){e[Ks].changeDetectionScheduler?.notify(9),Rv(n,e,e[fn],2,null,null)}function S$(n){let e=n[Lh];if(!e)return _C(n[Ve],n);for(;e;){let t=null;if(Ys(e))t=e[Lh];else{let i=e[Rn];i&&(t=i)}if(!t){for(;e&&!e[Po]&&e!==n;)Ys(e)&&_C(e[Ve],e),e=e[yi];e===null&&(e=n),Ys(e)&&_C(e[Ve],e),t=e&&e[Po]}e=t}}function EE(n,e){let t=n[Ku],i=t.indexOf(e);t.splice(i,1)}function kv(n,e){if(Qu(e))return;let t=e[fn];t.destroyNode&&Rv(n,e,t,3,null,null),S$(e)}function _C(n,e){if(Qu(e))return;let t=tt(null);try{e[nt]&=-129,e[nt]|=256,e[ao]&&Vp(e[ao]),A$(n,e),O$(n,e),e[Ve].type===1&&e[fn].destroy();let i=e[gl];if(i!==null&&ls(e[yi])){i!==e[yi]&&EE(i,e);let r=e[Qs];r!==null&&r.detachView(n)}MC(e)}finally{tt(t)}}function dR(n,e,t,i){let r=n?.[Wu];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&Ju.add(n),EN(t,()=>{if(r.leave&&r.leave.has(e.index)){let s=r.leave.get(e.index),l=[];if(s){for(let u=0;u<s.animateFns.length;u++){let f=s.animateFns[u],{promise:m}=f();l.push(m)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(l),M$(n,i)}else n&&Ju.delete(n),i(!1)},r)}function M$(n,e){let t=n[Wu]?.running;if(t){t.then(()=>{n[Wu].running=void 0,Ju.delete(n),e(!0)});return}e(!1)}function O$(n,e){let t=n.cleanup,i=e[Nh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let l=t[s+3];l>=0?i[l]():i[-l].unsubscribe(),s+=2}else{let l=i[t[s+1]];t[s].call(l)}i!==null&&(e[Nh]=null);let r=e[Ja];if(r!==null){e[Ja]=null;for(let s=0;s<r.length;s++){let l=r[s];l()}}let o=e[Xp];if(o!==null){e[Xp]=null;for(let s of o)s.destroy()}}function A$(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Zu)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let l=r[o[s]],u=o[s+1];un(4,l,u);try{u.call(l)}finally{un(5,l,u)}}else{un(4,r,o);try{o.call(r)}finally{un(5,r,o)}}}}}function D$(n,e,t){return k$(n,e.parent,t)}function k$(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[cs];if(_l(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===oc.None||r===oc.Emulated)return null}return us(i,t)}function R$(n,e,t){return L$(n,e,t)}function N$(n,e,t){return n.type&40?us(n,t):null}var L$=N$,hR;function IE(n,e,t,i){let r=D$(n,i,e),o=e[fn],s=i.parent||e[To],l=R$(s,i,e);if(r!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)rR(o,r,t[u],l,!1);else rR(o,r,t,l,!1);hR!==void 0&&hR(o,i,e,t,r)}function ag(n,e){if(e!==null){let t=e.type;if(t&3)return us(e,n);if(t&4)return VC(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return ag(n,i);{let r=n[e.index];return ls(r)?VC(-1,r):So(r)}}else{if(t&128)return ag(n,e.next);if(t&32)return bE(e,n)()||So(n[e.index]);{let i=PN(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=dl(n[so]);return ag(r,i)}else return ag(n,e.next)}}}return null}function PN(n,e){if(e!==null){let i=n[so][To],r=e.projection;return i.projection[r]}return null}function VC(n,e){let t=Rn+n+1;if(t<e.length){let i=e[t],r=i[Ve].firstChild;if(r!==null)return ag(i,r)}return e[ml]}function PE(n,e,t,i,r,o,s){for(;t!=null;){let l=i[ic];if(t.type===128){t=t.next;continue}let u=i[t.index],f=t.type;if(s&&e===0&&(u&&qh(So(u),i),t.flags|=2),!dE(t))if(f&8)PE(n,e,t.child,i,r,o,!1),jh(e,n,l,r,u,t,o,i);else if(f&32){let m=bE(t,i),y;for(;y=m();)jh(e,n,l,r,y,t,o,i);jh(e,n,l,r,u,t,o,i)}else f&16?F$(n,e,i,t,r,o):jh(e,n,l,r,u,t,o,i);t=s?t.projectionNext:t.next}}function Rv(n,e,t,i,r,o){PE(t,i,n.firstChild,e,r,o,!1)}function F$(n,e,t,i,r,o){let s=t[so],u=s[To].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let m=u[f];jh(e,n,t[ic],r,m,i,o,t)}else{let f=u,m=s[yi];$R(i)&&(f.flags|=128),PE(n,e,f,m,r,o,!0)}}function V$(n,e,t,i,r,o,s){let l=i[ml],u=So(i);l!==u&&jh(e,n,t,o,l,r,s);for(let f=Rn;f<i.length;f++){let m=i[f];Rv(m[Ve],m,n,e,o,l)}}function B$(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:ta.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ta.Important),n.setStyle(t,i,r,o))}}function TN(n,e,t,i,r){let o=Js(),s=i&2;try{vl(-1),s&&e.length>Sn&&_N(n,e,Sn,!1),un(s?2:0,r,t),t(i,r)}finally{vl(o),un(s?3:1,r,t)}}function Nv(n,e,t){q$(n,e,t),(t.flags&64)===64&&G$(n,e,t)}function yg(n,e,t=us){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],l=s===-1?t(e,n):n[s];n[r++]=l}}}function U$(n,e,t,i){let o=i.get(ZR,YR)||t===oc.ShadowDom,s=n.selectRootElement(e,o);return z$(s),s}function z$(n){j$(n)}var j$=()=>null;function $$(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function SN(n,e,t,i,r,o){let s=e[Ve];if(OE(n,s,e,t,i)){_l(n)&&H$(e,n.index);return}n.type&3&&(t=$$(t)),MN(n,e,t,i,r,o)}function MN(n,e,t,i,r,o){if(n.type&3){let s=us(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(s,t,i)}else n.type&12}function H$(n,e){let t=Mo(e,n);t[nt]&16||(t[nt]|=64)}function q$(n,e,t){let i=t.directiveStart,r=t.directiveEnd;_l(t)&&p$(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||av(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let l=n.data[s],u=lg(e,n,s,t);if(qh(u,e),o!==null&&Y$(e,s-i,u,l,t,o),Zs(l)){let f=Mo(t.index,e);f[Hn]=lg(e,n,s,t)}}}function G$(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=Lk();try{vl(o);for(let l=i;l<r;l++){let u=n.data[l],f=e[l];B0(l),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&W$(u,f)}}finally{vl(-1),B0(s)}}function W$(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function TE(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];s$(e,o.selectors,!1)&&(i??=[],Zs(o)?i.unshift(o):i.push(o))}return i}function K$(n,e,t,i,r,o){let s=us(n,e);Q$(e[fn],s,o,n.value,t,i,r)}function Q$(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let l=s==null?tc(o):s(o,i||"",r);n.setAttribute(e,r,l,t)}}function Y$(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1];NC(i,t,u,f)}}function SE(n,e,t,i,r){let o=Sn+t,s=e[Ve],l=r(s,e,n,i,t);e[o]=l,Uh(n,!0);let u=n.type===2;return u?(dN(e[fn],l,n),(Pk()===0||Fh(n))&&qh(l,e),Tk()):qh(l,e),$0()&&(!u||!dE(n))&&IE(s,e,l,n),n}function ME(n){let e=n;return iC()?Ok():(e=e.parent,Uh(e,!1)),e}function Z$(n,e){let t=n[ic];if(!t)return;let i;try{i=t.get(Tr,null)}catch{i=null}i?.(e)}function OE(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],l=!1;if(s)for(let u=0;u<s.length;u+=2){let f=s[u],m=s[u+1],y=e.data[f];NC(y,t[f],m,r),l=!0}if(o)for(let u of o){let f=t[u],m=e.data[u];NC(m,f,i,r),l=!0}return l}function J$(n,e){let t=Mo(e,n),i=t[Ve];X$(i,t);let r=t[cs];r!==null&&t[Rh]===null&&(t[Rh]=JR(r,t[ic])),un(18),AE(i,t,t[Hn]),un(19,t[Hn])}function X$(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function AE(n,e,t){z0(e);try{let i=n.viewQuery;i!==null&&AC(1,i,t);let r=n.template;r!==null&&TN(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Qs]?.finishViewCreation(n),n.staticContentQueries&&XR(n,e),n.staticViewQueries&&AC(2,n.viewQuery,t);let o=n.components;o!==null&&eH(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[nt]&=-5,j0()}}function eH(n,e){for(let t=0;t<e.length;t++)J$(n,e[t])}function Lv(n,e,t,i){let r=tt(null);try{let o=e.tView,l=n[nt]&4096?4096:16,u=vE(n,o,t,l,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[e.index];u[gl]=f;let m=n[Qs];return m!==null&&(u[Qs]=m.createEmbeddedView(o)),AE(o,u,t),u}finally{tt(r)}}function ug(n,e){return!e||e.firstChild===null||$R(n)}function dg(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(So(o)),ls(o)&&ON(o,i);let s=t.type;if(s&8)dg(n,e,t.child,i);else if(s&32){let l=bE(t,e),u;for(;u=l();)i.push(u)}else if(s&16){let l=PN(e,t);if(Array.isArray(l))i.push(...l);else{let u=dl(e[so]);dg(u[Ve],u,l,i,!0)}}t=r?t.projectionNext:t.next}return i}function ON(n,e){for(let t=Rn;t<n.length;t++){let i=n[t],r=i[Ve].firstChild;r!==null&&dg(i[Ve],i,r,e)}n[ml]!==n[cs]&&e.push(n[ml])}function AN(n){if(n[Gu]!==null){for(let e of n[Gu])e.impl.addSequence(e);n[Gu].length=0}}var DN=[];function tH(n){return n[ao]??nH(n)}function nH(n){let e=DN.pop()??Object.create(rH);return e.lView=n,e}function iH(n){n.lView[ao]!==n&&(n.lView=null,DN.push(n))}var rH=Ee(te({},ph),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Bh(n.lView)},consumerOnSignalRead(){this.lView[ao]=this}});function oH(n){let e=n[ao]??Object.create(sH);return e.lView=n,e}var sH=Ee(te({},ph),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=dl(n.lView);for(;e&&!kN(e[Ve]);)e=dl(e);e&&Q1(e)},consumerOnSignalRead(){this.lView[ao]=this}});function kN(n){return n.type!==2}function RN(n){if(n[Xp]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Xp])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[nt]&8192)}}var aH=100;function NN(n,e=0){let i=n[Ks].rendererFactory,r=!1;r||i.begin?.();try{cH(n,e)}finally{r||i.end?.()}}function cH(n,e){let t=rC();try{oC(!0),BC(n,e);let i=0;for(;ng(n);){if(i===aH)throw new fe(103,!1);i++,BC(n,1)}}finally{oC(t)}}function lH(n,e,t,i){if(Qu(e))return;let r=e[nt],o=!1,s=!1;z0(e);let l=!0,u=null,f=null;o||(kN(n)?(f=tH(e),u=mh(f)):q_()===null?(l=!1,f=oH(e),u=mh(f)):e[ao]&&(Vp(e[ao]),e[ao]=null));try{K1(e),kk(n.bindingStartIndex),t!==null&&TN(n,e,t,2,i);let m=(r&3)===3;if(!o)if(m){let T=n.preOrderCheckHooks;T!==null&&J0(e,T,null)}else{let T=n.preOrderHooks;T!==null&&X0(e,T,0,null),gC(e,0)}if(s||uH(e),RN(e),LN(e,0),n.contentQueries!==null&&XR(n,e),!o)if(m){let T=n.contentCheckHooks;T!==null&&J0(e,T)}else{let T=n.contentHooks;T!==null&&X0(e,T,1),gC(e,1)}hH(n,e);let y=n.components;y!==null&&VN(e,y,0);let C=n.viewQuery;if(C!==null&&AC(2,C,i),!o)if(m){let T=n.viewCheckHooks;T!==null&&J0(e,T)}else{let T=n.viewHooks;T!==null&&X0(e,T,2),gC(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[k0]){for(let T of e[k0])T();e[k0]=null}o||(AN(e),e[nt]&=-73)}catch(m){throw o||Bh(e),m}finally{f!==null&&(Lp(f,u),l&&iH(f)),j0()}}function LN(n,e){for(let t=qR(n);t!==null;t=GR(t))for(let i=Rn;i<t.length;i++){let r=t[i];FN(r,e)}}function uH(n){for(let e=qR(n);e!==null;e=GR(e)){if(!(e[nt]&2))continue;let t=e[Ku];for(let i=0;i<t.length;i++){let r=t[i];Q1(r)}}}function dH(n,e,t){un(18);let i=Mo(e,n);FN(i,t),un(19,i[Hn])}function FN(n,e){N0(n)&&BC(n,e)}function BC(n,e){let i=n[Ve],r=n[nt],o=n[ao],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Fp(o)),s||=!1,o&&(o.dirty=!1),n[nt]&=-9217,s)lH(i,n,i.template,n[Hn]);else if(r&8192){let l=tt(null);try{RN(n),LN(n,1);let u=i.components;u!==null&&VN(n,u,1),AN(n)}finally{tt(l)}}}function VN(n,e,t){for(let i=0;i<e.length;i++)dH(n,e[i],t)}function hH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)vl(~r);else{let o=r,s=t[++i],l=t[++i];Nk(s,o);let u=e[o];un(24,u),l(2,u),un(25,u)}}}finally{vl(-1)}}function DE(n,e){let t=rC()?64:1088;for(n[Ks].changeDetectionScheduler?.notify(e);n;){n[nt]|=t;let i=dl(n);if(Vh(n)&&!i)return n;n=i}return null}function BN(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function UN(n,e){let t=Rn+e;if(t<n.length)return n[t]}function Fv(n,e,t,i=!0){let r=e[Ve];if(fH(r,e,n,t),i){let s=VC(t,n),l=e[fn],u=l.parentNode(n[ml]);u!==null&&T$(r,n[To],l,e,u,s)}let o=e[Rh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function zN(n,e){let t=hg(n,e);return t!==void 0&&kv(t[Ve],t),t}function hg(n,e){if(n.length<=Rn)return;let t=Rn+e,i=n[t];if(i){let r=i[gl];r!==null&&r!==n&&EE(r,i),e>0&&(n[t-1][Po]=i[Po]);let o=Qp(n,Rn+e);P$(i[Ve],i);let s=o[Qs];s!==null&&s.detachView(o[Ve]),i[yi]=null,i[Po]=null,i[nt]&=-129}return i}function fH(n,e,t,i){let r=Rn+i,o=t.length;i>0&&(t[r-1][Po]=e),i<o-Rn?(e[Po]=t[r],k1(t,Rn+i,e)):(t.push(e),e[Po]=null),e[yi]=t;let s=e[gl];s!==null&&t!==s&&jN(s,e);let l=e[Qs];l!==null&&l.insertView(n),L0(e),e[nt]|=128}function jN(n,e){let t=n[Ku],i=e[yi];if(Ys(i))n[nt]|=2;else{let r=i[yi][so];e[so]!==r&&(n[nt]|=2)}t===null?n[Ku]=[e]:t.push(e)}var yl=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Ve];return dg(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Hn]}set context(e){this._lView[Hn]=e}get destroyed(){return Qu(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yi];if(ls(e)){let t=e[eg],i=t?t.indexOf(this):-1;i>-1&&(hg(e,i),Qp(t,i))}this._attachedToViewContainer=!1}kv(this._lView[Ve],this._lView)}onDestroy(e){Y1(this._lView,e)}markForCheck(){DE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[nt]&=-129}reattach(){L0(this._lView),this._lView[nt]|=128}detectChanges(){this._lView[nt]|=1024,NN(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Vh(this._lView),t=this._lView[gl];t!==null&&!e&&EE(t,this._lView),IN(this._lView[Ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=e;let t=Vh(this._lView),i=this._lView[gl];i!==null&&!t&&jN(i,this._lView),L0(this._lView)}};var bl=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=pH;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=Lv(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new yl(o)}}return n})();function pH(){return Vv(ti(),je())}function Vv(n,e){return n.type&4?new bl(e,n,Kh(n,e)):null}function bg(n,e,t,i,r){let o=n.data[e];if(o===null)o=gH(n,e,t,i,r),Rk()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=Mk();o.injectorIndex=s===null?-1:s.injectorIndex}return Uh(o,!0),o}function gH(n,e,t,i,r){let o=nC(),s=iC(),l=s?o:o&&o.parent,u=n.data[e]=_H(n,l,t,e,i,r);return mH(n,u,o,s),u}function mH(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function _H(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,l=0;return Sk()&&(l|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var o0e=new RegExp(`^(\\d+)*(${E9}|${C9})*(.*)`);function vH(n){let e=n[$1]??[],i=n[yi][fn],r=[];for(let o of e)o.data[QR]!==void 0?r.push(o):yH(o,i);n[$1]=r}function yH(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[KR];for(;t<r;){let o=i.nextSibling;uN(e,i,!1),i=o,t++}}}var bH=()=>null,wH=()=>null;function UC(n,e){return bH(n,e)}function $N(n,e,t){return wH(n,e,t)}var HN=class{},Bv=class{},zC=class{resolveComponentFactory(e){throw new fe(917,!1)}},wg=class{static NULL=new zC},Xu=class{},Ao=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>xH()}return n})();function xH(){let n=je(),e=ti(),t=Mo(e.index,n);return(Ys(t)?t:n)[fn]}var qN=(()=>{class n{static \u0275prov=ge({token:n,providedIn:"root",factory:()=>null})}return n})();var tv={},jC=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,tv,i);return r!==tv||t===tv?r:this.parentInjector.get(e,t,i)}};function pv(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")o=l;else if(o==1)r=T0(r,l);else if(o==2){let u=l,f=e[++s];i=T0(i,u+": "+f+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Ue(n,e=0){let t=je();if(t===null)return Ge(n,e);let i=ti();return UR(i,t,qi(n),e)}function kE(){let n="invalid";throw new Error(n)}function GN(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let l=s,u=null,f=null;for(let m of s)if(m.resolveHostDirectives!==null){[l,u,f]=m.resolveHostDirectives(s);break}IH(n,e,t,l,o,u,f)}o!==null&&i!==null&&CH(t,i,o)}function CH(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new fe(-301,!1);i.push(e[r],o)}}function EH(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function IH(n,e,t,i,r,o,s){let l=i.length,u=!1;for(let C=0;C<l;C++){let T=i[C];!u&&Zs(T)&&(u=!0,EH(n,t,C)),TC(av(t,e),n,T.type)}AH(t,n.data.length,l);for(let C=0;C<l;C++){let T=i[C];T.providersResolver&&T.providersResolver(T)}let f=!1,m=!1,y=mN(n,e,l,null);l>0&&(t.directiveToIndex=new Map);for(let C=0;C<l;C++){let T=i[C];if(t.mergedAttrs=Hh(t.mergedAttrs,T.hostAttrs),TH(n,t,e,y,T),OH(y,T,r),s!==null&&s.has(T)){let[H,j]=s.get(T);t.directiveToIndex.set(T.type,[y,H+t.directiveStart,j+t.directiveStart])}else(o===null||!o.has(T))&&t.directiveToIndex.set(T.type,y);T.contentQueries!==null&&(t.flags|=4),(T.hostBindings!==null||T.hostAttrs!==null||T.hostVars!==0)&&(t.flags|=64);let U=T.type.prototype;!f&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),f=!0),!m&&(U.ngOnChanges||U.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),m=!0),y++}PH(n,t,o)}function PH(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))fR(0,e,r,i),fR(1,e,r,i),gR(e,i,!1);else{let o=t.get(r);pR(0,e,o,i),pR(1,e,o,i),gR(e,i,!0)}}}function fR(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),WN(e,o)}}function pR(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],l;n===0?l=e.hostDirectiveInputs??={}:l=e.hostDirectiveOutputs??={},l[s]??=[],l[s].push(i,o),WN(e,s)}}function WN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function gR(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||mE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,l=0;for(;l<i.length;){let u=i[l];if(u===0){l+=4;continue}else if(u===5){l+=2;continue}else if(typeof u=="number")break;if(!t&&r.hasOwnProperty(u)){let f=r[u];for(let m of f)if(m===e){s??=[],s.push(u,i[l+1]);break}}else if(t&&o.hasOwnProperty(u)){let f=o[u];for(let m=0;m<f.length;m+=2)if(f[m]===e){s??=[],s.push(f[m+1],i[l+1]);break}}l+=2}n.initialInputs??=[],n.initialInputs.push(s)}function TH(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=ul(r.type,!0)),s=new Zu(o,Zs(r),Ue,null);n.blueprint[i]=s,t[i]=s,SH(n,e,i,mN(n,t,r.hostVars,rr),r)}function SH(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let l=~e.index;MH(s)!=l&&s.push(l),s.push(t,i,o)}}function MH(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function OH(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Zs(e)&&(t[""]=n)}}function AH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function RE(n,e,t,i,r,o,s,l){let u=e[Ve],f=u.consts,m=Oo(f,s),y=bg(u,n,t,i,m);return o&&GN(u,e,y,Oo(f,l),r),y.mergedAttrs=Hh(y.mergedAttrs,y.attrs),y.attrs!==null&&pv(y,y.attrs,!1),y.mergedAttrs!==null&&pv(y,y.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,y),y}function NE(n,e){AR(n,e),H1(e)&&n.queries.elementEnd(e)}function DH(n,e,t,i,r,o){let s=e.consts,l=Oo(s,r),u=bg(e,n,t,i,l);if(u.mergedAttrs=Hh(u.mergedAttrs,u.attrs),o!=null){let f=Oo(s,o);u.localNames=[];for(let m=0;m<f.length;m+=2)u.localNames.push(f[m],-1)}return u.attrs!==null&&pv(u,u.attrs,!1),u.mergedAttrs!==null&&pv(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function LE(n){return QN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function KN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function QN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function FE(n,e,t){return n[e]=t}function kH(n,e){return n[e]}function co(n,e,t){if(t===rr)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function YN(n,e,t,i){let r=co(n,e,t);return co(n,e+1,i)||r}function nv(n,e,t){return function i(r){let o=_l(n)?Mo(n.index,e):e;DE(o,5);let s=e[Hn],l=mR(e,s,t,r),u=i.__ngNextListenerFn__;for(;u;)l=mR(e,s,u,r)&&l,u=u.__ngNextListenerFn__;return l}}function mR(n,e,t,i){let r=tt(null);try{return un(6,e,t),t(i)!==!1}catch(o){return Z$(n,o),!1}finally{un(7,e,t),tt(r)}}function ZN(n,e,t,i,r,o,s,l){let u=Fh(n),f=!1,m=null;if(!i&&u&&(m=NH(e,t,o,n.index)),m!==null){let y=m.__ngLastListenerFn__||m;y.__ngNextListenerFn__=s,m.__ngLastListenerFn__=s,f=!0}else{let y=us(n,t),C=i?i(y):y;P9(t,C,o,l);let T=r.listen(C,o,l);if(!RH(o)){let U=i?H=>i(So(H[n.index])):n.index;JN(U,e,t,o,l,T,!1)}}return f}function RH(n){return n.startsWith("animation")||n.startsWith("transition")}function NH(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let l=e[Nh],u=r[o+2];return l&&l.length>u?l[u]:null}typeof s=="string"&&(o+=2)}return null}function JN(n,e,t,i,r,o,s){let l=e.firstCreatePass?J1(e):null,u=Z1(t),f=u.length;u.push(r,o),l&&l.push(i,n,f,(f+1)*(s?-1:1))}function _R(n,e,t,i,r,o){let s=e[t],l=e[Ve],f=l.data[t].outputs[i],y=s[f].subscribe(o);JN(n.index,l,e,r,o,y,!0)}var $C=Symbol("BINDING");var gv=class extends wg{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=nc(e);return new ed(t,this.ngModule)}};function LH(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&Av.SignalBased)!==0};return r&&(o.transform=r),o})}function FH(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function VH(n,e,t){let i=e instanceof $n?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new jC(t,i):t}function BH(n){let e=n.get(Xu,null);if(e===null)throw new fe(407,!1);let t=n.get(qN,null),i=n.get(ec,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function UH(n,e){let t=XN(n);return cN(e,t,t==="svg"?q1:t==="math"?bk:null)}function XN(n){return(n.selectors[0][0]||"div").toLowerCase()}var ed=class extends Bv{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=LH(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=FH(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=u$(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,s){un(22);let l=tt(null);try{let u=this.componentDef,f=zH(i,u,s,o),m=VH(u,r||this.ngModule,e),y=BH(m),C=y.rendererFactory.createRenderer(null,u),T=i?U$(C,i,u.encapsulation,m):UH(u,C),U=s?.some(vR)||o?.some(X=>typeof X!="function"&&X.bindings.some(vR)),H=vE(null,f,null,512|gN(u),null,null,y,C,m,null,JR(T,m,!0));H[Sn]=T,z0(H);let j=null;try{let X=RE(Sn,H,2,"#host",()=>f.directiveRegistry,!0,0);dN(C,T,X),qh(T,H),Nv(f,H,X),hE(f,X,H),NE(f,X),t!==void 0&&$H(X,this.ngContentSelectors,t),j=Mo(X.index,H),H[Hn]=j[Hn],AE(f,H,null)}catch(X){throw j!==null&&MC(j),MC(H),X}finally{un(23),j0()}return new mv(this.componentType,H,!!U)}finally{tt(l)}}};function zH(n,e,t,i){let r=n?["ng-version","20.3.15"]:d$(e.selectors[0]),o=null,s=null,l=0;if(t)for(let m of t)l+=m[$C].requiredVars,m.create&&(m.targetIdx=0,(o??=[]).push(m)),m.update&&(m.targetIdx=0,(s??=[]).push(m));if(i)for(let m=0;m<i.length;m++){let y=i[m];if(typeof y!="function")for(let C of y.bindings){l+=C[$C].requiredVars;let T=m+1;C.create&&(C.targetIdx=T,(o??=[]).push(C)),C.update&&(C.targetIdx=T,(s??=[]).push(C))}}let u=[e];if(i)for(let m of i){let y=typeof m=="function"?m:m.type,C=F1(y);u.push(C)}return _E(0,null,jH(o,s),1,l,u,null,null,null,[r],null)}function jH(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function vR(n){let e=n[$C].kind;return e==="input"||e==="twoWay"}var mv=class extends HN{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=tg(t[Ve],Sn),this.location=Kh(this._tNode,t),this.instance=Mo(this._tNode.index,t)[Hn],this.hostView=this.changeDetectorRef=new yl(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=OE(i,r[Ve],r,e,t);this.previousInputValues.set(e,t);let s=Mo(i.index,r);DE(s,1)}get injector(){return new Yu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $H(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var cc=(()=>{class n{static __NG_ELEMENT_ID__=HH}return n})();function HH(){let n=ti();return tL(n,je())}var qH=cc,eL=class extends qH{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Kh(this._hostTNode,this._hostLView)}get injector(){return new Yu(this._hostTNode,this._hostLView)}get parentInjector(){let e=sE(this._hostTNode,this._hostLView);if(RR(e)){let t=ov(e,this._hostLView),i=rv(e),r=t[Ve].data[i+8];return new Yu(r,t)}else return new Yu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=yR(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Rn}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=UC(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(l,r,ug(this._hostTNode,s)),l}createComponent(e,t,i,r,o,s,l){let u=e&&!Zj(e),f;if(u)f=t;else{let j=t||{};f=j.index,i=j.injector,r=j.projectableNodes,o=j.environmentInjector||j.ngModuleRef,s=j.directives,l=j.bindings}let m=u?e:new ed(nc(e)),y=i||this.parentInjector;if(!o&&m.ngModule==null){let X=(u?y:this.parentInjector).get($n,null);X&&(o=X)}let C=nc(m.componentType??{}),T=UC(this._lContainer,C?.id??null),U=T?.firstChild??null,H=m.create(y,r,U,o,s,l);return this.insertImpl(H.hostView,f,ug(this._hostTNode,T)),H}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(xk(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let u=r[yi],f=new eL(u,u[To],u[yi]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Fv(s,r,o,i),e.attachToViewContainerRef(),k1(vC(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=yR(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=hg(this._lContainer,t);i&&(Qp(vC(this._lContainer),t),kv(i[Ve],i))}detach(e){let t=this._adjustIndex(e,-1),i=hg(this._lContainer,t);return i&&Qp(vC(this._lContainer),t)!=null?new yl(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function yR(n){return n[eg]}function vC(n){return n[eg]||(n[eg]=[])}function tL(n,e){let t,i=e[n.index];return ls(i)?t=i:(t=BN(i,e,null,n),e[n.index]=t,yE(e,t)),WH(t,e,n,i),new eL(t,n,e)}function GH(n,e){let t=n[fn],i=t.createComment(""),r=us(e,n),o=t.parentNode(r);return uv(t,o,i,t.nextSibling(r),!1),i}var WH=YH,KH=()=>!1;function QH(n,e,t){return KH(n,e,t)}function YH(n,e,t,i){if(n[ml])return;let r;t.type&8?r=So(i):r=GH(e,t),n[ml]=r}var HC=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},qC=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),l=this.queries[s.indexInDeclarationView];r.push(l.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)VE(e,t).matches!==null&&this.queries[t].setDirty()}},_v=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=r7(e):this.predicate=e}},GC=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},WC=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,ZH(t,o)),this.matchTNodeWithReadOption(e,t,ev(t,e,o,!1,!1))}else i===bl?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ev(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===ir||r===cc||r===bl&&t.type&4)this.addMatch(t.index,-2);else{let o=ev(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function ZH(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function JH(n,e){return n.type&11?Kh(n,e):n.type&4?Vv(n,e):null}function XH(n,e,t,i){return t===-1?JH(e,n):t===-2?e7(n,e,i):lg(n,n[Ve],t,e)}function e7(n,e,t){if(t===ir)return Kh(e,n);if(t===bl)return Vv(e,n);if(t===cc)return tL(e,n)}function nL(n,e,t,i){let r=e[Qs].queries[i];if(r.matches===null){let o=n.data,s=t.matches,l=[];for(let u=0;s!==null&&u<s.length;u+=2){let f=s[u];if(f<0)l.push(null);else{let m=o[f];l.push(XH(e,m,s[u+1],t.metadata.read))}}r.matches=l}return r.matches}function KC(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=nL(n,e,r,t);for(let l=0;l<o.length;l+=2){let u=o[l];if(u>0)i.push(s[l/2]);else{let f=o[l+1],m=e[-u];for(let y=Rn;y<m.length;y++){let C=m[y];C[gl]===C[yi]&&KC(C[Ve],C,f,i)}if(m[Ku]!==null){let y=m[Ku];for(let C=0;C<y.length;C++){let T=y[C];KC(T[Ve],T,f,i)}}}}}return i}function t7(n,e){return n[Qs].queries[e].queryList}function iL(n,e,t){let i=new cv((t&4)===4);return Ik(n,e,i,i.destroy),(e[Qs]??=new qC).queries.push(new HC(i))-1}function n7(n,e,t){let i=En();return i.firstCreatePass&&(rL(i,new _v(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),iL(i,je(),e)}function i7(n,e,t,i){let r=En();if(r.firstCreatePass){let o=ti();rL(r,new _v(e,t,i),o.index),o7(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return iL(r,je(),t)}function r7(n){return n.split(",").map(e=>e.trim())}function rL(n,e,t){n.queries===null&&(n.queries=new GC),n.queries.track(new WC(e,t))}function o7(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function VE(n,e){return n.queries.getByIndex(e)}function s7(n,e){let t=n[Ve],i=VE(t,e);return i.crossesNgTemplate?KC(t,n,e,[]):nL(t,n,i,e)}var td=class{},Uv=class{};var vv=class extends td{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new gv(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=L1(e);this._bootstrapComponents=fN(o.bootstrap),this._r3Injector=lC(e,t,[{provide:td,useValue:this},{provide:wg,useValue:this.componentFactoryResolver},...i],Xa(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},yv=class extends Uv{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new vv(this.moduleType,e,[])}};var fg=class extends td{injector;componentFactoryResolver=new gv(this);instance=null;constructor(e){super();let t=new ju([...e.providers,{provide:td,useValue:this},{provide:wg,useValue:this.componentFactoryResolver}],e.parent||Zp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Qh(n,e,t=null){return new fg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var a7=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=V1(!1,t.type),r=i.length>0?Qh([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ge({token:n,providedIn:"environment",factory:()=>new n(Ge($n))})}return n})();function Et(n){return Wh(()=>{let e=oL(n),t=Ee(te({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===aE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(a7).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||oc.Emulated,styles:n.styles||Ir,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ra("NgStandalone"),sL(t);let i=n.dependencies;return t.directiveDefs=bR(i,c7),t.pipeDefs=bR(i,fk),t.id=d7(t),t})}function c7(n){return nc(n)||F1(n)}function oa(n){return Wh(()=>({type:n.type,bootstrap:n.bootstrap||Ir,declarations:n.declarations||Ir,imports:n.imports||Ir,exports:n.exports||Ir,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function l7(n,e){if(n==null)return fl;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,l,u;Array.isArray(r)?(l=r[0],o=r[1],s=r[2]??o,u=r[3]||null):(o=r,s=r,l=Av.None,u=null),t[o]=[i,l,u],e[o]=s}return t}function u7(n){if(n==null)return fl;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function _n(n){return Wh(()=>{let e=oL(n);return sL(e),e})}function Yh(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function oL(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||fl,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ir,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:l7(n.inputs,e),outputs:u7(n.outputs),debugInfo:null}}function sL(n){n.features?.forEach(e=>e(n))}function bR(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function d7(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function h7(n){return Object.getPrototypeOf(n.prototype).constructor}function lo(n){let e=h7(n.type),t=!0,i=[n];for(;e;){let r;if(Zs(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new fe(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=yC(n.inputs),s.declaredInputs=yC(n.declaredInputs),s.outputs=yC(n.outputs);let l=r.hostBindings;l&&_7(n,l);let u=r.viewQuery,f=r.contentQueries;if(u&&g7(n,u),f&&m7(n,f),f7(n,r),rk(n.outputs,r.outputs),Zs(r)&&r.data.animation){let m=n.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let l=o[s];l&&l.ngInherit&&l(n),l===lo&&(t=!1)}}e=Object.getPrototypeOf(e)}p7(i)}function f7(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function p7(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Hh(r.hostAttrs,t=Hh(t,r.hostAttrs))}}function yC(n){return n===fl?{}:n===Ir?[]:n}function g7(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function m7(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function _7(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function aL(n,e,t,i,r,o,s,l){if(t.firstCreatePass){n.mergedAttrs=Hh(n.mergedAttrs,n.attrs);let m=n.tView=_E(2,n,r,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),m.queries=t.queries.embeddedTView(n))}l&&(n.flags|=l),Uh(n,!1);let u=y7(t,e,n,i);$0()&&IE(t,e,u,n),qh(u,e);let f=BN(u,e,u,n);e[i+Sn]=f,yE(e,f),QH(f,n,e)}function v7(n,e,t,i,r,o,s,l,u,f,m){let y=t+Sn,C;return e.firstCreatePass?(C=bg(e,y,4,s||null,l||null),F0()&&GN(e,n,C,Oo(e.consts,f),TE),AR(e,C)):C=e.data[y],aL(C,n,e,t,i,r,o,u),Fh(C)&&Nv(e,n,C),f!=null&&yg(n,C,m),C}function bv(n,e,t,i,r,o,s,l,u,f,m){let y=t+Sn,C;if(e.firstCreatePass){if(C=bg(e,y,4,s||null,l||null),f!=null){let T=Oo(e.consts,f);C.localNames=[];for(let U=0;U<T.length;U+=2)C.localNames.push(T[U],-1)}}else C=e.data[y];return aL(C,n,e,t,i,r,o,u),f!=null&&yg(n,C,m),C}function ie(n,e,t,i,r,o,s,l){let u=je(),f=En(),m=Oo(f.consts,o);return v7(u,f,n,e,t,i,r,m,void 0,s,l),ie}var y7=b7;function b7(n,e,t,i){return og(!0),e[fn].createComment("")}var BE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var UE=new we("");function lc(n){return!!n&&typeof n.then=="function"}function zv(n){return!!n&&typeof n.subscribe=="function"}var zE=new we("");function jv(n){return Pr([{provide:zE,multi:!0,useValue:n}])}var jE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=$(zE,{optional:!0})??[];injector=$(mn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=ei(this.injector,r);if(lc(o))t.push(o);else if(zv(o)){let s=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xg=new we("");function cL(){Qx(()=>{let n="";throw new fe(600,n)})}function lL(n){return n.isBoundToModule}var w7=10;var uc=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=$(Tr);afterRenderManager=$(CE);zonelessEnabled=$(q0);rootEffectScheduler=$(pC);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Cn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=$(Xs);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pe(t=>!t))}constructor(){$(rd,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=$($n);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=mn.NULL){return this._injector.get(kt).run(()=>{un(10);let s=t instanceof Bv;if(!this._injector.get(jE).done){let U="";throw new fe(405,U)}let u;s?u=t:u=this._injector.get(wg).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let f=lL(u)?void 0:this._injector.get(td),m=i||u.selector,y=u.create(r,[],m,f),C=y.location.nativeElement,T=y.injector.get(UE,null);return T?.registerApplication(C),y.onDestroy(()=>{this.detachView(y.hostView),cg(this.components,y),T?.unregisterApplication(C)}),this._loadComponent(y),un(11,y),y})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){un(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Dv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new fe(101,!1);let t=tt(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,tt(t),this.afterTick.next(),un(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Xu,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<w7;)un(14),this.synchronizeOnce(),un(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!ng(r))continue;let o=i&&!this.zonelessEnabled?0:1;NN(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ng(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;cg(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(xg,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>cg(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new fe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cg(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rn(n,e,t,i){let r=je(),o=rc();if(co(r,o,e)){let s=En(),l=rg();K$(l,r,n,e,t,i)}return rn}var h0e=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var QC=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function bC(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function x7(n,e,t){let i,r,o=0,s=n.length-1,l=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let f=n.at(o),m=e[o],y=bC(o,f,o,m,t);if(y!==0){y<0&&n.updateValue(o,m),o++;continue}let C=n.at(s),T=e[u],U=bC(s,C,u,T,t);if(U!==0){U<0&&n.updateValue(s,T),s--,u--;continue}let H=t(o,f),j=t(s,C),X=t(o,m);if(Object.is(X,j)){let ae=t(u,T);Object.is(ae,H)?(n.swap(o,s),n.updateValue(s,T),u--,s--):n.move(s,o),n.updateValue(o,m),o++;continue}if(i??=new wv,r??=xR(n,o,s,t),YC(n,i,o,X))n.updateValue(o,m),o++,s++;else if(r.has(X))i.set(H,n.detach(o)),s--;else{let ae=n.create(o,e[o]);n.attach(o,ae),o++,s++}}for(;o<=u;)wR(n,i,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),f=u.next();for(;!f.done&&o<=s;){let m=n.at(o),y=f.value,C=bC(o,m,o,y,t);if(C!==0)C<0&&n.updateValue(o,y),o++,f=u.next();else{i??=new wv,r??=xR(n,o,s,t);let T=t(o,y);if(YC(n,i,o,T))n.updateValue(o,y),o++,s++,f=u.next();else if(!r.has(T))n.attach(o,n.create(o,y)),o++,s++,f=u.next();else{let U=t(o,m);i.set(U,n.detach(o)),s--}}}for(;!f.done;)wR(n,i,t,n.length,f.value),f=u.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(u=>{n.destroy(u)})}function YC(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function wR(n,e,t,i,r){if(YC(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function xR(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var wv=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function Re(n,e,t,i,r,o,s,l){ra("NgControlFlow");let u=je(),f=En(),m=Oo(f.consts,o);return bv(u,f,n,e,t,i,r,m,256,s,l),$E}function $E(n,e,t,i,r,o,s,l){ra("NgControlFlow");let u=je(),f=En(),m=Oo(f.consts,o);return bv(u,f,n,e,t,i,r,m,512,s,l),$E}function Ne(n,e){ra("NgControlFlow");let t=je(),i=rc(),r=t[i]!==rr?t[i]:-1,o=r!==-1?xv(t,Sn+r):void 0,s=0;if(co(t,i,n)){let l=tt(null);try{if(o!==void 0&&zN(o,s),n!==-1){let u=Sn+n,f=xv(t,u),m=eE(t[Ve],u),y=$N(f,m,t),C=Lv(t,m,e,{dehydratedView:y});Fv(f,C,s,ug(m,y))}}finally{tt(l)}}else if(o!==void 0){let l=UN(o,s);l!==void 0&&(l[Hn]=e)}}var ZC=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-Rn}};function HE(n,e){return e}var JC=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function od(n,e,t,i,r,o,s,l,u,f,m,y,C){ra("NgControlFlow");let T=je(),U=En(),H=u!==void 0,j=je(),X=l?s.bind(j[so][Hn]):s,ae=new JC(H,X);j[Sn+n]=ae,bv(T,U,n+1,e,t,i,r,Oo(U.consts,o),256),H&&bv(T,U,n+2,u,f,m,y,Oo(U.consts,C),512)}var XC=class extends QC{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-Rn}at(e){return this.getLView(e)[Hn].$implicit}attach(e,t){let i=t[Rh];this.needsIndexUpdate||=e!==this.length,Fv(this.lContainer,t,e,ug(this.templateTNode,i)),C7(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,E7(this.lContainer,e),I7(this.lContainer,e)}create(e,t){let i=UC(this.lContainer,this.templateTNode.tView.ssrId),r=Lv(this.hostLView,this.templateTNode,new ZC(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){kv(e[Ve],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Hn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Hn].$index=e}getLView(e){return P7(this.lContainer,e)}};function sd(n){let e=tt(null),t=Js();try{let i=je(),r=i[Ve],o=i[t],s=t+1,l=xv(i,s);if(o.liveCollection===void 0){let f=eE(r,s);o.liveCollection=new XC(l,i,f)}else o.liveCollection.reset();let u=o.liveCollection;if(x7(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let f=rc(),m=u.length===0;if(co(i,f,m)){let y=t+2,C=xv(i,y);if(m){let T=eE(r,y),U=$N(C,T,i),H=Lv(i,T,void 0,{dehydratedView:U});Fv(C,H,0,ug(T,U))}else r.firstUpdatePass&&vH(C),zN(C,0)}}}finally{tt(e)}}function xv(n,e){return n[e]}function C7(n,e){if(n.length<=Rn)return;let t=Rn+e,i=n[t],r=i?i[Wu]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[ic];E$(o,r),Ju.delete(i),r.detachedLeaveAnimationFns=void 0}}function E7(n,e){if(n.length<=Rn)return;let t=Rn+e,i=n[t],r=i?i[Wu]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function I7(n,e){return hg(n,e)}function P7(n,e){return UN(n,e)}function eE(n,e){return tg(n,e)}function W(n,e,t){let i=je(),r=rc();if(co(i,r,e)){let o=En(),s=rg();SN(s,i,n,e,i[fn],t)}return W}function tE(n,e,t,i,r){OE(e,n,t,r?"class":"style",i)}function b(n,e,t,i){let r=je(),o=r[Ve],s=n+Sn,l=o.firstCreatePass?RE(s,r,2,e,TE,F0(),t,i):o.data[s];if(SE(l,r,n,e,uL),Fh(l)){let u=r[Ve];Nv(u,r,l),hE(u,l,r)}return i!=null&&yg(r,l),b}function w(){let n=En(),e=ti(),t=ME(e);return n.firstCreatePass&&NE(n,t),eC(t)&&tC(),X1(),t.classesWithoutHost!=null&&i9(t)&&tE(n,t,je(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&r9(t)&&tE(n,t,je(),t.stylesWithoutHost,!1),w}function oe(n,e,t,i){return b(n,e,t,i),w(),oe}function Y(n,e,t,i){let r=je(),o=r[Ve],s=n+Sn,l=o.firstCreatePass?DH(s,o,2,e,t,i):o.data[s];return SE(l,r,n,e,uL),i!=null&&yg(r,l),Y}function J(){let n=ti(),e=ME(n);return eC(e)&&tC(),X1(),J}function Ye(n,e,t,i){return Y(n,e,t,i),J(),Ye}var uL=(n,e,t,i,r)=>(og(!0),cN(e[fn],i,jk()));function pt(n,e,t){let i=je(),r=i[Ve],o=n+Sn,s=r.firstCreatePass?RE(o,i,8,"ng-container",TE,F0(),e,t):r.data[o];if(SE(s,i,n,"ng-container",T7),Fh(s)){let l=i[Ve];Nv(l,i,s),hE(l,s,i)}return t!=null&&yg(i,s),pt}function gt(){let n=En(),e=ti(),t=ME(e);return n.firstCreatePass&&NE(n,t),gt}var T7=(n,e,t,i,r)=>(og(!0),Z9(e[fn],""));function ve(){return je()}function ii(n,e,t){let i=je(),r=rc();if(co(i,r,e)){let o=En(),s=rg();MN(s,i,n,e,i[fn],t)}return ii}var Y0=void 0;function S7(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var M7=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Y0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Y0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Y0,"{1} 'at' {0}",Y0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",S7],wC={};function Gr(n){let e=O7(n),t=CR(e);if(t)return t;let i=e.split("-")[0];if(t=CR(i),t)return t;if(i==="en")return M7;throw new fe(701,!1)}function CR(n){return n in wC||(wC[n]=ss.ng&&ss.ng.common&&ss.ng.common.locales&&ss.ng.common.locales[n]),wC[n]}var Nn=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Nn||{});function O7(n){return n.toLowerCase().replace(/_/g,"-")}var Cg="en-US";var A7=Cg;function dL(n){typeof n=="string"&&(A7=n.toLowerCase().replace(/_/g,"-"))}function ee(n,e,t){let i=je(),r=En(),o=ti();return hL(r,i,i[fn],o,n,e,t),ee}function Ct(n,e,t){let i=je(),r=En(),o=ti();return(o.type&3||t)&&ZN(o,r,i,t,i[fn],n,e,nv(o,i,e)),Ct}function hL(n,e,t,i,r,o,s){let l=!0,u=null;if((i.type&3||s)&&(u??=nv(i,e,o),ZN(i,n,e,s,t,r,o,u)&&(l=!1)),l){let f=i.outputs?.[r],m=i.hostDirectiveOutputs?.[r];if(m&&m.length)for(let y=0;y<m.length;y+=2){let C=m[y],T=m[y+1];u??=nv(i,e,o),_R(i,e,C,T,r,u)}if(f&&f.length)for(let y of f)u??=nv(i,e,o),_R(i,e,y,r,r,u)}}function B(n=1){return zk(n)}function qE(n,e,t,i){i7(n,e,t,i)}function ad(n,e,t){n7(n,e,t)}function dc(n){let e=je(),t=En(),i=sC();U0(i+1);let r=VE(t,i);if(n.dirty&&wk(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=s7(e,i);n.reset(o,_9),n.notifyOnChanges()}return!0}return!1}function hc(){return t7(je(),sC())}function Pt(n){let e=Ak();return R0(e,Sn+n)}function Z0(n,e){return n<<17|e<<2}function nd(n){return n>>17&32767}function D7(n){return(n&2)==2}function k7(n,e){return n&131071|e<<17}function nE(n){return n|2}function Gh(n){return(n&131068)>>2}function xC(n,e){return n&-131069|e<<2}function R7(n){return(n&1)===1}function iE(n){return n|1}function N7(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,l=nd(s),u=Gh(s);n[i]=t;let f=!1,m;if(Array.isArray(t)){let y=t;m=y[1],(m===null||kh(y,m)>0)&&(f=!0)}else m=t;if(r)if(u!==0){let C=nd(n[l+1]);n[i+1]=Z0(C,l),C!==0&&(n[C+1]=xC(n[C+1],i)),n[l+1]=k7(n[l+1],i)}else n[i+1]=Z0(l,0),l!==0&&(n[l+1]=xC(n[l+1],i)),l=i;else n[i+1]=Z0(u,0),l===0?l=i:n[u+1]=xC(n[u+1],i),u=i;f&&(n[i+1]=nE(n[i+1])),ER(n,m,i,!0),ER(n,m,i,!1),L7(e,m,n,i,o),s=Z0(l,u),o?e.classBindings=s:e.styleBindings=s}function L7(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&kh(o,e)>=0&&(t[i+1]=iE(t[i+1]))}function ER(n,e,t,i){let r=n[t+1],o=e===null,s=i?nd(r):Gh(r),l=!1;for(;s!==0&&(l===!1||o);){let u=n[s],f=n[s+1];F7(u,e)&&(l=!0,n[s+1]=i?iE(f):nE(f)),s=i?nd(f):Gh(f)}l&&(n[t+1]=i?nE(r):iE(r))}function F7(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?kh(n,e)>=0:!1}var fs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function V7(n){return n.substring(fs.key,fs.keyEnd)}function B7(n){return U7(n),fL(n,pL(n,0,fs.textEnd))}function fL(n,e){let t=fs.textEnd;return t===e?-1:(e=fs.keyEnd=z7(n,fs.key=e,t),pL(n,e,t))}function U7(n){fs.key=0,fs.keyEnd=0,fs.value=0,fs.valueEnd=0,fs.textEnd=n.length}function pL(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function z7(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function cd(n,e,t){return gL(n,e,t,!1),cd}function We(n,e){return gL(n,e,null,!0),We}function ld(n){$7(Q7,j7,n,!0)}function j7(n,e){for(let t=B7(e);t>=0;t=fL(e,t))A0(n,V7(e),!0)}function gL(n,e,t,i){let r=je(),o=En(),s=V0(2);if(o.firstUpdatePass&&_L(o,n,s,i),e!==rr&&co(r,s,e)){let l=o.data[Js()];vL(o,l,r,r[fn],n,r[s+1]=Z7(e,t),i,s)}}function $7(n,e,t,i){let r=En(),o=V0(2);r.firstUpdatePass&&_L(r,null,o,i);let s=je();if(t!==rr&&co(s,o,t)){let l=r.data[Js()];if(yL(l,i)&&!mL(r,o)){let u=i?l.classesWithoutHost:l.stylesWithoutHost;u!==null&&(t=T0(u,t||"")),tE(r,l,s,t,i)}else Y7(r,l,s,s[fn],s[o+1],s[o+1]=K7(n,e,t),i,o)}}function mL(n,e){return e>=n.expandoStartIndex}function _L(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[Js()],s=mL(n,t);yL(o,i)&&e===null&&!s&&(e=!1),e=H7(r,o,e,i),N7(r,o,e,t,s,i)}}function H7(n,e,t,i){let r=Fk(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=CC(null,n,e,t,i),t=pg(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=CC(r,n,e,t,i),o===null){let u=q7(n,e,i);u!==void 0&&Array.isArray(u)&&(u=CC(null,n,e,u[1],i),u=pg(u,e.attrs,i),G7(n,e,i,u))}else o=W7(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function q7(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Gh(i)!==0)return n[nd(i)]}function G7(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[nd(r)]=i}function W7(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=pg(i,s,t)}return pg(i,e.attrs,t)}function CC(n,e,t,i,r){let o=null,s=t.directiveEnd,l=t.directiveStylingLast;for(l===-1?l=t.directiveStart:l++;l<s&&(o=e[l],i=pg(i,o.hostAttrs,r),o!==n);)l++;return n!==null&&(t.directiveStylingLast=l),i}function pg(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),A0(n,s,t?!0:e[++o]))}return n===void 0?null:n}function K7(n,e,t){if(t==null||t==="")return Ir;let i=[],r=id(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function Q7(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&A0(n,i,t)}function Y7(n,e,t,i,r,o,s,l){r===rr&&(r=Ir);let u=0,f=0,m=0<r.length?r[0]:null,y=0<o.length?o[0]:null;for(;m!==null||y!==null;){let C=u<r.length?r[u+1]:void 0,T=f<o.length?o[f+1]:void 0,U=null,H;m===y?(u+=2,f+=2,C!==T&&(U=y,H=T)):y===null||m!==null&&m<y?(u+=2,U=m):(f+=2,U=y,H=T),U!==null&&vL(n,e,t,i,U,H,s,l),m=u<r.length?r[u]:null,y=f<o.length?o[f]:null}}function vL(n,e,t,i,r,o,s,l){if(!(e.type&3))return;let u=n.data,f=u[l+1],m=R7(f)?IR(u,e,t,r,Gh(f),s):void 0;if(!Cv(m)){Cv(o)||D7(f)&&(o=IR(u,null,t,r,l,s));let y=G1(Js(),t);B$(i,s,y,r,o)}}function IR(n,e,t,i,r,o){let s=e===null,l;for(;r>0;){let u=n[r],f=Array.isArray(u),m=f?u[1]:u,y=m===null,C=t[r+1];C===rr&&(C=y?Ir:void 0);let T=y?D0(C,i):m===i?C:void 0;if(f&&!Cv(T)&&(T=D0(u,i)),Cv(T)&&(l=T,s))return l;let U=n[r+1];r=s?nd(U):Gh(U)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(l=D0(u,i))}return l}function Cv(n){return n!==void 0}function Z7(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Xa(id(n)))),n}function yL(n,e){return(n.flags&(e?8:16))!==0}function I(n,e=""){let t=je(),i=En(),r=n+Sn,o=i.firstCreatePass?bg(i,r,1,e,null):i.data[r],s=J7(i,t,o,e,n);t[r]=s,$0()&&IE(i,t,s,o),Uh(o,!1)}var J7=(n,e,t,i,r)=>(og(!0),Q9(e[fn],i));function bL(n,e,t,i=""){return co(n,rc(),t)?e+tc(t)+i:rr}function X7(n,e,t,i,r,o=""){let s=Dk(),l=YN(n,s,t,r);return V0(2),l?e+tc(t)+i+tc(r)+o:rr}function ue(n){return Te("",n),ue}function Te(n,e,t){let i=je(),r=bL(i,n,e,t);return r!==rr&&wL(i,Js(),r),Te}function qn(n,e,t,i,r){let o=je(),s=X7(o,n,e,t,i,r);return s!==rr&&wL(o,Js(),s),qn}function wL(n,e,t){let i=G1(e,n);Y9(n[fn],i,t)}function zt(n,e,t){dC(e)&&(e=e());let i=je(),r=rc();if(co(i,r,e)){let o=En(),s=rg();SN(s,i,n,e,i[fn],t)}return zt}function Kt(n,e){let t=dC(n);return t&&n.set(e),t}function jt(n,e){let t=je(),i=En(),r=ti();return hL(i,t,t[fn],r,n,e),jt}function GE(n){return co(je(),rc(),n)?tc(n):rr}function WE(n,e,t=""){return bL(je(),n,e,t)}function eq(n,e,t){let i=En();if(i.firstCreatePass){let r=Zs(n);rE(t,i.data,i.blueprint,r,!0),rE(e,i.data,i.blueprint,r,!1)}}function rE(n,e,t,i,r){if(n=qi(n),Array.isArray(n))for(let o=0;o<n.length;o++)rE(n[o],e,t,i,r);else{let o=En(),s=je(),l=ti(),u=zu(n)?n:qi(n.provide),f=U1(n),m=l.providerIndexes&1048575,y=l.directiveStart,C=l.providerIndexes>>20;if(zu(n)||!n.multi){let T=new Zu(f,r,Ue,null),U=IC(u,e,r?m:m+C,y);U===-1?(TC(av(l,s),o,u),EC(o,n,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(T),s.push(T)):(t[U]=T,s[U]=T)}else{let T=IC(u,e,m+C,y),U=IC(u,e,m,m+C),H=T>=0&&t[T],j=U>=0&&t[U];if(r&&!j||!r&&!H){TC(av(l,s),o,u);let X=iq(r?nq:tq,t.length,r,i,f,n);!r&&j&&(t[U].providerFactory=X),EC(o,n,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(X),s.push(X)}else{let X=xL(t[r?U:T],f,!r&&i);EC(o,n,T>-1?T:U,X)}!r&&i&&j&&t[U].componentProviders++}}}function EC(n,e,t,i){let r=zu(e),o=_k(e);if(r||o){let u=(o?qi(e.useClass):e).prototype.ngOnDestroy;if(u){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let m=f.indexOf(t);m===-1?f.push(t,[i,u]):f[m+1].push(i,u)}else f.push(t,u)}}}function xL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function IC(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function tq(n,e,t,i,r){return oE(this.multi,[])}function nq(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let l=this.providerFactory.componentProviders,u=lg(i,i[Ve],this.providerFactory.index,r);s=u.slice(0,l),oE(o,s);for(let f=l;f<u.length;f++)s.push(u[f])}else s=[],oE(o,s);return s}function oE(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function iq(n,e,t,i,r,o){let s=new Zu(n,t,Ue,null);return s.multi=[],s.index=e,s.componentProviders=0,xL(s,r,i&&!t),s}function fc(n,e=[]){return t=>{t.providersResolver=(i,r)=>eq(i,r?r(n):n,e)}}function Zh(n,e,t){let i=ig()+n,r=je();return r[i]===rr?FE(r,i,t?e.call(t):e()):kH(r,i)}function $v(n,e,t,i){return EL(je(),ig(),n,e,t,i)}function CL(n,e){let t=n[e];return t===rr?void 0:t}function EL(n,e,t,i,r,o){let s=e+t;return co(n,s,r)?FE(n,s+1,o?i.call(o,r):i(r)):CL(n,s+1)}function rq(n,e,t,i,r,o,s){let l=e+t;return YN(n,l,r,o)?FE(n,l+2,s?i.call(s,r,o):i(r,o)):CL(n,l+2)}function Me(n,e){let t=En(),i,r=n+Sn;t.firstCreatePass?(i=oq(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=ul(i.type,!0)),s,l=Er(Ue);try{let u=sv(!1),f=o();return sv(u),W1(t,je(),r,f),f}finally{Er(l)}}function oq(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function $e(n,e,t){let i=n+Sn,r=je(),o=R0(r,i);return IL(r,i)?EL(r,ig(),e,o.transform,t,o):o.transform(t)}function ri(n,e,t,i){let r=n+Sn,o=je(),s=R0(o,r);return IL(o,r)?rq(o,ig(),e,s.transform,t,i,s):s.transform(t,i)}function IL(n,e){return n[Ve].data[e].pure}function Qt(n,e){return Vv(n,e)}var Ev=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},KE=(()=>{class n{compileModuleSync(t){return new yv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=L1(t),o=fN(r.declarations).reduce((s,l)=>{let u=nc(l);return u&&s.push(new ed(u)),s},[]);return new Ev(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sq=(()=>{class n{zone=$(kt);changeDetectionScheduler=$(ec);applicationRef=$(uc);applicationErrorHandler=$(Tr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PL({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new kt(Ee(te({},TL()),{scheduleInRootZone:t})),[{provide:kt,useFactory:n},{provide:pl,multi:!0,useFactory:()=>{let i=$(sq,{optional:!0});return()=>i.initialize()}},{provide:pl,multi:!0,useFactory:()=>{let i=$(aq);return()=>{i.initialize()}}},e===!0?{provide:hC,useValue:!0}:[],{provide:fC,useValue:t??vN},{provide:Tr,useFactory:()=>{let i=$(kt),r=$($n),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(os),o.handleError(s))})}}}]}function TL(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var aq=(()=>{class n{subscription=new kn;initialized=!1;zone=$(kt);pendingTasks=$(Xs);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{kt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{kt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var SL=(()=>{class n{applicationErrorHandler=$(Tr);appRef=$(uc);taskService=$(Xs);ngZone=$(kt);zonelessEnabled=$(q0);tracing=$(rd,{optional:!0});disableScheduling=$(hC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new kn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(dv):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(fC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof hv||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?aR:yN;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(dv+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,aR(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cq(){return typeof $localize<"u"&&$localize.locale||Cg}var Jh=new we("",{providedIn:"root",factory:()=>$(Jh,{optional:!0,skipSelf:!0})||cq()});function oi(n){return tk(n)}function wl(n,e){return Q_(n,e?.equal)}var ML=class{[nr];constructor(e){this[nr]=e}destroy(){this[nr].destroy()}};var RL=Symbol("InputSignalNode#UNSET"),bq=Ee(te({},Y_),{transformFn:void 0,applyValueToInputSignal(n,e){vh(n,e)}});function NL(n,e){let t=Object.create(bq);t.value=n,t.transformFn=e?.transform;function i(){if(gh(t),t.value===RL){let r=null;throw new fe(-950,r)}return t.value}return i[nr]=t,i}var qv=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>gg(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},wq=new we("");wq.__NG_ELEMENT_ID__=n=>{let e=ti();if(e===null)throw new fe(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new fe(204,!1)};function OL(n,e){return NL(n,e)}function xq(n){return NL(RL,n)}var LL=(OL.required=xq,OL);var QE=new we(""),Cq=new we("");function Eg(n){return!n.moduleRef}function Eq(n){let e=Eg(n)?n.r3Injector:n.moduleRef.injector,t=e.get(kt);return t.run(()=>{Eg(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Tr),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),Eg(n)){let o=()=>e.destroy(),s=n.platformInjector.get(QE);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(QE);s.add(o),n.moduleRef.onDestroy(()=>{cg(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return Pq(i,t,()=>{let o=e.get(Xs),s=o.add(),l=e.get(jE);return l.runInitializers(),l.donePromise.then(()=>{let u=e.get(Jh,Cg);if(dL(u||Cg),!e.get(Cq,!0))return Eg(n)?e.get(uc):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Eg(n)){let m=e.get(uc);return n.rootComponent!==void 0&&m.bootstrap(n.rootComponent),m}else return Iq?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var Iq;function Pq(n,e,t){try{let i=t();return lc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var Hv=null;function Tq(n=[],e){return mn.create({name:e,providers:[{provide:Yp,useValue:"platform"},{provide:QE,useValue:new Set([()=>Hv=null])},...n]})}function Sq(n=[]){if(Hv)return Hv;let e=Tq(n);return Hv=e,cL(),Mq(e),e}function Mq(n){let e=n.get(Pv,null);ei(n,()=>{e?.forEach(t=>t())})}function eI(){return!1}var sa=(()=>{class n{static __NG_ELEMENT_ID__=Oq}return n})();function Oq(n){return Aq(ti(),je(),(n&16)===16)}function Aq(n,e,t){if(_l(n)&&!t){let i=Mo(n.index,e);return new yl(i,i)}else if(n.type&175){let i=e[so];return new yl(i,e)}return null}var YE=class{constructor(){}supports(e){return LE(e)}create(e){return new ZE(e)}},Dq=(n,e)=>e,ZE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Dq}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<AL(i,r,o)?t:i,l=AL(s,r,o),u=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let f=l-r,m=u-r;if(f!=m){for(let C=0;C<f;C++){let T=C<o.length?o[C]:o[C]=0,U=T+C;m<=U&&U<f&&(o[C]=T+1)}let y=s.previousIndex;o[y]=m-f}}l!==u&&e(s,l,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!LE(e))throw new fe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],s=this._trackByFn(l,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,l),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,l)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,KN(e,l=>{s=this._trackByFn(r,l),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,l,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,l,s,r)),Object.is(t.item,l)||this._addIdentityChange(t,l)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new JE(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Gv),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Gv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},JE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},XE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Gv=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new XE,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function AL(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function DL(){return new tI([new YE])}var tI=(()=>{class n{factories;static \u0275prov=ge({token:n,providedIn:"root",factory:DL});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let i=$(n,{optional:!0,skipSelf:!0});return n.create(t,i||DL())}}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new fe(901,!1)}}return n})();function FL(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;un(8);try{let o=r?.injector??Sq(i),s=[PL({}),{provide:ec,useExisting:SL},Hk,...t||[]],l=new fg({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Eq({r3Injector:l.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{un(9)}}function xl(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function VL(n){let e=nc(n);if(!e)return null;let t=new ed(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var zL=null;function Do(){return zL}function nI(n){zL??=n}var Ig=class{},Pg=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:()=>$(jL),providedIn:"platform"})}return n})(),iI=new we(""),jL=(()=>{class n extends Pg{_location;_history;_doc=$(ni);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Do().getBaseHref(this._doc)}onPopState(t){let i=Do().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=Do().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Wv(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function BL(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ps(n){return n&&n[0]!=="?"?`?${n}`:n}var gs=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:()=>$(Qv),providedIn:"root"})}return n})(),Kv=new we(""),Qv=(()=>{class n extends gs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??$(ni).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Wv(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+ps(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+ps(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+ps(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Ge(Pg),Ge(Kv,8))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cl=(()=>{class n{_subject=new Cn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=Nq(BL(UL(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ps(i))}normalize(t){return n.stripTrailingSlash(Rq(this._basePath,UL(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ps(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ps(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=ps;static joinWithSlash=Wv;static stripTrailingSlash=BL;static \u0275fac=function(i){return new(i||n)(Ge(gs))};static \u0275prov=ge({token:n,factory:()=>kq(),providedIn:"root"})}return n})();function kq(){return new Cl(Ge(gs))}function Rq(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function UL(n){return n.replace(/\/index.html$/,"")}function Nq(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var hI=(()=>{class n extends gs{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=Wv(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+ps(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+ps(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Ge(Pg),Ge(Kv,8))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();var fI=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(fI||{});var or=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(or||{}),dn=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(dn||{}),Wr=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Wr||{}),Kr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function KL(n){return Gr(n)[Nn.LocaleId]}function QL(n,e,t){let i=Gr(n),r=[i[Nn.DayPeriodsFormat],i[Nn.DayPeriodsStandalone]],o=ko(r,e);return ko(o,t)}function YL(n,e,t){let i=Gr(n),r=[i[Nn.DaysFormat],i[Nn.DaysStandalone]],o=ko(r,e);return ko(o,t)}function ZL(n,e,t){let i=Gr(n),r=[i[Nn.MonthsFormat],i[Nn.MonthsStandalone]],o=ko(r,e);return ko(o,t)}function JL(n,e){let i=Gr(n)[Nn.Eras];return ko(i,e)}function Tg(n,e){let t=Gr(n);return ko(t[Nn.DateFormat],e)}function Sg(n,e){let t=Gr(n);return ko(t[Nn.TimeFormat],e)}function Mg(n,e){let i=Gr(n)[Nn.DateTimeFormat];return ko(i,e)}function aa(n,e){let t=Gr(n),i=t[Nn.NumberSymbols][e];if(typeof i>"u"){if(e===Kr.CurrencyDecimal)return t[Nn.NumberSymbols][Kr.Decimal];if(e===Kr.CurrencyGroup)return t[Nn.NumberSymbols][Kr.Group]}return i}function XL(n,e){return Gr(n)[Nn.NumberFormats][e]}function e4(n){if(!n[Nn.ExtraData])throw new fe(2303,!1)}function t4(n){let e=Gr(n);return e4(e),(e[Nn.ExtraData][2]||[]).map(i=>typeof i=="string"?rI(i):[rI(i[0]),rI(i[1])])}function n4(n,e,t){let i=Gr(n);e4(i);let r=[i[Nn.ExtraData][0],i[Nn.ExtraData][1]],o=ko(r,e)||[];return ko(o,t)||[]}function ko(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new fe(2304,!1)}function rI(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Lq=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Yv={},Fq=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function i4(n,e,t,i){let r=Gq(n);e=pc(t,e)||e;let s=[],l;for(;e;)if(l=Fq.exec(e),l){s=s.concat(l.slice(1));let m=s.pop();if(!m)break;e=m}else{s.push(e);break}let u=r.getTimezoneOffset();i&&(u=o4(i,u),r=qq(r,i));let f="";return s.forEach(m=>{let y=$q(m);f+=y?y(r,t,u):m==="''"?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function ty(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function pc(n,e){let t=KL(n);if(Yv[t]??={},Yv[t][e])return Yv[t][e];let i="";switch(e){case"shortDate":i=Tg(n,Wr.Short);break;case"mediumDate":i=Tg(n,Wr.Medium);break;case"longDate":i=Tg(n,Wr.Long);break;case"fullDate":i=Tg(n,Wr.Full);break;case"shortTime":i=Sg(n,Wr.Short);break;case"mediumTime":i=Sg(n,Wr.Medium);break;case"longTime":i=Sg(n,Wr.Long);break;case"fullTime":i=Sg(n,Wr.Full);break;case"short":let r=pc(n,"shortTime"),o=pc(n,"shortDate");i=Zv(Mg(n,Wr.Short),[r,o]);break;case"medium":let s=pc(n,"mediumTime"),l=pc(n,"mediumDate");i=Zv(Mg(n,Wr.Medium),[s,l]);break;case"long":let u=pc(n,"longTime"),f=pc(n,"longDate");i=Zv(Mg(n,Wr.Long),[u,f]);break;case"full":let m=pc(n,"fullTime"),y=pc(n,"fullDate");i=Zv(Mg(n,Wr.Full),[m,y]);break}return i&&(Yv[t][e]=i),i}function Zv(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function ms(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return i&&(s=s.slice(s.length-e)),o+s}function Vq(n,e){return ms(n,3).substring(0,e)}function si(n,e,t=0,i=!1,r=!1){return function(o,s){let l=Bq(n,o);if((t>0||l>-t)&&(l+=t),n===3)l===0&&t===-12&&(l=12);else if(n===6)return Vq(l,e);let u=aa(s,Kr.MinusSign);return ms(l,e,u,i,r)}}function Bq(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new fe(2301,!1)}}function vn(n,e,t=or.Format,i=!1){return function(r,o){return Uq(r,o,n,e,t,i)}}function Uq(n,e,t,i,r,o){switch(t){case 2:return ZL(e,r,i)[n.getMonth()];case 1:return YL(e,r,i)[n.getDay()];case 0:let s=n.getHours(),l=n.getMinutes();if(o){let f=t4(e),m=n4(e,r,i),y=f.findIndex(C=>{if(Array.isArray(C)){let[T,U]=C,H=s>=T.hours&&l>=T.minutes,j=s<U.hours||s===U.hours&&l<U.minutes;if(T.hours<U.hours){if(H&&j)return!0}else if(H||j)return!0}else if(C.hours===s&&C.minutes===l)return!0;return!1});if(y!==-1)return m[y]}return QL(e,r,i)[s<12?0:1];case 3:return JL(e,i)[n.getFullYear()<=0?0:1];default:let u=t;throw new fe(2302,!1)}}function Jv(n){return function(e,t,i){let r=-1*i,o=aa(t,Kr.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+ms(s,2,o)+ms(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+ms(s,1,o);case 2:return"GMT"+(r>=0?"+":"")+ms(s,2,o)+":"+ms(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+ms(s,2,o)+":"+ms(Math.abs(r%60),2,o);default:throw new fe(2310,!1)}}}var zq=0,ey=4;function jq(n){let e=ty(n,zq,1).getDay();return ty(n,0,1+(e<=ey?ey:ey+7)-e)}function r4(n){let e=n.getDay(),t=e===0?-3:ey-e;return ty(n.getFullYear(),n.getMonth(),n.getDate()+t)}function oI(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();r=1+Math.floor((s+o)/7)}else{let o=r4(t),s=jq(o.getFullYear()),l=o.getTime()-s.getTime();r=1+Math.round(l/6048e5)}return ms(r,n,aa(i,Kr.MinusSign))}}function Xv(n,e=!1){return function(t,i){let o=r4(t).getFullYear();return ms(o,n,aa(i,Kr.MinusSign),e)}}var sI={};function $q(n){if(sI[n])return sI[n];let e;switch(n){case"G":case"GG":case"GGG":e=vn(3,dn.Abbreviated);break;case"GGGG":e=vn(3,dn.Wide);break;case"GGGGG":e=vn(3,dn.Narrow);break;case"y":e=si(0,1,0,!1,!0);break;case"yy":e=si(0,2,0,!0,!0);break;case"yyy":e=si(0,3,0,!1,!0);break;case"yyyy":e=si(0,4,0,!1,!0);break;case"Y":e=Xv(1);break;case"YY":e=Xv(2,!0);break;case"YYY":e=Xv(3);break;case"YYYY":e=Xv(4);break;case"M":case"L":e=si(1,1,1);break;case"MM":case"LL":e=si(1,2,1);break;case"MMM":e=vn(2,dn.Abbreviated);break;case"MMMM":e=vn(2,dn.Wide);break;case"MMMMM":e=vn(2,dn.Narrow);break;case"LLL":e=vn(2,dn.Abbreviated,or.Standalone);break;case"LLLL":e=vn(2,dn.Wide,or.Standalone);break;case"LLLLL":e=vn(2,dn.Narrow,or.Standalone);break;case"w":e=oI(1);break;case"ww":e=oI(2);break;case"W":e=oI(1,!0);break;case"d":e=si(2,1);break;case"dd":e=si(2,2);break;case"c":case"cc":e=si(7,1);break;case"ccc":e=vn(1,dn.Abbreviated,or.Standalone);break;case"cccc":e=vn(1,dn.Wide,or.Standalone);break;case"ccccc":e=vn(1,dn.Narrow,or.Standalone);break;case"cccccc":e=vn(1,dn.Short,or.Standalone);break;case"E":case"EE":case"EEE":e=vn(1,dn.Abbreviated);break;case"EEEE":e=vn(1,dn.Wide);break;case"EEEEE":e=vn(1,dn.Narrow);break;case"EEEEEE":e=vn(1,dn.Short);break;case"a":case"aa":case"aaa":e=vn(0,dn.Abbreviated);break;case"aaaa":e=vn(0,dn.Wide);break;case"aaaaa":e=vn(0,dn.Narrow);break;case"b":case"bb":case"bbb":e=vn(0,dn.Abbreviated,or.Standalone,!0);break;case"bbbb":e=vn(0,dn.Wide,or.Standalone,!0);break;case"bbbbb":e=vn(0,dn.Narrow,or.Standalone,!0);break;case"B":case"BB":case"BBB":e=vn(0,dn.Abbreviated,or.Format,!0);break;case"BBBB":e=vn(0,dn.Wide,or.Format,!0);break;case"BBBBB":e=vn(0,dn.Narrow,or.Format,!0);break;case"h":e=si(3,1,-12);break;case"hh":e=si(3,2,-12);break;case"H":e=si(3,1);break;case"HH":e=si(3,2);break;case"m":e=si(4,1);break;case"mm":e=si(4,2);break;case"s":e=si(5,1);break;case"ss":e=si(5,2);break;case"S":e=si(6,1);break;case"SS":e=si(6,2);break;case"SSS":e=si(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Jv(0);break;case"ZZZZZ":e=Jv(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Jv(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Jv(2);break;default:return null}return sI[n]=e,e}function o4(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Hq(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function qq(n,e,t){let r=n.getTimezoneOffset(),o=o4(e,r);return Hq(n,-1*(o-r))}function Gq(n){if($L(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(l=>+l);return ty(r,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(Lq))return Wq(i)}let e=new Date(n);if(!$L(e))throw new fe(2311,!1);return e}function Wq(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,l=Number(n[5]||0)-i,u=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,l,u,f),e}function $L(n){return n instanceof Date&&!isNaN(n.valueOf())}var Kq=/^(\d+)?\.((\d+)(-(\d+))?)?$/,HL=22,ny=".",Og="0",Qq=";",Yq=",",aI="#";function Zq(n,e,t,i,r,o,s=!1){let l="",u=!1;if(!isFinite(n))l=aa(t,Kr.Infinity);else{let f=eG(n);s&&(f=Xq(f));let m=e.minInt,y=e.minFrac,C=e.maxFrac;if(o){let ae=o.match(Kq);if(ae===null)throw new fe(2306,!1);let le=ae[1],he=ae[3],ct=ae[5];le!=null&&(m=cI(le)),he!=null&&(y=cI(he)),ct!=null?C=cI(ct):he!=null&&y>C&&(C=y)}tG(f,y,C);let T=f.digits,U=f.integerLen,H=f.exponent,j=[];for(u=T.every(ae=>!ae);U<m;U++)T.unshift(0);for(;U<0;U++)T.unshift(0);U>0?j=T.splice(U,T.length):(j=T,T=[0]);let X=[];for(T.length>=e.lgSize&&X.unshift(T.splice(-e.lgSize,T.length).join(""));T.length>e.gSize;)X.unshift(T.splice(-e.gSize,T.length).join(""));T.length&&X.unshift(T.join("")),l=X.join(aa(t,i)),j.length&&(l+=aa(t,r)+j.join("")),H&&(l+=aa(t,Kr.Exponential)+"+"+H)}return n<0&&!u?l=e.negPre+l+e.negSuf:l=e.posPre+l+e.posSuf,l}function s4(n,e,t){let i=XL(e,fI.Decimal),r=Jq(i,aa(e,Kr.MinusSign));return Zq(n,r,e,Kr.Group,Kr.Decimal,t)}function Jq(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(Qq),r=i[0],o=i[1],s=r.indexOf(ny)!==-1?r.split(ny):[r.substring(0,r.lastIndexOf(Og)+1),r.substring(r.lastIndexOf(Og)+1)],l=s[0],u=s[1]||"";t.posPre=l.substring(0,l.indexOf(aI));for(let m=0;m<u.length;m++){let y=u.charAt(m);y===Og?t.minFrac=t.maxFrac=m+1:y===aI?t.maxFrac=m+1:t.posSuf+=y}let f=l.split(Yq);if(t.gSize=f[1]?f[1].length:0,t.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let m=r.length-t.posPre.length-t.posSuf.length,y=o.indexOf(aI);t.negPre=o.substring(0,y).replace(/'/g,""),t.negSuf=o.slice(y+m).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function Xq(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function eG(n){let e=Math.abs(n)+"",t=0,i,r,o,s,l;for((r=e.indexOf(ny))>-1&&(e=e.replace(ny,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===Og;o++);if(o===(l=e.length))i=[0],r=1;else{for(l--;e.charAt(l)===Og;)l--;for(r-=o,i=[],s=0;o<=l;o++,s++)i[s]=Number(e.charAt(o))}return r>HL&&(i=i.splice(0,HL-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function tG(n,e,t){if(e>t)throw new fe(2307,!1);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),s=o+n.integerLen,l=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let y=s;y<i.length;y++)i[y]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let y=1;y<s;y++)i[y]=0}if(l>=5)if(s-1<0){for(let y=0;y>s;y--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+n.integerLen,m=i.reduceRight(function(y,C,T,U){return C=C+y,U[T]=C<10?C:C-10,u&&(U[T]===0&&T>=f?U.pop():u=!1),C>=10?1:0},0);m&&(i.unshift(m),n.integerLen++)}function cI(n){let e=parseInt(n);if(isNaN(e))throw new fe(2305,!1);return e}var lI=/\s+/,qL=[],gc=(()=>{class n{_ngEl;_renderer;initialClasses=qL;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(lI):qL}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(lI):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(lI).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(Ue(ir),Ue(Ao))};static \u0275dir=_n({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var iy=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ai=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new iy(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,s),GL(l,r)}});for(let r=0,o=i.length;r<o;r++){let l=i.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);GL(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Ue(cc),Ue(bl),Ue(tI))};static \u0275dir=_n({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function GL(n,e){n.context.$implicit=e.item}var gn=(()=>{class n{_viewContainer;_context=new ry;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){WL(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){WL(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Ue(cc),Ue(bl))};static \u0275dir=_n({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ry=class{$implicit=null;ngIf=null};function WL(n,e){if(n&&!n.createEmbeddedView)throw new fe(2020,!1)}function oy(n,e){return new fe(2100,!1)}var uI=class{createSubscription(e,t,i){return oi(()=>e.subscribe({next:t,error:i}))}dispose(e){oi(()=>e.unsubscribe())}},dI=class{createSubscription(e,t,i){return e.then(r=>t?.(r),r=>i?.(r)),{unsubscribe:()=>{t=null,i=null}}}dispose(e){e.unsubscribe()}},nG=new dI,iG=new uI,An=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=$(Tr);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i),i=>this.applicationErrorHandler(i))}_selectStrategy(t){if(lc(t))return nG;if(zv(t))return iG;throw oy(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(Ue(sa,16))};static \u0275pipe=Yh({name:"async",type:n,pure:!1})}return n})();var mc=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw oy(n,t);return t.toUpperCase()}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Yh({name:"uppercase",type:n,pure:!0})}return n})(),rG="mediumDate",a4=new we(""),c4=new we(""),_s=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let s=i??this.defaultOptions?.dateFormat??rG,l=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return i4(t,s,o||this.locale,l)}catch(s){throw oy(n,s.message)}}static \u0275fac=function(i){return new(i||n)(Ue(Jh,16),Ue(a4,24),Ue(c4,24))};static \u0275pipe=Yh({name:"date",type:n,pure:!0})}return n})();var Ag=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,r){if(!oG(t))return null;r||=this._locale;try{let o=sG(t);return s4(o,r,i)}catch(o){throw oy(n,o.message)}}static \u0275fac=function(i){return new(i||n)(Ue(Jh,16))};static \u0275pipe=Yh({name:"number",type:n,pure:!0})}return n})();function oG(n){return!(n==null||n===""||n!==n)}function sG(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new fe(2309,!1);return n}var Tt=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=oa({type:n});static \u0275inj=as({})}return n})();function pI(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Dg=class{};var mI="browser";function l4(n){return n===mI}var u4=(()=>{class n{static \u0275prov=ge({token:n,providedIn:"root",factory:()=>new gI($(ni),window)})}return n})(),gI=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Ee(te({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let i=aG(this.document,e);i&&(this.scrollToElement(i,t),i.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(hl(2400,!1))}}scrollToElement(e,t){let i=e.getBoundingClientRect(),r=i.left+this.window.pageXOffset,o=i.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Ee(te({},t),{left:r-s[0],top:o-s[1]}))}};function aG(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var kg=class{_doc;constructor(e){this._doc=e}manager},sy=(()=>{class n extends kg{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Ge(ni))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),cy=new we(""),wI=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(s=>{s.manager=this});let r=t.filter(s=>!(s instanceof sy));this._plugins=r.slice().reverse();let o=t.find(s=>s instanceof sy);o&&this._plugins.push(o)}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new fe(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Ge(cy),Ge(kt))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),_I="ng-app-id";function d4(n){for(let e of n)e.remove()}function h4(n,e){let t=e.createElement("style");return t.textContent=n,t}function cG(n,e,t,i){let r=n.head?.querySelectorAll(`style[${_I}="${e}"],link[${_I}="${e}"]`);if(r)for(let o of r)o.removeAttribute(_I),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function yI(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var xI=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,cG(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,h4);i?.forEach(r=>this.addUsage(r,this.external,yI))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(d4(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])d4(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,h4(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,yI(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Ge(ni),Ge(Iv),Ge(Tv,8),Ge(sc))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),vI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},CI=/%COMP%/g;var p4="%COMP%",lG=`_nghost-${p4}`,uG=`_ngcontent-${p4}`,dG=!0,hG=new we("",{providedIn:"root",factory:()=>dG});function fG(n){return uG.replace(CI,n)}function pG(n){return lG.replace(CI,n)}function g4(n,e){return e.map(t=>t.replace(CI,n))}var EI=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new Rg(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof ay?r.applyToHost(t):r instanceof Ng&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,l=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,y=this.platformIsServer,C=this.tracingService;switch(i.encapsulation){case oc.Emulated:o=new ay(u,f,i,this.appId,m,s,l,y,C);break;case oc.ShadowDom:return new bI(u,f,t,i,s,l,this.nonce,y,C);default:o=new Ng(u,f,i,m,s,l,y,C);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(Ge(wI),Ge(xI),Ge(Iv),Ge(hG),Ge(ni),Ge(kt),Ge(Tv),Ge(rd,8))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),Rg=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(vI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(f4(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(f4(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new fe(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=vI[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=vI[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ta.DashCase|ta.Important)?e.style.setProperty(t,i,r&ta.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ta.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=Do().getGlobalEventTarget(this.doc,e),!e))throw new fe(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function f4(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var bI=class extends Rg{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,l,u,f){super(e,o,s,u,f),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=r.styles;m=g4(r.id,m);for(let C of m){let T=document.createElement("style");l&&T.setAttribute("nonce",l),T.textContent=C,this.shadowRoot.appendChild(T)}let y=r.getExternalStyles?.();if(y)for(let C of y){let T=yI(C,o);l&&T.setAttribute("nonce",l),this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ng=class extends Rg{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,l,u,f){super(e,o,s,l,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let m=i.styles;this.styles=f?g4(f,m):m,this.styleUrls=i.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ju.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ay=class extends Ng{contentAttr;hostAttr;constructor(e,t,i,r,o,s,l,u,f){let m=r+"-"+i.id;super(e,t,i,o,s,l,u,f,m),this.contentAttr=fG(m),this.hostAttr=pG(m)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var ly=class n extends Ig{supportsDOMEvents=!0;static makeCurrent(){nI(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=gG();return t==null?null:mG(t)}resetBaseElement(){Lg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return pI(document.cookie,e)}},Lg=null;function gG(){return Lg=Lg||document.head.querySelector("base"),Lg?Lg.getAttribute("href"):null}function mG(n){return new URL(n,document.baseURI).pathname}var _G=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),m4=["alt","control","meta","shift"],vG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_4=(()=>{class n extends kg{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Do().onAndCancel(t,s.domEventName,l,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),s="code."),m4.forEach(f=>{let m=i.indexOf(f);m>-1&&(i.splice(m,1),s+=f+".")}),s+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=r,u.fullKey=s,u}static matchEventFullKeyCode(t,i){let r=vG[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),m4.forEach(s=>{if(s!==r){let l=yG[s];l(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Ge(ni))};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();function II(n,e,t){let i=te({rootComponent:n,platformRef:t?.platformRef},bG(e));return FL(i)}function bG(n){return{appProviders:[...IG,...n?.providers??[]],platformProviders:EG}}function wG(){ly.makeCurrent()}function xG(){return new os}function CG(){return cE(document),document}var EG=[{provide:sc,useValue:mI},{provide:Pv,useValue:wG,multi:!0},{provide:ni,useFactory:CG}];var IG=[{provide:Yp,useValue:"root"},{provide:os,useFactory:xG},{provide:cy,useClass:sy,multi:!0,deps:[ni]},{provide:cy,useClass:_4,multi:!0,deps:[ni]},EI,xI,wI,{provide:Xu,useExisting:EI},{provide:Dg,useClass:_G},[]];var v4=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(Ge(ni))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var it="primary",Qg=Symbol("RouteTitle"),OI=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function hd(n){return new OI(n)}function P4(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],l=n[o];if(s[0]===":")r[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function TG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ca(n[t],e[t]))return!1;return!0}function ca(n,e){let t=n?AI(n):void 0,i=e?AI(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!T4(n[r],e[r]))return!1;return!0}function AI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function T4(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function S4(n){return n.length>0?n[n.length-1]:null}function _c(n){return c1(n)?n:lc(n)?ln(Promise.resolve(n)):Le(n)}var SG={exact:O4,subset:A4},M4={exact:MG,subset:OG,ignored:()=>!0};function y4(n,e,t){return SG[t.paths](n.root,e.root,t.matrixParams)&&M4[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function MG(n,e){return ca(n,e)}function O4(n,e,t){if(!ud(n.segments,e.segments)||!hy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!O4(n.children[i],e.children[i],t))return!1;return!0}function OG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>T4(n[t],e[t]))}function A4(n,e,t){return D4(n,e,e.segments,t)}function D4(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!ud(r,t)||e.hasChildren()||!hy(r,t,i))}else if(n.segments.length===t.length){if(!ud(n.segments,t)||!hy(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!A4(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ud(n.segments,r)||!hy(n.segments,r,i)||!n.children[it]?!1:D4(n.children[it],e,o,i)}}function hy(n,e,t){return e.every((i,r)=>M4[t](n[r].parameters,i.parameters))}var ua=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Xt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=hd(this.queryParams),this._queryParamMap}toString(){return kG.serialize(this)}},Xt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fy(this)}},El=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=hd(this.parameters),this._parameterMap}toString(){return R4(this)}};function AG(n,e){return ud(n,e)&&n.every((t,i)=>ca(t.parameters,e[i].parameters))}function ud(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function DG(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===it&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==it&&(t=t.concat(e(r,i)))}),t}var fd=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:()=>new Il,providedIn:"root"})}return n})(),Il=class{parse(e){let t=new kI(e);return new ua(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Fg(e.root,!0)}`,i=LG(e.queryParams),r=typeof e.fragment=="string"?`#${RG(e.fragment)}`:"";return`${t}${i}${r}`}},kG=new Il;function fy(n){return n.segments.map(e=>R4(e)).join("/")}function Fg(n,e){if(!n.hasChildren())return fy(n);if(e){let t=n.children[it]?Fg(n.children[it],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==it&&i.push(`${r}:${Fg(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=DG(n,(i,r)=>r===it?[Fg(n.children[it],!1)]:[`${r}:${Fg(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[it]!=null?`${fy(n)}/${t[0]}`:`${fy(n)}/(${t.join("//")})`}}function k4(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uy(n){return k4(n).replace(/%3B/gi,";")}function RG(n){return encodeURI(n)}function DI(n){return k4(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function py(n){return decodeURIComponent(n)}function b4(n){return py(n.replace(/\+/g,"%20"))}function R4(n){return`${DI(n.path)}${NG(n.parameters)}`}function NG(n){return Object.entries(n).map(([e,t])=>`;${DI(e)}=${DI(t)}`).join("")}function LG(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${uy(t)}=${uy(r)}`).join("&"):`${uy(t)}=${uy(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var FG=/^[^\/()?;#]+/;function PI(n){let e=n.match(FG);return e?e[0]:""}var VG=/^[^\/()?;=#]+/;function BG(n){let e=n.match(VG);return e?e[0]:""}var UG=/^[^=?&#]+/;function zG(n){let e=n.match(UG);return e?e[0]:""}var jG=/^[^&#]+/;function $G(n){let e=n.match(jG);return e?e[0]:""}var kI=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[it]=new Xt(e,t)),i}parseSegment(){let e=PI(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(e),new El(py(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=BG(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=PI(this.remaining);r&&(i=r,this.capture(i))}e[py(t)]=py(i)}parseQueryParam(e){let t=zG(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=$G(this.remaining);s&&(i=s,this.capture(i))}let r=b4(t),o=b4(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=PI(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new fe(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=it);let s=this.parseChildren();t[o??it]=Object.keys(s).length===1&&s[it]?s[it]:new Xt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new fe(4011,!1)}};function N4(n){return n.segments.length>0?new Xt([],{[it]:n}):n}function L4(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=L4(r);if(i===it&&o.segments.length===0&&o.hasChildren())for(let[s,l]of Object.entries(o.children))e[s]=l;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Xt(n.segments,e);return HG(t)}function HG(n){if(n.numberOfChildren===1&&n.children[it]){let e=n.children[it];return new Xt(n.segments.concat(e.segments),e.children)}return n}function Pl(n){return n instanceof ua}function F4(n,e,t=null,i=null){let r=V4(n);return B4(r,e,t,i)}function V4(n){let e;function t(o){let s={};for(let u of o.children){let f=t(u);s[u.outlet]=f}let l=new Xt(o.url,s);return o===n&&(e=l),l}let i=t(n.root),r=N4(i);return e??r}function B4(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return TI(r,r,r,t,i);let o=qG(e);if(o.toRoot())return TI(r,r,new Xt([],{}),t,i);let s=GG(o,r,n),l=s.processChildren?Bg(s.segmentGroup,s.index,o.commands):z4(s.segmentGroup,s.index,o.commands);return TI(r,s.segmentGroup,l,t,i)}function gy(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function zg(n){return typeof n=="object"&&n!=null&&n.outlets}function TI(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let s;n===e?s=t:s=U4(n,e,t);let l=N4(L4(s));return new ua(l,o,r)}function U4(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=U4(o,e,t)}),new Xt(n.segments,i)}var my=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&gy(i[0]))throw new fe(4003,!1);let r=i.find(zg);if(r&&r!==S4(i))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qG(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new my(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([u,f])=>{l[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?t=!0:l===".."?e++:l!=""&&r.push(l))}),r):[...r,o]},[]);return new my(t,e,i)}var tf=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function GG(n,e,t){if(n.isAbsolute)return new tf(e,!0,0);if(!t)return new tf(e,!1,NaN);if(t.parent===null)return new tf(t,!0,0);let i=gy(n.commands[0])?0:1,r=t.segments.length-1+i;return WG(t,r,n.numberOfDoubleDots)}function WG(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new fe(4005,!1);r=i.segments.length}return new tf(i,!1,r-o)}function KG(n){return zg(n[0])?n[0].outlets:{[it]:n}}function z4(n,e,t){if(n??=new Xt([],{}),n.segments.length===0&&n.hasChildren())return Bg(n,e,t);let i=QG(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Xt(n.segments.slice(0,i.pathIndex),{});return o.children[it]=new Xt(n.segments.slice(i.pathIndex),n.children),Bg(o,0,r)}else return i.match&&r.length===0?new Xt(n.segments,{}):i.match&&!n.hasChildren()?RI(n,e,t):i.match?Bg(n,0,r):RI(n,e,t)}function Bg(n,e,t){if(t.length===0)return new Xt(n.segments,{});{let i=KG(t),r={};if(Object.keys(i).some(o=>o!==it)&&n.children[it]&&n.numberOfChildren===1&&n.children[it].segments.length===0){let o=Bg(n.children[it],e,t);return new Xt(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=z4(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Xt(n.segments,r)}}function QG(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],l=t[i];if(zg(l))break;let u=`${l}`,f=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!x4(u,f,s))return o;i+=2}else{if(!x4(u,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function RI(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(zg(o)){let u=YG(o.outlets);return new Xt(i,u)}if(r===0&&gy(t[0])){let u=n.segments[e];i.push(new El(u.path,w4(t[0]))),r++;continue}let s=zg(o)?o.outlets[it]:`${o}`,l=r<t.length-1?t[r+1]:null;s&&l&&gy(l)?(i.push(new El(s,w4(l))),r+=2):(i.push(new El(s,{})),r++)}return new Xt(i,{})}function YG(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=RI(new Xt([],{}),0,i))}),e}function w4(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function x4(n,e,t){return n==t.path&&ca(e,t.parameters)}var nf="imperative",bi=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(bi||{}),ho=class{id;url;constructor(e,t){this.id=e,this.url=t}},Tl=class extends ho{type=bi.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fo=class extends ho{urlAfterRedirects;type=bi.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Sr=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Sr||{}),of=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(of||{}),la=class extends ho{reason;code;type=bi.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},da=class extends ho{reason;code;type=bi.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},sf=class extends ho{error;target;type=bi.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jg=class extends ho{urlAfterRedirects;state;type=bi.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_y=class extends ho{urlAfterRedirects;state;type=bi.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vy=class extends ho{urlAfterRedirects;state;shouldActivate;type=bi.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yy=class extends ho{urlAfterRedirects;state;type=bi.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},by=class extends ho{urlAfterRedirects;state;type=bi.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wy=class{route;type=bi.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xy=class{route;type=bi.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Cy=class{snapshot;type=bi.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ey=class{snapshot;type=bi.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iy=class{snapshot;type=bi.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Py=class{snapshot;type=bi.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},af=class{routerEvent;position;anchor;type=bi.Scroll;constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},$g=class{},cf=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function ZG(n){return!(n instanceof $g)&&!(n instanceof cf)}function JG(n,e){return n.providers&&!n._injector&&(n._injector=Qh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function vs(n){return n.outlet||it}function XG(n,e){let t=n.filter(i=>vs(i)===e);return t.push(...n.filter(i=>vs(i)!==e)),t}function df(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ty=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return df(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new pd(this.rootInjector)}},pd=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Ty(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(Ge($n))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=NI(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=NI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=LI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return LI(e,this._root).map(t=>t.value)}};function NI(n,e){if(n===e.value)return e;for(let t of e.children){let i=NI(n,t);if(i)return i}return null}function LI(n,e){if(n===e.value)return[e];for(let t of e.children){let i=LI(n,t);if(i.length)return i.unshift(e),i}return[]}var uo=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ef(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Hg=class extends Sy{snapshot;constructor(e,t){super(e),this.snapshot=t,HI(this,e)}toString(){return this.snapshot.toString()}};function j4(n){let e=eW(n),t=new Ut([new El("",{})]),i=new Ut({}),r=new Ut({}),o=new Ut({}),s=new Ut(""),l=new sr(t,i,o,s,r,it,n,e.root);return l.snapshot=e.root,new Hg(new uo(l,[]),e)}function eW(n){let e={},t={},i={},o=new dd([],e,i,"",t,it,n,null,{});return new qg("",new uo(o,[]))}var sr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,l,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(pe(f=>f[Qg]))??Le(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>hd(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>hd(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function My(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:te(te({},e.params),n.params),data:te(te({},e.data),n.data),resolve:te(te(te(te({},n.data),e.data),r?.data),n._resolvedData)}:i={params:te({},n.params),data:te({},n.data),resolve:te(te({},n.data),n._resolvedData??{})},r&&H4(r)&&(i.resolve[Qg]=r.title),i}var dd=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Qg]}constructor(e,t,i,r,o,s,l,u,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=l,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=hd(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=hd(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},qg=class extends Sy{url;constructor(e,t){super(t),this.url=e,HI(this,t)}toString(){return $4(this._root)}};function HI(n,e){e.value._routerState=n,e.children.forEach(t=>HI(n,t))}function $4(n){let e=n.children.length>0?` { ${n.children.map($4).join(", ")} } `:"";return`${n.value}${e}`}function SI(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ca(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ca(e.params,t.params)||n.paramsSubject.next(t.params),TG(e.url,t.url)||n.urlSubject.next(t.url),ca(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function FI(n,e){let t=ca(n.params,e.params)&&AG(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||FI(n.parent,e.parent))}function H4(n){return typeof n.title=="string"||n.title===null}var q4=new we(""),Yg=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=it;activateEvents=new Mn;deactivateEvents=new Mn;attachEvents=new Mn;detachEvents=new Mn;routerOutletData=LL();parentContexts=$(pd);location=$(cc);changeDetector=$(sa);inputBinder=$(Zg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new VI(t,l,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=_n({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[na]})}return n})(),VI=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===sr?this.route:e===pd?this.childContexts:e===q4?this.outletData:this.parent.get(e,t)}},Zg=new we(""),qI=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=xr([i.queryParams,i.params,i.data]).pipe(Hi(([o,s,l],u)=>(l=te(te(te({},o),s),l),u===0?Le(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let s=VL(i.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of s.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})(),GI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Et({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&oe(0,"router-outlet")},dependencies:[Yg],encapsulation:2})}return n})();function WI(n){let e=n.children&&n.children.map(WI),t=e?Ee(te({},n),{children:e}):te({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==it&&(t.component=GI),t}function tW(n,e,t){let i=Gg(n,e._root,t?t._root:void 0);return new Hg(i,e)}function Gg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=nW(n,e,t);return new uo(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(l=>Gg(n,l)),s}}let i=iW(e.value),r=e.children.map(o=>Gg(n,o));return new uo(i,r)}}function nW(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Gg(n,i,r);return Gg(n,i)})}function iW(n){return new sr(new Ut(n.url),new Ut(n.params),new Ut(n.queryParams),new Ut(n.fragment),new Ut(n.data),n.outlet,n.component,n)}var lf=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},G4="ngNavigationCancelingError";function Oy(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Pl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=W4(!1,Sr.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function W4(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[G4]=!0,t.cancellationCode=e,t}function rW(n){return K4(n)&&Pl(n.url)}function K4(n){return!!n&&n[G4]}var oW=(n,e,t,i)=>pe(r=>(new BI(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),BI=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),SI(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=ef(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=ef(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=ef(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=ef(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Py(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ey(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(SI(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),SI(l.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},Ay=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},rf=class{component;route;constructor(e,t){this.component=e,this.route=t}};function sW(n,e,t){let i=n._root,r=e?e._root:null;return Vg(i,r,t,[i.value])}function aW(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function hf(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!I1(n)?n:e.get(n):i}function Vg(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=ef(e);return n.children.forEach(s=>{cW(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,l])=>Ug(l,t.getContext(s),r)),r}function cW(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=lW(s,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new Ay(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Vg(n,e,l?l.children:null,i,r):Vg(n,e,t,i,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new rf(l.outlet.component,s))}else s&&Ug(e,l,r),r.canActivateChecks.push(new Ay(i)),o.component?Vg(n,null,l?l.children:null,i,r):Vg(n,null,t,i,r);return r}function lW(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ud(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ud(n.url,e.url)||!ca(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!FI(n,e)||!ca(n.queryParams,e.queryParams);case"paramsChange":default:return!FI(n,e)}}function Ug(n,e,t){let i=ef(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Ug(s,e.children.getContext(o),t):Ug(s,null,t):Ug(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new rf(e.outlet.component,r)):t.canDeactivateChecks.push(new rf(null,r)):t.canDeactivateChecks.push(new rf(null,r))}function Jg(n){return typeof n=="function"}function uW(n){return typeof n=="boolean"}function dW(n){return n&&Jg(n.canLoad)}function hW(n){return n&&Jg(n.canActivate)}function fW(n){return n&&Jg(n.canActivateChild)}function pW(n){return n&&Jg(n.canDeactivate)}function gW(n){return n&&Jg(n.canMatch)}function Q4(n){return n instanceof rs||n?.name==="EmptyError"}var dy=Symbol("INITIAL_VALUE");function uf(){return Hi(n=>xr(n.map(e=>e.pipe(Mi(1),qr(dy)))).pipe(pe(e=>{for(let t of e)if(t!==!0){if(t===dy)return dy;if(t===!1||mW(t))return t}return!0}),Cr(e=>e!==dy),Mi(1)))}function mW(n){return Pl(n)||n instanceof lf}function _W(n,e){return jn(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Le(Ee(te({},t),{guardsResult:!0})):vW(s,i,r,n).pipe(jn(l=>l&&uW(l)?yW(i,o,n,e):Le(l)),pe(l=>Ee(te({},t),{guardsResult:l})))})}function vW(n,e,t,i){return ln(n).pipe(jn(r=>EW(r.component,r.route,t,e,i)),Za(r=>r!==!0,!0))}function yW(n,e,t,i){return ln(e).pipe(al(r=>Mh(wW(r.route.parent,i),bW(r.route,i),CW(n,r.path,t),xW(n,r.route,t))),Za(r=>r!==!0,!0))}function bW(n,e){return n!==null&&e&&e(new Iy(n)),Le(!0)}function wW(n,e){return n!==null&&e&&e(new Cy(n)),Le(!0)}function xW(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Le(!0);let r=i.map(o=>jp(()=>{let s=df(e)??t,l=hf(o,s),u=hW(l)?l.canActivate(e,n):ei(s,()=>l(e,n));return _c(u).pipe(Za())}));return Le(r).pipe(uf())}function CW(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>aW(s)).filter(s=>s!==null).map(s=>jp(()=>{let l=s.guards.map(u=>{let f=df(s.node)??t,m=hf(u,f),y=fW(m)?m.canActivateChild(i,n):ei(f,()=>m(i,n));return _c(y).pipe(Za())});return Le(l).pipe(uf())}));return Le(o).pipe(uf())}function EW(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Le(!0);let s=o.map(l=>{let u=df(e)??r,f=hf(l,u),m=pW(f)?f.canDeactivate(n,e,t,i):ei(u,()=>f(n,e,t,i));return _c(m).pipe(Za())});return Le(s).pipe(uf())}function IW(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Le(!0);let o=r.map(s=>{let l=hf(s,n),u=dW(l)?l.canLoad(e,t):ei(n,()=>l(e,t));return _c(u)});return Le(o).pipe(uf(),Y4(i))}function Y4(n){return t0(Xn(e=>{if(typeof e!="boolean")throw Oy(n,e)}),pe(e=>e===!0))}function PW(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Le(!0);let o=r.map(s=>{let l=hf(s,n),u=gW(l)?l.canMatch(e,t):ei(n,()=>l(e,t));return _c(u)});return Le(o).pipe(uf(),Y4(i))}var Wg=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Kg=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Xh(n){return Sh(new Wg(n))}function TW(n){return Sh(new fe(4e3,!1))}function SW(n){return Sh(W4(!1,Sr.GuardRejected))}var UI=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Le(i);if(r.numberOfChildren>1||!r.children[it])return TW(`${e.redirectTo}`);r=r.children[it]}}applyRedirectCommands(e,t,i,r,o){return MW(t,r,o).pipe(pe(s=>{if(s instanceof ua)throw new Kg(s);let l=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,i);if(s[0]==="/")throw new Kg(l);return l}))}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new ua(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);i[r]=t[l]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([l,u])=>{s[l]=this.createSegmentGroup(e,u,i,r)}),new Xt(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new fe(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function MW(n,e,t){if(typeof n=="string")return Le(n);let i=n,{queryParams:r,fragment:o,routeConfig:s,url:l,outlet:u,params:f,data:m,title:y}=e;return _c(ei(t,()=>i({params:f,data:m,queryParams:r,fragment:o,routeConfig:s,url:l,outlet:u,title:y})))}var zI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OW(n,e,t,i,r){let o=Z4(n,e,t);return o.matched?(i=JG(e,i),PW(i,e,t,r).pipe(pe(s=>s===!0?o:te({},zI)))):Le(o)}function Z4(n,e,t){if(e.path==="**")return AW(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?te({},zI):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||P4)(t,n,e);if(!r)return te({},zI);let o={};Object.entries(r.posParams??{}).forEach(([l,u])=>{o[l]=u.path});let s=r.consumed.length>0?te(te({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function AW(n){return{matched:!0,parameters:n.length>0?S4(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function C4(n,e,t,i){return t.length>0&&RW(n,t,i)?{segmentGroup:new Xt(e,kW(i,new Xt(t,n.children))),slicedSegments:[]}:t.length===0&&NW(n,t,i)?{segmentGroup:new Xt(n.segments,DW(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Xt(n.segments,n.children),slicedSegments:t}}function DW(n,e,t,i){let r={};for(let o of t)if(ky(n,e,o)&&!i[vs(o)]){let s=new Xt([],{});r[vs(o)]=s}return te(te({},i),r)}function kW(n,e){let t={};t[it]=e;for(let i of n)if(i.path===""&&vs(i)!==it){let r=new Xt([],{});t[vs(i)]=r}return t}function RW(n,e,t){return t.some(i=>ky(n,e,i)&&vs(i)!==it)}function NW(n,e,t){return t.some(i=>ky(n,e,i))}function ky(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function LW(n,e,t){return e.length===0&&!n.children[t]}var jI=class{};function FW(n,e,t,i,r,o,s="emptyOnly"){return new $I(n,e,t,i,r,s,o).recognize()}var VW=31,$I=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,l){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.applyRedirects=new UI(this.urlSerializer,this.urlTree)}noMatchError(e){return new fe(4002,`'${e.segmentGroup}'`)}recognize(){let e=C4(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pe(({children:t,rootSnapshot:i})=>{let r=new uo(i,t),o=new qg("",r),s=F4(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new dd([],Object.freeze({}),Object.freeze(te({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),it,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,it,t).pipe(pe(i=>({children:i,rootSnapshot:t})),Ya(i=>{if(i instanceof Kg)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Wg?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(pe(s=>s instanceof uo?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return ln(o).pipe(al(s=>{let l=i.children[s],u=XG(t,s);return this.processSegmentGroup(e,u,l,s,r)}),x0((s,l)=>(s.push(...l),s)),cl(null),u1(),jn(s=>{if(s===null)return Xh(i);let l=J4(s);return BW(l),Le(l)}))}processSegment(e,t,i,r,o,s,l){return ln(t).pipe(al(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,o,s,l).pipe(Ya(f=>{if(f instanceof Wg)return Le(null);throw f}))),Za(u=>!!u),Ya(u=>{if(Q4(u))return LW(i,r,o)?Le(new jI):Xh(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,o,s,l,u){return vs(i)!==s&&(s===it||!ky(r,o,i))?Xh(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,u):Xh(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,l){let{matched:u,parameters:f,consumedSegments:m,positionalParamSegments:y,remainingSegments:C}=Z4(t,r,o);if(!u)return Xh(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>VW&&(this.allowRedirects=!1));let T=new dd(o,f,Object.freeze(te({},this.urlTree.queryParams)),this.urlTree.fragment,E4(r),vs(r),r.component??r._loadedComponent??null,r,I4(r)),U=My(T,l,this.paramsInheritanceStrategy);return T.params=Object.freeze(U.params),T.data=Object.freeze(U.data),this.applyRedirects.applyRedirectCommands(m,r.redirectTo,y,T,e).pipe(Hi(j=>this.applyRedirects.lineralizeSegments(r,j)),jn(j=>this.processSegment(e,i,t,j.concat(C),s,!1,l)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let l=OW(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),l.pipe(Hi(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Hi(({routes:f})=>{let m=i._loadedInjector??e,{parameters:y,consumedSegments:C,remainingSegments:T}=u,U=new dd(C,y,Object.freeze(te({},this.urlTree.queryParams)),this.urlTree.fragment,E4(i),vs(i),i.component??i._loadedComponent??null,i,I4(i)),H=My(U,s,this.paramsInheritanceStrategy);U.params=Object.freeze(H.params),U.data=Object.freeze(H.data);let{segmentGroup:j,slicedSegments:X}=C4(t,C,T,f);if(X.length===0&&j.hasChildren())return this.processChildren(m,f,j,U).pipe(pe(le=>new uo(U,le)));if(f.length===0&&X.length===0)return Le(new uo(U,[]));let ae=vs(i)===o;return this.processSegment(m,f,j,X,ae?it:o,!0,U).pipe(pe(le=>new uo(U,le instanceof uo?[le]:[])))}))):Xh(t)))}getChildConfig(e,t,i){return t.children?Le({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Le({routes:t._loadedRoutes,injector:t._loadedInjector}):IW(e,t,i,this.urlSerializer).pipe(jn(r=>r?this.configLoader.loadChildren(e,t).pipe(Xn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):SW(t))):Le({routes:[],injector:e})}};function BW(n){n.sort((e,t)=>e.value.outlet===it?-1:t.value.outlet===it?1:e.value.outlet.localeCompare(t.value.outlet))}function UW(n){let e=n.value.routeConfig;return e&&e.path===""}function J4(n){let e=[],t=new Set;for(let i of n){if(!UW(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=J4(i.children);e.push(new uo(i.value,r))}return e.filter(i=>!t.has(i))}function E4(n){return n.data||{}}function I4(n){return n.resolve||{}}function zW(n,e,t,i,r,o){return jn(s=>FW(n,e,t,i,s.extractedUrl,r,o).pipe(pe(({state:l,tree:u})=>Ee(te({},s),{targetSnapshot:l,urlAfterRedirects:u}))))}function jW(n,e){return jn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Le(t);let o=new Set(r.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let f of X4(u))s.add(f);let l=0;return ln(s).pipe(al(u=>o.has(u)?$W(u,i,n,e):(u.data=My(u,u.parent,n).resolve,Le(void 0))),Xn(()=>l++),Oh(1),jn(u=>l===s.size?Le(t):$r))})}function X4(n){let e=n.children.map(t=>X4(t)).flat();return[n,...e]}function $W(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!H4(r)&&(o[Qg]=r.title),jp(()=>(n.data=My(n,n.parent,t).resolve,HW(o,n,e,i).pipe(pe(s=>(n._resolvedData=s,n.data=te(te({},n.data),s),null)))))}function HW(n,e,t,i){let r=AI(n);if(r.length===0)return Le({});let o={};return ln(r).pipe(jn(s=>qW(n[s],e,t,i).pipe(Za(),Xn(l=>{if(l instanceof lf)throw Oy(new Il,l);o[s]=l}))),Oh(1),pe(()=>o),Ya(s=>Q4(s)?$r:Sh(s)))}function qW(n,e,t,i){let r=df(e)??i,o=hf(n,r),s=o.resolve?o.resolve(e,t):ei(r,()=>o(e,t));return _c(s)}function MI(n){return Hi(e=>{let t=n(e);return t?ln(t).pipe(pe(()=>e)):Le(e)})}var KI=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===it);return i}getResolvedTitleForRoute(t){return t.data[Qg]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:()=>$(eF),providedIn:"root"})}return n})(),eF=(()=>{class n extends KI{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Ge(v4))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sl=new we("",{providedIn:"root",factory:()=>({})}),gd=new we(""),Ry=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=$(KE);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Le(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=_c(ei(t,()=>i.loadComponent())).pipe(pe(nF),Hi(iF),Xn(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),Hp(()=>{this.componentLoaders.delete(i)})),o=new Eh(r,()=>new Cn).pipe(Ch());return this.componentLoaders.set(i,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Le({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=tF(i,this.compiler,t,this.onLoadEndListener).pipe(Hp(()=>{this.childrenLoaders.delete(i)})),s=new Eh(o,()=>new Cn).pipe(Ch());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tF(n,e,t,i){return _c(ei(t,()=>n.loadChildren())).pipe(pe(nF),Hi(iF),jn(r=>r instanceof Uv||Array.isArray(r)?Le(r):ln(e.compileModuleAsync(r))),pe(r=>{i&&i(n);let o,s,l=!1;return Array.isArray(r)?(s=r,l=!0):(o=r.create(t).injector,s=o.get(gd,[],{optional:!0,self:!0}).flat()),{routes:s.map(WI),injector:o}}))}function GW(n){return n&&typeof n=="object"&&"default"in n}function nF(n){return GW(n)?n.default:n}function iF(n){return Le(n)}var Ny=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:()=>$(WW),providedIn:"root"})}return n})(),WW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QI=new we(""),YI=new we("");function rF(n,e,t){let i=n.get(YI),r=n.get(ni);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,s=new Promise(f=>{o=f}),l=r.startViewTransition(()=>(o(),KW(n)));l.ready.catch(f=>{});let{onViewTransitionCreated:u}=i;return u&&ei(n,()=>u({transition:l,from:e,to:t})),s}function KW(n){return new Promise(e=>{vg({read:()=>setTimeout(e)},{injector:n})})}var ZI=new we(""),Ly=(()=>{class n{currentNavigation=pn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Cn;transitionAbortWithErrorSubject=new Cn;configLoader=$(Ry);environmentInjector=$($n);destroyRef=$(ds);urlSerializer=$(fd);rootContexts=$(pd);location=$(Cl);inputBindingEnabled=$(Zg,{optional:!0})!==null;titleStrategy=$(KI);options=$(Sl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=$(Ny);createViewTransition=$(QI,{optional:!0});navigationErrorHandler=$(ZI,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Le(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new wy(r)),i=r=>this.events.next(new xy(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;oi(()=>{this.transitions?.next(Ee(te({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(t){return this.transitions=new Ut(null),this.transitions.pipe(Cr(i=>i!==null),Hi(i=>{let r=!1;return Le(i).pipe(Hi(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Sr.SupersededByNewNavigation),$r;this.currentTransition=i,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(te({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&l!=="reload")return this.events.next(new da(o.id,this.urlSerializer.serialize(o.rawUrl),"",of.IgnoredSameUrlNavigation)),o.resolve(!1),$r;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Le(o).pipe(Hi(u=>(this.events.next(new Tl(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?$r:Promise.resolve(u))),zW(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Xn(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=u.urlAfterRedirects,m));let f=new jg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:f,source:m,restoredState:y,extras:C}=o,T=new Tl(u,this.urlSerializer.serialize(f),m,y);this.events.next(T);let U=j4(this.rootComponentType).snapshot;return this.currentTransition=i=Ee(te({},o),{targetSnapshot:U,urlAfterRedirects:f,extras:Ee(te({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(H=>(H.finalUrl=f,H)),Le(i)}else return this.events.next(new da(o.id,this.urlSerializer.serialize(o.extractedUrl),"",of.IgnoredByUrlHandlingStrategy)),o.resolve(!1),$r}),Xn(o=>{let s=new _y(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),pe(o=>(this.currentTransition=i=Ee(te({},o),{guards:sW(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),_W(this.environmentInjector,o=>this.events.next(o)),Xn(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Oy(this.urlSerializer,o.guardsResult);let s=new vy(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Cr(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Sr.GuardRejected),!1)),MI(o=>{if(o.guards.canActivateChecks.length!==0)return Le(o).pipe(Xn(s=>{let l=new yy(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}),Hi(s=>{let l=!1;return Le(s).pipe(jW(this.paramsInheritanceStrategy,this.environmentInjector),Xn({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(s,"",Sr.NoDataFromResolver)}}))}),Xn(s=>{let l=new by(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}))}),MI(o=>{let s=l=>{let u=[];if(l.routeConfig?.loadComponent){let f=df(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(f,l.routeConfig).pipe(Xn(m=>{l.component=m}),pe(()=>{})))}for(let f of l.children)u.push(...s(f));return u};return xr(s(o.targetSnapshot.root)).pipe(cl(null),Mi(1))}),MI(()=>this.afterPreactivation()),Hi(()=>{let{currentSnapshot:o,targetSnapshot:s}=i,l=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return l?ln(l).pipe(pe(()=>i)):Le(i)}),pe(o=>{let s=tW(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=Ee(te({},o),{targetRouterState:s}),this.currentNavigation.update(l=>(l.targetRouterState=s,l)),i}),Xn(()=>{this.events.next(new $g)}),oW(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Mi(1),Ah(new ze(o=>{let s=i.abortController.signal,l=()=>o.next();return s.addEventListener("abort",l),()=>s.removeEventListener("abort",l)}).pipe(Cr(()=>!r&&!i.targetRouterState),Xn(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Sr.Aborted)}))),Xn({next:o=>{r=!0,this.lastSuccessfulNavigation=oi(this.currentNavigation),this.events.next(new fo(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Ah(this.transitionAbortWithErrorSubject.pipe(Xn(o=>{throw o}))),Hp(()=>{r||this.cancelNavigationTransition(i,"",Sr.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ya(o=>{if(this.destroyed)return i.resolve(!1),$r;if(r=!0,K4(o))this.events.next(new la(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),rW(o)?this.events.next(new cf(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let s=new sf(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let l=ei(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(l instanceof lf){let{message:u,cancellationCode:f}=Oy(this.urlSerializer,l);this.events.next(new la(i.id,this.urlSerializer.serialize(i.extractedUrl),u,f)),this.events.next(new cf(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return $r}))}))}cancelNavigationTransition(t,i,r){let o=new la(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=oi(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QW(n){return n!==nf}var oF=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:()=>$(YW),providedIn:"root"})}return n})(),Dy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},YW=(()=>{class n extends Dy{static \u0275fac=(()=>{let t;return function(r){return(t||(t=ia(n)))(r||n)}})();static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sF=(()=>{class n{urlSerializer=$(fd);options=$(Sl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=$(Cl);urlHandlingStrategy=$(Ny);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ua;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof ua?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=j4(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:()=>$(ZW),providedIn:"root"})}return n})(),ZW=(()=>{class n extends sF{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Tl?this.updateStateMemento():t instanceof da?this.commitTransition(i):t instanceof jg?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof $g?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof la&&t.code!==Sr.SupersededByNewNavigation&&t.code!==Sr.Redirect?this.restoreHistory(i):t instanceof sf?this.restoreHistory(i,!0):t instanceof fo&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let l=this.browserPageId,u=te(te({},s),this.generateNgRouterState(r,l));this.location.replaceState(t,"",u)}else{let l=te(te({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",l)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ia(n)))(r||n)}})();static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fy(n,e){n.events.pipe(Cr(t=>t instanceof fo||t instanceof la||t instanceof sf||t instanceof da),pe(t=>t instanceof fo||t instanceof da?0:(t instanceof la?t.code===Sr.Redirect||t.code===Sr.SupersededByNewNavigation:!1)?2:1),Cr(t=>t!==2),Mi(1)).subscribe(()=>{e()})}var JW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=$(BE);stateManager=$(sF);options=$(Sl,{optional:!0})||{};pendingTasks=$(Xs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=$(Ly);urlSerializer=$(fd);location=$(Cl);urlHandlingStrategy=$(Ny);injector=$($n);_events=new Cn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=$(oF);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=$(gd,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!$(Zg,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new kn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=oi(this.navigationTransitions.currentNavigation);if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof la&&i.code!==Sr.Redirect&&i.code!==Sr.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof fo)this.navigated=!0;else if(i instanceof cf){let s=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=te({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||QW(r.source)},s);this.scheduleNavigation(l,nf,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}ZG(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),nf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let u=te({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(t);this.scheduleNavigation(l,i,s,o).catch(u=>{this.disposed||this.injector.get(Tr)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return oi(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(WI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:l,preserveFragment:u}=i,f=u?this.currentUrlTree.fragment:s,m=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":m=te(te({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let y;try{let C=r?r.snapshot:this.routerState.snapshot.root;y=V4(C)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),y=this.currentUrlTree.root}return B4(y,t,m,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Pl(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,nf,null,i)}navigate(t,i={skipLocationChange:!1}){return eK(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(hl(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=te({},JW):i===!1?r=te({},XW):r=i,Pl(t))return y4(this.currentUrlTree,t,r);let o=this.parseUrl(t);return y4(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let l,u,f;s?(l=s.resolve,u=s.reject,f=s.promise):f=new Promise((y,C)=>{l=y,u=C});let m=this.pendingTasks.add();return Fy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eK(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new fe(4008,!1)}var ar=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=pn(null);get href(){return oi(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Cn;applicationErrorHandler=$(Tr);options=$(Sl,{optional:!0});constructor(t,i,r,o,s,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=l,this.reactiveHref.set($(new qv("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,i=r=>r==="merge"||r==="preserve";t||=i(this.queryParamsHandling),t||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(r=>{r instanceof fo&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Pl(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,u)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Pl(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(Ue(Rt),Ue(sr),gg("tabindex"),Ue(Ao),Ue(ir),Ue(gs))};static \u0275dir=_n({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&ee("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&rn("href",r.reactiveHref(),pE)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xl],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xl],replaceUrl:[2,"replaceUrl","replaceUrl",xl],routerLink:"routerLink"},features:[na]})}return n})(),XI=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Mn;constructor(t,i,r,o,s){this.router=t,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof fo&&this.update()})}ngAfterContentInit(){Le(this.links.changes,Le(null)).pipe(sl()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=ln(t).pipe(sl()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){let i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let i=tK(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?t.isActive(o,i):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(i){return new(i||n)(Ue(Rt),Ue(ir),Ue(Ao),Ue(sa),Ue(ar,8))};static \u0275dir=_n({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&qE(o,ar,5),i&2){let s;dc(s=hc())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[na]})}return n})();function tK(n){return!!n.paths}var Xg=class{};var aF=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,i,r,o){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Cr(t=>t instanceof fo),al(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Qh(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,l=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(l,o.children??o._loadedRoutes))}return ln(r).pipe(sl())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=Le(null);let o=r.pipe(jn(s=>s===null?Le(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(t,i);return ln([o,s]).pipe(sl())}else return o})}static \u0275fac=function(i){return new(i||n)(Ge(Rt),Ge($n),Ge(Xg),Ge(Ry))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cF=new we(""),nK=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=nf;restoredId=0;store={};constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Tl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fo?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof da&&t.code===of.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof af))return;let i={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,i):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>O(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new af(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){kE()};static \u0275prov=ge({token:n,factory:n.\u0275fac})}return n})();function eP(n,...e){return Pr([{provide:gd,multi:!0,useValue:n},[],{provide:sr,useFactory:lF,deps:[Rt]},{provide:xg,multi:!0,useFactory:uF},e.map(t=>t.\u0275providers)])}function lF(n){return n.routerState.root}function em(n,e){return{\u0275kind:n,\u0275providers:e}}function uF(){let n=$(mn);return e=>{let t=n.get(uc);if(e!==t.components[0])return;let i=n.get(Rt),r=n.get(dF);n.get(tP)===1&&i.initialNavigation(),n.get(pF,null,{optional:!0})?.setUpPreloading(),n.get(cF,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var dF=new we("",{factory:()=>new Cn}),tP=new we("",{providedIn:"root",factory:()=>1});function hF(){let n=[{provide:uE,useValue:!0},{provide:tP,useValue:0},jv(()=>{let e=$(mn);return e.get(iI,Promise.resolve()).then(()=>new Promise(i=>{let r=e.get(Rt),o=e.get(dF);Fy(r,()=>{i(!0)}),e.get(Ly).afterPreactivation=()=>(i(!0),o.closed?Le(void 0):o),r.initialNavigation()}))})];return em(2,n)}function fF(){let n=[jv(()=>{$(Rt).setUpLocationChangeListener()}),{provide:tP,useValue:2}];return em(3,n)}var pF=new we("");function gF(n){return em(0,[{provide:pF,useExisting:aF},{provide:Xg,useExisting:n}])}function mF(){return em(8,[qI,{provide:Zg,useExisting:qI}])}function _F(n){ra("NgRouterViewTransitions");let e=[{provide:QI,useValue:rF},{provide:YI,useValue:te({skipNextTransition:!!n?.skipInitialTransition},n)}];return em(9,e)}var vF=[Cl,{provide:fd,useClass:Il},Rt,pd,{provide:sr,useFactory:lF,deps:[Rt]},Ry,[]],po=(()=>{class n{constructor(){}static forRoot(t,i){return{ngModule:n,providers:[vF,[],{provide:gd,multi:!0,useValue:t},[],i?.errorHandler?{provide:ZI,useValue:i.errorHandler}:[],{provide:Sl,useValue:i||{}},i?.useHash?rK():oK(),iK(),i?.preloadingStrategy?gF(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?sK(i):[],i?.bindToComponentInputs?mF().\u0275providers:[],i?.enableViewTransitions?_F().\u0275providers:[],aK()]}}static forChild(t){return{ngModule:n,providers:[{provide:gd,multi:!0,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=oa({type:n});static \u0275inj=as({})}return n})();function iK(){return{provide:cF,useFactory:()=>{let n=$(u4),e=$(kt),t=$(Sl),i=$(Ly),r=$(fd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new nK(r,i,n,e,t)}}}function rK(){return{provide:gs,useClass:hI}}function oK(){return{provide:gs,useClass:Qv}}function sK(n){return[n.initialNavigation==="disabled"?fF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?hF().\u0275providers:[]]}var JI=new we("");function aK(){return[{provide:JI,useFactory:uF},{provide:xg,multi:!0,useExisting:JI}]}var yF=()=>{};var xF=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},cK=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[t++],s=n[t++],l=n[t++],u=((r&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Vy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],s=r+1<n.length,l=s?n[r+1]:0,u=r+2<n.length,f=u?n[r+2]:0,m=o>>2,y=(o&3)<<4|l>>4,C=(l&15)<<2|f>>6,T=f&63;u||(T=64,s||(C=64)),i.push(t[m],t[y],t[C],t[T])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;let f=r<n.length?t[n.charAt(r)]:64;++r;let y=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||l==null||f==null||y==null)throw new iP;let C=o<<2|l>>4;if(i.push(C),f!==64){let T=l<<4&240|f>>2;if(i.push(T),y!==64){let U=f<<6&192|y;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},iP=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lK=function(n){let e=xF(n);return Vy.encodeByteArray(e,!0)},nm=function(n){return lK(n).replace(/\./g,"")},By=function(n){try{return Vy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var uK=()=>oP().__FIREBASE_DEFAULTS__,dK=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},hK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&By(n[1]);return e&&JSON.parse(e)},Uy=()=>{try{return yF()||uK()||dK()||hK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sP=n=>{var e,t;return(t=(e=Uy())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},pf=n=>{let e=sP(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},aP=()=>{var n;return(n=Uy())===null||n===void 0?void 0:n.config},cP=n=>{var e;return(e=Uy())===null||e===void 0?void 0:e[`_${n}`]};var md=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function go(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ml(n){return O(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function zy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[nm(JSON.stringify(t)),nm(JSON.stringify(s)),""].join(".")}var tm={};function fK(){let n={prod:[],emulator:[]};for(let e of Object.keys(tm))tm[e]?n.emulator.push(e):n.prod.push(e);return n}function pK(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var bF=!1;function Ol(n,e){if(typeof window>"u"||typeof document>"u"||!go(window.location.host)||tm[n]===e||tm[n]||bF)return;tm[n]=e;function t(C){return`__firebase__banner__${C}`}let i="__firebase__banner",o=fK().prod.length>0;function s(){let C=document.getElementById(i);C&&C.remove()}function l(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function u(C,T){C.setAttribute("width","24"),C.setAttribute("id",T),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function f(){let C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{bF=!0,s()},C}function m(C,T){C.setAttribute("id",T),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function y(){let C=pK(i),T=t("text"),U=document.getElementById(T)||document.createElement("span"),H=t("learnmore"),j=document.getElementById(H)||document.createElement("a"),X=t("preprendIcon"),ae=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){let le=C.element;l(le),m(j,H);let he=f();u(ae,X),le.append(ae,U,j,he),document.body.appendChild(le)}o?(U.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function Oi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oi())}function gK(){var n;let e=(n=Uy())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IF(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function PF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TF(){let n=Oi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function SF(){return!gK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function im(){try{return typeof indexedDB=="object"}catch{return!1}}function MF(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var mK="FirebaseError",cr=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=mK,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ys.prototype.create)}},ys=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?_K(o,i):"Error",l=`${this.serviceName}: ${s} (${r}).`;return new cr(r,l,i)}};function _K(n,e){return n.replace(vK,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var vK=/\{\$([^}]+)}/g;function OF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ha(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let o=n[r],s=e[r];if(wF(o)&&wF(s)){if(!ha(o,s))return!1}else if(o!==s)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function wF(n){return n!==null&&typeof n=="object"}function gf(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function mf(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function _f(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function AF(n,e){let t=new rP(n,e);return t.subscribe.bind(t)}var rP=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");yK(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=nP),r.error===void 0&&(r.error=nP),r.complete===void 0&&(r.complete=nP);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function yK(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nP(){}var qEe=14400*1e3;function Yt(n){return n&&n._delegate?n._delegate:n}var wi=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var _d="[DEFAULT]";var lP=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new md;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wK(e))try{this.getOrInitializeService({instanceIdentifier:_d})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=_d){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return O(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=_d){return this.instances.has(e)}getOptions(e=_d){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[o,s]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);i===l&&s.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);let s=this.instances.get(r);return s&&e(s,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bK(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_d){return this.component?this.component.multipleInstances?e:_d:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function bK(n){return n===_d?void 0:n}function wK(n){return n.instantiationMode==="EAGER"}var jy=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new lP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var xK=[],It=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(It||{}),CK={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},EK=It.INFO,IK={[It.DEBUG]:"log",[It.VERBOSE]:"log",[It.INFO]:"info",[It.WARN]:"warn",[It.ERROR]:"error"},PK=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=IK[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},fa=class{constructor(e){this.name=e,this._logLevel=EK,this._logHandler=PK,this._userLogHandler=null,xK.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in It))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,It.DEBUG,...e),this._logHandler(this,It.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,It.VERBOSE,...e),this._logHandler(this,It.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,It.INFO,...e),this._logHandler(this,It.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,It.WARN,...e),this._logHandler(this,It.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,It.ERROR,...e),this._logHandler(this,It.ERROR,...e)}};var TK=(n,e)=>e.some(t=>n instanceof t),DF,kF;function SK(){return DF||(DF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MK(){return kF||(kF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var RF=new WeakMap,dP=new WeakMap,NF=new WeakMap,uP=new WeakMap,fP=new WeakMap;function OK(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(pa(n.result)),r()},s=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&RF.set(t,n)}).catch(()=>{}),fP.set(e,n),e}function AK(n){if(dP.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),r()},s=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});dP.set(n,e)}var hP={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dP.get(n);if(e==="objectStoreNames")return n.objectStoreNames||NF.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function LF(n){hP=n(hP)}function DK(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call($y(this),e,...t);return NF.set(i,e.sort?e.sort():[e]),pa(i)}:MK().includes(n)?function(...e){return n.apply($y(this),e),pa(RF.get(this))}:function(...e){return pa(n.apply($y(this),e))}}function kK(n){return typeof n=="function"?DK(n):(n instanceof IDBTransaction&&AK(n),TK(n,SK())?new Proxy(n,hP):n)}function pa(n){if(n instanceof IDBRequest)return OK(n);if(uP.has(n))return uP.get(n);let e=kK(n);return e!==n&&(uP.set(n,e),fP.set(e,n)),e}var $y=n=>fP.get(n);function Hy(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){let s=indexedDB.open(n,e),l=pa(s);return i&&s.addEventListener("upgradeneeded",u=>{i(pa(s.result),u.oldVersion,u.newVersion,pa(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var RK=["get","getKey","getAll","getAllKeys","count"],NK=["put","add","delete","clear"],pP=new Map;function FF(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pP.get(e))return pP.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=NK.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||RK.includes(t)))return;let o=function(s,...l){return O(this,null,function*(){let u=this.transaction(s,r?"readwrite":"readonly"),f=u.store;return i&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),r&&u.done]))[0]})};return pP.set(e,o),o}LF(n=>Ee(te({},n),{get:(e,t,i)=>FF(e,t)||n.get(e,t,i),has:(e,t)=>!!FF(e,t)||n.has(e,t)}));var mP=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LK(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function LK(n){let e=n.getComponent();return e?.type==="VERSION"}var _P="@firebase/app",VF="0.13.2";var vc=new fa("@firebase/app"),FK="@firebase/app-compat",VK="@firebase/analytics-compat",BK="@firebase/analytics",UK="@firebase/app-check-compat",zK="@firebase/app-check",jK="@firebase/auth",$K="@firebase/auth-compat",HK="@firebase/database",qK="@firebase/data-connect",GK="@firebase/database-compat",WK="@firebase/functions",KK="@firebase/functions-compat",QK="@firebase/installations",YK="@firebase/installations-compat",ZK="@firebase/messaging",JK="@firebase/messaging-compat",XK="@firebase/performance",eQ="@firebase/performance-compat",tQ="@firebase/remote-config",nQ="@firebase/remote-config-compat",iQ="@firebase/storage",rQ="@firebase/storage-compat",oQ="@firebase/firestore",sQ="@firebase/ai",aQ="@firebase/firestore-compat",cQ="firebase",lQ="11.10.0";var vP="[DEFAULT]",uQ={[_P]:"fire-core",[FK]:"fire-core-compat",[BK]:"fire-analytics",[VK]:"fire-analytics-compat",[zK]:"fire-app-check",[UK]:"fire-app-check-compat",[jK]:"fire-auth",[$K]:"fire-auth-compat",[HK]:"fire-rtdb",[qK]:"fire-data-connect",[GK]:"fire-rtdb-compat",[WK]:"fire-fn",[KK]:"fire-fn-compat",[QK]:"fire-iid",[YK]:"fire-iid-compat",[ZK]:"fire-fcm",[JK]:"fire-fcm-compat",[XK]:"fire-perf",[eQ]:"fire-perf-compat",[tQ]:"fire-rc",[nQ]:"fire-rc-compat",[iQ]:"fire-gcs",[rQ]:"fire-gcs-compat",[oQ]:"fire-fst",[aQ]:"fire-fst-compat",[sQ]:"fire-vertex","fire-js":"fire-js",[cQ]:"fire-js-all"};var rm=new Map,dQ=new Map,yP=new Map;function BF(n,e){try{n.container.addComponent(e)}catch(t){vc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mr(n){let e=n.name;if(yP.has(e))return vc.debug(`There were multiple attempts to register component ${e}.`),!1;yP.set(e,n);for(let t of rm.values())BF(t,n);for(let t of dQ.values())BF(t,n);return!0}function ga(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xi(n){return n==null?!1:n.settings!==void 0}var hQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Al=new ys("app","Firebase",hQ);var bP=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Al.create("app-deleted",{appName:this._name})}};var ma=lQ;function CP(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:vP,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Al.create("bad-app-name",{appName:String(r)});if(t||(t=aP()),!t)throw Al.create("no-options");let o=rm.get(r);if(o){if(ha(t,o.options)&&ha(i,o.config))return o;throw Al.create("duplicate-app",{appName:r})}let s=new jy(r);for(let u of yP.values())s.addComponent(u);let l=new bP(t,i,s);return rm.set(r,l),l}function bs(n=vP){let e=rm.get(n);if(!e&&n===vP&&aP())return CP();if(!e)throw Al.create("no-app",{appName:n});return e}function qy(){return Array.from(rm.values())}function Zt(n,e,t){var i;let r=(i=uQ[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vc.warn(l.join(" "));return}Mr(new wi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var fQ="firebase-heartbeat-database",pQ=1,om="firebase-heartbeat-store",gP=null;function $F(){return gP||(gP=Hy(fQ,pQ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(om)}catch(t){console.warn(t)}}}}).catch(n=>{throw Al.create("idb-open",{originalErrorMessage:n.message})})),gP}function gQ(n){return O(this,null,function*(){try{let t=(yield $F()).transaction(om),i=yield t.objectStore(om).get(HF(n));return yield t.done,i}catch(e){if(e instanceof cr)vc.warn(e.message);else{let t=Al.create("idb-get",{originalErrorMessage:e?.message});vc.warn(t.message)}}})}function UF(n,e){return O(this,null,function*(){try{let i=(yield $F()).transaction(om,"readwrite");yield i.objectStore(om).put(e,HF(n)),yield i.done}catch(t){if(t instanceof cr)vc.warn(t.message);else{let i=Al.create("idb-set",{originalErrorMessage:t?.message});vc.warn(i.message)}}})}function HF(n){return`${n.name}!${n.options.appId}`}var mQ=1024,_Q=30,wP=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new xP(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return O(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=zF();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>_Q){let s=yQ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){vc.warn(i)}})}getHeartbeatsHeader(){return O(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=zF(),{heartbeatsToSend:i,unsentEntries:r}=vQ(this._heartbeatsCache.heartbeats),o=nm(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return vc.warn(t),""}})}};function zF(){return new Date().toISOString().substring(0,10)}function vQ(n,e=mQ){let t=[],i=n.slice();for(let r of n){let o=t.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),jF(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),jF(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var xP=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return O(this,null,function*(){return im()?MF().then(()=>!0).catch(()=>!1):!1})}read(){return O(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield gQ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return O(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return UF(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return O(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return UF(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function jF(n){return nm(JSON.stringify({version:2,heartbeats:n})).length}function yQ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function bQ(n){Mr(new wi("platform-logger",e=>new mP(e),"PRIVATE")),Mr(new wi("heartbeat",e=>new wP(e),"PRIVATE")),Zt(_P,VF,n),Zt(_P,VF,"esm2017"),Zt("fire-js","")}bQ("");var wQ="firebase",xQ="11.10.0";Zt(wQ,xQ,"app");function qF(n){n===void 0&&(n=$(mn));let e=n.get(zh);return t=>new ze(i=>{let r=e.add(),o=!1;function s(){o||(r(),o=!0)}let l=t.subscribe({next:u=>{i.next(u),s()},complete:()=>{i.complete(),s()},error:u=>{i.error(u),s()}});return l.add(()=>{i.unsubscribe(),s()}),l})}var Ro=new ll("ANGULARFIRE2_VERSION");function yc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var _a=(n,e)=>{let t=e?[e]:qy(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},vf=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(vf||{}),GF=eI()&&typeof Zone<"u"?vf.WARN:vf.SILENT;var Gy=class{zone;delegate;constructor(e,t=a1){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,o=function(s){r?r.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,i)}},No=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=$(kt);this.outsideAngular=t.runOutsideAngular(()=>new Gy(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Gy(typeof Zone>"u"?void 0:Zone.current,zp))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WF=!1;function CQ(n,e){!WF&&(GF>vf.SILENT||eI())&&(WF=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),GF>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function EQ(n){let e=$(kt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function vd(n){let e=$(kt,{optional:!0});return e?e.run(()=>n()):n()}var IQ=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),ei(t,()=>vd(()=>n.apply(void 0,i)))),Ht=(n,e,t)=>(t||=e?vf.WARN:vf.VERBOSE,function(){let i,r=arguments,o,s,l;try{o=$(No),s=$(zh),l=$($n)}catch{return CQ(n,t),n.apply(this,r)}for(let f=0;f<arguments.length;f++)typeof r[f]=="function"&&(e&&(i||=vd(()=>s.add())),r[f]=IQ(r[f],i,l));let u=EQ(()=>n.apply(this,r));return e?u instanceof ze?u.pipe(rl(o.outsideAngular),il(o.insideAngular),qF(l)):u instanceof Promise?vd(()=>{let f=s.add();return new Promise((m,y)=>{u.then(C=>ei(l,()=>vd(()=>m(C))),C=>ei(l,()=>vd(()=>y(C)))).finally(f)})}):typeof u=="function"&&i?function(){return setTimeout(i,0),u.apply(this,arguments)}:vd(()=>u):u instanceof ze?u.pipe(rl(o.outsideAngular),il(o.insideAngular)):vd(()=>u)});var mo=class{constructor(e){return e}},ws=class{constructor(){return qy()}};function PQ(n){return n&&n.length===1?n[0]:new mo(bs())}var EP=new we("angularfire2._apps"),TQ={provide:mo,useFactory:PQ,deps:[[new On,EP]]},SQ={provide:ws,deps:[[new On,EP]]};function MQ(n){return(e,t)=>{let i=t.get(sc);Zt("angularfire",Ro.full,"core"),Zt("angularfire",Ro.full,"app"),Zt("angular",C1.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new mo(r)}}function KF(n,...e){return Pr([TQ,SQ,{provide:EP,useFactory:MQ(n),multi:!0,deps:[kt,mn,No,...e]}])}var QF=Ht(CP,!0);var OQ=new Map,AQ={activated:!1,tokenObservers:[]},DQ={initialized:!1,enabled:!1};function xs(n){return OQ.get(n)||Object.assign({},AQ)}function XF(){return DQ}var kQ="https://content-firebaseappcheck.googleapis.com/v1";var RQ="exchangeDebugToken",YF={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},KIe=1440*60*1e3;var TP=class{constructor(e,t,i,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return O(this,null,function*(){this.stop();try{this.pending=new md,this.pending.promise.catch(t=>{}),yield NQ(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new md,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function NQ(n){return new Promise(e=>{setTimeout(e,n)})}var LQ={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Dl=new ys("appCheck","AppCheck",LQ);function eV(n){if(!xs(n).activated)throw Dl.create("use-before-activation",{appName:n.name})}function tV(i,r){return O(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let T=yield s.getHeartbeatsHeader();T&&(o["X-Firebase-Client"]=T)}let l={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,l)}catch(T){throw Dl.create("fetch-network-error",{originalErrorMessage:T?.message})}if(u.status!==200)throw Dl.create("fetch-status-error",{httpStatus:u.status});let f;try{f=yield u.json()}catch(T){throw Dl.create("fetch-parse-error",{originalErrorMessage:T?.message})}let m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Dl.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let y=Number(m[1])*1e3,C=Date.now();return{token:f.token,expireTimeMillis:C+y,issuedAtTimeMillis:C}})}function nV(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${kQ}/projects/${t}/apps/${i}:${RQ}?key=${r}`,body:{debug_token:e}}}var FQ="firebase-app-check-database",VQ=1,SP="firebase-app-check-store";var Wy=null;function BQ(){return Wy||(Wy=new Promise((n,e)=>{try{let t=indexedDB.open(FQ,VQ);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Dl.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(SP,{keyPath:"compositeKey"})}}}catch(t){e(Dl.create("storage-open",{originalErrorMessage:t?.message}))}}),Wy)}function UQ(n,e){return zQ(jQ(n),e)}function zQ(n,e){return O(this,null,function*(){let i=(yield BQ()).transaction(SP,"readwrite"),o=i.objectStore(SP).put({compositeKey:n,value:e});return new Promise((s,l)=>{o.onsuccess=u=>{s()},i.onerror=u=>{var f;l(Dl.create("storage-set",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})})}function jQ(n){return`${n.options.appId}-${n.name}`}var sm=new fa("@firebase/app-check");function IP(n,e){return im()?UQ(n,e).catch(t=>{sm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function iV(){return XF().enabled}function rV(){return O(this,null,function*(){let n=XF();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var $Q={error:"UNKNOWN_ERROR"};function HQ(n){return Vy.encodeString(JSON.stringify(n),!1)}function MP(n,e=!1,t=!1){return O(this,null,function*(){let i=n.app;eV(i);let r=xs(i),o=r.token,s;if(o&&!am(o)&&(r.token=void 0,o=void 0),!o){let f=yield r.cachedTokenPromise;f&&(am(f)?o=f:yield IP(i,void 0))}if(!e&&o&&am(o))return{token:o.token};let l=!1;if(iV())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=tV(nV(i,yield rV()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);let f=yield r.exchangeTokenPromise;return yield IP(i,f),r.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?sm.warn(f.message):t&&sm.error(f),PP(f)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield xs(i).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?sm.warn(f.message):t&&sm.error(f),s=f}let u;return o?s?am(o)?u={token:o.token,internalError:s}:u=PP(s):(u={token:o.token},r.token=o,yield IP(i,o)):u=PP(s),l&&KQ(i,u),u})}function qQ(n){return O(this,null,function*(){let e=n.app;eV(e);let{provider:t}=xs(e);if(iV()){let i=yield rV(),{token:r}=yield tV(nV(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function GQ(n,e,t,i){let{app:r}=n,o=xs(r),s={next:t,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&am(o.token)){let l=o.token;Promise.resolve().then(()=>{t({token:l.token}),ZF(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ZF(n))}function oV(n,e){let t=xs(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function ZF(n){let{app:e}=n,t=xs(e),i=t.tokenRefresher;i||(i=WQ(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function WQ(n){let{app:e}=n;return new TP(()=>O(null,null,function*(){let t=xs(e),i;if(t.token?i=yield MP(n,!0):i=yield MP(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=xs(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},YF.RETRIAL_MIN_WAIT,YF.RETRIAL_MAX_WAIT)}function KQ(n,e){let t=xs(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function am(n){return n.expireTimeMillis-Date.now()>0}function PP(n){return{token:HQ($Q),error:n}}var OP=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=xs(this.app);for(let t of e)oV(this.app,t.next);return Promise.resolve()}};function QQ(n,e){return new OP(n,e)}function YQ(n){return{getToken:e=>MP(n,e),getLimitedUseToken:()=>qQ(n),addTokenListener:e=>GQ(n,"INTERNAL",e),removeTokenListener:e=>oV(n.app,e)}}var ZQ="@firebase/app-check",JQ="0.10.1";var XQ="app-check",JF="app-check-internal";function eY(){Mr(new wi(XQ,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return QQ(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(JF).initialize()})),Mr(new wi(JF,n=>{let e=n.getProvider("app-check").getImmediate();return YQ(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Zt(ZQ,JQ)}eY();var tY="app-check";var va=class{constructor(){return _a(tY)}};var nY=["localhost","0.0.0.0","127.0.0.1"],aPe=typeof window<"u"&&nY.includes(window.location.hostname);var sV=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},iY=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[t++],s=n[t++],l=n[t++],u=((r&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return e.join("")},aV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],s=r+1<n.length,l=s?n[r+1]:0,u=r+2<n.length,f=u?n[r+2]:0,m=o>>2,y=(o&3)<<4|l>>4,C=(l&15)<<2|f>>6,T=f&63;u||(T=64,s||(C=64)),i.push(t[m],t[y],t[C],t[T])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sV(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):iY(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;let f=r<n.length?t[n.charAt(r)]:64;++r;let y=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||l==null||f==null||y==null)throw new DP;let C=o<<2|l>>4;if(i.push(C),f!==64){let T=l<<4&240|f>>2;if(i.push(T),y!==64){let U=f<<6&192|y;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},DP=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},rY=function(n){let e=sV(n);return aV.encodeByteArray(e,!0)},RP=function(n){return rY(n).replace(/\./g,"")},NP=function(n){try{return aV.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oY(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var sY=()=>oY().__FIREBASE_DEFAULTS__,aY=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cY=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&NP(n[1]);return e&&JSON.parse(e)},cV=()=>{try{return sY()||aY()||cY()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var lV=n=>{var e;return(e=cV())===null||e===void 0?void 0:e[`_${n}`]};function _o(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_o())}function lY(){var n;let e=(n=cV())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dV(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fV(){return!lY()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LP(){try{return typeof indexedDB=="object"}catch{return!1}}function pV(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var uY="FirebaseError",Lo=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=uY,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bc.prototype.create)}},bc=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?dY(o,i):"Error",l=`${this.serviceName}: ${s} (${r}).`;return new Lo(r,l,i)}};function dY(n,e){return n.replace(hY,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var hY=/\{\$([^}]+)}/g;function FP(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function gV(n,e){let t=new kP(n,e);return t.subscribe.bind(t)}var kP=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");fY(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=AP),r.error===void 0&&(r.error=AP),r.complete===void 0&&(r.complete=AP);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function fY(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function AP(){}var uPe=14400*1e3;function kl(n){return n&&n._delegate?n._delegate:n}var Cs=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var pY=[],St=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(St||{}),gY={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},mY=St.INFO,_Y={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},vY=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=_Y[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Rl=class{constructor(e){this.name=e,this._logLevel=mY,this._logHandler=vY,this._userLogHandler=null,pY.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gY[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}};var BP=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yY(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function yY(n){let e=n.getComponent();return e?.type==="VERSION"}var UP="@firebase/app",mV="0.10.6";var yd=new Rl("@firebase/app"),bY="@firebase/app-compat",wY="@firebase/analytics-compat",xY="@firebase/analytics",CY="@firebase/app-check-compat",EY="@firebase/app-check",IY="@firebase/auth",PY="@firebase/auth-compat",TY="@firebase/database",SY="@firebase/database-compat",MY="@firebase/functions",OY="@firebase/functions-compat",AY="@firebase/installations",DY="@firebase/installations-compat",kY="@firebase/messaging",RY="@firebase/messaging-compat",NY="@firebase/performance",LY="@firebase/performance-compat",FY="@firebase/remote-config",VY="@firebase/remote-config-compat",BY="@firebase/storage",UY="@firebase/storage-compat",zY="@firebase/firestore",jY="@firebase/vertexai-preview",$Y="@firebase/firestore-compat",HY="firebase",qY="10.12.3";var GY={[UP]:"fire-core",[bY]:"fire-core-compat",[xY]:"fire-analytics",[wY]:"fire-analytics-compat",[EY]:"fire-app-check",[CY]:"fire-app-check-compat",[IY]:"fire-auth",[PY]:"fire-auth-compat",[TY]:"fire-rtdb",[SY]:"fire-rtdb-compat",[MY]:"fire-fn",[OY]:"fire-fn-compat",[AY]:"fire-iid",[DY]:"fire-iid-compat",[kY]:"fire-fcm",[RY]:"fire-fcm-compat",[NY]:"fire-perf",[LY]:"fire-perf-compat",[FY]:"fire-rc",[VY]:"fire-rc-compat",[BY]:"fire-gcs",[UY]:"fire-gcs-compat",[zY]:"fire-fst",[$Y]:"fire-fst-compat",[jY]:"fire-vertex","fire-js":"fire-js",[HY]:"fire-js-all"};var WY=new Map,KY=new Map,_V=new Map;function vV(n,e){try{n.container.addComponent(e)}catch(t){yd.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Nl(n){let e=n.name;if(_V.has(e))return yd.debug(`There were multiple attempts to register component ${e}.`),!1;_V.set(e,n);for(let t of WY.values())vV(t,n);for(let t of KY.values())vV(t,n);return!0}function yf(n){return n.settings!==void 0}var QY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$P=new bc("app","Firebase",QY);var bf=qY;function wc(n,e,t){var i;let r=(i=GY[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yd.warn(l.join(" "));return}Nl(new Cs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var YY="firebase-heartbeat-database",ZY=1,cm="firebase-heartbeat-store",VP=null;function CV(){return VP||(VP=Hy(YY,ZY,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cm)}catch(t){console.warn(t)}}}}).catch(n=>{throw $P.create("idb-open",{originalErrorMessage:n.message})})),VP}function JY(n){return O(this,null,function*(){try{let t=(yield CV()).transaction(cm),i=yield t.objectStore(cm).get(EV(n));return yield t.done,i}catch(e){if(e instanceof Lo)yd.warn(e.message);else{let t=$P.create("idb-get",{originalErrorMessage:e?.message});yd.warn(t.message)}}})}function yV(n,e){return O(this,null,function*(){try{let i=(yield CV()).transaction(cm,"readwrite");yield i.objectStore(cm).put(e,EV(n)),yield i.done}catch(t){if(t instanceof Lo)yd.warn(t.message);else{let i=$P.create("idb-set",{originalErrorMessage:t?.message});yd.warn(i.message)}}})}function EV(n){return`${n.name}!${n.options.appId}`}var XY=1024,eZ=720*60*60*1e3,zP=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new jP(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return O(this,null,function*(){var e,t;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=bV();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let l=new Date(s.date).valueOf();return Date.now()-l<=eZ}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return O(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=bV(),{heartbeatsToSend:i,unsentEntries:r}=tZ(this._heartbeatsCache.heartbeats),o=RP(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o})}};function bV(){return new Date().toISOString().substring(0,10)}function tZ(n,e=XY){let t=[],i=n.slice();for(let r of n){let o=t.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),wV(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),wV(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var jP=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return O(this,null,function*(){return LP()?pV().then(()=>!0).catch(()=>!1):!1})}read(){return O(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield JY(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return O(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return yV(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return O(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return yV(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function wV(n){return RP(JSON.stringify({version:2,heartbeats:n})).length}function nZ(n){Nl(new Cs("platform-logger",e=>new BP(e),"PRIVATE")),Nl(new Cs("heartbeat",e=>new zP(e),"PRIVATE")),wc(UP,mV,n),wc(UP,mV,"esm2017"),wc("fire-js","")}nZ("");function DV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var kV=DV,RV=new bc("auth","Firebase",DV());var Zy=new Rl("@firebase/auth");function oZ(n,...e){Zy.logLevel<=St.WARN&&Zy.warn(`Auth (${bf}): ${n}`,...e)}function Qy(n,...e){Zy.logLevel<=St.ERROR&&Zy.error(`Auth (${bf}): ${n}`,...e)}function IV(n,...e){throw tT(n,...e)}function eT(n,...e){return tT(n,...e)}function NV(n,e,t){let i=Object.assign(Object.assign({},kV()),{[e]:t});return new bc("auth","Firebase",i).create(e,{appName:n.name})}function Yy(n){return NV(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tT(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return RV.create(n,...e)}function en(n,e,...t){if(!n)throw tT(e,...t)}function lm(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Qy(e),new Error(e)}function Jy(n,e){n||lm(e)}function sZ(){return PV()==="http:"||PV()==="https:"}function PV(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function aZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sZ()||dV()||"connection"in navigator)?navigator.onLine:!0}function cZ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var wd=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jy(t>e,"Short delay should be less than long delay!"),this.isMobile=uV()||hV()}get(){return aZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function lZ(n,e){Jy(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Xy=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var uZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var dZ=new wd(3e4,6e4);function LV(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ib(o,s,l,u){return O(this,arguments,function*(n,e,t,i,r={}){return FV(n,r,()=>O(null,null,function*(){let f={},m={};i&&(e==="GET"?m=i:f={body:JSON.stringify(i)});let y=FP(Object.assign({key:n.config.apiKey},m)).slice(1),C=yield n._getAdditionalHeaders();return C["Content-Type"]="application/json",n.languageCode&&(C["X-Firebase-Locale"]=n.languageCode),Xy.fetch()(VV(n,n.config.apiHost,t,y),Object.assign({method:e,headers:C,referrerPolicy:"no-referrer"},f))}))})}function FV(n,e,t){return O(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},uZ),e);try{let r=new GP(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Ky(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let l=o.ok?s.errorMessage:s.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ky(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Ky(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Ky(n,"user-disabled",s);let m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw NV(n,m,f);IV(n,m)}}catch(r){if(r instanceof Lo)throw r;IV(n,"network-request-failed",{message:String(r)})}})}function VV(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?lZ(n.config,r):`${n.config.apiScheme}://${r}`}var GP=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(eT(this.auth,"network-request-failed")),dZ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ky(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=eT(n,e,i);return r.customData._tokenResponse=t,r}function hZ(n,e){return O(this,null,function*(){return ib(n,"POST","/v1/accounts:delete",e)})}function BV(n,e){return O(this,null,function*(){return ib(n,"POST","/v1/accounts:lookup",e)})}function um(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function UV(n,e=!1){return O(this,null,function*(){let t=kl(n),i=yield t.getIdToken(e),r=zV(i);en(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,s=o?.sign_in_provider;return{claims:r,token:i,authTime:um(HP(r.auth_time)),issuedAtTime:um(HP(r.iat)),expirationTime:um(HP(r.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function HP(n){return Number(n)*1e3}function zV(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Qy("JWT malformed, contained fewer than 3 sections"),null;try{let r=NP(t);return r?JSON.parse(r):(Qy("Failed to decode base64 JWT payload"),null)}catch(r){return Qy("Caught error parsing JWT payload as JSON",r?.toString()),null}}function TV(n){let e=zV(n);return en(e,"internal-error"),en(typeof e.exp<"u","internal-error"),en(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function WP(n,e,t=!1){return O(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Lo&&fZ(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function fZ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var KP=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>O(this,null,function*(){yield this.iteration()}),t)}iteration(){return O(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var hm=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=um(this.lastLoginAt),this.creationTime=um(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function eb(n){return O(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield WP(n,BV(t,{idToken:i}));en(r?.users.length,t,"internal-error");let o=r.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?$V(o.providerUserInfo):[],l=pZ(n.providerData,s),u=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,m=u?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new hm(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,y)})}function jV(n){return O(this,null,function*(){let e=kl(n);yield eb(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function pZ(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function $V(n){return n.map(e=>{var{providerId:t}=e,i=Vu(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function gZ(n,e){return O(this,null,function*(){let t=yield FV(n,{},()=>O(null,null,function*(){let i=FP({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,s=VV(n,r,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Xy.fetch()(s,{method:"POST",headers:l,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function mZ(n,e){return O(this,null,function*(){return ib(n,"POST","/v2/accounts:revokeToken",LV(n,e))})}var dm=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){en(e.idToken,"internal-error"),en(typeof e.idToken<"u","internal-error"),en(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TV(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){en(e.length!==0,"internal-error");let t=TV(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return O(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(en(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return O(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield gZ(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,s=new n;return i&&(en(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(en(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),o&&(en(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return lm("not implemented")}};function Ll(n,e){en(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var fm=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=Vu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hm(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return O(this,null,function*(){let t=yield WP(this,this.stsTokenManager.getToken(this.auth,e));return en(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return UV(this,e)}reload(){return jV(this)}_assign(e){this!==e&&(en(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){en(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return O(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield eb(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return O(this,null,function*(){if(yf(this.auth.app))return Promise.reject(Yy(this.auth));let e=yield this.getIdToken();return yield WP(this,hZ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,s,l,u,f,m;let y=(i=t.displayName)!==null&&i!==void 0?i:void 0,C=(r=t.email)!==null&&r!==void 0?r:void 0,T=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,U=(s=t.photoURL)!==null&&s!==void 0?s:void 0,H=(l=t.tenantId)!==null&&l!==void 0?l:void 0,j=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,X=(f=t.createdAt)!==null&&f!==void 0?f:void 0,ae=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:le,emailVerified:he,isAnonymous:ct,providerData:Se,stsTokenManager:k}=t;en(le&&k,e,"internal-error");let E=dm.fromJSON(this.name,k);en(typeof le=="string",e,"internal-error"),Ll(y,e.name),Ll(C,e.name),en(typeof he=="boolean",e,"internal-error"),en(typeof ct=="boolean",e,"internal-error"),Ll(T,e.name),Ll(U,e.name),Ll(H,e.name),Ll(j,e.name),Ll(X,e.name),Ll(ae,e.name);let P=new n({uid:le,auth:e,email:C,emailVerified:he,displayName:y,isAnonymous:ct,photoURL:U,phoneNumber:T,tenantId:H,stsTokenManager:E,createdAt:X,lastLoginAt:ae});return Se&&Array.isArray(Se)&&(P.providerData=Se.map(A=>Object.assign({},A))),j&&(P._redirectEventId=j),P}static _fromIdTokenResponse(e,t,i=!1){return O(this,null,function*(){let r=new dm;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield eb(o),o})}static _fromGetAccountInfoResponse(e,t,i){return O(this,null,function*(){let r=t.users[0];en(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?$V(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!o?.length,l=new dm;l.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:s}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new hm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(u,f),u})}};var SV=new Map;function bd(n){Jy(n instanceof Function,"Expected a class definition");let e=SV.get(n);return e?(Jy(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,SV.set(n,e),e)}var _Z=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return O(this,null,function*(){return!0})}_set(t,i){return O(this,null,function*(){this.storage[t]=i})}_get(t){return O(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return O(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),QP=_Z;function qP(n,e,t){return`firebase:${n}:${e}:${t}`}var tb=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=qP(this.userKey,r.apiKey,o),this.fullPersistenceKey=qP("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return O(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?fm._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return O(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return O(this,null,function*(){if(!t.length)return new n(bd(QP),e,i);let r=(yield Promise.all(t.map(f=>O(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=r[0]||bd(QP),s=qP(i,e.config.apiKey,e.name),l=null;for(let f of t)try{let m=yield f._get(s);if(m){let y=fm._fromJSON(e,m);f!==o&&(l=y),o=f;break}}catch{}let u=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,i):(o=u[0],l&&(yield o._set(s,l.toJSON())),yield Promise.all(t.map(f=>O(null,null,function*(){if(f!==o)try{yield f._remove(s)}catch{}}))),new n(o,e,i))})}};function MV(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wZ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vZ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CZ(e))return"Blackberry";if(EZ(e))return"Webos";if(yZ(e))return"Safari";if((e.includes("chrome/")||bZ(e))&&!e.includes("edge/"))return"Chrome";if(xZ(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function vZ(n=_o()){return/firefox\//i.test(n)}function yZ(n=_o()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bZ(n=_o()){return/crios\//i.test(n)}function wZ(n=_o()){return/iemobile/i.test(n)}function xZ(n=_o()){return/android/i.test(n)}function CZ(n=_o()){return/blackberry/i.test(n)}function EZ(n=_o()){return/webos/i.test(n)}function HV(n,e=[]){let t;switch(n){case"Browser":t=MV(_o());break;case"Worker":t=`${MV(_o())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bf}/${i}`}var YP=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((s,l)=>{try{let u=e(o);s(u)}catch(u){l(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return O(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function IZ(t){return O(this,arguments,function*(n,e={}){return ib(n,"GET","/v2/passwordPolicy",LV(n,e))})}var PZ=6,ZP=class{constructor(e){var t,i,r,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:PZ,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,s,l;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var JP=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nb(this),this.idTokenSubscription=new nb(this),this.beforeStateQueue=new YP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bd(t)),this._initializationPromise=this.queue(()=>O(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield tb.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return O(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return O(this,null,function*(){try{let t=yield BV(this,{idToken:e}),i=yield fm._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return O(this,null,function*(){var t;if(yf(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===l)&&u?.user&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return en(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return O(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return O(this,null,function*(){try{yield eb(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=cZ()}_delete(){return O(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return O(this,null,function*(){if(yf(this.app))return Promise.reject(Yy(this));let t=e?kl(e):null;return t&&en(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return O(this,null,function*(){if(!this._deleted)return e&&en(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>O(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return O(this,null,function*(){return yf(this.app)?Promise.reject(Yy(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return yf(this.app)?Promise.reject(Yy(this)):this.queue(()=>O(this,null,function*(){yield this.assertedPersistence.setPersistence(bd(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return O(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return O(this,null,function*(){let e=yield IZ(this),t=new ZP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return O(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield mZ(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return O(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return O(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&bd(e)||this._popupRedirectResolver;en(t,this,"argument-error"),this.redirectPersistenceManager=yield tb.create(this,[bd(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return O(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>O(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return O(this,null,function*(){if(e===this.currentUser)return this.queue(()=>O(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(en(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return O(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return en(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return O(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return O(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&oZ(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function TZ(n){return kl(n)}var nb=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gV(t=>this.observer=t)}get next(){return en(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var SZ={loadJS(){return O(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MZ(n){SZ=n}function OZ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function AZ(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(bd);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function nT(n,e,t,i){return kl(n).onIdTokenChanged(e,t,i)}var UPe=OZ("rcb"),zPe=new wd(3e4,6e4);var jPe=new wd(2e3,1e4);var $Pe=600*1e3;var HPe=new wd(3e4,6e4);var qPe=new wd(5e3,15e3);var GPe=encodeURIComponent("fac");var OV="@firebase/auth",AV="1.7.5";var XP=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return O(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){en(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function DZ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kZ(n){Nl(new Cs("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=i.options;en(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:s,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HV(n)},f=new JP(i,r,o,u);return AZ(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Nl(new Cs("auth-internal",e=>{let t=TZ(e.getProvider("auth").getImmediate());return(i=>new XP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wc(OV,AV,DZ(n)),wc(OV,AV,"esm2017")}var RZ=300,WPe=lV("authIdTokenMaxAge")||RZ;function NZ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}MZ({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=eT("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",NZ().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kZ("Browser");function qV(n){return new ze(function(e){var t=nT(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function a5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var c5=a5,l5=new ys("auth","Firebase",a5());var lb=new fa("@firebase/auth");function VZ(n,...e){lb.logLevel<=It.WARN&&lb.warn(`Auth (${ma}): ${n}`,...e)}function ob(n,...e){lb.logLevel<=It.ERROR&&lb.error(`Auth (${ma}): ${n}`,...e)}function Fo(n,...e){throw IT(n,...e)}function Es(n,...e){return IT(n,...e)}function ET(n,e,t){let i=Object.assign(Object.assign({},c5()),{[e]:t});return new ys("auth","Firebase",i).create(e,{appName:n.name})}function Ec(n){return ET(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BZ(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Fo(n,"argument-error"),ET(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function IT(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return l5.create(n,...e)}function Fe(n,e,...t){if(!n)throw IT(e,...t)}function xc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ob(e),new Error(e)}function Ic(n,e){n||xc(e)}function oT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function UZ(){return GV()==="http:"||GV()==="https:"}function GV(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function zZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UZ()||IF()||"connection"in navigator)?navigator.onLine:!0}function jZ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var xd=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ic(t>e,"Short delay should be less than long delay!"),this.isMobile=CF()||PF()}get(){return zZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function PT(n,e){Ic(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ub=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var $Z={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var HZ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qZ=new xd(3e4,6e4);function Pc(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Is(o,s,l,u){return O(this,arguments,function*(n,e,t,i,r={}){return u5(n,r,()=>O(null,null,function*(){let f={},m={};i&&(e==="GET"?m=i:f={body:JSON.stringify(i)});let y=gf(Object.assign({key:n.config.apiKey},m)).slice(1),C=yield n._getAdditionalHeaders();C["Content-Type"]="application/json",n.languageCode&&(C["X-Firebase-Locale"]=n.languageCode);let T=Object.assign({method:e,headers:C},f);return EF()||(T.referrerPolicy="no-referrer"),n.emulatorConfig&&go(n.emulatorConfig.host)&&(T.credentials="include"),ub.fetch()(yield d5(n,n.config.apiHost,t,y),T)}))})}function u5(n,e,t){return O(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},$Z),e);try{let r=new sT(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw rb(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let l=o.ok?s.errorMessage:s.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rb(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw rb(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw rb(n,"user-disabled",s);let m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ET(n,m,f);Fo(n,m)}}catch(r){if(r instanceof cr)throw r;Fo(n,"network-request-failed",{message:String(r)})}})}function Cm(o,s,l,u){return O(this,arguments,function*(n,e,t,i,r={}){let f=yield Is(n,e,t,i,r);return"mfaPendingCredential"in f&&Fo(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function d5(n,e,t,i){return O(this,null,function*(){let r=`${e}${t}?${i}`,o=n,s=o.config.emulator?PT(n.config,r):`${n.config.apiScheme}://${r}`;return HZ.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function GZ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var sT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Es(this.auth,"network-request-failed")),qZ.get())})}};function rb(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Es(n,e,i);return r.customData._tokenResponse=t,r}function WV(n){return n!==void 0&&n.enterprise!==void 0}var aT=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GZ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function WZ(n,e){return O(this,null,function*(){return Is(n,"GET","/v2/recaptchaConfig",Pc(n,e))})}function KZ(n,e){return O(this,null,function*(){return Is(n,"POST","/v1/accounts:delete",e)})}function db(n,e){return O(this,null,function*(){return Is(n,"POST","/v1/accounts:lookup",e)})}function gm(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function TT(n,e=!1){return O(this,null,function*(){let t=Yt(n),i=yield t.getIdToken(e),r=ST(i);Fe(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,s=o?.sign_in_provider;return{claims:r,token:i,authTime:gm(iT(r.auth_time)),issuedAtTime:gm(iT(r.iat)),expirationTime:gm(iT(r.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function iT(n){return Number(n)*1e3}function ST(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ob("JWT malformed, contained fewer than 3 sections"),null;try{let r=By(t);return r?JSON.parse(r):(ob("Failed to decode base64 JWT payload"),null)}catch(r){return ob("Caught error parsing JWT payload as JSON",r?.toString()),null}}function KV(n){let e=ST(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Cd(n,e,t=!1){return O(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof cr&&QZ(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function QZ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var cT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>O(this,null,function*(){yield this.iteration()}),t)}iteration(){return O(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var _m=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gm(this.lastLoginAt),this.creationTime=gm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function hb(n){return O(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Cd(n,db(t,{idToken:i}));Fe(r?.users.length,t,"internal-error");let o=r.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?h5(o.providerUserInfo):[],l=YZ(n.providerData,s),u=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,m=u?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new _m(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,y)})}function MT(n){return O(this,null,function*(){let e=Yt(n);yield hb(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function YZ(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function h5(n){return n.map(e=>{var{providerId:t}=e,i=Vu(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function ZZ(n,e){return O(this,null,function*(){let t=yield u5(n,{},()=>O(null,null,function*(){let i=gf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,s=yield d5(n,r,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:l,body:i};return n.emulatorConfig&&go(n.emulatorConfig.host)&&(u.credentials="include"),ub.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function JZ(n,e){return O(this,null,function*(){return Is(n,"POST","/v2/accounts:revokeToken",Pc(n,e))})}var mm=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KV(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");let t=KV(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return O(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return O(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield ZZ(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,s=new n;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(Fe(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),o&&(Fe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return xc("not implemented")}};function Fl(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Vl=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=Vu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _m(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return O(this,null,function*(){let t=yield Cd(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return TT(this,e)}reload(){return MT(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return O(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield hb(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return O(this,null,function*(){if(xi(this.auth.app))return Promise.reject(Ec(this.auth));let e=yield this.getIdToken();return yield Cd(this,KZ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,s,l,u,f,m;let y=(i=t.displayName)!==null&&i!==void 0?i:void 0,C=(r=t.email)!==null&&r!==void 0?r:void 0,T=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,U=(s=t.photoURL)!==null&&s!==void 0?s:void 0,H=(l=t.tenantId)!==null&&l!==void 0?l:void 0,j=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,X=(f=t.createdAt)!==null&&f!==void 0?f:void 0,ae=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:le,emailVerified:he,isAnonymous:ct,providerData:Se,stsTokenManager:k}=t;Fe(le&&k,e,"internal-error");let E=mm.fromJSON(this.name,k);Fe(typeof le=="string",e,"internal-error"),Fl(y,e.name),Fl(C,e.name),Fe(typeof he=="boolean",e,"internal-error"),Fe(typeof ct=="boolean",e,"internal-error"),Fl(T,e.name),Fl(U,e.name),Fl(H,e.name),Fl(j,e.name),Fl(X,e.name),Fl(ae,e.name);let P=new n({uid:le,auth:e,email:C,emailVerified:he,displayName:y,isAnonymous:ct,photoURL:U,phoneNumber:T,tenantId:H,stsTokenManager:E,createdAt:X,lastLoginAt:ae});return Se&&Array.isArray(Se)&&(P.providerData=Se.map(A=>Object.assign({},A))),j&&(P._redirectEventId=j),P}static _fromIdTokenResponse(e,t,i=!1){return O(this,null,function*(){let r=new mm;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield hb(o),o})}static _fromGetAccountInfoResponse(e,t,i){return O(this,null,function*(){let r=t.users[0];Fe(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?h5(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!o?.length,l=new mm;l.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:s}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new _m(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(u,f),u})}};var QV=new Map;function Cc(n){Ic(n instanceof Function,"Expected a class definition");let e=QV.get(n);return e?(Ic(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,QV.set(n,e),e)}var XZ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return O(this,null,function*(){return!0})}_set(t,i){return O(this,null,function*(){this.storage[t]=i})}_get(t){return O(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return O(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),lT=XZ;function sb(n,e,t){return`firebase:${n}:${e}:${t}`}var fb=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=sb(this.userKey,r.apiKey,o),this.fullPersistenceKey=sb("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return O(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield db(this.auth,{idToken:e}).catch(()=>{});return t?Vl._fromGetAccountInfoResponse(this.auth,t,e):null}return Vl._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return O(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return O(this,null,function*(){if(!t.length)return new n(Cc(lT),e,i);let r=(yield Promise.all(t.map(f=>O(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=r[0]||Cc(lT),s=sb(i,e.config.apiKey,e.name),l=null;for(let f of t)try{let m=yield f._get(s);if(m){let y;if(typeof m=="string"){let C=yield db(e,{idToken:m}).catch(()=>{});if(!C)break;y=yield Vl._fromGetAccountInfoResponse(e,C,m)}else y=Vl._fromJSON(e,m);f!==o&&(l=y),o=f;break}}catch{}let u=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,i):(o=u[0],l&&(yield o._set(s,l.toJSON())),yield Promise.all(t.map(f=>O(null,null,function*(){if(f!==o)try{yield f._remove(s)}catch{}}))),new n(o,e,i))})}};function YV(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v5(e))return"Blackberry";if(y5(e))return"Webos";if(p5(e))return"Safari";if((e.includes("chrome/")||g5(e))&&!e.includes("edge/"))return"Chrome";if(_5(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function f5(n=Oi()){return/firefox\//i.test(n)}function p5(n=Oi()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g5(n=Oi()){return/crios\//i.test(n)}function m5(n=Oi()){return/iemobile/i.test(n)}function _5(n=Oi()){return/android/i.test(n)}function v5(n=Oi()){return/blackberry/i.test(n)}function y5(n=Oi()){return/webos/i.test(n)}function OT(n=Oi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function eJ(n=Oi()){var e;return OT(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tJ(){return TF()&&document.documentMode===10}function b5(n=Oi()){return OT(n)||_5(n)||y5(n)||v5(n)||/windows phone/i.test(n)||m5(n)}function w5(n,e=[]){let t;switch(n){case"Browser":t=YV(Oi());break;case"Worker":t=`${YV(Oi())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ma}/${i}`}var uT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((s,l)=>{try{let u=e(o);s(u)}catch(u){l(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return O(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function nJ(t){return O(this,arguments,function*(n,e={}){return Is(n,"GET","/v2/passwordPolicy",Pc(n,e))})}var iJ=6,dT=class{constructor(e){var t,i,r,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:iJ,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,s,l;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var hT=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pb(this),this.idTokenSubscription=new pb(this),this.beforeStateQueue=new uT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cc(t)),this._initializationPromise=this.queue(()=>O(this,null,function*(){var i,r,o;if(!this._deleted&&(this.persistenceManager=yield fb.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return O(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return O(this,null,function*(){try{let t=yield db(this,{idToken:e}),i=yield Vl._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return O(this,null,function*(){var t;if(xi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===l)&&u?.user&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return O(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return O(this,null,function*(){try{yield hb(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=jZ()}_delete(){return O(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return O(this,null,function*(){if(xi(this.app))return Promise.reject(Ec(this));let t=e?Yt(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return O(this,null,function*(){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>O(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return O(this,null,function*(){return xi(this.app)?Promise.reject(Ec(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return xi(this.app)?Promise.reject(Ec(this)):this.queue(()=>O(this,null,function*(){yield this.assertedPersistence.setPersistence(Cc(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return O(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return O(this,null,function*(){let e=yield nJ(this),t=new dT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ys("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return O(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield JZ(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return O(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return O(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Cc(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=yield fb.create(this,[Cc(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return O(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>O(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return O(this,null,function*(){if(e===this.currentUser)return this.queue(()=>O(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return O(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=w5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return O(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return O(this,null,function*(){var e;if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&VZ(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Bl(n){return Yt(n)}var pb=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=AF(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var wb={loadJS(){return O(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rJ(n){wb=n}function x5(n){return wb.loadJS(n)}function oJ(){return wb.recaptchaEnterpriseScript}function sJ(){return wb.gapiScript}function C5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var fT=class{constructor(){this.enterprise=new pT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},pT=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var aJ="recaptcha-enterprise",E5="NO_RECAPTCHA",gT=class{constructor(e){this.type=aJ,this.auth=Bl(e)}verify(e="verify",t=!1){return O(this,null,function*(){function i(o){return O(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,l)=>O(null,null,function*(){WZ(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{let f=new aT(u);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,s(f.siteKey)}}).catch(u=>{l(u)})}))})}function r(o,s,l){let u=window.grecaptcha;WV(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(f=>{s(f)}).catch(()=>{s(E5)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fT().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{i(this.auth).then(l=>{if(!t&&WV(window.grecaptcha))r(l,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=oJ();u.length!==0&&(u+=l),x5(u).then(()=>{r(l,o,s)}).catch(f=>{s(f)})}}).catch(l=>{s(l)})})})}};function pm(n,e,t,i=!1,r=!1){return O(this,null,function*(){let o=new gT(n),s;if(r)s=E5;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){let u=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){let u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l})}function mT(n,e,t,i,r){return O(this,null,function*(){var o,s;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let l=yield pm(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(l=>O(null,null,function*(){if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield pm(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(l)}));else if(r==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let l=yield pm(n,e,t);return i(n,l).catch(u=>O(null,null,function*(){var f;if(((f=n._getRecaptchaConfig())===null||f===void 0?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let m=yield pm(n,e,t,!1,!0);return i(n,m)}return Promise.reject(u)}))}else{let l=yield pm(n,e,t,!1,!0);return i(n,l)}else return Promise.reject(r+" provider is not supported.")})}function AT(n,e){let t=ga(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),o=t.getOptions();if(ha(o,e??{}))return r;Fo(r,"already-initialized")}return t.initialize({options:e})}function cJ(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Cc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function DT(n,e,t){let i=Bl(n);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,o=I5(e),{host:s,port:l}=lJ(e),u=l===null?"":`:${l}`,f={url:`${o}//${s}${u}/`},m=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(ha(f,i.config.emulator)&&ha(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,go(s)?(Ml(`${o}//${s}${u}`),Ol("Auth",!0)):r||uJ()}function I5(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function lJ(n){let e=I5(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:ZV(i.substr(o.length+1))}}else{let[o,s]=i.split(":");return{host:o,port:ZV(s)}}}function ZV(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function uJ(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var xf=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xc("not implemented")}_getIdTokenResponse(e){return xc("not implemented")}_linkToIdToken(e,t){return xc("not implemented")}_getReauthenticationResolver(e){return xc("not implemented")}};function dJ(n,e){return O(this,null,function*(){return Is(n,"POST","/v1/accounts:update",e)})}function hJ(n,e){return O(this,null,function*(){return Is(n,"POST","/v1/accounts:signUp",e)})}function fJ(n,e){return O(this,null,function*(){return Cm(n,"POST","/v1/accounts:signInWithPassword",Pc(n,e))})}function pJ(n,e){return O(this,null,function*(){return Is(n,"POST","/v1/accounts:sendOobCode",Pc(n,e))})}function gJ(n,e){return O(this,null,function*(){return pJ(n,e)})}function mJ(n,e){return O(this,null,function*(){return Cm(n,"POST","/v1/accounts:signInWithEmailLink",Pc(n,e))})}function _J(n,e){return O(this,null,function*(){return Cm(n,"POST","/v1/accounts:signInWithEmailLink",Pc(n,e))})}var vm=class n extends xf{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return O(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mT(e,t,"signInWithPassword",fJ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return mJ(e,{email:this._email,oobCode:this._password});default:Fo(e,"internal-error")}})}_linkToIdToken(e,t){return O(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mT(e,i,"signUpPassword",hJ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return _J(e,{idToken:t,email:this._email,oobCode:this._password});default:Fo(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function wf(n,e){return O(this,null,function*(){return Cm(n,"POST","/v1/accounts:signInWithIdp",Pc(n,e))})}var vJ="http://localhost",ym=class n extends xf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,o=Vu(t,["providerId","signInMethod"]);if(!i||!r)return null;let s=new n(i,r);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return wf(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,wf(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,wf(e,t)}buildRequest(){let e={requestUri:vJ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gf(t)}return e}};function yJ(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bJ(n){let e=mf(_f(n)).link,t=e?mf(_f(e)).deep_link_id:null,i=mf(_f(n)).deep_link_id;return(i?mf(_f(i)).link:null)||i||t||e||n}var gb=class n{constructor(e){var t,i,r,o,s,l;let u=mf(_f(e)),f=(t=u.apiKey)!==null&&t!==void 0?t:null,m=(i=u.oobCode)!==null&&i!==void 0?i:null,y=yJ((r=u.mode)!==null&&r!==void 0?r:null);Fe(f&&m&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=m,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){let t=bJ(e);try{return new n(t)}catch{return null}}};var xb=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return vm._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=gb.parseLink(i);return Fe(r,"argument-error"),vm._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),bm=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var wm=class extends bm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var kT=(()=>{class n extends wm{constructor(){super("facebook.com")}static credential(t){return ym._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}n.FACEBOOK_SIGN_IN_METHOD="facebook.com",n.PROVIDER_ID="facebook.com";return n})(),RT=(()=>{class n extends wm{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return ym._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function wJ(n,e){return O(this,null,function*(){return Cm(n,"POST","/v1/accounts:signUp",Pc(n,e))})}var Cf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return O(this,null,function*(){let o=yield Vl._fromIdTokenResponse(e,i,r),s=JV(i);return new n({user:o,providerId:s,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return O(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=JV(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function JV(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var _T=class n extends cr{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function P5(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?_T._fromErrorAndOperation(n,o,e,i):o})}function xJ(n,e,t=!1){return O(this,null,function*(){let i=yield Cd(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Cf._forOperation(n,"link",i)})}function T5(n,e,t=!1){return O(this,null,function*(){let{auth:i}=n;if(xi(i.app))return Promise.reject(Ec(i));let r="reauthenticate";try{let o=yield Cd(n,P5(i,r,e,n),t);Fe(o.idToken,i,"internal-error");let s=ST(o.idToken);Fe(s,i,"internal-error");let{sub:l}=s;return Fe(n.uid===l,i,"user-mismatch"),Cf._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fo(i,"user-mismatch"),o}})}function S5(n,e,t=!1){return O(this,null,function*(){if(xi(n.app))return Promise.reject(Ec(n));let i="signIn",r=yield P5(n,i,e),o=yield Cf._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})}function NT(n,e){return O(this,null,function*(){return S5(Bl(n),e)})}function LT(n,e){return O(this,null,function*(){return T5(Yt(n),e)})}function CJ(n,e,t){var i;Fe(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),Fe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Fe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Fe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Fe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function M5(n){return O(this,null,function*(){let e=Bl(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function FT(n,e,t){return O(this,null,function*(){if(xi(n.app))return Promise.reject(Ec(n));let i=Bl(n),s=yield mT(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wJ,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&M5(n),u}),l=yield Cf._fromIdTokenResponse(i,"signIn",s);return yield i._updateCurrentUser(l.user),l})}function VT(n,e,t){return xi(n.app)?Promise.reject(Ec(n)):NT(Yt(n),xb.credential(e,t)).catch(i=>O(null,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&M5(n),i}))}function BT(n,e){return O(this,null,function*(){let t=Yt(n),r={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&CJ(t.auth,r,e);let{email:o}=yield gJ(t.auth,r);o!==n.email&&(yield n.reload())})}function EJ(n,e){return O(this,null,function*(){return Is(n,"POST","/v1/accounts:update",e)})}function UT(i,r){return O(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=Yt(n),l={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield Cd(o,EJ(o.auth,l));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let f=o.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=o.displayName,f.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function zT(n,e){return IJ(Yt(n),null,e)}function IJ(n,e,t){return O(this,null,function*(){let{auth:i}=n,o={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let s=yield Cd(n,dJ(i,o));yield n._updateTokensIfNecessary(s,!0)})}function jT(n,e,t,i){return Yt(n).onIdTokenChanged(e,t,i)}function $T(n,e,t){return Yt(n).beforeAuthStateChanged(e,t)}function HT(n){return Yt(n).signOut()}var mb="__sak";var _b=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mb,"1"),this.storage.removeItem(mb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var PJ=1e3,TJ=10,SJ=(()=>{class n extends _b{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=b5(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}let r=t.key;i?this.detachListener():this.stopPolling();let o=()=>{let l=this.storage.getItem(r);!i&&this.localCache[r]===l||this.notifyListeners(r,l)},s=this.storage.getItem(r);tJ()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,TJ):o()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},PJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return O(this,null,function*(){yield Gs(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return O(this,null,function*(){let i=yield Gs(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return O(this,null,function*(){yield Gs(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),O5=SJ;var MJ=(()=>{class n extends _b{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),qT=MJ;function OJ(n){return Promise.all(n.map(e=>O(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var AJ=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return O(this,null,function*(){let i=t,{eventId:r,eventType:o,data:s}=i.data,l=this.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let u=Array.from(l).map(m=>O(this,null,function*(){return m(i.origin,s)})),f=yield OJ(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function GT(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var vT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return O(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,s;return new Promise((l,u)=>{let f=GT("",20);r.port1.start();let m=setTimeout(()=>{u(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(y){let C=y;if(C.data.eventId===f)switch(C.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(C.data.response);break;default:clearTimeout(m),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ya(){return window}function DJ(n){ya().location.href=n}function A5(){return typeof ya().WorkerGlobalScope<"u"&&typeof ya().importScripts=="function"}function kJ(){return O(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function RJ(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function NJ(){return A5()?self:null}var D5="firebaseLocalStorageDb",LJ=1,vb="firebaseLocalStorage",k5="fbase_key",Ed=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Cb(n,e){return n.transaction([vb],e?"readwrite":"readonly").objectStore(vb)}function FJ(){let n=indexedDB.deleteDatabase(D5);return new Ed(n).toPromise()}function yT(){let n=indexedDB.open(D5,LJ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(vb,{keyPath:k5})}catch(r){t(r)}}),n.addEventListener("success",()=>O(null,null,function*(){let i=n.result;i.objectStoreNames.contains(vb)?e(i):(i.close(),yield FJ(),e(yield yT()))}))})}function XV(n,e,t){return O(this,null,function*(){let i=Cb(n,!0).put({[k5]:e,value:t});return new Ed(i).toPromise()})}function VJ(n,e){return O(this,null,function*(){let t=Cb(n,!1).get(e),i=yield new Ed(t).toPromise();return i===void 0?null:i.value})}function e5(n,e){let t=Cb(n,!0).delete(e);return new Ed(t).toPromise()}var BJ=800,UJ=3,zJ=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return O(this,null,function*(){return this.db?this.db:(this.db=yield yT(),this.db)})}_withRetries(t){return O(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>UJ)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return O(this,null,function*(){return A5()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return O(this,null,function*(){this.receiver=AJ._getInstance(NJ()),this.receiver._subscribe("keyChanged",(t,i)=>O(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>O(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return O(this,null,function*(){var t,i;if(this.activeServiceWorker=yield kJ(),!this.activeServiceWorker)return;this.sender=new vT(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return O(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||RJ()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return O(this,null,function*(){try{if(!indexedDB)return!1;let t=yield yT();return yield XV(t,mb,"1"),yield e5(t,mb),!0}catch{}return!1})}_withPendingWrite(t){return O(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return O(this,null,function*(){return this._withPendingWrite(()=>O(this,null,function*(){return yield this._withRetries(r=>XV(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return O(this,null,function*(){let i=yield this._withRetries(r=>VJ(r,t));return this.localCache[t]=i,i})}_remove(t){return O(this,null,function*(){return this._withPendingWrite(()=>O(this,null,function*(){return yield this._withRetries(i=>e5(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return O(this,null,function*(){let t=yield this._withRetries(o=>{let s=Cb(o,!1).getAll();return new Ed(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>O(this,null,function*(){return this._poll()}),BJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),R5=zJ;var NSe=C5("rcb"),LSe=new xd(3e4,6e4);function N5(n,e){return e?Cc(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var xm=class extends xf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wf(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function jJ(n){return S5(n.auth,new xm(n),n.bypassAuthState)}function $J(n){let{auth:e,user:t}=n;return Fe(t,e,"internal-error"),T5(t,new xm(n),n.bypassAuthState)}function HJ(n){return O(this,null,function*(){let{auth:e,user:t}=n;return Fe(t,e,"internal-error"),xJ(t,new xm(n),n.bypassAuthState)})}var yb=class{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>O(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return O(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:s,type:l}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(u))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jJ;case"linkViaPopup":case"linkViaRedirect":return HJ;case"reauthViaPopup":case"reauthViaRedirect":return $J;default:Fo(this.auth,"internal-error")}}resolve(e){Ic(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ic(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var qJ=new xd(2e3,1e4);function WT(n,e,t){return O(this,null,function*(){if(xi(n.app))return Promise.reject(Es(n,"operation-not-supported-in-this-environment"));let i=Bl(n);BZ(n,e,bm);let r=N5(i,t);return new GJ(i,"signInViaPopup",e,r).executeNotNull()})}var GJ=(()=>{class n extends yb{constructor(t,i,r,o,s){super(t,i,o,s),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return O(this,null,function*(){let t=yield this.execute();return Fe(t,this.auth,"internal-error"),t})}onExecution(){return O(this,null,function*(){Ic(this.filter.length===1,"Popup operations only handle one event");let t=GT();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,qJ.get())};t()}}n.currentPopupAction=null;return n})(),WJ="pendingRedirect",ab=new Map,bT=class n extends yb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return O(this,null,function*(){let e=ab.get(this.auth._key());if(!e){try{let i=(yield KJ(this.resolver,this.auth))?yield Gs(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ab.set(this.auth._key(),e)}return this.bypassAuthState||ab.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return O(this,null,function*(){if(e.type==="signInViaRedirect")return Gs(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Gs(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return O(this,null,function*(){})}cleanUp(){}};function KJ(n,e){return O(this,null,function*(){let t=ZJ(e),i=YJ(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function QJ(n,e){ab.set(n._key(),e)}function YJ(n){return Cc(n._redirectPersistence)}function ZJ(n){return sb(WJ,n.config.apiKey,n.name)}function JJ(n,e,t=!1){return O(this,null,function*(){if(xi(n.app))return Promise.reject(Ec(n));let i=Bl(n),r=N5(i,e),s=yield new bT(i,r,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield i._persistUserIfCurrent(s.user),yield i._setRedirectUser(null,e)),s})}var XJ=600*1e3,wT=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eX(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!L5(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Es(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(t5(e))}saveEventToCache(e){this.cachedEventUids.add(t5(e)),this.lastProcessedEventTime=Date.now()}};function t5(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function L5({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function eX(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L5(n);default:return!1}}function tX(t){return O(this,arguments,function*(n,e={}){return Is(n,"GET","/v1/projects",e)})}var nX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iX=/^https?/;function rX(n){return O(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield tX(n);for(let t of e)try{if(oX(t))return}catch{}Fo(n,"unauthorized-domain")})}function oX(n){let e=oT(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===i}if(!iX.test(t))return!1;if(nX.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var sX=new xd(3e4,6e4);function n5(){let n=ya().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aX(n){return new Promise((e,t)=>{var i,r,o;function s(){n5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n5(),t(Es(n,"network-request-failed"))},timeout:sX.get()})}if(!((r=(i=ya().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=ya().gapi)===null||o===void 0)&&o.load)s();else{let l=C5("iframefcb");return ya()[l]=()=>{gapi.load?s():t(Es(n,"network-request-failed"))},x5(`${sJ()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw cb=null,e})}var cb=null;function cX(n){return cb=cb||aX(n),cb}var lX=new xd(5e3,15e3),uX="__/auth/iframe",dX="emulator/auth/iframe",hX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pX(n){let e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?PT(e,dX):`https://${n.config.authDomain}/${uX}`,i={apiKey:e.apiKey,appName:n.name,v:ma},r=fX.get(n.config.apiHost);r&&(i.eid=r);let o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${gf(i).slice(1)}`}function gX(n){return O(this,null,function*(){let e=yield cX(n),t=ya().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:pX(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hX,dontclear:!0},i=>new Promise((r,o)=>O(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let s=Es(n,"network-request-failed"),l=ya().setTimeout(()=>{o(s)},lX.get());function u(){ya().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{o(s)})})))})}var mX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_X=500,vX=600,yX="_blank",bX="http://localhost",bb=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function wX(n,e,t,i=_X,r=vX){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),l="",u=Object.assign(Object.assign({},mX),{width:i.toString(),height:r.toString(),top:o,left:s}),f=Oi().toLowerCase();t&&(l=g5(f)?yX:t),f5(f)&&(e=e||bX,u.scrollbars="yes");let m=Object.entries(u).reduce((C,[T,U])=>`${C}${T}=${U},`,"");if(eJ(f)&&l!=="_self")return xX(e||"",l),new bb(null);let y=window.open(e||"",l,m);Fe(y,n,"popup-blocked");try{y.focus()}catch{}return new bb(y)}function xX(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var CX="__/auth/handler",EX="emulator/auth/handler",IX=encodeURIComponent("fac");function i5(n,e,t,i,r,o){return O(this,null,function*(){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ma,eventId:r};if(e instanceof bm){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",OF(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[m,y]of Object.entries(o||{}))s[m]=y}if(e instanceof wm){let m=e.getScopes().filter(y=>y!=="");m.length>0&&(s.scopes=m.join(","))}n.tenantId&&(s.tid=n.tenantId);let l=s;for(let m of Object.keys(l))l[m]===void 0&&delete l[m];let u=yield n._getAppCheckToken(),f=u?`#${IX}=${encodeURIComponent(u)}`:"";return`${PX(n)}?${gf(l).slice(1)}${f}`})}function PX({config:n}){return n.emulator?PT(n,EX):`https://${n.authDomain}/${CX}`}var rT="webStorageSupport",xT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qT,this._completeRedirectFn=JJ,this._overrideRedirectResult=QJ}_openPopup(e,t,i,r){return O(this,null,function*(){var o;Ic((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield i5(e,t,i,oT(),r);return wX(e,s,GT())})}_openRedirect(e,t,i,r){return O(this,null,function*(){yield this._originValidation(e);let o=yield i5(e,t,i,oT(),r);return DJ(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(Ic(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return O(this,null,function*(){let t=yield gX(e),i=new wT(e);return t.register("authEvent",r=>(Fe(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rT,{type:rT},r=>{var o;let s=(o=r?.[0])===null||o===void 0?void 0:o[rT];s!==void 0&&t(!!s),Fo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rX(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return b5()||p5()||OT()}},F5=xT;var r5="@firebase/auth",o5="1.10.8";var CT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return O(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function TX(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SX(n){Mr(new wi("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=i.options;Fe(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:s,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:w5(n)},f=new hT(i,r,o,u);return cJ(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Mr(new wi("auth-internal",e=>{let t=Bl(e.getProvider("auth").getImmediate());return(i=>new CT(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zt(r5,o5,TX(n)),Zt(r5,o5,"esm2017")}var MX=300,OX=cP("authIdTokenMaxAge")||MX,s5=null,AX=n=>e=>O(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>OX)return;let r=t?.token;s5!==r&&(s5=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function KT(n=bs()){let e=ga(n,"auth");if(e.isInitialized())return e.getImmediate();let t=AT(n,{popupRedirectResolver:F5,persistence:[R5,O5,qT]}),i=cP("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let s=AX(o.toString());$T(t,s,()=>s(t.currentUser)),jT(t,l=>s(l))}}let r=sP("auth");return r&&DT(t,`http://${r}`),t}function DX(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}rJ({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=Es("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",DX().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SX("Browser");var V5="auth",Tc=class{constructor(e){return e}},Sc=class{constructor(){return _a(V5)}};var QT=new we("angularfire2.auth-instances");function mee(n,e){let t=yc(V5,n,e);return t&&new Tc(t)}function _ee(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Tc(i)}}var vee={provide:Sc,deps:[[new On,QT]]},yee={provide:Tc,useFactory:mee,deps:[[new On,QT],mo]};function B5(n,...e){return Zt("angularfire",Ro.full,"auth"),Pr([yee,vee,{provide:QT,useFactory:_ee(n),multi:!0,deps:[kt,mn,No,ws,[new On,va],...e]}])}var U5=Ht(qV,!0);var z5=Ht(FT,!0,2);var j5=Ht(KT,!0);var $5=Ht(LT,!0,2);var H5=Ht(BT,!0,2);var q5=Ht(VT,!0,2);var YT=Ht(WT,!0,2);var G5=Ht(HT,!0,2);var W5=Ht(zT,!0,2);var Em=Ht(UT,!0,2);var K5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q5={};var Ul,ZT;(function(){var n;function e(k,E){function P(){}P.prototype=E.prototype,k.D=E.prototype,k.prototype=new P,k.prototype.constructor=k,k.C=function(A,R,F){for(var S=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)S[Ft-2]=arguments[Ft];return E.prototype[R].apply(A,S)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,E,P){P||(P=0);var A=Array(16);if(typeof E=="string")for(var R=0;16>R;++R)A[R]=E.charCodeAt(P++)|E.charCodeAt(P++)<<8|E.charCodeAt(P++)<<16|E.charCodeAt(P++)<<24;else for(R=0;16>R;++R)A[R]=E[P++]|E[P++]<<8|E[P++]<<16|E[P++]<<24;E=k.g[0],P=k.g[1],R=k.g[2];var F=k.g[3],S=E+(F^P&(R^F))+A[0]+3614090360&4294967295;E=P+(S<<7&4294967295|S>>>25),S=F+(R^E&(P^R))+A[1]+3905402710&4294967295,F=E+(S<<12&4294967295|S>>>20),S=R+(P^F&(E^P))+A[2]+606105819&4294967295,R=F+(S<<17&4294967295|S>>>15),S=P+(E^R&(F^E))+A[3]+3250441966&4294967295,P=R+(S<<22&4294967295|S>>>10),S=E+(F^P&(R^F))+A[4]+4118548399&4294967295,E=P+(S<<7&4294967295|S>>>25),S=F+(R^E&(P^R))+A[5]+1200080426&4294967295,F=E+(S<<12&4294967295|S>>>20),S=R+(P^F&(E^P))+A[6]+2821735955&4294967295,R=F+(S<<17&4294967295|S>>>15),S=P+(E^R&(F^E))+A[7]+4249261313&4294967295,P=R+(S<<22&4294967295|S>>>10),S=E+(F^P&(R^F))+A[8]+1770035416&4294967295,E=P+(S<<7&4294967295|S>>>25),S=F+(R^E&(P^R))+A[9]+2336552879&4294967295,F=E+(S<<12&4294967295|S>>>20),S=R+(P^F&(E^P))+A[10]+4294925233&4294967295,R=F+(S<<17&4294967295|S>>>15),S=P+(E^R&(F^E))+A[11]+2304563134&4294967295,P=R+(S<<22&4294967295|S>>>10),S=E+(F^P&(R^F))+A[12]+1804603682&4294967295,E=P+(S<<7&4294967295|S>>>25),S=F+(R^E&(P^R))+A[13]+4254626195&4294967295,F=E+(S<<12&4294967295|S>>>20),S=R+(P^F&(E^P))+A[14]+2792965006&4294967295,R=F+(S<<17&4294967295|S>>>15),S=P+(E^R&(F^E))+A[15]+1236535329&4294967295,P=R+(S<<22&4294967295|S>>>10),S=E+(R^F&(P^R))+A[1]+4129170786&4294967295,E=P+(S<<5&4294967295|S>>>27),S=F+(P^R&(E^P))+A[6]+3225465664&4294967295,F=E+(S<<9&4294967295|S>>>23),S=R+(E^P&(F^E))+A[11]+643717713&4294967295,R=F+(S<<14&4294967295|S>>>18),S=P+(F^E&(R^F))+A[0]+3921069994&4294967295,P=R+(S<<20&4294967295|S>>>12),S=E+(R^F&(P^R))+A[5]+3593408605&4294967295,E=P+(S<<5&4294967295|S>>>27),S=F+(P^R&(E^P))+A[10]+38016083&4294967295,F=E+(S<<9&4294967295|S>>>23),S=R+(E^P&(F^E))+A[15]+3634488961&4294967295,R=F+(S<<14&4294967295|S>>>18),S=P+(F^E&(R^F))+A[4]+3889429448&4294967295,P=R+(S<<20&4294967295|S>>>12),S=E+(R^F&(P^R))+A[9]+568446438&4294967295,E=P+(S<<5&4294967295|S>>>27),S=F+(P^R&(E^P))+A[14]+3275163606&4294967295,F=E+(S<<9&4294967295|S>>>23),S=R+(E^P&(F^E))+A[3]+4107603335&4294967295,R=F+(S<<14&4294967295|S>>>18),S=P+(F^E&(R^F))+A[8]+1163531501&4294967295,P=R+(S<<20&4294967295|S>>>12),S=E+(R^F&(P^R))+A[13]+2850285829&4294967295,E=P+(S<<5&4294967295|S>>>27),S=F+(P^R&(E^P))+A[2]+4243563512&4294967295,F=E+(S<<9&4294967295|S>>>23),S=R+(E^P&(F^E))+A[7]+1735328473&4294967295,R=F+(S<<14&4294967295|S>>>18),S=P+(F^E&(R^F))+A[12]+2368359562&4294967295,P=R+(S<<20&4294967295|S>>>12),S=E+(P^R^F)+A[5]+4294588738&4294967295,E=P+(S<<4&4294967295|S>>>28),S=F+(E^P^R)+A[8]+2272392833&4294967295,F=E+(S<<11&4294967295|S>>>21),S=R+(F^E^P)+A[11]+1839030562&4294967295,R=F+(S<<16&4294967295|S>>>16),S=P+(R^F^E)+A[14]+4259657740&4294967295,P=R+(S<<23&4294967295|S>>>9),S=E+(P^R^F)+A[1]+2763975236&4294967295,E=P+(S<<4&4294967295|S>>>28),S=F+(E^P^R)+A[4]+1272893353&4294967295,F=E+(S<<11&4294967295|S>>>21),S=R+(F^E^P)+A[7]+4139469664&4294967295,R=F+(S<<16&4294967295|S>>>16),S=P+(R^F^E)+A[10]+3200236656&4294967295,P=R+(S<<23&4294967295|S>>>9),S=E+(P^R^F)+A[13]+681279174&4294967295,E=P+(S<<4&4294967295|S>>>28),S=F+(E^P^R)+A[0]+3936430074&4294967295,F=E+(S<<11&4294967295|S>>>21),S=R+(F^E^P)+A[3]+3572445317&4294967295,R=F+(S<<16&4294967295|S>>>16),S=P+(R^F^E)+A[6]+76029189&4294967295,P=R+(S<<23&4294967295|S>>>9),S=E+(P^R^F)+A[9]+3654602809&4294967295,E=P+(S<<4&4294967295|S>>>28),S=F+(E^P^R)+A[12]+3873151461&4294967295,F=E+(S<<11&4294967295|S>>>21),S=R+(F^E^P)+A[15]+530742520&4294967295,R=F+(S<<16&4294967295|S>>>16),S=P+(R^F^E)+A[2]+3299628645&4294967295,P=R+(S<<23&4294967295|S>>>9),S=E+(R^(P|~F))+A[0]+4096336452&4294967295,E=P+(S<<6&4294967295|S>>>26),S=F+(P^(E|~R))+A[7]+1126891415&4294967295,F=E+(S<<10&4294967295|S>>>22),S=R+(E^(F|~P))+A[14]+2878612391&4294967295,R=F+(S<<15&4294967295|S>>>17),S=P+(F^(R|~E))+A[5]+4237533241&4294967295,P=R+(S<<21&4294967295|S>>>11),S=E+(R^(P|~F))+A[12]+1700485571&4294967295,E=P+(S<<6&4294967295|S>>>26),S=F+(P^(E|~R))+A[3]+2399980690&4294967295,F=E+(S<<10&4294967295|S>>>22),S=R+(E^(F|~P))+A[10]+4293915773&4294967295,R=F+(S<<15&4294967295|S>>>17),S=P+(F^(R|~E))+A[1]+2240044497&4294967295,P=R+(S<<21&4294967295|S>>>11),S=E+(R^(P|~F))+A[8]+1873313359&4294967295,E=P+(S<<6&4294967295|S>>>26),S=F+(P^(E|~R))+A[15]+4264355552&4294967295,F=E+(S<<10&4294967295|S>>>22),S=R+(E^(F|~P))+A[6]+2734768916&4294967295,R=F+(S<<15&4294967295|S>>>17),S=P+(F^(R|~E))+A[13]+1309151649&4294967295,P=R+(S<<21&4294967295|S>>>11),S=E+(R^(P|~F))+A[4]+4149444226&4294967295,E=P+(S<<6&4294967295|S>>>26),S=F+(P^(E|~R))+A[11]+3174756917&4294967295,F=E+(S<<10&4294967295|S>>>22),S=R+(E^(F|~P))+A[2]+718787259&4294967295,R=F+(S<<15&4294967295|S>>>17),S=P+(F^(R|~E))+A[9]+3951481745&4294967295,k.g[0]=k.g[0]+E&4294967295,k.g[1]=k.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,k.g[2]=k.g[2]+R&4294967295,k.g[3]=k.g[3]+F&4294967295}i.prototype.u=function(k,E){E===void 0&&(E=k.length);for(var P=E-this.blockSize,A=this.B,R=this.h,F=0;F<E;){if(R==0)for(;F<=P;)r(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<E;)if(A[R++]=k.charCodeAt(F++),R==this.blockSize){r(this,A),R=0;break}}else for(;F<E;)if(A[R++]=k[F++],R==this.blockSize){r(this,A),R=0;break}}this.h=R,this.o+=E},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var E=1;E<k.length-8;++E)k[E]=0;var P=8*this.o;for(E=k.length-8;E<k.length;++E)k[E]=P&255,P/=256;for(this.u(k),k=Array(16),E=P=0;4>E;++E)for(var A=0;32>A;A+=8)k[P++]=this.g[E]>>>A&255;return k};function o(k,E){var P=l;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=E(k)}function s(k,E){this.h=E;for(var P=[],A=!0,R=k.length-1;0<=R;R--){var F=k[R]|0;A&&F==E||(P[R]=F,A=!1)}this.g=P}var l={};function u(k){return-128<=k&&128>k?o(k,function(E){return new s([E|0],0>E?-1:0)}):new s([k|0],0>k?-1:0)}function f(k){if(isNaN(k)||!isFinite(k))return y;if(0>k)return j(f(-k));for(var E=[],P=1,A=0;k>=P;A++)E[A]=k/P|0,P*=4294967296;return new s(E,0)}function m(k,E){if(k.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k.charAt(0)=="-")return j(m(k.substring(1),E));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(E,8)),A=y,R=0;R<k.length;R+=8){var F=Math.min(8,k.length-R),S=parseInt(k.substring(R,R+F),E);8>F?(F=f(Math.pow(E,F)),A=A.j(F).add(f(S))):(A=A.j(P),A=A.add(f(S)))}return A}var y=u(0),C=u(1),T=u(16777216);n=s.prototype,n.m=function(){if(H(this))return-j(this).m();for(var k=0,E=1,P=0;P<this.g.length;P++){var A=this.i(P);k+=(0<=A?A:4294967296+A)*E,E*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(U(this))return"0";if(H(this))return"-"+j(this).toString(k);for(var E=f(Math.pow(k,6)),P=this,A="";;){var R=he(P,E).g;P=X(P,R.j(E));var F=((0<P.g.length?P.g[0]:P.h)>>>0).toString(k);if(P=R,U(P))return F+A;for(;6>F.length;)F="0"+F;A=F+A}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function U(k){if(k.h!=0)return!1;for(var E=0;E<k.g.length;E++)if(k.g[E]!=0)return!1;return!0}function H(k){return k.h==-1}n.l=function(k){return k=X(this,k),H(k)?-1:U(k)?0:1};function j(k){for(var E=k.g.length,P=[],A=0;A<E;A++)P[A]=~k.g[A];return new s(P,~k.h).add(C)}n.abs=function(){return H(this)?j(this):this},n.add=function(k){for(var E=Math.max(this.g.length,k.g.length),P=[],A=0,R=0;R<=E;R++){var F=A+(this.i(R)&65535)+(k.i(R)&65535),S=(F>>>16)+(this.i(R)>>>16)+(k.i(R)>>>16);A=S>>>16,F&=65535,S&=65535,P[R]=S<<16|F}return new s(P,P[P.length-1]&-2147483648?-1:0)};function X(k,E){return k.add(j(E))}n.j=function(k){if(U(this)||U(k))return y;if(H(this))return H(k)?j(this).j(j(k)):j(j(this).j(k));if(H(k))return j(this.j(j(k)));if(0>this.l(T)&&0>k.l(T))return f(this.m()*k.m());for(var E=this.g.length+k.g.length,P=[],A=0;A<2*E;A++)P[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<k.g.length;R++){var F=this.i(A)>>>16,S=this.i(A)&65535,Ft=k.i(R)>>>16,Li=k.i(R)&65535;P[2*A+2*R]+=S*Li,ae(P,2*A+2*R),P[2*A+2*R+1]+=F*Li,ae(P,2*A+2*R+1),P[2*A+2*R+1]+=S*Ft,ae(P,2*A+2*R+1),P[2*A+2*R+2]+=F*Ft,ae(P,2*A+2*R+2)}for(A=0;A<E;A++)P[A]=P[2*A+1]<<16|P[2*A];for(A=E;A<2*E;A++)P[A]=0;return new s(P,0)};function ae(k,E){for(;(k[E]&65535)!=k[E];)k[E+1]+=k[E]>>>16,k[E]&=65535,E++}function le(k,E){this.g=k,this.h=E}function he(k,E){if(U(E))throw Error("division by zero");if(U(k))return new le(y,y);if(H(k))return E=he(j(k),E),new le(j(E.g),j(E.h));if(H(E))return E=he(k,j(E)),new le(j(E.g),E.h);if(30<k.g.length){if(H(k)||H(E))throw Error("slowDivide_ only works with positive integers.");for(var P=C,A=E;0>=A.l(k);)P=ct(P),A=ct(A);var R=Se(P,1),F=Se(A,1);for(A=Se(A,2),P=Se(P,2);!U(A);){var S=F.add(A);0>=S.l(k)&&(R=R.add(P),F=S),A=Se(A,1),P=Se(P,1)}return E=X(k,R.j(E)),new le(R,E)}for(R=y;0<=k.l(E);){for(P=Math.max(1,Math.floor(k.m()/E.m())),A=Math.ceil(Math.log(P)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),F=f(P),S=F.j(E);H(S)||0<S.l(k);)P-=A,F=f(P),S=F.j(E);U(F)&&(F=C),R=R.add(F),k=X(k,S)}return new le(R,k)}n.A=function(k){return he(this,k).h},n.and=function(k){for(var E=Math.max(this.g.length,k.g.length),P=[],A=0;A<E;A++)P[A]=this.i(A)&k.i(A);return new s(P,this.h&k.h)},n.or=function(k){for(var E=Math.max(this.g.length,k.g.length),P=[],A=0;A<E;A++)P[A]=this.i(A)|k.i(A);return new s(P,this.h|k.h)},n.xor=function(k){for(var E=Math.max(this.g.length,k.g.length),P=[],A=0;A<E;A++)P[A]=this.i(A)^k.i(A);return new s(P,this.h^k.h)};function ct(k){for(var E=k.g.length+1,P=[],A=0;A<E;A++)P[A]=k.i(A)<<1|k.i(A-1)>>>31;return new s(P,k.h)}function Se(k,E){var P=E>>5;E%=32;for(var A=k.g.length-P,R=[],F=0;F<A;F++)R[F]=0<E?k.i(F+P)>>>E|k.i(F+P+1)<<32-E:k.i(F+P);return new s(R,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ZT=Q5.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=m,Ul=Q5.Integer=s}).apply(typeof K5<"u"?K5:typeof self<"u"?self:typeof window<"u"?window:{});var Eb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mc={};var JT,XT,Ef,eS,Im,Ib,tS,nS,iS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,g){return c==Array.prototype||c==Object.prototype||(c[h]=g.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eb=="object"&&Eb];for(var h=0;h<c.length;++h){var g=c[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=t(this);function r(c,h){if(h)e:{var g=i;c=c.split(".");for(var v=0;v<c.length-1;v++){var N=c[v];if(!(N in g))break e;g=g[N]}c=c[c.length-1],v=g[c],h=h(v),h!=v&&h!=null&&e(g,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var g=0,v=!1,N={next:function(){if(!v&&g<c.length){var V=g++;return{value:h(V,c[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(c){return c||function(){return o(this,function(h,g){return g})}});var s=s||{},l=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function f(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function m(c,h,g){return c.call.apply(c.bind,arguments)}function y(c,h,g){if(!c)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,v),c.apply(h,N)}}return function(){return c.apply(h,arguments)}}function C(c,h,g){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,C.apply(null,arguments)}function T(c,h){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),c.apply(this,v)}}function U(c,h){function g(){}g.prototype=h.prototype,c.aa=h.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(v,N,V){for(var K=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)K[Ie-2]=arguments[Ie];return h.prototype[N].apply(v,K)}}function H(c){let h=c.length;if(0<h){let g=Array(h);for(let v=0;v<h;v++)g[v]=c[v];return g}return[]}function j(c,h){for(let g=1;g<arguments.length;g++){let v=arguments[g];if(u(v)){let N=c.length||0,V=v.length||0;c.length=N+V;for(let K=0;K<V;K++)c[N+K]=v[K]}else c.push(v)}}class X{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function ae(c){return/^[\s\xa0]*$/.test(c)}function le(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var ct=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function Se(c,h,g){for(let v in c)h.call(g,c[v],v,c)}function k(c,h){for(let g in c)h.call(void 0,c[g],g,c)}function E(c){let h={};for(let g in c)h[g]=c[g];return h}let P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(c,h){let g,v;for(let N=1;N<arguments.length;N++){v=arguments[N];for(g in v)c[g]=v[g];for(let V=0;V<P.length;V++)g=P[V],Object.prototype.hasOwnProperty.call(v,g)&&(c[g]=v[g])}}function R(c){var h=1;c=c.split(":");let g=[];for(;0<h&&c.length;)g.push(c.shift()),h--;return c.length&&g.push(c.join(":")),g}function F(c){l.setTimeout(()=>{throw c},0)}function S(){var c=Jt;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class Ft{constructor(){this.h=this.g=null}add(h,g){let v=Li.get();v.set(h,g),this.h?this.h.next=v:this.g=v,this.h=v}}var Li=new X(()=>new Je,c=>c.reset());class Je{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let kr,ke=!1,Jt=new Ft,Kn=()=>{let c=l.Promise.resolve(void 0);kr=()=>{c.then(Ei)}};var Ei=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(g){F(g)}var h=Li;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}ke=!1};function _t(){this.s=this.s,this.C=this.C}_t.prototype.s=!1,_t.prototype.ma=function(){this.s||(this.s=!0,this.N())},_t.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Oe(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var vt=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let g=()=>{};l.addEventListener("test",g,h),l.removeEventListener("test",g,h)}catch{}return c})();function zn(c,h){if(Oe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,v=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(ct){e:{try{he(h.nodeName);var N=!0;break e}catch{}N=!1}N||(h=null)}}else g=="mouseover"?h=c.fromElement:g=="mouseout"&&(h=c.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:bo[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&zn.aa.h.call(this)}}U(zn,Oe);var bo={2:"touch",3:"pen",4:"mouse"};zn.prototype.h=function(){zn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Rr="closure_listenable_"+(1e6*Math.random()|0),ou=0;function su(c,h,g,v,N){this.listener=c,this.proxy=null,this.src=h,this.type=g,this.capture=!!v,this.ha=N,this.key=++ou,this.da=this.fa=!1}function mr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Jr(c){this.src=c,this.g={},this.h=0}Jr.prototype.add=function(c,h,g,v,N){var V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);var K=As(c,h,v,N);return-1<K?(h=c[K],g||(h.fa=!1)):(h=new su(h,this.src,V,!!v,N),h.fa=g,c.push(h)),h};function Ra(c,h){var g=h.type;if(g in c.g){var v=c.g[g],N=Array.prototype.indexOf.call(v,h,void 0),V;(V=0<=N)&&Array.prototype.splice.call(v,N,1),V&&(mr(h),c.g[g].length==0&&(delete c.g[g],c.h--))}}function As(c,h,g,v){for(var N=0;N<c.length;++N){var V=c[N];if(!V.da&&V.listener==h&&V.capture==!!g&&V.ha==v)return N}return-1}var Ds="closure_lm_"+(1e6*Math.random()|0),$o={};function ks(c,h,g,v,N){if(v&&v.once)return Na(c,h,g,v,N);if(Array.isArray(h)){for(var V=0;V<h.length;V++)ks(c,h[V],g,v,N);return null}return g=Ls(g),c&&c[Rr]?c.K(h,g,f(v)?!!v.capture:!!v,N):au(c,h,g,!1,v,N)}function au(c,h,g,v,N,V){if(!h)throw Error("Invalid event type");var K=f(N)?!!N.capture:!!N,Ie=Ho(c);if(Ie||(c[Ds]=Ie=new Jr(c)),g=Ie.add(h,g,v,K,V),g.proxy)return g;if(v=eh(),g.proxy=v,v.src=c,v.listener=g,c.addEventListener)vt||(N=K),N===void 0&&(N=!1),c.addEventListener(h.toString(),v,N);else if(c.attachEvent)c.attachEvent(cu(h.toString()),v);else if(c.addListener&&c.removeListener)c.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function eh(){function c(g){return h.call(c.src,c.listener,g)}let h=Sp;return c}function Na(c,h,g,v,N){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Na(c,h[V],g,v,N);return null}return g=Ls(g),c&&c[Rr]?c.L(h,g,f(v)?!!v.capture:!!v,N):au(c,h,g,!0,v,N)}function zc(c,h,g,v,N){if(Array.isArray(h))for(var V=0;V<h.length;V++)zc(c,h[V],g,v,N);else v=f(v)?!!v.capture:!!v,g=Ls(g),c&&c[Rr]?(c=c.i,h=String(h).toString(),h in c.g&&(V=c.g[h],g=As(V,g,v,N),-1<g&&(mr(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete c.g[h],c.h--)))):c&&(c=Ho(c))&&(h=c.g[h.toString()],c=-1,h&&(c=As(h,g,v,N)),(g=-1<c?h[c]:null)&&Rs(g))}function Rs(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[Rr])Ra(h.i,c);else{var g=c.type,v=c.proxy;h.removeEventListener?h.removeEventListener(g,v,c.capture):h.detachEvent?h.detachEvent(cu(g),v):h.addListener&&h.removeListener&&h.removeListener(v),(g=Ho(h))?(Ra(g,c),g.h==0&&(g.src=null,h[Ds]=null)):mr(c)}}}function cu(c){return c in $o?$o[c]:$o[c]="on"+c}function Sp(c,h){if(c.da)c=!0;else{h=new zn(h,this);var g=c.listener,v=c.ha||c.src;c.fa&&Rs(c),c=g.call(v,h)}return c}function Ho(c){return c=c[Ds],c instanceof Jr?c:null}var Ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ls(c){return typeof c=="function"?c:(c[Ns]||(c[Ns]=function(h){return c.handleEvent(h)}),c[Ns])}function Ot(){_t.call(this),this.i=new Jr(this),this.M=this,this.F=null}U(Ot,_t),Ot.prototype[Rr]=!0,Ot.prototype.removeEventListener=function(c,h,g,v){zc(this,c,h,g,v)};function Dt(c,h){var g,v=c.F;if(v)for(g=[];v;v=v.F)g.push(v);if(c=c.M,v=h.type||h,typeof h=="string")h=new Oe(h,c);else if(h instanceof Oe)h.target=h.target||c;else{var N=h;h=new Oe(v,c),A(h,N)}if(N=!0,g)for(var V=g.length-1;0<=V;V--){var K=h.g=g[V];N=wo(K,v,!0,h)&&N}if(K=h.g=c,N=wo(K,v,!0,h)&&N,N=wo(K,v,!1,h)&&N,g)for(V=0;V<g.length;V++)K=h.g=g[V],N=wo(K,v,!1,h)&&N}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var g=c.g[h],v=0;v<g.length;v++)mr(g[v]);delete c.g[h],c.h--}}this.F=null},Ot.prototype.K=function(c,h,g,v){return this.i.add(String(c),h,!1,g,v)},Ot.prototype.L=function(c,h,g,v){return this.i.add(String(c),h,!0,g,v)};function wo(c,h,g,v){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var N=!0,V=0;V<h.length;++V){var K=h[V];if(K&&!K.da&&K.capture==g){var Ie=K.listener,lt=K.ha||K.src;K.fa&&Ra(c.i,K),N=Ie.call(lt,v)!==!1&&N}}return N&&!v.defaultPrevented}function lu(c,h,g){if(typeof c=="function")g&&(c=C(c,g));else if(c&&typeof c.handleEvent=="function")c=C(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(c,h||0)}function jc(c){c.g=lu(()=>{c.g=null,c.i&&(c.i=!1,jc(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class uu extends _t{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:jc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(c){_t.call(this),this.h=c,this.g={}}U(Nr,_t);var du=[];function qo(c){Se(c.g,function(h,g){this.g.hasOwnProperty(g)&&Rs(h)},c),c.g={}}Nr.prototype.N=function(){Nr.aa.N.call(this),qo(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var La=l.JSON.stringify,Mp=l.JSON.parse,th=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Fs(){}Fs.prototype.h=null;function $c(c){return c.h||(c.h=c.i())}function hu(){}var Xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fa(){Oe.call(this,"d")}U(Fa,Oe);function Va(){Oe.call(this,"c")}U(Va,Oe);var Fi={},fu=null;function eo(){return fu=fu||new Ot}Fi.La="serverreachability";function pu(c){Oe.call(this,Fi.La,c)}U(pu,Oe);function to(c){let h=eo();Dt(h,new pu(h))}Fi.STAT_EVENT="statevent";function gu(c,h){Oe.call(this,Fi.STAT_EVENT,c),this.stat=h}U(gu,Oe);function Vt(c){let h=eo();Dt(h,new gu(h,c))}Fi.Ma="timingevent";function Ki(c,h){Oe.call(this,Fi.Ma,c),this.size=h}U(Ki,Oe);function Ce(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},h)}function Lr(){this.g=!0}Lr.prototype.xa=function(){this.g=!1};function nh(c,h,g,v,N,V){c.info(function(){if(c.g)if(V)for(var K="",Ie=V.split("&"),lt=0;lt<Ie.length;lt++){var Pe=Ie[lt].split("=");if(1<Pe.length){var ot=Pe[0];Pe=Pe[1];var At=ot.split("_");K=2<=At.length&&At[1]=="type"?K+(ot+"="+Pe+"&"):K+(ot+"=redacted&")}}else K=null;else K=V;return"XMLHTTP REQ ("+v+") [attempt "+N+"]: "+h+`
`+g+`
`+K})}function ih(c,h,g,v,N,V,K){c.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+N+"]: "+h+`
`+g+`
`+V+" "+K})}function Qi(c,h,g,v){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+rh(c,g)+(v?" "+v:"")})}function mu(c,h){c.info(function(){return"TIMEOUT: "+h})}Lr.prototype.info=function(){};function rh(c,h){if(!c.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var v=g[c];if(!(2>v.length)){var N=v[1];if(Array.isArray(N)&&!(1>N.length)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(var K=1;K<N.length;K++)N[K]=""}}}}return La(g)}catch{return h}}var Yi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ba;function Go(){}U(Go,Fs),Go.prototype.g=function(){return new XMLHttpRequest},Go.prototype.i=function(){return{}},Ba=new Go;function _i(c,h,g,v){this.j=c,this.i=h,this.l=g,this.R=v||1,this.U=new Nr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _u}function _u(){this.i=null,this.g="",this.h=!1}var qc={},Ua={};function xo(c,h,g){c.L=1,c.v=no(hn(h)),c.m=g,c.P=!0,vu(c,null)}function vu(c,h){c.F=Date.now(),Wo(c),c.A=hn(c.v);var g=c.A,v=c.R;Array.isArray(v)||(v=[String(v)]),Wt(g.i,"t",v),c.C=0,g=c.j.J,c.h=new _u,c.g=$s(c.j,g?h:null,!c.m),0<c.O&&(c.M=new uu(C(c.Y,c,c.g),c.O)),h=c.U,g=c.g,v=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(du[0]=N.toString()),N=du);for(var V=0;V<N.length;V++){var K=ks(g,N[V],v||h.handleEvent,!1,h.h||h);if(!K)break;h.g[K.key]=K}h=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),to(),nh(c.i,c.u,c.A,c.l,c.R,c.m)}_i.prototype.ca=function(c){c=c.target;let h=this.M;h&&Tn(c)==3?h.j():this.Y(c)},_i.prototype.Y=function(c){try{if(c==this.g)e:{let At=Tn(this.g);var h=this.g.Ba();let Yn=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||Au(this.g)))){this.J||At!=4||h==7||(h==8||0>=Yn?to(3):to(2)),Ko(this);var g=this.g.Z();this.X=g;t:if(yu(this)){var v=Au(this.g);c="";var N=v.length,V=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ii(this),Vi(this);var K="";break t}this.h.i=new l.TextDecoder}for(h=0;h<N;h++)this.h.h=!0,c+=this.h.i.decode(v[h],{stream:!(V&&h==N-1)});v.length=0,this.h.g+=c,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=g==200,ih(this.i,this.u,this.A,this.l,this.R,At,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,lt=this.g;if((Ie=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(Ie)){var Pe=Ie;break t}}Pe=null}if(g=Pe)Qi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vs(this,g);else{this.o=!1,this.s=3,Vt(12),Ii(this),Vi(this);break e}}if(this.P){g=!0;let wn;for(;!this.J&&this.C<K.length;)if(wn=Op(this,K),wn==Ua){At==4&&(this.s=4,Vt(14),g=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==qc){this.s=4,Vt(15),Qi(this.i,this.l,K,"[Invalid Chunk]"),g=!1;break}else Qi(this.i,this.l,wn,null),Vs(this,wn);if(yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||K.length!=0||this.h.h||(this.s=1,Vt(16),g=!1),this.o=this.o&&g,!g)Qi(this.i,this.l,K,"[Invalid Chunked Response]"),Ii(this),Vi(this);else if(0<K.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),js(ot),ot.M=!0,Vt(11))}}else Qi(this.i,this.l,K,null),Vs(this,K);At==4&&Ii(this),this.o&&!this.J&&(At==4?ku(this.j,this):(this.o=!1,Wo(this)))}else ah(this.g),g==400&&0<K.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),Ii(this),Vi(this)}}}catch{}finally{}};function yu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Op(c,h){var g=c.C,v=h.indexOf(`
`,g);return v==-1?Ua:(g=Number(h.substring(g,v)),isNaN(g)?qc:(v+=1,v+g>h.length?Ua:(h=h.slice(v,v+g),c.C=v+g,h)))}_i.prototype.cancel=function(){this.J=!0,Ii(this)};function Wo(c){c.S=Date.now()+c.I,bu(c,c.I)}function bu(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ce(C(c.ba,c),h)}function Ko(c){c.B&&(l.clearTimeout(c.B),c.B=null)}_i.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(mu(this.i,this.A),this.L!=2&&(to(),Vt(17)),Ii(this),this.s=2,Vi(this)):bu(this,this.S-c)};function Vi(c){c.j.G==0||c.J||ku(c.j,c)}function Ii(c){Ko(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,qo(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Vs(c,h){try{var g=c.j;if(g.G!=0&&(g.g==c||Fr(g.h,c))){if(!c.K&&Fr(g.h,c)&&g.G==3){try{var v=g.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var N=v;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)ts(g),Xo(g);else break e;qa(g),Vt(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ce(C(g.Za,g),6e3));if(1>=Bs(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else $i(g,11)}else if((c.K||g.g==c)&&ts(g),!ae(h))for(N=g.Da.g.parse(h),h=0;h<N.length;h++){let Pe=N[h];if(g.T=Pe[0],Pe=Pe[1],g.G==2)if(Pe[0]=="c"){g.K=Pe[1],g.ia=Pe[2];let ot=Pe[3];ot!=null&&(g.la=ot,g.j.info("VER="+g.la));let At=Pe[4];At!=null&&(g.Aa=At,g.j.info("SVER="+g.Aa));let Yn=Pe[5];Yn!=null&&typeof Yn=="number"&&0<Yn&&(v=1.5*Yn,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;let wn=c.g;if(wn){let yr=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yr){var V=v.h;V.g||yr.indexOf("spdy")==-1&&yr.indexOf("quic")==-1&&yr.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Vr(V,V.h),V.h=null))}if(v.D){let Hs=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hs&&(v.ya=Hs,De(v.I,v.D,Hs))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var K=c;if(v.qa=Jc(v,v.J?v.ia:null,v.W),K.K){ja(v.h,K);var Ie=K,lt=v.L;lt&&(Ie.I=lt),Ie.B&&(Ko(Ie),Wo(Ie)),v.g=K}else Ha(v);0<g.i.length&&es(g)}else Pe[0]!="stop"&&Pe[0]!="close"||$i(g,7);else g.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?$i(g,7):Jo(g):Pe[0]!="noop"&&g.l&&g.l.ta(Pe),g.v=0)}}to(4)}catch{}}var za=class{constructor(c,h){this.g=c,this.map=h}};function yt(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Bs(c){return c.h?1:c.g?c.g.size:0}function Fr(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Vr(c,h){c.g?c.g.add(h):c.h=h}function ja(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}yt.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Xe(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let g of c.g.values())h=h.concat(g.D);return h}return H(c.i)}function yn(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],g=c.length,v=0;v<g;v++)h.push(c[v]);return h}h=[],g=0;for(v in c)h[g++]=c[v];return h}function wu(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var g=0;g<c;g++)h.push(g);return h}h=[],g=0;for(let v in c)h[g++]=v;return h}}}function Us(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var g=wu(c),v=yn(c),N=v.length,V=0;V<N;V++)h.call(void 0,v[V],g&&g[V],c)}var Pi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ap(c,h){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var v=c[g].indexOf("="),N=null;if(0<=v){var V=c[g].substring(0,v);N=c[g].substring(v+1)}else V=c[g];h(V,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Qn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Qn){this.h=c.h,tn(this,c.j),this.o=c.o,this.g=c.g,Bi(this,c.s),this.l=c.l;var h=c.i,g=new vr;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),Qo(this,g),this.m=c.m}else c&&(h=String(c).match(Pi))?(this.h=!1,tn(this,h[1]||"",!0),this.o=Ui(h[2]||""),this.g=Ui(h[3]||"",!0),Bi(this,h[4]),this.l=Ui(h[5]||"",!0),Qo(this,h[6]||"",!0),this.m=Ui(h[7]||"")):(this.h=!1,this.i=new vr(null,this.h))}Qn.prototype.toString=function(){var c=[],h=this.j;h&&c.push(_r(h,zs,!0),":");var g=this.g;return(g||h=="file")&&(c.push("//"),(h=this.o)&&c.push(_r(h,zs,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(_r(g,g.charAt(0)=="/"?Eu:Cu,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",_r(g,oh)),c.join("")};function hn(c){return new Qn(c)}function tn(c,h,g){c.j=g?Ui(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Bi(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function Qo(c,h,g){h instanceof vr?(c.i=h,Iu(c.i,c.h)):(g||(h=_r(h,Gc)),c.i=new vr(h,c.h))}function De(c,h,g){c.i.set(h,g)}function no(c){return De(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ui(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function _r(c,h,g){return typeof c=="string"?(c=encodeURI(c).replace(h,xu),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var zs=/[#\/\?@]/g,Cu=/[#\?:]/g,Eu=/[#\?]/g,Gc=/[#\?@]/g,oh=/#/g;function vr(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function vi(c){c.g||(c.g=new Map,c.h=0,c.i&&Ap(c.i,function(h,g){c.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}n=vr.prototype,n.add=function(c,h){vi(this),this.i=null,c=Ji(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(h),this.h+=1,this};function Ke(c,h){vi(c),h=Ji(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function Zi(c,h){return vi(c),h=Ji(c,h),c.g.has(h)}n.forEach=function(c,h){vi(this),this.g.forEach(function(g,v){g.forEach(function(N){c.call(h,N,v,this)},this)},this)},n.na=function(){vi(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let v=0;v<h.length;v++){let N=c[v];for(let V=0;V<N.length;V++)g.push(h[v])}return g},n.V=function(c){vi(this);let h=[];if(typeof c=="string")Zi(this,c)&&(h=h.concat(this.g.get(Ji(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)h=h.concat(c[g])}return h},n.set=function(c,h){return vi(this),this.i=null,c=Ji(this,c),Zi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function Wt(c,h,g){Ke(c,h),0<g.length&&(c.i=null,c.g.set(Ji(c,h),H(g)),c.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var v=h[g];let V=encodeURIComponent(String(v)),K=this.V(v);for(v=0;v<K.length;v++){var N=V;K[v]!==""&&(N+="="+encodeURIComponent(String(K[v]))),c.push(N)}}return this.i=c.join("&")};function Ji(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function Iu(c,h){h&&!c.j&&(vi(c),c.i=null,c.g.forEach(function(g,v){var N=v.toLowerCase();v!=N&&(Ke(this,v),Wt(this,N,g))},c)),c.j=h}function Pu(c,h){let g=new Lr;if(l.Image){let v=new Image;v.onload=T(bn,g,"TestLoadImage: loaded",!0,h,v),v.onerror=T(bn,g,"TestLoadImage: error",!1,h,v),v.onabort=T(bn,g,"TestLoadImage: abort",!1,h,v),v.ontimeout=T(bn,g,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=c}else h(!1)}function Tu(c,h){let g=new Lr,v=new AbortController,N=setTimeout(()=>{v.abort(),bn(g,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:v.signal}).then(V=>{clearTimeout(N),V.ok?bn(g,"TestPingServer: ok",!0,h):bn(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(N),bn(g,"TestPingServer: error",!1,h)})}function bn(c,h,g,v,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),v(g)}catch{}}function Su(){this.g=new th}function $a(c,h,g){let v=g||"";try{Us(c,function(N,V){let K=N;f(N)&&(K=La(N)),h.push(v+V+"="+encodeURIComponent(K))})}catch(N){throw h.push(v+"type="+encodeURIComponent("_badmap")),N}}function cn(c){this.l=c.Ub||null,this.j=c.eb||!1}U(cn,Fs),cn.prototype.g=function(){return new zi(this.l,this.j)},cn.prototype.i=(function(c){return function(){return c}})({});function zi(c,h){Ot.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(zi,Ot),n=zi.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,io(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?Br(this):io(this),this.readyState==3&&Wc(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Br(this))},n.Qa=function(c){this.g&&(this.response=c,Br(this))},n.ga=function(){this.g&&Br(this)};function Br(c){c.readyState=4,c.l=null,c.j=null,c.v=null,io(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=h.next();return c.join(`\r
`)};function io(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Kc(c){let h="";return Se(c,function(g,v){h+=v,h+=":",h+=g,h+=`\r
`}),h}function Yo(c,h,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=Kc(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):De(c,h,g))}function Qe(c){Ot.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Qe,Ot);var sh=/^https?$/i,bt=["POST","PUT"];n=Qe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ba.g(),this.v=this.o?$c(this.o):$c(Ba),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(V){Mu(this,V);return}if(c=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var N in v)g.set(N,v[N]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let V of v.keys())g.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),N=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(bt,h,void 0))||v||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,K]of g)this.g.setRequestHeader(V,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ou(this),this.u=!0,this.g.send(c),this.u=!1}catch(V){Mu(this,V)}};function Mu(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,ji(c),Co(c)}function ji(c){c.A||(c.A=!0,Dt(c,"complete"),Dt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Dt(this,"complete"),Dt(this,"abort"),Co(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Co(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Zo(this):this.bb())},n.bb=function(){Zo(this)};function Zo(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Tn(c)!=4||c.Z()!=2)){if(c.u&&Tn(c)==4)lu(c.Ea,0,c);else if(Dt(c,"readystatechange"),Tn(c)==4){c.h=!1;try{let K=c.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var v;if(v=K===0){var N=String(c.D).match(Pi)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),v=!sh.test(N?N.toLowerCase():"")}g=v}if(g)Dt(c,"complete"),Dt(c,"success");else{c.m=6;try{var V=2<Tn(c)?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.Z()+"]",ji(c)}}finally{Co(c)}}}}function Co(c,h){if(c.g){Ou(c);let g=c.g,v=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Dt(c,"ready");try{g.onreadystatechange=v}catch{}}}function Ou(c){c.I&&(l.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Tn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),Mp(h)}};function Au(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ah(c){let h={};c=(c.g&&2<=Tn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<c.length;v++){if(ae(c[v]))continue;var g=R(c[v]);let N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let V=h[N]||[];h[N]=V,V.push(g)}k(h,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ro(c,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||h}function Du(c){this.Aa=0,this.i=[],this.j=new Lr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ro("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ro("baseRetryDelayMs",5e3,c),this.cb=ro("retryDelaySeedMs",1e4,c),this.Wa=ro("forwardChannelMaxRetries",2,c),this.wa=ro("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yt(c&&c.concurrentRequestLimit),this.Da=new Su,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Du.prototype,n.la=8,n.G=1,n.connect=function(c,h,g,v){Vt(0),this.W=c,this.H=h||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=Jc(this,null,this.W),es(this)};function Jo(c){if(Xi(c),c.G==3){var h=c.U++,g=hn(c.I);if(De(g,"SID",c.K),De(g,"RID",h),De(g,"TYPE","terminate"),zr(c,g),h=new _i(c,c.j,h),h.L=2,h.v=no(hn(g)),g=!1,l.navigator&&l.navigator.sendBeacon)try{g=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!g&&l.Image&&(new Image().src=h.v,g=!0),g||(h.g=$s(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Wo(h)}Zc(c)}function Xo(c){c.g&&(js(c),c.g.cancel(),c.g=null)}function Xi(c){Xo(c),c.u&&(l.clearTimeout(c.u),c.u=null),ts(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function es(c){if(!an(c.h)&&!c.s){c.s=!0;var h=c.Ga;kr||Kn(),ke||(kr(),ke=!0),Jt.add(h,c),c.B=0}}function ch(c,h){return Bs(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ce(C(c.Ga,c,h),Ga(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let N=new _i(this,this.j,c),V=this.o;if(this.S&&(V?(V=E(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(N.H=V,V=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=Qc(this,N,h),g=hn(this.I),De(g,"RID",c),De(g,"CVER",22),this.D&&De(g,"X-HTTP-Session-Id",this.D),zr(this,g),V&&(this.O?h="headers="+encodeURIComponent(String(Kc(V)))+"&"+h:this.m&&Yo(g,this.m,V)),Vr(this.h,N),this.Ua&&De(g,"TYPE","init"),this.P?(De(g,"$req",h),De(g,"SID","null"),N.T=!0,xo(N,g,null)):xo(N,g,h),this.G=2}}else this.G==3&&(c?Ur(this,c):this.i.length==0||an(this.h)||Ur(this))};function Ur(c,h){var g;h?g=h.l:g=c.U++;let v=hn(c.I);De(v,"SID",c.K),De(v,"RID",g),De(v,"AID",c.T),zr(c,v),c.m&&c.o&&Yo(v,c.m,c.o),g=new _i(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),h&&(c.i=h.D.concat(c.i)),h=Qc(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Vr(c.h,g),xo(g,v,h)}function zr(c,h){c.H&&Se(c.H,function(g,v){De(h,v,g)}),c.l&&Us({},function(g,v){De(h,v,g)})}function Qc(c,h,g){g=Math.min(c.i.length,g);var v=c.l?C(c.l.Na,c.l,c):null;e:{var N=c.i;let V=-1;for(;;){let K=["count="+g];V==-1?0<g?(V=N[0].g,K.push("ofs="+V)):V=0:K.push("ofs="+V);let Ie=!0;for(let lt=0;lt<g;lt++){let Pe=N[lt].g,ot=N[lt].map;if(Pe-=V,0>Pe)V=Math.max(0,N[lt].g-100),Ie=!1;else try{$a(ot,K,"req"+Pe+"_")}catch{v&&v(ot)}}if(Ie){v=K.join("&");break e}}}return c=c.i.splice(0,g),h.D=c,v}function Ha(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;kr||Kn(),ke||(kr(),ke=!0),Jt.add(h,c),c.v=0}}function qa(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ce(C(c.Fa,c),Ga(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Yc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ce(C(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),Xo(this),Yc(this))};function js(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function Yc(c){c.g=new _i(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=hn(c.qa);De(h,"RID","rpc"),De(h,"SID",c.K),De(h,"AID",c.T),De(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&De(h,"TO",c.ja),De(h,"TYPE","xmlhttp"),zr(c,h),c.m&&c.o&&Yo(h,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=no(hn(h)),g.m=null,g.P=!0,vu(g,c)}n.Za=function(){this.C!=null&&(this.C=null,Xo(this),qa(this),Vt(19))};function ts(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function ku(c,h){var g=null;if(c.g==h){ts(c),js(c),c.g=null;var v=2}else if(Fr(c.h,h))g=h.D,ja(c.h,h),v=1;else return;if(c.G!=0){if(h.o)if(v==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var N=c.B;v=eo(),Dt(v,new Ki(v,g)),es(c)}else Ha(c);else if(N=h.s,N==3||N==0&&0<h.X||!(v==1&&ch(c,h)||v==2&&qa(c)))switch(g&&0<g.length&&(h=c.h,h.i=h.i.concat(g)),N){case 1:$i(c,5);break;case 4:$i(c,10);break;case 3:$i(c,6);break;default:$i(c,2)}}}function Ga(c,h){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*h}function $i(c,h){if(c.j.info("Error code "+h),h==2){var g=C(c.fb,c),v=c.Xa;let N=!v;v=new Qn(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||tn(v,"https"),no(v),N?Pu(v.toString(),g):Tu(v.toString(),g)}else Vt(2);c.G=0,c.l&&c.l.sa(h),Zc(c),Xi(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Zc(c){if(c.G=0,c.ka=[],c.l){let h=Xe(c.h);(h.length!=0||c.i.length!=0)&&(j(c.ka,h),j(c.ka,c.i),c.h.i.length=0,H(c.i),c.i.length=0),c.l.ra()}}function Jc(c,h,g){var v=g instanceof Qn?hn(g):new Qn(g);if(v.g!="")h&&(v.g=h+"."+v.g),Bi(v,v.s);else{var N=l.location;v=N.protocol,h=h?h+"."+N.hostname:N.hostname,N=+N.port;var V=new Qn(null);v&&tn(V,v),h&&(V.g=h),N&&Bi(V,N),g&&(V.l=g),v=V}return g=c.D,h=c.ya,g&&h&&De(v,g,h),De(v,"VER",c.la),zr(c,v),v}function $s(c,h,g){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Qe(new cn({eb:g})):new Qe(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function oo(){}n=oo.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ns(){}ns.prototype.g=function(c,h){return new Bt(c,h)};function Bt(c,h){Ot.call(this),this.g=new Du(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!ae(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!ae(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new er(this)}U(Bt,Ot),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Jo(this.g)},Bt.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=La(c),c=g);h.i.push(new za(h.Ya++,c)),h.G==3&&es(h)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,Bt.aa.N.call(this)};function Ti(c){Fa.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let g in h){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}U(Ti,Fa);function Xc(){Va.call(this),this.status=1}U(Xc,Va);function er(c){this.g=c}U(er,oo),er.prototype.ua=function(){Dt(this.g,"a")},er.prototype.ta=function(c){Dt(this.g,new Ti(c))},er.prototype.sa=function(c){Dt(this.g,new Xc)},er.prototype.ra=function(){Dt(this.g,"b")},ns.prototype.createWebChannel=ns.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,iS=Mc.createWebChannelTransport=function(){return new ns},nS=Mc.getStatEventTarget=function(){return eo()},tS=Mc.Event=Fi,Ib=Mc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,Im=Mc.ErrorCode=Yi,Hc.COMPLETE="complete",eS=Mc.EventType=Hc,hu.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,Ef=Mc.WebChannel=hu,XT=Mc.FetchXmlHttpFactory=cn,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,JT=Mc.XhrIo=Qe}).apply(typeof Eb<"u"?Eb:typeof self<"u"?self:typeof window<"u"?window:{});var Y5="@firebase/firestore";var ur=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");var Hf="10.12.3";var Md=new Rl("@firebase/firestore");function Pm(){return Md.logLevel}function Ae(n,...e){if(Md.logLevel<=St.DEBUG){let t=e.map(BM);Md.debug(`Firestore (${Hf}): ${n}`,...t)}}function Ac(n,...e){if(Md.logLevel<=St.ERROR){let t=e.map(BM);Md.error(`Firestore (${Hf}): ${n}`,...t)}}function km(n,...e){if(Md.logLevel<=St.WARN){let t=e.map(BM);Md.warn(`Firestore (${Hf}): ${n}`,...t)}}function BM(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function dt(n="Unexpected state"){let e=`FIRESTORE (${Hf}) INTERNAL ASSERTION FAILED: `+n;throw Ac(e),new Error(e)}function ui(n,e){n||dt()}function Gt(n,e){return n}var ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ze=class extends Lo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var zl=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var uS=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dS=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ur.UNAUTHENTICATED))}shutdown(){}};var hS=class{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),o=new zl;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zl,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>O(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},l=u=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?l(u):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zl)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ui(typeof i.accessToken=="string"),new uS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ui(e===null||typeof e=="string"),new ur(e)}},fS=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=ur.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},pS=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new fS(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}},gS=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mS=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=o=>{o.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,Ae("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ui(typeof t.token=="string"),this.R=t.token,new gS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function bee(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var _S=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=bee(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%e.length))}return i}};function on(n,e){return n<e?-1:n>e?1:0}function Df(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var Vo=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ze(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ze(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ze(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?on(this.nanoseconds,e.nanoseconds):on(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ht=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Vo(0,0))}static max(){return new n(new Vo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Mb=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&dt(),i===void 0?i=e.length-t:i>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=e.get(r),s=t.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ai=class n extends Mb{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Ze(ye.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},wee=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ps=class n extends Mb{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return wee.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new Ze(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},s=!1;for(;r<e.length;){let l=e[r];if(l==="\\"){if(r+1===e.length)throw new Ze(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ze(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(s=!s,r++):l!=="."||s?(i+=l,r++):(o(),r++)}if(o(),s)throw new Ze(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var et=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ai.fromString(e))}static fromName(e){return new n(Ai.fromString(e).popFirst(5))}static empty(){return new n(Ai.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ai.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ai.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ai(e.slice()))}};var vS=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};vS.UNKNOWN_ID=-1;function xee(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ht.fromTimestamp(i===1e9?new Vo(t+1,0):new Vo(t,i));return new Od(r,et.empty(),e)}function Cee(n){return new Od(n.readTime,n.key,-1)}var Od=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(ht.min(),et.empty(),-1)}static max(){return new n(ht.max(),et.empty(),-1)}};function Eee(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=et.comparator(n.documentKey,e.documentKey),t!==0?t:on(n.largestBatchId,e.largestBatchId))}var Iee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function UM(n){return O(this,null,function*(){if(n.code!==ye.FAILED_PRECONDITION||n.message!==Iee)throw n;Ae("LocalStore","Unexpectedly lost primary lease")})}var de=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,s=!1;e.forEach(l=>{++r,l.next(()=>{++o,s&&o===r&&t()},u=>i(u))}),s=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,s=new Array(o),l=0;for(let u=0;u<o;u++){let f=u;t(e[f]).next(m=>{s[f]=m,++l,l===o&&i(s)},m=>r(m))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};function Pee(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qm(n){return n.name==="IndexedDbTransactionError"}var P3=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ew(n){return n==null}function Ob(n){return n===0&&1/n==-1/0}var Tee=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],FMe=[...Tee,"documentOverlays"],See=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Mee=See,VMe=[...Mee,"indexConfiguration","indexState","indexEntries"];function Z5(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tw(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Oee(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Gn=class n{constructor(e,t){this.comparator=e,this.root=t||wa.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wa.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sf(this.root,e,this.comparator,!0)}},Sf=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},wa=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();let e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}};wa.EMPTY=null,wa.RED=!0,wa.BLACK=!1;wa.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(e,t,i,r,o){return this}insert(e,t,i){return new wa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var dr=class n{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ab(this.data.getIterator())}getIteratorFrom(e){return new Ab(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ab=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Id=class n{constructor(e){this.fields=e,e.sort(Ps.comparator)}static empty(){return new n([])}unionWith(e){let t=new dr(Ps.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Df(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Db=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Or=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Db("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return on(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Or.EMPTY_BYTE_STRING=new Or("");var Aee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dc(n){if(ui(!!n),typeof n=="string"){let e=0,t=Aee.exec(n);if(ui(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ln(n.seconds),nanos:Ln(n.nanos)}}function Ln(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jl(n){return typeof n=="string"?Or.fromBase64String(n):Or.fromUint8Array(n)}function zM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function jM(n){let e=n.mapValue.fields.__previous_value__;return zM(e)?jM(e):e}function Rm(n){let e=Dc(n.mapValue.fields.__local_write_time__.timestampValue);return new Vo(e.seconds,e.nanos)}var bS=class{constructor(e,t,i,r,o,s,l,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f}},kb=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Pb={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ad(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zM(n)?4:T3(n)?9007199254740991:10:dt()}function Ca(n,e){if(n===e)return!0;let t=Ad(n);if(t!==Ad(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rm(n).isEqual(Rm(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Dc(r.timestampValue),l=Dc(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return jl(r.bytesValue).isEqual(jl(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return Ln(r.geoPointValue.latitude)===Ln(o.geoPointValue.latitude)&&Ln(r.geoPointValue.longitude)===Ln(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Ln(r.integerValue)===Ln(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Ln(r.doubleValue),l=Ln(o.doubleValue);return s===l?Ob(s)===Ob(l):isNaN(s)&&isNaN(l)}return!1})(n,e);case 9:return Df(n.arrayValue.values||[],e.arrayValue.values||[],Ca);case 10:return(function(r,o){let s=r.mapValue.fields||{},l=o.mapValue.fields||{};if(Z5(s)!==Z5(l))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!Ca(s[u],l[u])))return!1;return!0})(n,e);default:return dt()}}function Nm(n,e){return(n.values||[]).find(t=>Ca(t,e))!==void 0}function kf(n,e){if(n===e)return 0;let t=Ad(n),i=Ad(e);if(t!==i)return on(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return on(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let l=Ln(o.integerValue||o.doubleValue),u=Ln(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(n,e);case 3:return J5(n.timestampValue,e.timestampValue);case 4:return J5(Rm(n),Rm(e));case 5:return on(n.stringValue,e.stringValue);case 6:return(function(o,s){let l=jl(o),u=jl(s);return l.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let l=o.split("/"),u=s.split("/");for(let f=0;f<l.length&&f<u.length;f++){let m=on(l[f],u[f]);if(m!==0)return m}return on(l.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let l=on(Ln(o.latitude),Ln(s.latitude));return l!==0?l:on(Ln(o.longitude),Ln(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return(function(o,s){let l=o.values||[],u=s.values||[];for(let f=0;f<l.length&&f<u.length;++f){let m=kf(l[f],u[f]);if(m)return m}return on(l.length,u.length)})(n.arrayValue,e.arrayValue);case 10:return(function(o,s){if(o===Pb.mapValue&&s===Pb.mapValue)return 0;if(o===Pb.mapValue)return 1;if(s===Pb.mapValue)return-1;let l=o.fields||{},u=Object.keys(l),f=s.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let y=0;y<u.length&&y<m.length;++y){let C=on(u[y],m[y]);if(C!==0)return C;let T=kf(l[u[y]],f[m[y]]);if(T!==0)return T}return on(u.length,m.length)})(n.mapValue,e.mapValue);default:throw dt()}}function J5(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return on(n,e);let t=Dc(n),i=Dc(e),r=on(t.seconds,i.seconds);return r!==0?r:on(t.nanos,i.nanos)}function Rf(n){return wS(n)}function wS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=Dc(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return jl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return et.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=wS(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${wS(t.fields[s])}`;return r+"}"})(n.mapValue):dt()}function xS(n){return!!n&&"integerValue"in n}function $M(n){return!!n&&"arrayValue"in n}function X5(n){return!!n&&"nullValue"in n}function e3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rS(n){return!!n&&"mapValue"in n}function Sm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return tw(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Sm(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function T3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Oc=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!rS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sm(t)}setAll(e){let t=Ps.emptyPath(),i={},r=[];e.forEach((s,l)=>{if(!t.isImmediateParentOf(l)){let u=this.getFieldsMap(t);this.applyChanges(u,i,r),i={},r=[],t=l.popLast()}s?i[l.lastSegment()]=Sm(s):r.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());rS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];rS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){tw(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(Sm(this.value))}};var Ts=class n{constructor(e,t,i,r,o,s,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new n(e,0,ht.min(),ht.min(),ht.min(),Oc.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,ht.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,ht.min(),ht.min(),Oc.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ht.min(),ht.min(),Oc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Nf=class{constructor(e,t){this.position=e,this.inclusive=t}};function t3(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],s=n.position[r];if(o.field.isKeyField()?i=et.comparator(et.fromName(s.referenceValue),t.key):i=kf(s,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function n3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ca(n.position[t],e.position[t]))return!1;return!0}var Lf=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Dee(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Rb=class{},Ci=class n extends Rb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new ES(e,t,i):t==="array-contains"?new TS(e,i):t==="in"?new SS(e,i):t==="not-in"?new MS(e,i):t==="array-contains-any"?new OS(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new IS(e,i):new PS(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(kf(t,this.value)):t!==null&&Ad(this.value)===Ad(t)&&this.matchesComparison(kf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ea=class n extends Rb{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return S3(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function S3(n){return n.op==="and"}function M3(n){return kee(n)&&S3(n)}function kee(n){for(let e of n.filters)if(e instanceof Ea)return!1;return!0}function CS(n){if(n instanceof Ci)return n.field.canonicalString()+n.op.toString()+Rf(n.value);if(M3(n))return n.filters.map(e=>CS(e)).join(",");{let e=n.filters.map(t=>CS(t)).join(",");return`${n.op}(${e})`}}function O3(n,e){return n instanceof Ci?(function(i,r){return r instanceof Ci&&i.op===r.op&&i.field.isEqual(r.field)&&Ca(i.value,r.value)})(n,e):n instanceof Ea?(function(i,r){return r instanceof Ea&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,l)=>o&&O3(s,r.filters[l]),!0):!1})(n,e):void dt()}function A3(n){return n instanceof Ci?(function(t){return`${t.field.canonicalString()} ${t.op} ${Rf(t.value)}`})(n):n instanceof Ea?(function(t){return t.op.toString()+" {"+t.getFilters().map(A3).join(" ,")+"}"})(n):"Filter"}var ES=class extends Ci{constructor(e,t,i){super(e,t,i),this.key=et.fromName(i.referenceValue)}matches(e){let t=et.comparator(e.key,this.key);return this.matchesComparison(t)}},IS=class extends Ci{constructor(e,t){super(e,"in",t),this.keys=D3("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},PS=class extends Ci{constructor(e,t){super(e,"not-in",t),this.keys=D3("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function D3(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>et.fromName(i.referenceValue))}var TS=class extends Ci{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return $M(t)&&Nm(t.arrayValue,this.value)}},SS=class extends Ci{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Nm(this.value.arrayValue,t)}},MS=class extends Ci{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Nm(this.value.arrayValue,t)}},OS=class extends Ci{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!$M(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Nm(this.value.arrayValue,i))}};var AS=class{constructor(e,t=null,i=[],r=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}};function i3(n,e=null,t=[],i=[],r=null,o=null,s=null){return new AS(n,e,t,i,r,o,s)}function HM(n){let e=Gt(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>CS(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(o){return o.field.canonicalString()+o.dir})(i)).join(","),ew(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Rf(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Rf(i)).join(",")),e.ue=t}return e.ue}function qM(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Dee(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!O3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!n3(n.startAt,e.startAt)&&n3(n.endAt,e.endAt)}function DS(n){return et.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ff=class{constructor(e,t=null,i=[],r=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Ree(n,e,t,i,r,o,s,l){return new Ff(n,e,t,i,r,o,s,l)}function GM(n){return new Ff(n)}function r3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Nee(n){return n.collectionGroup!==null}function Mm(n){let e=Gt(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new dr(Ps.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Lf(o,i))}),t.has(Ps.keyField().canonicalString())||e.ce.push(new Lf(Ps.keyField(),i))}return e.ce}function xa(n){let e=Gt(n);return e.le||(e.le=Lee(e,Mm(n))),e.le}function Lee(n,e){if(n.limitType==="F")return i3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new Lf(r.field,o)});let t=n.endAt?new Nf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Nf(n.startAt.position,n.startAt.inclusive):null;return i3(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function kS(n,e,t){return new Ff(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nw(n,e){return qM(xa(n),xa(e))&&n.limitType===e.limitType}function k3(n){return`${HM(xa(n))}|lt:${n.limitType}`}function If(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>A3(r)).join(", ")}]`),ew(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Rf(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Rf(r)).join(",")),`Target(${i})`})(xa(n))}; limitType=${n.limitType})`}function iw(n,e){return e.isFoundDocument()&&(function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):et.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(let o of Mm(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(s,l,u){let f=t3(s,l,u);return s.inclusive?f<=0:f<0})(i.startAt,Mm(i),r)||i.endAt&&!(function(s,l,u){let f=t3(s,l,u);return s.inclusive?f>=0:f>0})(i.endAt,Mm(i),r))})(n,e)}function Fee(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function R3(n){return(e,t)=>{let i=!1;for(let r of Mm(n)){let o=Vee(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function Vee(n,e,t){let i=n.field.isKeyField()?et.comparator(e.key,t.key):(function(o,s,l){let u=s.data.field(o),f=l.data.field(o);return u!==null&&f!==null?kf(u,f):dt()})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return dt()}}var $l=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tw(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return Oee(this.inner)}size(){return this.innerSize}};var Bee=new Gn(et.comparator);function Hl(){return Bee}var N3=new Gn(et.comparator);function Tm(...n){let e=N3;for(let t of n)e=e.insert(t.key,t);return e}function Uee(n){let e=N3;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Pd(){return Om()}function L3(){return Om()}function Om(){return new $l(n=>n.toString(),(n,e)=>n.isEqual(e))}var UMe=new Gn(et.comparator),zee=new dr(et.comparator);function qt(...n){let e=zee;for(let t of n)e=e.add(t);return e}var jee=new dr(on);function $ee(){return jee}function Hee(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ob(e)?"-0":e}}function qee(n){return{integerValue:""+n}}var Vf=class{constructor(){this._=void 0}};function Gee(n,e,t){return n instanceof Lm?(function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&zM(o)&&(o=jM(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}})(t,e):n instanceof Bf?F3(n,e):n instanceof Uf?V3(n,e):(function(r,o){let s=Kee(r,o),l=o3(s)+o3(r.Pe);return xS(s)&&xS(r.Pe)?qee(l):Hee(r.serializer,l)})(n,e)}function Wee(n,e,t){return n instanceof Bf?F3(n,e):n instanceof Uf?V3(n,e):t}function Kee(n,e){return n instanceof Fm?(function(i){return xS(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}var Lm=class extends Vf{},Bf=class extends Vf{constructor(e){super(),this.elements=e}};function F3(n,e){let t=B3(e);for(let i of n.elements)t.some(r=>Ca(r,i))||t.push(i);return{arrayValue:{values:t}}}var Uf=class extends Vf{constructor(e){super(),this.elements=e}};function V3(n,e){let t=B3(e);for(let i of n.elements)t=t.filter(r=>!Ca(r,i));return{arrayValue:{values:t}}}var Fm=class extends Vf{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function o3(n){return Ln(n.integerValue||n.doubleValue)}function B3(n){return $M(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Qee(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Bf&&r instanceof Bf||i instanceof Uf&&r instanceof Uf?Df(i.elements,r.elements,Ca):i instanceof Fm&&r instanceof Fm?Ca(i.Pe,r.Pe):i instanceof Lm&&r instanceof Lm})(n.transform,e.transform)}var Am=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Sb(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Vm=class{};function U3(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new RS(n.key,Am.none()):new Bm(n.key,n.data,Am.none());{let t=n.data,i=Oc.empty(),r=new dr(Ps.comparator);for(let o of e.fields)if(!r.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new zf(n.key,i,new Id(r.toArray()),Am.none())}}function Yee(n,e,t){n instanceof Bm?(function(r,o,s){let l=r.value.clone(),u=a3(r.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(n,e,t):n instanceof zf?(function(r,o,s){if(!Sb(r.precondition,o))return void o.convertToUnknownDocument(s.version);let l=a3(r.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(z3(r)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Dm(n,e,t,i){return n instanceof Bm?(function(o,s,l,u){if(!Sb(o.precondition,s))return l;let f=o.value.clone(),m=c3(o.fieldTransforms,u,s);return f.setAll(m),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof zf?(function(o,s,l,u){if(!Sb(o.precondition,s))return l;let f=c3(o.fieldTransforms,u,s),m=s.data;return m.setAll(z3(o)),m.setAll(f),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))})(n,e,t,i):(function(o,s,l){return Sb(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(n,e,t)}function s3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Df(i,r,(o,s)=>Qee(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bm=class extends Vm{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},zf=class extends Vm{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function z3(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function a3(n,e,t){let i=new Map;ui(n.length===t.length);for(let r=0;r<t.length;r++){let o=n[r],s=o.transform,l=e.data.field(o.field);i.set(o.field,Wee(s,l,t[r]))}return i}function c3(n,e,t){let i=new Map;for(let r of n){let o=r.transform,s=t.data.field(r.field);i.set(r.field,Gee(o,s,e))}return i}var RS=class extends Vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var NS=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&Yee(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Dm(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Dm(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=L3();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,l=this.applyToLocalView(s,o.mutatedFields);l=t.has(r.key)?null:l;let u=U3(s,l);u!==null&&i.set(r.key,u),s.isValidDocument()||s.convertToNoDocument(ht.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&Df(this.mutations,e.mutations,(t,i)=>s3(t,i))&&Df(this.baseMutations,e.baseMutations,(t,i)=>s3(t,i))}};var LS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var FS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ci,Nt;function j3(n){if(n===void 0)return Ac("GRPC error has no .code"),ye.UNKNOWN;switch(n){case ci.OK:return ye.OK;case ci.CANCELLED:return ye.CANCELLED;case ci.UNKNOWN:return ye.UNKNOWN;case ci.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case ci.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case ci.INTERNAL:return ye.INTERNAL;case ci.UNAVAILABLE:return ye.UNAVAILABLE;case ci.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case ci.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case ci.NOT_FOUND:return ye.NOT_FOUND;case ci.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case ci.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case ci.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case ci.ABORTED:return ye.ABORTED;case ci.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case ci.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case ci.DATA_LOSS:return ye.DATA_LOSS;default:return dt()}}(Nt=ci||(ci={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";var l3=null;function Zee(){return new TextEncoder}var Jee=new Ul([4294967295,4294967295],0);function u3(n){let e=Zee().encode(n),t=new ZT;return t.update(e),new Uint8Array(t.digest())}function d3(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ul([t,i],0),new Ul([r,o],0)]}var VS=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Td(`Invalid padding: ${t}`);if(i<0)throw new Td(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Td(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Td(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ul.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Ul.fromNumber(i)));return r.compare(Jee)===1&&(r=new Ul([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=u3(e),[i,r]=d3(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,r,t);return i.forEach(l=>s.insert(l)),s}insert(e){if(this.Ie===0)return;let t=u3(e),[i,r]=d3(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},Td=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Nb=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Um.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(ht.min(),r,new Gn(on),Hl(),qt())}},Um=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,qt(),qt(),qt())}};var Mf=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},Lb=class{constructor(e,t){this.targetId=e,this.me=t}},Fb=class{constructor(e,t,i=Or.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Vb=class{constructor(){this.fe=0,this.ge=f3(),this.pe=Or.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=qt(),t=qt(),i=qt();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:dt()}}),new Um(this.pe,this.ye,e,t,i)}ve(){this.we=!1,this.ge=f3()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ui(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},BS=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hl(),this.qe=h3(),this.Qe=new Gn(on)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let o=r.target;if(DS(o))if(i===0){let s=new et(o.path);this.Ue(t,s,Ts.newNoDocument(s,ht.min()))}else ui(i===1);else{let s=this.Ye(t);if(s!==i){let l=this.Ze(e),u=l?this.Xe(l,e,s):1;if(u!==0){this.je(t);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}l3?.et((function(m,y,C,T,U){var H,j,X,ae,le,he;let ct={localCacheCount:m,existenceFilterCount:y.count,databaseId:C.database,projectId:C.projectId},Se=y.unchangedNames;return Se&&(ct.bloomFilter={applied:U===0,hashCount:(H=Se?.hashCount)!==null&&H!==void 0?H:0,bitmapLength:(ae=(X=(j=Se?.bits)===null||j===void 0?void 0:j.bitmap)===null||X===void 0?void 0:X.length)!==null&&ae!==void 0?ae:0,padding:(he=(le=Se?.bits)===null||le===void 0?void 0:le.padding)!==null&&he!==void 0?he:0,mightContain:k=>{var E;return(E=T?.mightContain(k))!==null&&E!==void 0&&E}}),ct})(s,e.me,this.Le.tt(),l,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,s,l;try{s=jl(i).toUint8Array()}catch(u){if(u instanceof Db)return km("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new VS(s,r,o)}catch(u){return km(u instanceof Td?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let s=this.Le.tt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(t,o,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let l=this.Je(s);if(l){if(o.current&&DS(l.target)){let u=new et(l.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Ts.newNoDocument(u,e))}o.be&&(t.set(s,o.Ce()),o.ve())}});let i=qt();this.qe.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{let f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new Nb(e,t,this.Qe,this.ke,i);return this.ke=Hl(),this.qe=h3(),this.Qe=new Gn(on),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Vb,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new dr(on),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vb),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function h3(){return new Gn(et.comparator)}function f3(){return new Gn(et.comparator)}var Xee={asc:"ASCENDING",desc:"DESCENDING"},ete={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tte={and:"AND",or:"OR"},US=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function zS(n,e){return n.useProto3Json||ew(e)?e:{value:e}}function nte(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ite(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Of(n){return ui(!!n),ht.fromTimestamp((function(t){let i=Dc(t);return new Vo(i.seconds,i.nanos)})(n))}function rte(n,e){return jS(n,e).canonicalString()}function jS(n,e){let t=(function(r){return new Ai(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function $3(n){let e=Ai.fromString(n);return ui(K3(e)),e}function oS(n,e){let t=$3(e);if(t.get(1)!==n.databaseId.projectId)throw new Ze(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ze(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(q3(t))}function H3(n,e){return rte(n.databaseId,e)}function ote(n){let e=$3(n);return e.length===4?Ai.emptyPath():q3(e)}function p3(n){return new Ai(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function q3(n){return ui(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ste(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:dt()})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,m){return f.useProto3Json?(ui(m===void 0||typeof m=="string"),Or.fromBase64String(m||"")):(ui(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Or.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(f){let m=f.code===void 0?ye.UNKNOWN:j3(f.code);return new Ze(m,f.message||"")})(s);t=new Fb(i,r,o,l||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=oS(n,i.document.name),o=Of(i.document.updateTime),s=i.document.createTime?Of(i.document.createTime):ht.min(),l=new Oc({mapValue:{fields:i.document.fields}}),u=Ts.newFoundDocument(r,o,s,l),f=i.targetIds||[],m=i.removedTargetIds||[];t=new Mf(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=oS(n,i.document),o=i.readTime?Of(i.readTime):ht.min(),s=Ts.newNoDocument(r,o),l=i.removedTargetIds||[];t=new Mf([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=oS(n,i.document),o=i.removedTargetIds||[];t=new Mf([],o,r,null)}else{if(!("filter"in e))return dt();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new FS(r,o),l=i.targetId;t=new Lb(l,s)}}return t}function ate(n,e){return{documents:[H3(n,e.path)]}}function cte(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=H3(n,r);let o=(function(f){if(f.length!==0)return W3(Ea.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(f){if(f.length!==0)return f.map(m=>(function(C){return{field:Pf(C.field),direction:dte(C.dir)}})(m))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let l=zS(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{_t:t,parent:r}}function lte(n){let e=ote(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){ui(i===1);let m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(y){let C=G3(y);return C instanceof Ea&&M3(C)?C.getFilters():[C]})(t.where));let s=[];t.orderBy&&(s=(function(y){return y.map(C=>(function(U){return new Lf(Tf(U.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(C))})(t.orderBy));let l=null;t.limit&&(l=(function(y){let C;return C=typeof y=="object"?y.value:y,ew(C)?null:C})(t.limit));let u=null;t.startAt&&(u=(function(y){let C=!!y.before,T=y.values||[];return new Nf(T,C)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){let C=!y.before,T=y.values||[];return new Nf(T,C)})(t.endAt)),Ree(e,r,s,o,l,"F",u,f)}function ute(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function G3(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Tf(t.unaryFilter.field);return Ci.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Tf(t.unaryFilter.field);return Ci.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Tf(t.unaryFilter.field);return Ci.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Tf(t.unaryFilter.field);return Ci.create(s,"!=",{nullValue:"NULL_VALUE"});default:return dt()}})(n):n.fieldFilter!==void 0?(function(t){return Ci.create(Tf(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ea.create(t.compositeFilter.filters.map(i=>G3(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return dt()}})(t.compositeFilter.op))})(n):dt()}function dte(n){return Xee[n]}function hte(n){return ete[n]}function fte(n){return tte[n]}function Pf(n){return{fieldPath:n.canonicalString()}}function Tf(n){return Ps.fromServerFormat(n.fieldPath)}function W3(n){return n instanceof Ci?(function(t){if(t.op==="=="){if(e3(t.value))return{unaryFilter:{field:Pf(t.field),op:"IS_NAN"}};if(X5(t.value))return{unaryFilter:{field:Pf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(e3(t.value))return{unaryFilter:{field:Pf(t.field),op:"IS_NOT_NAN"}};if(X5(t.value))return{unaryFilter:{field:Pf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pf(t.field),op:hte(t.op),value:t.value}}})(n):n instanceof Ea?(function(t){let i=t.getFilters().map(r=>W3(r));return i.length===1?i[0]:{compositeFilter:{op:fte(t.op),filters:i}}})(n):dt()}function K3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zm=class n{constructor(e,t,i,r,o=ht.min(),s=ht.min(),l=Or.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $S=class{constructor(e){this.ct=e}};function pte(n){let e=lte({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kS(e,e.limit,"L"):e}var Bb=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Ln(e.integerValue));else if("doubleValue"in e){let i=Ln(e.doubleValue);isNaN(i)?this.Et(t,13):(this.Et(t,15),Ob(i)?t.dt(0):t.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(t,20),typeof i=="string"&&(i=Dc(i)),t.At(`${i.seconds||""}`),t.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(jl(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?T3(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):dt()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let i=e.fields||{};this.Et(t,55);for(let r of Object.keys(i))this.Rt(r,t),this.It(i[r],t)}wt(e,t){let i=e.values||[];this.Et(t,50);for(let r of i)this.It(r,t)}gt(e,t){this.Et(t,37),et.fromName(e).path.forEach(i=>{this.Et(t,60),this.St(i,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};Bb.bt=new Bb;var HS=class{constructor(){this._n=new qS}addToCollectionParentIndex(e,t){return this._n.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Od.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(Od.min())}updateCollectionGroup(e,t,i){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}},qS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new dr(Ai.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new dr(Ai.comparator)).toArray()}};var zMe=new Uint8Array(0);var ba=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ba.DEFAULT_COLLECTION_PERCENTILE=10,ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ba.DEFAULT=new ba(41943040,ba.DEFAULT_COLLECTION_PERCENTILE,ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ba.DISABLED=new ba(-1,0,0);var jm=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var GS=class{constructor(){this.changes=new $l(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ts.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?de.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var WS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var KS=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Dm(i.mutation,r,Id.empty(),Vo.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,qt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=qt()){let r=Pd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let s=Tm();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let i=Pd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,qt()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,l)=>{t.set(s,l)})})}computeViews(e,t,i,r){let o=Hl(),s=Om(),l=(function(){return Om()})();return t.forEach((u,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof zf)?o=o.insert(f.key,f):m!==void 0?(s.set(f.key,m.mutation.getFieldMask()),Dm(m.mutation,f,m.mutation.getFieldMask(),Vo.now())):s.set(f.key,Id.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,m)=>s.set(f,m)),t.forEach((f,m)=>{var y;return l.set(f,new WS(m,(y=s.get(f))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,t){let i=Om(),r=new Gn((s,l)=>s-l),o=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let l of s)l.keys().forEach(u=>{let f=t.get(u);if(f===null)return;let m=i.get(u)||Id.empty();m=l.applyToLocalView(f,m),i.set(u,m);let y=(r.get(l.batchId)||qt()).add(u);r=r.insert(l.batchId,y)})}).next(()=>{let s=[],l=r.getReverseIterator();for(;l.hasNext();){let u=l.getNext(),f=u.key,m=u.value,y=L3();m.forEach(C=>{if(!o.has(C)){let T=U3(t.get(C),i.get(C));T!==null&&y.set(C,T),o=o.add(C)}}),s.push(this.documentOverlayCache.saveOverlays(e,f,y))}return de.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(s){return et.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Nee(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):de.resolve(Pd()),l=-1,u=o;return s.next(f=>de.forEach(f,(m,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),o.get(m)?de.resolve():this.remoteDocumentCache.getEntry(e,m).next(C=>{u=u.insert(m,C)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,qt())).next(m=>({batchId:l,changes:Uee(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(i=>{let r=Tm();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,s=Tm();return this.indexManager.getCollectionParents(e,o).next(l=>de.forEach(l,u=>{let f=(function(y,C){return new Ff(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((y,C)=>{s=s.insert(y,C)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(s=>{o.forEach((u,f)=>{let m=f.getKey();s.get(m)===null&&(s=s.insert(m,Ts.newInvalidDocument(m)))});let l=Tm();return s.forEach((u,f)=>{let m=o.get(u);m!==void 0&&Dm(m.mutation,f,Id.empty(),Vo.now()),iw(t,f)&&(l=l.insert(u,f))}),l})}};var QS=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return de.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Of(r.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,(function(r){return{name:r.name,query:pte(r.bundledQuery),readTime:Of(r.readTime)}})(t)),de.resolve()}};var YS=class{constructor(){this.overlays=new Gn(et.comparator),this.hr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Pd();return de.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.ht(e,t,o)}),de.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),de.resolve()}getOverlaysForCollection(e,t,i){let r=Pd(),o=t.length+1,s=new et(t.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){let u=l.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return de.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Gn((f,m)=>f-m),s=this.overlays.getIterator();for(;s.hasNext();){let f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Pd(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let l=Pd(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=r)););return de.resolve(l)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new LS(t,i));let o=this.hr.get(t);o===void 0&&(o=qt(),this.hr.set(t,o)),this.hr.set(t,o.add(i.key))}};var $m=class{constructor(){this.Pr=new dr(li.Ir),this.Tr=new dr(li.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let i=new li(e,t);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Ar(new li(e,t))}Rr(e,t){e.forEach(i=>this.removeReference(i,t))}Vr(e){let t=new et(new Ai([])),i=new li(t,e),r=new li(t,e+1),o=[];return this.Tr.forEachInRange([i,r],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new et(new Ai([])),i=new li(t,e),r=new li(t,e+1),o=qt();return this.Tr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new li(e,0),i=this.Pr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},li=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return et.comparator(e.key,t.key)||on(e.pr,t.pr)}static Er(e,t){return on(e.pr,t.pr)||et.comparator(e.key,t.key)}};var ZS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new dr(li.Ir)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new NS(o,t,i,r);this.mutationQueue.push(s);for(let l of r)this.wr=this.wr.add(new li(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return de.resolve(s)}lookupMutationBatch(e,t){return de.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.br(i),o=r<0?0:r;return de.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new li(t,0),r=new li(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],s=>{let l=this.Sr(s.pr);o.push(l)}),de.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new dr(on);return t.forEach(r=>{let o=new li(r,0),s=new li(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],l=>{i=i.add(l.pr)})}),de.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;et.isDocumentKey(o)||(o=o.child(""));let s=new li(new et(o),0),l=new dr(on);return this.wr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(u.pr)),!0)},s),de.resolve(this.Dr(l))}Dr(e){let t=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){ui(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return de.forEach(t.mutations,r=>{let o=new li(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,t){let i=new li(t,0),r=this.wr.firstAfterOrEqual(i);return de.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var JS=class{constructor(e){this.vr=e,this.docs=(function(){return new Gn(et.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return de.resolve(i?i.document.mutableCopy():Ts.newInvalidDocument(t))}getEntries(e,t){let i=Hl();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Ts.newInvalidDocument(r))}),de.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Hl(),s=t.path,l=new et(s.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){let{key:f,value:{document:m}}=u.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||Eee(Cee(m),i)<=0||(r.has(m.key)||iw(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,i,r){dt()}Fr(e,t){return de.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new XS(this)}getSize(e){return de.resolve(this.size)}},XS=class extends GS{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),de.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var eM=class{constructor(e){this.persistence=e,this.Mr=new $l(t=>HM(t),qM),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.Or=0,this.Nr=new $m,this.targetCount=0,this.Lr=jm.Nn()}forEachTarget(e,t){return this.Mr.forEach((i,r)=>t(r)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Or&&(this.Or=t),de.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new jm(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.qn(t),de.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.Mr.forEach((s,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),de.waitFor(o).next(()=>r)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){let i=this.Mr.get(t)||null;return de.resolve(i)}addMatchingKeys(e,t,i){return this.Nr.dr(t,i),de.resolve()}removeMatchingKeys(e,t,i){this.Nr.Rr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),de.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),de.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Nr.gr(t);return de.resolve(i)}containsKey(e,t){return de.resolve(this.Nr.containsKey(t))}};var tM=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new P3(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new eM(this),this.indexManager=new HS,this.remoteDocumentCache=(function(r){return new JS(r)})(i=>this.referenceDelegate.Kr(i)),this.serializer=new $S(t),this.$r=new QS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new ZS(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,i){Ae("MemoryPersistence","Starting transaction:",e);let r=new nM(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,t){return de.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}},nM=class extends yS{constructor(e){super(),this.currentSequenceNumber=e}},iM=class n{constructor(e){this.persistence=e,this.zr=new $m,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw dt()}addReference(e,t,i){return this.zr.addReference(i,t),this.Jr.delete(i.toString()),de.resolve()}removeReference(e,t,i){return this.zr.removeReference(i,t),this.Jr.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),de.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Jr,i=>{let r=et.fromPath(i);return this.Yr(e,r).next(o=>{o||t.removeEntry(r,ht.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(i=>{i?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return de.or([()=>de.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var rM=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.qi=i,this.Qi=r}static Ki(e,t){let i=qt(),r=qt();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var oM=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var sM=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(function(){return fV()?8:Pee(_o())>0?6:4})()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new oM;return this.Ji(e,t,s).next(l=>{if(o.result=l,this.Ui)return this.Yi(e,t,s,l.size)})}).next(()=>o.result)}Yi(e,t,i,r){return i.documentReadCount<this.Wi?(Pm()<=St.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",If(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),de.resolve()):(Pm()<=St.DEBUG&&Ae("QueryEngine","Query:",If(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Pm()<=St.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",If(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xa(t))):de.resolve())}ji(e,t){if(r3(t))return de.resolve(null);let i=xa(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=kS(t,null,"F"),i=xa(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=qt(...o);return this.zi.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.Zi(t,l);return this.Xi(t,f,s,u.readTime)?this.ji(e,kS(t,null,"F")):this.es(e,f,t,u)}))})))}Hi(e,t,i,r){return r3(t)||r.isEqual(ht.min())?de.resolve(null):this.zi.getDocuments(e,i).next(o=>{let s=this.Zi(t,o);return this.Xi(t,s,i,r)?de.resolve(null):(Pm()<=St.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),If(t)),this.es(e,s,t,xee(r,-1)).next(l=>l))})}Zi(e,t){let i=new dr(R3(e));return t.forEach((r,o)=>{iw(e,o)&&(i=i.add(o))}),i}Xi(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,t,i){return Pm()<=St.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",If(t)),this.zi.getDocumentsMatchingQuery(e,t,Od.min(),i)}es(e,t,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var aM=class{constructor(e,t,i,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Gn(on),this.rs=new $l(o=>HM(o),qM),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KS(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function gte(n,e,t,i){return new aM(n,e,t,i)}function Q3(n,e){return O(this,null,function*(){let t=Gt(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t._s(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],l=[],u=qt();for(let f of r){s.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}for(let f of o){l.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}return t.localDocuments.getDocuments(i,u).next(f=>({us:f,removedBatchIds:s,addedBatchIds:l}))})})})}function Y3(n){let e=Gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function mte(n,e){let t=Gt(n),i=e.snapshotVersion,r=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.os.newChangeBuffer({trackRemovals:!0});r=t.ns;let l=[];e.targetChanges.forEach((m,y)=>{let C=r.get(y);if(!C)return;l.push(t.Qr.removeMatchingKeys(o,m.removedDocuments,y).next(()=>t.Qr.addMatchingKeys(o,m.addedDocuments,y)));let T=C.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(Or.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(y,T),(function(H,j,X){return H.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(C,T,m)&&l.push(t.Qr.updateTargetData(o,T))});let u=Hl(),f=qt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),l.push(_te(o,s,e.documentUpdates).next(m=>{u=m.cs,f=m.ls})),!i.isEqual(ht.min())){let m=t.Qr.getLastRemoteSnapshotVersion(o).next(y=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(m)}return de.waitFor(l).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(t.ns=r,o))}function _te(n,e,t){let i=qt(),r=qt();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let s=Hl();return t.forEach((l,u)=>{let f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(ht.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):Ae("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{cs:s,ls:r}})}function vte(n,e){let t=Gt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Qr.getTargetData(i,e).next(o=>o?(r=o,de.resolve(r)):t.Qr.allocateTargetId(i).next(s=>(r=new zm(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ns=t.ns.insert(i.targetId,i),t.rs.set(e,i.targetId)),i})}function cM(n,e,t){return O(this,null,function*(){let i=Gt(n),r=i.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!qm(s))throw s;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function g3(n,e,t){let i=Gt(n),r=ht.min(),o=qt();return i.persistence.runTransaction("Execute query","readwrite",s=>(function(u,f,m){let y=Gt(u),C=y.rs.get(m);return C!==void 0?de.resolve(y.ns.get(C)):y.Qr.getTargetData(f,m)})(i,s,xa(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>i.ts.getDocumentsMatchingQuery(s,e,t?r:ht.min(),t?o:qt())).next(l=>(yte(i,Fee(e),l),{documents:l,hs:o})))}function yte(n,e,t){let i=n.ss.get(e)||ht.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.ss.set(e,i)}var Ub=class{constructor(){this.activeTargetIds=$ee()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var lM=class{constructor(){this.no=new Ub,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,i){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ub,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var uM=class{io(e){}shutdown(){}};var zb=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Tb=null;function sS(){return Tb===null?Tb=(function(){return 268435456+Math.round(2147483648*Math.random())})():Tb++,"0x"+Tb.toString(16)}var bte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var dM=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var lr="WebChannelConnection",hM=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+t.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(t,i,r,o,s){let l=sS(),u=this.vo(t,i.toUriEncodedString());Ae("RestConnection",`Sending RPC '${t}' ${l}:`,u,r);let f={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(f,o,s),this.Mo(t,u,f,r).then(m=>(Ae("RestConnection",`Received RPC '${t}' ${l}: `,m),m),m=>{throw km("RestConnection",`RPC '${t}' ${l} failed with error: `,m,"url: ",u,"request:",r),m})}xo(t,i,r,o,s,l){return this.Co(t,i,r,o,s)}Fo(t,i,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hf})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>t[s]=o),r&&r.headers.forEach((o,s)=>t[s]=o)}vo(t,i){let r=bte[t];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,i,r){let o=sS();return new Promise((s,l)=>{let u=new JT;u.setWithCredentials(!0),u.listenOnce(eS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Im.NO_ERROR:let m=u.getResponseJson();Ae(lr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),s(m);break;case Im.TIMEOUT:Ae(lr,`RPC '${e}' ${o} timed out`),l(new Ze(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Im.HTTP_ERROR:let y=u.getStatus();if(Ae(lr,`RPC '${e}' ${o} failed with status:`,y,"response text:",u.getResponseText()),y>0){let C=u.getResponseJson();Array.isArray(C)&&(C=C[0]);let T=C?.error;if(T&&T.status&&T.message){let U=(function(j){let X=j.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(X)>=0?X:ye.UNKNOWN})(T.status);l(new Ze(U,T.message))}else l(new Ze(ye.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ze(ye.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ae(lr,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(r);Ae(lr,`RPC '${e}' ${o} sending request:`,r),u.send(t,"POST",f,i,15)})}Oo(e,t,i){let r=sS(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=iS(),l=nS(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.xmlHttpFactory=new XT({})),this.Fo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;let m=o.join("");Ae(lr,`Creating RPC '${e}' stream ${r}: ${m}`,u);let y=s.createWebChannel(m,u),C=!1,T=!1,U=new dM({lo:j=>{T?Ae(lr,`Not sending because RPC '${e}' stream ${r} is closed:`,j):(C||(Ae(lr,`Opening RPC '${e}' stream ${r} transport.`),y.open(),C=!0),Ae(lr,`RPC '${e}' stream ${r} sending:`,j),y.send(j))},ho:()=>y.close()}),H=(j,X,ae)=>{j.listen(X,le=>{try{ae(le)}catch(he){setTimeout(()=>{throw he},0)}})};return H(y,Ef.EventType.OPEN,()=>{T||(Ae(lr,`RPC '${e}' stream ${r} transport opened.`),U.mo())}),H(y,Ef.EventType.CLOSE,()=>{T||(T=!0,Ae(lr,`RPC '${e}' stream ${r} transport closed`),U.po())}),H(y,Ef.EventType.ERROR,j=>{T||(T=!0,km(lr,`RPC '${e}' stream ${r} transport errored:`,j),U.po(new Ze(ye.UNAVAILABLE,"The operation could not be completed")))}),H(y,Ef.EventType.MESSAGE,j=>{var X;if(!T){let ae=j.data[0];ui(!!ae);let le=ae,he=le.error||((X=le[0])===null||X===void 0?void 0:X.error);if(he){Ae(lr,`RPC '${e}' stream ${r} received error:`,he);let ct=he.status,Se=(function(P){let A=ci[P];if(A!==void 0)return j3(A)})(ct),k=he.message;Se===void 0&&(Se=ye.INTERNAL,k="Unknown error status: "+ct+" with message "+he.message),T=!0,U.po(new Ze(Se,k)),y.close()}else Ae(lr,`RPC '${e}' stream ${r} received:`,ae),U.yo(ae)}}),H(l,tS.STAT_EVENT,j=>{j.stat===Ib.PROXY?Ae(lr,`RPC '${e}' stream ${r} detected buffering proxy`):j.stat===Ib.NOPROXY&&Ae(lr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{U.fo()},0),U}};function aS(){return typeof document<"u"?document:null}function Z3(n){return new US(n,!0)}var jb=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=t,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-i);r>0&&Ae("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var fM=class{constructor(e,t,i,r,o,s,l,u){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new jb(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return O(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return O(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return O(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(Ac(t.toString()),Ac("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===t&&this.u_(i,r)},i=>{e(()=>{let r=new Ze(ye.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,t){let i=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>O(this,null,function*(){this.state=0,this.start()}))}c_(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pM=class extends fM{constructor(e,t,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=ste(this.serializer,e),i=(function(o){if(!("targetChange"in o))return ht.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ht.min():s.readTime?Of(s.readTime):ht.min()})(e);return this.listener.h_(t,i)}P_(e){let t={};t.database=p3(this.serializer),t.addTarget=(function(o,s){let l,u=s.target;if(l=DS(u)?{documents:ate(o,u)}:{query:cte(o,u)._t},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=ite(o,s.resumeToken);let f=zS(o,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(ht.min())>0){l.readTime=nte(o,s.snapshotVersion.toTimestamp());let f=zS(o,s.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);let i=ute(this.serializer,e);i&&(t.labels=i),this.i_(t)}I_(e){let t={};t.database=p3(this.serializer),t.removeTarget=e,this.i_(t)}};var gM=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Ze(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,jS(t,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ze(ye.UNKNOWN,o.toString())})}xo(e,t,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.xo(e,jS(t,i),r,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ze(ye.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},mM=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ac(t),this.y_=!1):Ae("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var _M=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{i.enqueueAndForget(()=>O(this,null,function*(){Wm(this)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(function(u){return O(this,null,function*(){let f=Gt(u);f.M_.add(4),yield Gm(f),f.N_.set("Unknown"),f.M_.delete(4),yield rw(f)})})(this))}))}),this.N_=new mM(i,r)}};function rw(n){return O(this,null,function*(){if(Wm(n))for(let e of n.x_)yield e(!0)})}function Gm(n){return O(this,null,function*(){for(let e of n.x_)yield e(!1)})}function J3(n,e){let t=Gt(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),YM(t)?QM(t):qf(t).Xo()&&KM(t,e))}function WM(n,e){let t=Gt(n),i=qf(t);t.F_.delete(e),i.Xo()&&X3(t,e),t.F_.size===0&&(i.Xo()?i.n_():Wm(t)&&t.N_.set("Unknown"))}function KM(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qf(n).P_(e)}function X3(n,e){n.L_.xe(e),qf(n).I_(e)}function QM(n){n.L_=new BS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),qf(n).start(),n.N_.w_()}function YM(n){return Wm(n)&&!qf(n).Zo()&&n.F_.size>0}function Wm(n){return Gt(n).M_.size===0}function e6(n){n.L_=void 0}function wte(n){return O(this,null,function*(){n.N_.set("Online")})}function xte(n){return O(this,null,function*(){n.F_.forEach((e,t)=>{KM(n,e)})})}function Cte(n,e){return O(this,null,function*(){e6(n),YM(n)?(n.N_.D_(e),QM(n)):n.N_.set("Unknown")})}function Ete(n,e,t){return O(this,null,function*(){if(n.N_.set("Online"),e instanceof Fb&&e.state===2&&e.cause)try{yield(function(r,o){return O(this,null,function*(){let s=o.cause;for(let l of o.targetIds)r.F_.has(l)&&(yield r.remoteSyncer.rejectListen(l,s),r.F_.delete(l),r.L_.removeTarget(l))})})(n,e)}catch(i){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield m3(n,i)}else if(e instanceof Mf?n.L_.Ke(e):e instanceof Lb?n.L_.He(e):n.L_.We(e),!t.isEqual(ht.min()))try{let i=yield Y3(n.localStore);t.compareTo(i)>=0&&(yield(function(o,s){let l=o.L_.rt(s);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let m=o.F_.get(f);m&&o.F_.set(f,m.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,f)=>{let m=o.F_.get(u);if(!m)return;o.F_.set(u,m.withResumeToken(Or.EMPTY_BYTE_STRING,m.snapshotVersion)),X3(o,u);let y=new zm(m.target,u,f,m.sequenceNumber);KM(o,y)}),o.remoteSyncer.applyRemoteEvent(l)})(n,t))}catch(i){Ae("RemoteStore","Failed to raise snapshot:",i),yield m3(n,i)}})}function m3(n,e,t){return O(this,null,function*(){if(!qm(e))throw e;n.M_.add(1),yield Gm(n),n.N_.set("Offline"),t||(t=()=>Y3(n.localStore)),n.asyncQueue.enqueueRetryable(()=>O(null,null,function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield rw(n)}))})}function _3(n,e){return O(this,null,function*(){let t=Gt(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");let i=Wm(t);t.M_.add(3),yield Gm(t),i&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield rw(t)})}function Ite(n,e){return O(this,null,function*(){let t=Gt(n);e?(t.M_.delete(2),yield rw(t)):e||(t.M_.add(2),yield Gm(t),t.N_.set("Unknown"))})}function qf(n){return n.B_||(n.B_=(function(t,i,r){let o=Gt(t);return o.f_(),new pM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Po:wte.bind(null,n),To:xte.bind(null,n),Ao:Cte.bind(null,n),h_:Ete.bind(null,n)}),n.x_.push(e=>O(null,null,function*(){e?(n.B_.t_(),YM(n)?QM(n):n.N_.set("Unknown")):(yield n.B_.stop(),e6(n))}))),n.B_}var vM=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new zl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let s=Date.now()+i,l=new n(e,t,s,r,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function t6(n,e){if(Ac("AsyncQueue",`${e}: ${n}`),qm(n))return new Ze(ye.UNAVAILABLE,`${e}: ${n}`);throw n}var $b=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||et.comparator(t.key,i.key):(t,i)=>et.comparator(t.key,i.key),this.keyedMap=Tm(),this.sortedSet=new Gn(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Hb=class{constructor(){this.q_=new Gn(et.comparator)}track(e){let t=e.doc.key,i=this.q_.get(t);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(t,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(t):e.type===1&&i.type===2?this.q_=this.q_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):dt():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,i)=>{e.push(i)}),e}},jf=class n{constructor(e,t,i,r,o,s,l,u,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){let s=[];return t.forEach(l=>{s.push({type:0,doc:l})}),new n(e,t,$b.emptySet(t),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var yM=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},bM=class{constructor(){this.queries=new $l(e=>k3(e),nw),this.onlineState="Unknown",this.z_=new Set}};function Pte(n,e){return O(this,null,function*(){let t=Gt(n),i=3,r=e.query,o=t.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new yM,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield t.onListen(r,!0);break;case 1:o.K_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(s){let l=t6(s,`Initialization of query '${If(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,o),o.U_.push(e),e.j_(t.onlineState),o.K_&&e.H_(o.K_)&&ZM(t)})}function Tte(n,e){return O(this,null,function*(){let t=Gt(n),i=e.query,r=3,o=t.queries.get(i);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function Ste(n,e){let t=Gt(n),i=!1;for(let r of e){let o=r.query,s=t.queries.get(o);if(s){for(let l of s.U_)l.H_(r)&&(i=!0);s.K_=r}}i&&ZM(t)}function Mte(n,e,t){let i=Gt(n),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(t);i.queries.delete(e)}function ZM(n){n.z_.forEach(e=>{e.next()})}var wM,v3;(v3=wM||(wM={})).J_="default",v3.Cache="cache";var xM=class{constructor(e,t,i){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new jf(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;let i=t!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=jf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==wM.Cache}};var qb=class{constructor(e){this.key=e}},Gb=class{constructor(e){this.key=e}},CM=class{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=qt(),this.mutatedKeys=qt(),this.Ia=R3(e),this.Ta=new $b(this.Ia)}get Ea(){return this.la}da(e,t){let i=t?t.Aa:new Hb,r=t?t.Ta:this.Ta,o=t?t.mutatedKeys:this.mutatedKeys,s=r,l=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,y)=>{let C=r.get(m),T=iw(this.query,y)?y:null,U=!!C&&this.mutatedKeys.has(C.key),H=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations),j=!1;C&&T?C.data.isEqual(T.data)?U!==H&&(i.track({type:3,doc:T}),j=!0):this.Ra(C,T)||(i.track({type:2,doc:T}),j=!0,(u&&this.Ia(T,u)>0||f&&this.Ia(T,f)<0)&&(l=!0)):!C&&T?(i.track({type:0,doc:T}),j=!0):C&&!T&&(i.track({type:1,doc:C}),j=!0,(u||f)&&(l=!0)),j&&(T?(s=s.add(T),o=H?o.add(m):o.delete(m)):(s=s.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let m=this.query.limitType==="F"?s.last():s.first();s=s.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ta:s,Aa:i,Xi:l,mutatedKeys:o}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((m,y)=>(function(T,U){let H=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return H(T)-H(U)})(m.type,y.type)||this.Ia(m.doc,y.doc)),this.Va(i),r=r!=null&&r;let l=t&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,f=u!==this.ha;return this.ha=u,s.length!==0||f?{snapshot:new jf(this.query,e.Ta,o,s,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Hb,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=qt(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let t=[];return e.forEach(i=>{this.Pa.has(i)||t.push(new Gb(i))}),this.Pa.forEach(i=>{e.has(i)||t.push(new qb(i))}),t}pa(e){this.la=e.hs,this.Pa=qt();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return jf.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},EM=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},IM=class{constructor(e){this.key=e,this.wa=!1}},PM=class{constructor(e,t,i,r,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new $l(l=>k3(l),nw),this.Da=new Map,this.Ca=new Set,this.va=new Gn(et.comparator),this.Fa=new Map,this.Ma=new $m,this.xa={},this.Oa=new Map,this.Na=jm.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function Ote(n,e,t=!0){return O(this,null,function*(){let i=s6(n),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield n6(i,e,t,!0),r})}function Ate(n,e){return O(this,null,function*(){let t=s6(n);yield n6(t,e,!0,!1)})}function n6(n,e,t,i){return O(this,null,function*(){let r=yield vte(n.localStore,xa(e)),o=r.targetId,s=t?n.sharedClientState.addLocalQueryTarget(o):"not-current",l;return i&&(l=yield Dte(n,e,o,s==="current",r.resumeToken)),n.isPrimaryClient&&t&&J3(n.remoteStore,r),l})}function Dte(n,e,t,i,r){return O(this,null,function*(){n.Ba=(y,C,T)=>(function(H,j,X,ae){return O(this,null,function*(){let le=j.view.da(X);le.Xi&&(le=yield g3(H.localStore,j.query,!1).then(({documents:k})=>j.view.da(k,le)));let he=ae&&ae.targetChanges.get(j.targetId),ct=ae&&ae.targetMismatches.get(j.targetId)!=null,Se=j.view.applyChanges(le,H.isPrimaryClient,he,ct);return b3(H,j.targetId,Se.fa),Se.snapshot})})(n,y,C,T);let o=yield g3(n.localStore,e,!0),s=new CM(e,o.hs),l=s.da(o.documents),u=Um.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=s.applyChanges(l,n.isPrimaryClient,u);b3(n,t,f.fa);let m=new EM(e,t,s);return n.ba.set(e,m),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),f.snapshot})}function kte(n,e,t){return O(this,null,function*(){let i=Gt(n),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(s=>!nw(s,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cM(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&WM(i.remoteStore,r.targetId),TM(i,r.targetId)}).catch(UM))):(TM(i,r.targetId),yield cM(i.localStore,r.targetId,!0))})}function Rte(n,e){return O(this,null,function*(){let t=Gt(n),i=t.ba.get(e),r=t.Da.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),WM(t.remoteStore,i.targetId))})}function i6(n,e){return O(this,null,function*(){let t=Gt(n);try{let i=yield mte(t.localStore,e);e.targetChanges.forEach((r,o)=>{let s=t.Fa.get(o);s&&(ui(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.wa=!0:r.modifiedDocuments.size>0?ui(s.wa):r.removedDocuments.size>0&&(ui(s.wa),s.wa=!1))}),yield o6(t,i,e)}catch(i){yield UM(i)}})}function y3(n,e,t){let i=Gt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.ba.forEach((o,s)=>{let l=s.view.j_(e);l.snapshot&&r.push(l.snapshot)}),(function(s,l){let u=Gt(s);u.onlineState=l;let f=!1;u.queries.forEach((m,y)=>{for(let C of y.U_)C.j_(l)&&(f=!0)}),f&&ZM(u)})(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Nte(n,e,t){return O(this,null,function*(){let i=Gt(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Fa.get(e),o=r&&r.key;if(o){let s=new Gn(et.comparator);s=s.insert(o,Ts.newNoDocument(o,ht.min()));let l=qt().add(o),u=new Nb(ht.min(),new Map,new Gn(on),s,l);yield i6(i,u),i.va=i.va.remove(o),i.Fa.delete(e),JM(i)}else yield cM(i.localStore,e,!1).then(()=>TM(i,e,t)).catch(UM)})}function TM(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Da.get(e))n.ba.delete(i),t&&n.Sa.ka(i,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(i=>{n.Ma.containsKey(i)||r6(n,i)})}function r6(n,e){n.Ca.delete(e.path.canonicalString());let t=n.va.get(e);t!==null&&(WM(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),JM(n))}function b3(n,e,t){for(let i of t)i instanceof qb?(n.Ma.addReference(i.key,e),Lte(n,i)):i instanceof Gb?(Ae("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,e),n.Ma.containsKey(i.key)||r6(n,i.key)):dt()}function Lte(n,e){let t=e.key,i=t.path.canonicalString();n.va.get(t)||n.Ca.has(i)||(Ae("SyncEngine","New document in limbo: "+t),n.Ca.add(i),JM(n))}function JM(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let e=n.Ca.values().next().value;n.Ca.delete(e);let t=new et(Ai.fromString(e)),i=n.Na.next();n.Fa.set(i,new IM(t)),n.va=n.va.insert(t,i),J3(n.remoteStore,new zm(xa(GM(t.path)),i,"TargetPurposeLimboResolution",P3.oe))}}function o6(n,e,t){return O(this,null,function*(){let i=Gt(n),r=[],o=[],s=[];i.ba.isEmpty()||(i.ba.forEach((l,u)=>{s.push(i.Ba(u,e,t).then(f=>{var m;if((f||t)&&i.isPrimaryClient){let y=f?!f.fromCache:(m=t?.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(f){r.push(f);let y=rM.Ki(u.targetId,f);o.push(y)}}))}),yield Promise.all(s),i.Sa.h_(r),yield(function(u,f){return O(this,null,function*(){let m=Gt(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>de.forEach(f,C=>de.forEach(C.qi,T=>m.persistence.referenceDelegate.addReference(y,C.targetId,T)).next(()=>de.forEach(C.Qi,T=>m.persistence.referenceDelegate.removeReference(y,C.targetId,T)))))}catch(y){if(!qm(y))throw y;Ae("LocalStore","Failed to update sequence numbers: "+y)}for(let y of f){let C=y.targetId;if(!y.fromCache){let T=m.ns.get(C),U=T.snapshotVersion,H=T.withLastLimboFreeSnapshotVersion(U);m.ns=m.ns.insert(C,H)}}})})(i.localStore,o))})}function Fte(n,e){return O(this,null,function*(){let t=Gt(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());let i=yield Q3(t.localStore,e);t.currentUser=e,(function(o,s){o.Oa.forEach(l=>{l.forEach(u=>{u.reject(new Ze(ye.CANCELLED,s))})}),o.Oa.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield o6(t,i.us)}})}function Vte(n,e){let t=Gt(n),i=t.Fa.get(e);if(i&&i.wa)return qt().add(i.key);{let r=qt(),o=t.Da.get(e);if(!o)return r;for(let s of o){let l=t.ba.get(s);r=r.unionWith(l.view.Ea)}return r}}function s6(n){let e=Gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=i6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vte.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nte.bind(null,e),e.Sa.h_=Ste.bind(null,e.eventManager),e.Sa.ka=Mte.bind(null,e.eventManager),e}var Wb=class{constructor(){this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){this.serializer=Z3(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return gte(this.persistence,new sM,e.initialUser,this.serializer)}createPersistence(e){return new tM(iM.Hr,this.serializer)}createSharedClientState(e){return new lM}terminate(){return O(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var SM=class{initialize(e,t){return O(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>y3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fte.bind(null,this.syncEngine),yield Ite(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return(function(){return new bM})()}createDatastore(e){let t=Z3(e.databaseInfo.databaseId),i=(function(o){return new hM(o)})(e.databaseInfo);return(function(o,s,l,u){return new gM(o,s,l,u)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,o,s,l){return new _M(i,r,o,s,l)})(this.localStore,this.datastore,e.asyncQueue,t=>y3(this.syncEngine,t,0),(function(){return zb.D()?new zb:new uM})())}createSyncEngine(e,t){return(function(r,o,s,l,u,f,m){let y=new PM(r,o,s,l,u,f);return m&&(y.La=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return O(this,null,function*(){var e;yield(function(i){return O(this,null,function*(){let r=Gt(i);Ae("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Gm(r),r.O_.shutdown(),r.N_.set("Unknown")})})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var MM=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ac("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var OM=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=ur.UNAUTHENTICATED,this.clientId=_S.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>O(this,null,function*(){Ae("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(Ae("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ze(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new zl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=t6(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function cS(n,e){return O(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>O(null,null,function*(){i.isEqual(r)||(yield Q3(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function w3(n,e){return O(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Ute(n);Ae("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>_3(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>_3(e.remoteStore,r)),n._onlineComponents=e})}function Bte(n){return n.name==="FirebaseError"?n.code===ye.FAILED_PRECONDITION||n.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function Ute(n){return O(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield cS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!Bte(t))throw t;km("Error using user provided cache. Falling back to memory cache: "+t),yield cS(n,new Wb)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),yield cS(n,new Wb);return n._offlineComponents})}function zte(n){return O(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield w3(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield w3(n,new SM))),n._onlineComponents})}function x3(n){return O(this,null,function*(){let e=yield zte(n),t=e.eventManager;return t.onListen=Ote.bind(null,e.syncEngine),t.onUnlisten=kte.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ate.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Rte.bind(null,e.syncEngine),t})}function a6(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var C3=new Map;function jte(n,e,t,i){if(e===!0&&i===!0)throw new Ze(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $te(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":dt()}function lS(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ze(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=$te(n);throw new Ze(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Kb=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ze(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jte("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a6((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ze(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ze(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ze(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},AM=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ze(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Ze(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kb(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new dS;switch(i.type){case"firstParty":return new pS(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ze(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=C3.get(t);i&&(Ae("ComponentProvider","Removing Datastore"),C3.delete(t),i.terminate())})(this),Promise.resolve()}};var Qb=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$f=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new DM(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},DM=class n extends Qb{constructor(e,t,i){super(e,t,GM(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $f(this.firestore,null,new et(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var kM=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new jb(this,"async_queue_retry"),this.hu=()=>{let t=aS();t&&Ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=aS();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=aS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new zl;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return O(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!qm(e))throw e;Ae("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=(function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l})(i);throw Ac("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=t,t}enqueueAfterDelay(e,t,i){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let r=vM.createAndSchedule(this,e,t,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&dt()}verifyOperationInProgress(){}du(){return O(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};function E3(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Hm=class extends AM{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=(function(){return new kM})(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||c6(this),this._firestoreClient.terminate()}};function Hte(n){return n._firestoreClient||c6(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function c6(n){var e,t,i;let r=n._freezeSettings(),o=(function(l,u,f,m){return new bS(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,a6(m.experimentalLongPollingOptions),m.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new OM(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var RM=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Or.fromBase64String(e))}catch(t){throw new Ze(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Yb=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ze(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var NM=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ze(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ze(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return on(this._lat,e._lat)||on(this._long,e._long)}};var qte=new RegExp("[~\\*/\\[\\]]");function Gte(n,e,t){if(e.search(qte)>=0)throw I3(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yb(...e.split("."))._internalPath}catch{throw I3(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function I3(n,e,t,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${i}`),s&&(u+=` in document ${r}`),u+=")"),new Ze(ye.INVALID_ARGUMENT,l+n+u)}var Zb=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $f(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new LM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(l6("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},LM=class extends Zb{data(){return super.data()}};function l6(n,e){return typeof e=="string"?Gte(n,e):e instanceof Yb?e._internalPath:e._delegate._internalPath}function Wte(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ze(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var FM=class{convertValue(e,t="none"){switch(Ad(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return tw(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertGeoPoint(e){return new NM(Ln(e.latitude),Ln(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=jM(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Rm(e));default:return null}}convertTimestamp(e){let t=Dc(e);return new Vo(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Ai.fromString(e);ui(K3(i));let r=new kb(i.get(1),i.get(3)),o=new et(i.popFirst(5));return r.isEqual(t)||Ac(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var Sd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Jb=class extends Zb{constructor(e,t,i,r,o,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(l6("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Af=class extends Jb{data(e={}){return super.data(e)}},VM=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Sd(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Af(this._firestore,this._userDataWriter,i.key,i,new Sd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ze(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>{let u=new Af(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Sd(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{let u=new Af(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Sd(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),m=s.indexOf(l.doc.key)),{type:Kte(l.type),doc:u,oldIndex:f,newIndex:m}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Kte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}var Xb=class extends FM{constructor(e){super(),this.firestore=e}convertBytes(e){return new RM(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $f(this.firestore,null,t)}};function u6(n,...e){var t,i,r;n=kl(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||E3(e[s])||(o=e[s],s++);let l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(E3(e[s])){let y=e[s];e[s]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[s+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[s+2]=(r=y.complete)===null||r===void 0?void 0:r.bind(y)}let u,f,m;if(n instanceof $f)f=lS(n.firestore,Hm),m=GM(n._key.path),u={next:y=>{e[s]&&e[s](Qte(f,n,y))},error:e[s+1],complete:e[s+2]};else{let y=lS(n,Qb);f=lS(y.firestore,Hm),m=y._query;let C=new Xb(f);u={next:T=>{e[s]&&e[s](new VM(f,C,y,T))},error:e[s+1],complete:e[s+2]},Wte(n._query)}return(function(C,T,U,H){let j=new MM(H),X=new xM(T,j,U);return C.asyncQueue.enqueueAndForget(()=>O(null,null,function*(){return Pte(yield x3(C),X)})),()=>{j.$a(),C.asyncQueue.enqueueAndForget(()=>O(null,null,function*(){return Tte(yield x3(C),X)}))}})(Hte(f),m,l,u)}function Qte(n,e,t){let i=t.docs.get(e._key),r=new Xb(n);return new Jb(n,r,e._key,i,new Sd(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Hf=r})(bf),Nl(new Cs("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),l=new Hm(new hS(i.getProvider("auth-internal")),new mS(i.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ze(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kb(f.options.projectId,m)})(s,r),s);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),wc(Y5,"4.6.4",e),wc(Y5,"4.6.4","esm2017")})();var ow=function(){return ow=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ow.apply(this,arguments)};var Yte={includeMetadataChanges:!1};function d6(n,e){return e===void 0&&(e=Yte),new ze(function(t){var i=u6(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function h6(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:ow(ow({},i),(t={},t[e.idField]=n.id,t))}function f6(n){return d6(n,{includeMetadataChanges:!0}).pipe(pe(function(e){return e.docs}))}function p6(n,e){return e===void 0&&(e={}),f6(n).pipe(pe(function(t){return t.map(function(i){return h6(i,e)})}))}var g6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m6={};var kc,XM;(function(){var n;function e(k,E){function P(){}P.prototype=E.prototype,k.D=E.prototype,k.prototype=new P,k.prototype.constructor=k,k.C=function(A,R,F){for(var S=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)S[Ft-2]=arguments[Ft];return E.prototype[R].apply(A,S)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,E,P){P||(P=0);var A=Array(16);if(typeof E=="string")for(var R=0;16>R;++R)A[R]=E.charCodeAt(P++)|E.charCodeAt(P++)<<8|E.charCodeAt(P++)<<16|E.charCodeAt(P++)<<24;else for(R=0;16>R;++R)A[R]=E[P++]|E[P++]<<8|E[P++]<<16|E[P++]<<24;E=k.g[0],P=k.g[1],R=k.g[2];var F=k.g[3],S=E+(F^P&(R^F))+A[0]+3614090360&4294967295;E=P+(S<<7&4294967295|S>>>25),S=F+(R^E&(P^R))+A[1]+3905402710&4294967295,F=E+(S<<12&4294967295|S>>>20),S=R+(P^F&(E^P))+A[2]+606105819&4294967295,R=F+(S<<17&4294967295|S>>>15),S=P+(E^R&(F^E))+A[3]+3250441966&4294967295,P=R+(S<<22&4294967295|S>>>10),S=E+(F^P&(R^F))+A[4]+4118548399&4294967295,E=P+(S<<7&4294967295|S>>>25),S=F+(R^E&(P^R))+A[5]+1200080426&4294967295,F=E+(S<<12&4294967295|S>>>20),S=R+(P^F&(E^P))+A[6]+2821735955&4294967295,R=F+(S<<17&4294967295|S>>>15),S=P+(E^R&(F^E))+A[7]+4249261313&4294967295,P=R+(S<<22&4294967295|S>>>10),S=E+(F^P&(R^F))+A[8]+1770035416&4294967295,E=P+(S<<7&4294967295|S>>>25),S=F+(R^E&(P^R))+A[9]+2336552879&4294967295,F=E+(S<<12&4294967295|S>>>20),S=R+(P^F&(E^P))+A[10]+4294925233&4294967295,R=F+(S<<17&4294967295|S>>>15),S=P+(E^R&(F^E))+A[11]+2304563134&4294967295,P=R+(S<<22&4294967295|S>>>10),S=E+(F^P&(R^F))+A[12]+1804603682&4294967295,E=P+(S<<7&4294967295|S>>>25),S=F+(R^E&(P^R))+A[13]+4254626195&4294967295,F=E+(S<<12&4294967295|S>>>20),S=R+(P^F&(E^P))+A[14]+2792965006&4294967295,R=F+(S<<17&4294967295|S>>>15),S=P+(E^R&(F^E))+A[15]+1236535329&4294967295,P=R+(S<<22&4294967295|S>>>10),S=E+(R^F&(P^R))+A[1]+4129170786&4294967295,E=P+(S<<5&4294967295|S>>>27),S=F+(P^R&(E^P))+A[6]+3225465664&4294967295,F=E+(S<<9&4294967295|S>>>23),S=R+(E^P&(F^E))+A[11]+643717713&4294967295,R=F+(S<<14&4294967295|S>>>18),S=P+(F^E&(R^F))+A[0]+3921069994&4294967295,P=R+(S<<20&4294967295|S>>>12),S=E+(R^F&(P^R))+A[5]+3593408605&4294967295,E=P+(S<<5&4294967295|S>>>27),S=F+(P^R&(E^P))+A[10]+38016083&4294967295,F=E+(S<<9&4294967295|S>>>23),S=R+(E^P&(F^E))+A[15]+3634488961&4294967295,R=F+(S<<14&4294967295|S>>>18),S=P+(F^E&(R^F))+A[4]+3889429448&4294967295,P=R+(S<<20&4294967295|S>>>12),S=E+(R^F&(P^R))+A[9]+568446438&4294967295,E=P+(S<<5&4294967295|S>>>27),S=F+(P^R&(E^P))+A[14]+3275163606&4294967295,F=E+(S<<9&4294967295|S>>>23),S=R+(E^P&(F^E))+A[3]+4107603335&4294967295,R=F+(S<<14&4294967295|S>>>18),S=P+(F^E&(R^F))+A[8]+1163531501&4294967295,P=R+(S<<20&4294967295|S>>>12),S=E+(R^F&(P^R))+A[13]+2850285829&4294967295,E=P+(S<<5&4294967295|S>>>27),S=F+(P^R&(E^P))+A[2]+4243563512&4294967295,F=E+(S<<9&4294967295|S>>>23),S=R+(E^P&(F^E))+A[7]+1735328473&4294967295,R=F+(S<<14&4294967295|S>>>18),S=P+(F^E&(R^F))+A[12]+2368359562&4294967295,P=R+(S<<20&4294967295|S>>>12),S=E+(P^R^F)+A[5]+4294588738&4294967295,E=P+(S<<4&4294967295|S>>>28),S=F+(E^P^R)+A[8]+2272392833&4294967295,F=E+(S<<11&4294967295|S>>>21),S=R+(F^E^P)+A[11]+1839030562&4294967295,R=F+(S<<16&4294967295|S>>>16),S=P+(R^F^E)+A[14]+4259657740&4294967295,P=R+(S<<23&4294967295|S>>>9),S=E+(P^R^F)+A[1]+2763975236&4294967295,E=P+(S<<4&4294967295|S>>>28),S=F+(E^P^R)+A[4]+1272893353&4294967295,F=E+(S<<11&4294967295|S>>>21),S=R+(F^E^P)+A[7]+4139469664&4294967295,R=F+(S<<16&4294967295|S>>>16),S=P+(R^F^E)+A[10]+3200236656&4294967295,P=R+(S<<23&4294967295|S>>>9),S=E+(P^R^F)+A[13]+681279174&4294967295,E=P+(S<<4&4294967295|S>>>28),S=F+(E^P^R)+A[0]+3936430074&4294967295,F=E+(S<<11&4294967295|S>>>21),S=R+(F^E^P)+A[3]+3572445317&4294967295,R=F+(S<<16&4294967295|S>>>16),S=P+(R^F^E)+A[6]+76029189&4294967295,P=R+(S<<23&4294967295|S>>>9),S=E+(P^R^F)+A[9]+3654602809&4294967295,E=P+(S<<4&4294967295|S>>>28),S=F+(E^P^R)+A[12]+3873151461&4294967295,F=E+(S<<11&4294967295|S>>>21),S=R+(F^E^P)+A[15]+530742520&4294967295,R=F+(S<<16&4294967295|S>>>16),S=P+(R^F^E)+A[2]+3299628645&4294967295,P=R+(S<<23&4294967295|S>>>9),S=E+(R^(P|~F))+A[0]+4096336452&4294967295,E=P+(S<<6&4294967295|S>>>26),S=F+(P^(E|~R))+A[7]+1126891415&4294967295,F=E+(S<<10&4294967295|S>>>22),S=R+(E^(F|~P))+A[14]+2878612391&4294967295,R=F+(S<<15&4294967295|S>>>17),S=P+(F^(R|~E))+A[5]+4237533241&4294967295,P=R+(S<<21&4294967295|S>>>11),S=E+(R^(P|~F))+A[12]+1700485571&4294967295,E=P+(S<<6&4294967295|S>>>26),S=F+(P^(E|~R))+A[3]+2399980690&4294967295,F=E+(S<<10&4294967295|S>>>22),S=R+(E^(F|~P))+A[10]+4293915773&4294967295,R=F+(S<<15&4294967295|S>>>17),S=P+(F^(R|~E))+A[1]+2240044497&4294967295,P=R+(S<<21&4294967295|S>>>11),S=E+(R^(P|~F))+A[8]+1873313359&4294967295,E=P+(S<<6&4294967295|S>>>26),S=F+(P^(E|~R))+A[15]+4264355552&4294967295,F=E+(S<<10&4294967295|S>>>22),S=R+(E^(F|~P))+A[6]+2734768916&4294967295,R=F+(S<<15&4294967295|S>>>17),S=P+(F^(R|~E))+A[13]+1309151649&4294967295,P=R+(S<<21&4294967295|S>>>11),S=E+(R^(P|~F))+A[4]+4149444226&4294967295,E=P+(S<<6&4294967295|S>>>26),S=F+(P^(E|~R))+A[11]+3174756917&4294967295,F=E+(S<<10&4294967295|S>>>22),S=R+(E^(F|~P))+A[2]+718787259&4294967295,R=F+(S<<15&4294967295|S>>>17),S=P+(F^(R|~E))+A[9]+3951481745&4294967295,k.g[0]=k.g[0]+E&4294967295,k.g[1]=k.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,k.g[2]=k.g[2]+R&4294967295,k.g[3]=k.g[3]+F&4294967295}i.prototype.u=function(k,E){E===void 0&&(E=k.length);for(var P=E-this.blockSize,A=this.B,R=this.h,F=0;F<E;){if(R==0)for(;F<=P;)r(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<E;)if(A[R++]=k.charCodeAt(F++),R==this.blockSize){r(this,A),R=0;break}}else for(;F<E;)if(A[R++]=k[F++],R==this.blockSize){r(this,A),R=0;break}}this.h=R,this.o+=E},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var E=1;E<k.length-8;++E)k[E]=0;var P=8*this.o;for(E=k.length-8;E<k.length;++E)k[E]=P&255,P/=256;for(this.u(k),k=Array(16),E=P=0;4>E;++E)for(var A=0;32>A;A+=8)k[P++]=this.g[E]>>>A&255;return k};function o(k,E){var P=l;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=E(k)}function s(k,E){this.h=E;for(var P=[],A=!0,R=k.length-1;0<=R;R--){var F=k[R]|0;A&&F==E||(P[R]=F,A=!1)}this.g=P}var l={};function u(k){return-128<=k&&128>k?o(k,function(E){return new s([E|0],0>E?-1:0)}):new s([k|0],0>k?-1:0)}function f(k){if(isNaN(k)||!isFinite(k))return y;if(0>k)return j(f(-k));for(var E=[],P=1,A=0;k>=P;A++)E[A]=k/P|0,P*=4294967296;return new s(E,0)}function m(k,E){if(k.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k.charAt(0)=="-")return j(m(k.substring(1),E));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(E,8)),A=y,R=0;R<k.length;R+=8){var F=Math.min(8,k.length-R),S=parseInt(k.substring(R,R+F),E);8>F?(F=f(Math.pow(E,F)),A=A.j(F).add(f(S))):(A=A.j(P),A=A.add(f(S)))}return A}var y=u(0),C=u(1),T=u(16777216);n=s.prototype,n.m=function(){if(H(this))return-j(this).m();for(var k=0,E=1,P=0;P<this.g.length;P++){var A=this.i(P);k+=(0<=A?A:4294967296+A)*E,E*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(U(this))return"0";if(H(this))return"-"+j(this).toString(k);for(var E=f(Math.pow(k,6)),P=this,A="";;){var R=he(P,E).g;P=X(P,R.j(E));var F=((0<P.g.length?P.g[0]:P.h)>>>0).toString(k);if(P=R,U(P))return F+A;for(;6>F.length;)F="0"+F;A=F+A}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function U(k){if(k.h!=0)return!1;for(var E=0;E<k.g.length;E++)if(k.g[E]!=0)return!1;return!0}function H(k){return k.h==-1}n.l=function(k){return k=X(this,k),H(k)?-1:U(k)?0:1};function j(k){for(var E=k.g.length,P=[],A=0;A<E;A++)P[A]=~k.g[A];return new s(P,~k.h).add(C)}n.abs=function(){return H(this)?j(this):this},n.add=function(k){for(var E=Math.max(this.g.length,k.g.length),P=[],A=0,R=0;R<=E;R++){var F=A+(this.i(R)&65535)+(k.i(R)&65535),S=(F>>>16)+(this.i(R)>>>16)+(k.i(R)>>>16);A=S>>>16,F&=65535,S&=65535,P[R]=S<<16|F}return new s(P,P[P.length-1]&-2147483648?-1:0)};function X(k,E){return k.add(j(E))}n.j=function(k){if(U(this)||U(k))return y;if(H(this))return H(k)?j(this).j(j(k)):j(j(this).j(k));if(H(k))return j(this.j(j(k)));if(0>this.l(T)&&0>k.l(T))return f(this.m()*k.m());for(var E=this.g.length+k.g.length,P=[],A=0;A<2*E;A++)P[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<k.g.length;R++){var F=this.i(A)>>>16,S=this.i(A)&65535,Ft=k.i(R)>>>16,Li=k.i(R)&65535;P[2*A+2*R]+=S*Li,ae(P,2*A+2*R),P[2*A+2*R+1]+=F*Li,ae(P,2*A+2*R+1),P[2*A+2*R+1]+=S*Ft,ae(P,2*A+2*R+1),P[2*A+2*R+2]+=F*Ft,ae(P,2*A+2*R+2)}for(A=0;A<E;A++)P[A]=P[2*A+1]<<16|P[2*A];for(A=E;A<2*E;A++)P[A]=0;return new s(P,0)};function ae(k,E){for(;(k[E]&65535)!=k[E];)k[E+1]+=k[E]>>>16,k[E]&=65535,E++}function le(k,E){this.g=k,this.h=E}function he(k,E){if(U(E))throw Error("division by zero");if(U(k))return new le(y,y);if(H(k))return E=he(j(k),E),new le(j(E.g),j(E.h));if(H(E))return E=he(k,j(E)),new le(j(E.g),E.h);if(30<k.g.length){if(H(k)||H(E))throw Error("slowDivide_ only works with positive integers.");for(var P=C,A=E;0>=A.l(k);)P=ct(P),A=ct(A);var R=Se(P,1),F=Se(A,1);for(A=Se(A,2),P=Se(P,2);!U(A);){var S=F.add(A);0>=S.l(k)&&(R=R.add(P),F=S),A=Se(A,1),P=Se(P,1)}return E=X(k,R.j(E)),new le(R,E)}for(R=y;0<=k.l(E);){for(P=Math.max(1,Math.floor(k.m()/E.m())),A=Math.ceil(Math.log(P)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),F=f(P),S=F.j(E);H(S)||0<S.l(k);)P-=A,F=f(P),S=F.j(E);U(F)&&(F=C),R=R.add(F),k=X(k,S)}return new le(R,k)}n.A=function(k){return he(this,k).h},n.and=function(k){for(var E=Math.max(this.g.length,k.g.length),P=[],A=0;A<E;A++)P[A]=this.i(A)&k.i(A);return new s(P,this.h&k.h)},n.or=function(k){for(var E=Math.max(this.g.length,k.g.length),P=[],A=0;A<E;A++)P[A]=this.i(A)|k.i(A);return new s(P,this.h|k.h)},n.xor=function(k){for(var E=Math.max(this.g.length,k.g.length),P=[],A=0;A<E;A++)P[A]=this.i(A)^k.i(A);return new s(P,this.h^k.h)};function ct(k){for(var E=k.g.length+1,P=[],A=0;A<E;A++)P[A]=k.i(A)<<1|k.i(A-1)>>>31;return new s(P,k.h)}function Se(k,E){var P=E>>5;E%=32;for(var A=k.g.length-P,R=[],F=0;F<A;F++)R[F]=0<E?k.i(F+P)>>>E|k.i(F+P+1)<<32-E:k.i(F+P);return new s(R,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,XM=m6.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=m,kc=m6.Integer=s}).apply(typeof g6<"u"?g6:typeof self<"u"?self:typeof window<"u"?window:{});var sw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rc={};var eO,Zte,Gf,tO,Km,aw,nO,iO,rO;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,g){return c==Array.prototype||c==Object.prototype||(c[h]=g.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof sw=="object"&&sw];for(var h=0;h<c.length;++h){var g=c[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=t(this);function r(c,h){if(h)e:{var g=i;c=c.split(".");for(var v=0;v<c.length-1;v++){var N=c[v];if(!(N in g))break e;g=g[N]}c=c[c.length-1],v=g[c],h=h(v),h!=v&&h!=null&&e(g,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var g=0,v=!1,N={next:function(){if(!v&&g<c.length){var V=g++;return{value:h(V,c[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(c){return c||function(){return o(this,function(h,g){return g})}});var s=s||{},l=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function f(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function m(c,h,g){return c.call.apply(c.bind,arguments)}function y(c,h,g){if(!c)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,v),c.apply(h,N)}}return function(){return c.apply(h,arguments)}}function C(c,h,g){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,C.apply(null,arguments)}function T(c,h){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),c.apply(this,v)}}function U(c,h){function g(){}g.prototype=h.prototype,c.aa=h.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(v,N,V){for(var K=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)K[Ie-2]=arguments[Ie];return h.prototype[N].apply(v,K)}}function H(c){let h=c.length;if(0<h){let g=Array(h);for(let v=0;v<h;v++)g[v]=c[v];return g}return[]}function j(c,h){for(let g=1;g<arguments.length;g++){let v=arguments[g];if(u(v)){let N=c.length||0,V=v.length||0;c.length=N+V;for(let K=0;K<V;K++)c[N+K]=v[K]}else c.push(v)}}class X{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function ae(c){return/^[\s\xa0]*$/.test(c)}function le(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var ct=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function Se(c,h,g){for(let v in c)h.call(g,c[v],v,c)}function k(c,h){for(let g in c)h.call(void 0,c[g],g,c)}function E(c){let h={};for(let g in c)h[g]=c[g];return h}let P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(c,h){let g,v;for(let N=1;N<arguments.length;N++){v=arguments[N];for(g in v)c[g]=v[g];for(let V=0;V<P.length;V++)g=P[V],Object.prototype.hasOwnProperty.call(v,g)&&(c[g]=v[g])}}function R(c){var h=1;c=c.split(":");let g=[];for(;0<h&&c.length;)g.push(c.shift()),h--;return c.length&&g.push(c.join(":")),g}function F(c){l.setTimeout(()=>{throw c},0)}function S(){var c=Jt;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class Ft{constructor(){this.h=this.g=null}add(h,g){let v=Li.get();v.set(h,g),this.h?this.h.next=v:this.g=v,this.h=v}}var Li=new X(()=>new Je,c=>c.reset());class Je{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let kr,ke=!1,Jt=new Ft,Kn=()=>{let c=l.Promise.resolve(void 0);kr=()=>{c.then(Ei)}};var Ei=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(g){F(g)}var h=Li;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}ke=!1};function _t(){this.s=this.s,this.C=this.C}_t.prototype.s=!1,_t.prototype.ma=function(){this.s||(this.s=!0,this.N())},_t.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Oe(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var vt=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let g=()=>{};l.addEventListener("test",g,h),l.removeEventListener("test",g,h)}catch{}return c})();function zn(c,h){if(Oe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,v=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(ct){e:{try{he(h.nodeName);var N=!0;break e}catch{}N=!1}N||(h=null)}}else g=="mouseover"?h=c.fromElement:g=="mouseout"&&(h=c.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:bo[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&zn.aa.h.call(this)}}U(zn,Oe);var bo={2:"touch",3:"pen",4:"mouse"};zn.prototype.h=function(){zn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Rr="closure_listenable_"+(1e6*Math.random()|0),ou=0;function su(c,h,g,v,N){this.listener=c,this.proxy=null,this.src=h,this.type=g,this.capture=!!v,this.ha=N,this.key=++ou,this.da=this.fa=!1}function mr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Jr(c){this.src=c,this.g={},this.h=0}Jr.prototype.add=function(c,h,g,v,N){var V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);var K=As(c,h,v,N);return-1<K?(h=c[K],g||(h.fa=!1)):(h=new su(h,this.src,V,!!v,N),h.fa=g,c.push(h)),h};function Ra(c,h){var g=h.type;if(g in c.g){var v=c.g[g],N=Array.prototype.indexOf.call(v,h,void 0),V;(V=0<=N)&&Array.prototype.splice.call(v,N,1),V&&(mr(h),c.g[g].length==0&&(delete c.g[g],c.h--))}}function As(c,h,g,v){for(var N=0;N<c.length;++N){var V=c[N];if(!V.da&&V.listener==h&&V.capture==!!g&&V.ha==v)return N}return-1}var Ds="closure_lm_"+(1e6*Math.random()|0),$o={};function ks(c,h,g,v,N){if(v&&v.once)return Na(c,h,g,v,N);if(Array.isArray(h)){for(var V=0;V<h.length;V++)ks(c,h[V],g,v,N);return null}return g=Ls(g),c&&c[Rr]?c.K(h,g,f(v)?!!v.capture:!!v,N):au(c,h,g,!1,v,N)}function au(c,h,g,v,N,V){if(!h)throw Error("Invalid event type");var K=f(N)?!!N.capture:!!N,Ie=Ho(c);if(Ie||(c[Ds]=Ie=new Jr(c)),g=Ie.add(h,g,v,K,V),g.proxy)return g;if(v=eh(),g.proxy=v,v.src=c,v.listener=g,c.addEventListener)vt||(N=K),N===void 0&&(N=!1),c.addEventListener(h.toString(),v,N);else if(c.attachEvent)c.attachEvent(cu(h.toString()),v);else if(c.addListener&&c.removeListener)c.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function eh(){function c(g){return h.call(c.src,c.listener,g)}let h=Sp;return c}function Na(c,h,g,v,N){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Na(c,h[V],g,v,N);return null}return g=Ls(g),c&&c[Rr]?c.L(h,g,f(v)?!!v.capture:!!v,N):au(c,h,g,!0,v,N)}function zc(c,h,g,v,N){if(Array.isArray(h))for(var V=0;V<h.length;V++)zc(c,h[V],g,v,N);else v=f(v)?!!v.capture:!!v,g=Ls(g),c&&c[Rr]?(c=c.i,h=String(h).toString(),h in c.g&&(V=c.g[h],g=As(V,g,v,N),-1<g&&(mr(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete c.g[h],c.h--)))):c&&(c=Ho(c))&&(h=c.g[h.toString()],c=-1,h&&(c=As(h,g,v,N)),(g=-1<c?h[c]:null)&&Rs(g))}function Rs(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[Rr])Ra(h.i,c);else{var g=c.type,v=c.proxy;h.removeEventListener?h.removeEventListener(g,v,c.capture):h.detachEvent?h.detachEvent(cu(g),v):h.addListener&&h.removeListener&&h.removeListener(v),(g=Ho(h))?(Ra(g,c),g.h==0&&(g.src=null,h[Ds]=null)):mr(c)}}}function cu(c){return c in $o?$o[c]:$o[c]="on"+c}function Sp(c,h){if(c.da)c=!0;else{h=new zn(h,this);var g=c.listener,v=c.ha||c.src;c.fa&&Rs(c),c=g.call(v,h)}return c}function Ho(c){return c=c[Ds],c instanceof Jr?c:null}var Ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ls(c){return typeof c=="function"?c:(c[Ns]||(c[Ns]=function(h){return c.handleEvent(h)}),c[Ns])}function Ot(){_t.call(this),this.i=new Jr(this),this.M=this,this.F=null}U(Ot,_t),Ot.prototype[Rr]=!0,Ot.prototype.removeEventListener=function(c,h,g,v){zc(this,c,h,g,v)};function Dt(c,h){var g,v=c.F;if(v)for(g=[];v;v=v.F)g.push(v);if(c=c.M,v=h.type||h,typeof h=="string")h=new Oe(h,c);else if(h instanceof Oe)h.target=h.target||c;else{var N=h;h=new Oe(v,c),A(h,N)}if(N=!0,g)for(var V=g.length-1;0<=V;V--){var K=h.g=g[V];N=wo(K,v,!0,h)&&N}if(K=h.g=c,N=wo(K,v,!0,h)&&N,N=wo(K,v,!1,h)&&N,g)for(V=0;V<g.length;V++)K=h.g=g[V],N=wo(K,v,!1,h)&&N}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var g=c.g[h],v=0;v<g.length;v++)mr(g[v]);delete c.g[h],c.h--}}this.F=null},Ot.prototype.K=function(c,h,g,v){return this.i.add(String(c),h,!1,g,v)},Ot.prototype.L=function(c,h,g,v){return this.i.add(String(c),h,!0,g,v)};function wo(c,h,g,v){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var N=!0,V=0;V<h.length;++V){var K=h[V];if(K&&!K.da&&K.capture==g){var Ie=K.listener,lt=K.ha||K.src;K.fa&&Ra(c.i,K),N=Ie.call(lt,v)!==!1&&N}}return N&&!v.defaultPrevented}function lu(c,h,g){if(typeof c=="function")g&&(c=C(c,g));else if(c&&typeof c.handleEvent=="function")c=C(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(c,h||0)}function jc(c){c.g=lu(()=>{c.g=null,c.i&&(c.i=!1,jc(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class uu extends _t{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:jc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(c){_t.call(this),this.h=c,this.g={}}U(Nr,_t);var du=[];function qo(c){Se(c.g,function(h,g){this.g.hasOwnProperty(g)&&Rs(h)},c),c.g={}}Nr.prototype.N=function(){Nr.aa.N.call(this),qo(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var La=l.JSON.stringify,Mp=l.JSON.parse,th=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Fs(){}Fs.prototype.h=null;function $c(c){return c.h||(c.h=c.i())}function hu(){}var Xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fa(){Oe.call(this,"d")}U(Fa,Oe);function Va(){Oe.call(this,"c")}U(Va,Oe);var Fi={},fu=null;function eo(){return fu=fu||new Ot}Fi.La="serverreachability";function pu(c){Oe.call(this,Fi.La,c)}U(pu,Oe);function to(c){let h=eo();Dt(h,new pu(h))}Fi.STAT_EVENT="statevent";function gu(c,h){Oe.call(this,Fi.STAT_EVENT,c),this.stat=h}U(gu,Oe);function Vt(c){let h=eo();Dt(h,new gu(h,c))}Fi.Ma="timingevent";function Ki(c,h){Oe.call(this,Fi.Ma,c),this.size=h}U(Ki,Oe);function Ce(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},h)}function Lr(){this.g=!0}Lr.prototype.xa=function(){this.g=!1};function nh(c,h,g,v,N,V){c.info(function(){if(c.g)if(V)for(var K="",Ie=V.split("&"),lt=0;lt<Ie.length;lt++){var Pe=Ie[lt].split("=");if(1<Pe.length){var ot=Pe[0];Pe=Pe[1];var At=ot.split("_");K=2<=At.length&&At[1]=="type"?K+(ot+"="+Pe+"&"):K+(ot+"=redacted&")}}else K=null;else K=V;return"XMLHTTP REQ ("+v+") [attempt "+N+"]: "+h+`
`+g+`
`+K})}function ih(c,h,g,v,N,V,K){c.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+N+"]: "+h+`
`+g+`
`+V+" "+K})}function Qi(c,h,g,v){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+rh(c,g)+(v?" "+v:"")})}function mu(c,h){c.info(function(){return"TIMEOUT: "+h})}Lr.prototype.info=function(){};function rh(c,h){if(!c.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var v=g[c];if(!(2>v.length)){var N=v[1];if(Array.isArray(N)&&!(1>N.length)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(var K=1;K<N.length;K++)N[K]=""}}}}return La(g)}catch{return h}}var Yi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ba;function Go(){}U(Go,Fs),Go.prototype.g=function(){return new XMLHttpRequest},Go.prototype.i=function(){return{}},Ba=new Go;function _i(c,h,g,v){this.j=c,this.i=h,this.l=g,this.R=v||1,this.U=new Nr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _u}function _u(){this.i=null,this.g="",this.h=!1}var qc={},Ua={};function xo(c,h,g){c.L=1,c.v=no(hn(h)),c.m=g,c.P=!0,vu(c,null)}function vu(c,h){c.F=Date.now(),Wo(c),c.A=hn(c.v);var g=c.A,v=c.R;Array.isArray(v)||(v=[String(v)]),Wt(g.i,"t",v),c.C=0,g=c.j.J,c.h=new _u,c.g=$s(c.j,g?h:null,!c.m),0<c.O&&(c.M=new uu(C(c.Y,c,c.g),c.O)),h=c.U,g=c.g,v=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(du[0]=N.toString()),N=du);for(var V=0;V<N.length;V++){var K=ks(g,N[V],v||h.handleEvent,!1,h.h||h);if(!K)break;h.g[K.key]=K}h=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),to(),nh(c.i,c.u,c.A,c.l,c.R,c.m)}_i.prototype.ca=function(c){c=c.target;let h=this.M;h&&Tn(c)==3?h.j():this.Y(c)},_i.prototype.Y=function(c){try{if(c==this.g)e:{let At=Tn(this.g);var h=this.g.Ba();let Yn=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||Au(this.g)))){this.J||At!=4||h==7||(h==8||0>=Yn?to(3):to(2)),Ko(this);var g=this.g.Z();this.X=g;t:if(yu(this)){var v=Au(this.g);c="";var N=v.length,V=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ii(this),Vi(this);var K="";break t}this.h.i=new l.TextDecoder}for(h=0;h<N;h++)this.h.h=!0,c+=this.h.i.decode(v[h],{stream:!(V&&h==N-1)});v.length=0,this.h.g+=c,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=g==200,ih(this.i,this.u,this.A,this.l,this.R,At,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,lt=this.g;if((Ie=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(Ie)){var Pe=Ie;break t}}Pe=null}if(g=Pe)Qi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vs(this,g);else{this.o=!1,this.s=3,Vt(12),Ii(this),Vi(this);break e}}if(this.P){g=!0;let wn;for(;!this.J&&this.C<K.length;)if(wn=Op(this,K),wn==Ua){At==4&&(this.s=4,Vt(14),g=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==qc){this.s=4,Vt(15),Qi(this.i,this.l,K,"[Invalid Chunk]"),g=!1;break}else Qi(this.i,this.l,wn,null),Vs(this,wn);if(yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||K.length!=0||this.h.h||(this.s=1,Vt(16),g=!1),this.o=this.o&&g,!g)Qi(this.i,this.l,K,"[Invalid Chunked Response]"),Ii(this),Vi(this);else if(0<K.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),js(ot),ot.M=!0,Vt(11))}}else Qi(this.i,this.l,K,null),Vs(this,K);At==4&&Ii(this),this.o&&!this.J&&(At==4?ku(this.j,this):(this.o=!1,Wo(this)))}else ah(this.g),g==400&&0<K.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),Ii(this),Vi(this)}}}catch{}finally{}};function yu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Op(c,h){var g=c.C,v=h.indexOf(`
`,g);return v==-1?Ua:(g=Number(h.substring(g,v)),isNaN(g)?qc:(v+=1,v+g>h.length?Ua:(h=h.slice(v,v+g),c.C=v+g,h)))}_i.prototype.cancel=function(){this.J=!0,Ii(this)};function Wo(c){c.S=Date.now()+c.I,bu(c,c.I)}function bu(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ce(C(c.ba,c),h)}function Ko(c){c.B&&(l.clearTimeout(c.B),c.B=null)}_i.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(mu(this.i,this.A),this.L!=2&&(to(),Vt(17)),Ii(this),this.s=2,Vi(this)):bu(this,this.S-c)};function Vi(c){c.j.G==0||c.J||ku(c.j,c)}function Ii(c){Ko(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,qo(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Vs(c,h){try{var g=c.j;if(g.G!=0&&(g.g==c||Fr(g.h,c))){if(!c.K&&Fr(g.h,c)&&g.G==3){try{var v=g.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var N=v;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)ts(g),Xo(g);else break e;qa(g),Vt(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ce(C(g.Za,g),6e3));if(1>=Bs(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else $i(g,11)}else if((c.K||g.g==c)&&ts(g),!ae(h))for(N=g.Da.g.parse(h),h=0;h<N.length;h++){let Pe=N[h];if(g.T=Pe[0],Pe=Pe[1],g.G==2)if(Pe[0]=="c"){g.K=Pe[1],g.ia=Pe[2];let ot=Pe[3];ot!=null&&(g.la=ot,g.j.info("VER="+g.la));let At=Pe[4];At!=null&&(g.Aa=At,g.j.info("SVER="+g.Aa));let Yn=Pe[5];Yn!=null&&typeof Yn=="number"&&0<Yn&&(v=1.5*Yn,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;let wn=c.g;if(wn){let yr=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yr){var V=v.h;V.g||yr.indexOf("spdy")==-1&&yr.indexOf("quic")==-1&&yr.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Vr(V,V.h),V.h=null))}if(v.D){let Hs=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hs&&(v.ya=Hs,De(v.I,v.D,Hs))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var K=c;if(v.qa=Jc(v,v.J?v.ia:null,v.W),K.K){ja(v.h,K);var Ie=K,lt=v.L;lt&&(Ie.I=lt),Ie.B&&(Ko(Ie),Wo(Ie)),v.g=K}else Ha(v);0<g.i.length&&es(g)}else Pe[0]!="stop"&&Pe[0]!="close"||$i(g,7);else g.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?$i(g,7):Jo(g):Pe[0]!="noop"&&g.l&&g.l.ta(Pe),g.v=0)}}to(4)}catch{}}var za=class{constructor(c,h){this.g=c,this.map=h}};function yt(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Bs(c){return c.h?1:c.g?c.g.size:0}function Fr(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Vr(c,h){c.g?c.g.add(h):c.h=h}function ja(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}yt.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Xe(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let g of c.g.values())h=h.concat(g.D);return h}return H(c.i)}function yn(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],g=c.length,v=0;v<g;v++)h.push(c[v]);return h}h=[],g=0;for(v in c)h[g++]=c[v];return h}function wu(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var g=0;g<c;g++)h.push(g);return h}h=[],g=0;for(let v in c)h[g++]=v;return h}}}function Us(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var g=wu(c),v=yn(c),N=v.length,V=0;V<N;V++)h.call(void 0,v[V],g&&g[V],c)}var Pi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ap(c,h){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var v=c[g].indexOf("="),N=null;if(0<=v){var V=c[g].substring(0,v);N=c[g].substring(v+1)}else V=c[g];h(V,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Qn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Qn){this.h=c.h,tn(this,c.j),this.o=c.o,this.g=c.g,Bi(this,c.s),this.l=c.l;var h=c.i,g=new vr;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),Qo(this,g),this.m=c.m}else c&&(h=String(c).match(Pi))?(this.h=!1,tn(this,h[1]||"",!0),this.o=Ui(h[2]||""),this.g=Ui(h[3]||"",!0),Bi(this,h[4]),this.l=Ui(h[5]||"",!0),Qo(this,h[6]||"",!0),this.m=Ui(h[7]||"")):(this.h=!1,this.i=new vr(null,this.h))}Qn.prototype.toString=function(){var c=[],h=this.j;h&&c.push(_r(h,zs,!0),":");var g=this.g;return(g||h=="file")&&(c.push("//"),(h=this.o)&&c.push(_r(h,zs,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(_r(g,g.charAt(0)=="/"?Eu:Cu,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",_r(g,oh)),c.join("")};function hn(c){return new Qn(c)}function tn(c,h,g){c.j=g?Ui(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Bi(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function Qo(c,h,g){h instanceof vr?(c.i=h,Iu(c.i,c.h)):(g||(h=_r(h,Gc)),c.i=new vr(h,c.h))}function De(c,h,g){c.i.set(h,g)}function no(c){return De(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ui(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function _r(c,h,g){return typeof c=="string"?(c=encodeURI(c).replace(h,xu),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var zs=/[#\/\?@]/g,Cu=/[#\?:]/g,Eu=/[#\?]/g,Gc=/[#\?@]/g,oh=/#/g;function vr(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function vi(c){c.g||(c.g=new Map,c.h=0,c.i&&Ap(c.i,function(h,g){c.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}n=vr.prototype,n.add=function(c,h){vi(this),this.i=null,c=Ji(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(h),this.h+=1,this};function Ke(c,h){vi(c),h=Ji(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function Zi(c,h){return vi(c),h=Ji(c,h),c.g.has(h)}n.forEach=function(c,h){vi(this),this.g.forEach(function(g,v){g.forEach(function(N){c.call(h,N,v,this)},this)},this)},n.na=function(){vi(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let v=0;v<h.length;v++){let N=c[v];for(let V=0;V<N.length;V++)g.push(h[v])}return g},n.V=function(c){vi(this);let h=[];if(typeof c=="string")Zi(this,c)&&(h=h.concat(this.g.get(Ji(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)h=h.concat(c[g])}return h},n.set=function(c,h){return vi(this),this.i=null,c=Ji(this,c),Zi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function Wt(c,h,g){Ke(c,h),0<g.length&&(c.i=null,c.g.set(Ji(c,h),H(g)),c.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var v=h[g];let V=encodeURIComponent(String(v)),K=this.V(v);for(v=0;v<K.length;v++){var N=V;K[v]!==""&&(N+="="+encodeURIComponent(String(K[v]))),c.push(N)}}return this.i=c.join("&")};function Ji(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function Iu(c,h){h&&!c.j&&(vi(c),c.i=null,c.g.forEach(function(g,v){var N=v.toLowerCase();v!=N&&(Ke(this,v),Wt(this,N,g))},c)),c.j=h}function Pu(c,h){let g=new Lr;if(l.Image){let v=new Image;v.onload=T(bn,g,"TestLoadImage: loaded",!0,h,v),v.onerror=T(bn,g,"TestLoadImage: error",!1,h,v),v.onabort=T(bn,g,"TestLoadImage: abort",!1,h,v),v.ontimeout=T(bn,g,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=c}else h(!1)}function Tu(c,h){let g=new Lr,v=new AbortController,N=setTimeout(()=>{v.abort(),bn(g,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:v.signal}).then(V=>{clearTimeout(N),V.ok?bn(g,"TestPingServer: ok",!0,h):bn(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(N),bn(g,"TestPingServer: error",!1,h)})}function bn(c,h,g,v,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),v(g)}catch{}}function Su(){this.g=new th}function $a(c,h,g){let v=g||"";try{Us(c,function(N,V){let K=N;f(N)&&(K=La(N)),h.push(v+V+"="+encodeURIComponent(K))})}catch(N){throw h.push(v+"type="+encodeURIComponent("_badmap")),N}}function cn(c){this.l=c.Ub||null,this.j=c.eb||!1}U(cn,Fs),cn.prototype.g=function(){return new zi(this.l,this.j)},cn.prototype.i=(function(c){return function(){return c}})({});function zi(c,h){Ot.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(zi,Ot),n=zi.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,io(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?Br(this):io(this),this.readyState==3&&Wc(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Br(this))},n.Qa=function(c){this.g&&(this.response=c,Br(this))},n.ga=function(){this.g&&Br(this)};function Br(c){c.readyState=4,c.l=null,c.j=null,c.v=null,io(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=h.next();return c.join(`\r
`)};function io(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Kc(c){let h="";return Se(c,function(g,v){h+=v,h+=":",h+=g,h+=`\r
`}),h}function Yo(c,h,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=Kc(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):De(c,h,g))}function Qe(c){Ot.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Qe,Ot);var sh=/^https?$/i,bt=["POST","PUT"];n=Qe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ba.g(),this.v=this.o?$c(this.o):$c(Ba),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(V){Mu(this,V);return}if(c=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var N in v)g.set(N,v[N]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let V of v.keys())g.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),N=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(bt,h,void 0))||v||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,K]of g)this.g.setRequestHeader(V,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ou(this),this.u=!0,this.g.send(c),this.u=!1}catch(V){Mu(this,V)}};function Mu(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,ji(c),Co(c)}function ji(c){c.A||(c.A=!0,Dt(c,"complete"),Dt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Dt(this,"complete"),Dt(this,"abort"),Co(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Co(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Zo(this):this.bb())},n.bb=function(){Zo(this)};function Zo(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Tn(c)!=4||c.Z()!=2)){if(c.u&&Tn(c)==4)lu(c.Ea,0,c);else if(Dt(c,"readystatechange"),Tn(c)==4){c.h=!1;try{let K=c.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var v;if(v=K===0){var N=String(c.D).match(Pi)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),v=!sh.test(N?N.toLowerCase():"")}g=v}if(g)Dt(c,"complete"),Dt(c,"success");else{c.m=6;try{var V=2<Tn(c)?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.Z()+"]",ji(c)}}finally{Co(c)}}}}function Co(c,h){if(c.g){Ou(c);let g=c.g,v=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Dt(c,"ready");try{g.onreadystatechange=v}catch{}}}function Ou(c){c.I&&(l.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Tn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),Mp(h)}};function Au(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ah(c){let h={};c=(c.g&&2<=Tn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<c.length;v++){if(ae(c[v]))continue;var g=R(c[v]);let N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let V=h[N]||[];h[N]=V,V.push(g)}k(h,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ro(c,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||h}function Du(c){this.Aa=0,this.i=[],this.j=new Lr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ro("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ro("baseRetryDelayMs",5e3,c),this.cb=ro("retryDelaySeedMs",1e4,c),this.Wa=ro("forwardChannelMaxRetries",2,c),this.wa=ro("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yt(c&&c.concurrentRequestLimit),this.Da=new Su,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Du.prototype,n.la=8,n.G=1,n.connect=function(c,h,g,v){Vt(0),this.W=c,this.H=h||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=Jc(this,null,this.W),es(this)};function Jo(c){if(Xi(c),c.G==3){var h=c.U++,g=hn(c.I);if(De(g,"SID",c.K),De(g,"RID",h),De(g,"TYPE","terminate"),zr(c,g),h=new _i(c,c.j,h),h.L=2,h.v=no(hn(g)),g=!1,l.navigator&&l.navigator.sendBeacon)try{g=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!g&&l.Image&&(new Image().src=h.v,g=!0),g||(h.g=$s(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Wo(h)}Zc(c)}function Xo(c){c.g&&(js(c),c.g.cancel(),c.g=null)}function Xi(c){Xo(c),c.u&&(l.clearTimeout(c.u),c.u=null),ts(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function es(c){if(!an(c.h)&&!c.s){c.s=!0;var h=c.Ga;kr||Kn(),ke||(kr(),ke=!0),Jt.add(h,c),c.B=0}}function ch(c,h){return Bs(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ce(C(c.Ga,c,h),Ga(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let N=new _i(this,this.j,c),V=this.o;if(this.S&&(V?(V=E(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(N.H=V,V=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=Qc(this,N,h),g=hn(this.I),De(g,"RID",c),De(g,"CVER",22),this.D&&De(g,"X-HTTP-Session-Id",this.D),zr(this,g),V&&(this.O?h="headers="+encodeURIComponent(String(Kc(V)))+"&"+h:this.m&&Yo(g,this.m,V)),Vr(this.h,N),this.Ua&&De(g,"TYPE","init"),this.P?(De(g,"$req",h),De(g,"SID","null"),N.T=!0,xo(N,g,null)):xo(N,g,h),this.G=2}}else this.G==3&&(c?Ur(this,c):this.i.length==0||an(this.h)||Ur(this))};function Ur(c,h){var g;h?g=h.l:g=c.U++;let v=hn(c.I);De(v,"SID",c.K),De(v,"RID",g),De(v,"AID",c.T),zr(c,v),c.m&&c.o&&Yo(v,c.m,c.o),g=new _i(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),h&&(c.i=h.D.concat(c.i)),h=Qc(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Vr(c.h,g),xo(g,v,h)}function zr(c,h){c.H&&Se(c.H,function(g,v){De(h,v,g)}),c.l&&Us({},function(g,v){De(h,v,g)})}function Qc(c,h,g){g=Math.min(c.i.length,g);var v=c.l?C(c.l.Na,c.l,c):null;e:{var N=c.i;let V=-1;for(;;){let K=["count="+g];V==-1?0<g?(V=N[0].g,K.push("ofs="+V)):V=0:K.push("ofs="+V);let Ie=!0;for(let lt=0;lt<g;lt++){let Pe=N[lt].g,ot=N[lt].map;if(Pe-=V,0>Pe)V=Math.max(0,N[lt].g-100),Ie=!1;else try{$a(ot,K,"req"+Pe+"_")}catch{v&&v(ot)}}if(Ie){v=K.join("&");break e}}}return c=c.i.splice(0,g),h.D=c,v}function Ha(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;kr||Kn(),ke||(kr(),ke=!0),Jt.add(h,c),c.v=0}}function qa(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ce(C(c.Fa,c),Ga(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Yc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ce(C(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),Xo(this),Yc(this))};function js(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function Yc(c){c.g=new _i(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=hn(c.qa);De(h,"RID","rpc"),De(h,"SID",c.K),De(h,"AID",c.T),De(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&De(h,"TO",c.ja),De(h,"TYPE","xmlhttp"),zr(c,h),c.m&&c.o&&Yo(h,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=no(hn(h)),g.m=null,g.P=!0,vu(g,c)}n.Za=function(){this.C!=null&&(this.C=null,Xo(this),qa(this),Vt(19))};function ts(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function ku(c,h){var g=null;if(c.g==h){ts(c),js(c),c.g=null;var v=2}else if(Fr(c.h,h))g=h.D,ja(c.h,h),v=1;else return;if(c.G!=0){if(h.o)if(v==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var N=c.B;v=eo(),Dt(v,new Ki(v,g)),es(c)}else Ha(c);else if(N=h.s,N==3||N==0&&0<h.X||!(v==1&&ch(c,h)||v==2&&qa(c)))switch(g&&0<g.length&&(h=c.h,h.i=h.i.concat(g)),N){case 1:$i(c,5);break;case 4:$i(c,10);break;case 3:$i(c,6);break;default:$i(c,2)}}}function Ga(c,h){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*h}function $i(c,h){if(c.j.info("Error code "+h),h==2){var g=C(c.fb,c),v=c.Xa;let N=!v;v=new Qn(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||tn(v,"https"),no(v),N?Pu(v.toString(),g):Tu(v.toString(),g)}else Vt(2);c.G=0,c.l&&c.l.sa(h),Zc(c),Xi(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Zc(c){if(c.G=0,c.ka=[],c.l){let h=Xe(c.h);(h.length!=0||c.i.length!=0)&&(j(c.ka,h),j(c.ka,c.i),c.h.i.length=0,H(c.i),c.i.length=0),c.l.ra()}}function Jc(c,h,g){var v=g instanceof Qn?hn(g):new Qn(g);if(v.g!="")h&&(v.g=h+"."+v.g),Bi(v,v.s);else{var N=l.location;v=N.protocol,h=h?h+"."+N.hostname:N.hostname,N=+N.port;var V=new Qn(null);v&&tn(V,v),h&&(V.g=h),N&&Bi(V,N),g&&(V.l=g),v=V}return g=c.D,h=c.ya,g&&h&&De(v,g,h),De(v,"VER",c.la),zr(c,v),v}function $s(c,h,g){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Qe(new cn({eb:g})):new Qe(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function oo(){}n=oo.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ns(){}ns.prototype.g=function(c,h){return new Bt(c,h)};function Bt(c,h){Ot.call(this),this.g=new Du(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!ae(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!ae(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new er(this)}U(Bt,Ot),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Jo(this.g)},Bt.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=La(c),c=g);h.i.push(new za(h.Ya++,c)),h.G==3&&es(h)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,Bt.aa.N.call(this)};function Ti(c){Fa.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let g in h){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}U(Ti,Fa);function Xc(){Va.call(this),this.status=1}U(Xc,Va);function er(c){this.g=c}U(er,oo),er.prototype.ua=function(){Dt(this.g,"a")},er.prototype.ta=function(c){Dt(this.g,new Ti(c))},er.prototype.sa=function(c){Dt(this.g,new Xc)},er.prototype.ra=function(){Dt(this.g,"b")},ns.prototype.createWebChannel=ns.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,rO=Rc.createWebChannelTransport=function(){return new ns},iO=Rc.getStatEventTarget=function(){return eo()},nO=Rc.Event=Fi,aw=Rc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,Km=Rc.ErrorCode=Yi,Hc.COMPLETE="complete",tO=Rc.EventType=Hc,hu.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,Gf=Rc.WebChannel=hu,Zte=Rc.FetchXmlHttpFactory=cn,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,eO=Rc.XhrIo=Qe}).apply(typeof sw<"u"?sw:typeof self<"u"?self:typeof window<"u"?window:{});var _6="@firebase/firestore",v6="4.8.0";var Di=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Di.UNAUTHENTICATED=new Di(null),Di.GOOGLE_CREDENTIALS=new Di("google-credentials-uid"),Di.FIRST_PARTY=new Di("first-party-uid"),Di.MOCK_USER=new Di("mock-user");var fp="11.10.0";var Ld=new fa("@firebase/firestore");function Wf(){return Ld.logLevel}function xe(n,...e){if(Ld.logLevel<=It.DEBUG){let t=e.map(ZA);Ld.debug(`Firestore (${fp}): ${n}`,...t)}}function Nc(n,...e){if(Ld.logLevel<=It.ERROR){let t=e.map(ZA);Ld.error(`Firestore (${fp}): ${n}`,...t)}}function Yl(n,...e){if(Ld.logLevel<=It.WARN){let t=e.map(ZA);Ld.warn(`Firestore (${fp}): ${n}`,...t)}}function ZA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function He(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,l8(n,i,t)}function l8(n,e,t){let i=`FIRESTORE (${fp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Nc(i),new Error(i)}function sn(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||l8(e,r,i)}function rt(n,e){return n}var ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},me=class extends cr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ia=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var pw=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},lO=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Di.UNAUTHENTICATED))}shutdown(){}},uO=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},dO=class{constructor(e){this.t=e,this.currentUser=Di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){sn(this.o===void 0,42304);let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),o=new Ia;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ia,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>O(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},l=u=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?l(u):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ia)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(sn(typeof i.accessToken=="string",31837,{l:i}),new pw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return sn(e===null||typeof e=="string",2055,{h:e}),new Di(e)}},hO=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Di.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},fO=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new hO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Di.FIRST_PARTY))}shutdown(){}invalidateToken(){}},gw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},pO=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){sn(this.o===void 0,3512);let i=o=>{o.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,xe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?r(o):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gw(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(sn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new gw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Jte(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function u8(){return new TextEncoder}var t_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=Jte(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}};function mt(n,e){return n<e?-1:n>e?1:0}function gO(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return mt(i,r);{let o=u8(),s=Xte(o.encode(y6(n,t)),o.encode(y6(e,t)));return s!==0?s:mt(i,r)}}t+=i>65535?2:1}return mt(n.length,e.length)}function y6(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Xte(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return mt(n[t],e[t]);return mt(n.length,e.length)}function ep(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var b6="__name__",mw=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&He(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&He(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=n.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return mt(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):gO(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kc.fromString(e.substring(4,e.length-2))}},Pn=class n extends mw{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},ene=/^[_a-zA-Z][_a-zA-Z0-9]*$/,yo=class n extends mw{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return ene.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===b6}static keyField(){return new n([b6])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},s=!1;for(;r<e.length;){let l=e[r];if(l==="\\"){if(r+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(s=!s,r++):l!=="."||s?(i+=l,r++):(o(),r++)}if(o(),s)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Be=class n{constructor(e){this.path=e}static fromPath(e){return new n(Pn.fromString(e))}static fromName(e){return new n(Pn.fromString(e).popFirst(5))}static empty(){return new n(Pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Pn(e.slice()))}};function d8(n,e,t){if(!t)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tne(n,e,t,i){if(e===!0&&i===!0)throw new me(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function w6(n){if(!Be.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function x6(n){if(Be.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function h8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Kw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":He(12329,{type:typeof n})}function Fd(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Kw(n);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nne(n,e){if(e<=0)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function pi(n,e){let t={typeString:n};return e&&(t.value=e),t}function h_(n,e){if(!h8(n))throw new me(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let s=n[i];if(r&&typeof s!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new me(ne.INVALID_ARGUMENT,t);return!0}var C6=-62135596800,E6=1e6,gi=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*E6);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<C6)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/E6}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(h_(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-C6;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};gi._jsonSchemaVersion="firestore/timestamp/1.0",gi._jsonSchema={type:pi("string",gi._jsonSchemaVersion),seconds:pi("number"),nanoseconds:pi("number")};var at=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new gi(0,0))}static max(){return new n(new gi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var n_=-1,mO=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};mO.UNKNOWN_ID=-1;function ine(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=at.fromTimestamp(i===1e9?new gi(t+1,0):new gi(t,i));return new Vd(r,Be.empty(),e)}function rne(n){return new Vd(n.readTime,n.key,n_)}var Vd=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(at.min(),Be.empty(),n_)}static max(){return new n(at.max(),Be.empty(),n_)}};function one(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(n.documentKey,e.documentKey),t!==0?t:mt(n.largestBatchId,e.largestBatchId))}var sne="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_O=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function pp(n){return O(this,null,function*(){if(n.code!==ne.FAILED_PRECONDITION||n.message!==sne)throw n;xe("LocalStore","Unexpectedly lost primary lease")})}var ce=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,s=!1;e.forEach(l=>{++r,l.next(()=>{++o,s&&o===r&&t()},u=>i(u))}),s=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,s=new Array(o),l=0;for(let u=0;u<o;u++){let f=u;t(e[f]).next(m=>{s[f]=m,++l,l===o&&i(s)},m=>r(m))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};function ane(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gp(n){return n.name==="IndexedDbTransactionError"}var JA=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this._e(r),this.ae=r=>i.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),XA=-1;function Qw(n){return n==null}function i_(n){return n===0&&1/n==-1/0}function cne(n){return typeof n=="number"&&Number.isInteger(n)&&!i_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var f8="";function lne(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=I6(e)),e=une(n.get(t),e);return I6(e)}function une(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":t+="";break;case f8:t+="";break;default:t+=o}}return t}function I6(n){return n+f8+""}var dne="remoteDocuments",p8="owner";var g8="mutationQueues";var m8="mutations";var _8="documentMutations",hne="remoteDocumentsV14";var v8="remoteDocumentGlobal";var y8="targets";var b8="targetDocuments";var w8="targetGlobal",x8="collectionParents";var C8="clientMetadata";var E8="bundles";var I8="namedQueries";var fne="indexConfiguration";var pne="indexState";var gne="indexEntries";var P8="documentOverlays";var mne="globals";var _ne=[g8,m8,_8,dne,y8,p8,w8,b8,C8,v8,x8,E8,I8],fOe=[..._ne,P8],vne=[g8,m8,_8,hne,y8,p8,w8,b8,C8,v8,x8,E8,I8,P8],yne=vne,bne=[...yne,fne,pne,gne];var pOe=[...bne,mne];function P6(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tu(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function T8(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Fn=class n{constructor(e,t){this.comparator=e,this.root=t||Pa.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pa.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zf(this.root,e,this.comparator,!0)}},Zf=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pa=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}};Pa.EMPTY=null,Pa.RED=!0,Pa.BLACK=!1;Pa.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new Pa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ki=class n{constructor(e){this.comparator=e,this.data=new Fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _w(this.data.getIterator())}getIteratorFrom(e){return new _w(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_w=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Uo=class n{constructor(e){this.fields=e,e.sort(yo.comparator)}static empty(){return new n([])}unionWith(e){let t=new ki(yo.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ep(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var vw=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var fr=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new vw("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};fr.EMPTY_BYTE_STRING=new fr("");var wne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lc(n){if(sn(!!n,39018),typeof n=="string"){let e=0,t=wne.exec(n);if(sn(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:In(n.seconds),nanos:In(n.nanos)}}function In(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fc(n){return typeof n=="string"?fr.fromBase64String(n):fr.fromUint8Array(n)}var S8="server_timestamp",M8="__type__",O8="__previous_value__",A8="__local_write_time__";function eD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[M8])===null||t===void 0?void 0:t.stringValue)===S8}function Yw(n){let e=n.mapValue.fields[O8];return eD(e)?Yw(e):e}function r_(n){let e=Lc(n.mapValue.fields[A8].timestampValue);return new gi(e.seconds,e.nanos)}var vO=class{constructor(e,t,i,r,o,s,l,u,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=m}},yw="(default)",bw=class n{constructor(e,t){this.projectId=e,this.database=t||yw}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===yw}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var tD="__type__",D8="__max__",cw={mapValue:{fields:{__type__:{stringValue:D8}}}},nD="__vector__",tp="value";function Zl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eD(n)?4:R8(n)?9007199254740991:k8(n)?10:11:He(28295,{value:n})}function Ma(n,e){if(n===e)return!0;let t=Zl(n);if(t!==Zl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return r_(n).isEqual(r_(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Lc(r.timestampValue),l=Lc(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return Fc(r.bytesValue).isEqual(Fc(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return In(r.geoPointValue.latitude)===In(o.geoPointValue.latitude)&&In(r.geoPointValue.longitude)===In(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return In(r.integerValue)===In(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=In(r.doubleValue),l=In(o.doubleValue);return s===l?i_(s)===i_(l):isNaN(s)&&isNaN(l)}return!1})(n,e);case 9:return ep(n.arrayValue.values||[],e.arrayValue.values||[],Ma);case 10:case 11:return(function(r,o){let s=r.mapValue.fields||{},l=o.mapValue.fields||{};if(P6(s)!==P6(l))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!Ma(s[u],l[u])))return!1;return!0})(n,e);default:return He(52216,{left:n})}}function o_(n,e){return(n.values||[]).find(t=>Ma(t,e))!==void 0}function np(n,e){if(n===e)return 0;let t=Zl(n),i=Zl(e);if(t!==i)return mt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let l=In(o.integerValue||o.doubleValue),u=In(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(n,e);case 3:return T6(n.timestampValue,e.timestampValue);case 4:return T6(r_(n),r_(e));case 5:return gO(n.stringValue,e.stringValue);case 6:return(function(o,s){let l=Fc(o),u=Fc(s);return l.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let l=o.split("/"),u=s.split("/");for(let f=0;f<l.length&&f<u.length;f++){let m=mt(l[f],u[f]);if(m!==0)return m}return mt(l.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let l=mt(In(o.latitude),In(s.latitude));return l!==0?l:mt(In(o.longitude),In(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return S6(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var l,u,f,m;let y=o.fields||{},C=s.fields||{},T=(l=y[tp])===null||l===void 0?void 0:l.arrayValue,U=(u=C[tp])===null||u===void 0?void 0:u.arrayValue,H=mt(((f=T?.values)===null||f===void 0?void 0:f.length)||0,((m=U?.values)===null||m===void 0?void 0:m.length)||0);return H!==0?H:S6(T,U)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===cw.mapValue&&s===cw.mapValue)return 0;if(o===cw.mapValue)return 1;if(s===cw.mapValue)return-1;let l=o.fields||{},u=Object.keys(l),f=s.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let y=0;y<u.length&&y<m.length;++y){let C=gO(u[y],m[y]);if(C!==0)return C;let T=np(l[u[y]],f[m[y]]);if(T!==0)return T}return mt(u.length,m.length)})(n.mapValue,e.mapValue);default:throw He(23264,{le:t})}}function T6(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mt(n,e);let t=Lc(n),i=Lc(e),r=mt(t.seconds,i.seconds);return r!==0?r:mt(t.nanos,i.nanos)}function S6(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let o=np(t[r],i[r]);if(o)return o}return mt(t.length,i.length)}function ip(n){return yO(n)}function yO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=Lc(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Fc(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=yO(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${yO(t.fields[s])}`;return r+"}"})(n.mapValue):He(61005,{value:n})}function dw(n){switch(Zl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Yw(n);return e?16+dw(e):16;case 5:return 2*n.stringValue.length;case 6:return Fc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,o)=>r+dw(o),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return tu(i.fields,(o,s)=>{r+=o.length+dw(s)}),r})(n.mapValue);default:throw He(13486,{value:n})}}function M6(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bO(n){return!!n&&"integerValue"in n}function iD(n){return!!n&&"arrayValue"in n}function O6(n){return!!n&&"nullValue"in n}function A6(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hw(n){return!!n&&"mapValue"in n}function k8(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[tD])===null||t===void 0?void 0:t.stringValue)===nD}function Ym(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return tu(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ym(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ym(n.arrayValue.values[t]);return e}return Object.assign({},n)}function R8(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===D8}var mOe={mapValue:{fields:{[tD]:{stringValue:nD},[tp]:{arrayValue:{}}}}};var vo=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!hw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ym(t)}setAll(e){let t=yo.emptyPath(),i={},r=[];e.forEach((s,l)=>{if(!t.isImmediateParentOf(l)){let u=this.getFieldsMap(t);this.applyChanges(u,i,r),i={},r=[],t=l.popLast()}s?i[l.lastSegment()]=Ym(s):r.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());hw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ma(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];hw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){tu(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(Ym(this.value))}};function N8(n){let e=[];return tu(n.fields,(t,i)=>{let r=new yo([t]);if(hw(i)){let o=N8(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new Uo(e)}var Ss=class n{constructor(e,t,i,r,o,s,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new n(e,0,at.min(),at.min(),at.min(),vo.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,at.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,at.min(),at.min(),vo.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,at.min(),at.min(),vo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var rp=class{constructor(e,t){this.position=e,this.inclusive=t}};function D6(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],s=n.position[r];if(o.field.isKeyField()?i=Be.comparator(Be.fromName(s.referenceValue),t.key):i=np(s,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function k6(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ma(n.position[t],e.position[t]))return!1;return!0}var Bd=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function xne(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ww=class{},fi=class n extends ww{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new xO(e,t,i):t==="array-contains"?new IO(e,i):t==="in"?new PO(e,i):t==="not-in"?new TO(e,i):t==="array-contains-any"?new SO(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new CO(e,i):new EO(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(np(t,this.value)):t!==null&&Zl(this.value)===Zl(t)&&this.matchesComparison(np(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ms=class n extends ww{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return L8(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function L8(n){return n.op==="and"}function F8(n){return Cne(n)&&L8(n)}function Cne(n){for(let e of n.filters)if(e instanceof Ms)return!1;return!0}function wO(n){if(n instanceof fi)return n.field.canonicalString()+n.op.toString()+ip(n.value);if(F8(n))return n.filters.map(e=>wO(e)).join(",");{let e=n.filters.map(t=>wO(t)).join(",");return`${n.op}(${e})`}}function V8(n,e){return n instanceof fi?(function(i,r){return r instanceof fi&&i.op===r.op&&i.field.isEqual(r.field)&&Ma(i.value,r.value)})(n,e):n instanceof Ms?(function(i,r){return r instanceof Ms&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,l)=>o&&V8(s,r.filters[l]),!0):!1})(n,e):void He(19439)}function B8(n){return n instanceof fi?(function(t){return`${t.field.canonicalString()} ${t.op} ${ip(t.value)}`})(n):n instanceof Ms?(function(t){return t.op.toString()+" {"+t.getFilters().map(B8).join(" ,")+"}"})(n):"Filter"}var xO=class extends fi{constructor(e,t,i){super(e,t,i),this.key=Be.fromName(i.referenceValue)}matches(e){let t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}},CO=class extends fi{constructor(e,t){super(e,"in",t),this.keys=U8("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},EO=class extends fi{constructor(e,t){super(e,"not-in",t),this.keys=U8("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function U8(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Be.fromName(i.referenceValue))}var IO=class extends fi{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return iD(t)&&o_(t.arrayValue,this.value)}},PO=class extends fi{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&o_(this.value.arrayValue,t)}},TO=class extends fi{constructor(e,t){super(e,"not-in",t)}matches(e){if(o_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!o_(this.value.arrayValue,t)}},SO=class extends fi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!iD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>o_(this.value.arrayValue,i))}};var MO=class{constructor(e,t=null,i=[],r=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=l,this.Pe=null}};function R6(n,e=null,t=[],i=[],r=null,o=null,s=null){return new MO(n,e,t,i,r,o,s)}function rD(n){let e=rt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>wO(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(o){return o.field.canonicalString()+o.dir})(i)).join(","),Qw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ip(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ip(i)).join(",")),e.Pe=t}return e.Pe}function oD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xne(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!V8(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!k6(n.startAt,e.startAt)&&k6(n.endAt,e.endAt)}function OO(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Jl=class{constructor(e,t=null,i=[],r=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Ene(n,e,t,i,r,o,s,l){return new Jl(n,e,t,i,r,o,s,l)}function sD(n){return new Jl(n)}function N6(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function z8(n){return n.collectionGroup!==null}function Zm(n){let e=rt(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new ki(yo.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Bd(o,i))}),t.has(yo.keyField().canonicalString())||e.Te.push(new Bd(yo.keyField(),i))}return e.Te}function Ta(n){let e=rt(n);return e.Ie||(e.Ie=Ine(e,Zm(n))),e.Ie}function Ine(n,e){if(n.limitType==="F")return R6(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new Bd(r.field,o)});let t=n.endAt?new rp(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new rp(n.startAt.position,n.startAt.inclusive):null;return R6(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function AO(n,e){let t=n.filters.concat([e]);return new Jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xw(n,e,t){return new Jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zw(n,e){return oD(Ta(n),Ta(e))&&n.limitType===e.limitType}function j8(n){return`${rD(Ta(n))}|lt:${n.limitType}`}function Kf(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>B8(r)).join(", ")}]`),Qw(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>ip(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>ip(r)).join(",")),`Target(${i})`})(Ta(n))}; limitType=${n.limitType})`}function Jw(n,e){return e.isFoundDocument()&&(function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Be.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(let o of Zm(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(s,l,u){let f=D6(s,l,u);return s.inclusive?f<=0:f<0})(i.startAt,Zm(i),r)||i.endAt&&!(function(s,l,u){let f=D6(s,l,u);return s.inclusive?f>=0:f>0})(i.endAt,Zm(i),r))})(n,e)}function Pne(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $8(n){return(e,t)=>{let i=!1;for(let r of Zm(n)){let o=Tne(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function Tne(n,e,t){let i=n.field.isKeyField()?Be.comparator(e.key,t.key):(function(o,s,l){let u=s.data.field(o),f=l.data.field(o);return u!==null&&f!==null?np(u,f):He(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return He(19790,{direction:n.dir})}}var Vc=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tu(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return T8(this.inner)}size(){return this.innerSize}};var Sne=new Fn(Be.comparator);function Bc(){return Sne}var H8=new Fn(Be.comparator);function Qm(...n){let e=H8;for(let t of n)e=e.insert(t.key,t);return e}function q8(n){let e=H8;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Dd(){return Jm()}function G8(){return Jm()}function Jm(){return new Vc(n=>n.toString(),(n,e)=>n.isEqual(e))}var Mne=new Fn(Be.comparator),One=new ki(Be.comparator);function Mt(...n){let e=One;for(let t of n)e=e.add(t);return e}var Ane=new ki(mt);function Dne(){return Ane}function aD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:i_(e)?"-0":e}}function W8(n){return{integerValue:""+n}}function kne(n,e){return cne(e)?W8(e):aD(n,e)}var op=class{constructor(){this._=void 0}};function Rne(n,e,t){return n instanceof Ud?(function(r,o){let s={fields:{[M8]:{stringValue:S8},[A8]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&eD(o)&&(o=Yw(o)),o&&(s.fields[O8]=o),{mapValue:s}})(t,e):n instanceof zd?Q8(n,e):n instanceof jd?Y8(n,e):(function(r,o){let s=K8(r,o),l=L6(s)+L6(r.Ee);return bO(s)&&bO(r.Ee)?W8(l):aD(r.serializer,l)})(n,e)}function Nne(n,e,t){return n instanceof zd?Q8(n,e):n instanceof jd?Y8(n,e):t}function K8(n,e){return n instanceof sp?(function(i){return bO(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}var Ud=class extends op{},zd=class extends op{constructor(e){super(),this.elements=e}};function Q8(n,e){let t=Z8(e);for(let i of n.elements)t.some(r=>Ma(r,i))||t.push(i);return{arrayValue:{values:t}}}var jd=class extends op{constructor(e){super(),this.elements=e}};function Y8(n,e){let t=Z8(e);for(let i of n.elements)t=t.filter(r=>!Ma(r,i));return{arrayValue:{values:t}}}var sp=class extends op{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function L6(n){return In(n.integerValue||n.doubleValue)}function Z8(n){return iD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var DO=class{constructor(e,t){this.field=e,this.transform=t}};function Lne(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof zd&&r instanceof zd||i instanceof jd&&r instanceof jd?ep(i.elements,r.elements,Ma):i instanceof sp&&r instanceof sp?Ma(i.Ee,r.Ee):i instanceof Ud&&r instanceof Ud})(n.transform,e.transform)}var kO=class{constructor(e,t){this.version=e,this.transformResults=t}},ql=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fw(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ap=class{};function J8(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cw(n.key,ql.none()):new $d(n.key,n.data,ql.none());{let t=n.data,i=vo.empty(),r=new ki(yo.comparator);for(let o of e.fields)if(!r.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Oa(n.key,i,new Uo(r.toArray()),ql.none())}}function Fne(n,e,t){n instanceof $d?(function(r,o,s){let l=r.value.clone(),u=V6(r.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(n,e,t):n instanceof Oa?(function(r,o,s){if(!fw(r.precondition,o))return void o.convertToUnknownDocument(s.version);let l=V6(r.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(X8(r)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Xm(n,e,t,i){return n instanceof $d?(function(o,s,l,u){if(!fw(o.precondition,s))return l;let f=o.value.clone(),m=B6(o.fieldTransforms,u,s);return f.setAll(m),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof Oa?(function(o,s,l,u){if(!fw(o.precondition,s))return l;let f=B6(o.fieldTransforms,u,s),m=s.data;return m.setAll(X8(o)),m.setAll(f),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))})(n,e,t,i):(function(o,s,l){return fw(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(n,e,t)}function Vne(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),o=K8(i.transform,r||null);o!=null&&(t===null&&(t=vo.empty()),t.set(i.field,o))}return t||null}function F6(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ep(i,r,(o,s)=>Lne(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var $d=class extends ap{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Oa=class extends ap{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function X8(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function V6(n,e,t){let i=new Map;sn(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let r=0;r<t.length;r++){let o=n[r],s=o.transform,l=e.data.field(o.field);i.set(o.field,Nne(s,l,t[r]))}return i}function B6(n,e,t){let i=new Map;for(let r of n){let o=r.transform,s=t.data.field(r.field);i.set(r.field,Rne(o,s,e))}return i}var Cw=class extends ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},RO=class extends ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var NO=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&Fne(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Xm(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Xm(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=G8();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,l=this.applyToLocalView(s,o.mutatedFields);l=t.has(r.key)?null:l;let u=J8(s,l);u!==null&&i.set(r.key,u),s.isValidDocument()||s.convertToNoDocument(at.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mt())}isEqual(e){return this.batchId===e.batchId&&ep(this.mutations,e.mutations,(t,i)=>F6(t,i))&&ep(this.baseMutations,e.baseMutations,(t,i)=>F6(t,i))}},LO=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){sn(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return Mne})(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new n(e,t,i,r)}};var FO=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var VO=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var di,Lt;function Bne(n){switch(n){case ne.OK:return He(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return He(15467,{code:n})}}function eB(n){if(n===void 0)return Nc("GRPC error has no .code"),ne.UNKNOWN;switch(n){case di.OK:return ne.OK;case di.CANCELLED:return ne.CANCELLED;case di.UNKNOWN:return ne.UNKNOWN;case di.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case di.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case di.INTERNAL:return ne.INTERNAL;case di.UNAVAILABLE:return ne.UNAVAILABLE;case di.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case di.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case di.NOT_FOUND:return ne.NOT_FOUND;case di.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case di.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case di.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case di.ABORTED:return ne.ABORTED;case di.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case di.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case di.DATA_LOSS:return ne.DATA_LOSS;default:return He(39323,{code:n})}}(Lt=di||(di={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";var U6=null;var Une=new kc([4294967295,4294967295],0);function z6(n){let e=u8().encode(n),t=new XM;return t.update(e),new Uint8Array(t.digest())}function j6(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new kc([t,i],0),new kc([r,o],0)]}var BO=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new kd(`Invalid padding: ${t}`);if(i<0)throw new kd(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new kd(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new kd(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=kc.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply(kc.fromNumber(i)));return r.compare(Une)===1&&(r=new kc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=z6(e),[i,r]=j6(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(i,r,o);if(!this.ye(s))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,r,t);return i.forEach(l=>s.insert(l)),s}insert(e){if(this.fe===0)return;let t=z6(e),[i,r]=j6(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(i,r,o);this.we(s)}}we(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},kd=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ew=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,s_.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(at.min(),r,new Fn(mt),Bc(),Mt())}},s_=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,Mt(),Mt(),Mt())}};var Jf=class{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}},Iw=class{constructor(e,t){this.targetId=e,this.De=t}},Pw=class{constructor(e,t,i=fr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Tw=class{constructor(){this.ve=0,this.Ce=$6(),this.Fe=fr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Mt(),t=Mt(),i=Mt();return this.Ce.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:He(38017,{changeType:o})}}),new s_(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=$6()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,sn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},UO=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Bc(),this.je=lw(),this.Je=lw(),this.He=new Fn(mt)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:He(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,r)=>{this.nt(r)&&t(r)})}it(e){let t=e.targetId,i=e.De.count,r=this.st(t);if(r){let o=r.target;if(OO(o))if(i===0){let s=new Be(o.path);this.Xe(t,s,Ss.newNoDocument(s,at.min()))}else sn(i===1,20013,{expectedCount:i});else{let s=this.ot(t);if(s!==i){let l=this._t(e),u=l?this.ut(l,e,s):1;if(u!==0){this.rt(t);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,f)}U6?.ct((function(m,y,C,T,U){var H,j,X,ae,le,he;let ct={localCacheCount:m,existenceFilterCount:y.count,databaseId:C.database,projectId:C.projectId},Se=y.unchangedNames;return Se&&(ct.bloomFilter={applied:U===0,hashCount:(H=Se?.hashCount)!==null&&H!==void 0?H:0,bitmapLength:(ae=(X=(j=Se?.bits)===null||j===void 0?void 0:j.bitmap)===null||X===void 0?void 0:X.length)!==null&&ae!==void 0?ae:0,padding:(he=(le=Se?.bits)===null||le===void 0?void 0:le.padding)!==null&&he!==void 0?he:0,mightContain:k=>{var E;return(E=T?.mightContain(k))!==null&&E!==void 0&&E}}),ct})(s,e.De,this.We.lt(),l,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,s,l;try{s=Fc(i).toUint8Array()}catch(u){if(u instanceof vw)return Yl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new BO(s,r,o)}catch(u){return Yl(u instanceof kd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){let i=this.We.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let s=this.We.lt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Xe(t,o,null),r++)}),r}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let l=this.st(s);if(l){if(o.current&&OO(l.target)){let u=new Be(l.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Ss.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let i=Mt();this.Je.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{let f=this.st(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let r=new Ew(e,t,this.He,this.ze,i);return this.ze=Bc(),this.je=lw(),this.Je=lw(),this.He=new Fn(mt),r}Ze(e,t){if(!this.nt(e))return;let i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Tw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new ki(mt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new ki(mt),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Tw),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function lw(){return new Fn(Be.comparator)}function $6(){return new Fn(Be.comparator)}var zne={asc:"ASCENDING",desc:"DESCENDING"},jne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$ne={and:"AND",or:"OR"},zO=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function jO(n,e){return n.useProto3Json||Qw(e)?e:{value:e}}function Sw(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Hne(n,e){return Sw(n,e.toTimestamp())}function Sa(n){return sn(!!n,49232),at.fromTimestamp((function(t){let i=Lc(t);return new gi(i.seconds,i.nanos)})(n))}function cD(n,e){return $O(n,e).canonicalString()}function $O(n,e){let t=(function(r){return new Pn(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function nB(n){let e=Pn.fromString(n);return sn(aB(e),10190,{key:e.toString()}),e}function HO(n,e){return cD(n.databaseId,e.path)}function oO(n,e){let t=nB(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(rB(t))}function iB(n,e){return cD(n.databaseId,e)}function qne(n){let e=nB(n);return e.length===4?Pn.emptyPath():rB(e)}function qO(n){return new Pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rB(n){return sn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function H6(n,e,t){return{name:HO(n,e),fields:t.value.mapValue.fields}}function Gne(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:He(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,m){return f.useProto3Json?(sn(m===void 0||typeof m=="string",58123),fr.fromBase64String(m||"")):(sn(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),fr.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(f){let m=f.code===void 0?ne.UNKNOWN:eB(f.code);return new me(m,f.message||"")})(s);t=new Pw(i,r,o,l||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=oO(n,i.document.name),o=Sa(i.document.updateTime),s=i.document.createTime?Sa(i.document.createTime):at.min(),l=new vo({mapValue:{fields:i.document.fields}}),u=Ss.newFoundDocument(r,o,s,l),f=i.targetIds||[],m=i.removedTargetIds||[];t=new Jf(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=oO(n,i.document),o=i.readTime?Sa(i.readTime):at.min(),s=Ss.newNoDocument(r,o),l=i.removedTargetIds||[];t=new Jf([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=oO(n,i.document),o=i.removedTargetIds||[];t=new Jf([],o,r,null)}else{if(!("filter"in e))return He(11601,{At:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new VO(r,o),l=i.targetId;t=new Iw(l,s)}}return t}function Wne(n,e){let t;if(e instanceof $d)t={update:H6(n,e.key,e.value)};else if(e instanceof Cw)t={delete:HO(n,e.key)};else if(e instanceof Oa)t={update:H6(n,e.key,e.data),updateMask:nie(e.fieldMask)};else{if(!(e instanceof RO))return He(16599,{Rt:e.type});t={verify:HO(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>(function(o,s){let l=s.transform;if(l instanceof Ud)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof jd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sp)return{fieldPath:s.field.canonicalString(),increment:l.Ee};throw He(20930,{transform:s.transform})})(0,i))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:Hne(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:He(27497)})(n,e.precondition)),t}function Kne(n,e){return n&&n.length>0?(sn(e!==void 0,14353),n.map(t=>(function(r,o){let s=r.updateTime?Sa(r.updateTime):Sa(o);return s.isEqual(at.min())&&(s=Sa(o)),new kO(s,r.transformResults||[])})(t,e))):[]}function Qne(n,e){return{documents:[iB(n,e.path)]}}function Yne(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=iB(n,r);let o=(function(f){if(f.length!==0)return sB(Ms.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(f){if(f.length!==0)return f.map(m=>(function(C){return{field:Qf(C.field),direction:Xne(C.dir)}})(m))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let l=jO(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:t,parent:r}}function Zne(n){let e=qne(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){sn(i===1,65062);let m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(y){let C=oB(y);return C instanceof Ms&&F8(C)?C.getFilters():[C]})(t.where));let s=[];t.orderBy&&(s=(function(y){return y.map(C=>(function(U){return new Bd(Yf(U.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(C))})(t.orderBy));let l=null;t.limit&&(l=(function(y){let C;return C=typeof y=="object"?y.value:y,Qw(C)?null:C})(t.limit));let u=null;t.startAt&&(u=(function(y){let C=!!y.before,T=y.values||[];return new rp(T,C)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){let C=!y.before,T=y.values||[];return new rp(T,C)})(t.endAt)),Ene(e,r,s,o,l,"F",u,f)}function Jne(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oB(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Yf(t.unaryFilter.field);return fi.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Yf(t.unaryFilter.field);return fi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Yf(t.unaryFilter.field);return fi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Yf(t.unaryFilter.field);return fi.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(n):n.fieldFilter!==void 0?(function(t){return fi.create(Yf(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ms.create(t.compositeFilter.filters.map(i=>oB(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(t.compositeFilter.op))})(n):He(30097,{filter:n})}function Xne(n){return zne[n]}function eie(n){return jne[n]}function tie(n){return $ne[n]}function Qf(n){return{fieldPath:n.canonicalString()}}function Yf(n){return yo.fromServerFormat(n.fieldPath)}function sB(n){return n instanceof fi?(function(t){if(t.op==="=="){if(A6(t.value))return{unaryFilter:{field:Qf(t.field),op:"IS_NAN"}};if(O6(t.value))return{unaryFilter:{field:Qf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(A6(t.value))return{unaryFilter:{field:Qf(t.field),op:"IS_NOT_NAN"}};if(O6(t.value))return{unaryFilter:{field:Qf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qf(t.field),op:eie(t.op),value:t.value}}})(n):n instanceof Ms?(function(t){let i=t.getFilters().map(r=>sB(r));return i.length===1?i[0]:{compositeFilter:{op:tie(t.op),filters:i}}})(n):He(54877,{filter:n})}function nie(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function aB(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var a_=class n{constructor(e,t,i,r,o=at.min(),s=at.min(),l=fr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var GO=class{constructor(e){this.gt=e}};function iie(n){let e=Zne({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xw(e,e.limit,"L"):e}var Mw=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(In(e.integerValue));else if("doubleValue"in e){let i=In(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),i_(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=Lc(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Fc(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?R8(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):k8(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):He(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let r of Object.keys(i))this.xt(r,t),this.Dt(i[r],t)}Lt(e,t){var i,r;let o=e.fields||{};this.Ct(t,53);let s=tp,l=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Ct(t,15),t.Ft(In(l)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let r of i)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),Be.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Mw.Ut=new Mw;var WO=class{constructor(){this.Dn=new KO}addToCollectionParentIndex(e,t){return this.Dn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Vd.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Vd.min())}updateCollectionGroup(e,t,i){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}},KO=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ki(Pn.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ki(Pn.comparator)).toArray()}};var _Oe=new Uint8Array(0);var q6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cB=41943040,Bo=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Bo.DEFAULT_COLLECTION_PERCENTILE=10,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bo.DEFAULT=new Bo(cB,Bo.DEFAULT_COLLECTION_PERCENTILE,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bo.DISABLED=new Bo(-1,0,0);var c_=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var G6="LruGarbageCollector",rie=1048576;function W6([n,e],[t,i]){let r=mt(n,t);return r===0?mt(e,i):r}var QO=class{constructor(e){this.Tr=e,this.buffer=new ki(W6),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();W6(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},YO=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){xe(G6,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>O(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){gp(t)?xe(G6,"Ignoring IndexedDB error during garbage collection: ",t):yield pp(t)}yield this.Rr(3e5)}))}},ZO=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ce.resolve(JA.ue);let i=new QO(t);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(q6)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q6):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,o,s,l,u,f,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,s=Date.now(),this.nthSequenceNumber(e,r))).next(y=>(i=y,l=Date.now(),this.removeTargets(e,i,t))).next(y=>(o=y,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(y=>(f=Date.now(),Wf()<=It.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-m}ms
	Determined least recently used ${r} in `+(l-s)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${y} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:y})))}};function oie(n,e){return new ZO(n,e)}var JO=class{constructor(){this.changes=new Vc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ss.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?ce.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var XO=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var eA=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Xm(i.mutation,r,Uo.empty(),gi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Mt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Mt()){let r=Dd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let s=Qm();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let i=Dd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Mt()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,l)=>{t.set(s,l)})})}computeViews(e,t,i,r){let o=Bc(),s=Jm(),l=(function(){return Jm()})();return t.forEach((u,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Oa)?o=o.insert(f.key,f):m!==void 0?(s.set(f.key,m.mutation.getFieldMask()),Xm(m.mutation,f,m.mutation.getFieldMask(),gi.now())):s.set(f.key,Uo.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,m)=>s.set(f,m)),t.forEach((f,m)=>{var y;return l.set(f,new XO(m,(y=s.get(f))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,t){let i=Jm(),r=new Fn((s,l)=>s-l),o=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let l of s)l.keys().forEach(u=>{let f=t.get(u);if(f===null)return;let m=i.get(u)||Uo.empty();m=l.applyToLocalView(f,m),i.set(u,m);let y=(r.get(l.batchId)||Mt()).add(u);r=r.insert(l.batchId,y)})}).next(()=>{let s=[],l=r.getReverseIterator();for(;l.hasNext();){let u=l.getNext(),f=u.key,m=u.value,y=G8();m.forEach(C=>{if(!o.has(C)){let T=J8(t.get(C),i.get(C));T!==null&&y.set(C,T),o=o.add(C)}}),s.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ce.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(s){return Be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):z8(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):ce.resolve(Dd()),l=n_,u=o;return s.next(f=>ce.forEach(f,(m,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),o.get(m)?ce.resolve():this.remoteDocumentCache.getEntry(e,m).next(C=>{u=u.insert(m,C)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,Mt())).next(m=>({batchId:l,changes:q8(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(i=>{let r=Qm();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,s=Qm();return this.indexManager.getCollectionParents(e,o).next(l=>ce.forEach(l,u=>{let f=(function(y,C){return new Jl(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((y,C)=>{s=s.insert(y,C)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(s=>{o.forEach((u,f)=>{let m=f.getKey();s.get(m)===null&&(s=s.insert(m,Ss.newInvalidDocument(m)))});let l=Qm();return s.forEach((u,f)=>{let m=o.get(u);m!==void 0&&Xm(m.mutation,f,Uo.empty(),gi.now()),Jw(t,f)&&(l=l.insert(u,f))}),l})}};var tA=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ce.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Sa(r.createTime)}})(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:iie(r.bundledQuery),readTime:Sa(r.readTime)}})(t)),ce.resolve()}};var nA=class{constructor(){this.overlays=new Fn(Be.comparator),this.kr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Dd();return ce.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.wt(e,t,o)}),ce.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.kr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),ce.resolve()}getOverlaysForCollection(e,t,i){let r=Dd(),o=t.length+1,s=new Be(t.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){let u=l.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return ce.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Fn((f,m)=>f-m),s=this.overlays.getIterator();for(;s.hasNext();){let f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Dd(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let l=Dd(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>l.set(f,m)),!(l.size()>=r)););return ce.resolve(l)}wt(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new FO(t,i));let o=this.kr.get(t);o===void 0&&(o=Mt(),this.kr.set(t,o)),this.kr.set(t,o.add(i.key))}};var iA=class{constructor(){this.sessionToken=fr.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}};var l_=class{constructor(){this.qr=new ki(hi.Qr),this.$r=new ki(hi.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let i=new hi(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new hi(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){let t=new Be(new Pn([])),i=new hi(t,e),r=new hi(t,e+1),o=[];return this.$r.forEachInRange([i,r],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Be(new Pn([])),i=new hi(t,e),r=new hi(t,e+1),o=Mt();return this.$r.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new hi(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},hi=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Be.comparator(e.key,t.key)||mt(e.Hr,t.Hr)}static Ur(e,t){return mt(e.Hr,t.Hr)||Be.comparator(e.key,t.key)}};var rA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new ki(hi.Qr)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new NO(o,t,i,r);this.mutationQueue.push(s);for(let l of r)this.Yr=this.Yr.add(new hi(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ce.resolve(s)}lookupMutationBatch(e,t){return ce.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Xr(i),o=r<0?0:r;return ce.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?XA:this.er-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new hi(t,0),r=new hi(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],s=>{let l=this.Zr(s.Hr);o.push(l)}),ce.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ki(mt);return t.forEach(r=>{let o=new hi(r,0),s=new hi(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],l=>{i=i.add(l.Hr)})}),ce.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;Be.isDocumentKey(o)||(o=o.child(""));let s=new hi(new Be(o),0),l=new ki(mt);return this.Yr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(u.Hr)),!0)},s),ce.resolve(this.ei(l))}ei(e){let t=[];return e.forEach(i=>{let r=this.Zr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){sn(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ce.forEach(t.mutations,r=>{let o=new hi(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){let i=new hi(t,0),r=this.Yr.firstAfterOrEqual(i);return ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var oA=class{constructor(e){this.ni=e,this.docs=(function(){return new Fn(Be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,s=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return ce.resolve(i?i.document.mutableCopy():Ss.newInvalidDocument(t))}getEntries(e,t){let i=Bc();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Ss.newInvalidDocument(r))}),ce.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Bc(),s=t.path,l=new Be(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){let{key:f,value:{document:m}}=u.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||one(rne(m),i)<=0||(r.has(m.key)||Jw(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ce.resolve(o)}getAllFromCollectionGroup(e,t,i,r){He(9500)}ri(e,t){return ce.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new sA(this)}getSize(e){return ce.resolve(this.size)}},sA=class extends JO{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),ce.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var aA=class{constructor(e){this.persistence=e,this.ii=new Vc(t=>rD(t),oD),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.si=0,this.oi=new l_,this.targetCount=0,this._i=c_.ar()}forEachTarget(e,t){return this.ii.forEach((i,r)=>t(r)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ce.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new c_(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.hr(t),ce.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.ii.forEach((s,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),ce.waitFor(o).next(()=>r)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){let i=this.ii.get(t)||null;return ce.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ce.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),ce.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){let i=this.oi.Jr(t);return ce.resolve(i)}containsKey(e,t){return ce.resolve(this.oi.containsKey(t))}};var Ow=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new JA(0),this.ci=!1,this.ci=!0,this.li=new iA,this.referenceDelegate=e(this),this.hi=new aA(this),this.indexManager=new WO,this.remoteDocumentCache=(function(r){return new oA(r)})(i=>this.referenceDelegate.Pi(i)),this.serializer=new GO(t),this.Ti=new tA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new rA(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){xe("MemoryPersistence","Starting transaction:",e);let r=new cA(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(e,t){return ce.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}},cA=class extends _O{constructor(e){super(),this.currentSequenceNumber=e}},lA=class n{constructor(e){this.persistence=e,this.Ai=new l_,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw He(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ce.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(r=>this.mi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.mi,i=>{let r=Be.fromPath(i);return this.fi(e,r).next(o=>{o||t.removeEntry(r,at.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ce.or([()=>ce.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Aw=class n{constructor(e,t){this.persistence=e,this.gi=new Vc(i=>lne(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=oie(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return ce.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(o=>o?ce.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,s=>this.Sr(e,s,t).next(l=>{l||(i++,o.removeEntry(s,at.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ce.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ce.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ce.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dw(e.data.value)),t}Sr(e,t,i){return ce.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.gi.get(t);return ce.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var uA=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=Mt(),r=Mt();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var dA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hA=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return SF()?8:ane(Oi())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new dA;return this.ws(e,t,s).next(l=>{if(o.result=l,this.Rs)return this.Ss(e,t,s,l.size)})}).next(()=>o.result)}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(Wf()<=It.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Kf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ce.resolve()):(Wf()<=It.DEBUG&&xe("QueryEngine","Query:",Kf(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Wf()<=It.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Kf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ta(t))):ce.resolve())}ps(e,t){if(N6(t))return ce.resolve(null);let i=Ta(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=xw(t,null,"F"),i=Ta(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=Mt(...o);return this.gs.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.bs(t,l);return this.Ds(t,f,s,u.readTime)?this.ps(e,xw(t,null,"F")):this.vs(e,f,t,u)}))})))}ys(e,t,i,r){return N6(t)||r.isEqual(at.min())?ce.resolve(null):this.gs.getDocuments(e,i).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,i,r)?ce.resolve(null):(Wf()<=It.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kf(t)),this.vs(e,s,t,ine(r,n_)).next(l=>l))})}bs(e,t){let i=new ki($8(e));return t.forEach((r,o)=>{Jw(e,o)&&(i=i.add(o))}),i}Ds(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,t,i){return Wf()<=It.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Kf(t)),this.gs.getDocumentsMatchingQuery(e,t,Vd.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var lD="LocalStore",sie=3e8,fA=class{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Fn(mt),this.Ms=new Vc(o=>rD(o),oD),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eA(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function aie(n,e,t,i){return new fA(n,e,t,i)}function lB(n,e){return O(this,null,function*(){let t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],l=[],u=Mt();for(let f of r){s.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}for(let f of o){l.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}return t.localDocuments.getDocuments(i,u).next(f=>({Bs:f,removedBatchIds:s,addedBatchIds:l}))})})})}function cie(n,e){let t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,m){let y=f.batch,C=y.keys(),T=ce.resolve();return C.forEach(U=>{T=T.next(()=>m.getEntry(u,U)).next(H=>{let j=f.docVersions.get(U);sn(j!==null,48541),H.version.compareTo(j)<0&&(y.applyToRemoteDocument(H,f),H.isValidDocument()&&(H.setReadTime(f.commitVersion),m.addEntry(H)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,y))})(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(l){let u=Mt();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function uB(n){let e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function lie(n,e){let t=rt(n),i=e.snapshotVersion,r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;let l=[];e.targetChanges.forEach((m,y)=>{let C=r.get(y);if(!C)return;l.push(t.hi.removeMatchingKeys(o,m.removedDocuments,y).next(()=>t.hi.addMatchingKeys(o,m.addedDocuments,y)));let T=C.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(fr.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(y,T),(function(H,j,X){return H.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=sie?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(C,T,m)&&l.push(t.hi.updateTargetData(o,T))});let u=Bc(),f=Mt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),l.push(uie(o,s,e.documentUpdates).next(m=>{u=m.Ls,f=m.ks})),!i.isEqual(at.min())){let m=t.hi.getLastRemoteSnapshotVersion(o).next(y=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(m)}return ce.waitFor(l).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(t.Fs=r,o))}function uie(n,e,t){let i=Mt(),r=Mt();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let s=Bc();return t.forEach((l,u)=>{let f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(at.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):xe(lD,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{Ls:s,ks:r}})}function die(n,e){let t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=XA),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function hie(n,e){let t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.hi.getTargetData(i,e).next(o=>o?(r=o,ce.resolve(r)):t.hi.allocateTargetId(i).next(s=>(r=new a_(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}function pA(n,e,t){return O(this,null,function*(){let i=rt(n),r=i.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!gp(s))throw s;xe(lD,`Failed to update sequence numbers for target ${e}: ${s}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)})}function K6(n,e,t){let i=rt(n),r=at.min(),o=Mt();return i.persistence.runTransaction("Execute query","readwrite",s=>(function(u,f,m){let y=rt(u),C=y.Ms.get(m);return C!==void 0?ce.resolve(y.Fs.get(C)):y.hi.getTargetData(f,m)})(i,s,Ta(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(s,e,t?r:at.min(),t?o:Mt())).next(l=>(fie(i,Pne(e),l),{documents:l,qs:o})))}function fie(n,e,t){let i=n.xs.get(e)||at.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.xs.set(e,i)}var Dw=class{constructor(){this.activeTargetIds=Dne()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gA=class{constructor(){this.Fo=new Dw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Dw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mA=class{xo(e){}shutdown(){}};var Q6="ConnectivityMonitor",kw=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){xe(Q6,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){xe(Q6,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var uw=null;function _A(){return uw===null?uw=(function(){return 268435456+Math.round(2147483648*Math.random())})():uw++,"0x"+uw.toString(16)}var sO="RestConnection",pie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},vA=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===yw?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,o){let s=_A(),l=this.Go(e,t.toUriEncodedString());xe(sO,`Sending RPC '${e}' ${s}:`,l,i);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,r,o);let{host:f}=new URL(l),m=go(f);return this.jo(e,l,u,i,m).then(y=>(xe(sO,`Received RPC '${e}' ${s}: `,y),y),y=>{throw Yl(sO,`RPC '${e}' ${s} failed with error: `,y,"url: ",l,"request:",i),y})}Jo(e,t,i,r,o,s){return this.Wo(e,t,i,r,o)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}Go(e,t){let i=pie[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}};var yA=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var hr="WebChannelConnection",bA=class extends vA{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,o){let s=_A();return new Promise((l,u)=>{let f=new eO;f.setWithCredentials(!0),f.listenOnce(tO.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Km.NO_ERROR:let y=f.getResponseJson();xe(hr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(y)),l(y);break;case Km.TIMEOUT:xe(hr,`RPC '${e}' ${s} timed out`),u(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Km.HTTP_ERROR:let C=f.getStatus();if(xe(hr,`RPC '${e}' ${s} failed with status:`,C,"response text:",f.getResponseText()),C>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);let U=T?.error;if(U&&U.status&&U.message){let H=(function(X){let ae=X.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(ae)>=0?ae:ne.UNKNOWN})(U.status);u(new me(H,U.message))}else u(new me(ne.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new me(ne.UNAVAILABLE,"Connection failed."));break;default:He(9055,{c_:e,streamId:s,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{xe(hr,`RPC '${e}' ${s} completed.`)}});let m=JSON.stringify(r);xe(hr,`RPC '${e}' ${s} sending request:`,r),f.send(t,"POST",m,i,15)})}P_(e,t,i){let r=_A(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=rO(),l=iO(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;let m=o.join("");xe(hr,`Creating RPC '${e}' stream ${r}: ${m}`,u);let y=s.createWebChannel(m,u);this.T_(y);let C=!1,T=!1,U=new yA({Ho:j=>{T?xe(hr,`Not sending because RPC '${e}' stream ${r} is closed:`,j):(C||(xe(hr,`Opening RPC '${e}' stream ${r} transport.`),y.open(),C=!0),xe(hr,`RPC '${e}' stream ${r} sending:`,j),y.send(j))},Yo:()=>y.close()}),H=(j,X,ae)=>{j.listen(X,le=>{try{ae(le)}catch(he){setTimeout(()=>{throw he},0)}})};return H(y,Gf.EventType.OPEN,()=>{T||(xe(hr,`RPC '${e}' stream ${r} transport opened.`),U.s_())}),H(y,Gf.EventType.CLOSE,()=>{T||(T=!0,xe(hr,`RPC '${e}' stream ${r} transport closed`),U.__(),this.I_(y))}),H(y,Gf.EventType.ERROR,j=>{T||(T=!0,Yl(hr,`RPC '${e}' stream ${r} transport errored. Name:`,j.name,"Message:",j.message),U.__(new me(ne.UNAVAILABLE,"The operation could not be completed")))}),H(y,Gf.EventType.MESSAGE,j=>{var X;if(!T){let ae=j.data[0];sn(!!ae,16349);let le=ae,he=le?.error||((X=le[0])===null||X===void 0?void 0:X.error);if(he){xe(hr,`RPC '${e}' stream ${r} received error:`,he);let ct=he.status,Se=(function(P){let A=di[P];if(A!==void 0)return eB(A)})(ct),k=he.message;Se===void 0&&(Se=ne.INTERNAL,k="Unknown error status: "+ct+" with message "+he.message),T=!0,U.__(new me(Se,k)),y.close()}else xe(hr,`RPC '${e}' stream ${r} received:`,ae),U.a_(ae)}}),H(l,nO.STAT_EVENT,j=>{j.stat===aw.PROXY?xe(hr,`RPC '${e}' stream ${r} detected buffering proxy`):j.stat===aw.NOPROXY&&xe(hr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{U.o_()},0),U}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function aO(){return typeof document<"u"?document:null}function Xw(n){return new zO(n,!0)}var Rw=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&xe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Y6="PersistentStream",Nw=class{constructor(e,t,i,r,o,s,l,u){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Rw(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return O(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return O(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return O(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Nc(t.toString()),Nc("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===t&&this.W_(i,r)},i=>{e(()=>{let r=new me(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,t){let i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(()=>O(this,null,function*(){this.state=0,this.start()}))}G_(e){return xe(Y6,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(xe(Y6,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},wA=class extends Nw{constructor(e,t,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Gne(this.serializer,e),i=(function(o){if(!("targetChange"in o))return at.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?at.min():s.readTime?Sa(s.readTime):at.min()})(e);return this.listener.J_(t,i)}H_(e){let t={};t.database=qO(this.serializer),t.addTarget=(function(o,s){let l,u=s.target;if(l=OO(u)?{documents:Qne(o,u)}:{query:Yne(o,u).Vt},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=tB(o,s.resumeToken);let f=jO(o,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(at.min())>0){l.readTime=Sw(o,s.snapshotVersion.toTimestamp());let f=jO(o,s.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);let i=Jne(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){let t={};t.database=qO(this.serializer),t.removeTarget=e,this.k_(t)}},xA=class extends Nw{constructor(e,t,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return sn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,sn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){sn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=Kne(e.writeResults,e.commitTime),i=Sa(e.commitTime);return this.listener.ta(i,t)}na(){let e={};e.database=qO(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>Wne(this.serializer,i))};this.k_(t)}};var CA=class{},EA=class extends CA{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,$O(t,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(ne.UNKNOWN,o.toString())})}Jo(e,t,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Jo(e,$O(t,i),r,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new me(ne.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},IA=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Nc(t),this._a=!1):xe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Hd="RemoteStore",PA=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{i.enqueueAndForget(()=>O(this,null,function*(){Gd(this)&&(xe(Hd,"Restarting streams for network reachability change."),yield(function(u){return O(this,null,function*(){let f=rt(u);f.Ia.add(4),yield f_(f),f.Aa.set("Unknown"),f.Ia.delete(4),yield ex(f)})})(this))}))}),this.Aa=new IA(i,r)}};function ex(n){return O(this,null,function*(){if(Gd(n))for(let e of n.da)yield e(!0)})}function f_(n){return O(this,null,function*(){for(let e of n.da)yield e(!1)})}function dB(n,e){let t=rt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),fD(t)?hD(t):mp(t).x_()&&dD(t,e))}function uD(n,e){let t=rt(n),i=mp(t);t.Ta.delete(e),i.x_()&&hB(t,e),t.Ta.size===0&&(i.x_()?i.B_():Gd(t)&&t.Aa.set("Unknown"))}function dD(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mp(n).H_(e)}function hB(n,e){n.Ra.$e(e),mp(n).Y_(e)}function hD(n){n.Ra=new UO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),mp(n).start(),n.Aa.aa()}function fD(n){return Gd(n)&&!mp(n).M_()&&n.Ta.size>0}function Gd(n){return rt(n).Ia.size===0}function fB(n){n.Ra=void 0}function gie(n){return O(this,null,function*(){n.Aa.set("Online")})}function mie(n){return O(this,null,function*(){n.Ta.forEach((e,t)=>{dD(n,e)})})}function _ie(n,e){return O(this,null,function*(){fB(n),fD(n)?(n.Aa.la(e),hD(n)):n.Aa.set("Unknown")})}function vie(n,e,t){return O(this,null,function*(){if(n.Aa.set("Online"),e instanceof Pw&&e.state===2&&e.cause)try{yield(function(r,o){return O(this,null,function*(){let s=o.cause;for(let l of o.targetIds)r.Ta.has(l)&&(yield r.remoteSyncer.rejectListen(l,s),r.Ta.delete(l),r.Ra.removeTarget(l))})})(n,e)}catch(i){xe(Hd,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Lw(n,i)}else if(e instanceof Jf?n.Ra.Ye(e):e instanceof Iw?n.Ra.it(e):n.Ra.et(e),!t.isEqual(at.min()))try{let i=yield uB(n.localStore);t.compareTo(i)>=0&&(yield(function(o,s){let l=o.Ra.Pt(s);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let m=o.Ta.get(f);m&&o.Ta.set(f,m.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,f)=>{let m=o.Ta.get(u);if(!m)return;o.Ta.set(u,m.withResumeToken(fr.EMPTY_BYTE_STRING,m.snapshotVersion)),hB(o,u);let y=new a_(m.target,u,f,m.sequenceNumber);dD(o,y)}),o.remoteSyncer.applyRemoteEvent(l)})(n,t))}catch(i){xe(Hd,"Failed to raise snapshot:",i),yield Lw(n,i)}})}function Lw(n,e,t){return O(this,null,function*(){if(!gp(e))throw e;n.Ia.add(1),yield f_(n),n.Aa.set("Offline"),t||(t=()=>uB(n.localStore)),n.asyncQueue.enqueueRetryable(()=>O(null,null,function*(){xe(Hd,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield ex(n)}))})}function pB(n,e){return e().catch(t=>Lw(n,t,e))}function tx(n){return O(this,null,function*(){let e=rt(n),t=Xl(e),i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:XA;for(;yie(e);)try{let r=yield die(e.localStore,i);if(r===null){e.Pa.length===0&&t.B_();break}i=r.batchId,bie(e,r)}catch(r){yield Lw(e,r)}gB(e)&&mB(e)})}function yie(n){return Gd(n)&&n.Pa.length<10}function bie(n,e){n.Pa.push(e);let t=Xl(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function gB(n){return Gd(n)&&!Xl(n).M_()&&n.Pa.length>0}function mB(n){Xl(n).start()}function wie(n){return O(this,null,function*(){Xl(n).na()})}function xie(n){return O(this,null,function*(){let e=Xl(n);for(let t of n.Pa)e.X_(t.mutations)})}function Cie(n,e,t){return O(this,null,function*(){let i=n.Pa.shift(),r=LO.from(i,e,t);yield pB(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield tx(n)})}function Eie(n,e){return O(this,null,function*(){e&&Xl(n).Z_&&(yield(function(i,r){return O(this,null,function*(){if((function(s){return Bne(s)&&s!==ne.ABORTED})(r.code)){let o=i.Pa.shift();Xl(i).N_(),yield pB(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield tx(i)}})})(n,e)),gB(n)&&mB(n)})}function Z6(n,e){return O(this,null,function*(){let t=rt(n);t.asyncQueue.verifyOperationInProgress(),xe(Hd,"RemoteStore received new credentials");let i=Gd(t);t.Ia.add(3),yield f_(t),i&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield ex(t)})}function Iie(n,e){return O(this,null,function*(){let t=rt(n);e?(t.Ia.delete(2),yield ex(t)):e||(t.Ia.add(2),yield f_(t),t.Aa.set("Unknown"))})}function mp(n){return n.Va||(n.Va=(function(t,i,r){let o=rt(t);return o.ia(),new wA(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:gie.bind(null,n),e_:mie.bind(null,n),n_:_ie.bind(null,n),J_:vie.bind(null,n)}),n.da.push(e=>O(null,null,function*(){e?(n.Va.N_(),fD(n)?hD(n):n.Aa.set("Unknown")):(yield n.Va.stop(),fB(n))}))),n.Va}function Xl(n){return n.ma||(n.ma=(function(t,i,r){let o=rt(t);return o.ia(),new xA(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:wie.bind(null,n),n_:Eie.bind(null,n),ea:xie.bind(null,n),ta:Cie.bind(null,n)}),n.da.push(e=>O(null,null,function*(){e?(n.ma.N_(),yield tx(n)):(yield n.ma.stop(),n.Pa.length>0&&(xe(Hd,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var TA=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let s=Date.now()+i,l=new n(e,t,s,r,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function pD(n,e){if(Nc("AsyncQueue",`${e}: ${n}`),gp(n))return new me(ne.UNAVAILABLE,`${e}: ${n}`);throw n}var Fw=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Be.comparator(t.key,i.key):(t,i)=>Be.comparator(t.key,i.key),this.keyedMap=Qm(),this.sortedSet=new Fn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Vw=class{constructor(){this.fa=new Fn(Be.comparator)}track(e){let t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):He(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}},cp=class n{constructor(e,t,i,r,o,s,l,u,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){let s=[];return t.forEach(l=>{s.push({type:0,doc:l})}),new n(e,t,Fw.emptySet(t),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var SA=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},MA=class{constructor(){this.queries=J6(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){let r=rt(t),o=r.queries;r.queries=J6(),o.forEach((s,l)=>{for(let u of l.wa)u.onError(i)})})(this,new me(ne.ABORTED,"Firestore shutting down"))}};function J6(){return new Vc(n=>j8(n),Zw)}function Pie(n,e){return O(this,null,function*(){let t=rt(n),i=3,r=e.query,o=t.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new SA,i=e.ba()?0:1);try{switch(i){case 0:o.ya=yield t.onListen(r,!0);break;case 1:o.ya=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(s){let l=pD(s,`Initialization of query '${Kf(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&gD(t)})}function Tie(n,e){return O(this,null,function*(){let t=rt(n),i=e.query,r=3,o=t.queries.get(i);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function Sie(n,e){let t=rt(n),i=!1;for(let r of e){let o=r.query,s=t.queries.get(o);if(s){for(let l of s.wa)l.Ca(r)&&(i=!0);s.ya=r}}i&&gD(t)}function Mie(n,e,t){let i=rt(n),r=i.queries.get(e);if(r)for(let o of r.wa)o.onError(t);i.queries.delete(e)}function gD(n){n.Da.forEach(e=>{e.next()})}var OA,X6;(X6=OA||(OA={})).Fa="default",X6.Cache="cache";var AA=class{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new cp(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=cp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==OA.Cache}};var Bw=class{constructor(e){this.key=e}},Uw=class{constructor(e){this.key=e}},DA=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Mt(),this.mutatedKeys=Mt(),this.Xa=$8(e),this.eu=new Fw(this.Xa)}get tu(){return this.Ha}nu(e,t){let i=t?t.ru:new Vw,r=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=r,l=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,y)=>{let C=r.get(m),T=Jw(this.query,y)?y:null,U=!!C&&this.mutatedKeys.has(C.key),H=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations),j=!1;C&&T?C.data.isEqual(T.data)?U!==H&&(i.track({type:3,doc:T}),j=!0):this.iu(C,T)||(i.track({type:2,doc:T}),j=!0,(u&&this.Xa(T,u)>0||f&&this.Xa(T,f)<0)&&(l=!0)):!C&&T?(i.track({type:0,doc:T}),j=!0):C&&!T&&(i.track({type:1,doc:C}),j=!0,(u||f)&&(l=!0)),j&&(T?(s=s.add(T),o=H?o.add(m):o.delete(m)):(s=s.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let m=this.query.limitType==="F"?s.last():s.first();s=s.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{eu:s,ru:i,Ds:l,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((m,y)=>(function(T,U){let H=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{At:j})}};return H(T)-H(U)})(m.type,y.type)||this.Xa(m.doc,y.doc)),this.su(i),r=r!=null&&r;let l=t&&!r?this.ou():[],u=this.Za.size===0&&this.current&&!r?1:0,f=u!==this.Ya;return this.Ya=u,s.length!==0||f?{snapshot:new cp(this.query,e.eu,o,s,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Vw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Mt(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});let t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new Uw(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new Bw(i))}),t}uu(e){this.Ha=e.qs,this.Za=Mt();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return cp.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},mD="SyncEngine",kA=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},RA=class{constructor(e){this.key=e,this.lu=!1}},NA=class{constructor(e,t,i,r,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Vc(l=>j8(l),Zw),this.Tu=new Map,this.Iu=new Set,this.du=new Fn(Be.comparator),this.Eu=new Map,this.Au=new l_,this.Ru={},this.Vu=new Map,this.mu=c_.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Oie(n,e,t=!0){return O(this,null,function*(){let i=xB(n),r,o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=yield _B(i,e,t,!0),r})}function Aie(n,e){return O(this,null,function*(){let t=xB(n);yield _B(t,e,!0,!1)})}function _B(n,e,t,i){return O(this,null,function*(){let r=yield hie(n.localStore,Ta(e)),o=r.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),l;return i&&(l=yield Die(n,e,o,s==="current",r.resumeToken)),n.isPrimaryClient&&t&&dB(n.remoteStore,r),l})}function Die(n,e,t,i,r){return O(this,null,function*(){n.gu=(y,C,T)=>(function(H,j,X,ae){return O(this,null,function*(){let le=j.view.nu(X);le.Ds&&(le=yield K6(H.localStore,j.query,!1).then(({documents:k})=>j.view.nu(k,le)));let he=ae&&ae.targetChanges.get(j.targetId),ct=ae&&ae.targetMismatches.get(j.targetId)!=null,Se=j.view.applyChanges(le,H.isPrimaryClient,he,ct);return t8(H,j.targetId,Se._u),Se.snapshot})})(n,y,C,T);let o=yield K6(n.localStore,e,!0),s=new DA(e,o.qs),l=s.nu(o.documents),u=s_.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=s.applyChanges(l,n.isPrimaryClient,u);t8(n,t,f._u);let m=new kA(e,t,s);return n.Pu.set(e,m),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),f.snapshot})}function kie(n,e,t){return O(this,null,function*(){let i=rt(n),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter(s=>!Zw(s,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield pA(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&uD(i.remoteStore,r.targetId),LA(i,r.targetId)}).catch(pp))):(LA(i,r.targetId),yield pA(i.localStore,r.targetId,!0))})}function Rie(n,e){return O(this,null,function*(){let t=rt(n),i=t.Pu.get(e),r=t.Tu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),uD(t.remoteStore,i.targetId))})}function Nie(n,e,t){return O(this,null,function*(){let i=jie(n);try{let r=yield(function(s,l){let u=rt(s),f=gi.now(),m=l.reduce((T,U)=>T.add(U.key),Mt()),y,C;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let U=Bc(),H=Mt();return u.Os.getEntries(T,m).next(j=>{U=j,U.forEach((X,ae)=>{ae.isValidDocument()||(H=H.add(X))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,U)).next(j=>{y=j;let X=[];for(let ae of l){let le=Vne(ae,y.get(ae.key).overlayedDocument);le!=null&&X.push(new Oa(ae.key,le,N8(le.value.mapValue),ql.exists(!0)))}return u.mutationQueue.addMutationBatch(T,f,X,l)}).next(j=>{C=j;let X=j.applyToLocalDocumentSet(y,H);return u.documentOverlayCache.saveOverlays(T,j.batchId,X)})}).then(()=>({batchId:C.batchId,changes:q8(y)}))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(s,l,u){let f=s.Ru[s.currentUser.toKey()];f||(f=new Fn(mt)),f=f.insert(l,u),s.Ru[s.currentUser.toKey()]=f})(i,r.batchId,t),yield p_(i,r.changes),yield tx(i.remoteStore)}catch(r){let o=pD(r,"Failed to persist write");t.reject(o)}})}function vB(n,e){return O(this,null,function*(){let t=rt(n);try{let i=yield lie(t.localStore,e);e.targetChanges.forEach((r,o)=>{let s=t.Eu.get(o);s&&(sn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?s.lu=!0:r.modifiedDocuments.size>0?sn(s.lu,14607):r.removedDocuments.size>0&&(sn(s.lu,42227),s.lu=!1))}),yield p_(t,i,e)}catch(i){yield pp(i)}})}function e8(n,e,t){let i=rt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Pu.forEach((o,s)=>{let l=s.view.va(e);l.snapshot&&r.push(l.snapshot)}),(function(s,l){let u=rt(s);u.onlineState=l;let f=!1;u.queries.forEach((m,y)=>{for(let C of y.wa)C.va(l)&&(f=!0)}),f&&gD(u)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Lie(n,e,t){return O(this,null,function*(){let i=rt(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Eu.get(e),o=r&&r.key;if(o){let s=new Fn(Be.comparator);s=s.insert(o,Ss.newNoDocument(o,at.min()));let l=Mt().add(o),u=new Ew(at.min(),new Map,new Fn(mt),s,l);yield vB(i,u),i.du=i.du.remove(o),i.Eu.delete(e),_D(i)}else yield pA(i.localStore,e,!1).then(()=>LA(i,e,t)).catch(pp)})}function Fie(n,e){return O(this,null,function*(){let t=rt(n),i=e.batch.batchId;try{let r=yield cie(t.localStore,e);bB(t,i,null),yB(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield p_(t,r)}catch(r){yield pp(r)}})}function Vie(n,e,t){return O(this,null,function*(){let i=rt(n);try{let r=yield(function(s,l){let u=rt(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,l).next(y=>(sn(y!==null,37113),m=y.keys(),u.mutationQueue.removeMutationBatch(f,y))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})})(i.localStore,e);bB(i,e,t),yB(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield p_(i,r)}catch(r){yield pp(r)}})}function yB(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function bB(n,e,t){let i=rt(n),r=i.Ru[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function LA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||wB(n,i)})}function wB(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(uD(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),_D(n))}function t8(n,e,t){for(let i of t)i instanceof Bw?(n.Au.addReference(i.key,e),Bie(n,i)):i instanceof Uw?(xe(mD,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||wB(n,i.key)):He(19791,{yu:i})}function Bie(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(xe(mD,"New document in limbo: "+t),n.Iu.add(i),_D(n))}function _D(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Be(Pn.fromString(e)),i=n.mu.next();n.Eu.set(i,new RA(t)),n.du=n.du.insert(t,i),dB(n.remoteStore,new a_(Ta(sD(t.path)),i,"TargetPurposeLimboResolution",JA.ue))}}function p_(n,e,t){return O(this,null,function*(){let i=rt(n),r=[],o=[],s=[];i.Pu.isEmpty()||(i.Pu.forEach((l,u)=>{s.push(i.gu(u,e,t).then(f=>{var m;if((f||t)&&i.isPrimaryClient){let y=f?!f.fromCache:(m=t?.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(f){r.push(f);let y=uA.Es(u.targetId,f);o.push(y)}}))}),yield Promise.all(s),i.hu.J_(r),yield(function(u,f){return O(this,null,function*(){let m=rt(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ce.forEach(f,C=>ce.forEach(C.Is,T=>m.persistence.referenceDelegate.addReference(y,C.targetId,T)).next(()=>ce.forEach(C.ds,T=>m.persistence.referenceDelegate.removeReference(y,C.targetId,T)))))}catch(y){if(!gp(y))throw y;xe(lD,"Failed to update sequence numbers: "+y)}for(let y of f){let C=y.targetId;if(!y.fromCache){let T=m.Fs.get(C),U=T.snapshotVersion,H=T.withLastLimboFreeSnapshotVersion(U);m.Fs=m.Fs.insert(C,H)}}})})(i.localStore,o))})}function Uie(n,e){return O(this,null,function*(){let t=rt(n);if(!t.currentUser.isEqual(e)){xe(mD,"User change. New user:",e.toKey());let i=yield lB(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(l=>{l.forEach(u=>{u.reject(new me(ne.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield p_(t,i.Bs)}})}function zie(n,e){let t=rt(n),i=t.Eu.get(e);if(i&&i.lu)return Mt().add(i.key);{let r=Mt(),o=t.Tu.get(e);if(!o)return r;for(let s of o){let l=t.Pu.get(s);r=r.unionWith(l.view.tu)}return r}}function xB(n){let e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lie.bind(null,e),e.hu.J_=Sie.bind(null,e.eventManager),e.hu.pu=Mie.bind(null,e.eventManager),e}function jie(n){let e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vie.bind(null,e),e}var CB=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return O(this,null,function*(){this.serializer=Xw(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,i){return null}Fu(t,i){return null}vu(t){return aie(this.persistence,new hA,t.initialUser,this.serializer)}Du(t){return new Ow(lA.Vi,this.serializer)}bu(t){return new gA}terminate(){return O(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),FA=class extends CB{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){sn(this.persistence.referenceDelegate instanceof Aw,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new YO(i,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Bo.withCacheSize(this.cacheSizeBytes):Bo.DEFAULT;return new Ow(i=>Aw.Vi(i,t),this.serializer)}};var $ie=(()=>{class n{initialize(t,i){return O(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>e8(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uie.bind(null,this.syncEngine),yield Iie(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new MA})()}createDatastore(t){let i=Xw(t.databaseInfo.databaseId),r=(function(s){return new bA(s)})(t.databaseInfo);return(function(s,l,u,f){return new EA(s,l,u,f)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,o,s,l,u){return new PA(r,o,s,l,u)})(this.localStore,this.datastore,t.asyncQueue,i=>e8(this.syncEngine,i,0),(function(){return kw.C()?new kw:new mA})())}createSyncEngine(t,i){return(function(o,s,l,u,f,m,y){let C=new NA(o,s,l,u,f,m);return y&&(C.fu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return O(this,null,function*(){var t,i;yield(function(o){return O(this,null,function*(){let s=rt(o);xe(Hd,"RemoteStore shutting down."),s.Ia.add(5),yield f_(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var VA=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Nc("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var eu="FirestoreClient",BA=class{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Di.UNAUTHENTICATED,this.clientId=t_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,s=>O(this,null,function*(){xe(eu,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(xe(eu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=pD(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function cO(n,e){return O(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),xe(eu,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>O(null,null,function*(){i.isEqual(r)||(yield lB(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>{Yl("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{xe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Yl("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=e})}function n8(n,e){return O(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Hie(n);xe(eu,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Z6(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Z6(e.remoteStore,r)),n._onlineComponents=e})}function Hie(n){return O(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe(eu,"Using user provided OfflineComponentProvider");try{yield cO(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Yl("Error using user provided cache. Falling back to memory cache: "+t),yield cO(n,new CB)}}else xe(eu,"Using default OfflineComponentProvider"),yield cO(n,new FA(void 0));return n._offlineComponents})}function EB(n){return O(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe(eu,"Using user provided OnlineComponentProvider"),yield n8(n,n._uninitializedComponentsProvider._online)):(xe(eu,"Using default OnlineComponentProvider"),yield n8(n,new $ie))),n._onlineComponents})}function qie(n){return EB(n).then(e=>e.syncEngine)}function Gie(n){return O(this,null,function*(){let e=yield EB(n),t=e.eventManager;return t.onListen=Oie.bind(null,e.syncEngine),t.onUnlisten=kie.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Aie.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Rie.bind(null,e.syncEngine),t})}function Wie(n,e,t={}){let i=new Ia;return n.asyncQueue.enqueueAndForget(()=>O(null,null,function*(){return(function(o,s,l,u,f){let m=new VA({next:C=>{m.Ou(),s.enqueueAndForget(()=>Tie(o,y));let T=C.docs.has(l);!T&&C.fromCache?f.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&C.fromCache&&u&&u.source==="server"?f.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(C)},error:C=>f.reject(C)}),y=new AA(sD(l.path),m,{includeMetadataChanges:!0,ka:!0});return Pie(o,y)})(yield Gie(n),n.asyncQueue,e,t,i)})),i.promise}function IB(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var i8=new Map;var PB="firestore.googleapis.com",r8=!0,zw=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PB,this.ssl=r8}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:r8;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rie)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tne("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IB((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lp=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new lO;switch(i.type){case"firstParty":return new fO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return O(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=i8.get(t);i&&(xe("ComponentProvider","Removing Datastore"),i8.delete(t),i.terminate())})(this),Promise.resolve()}};function TB(n,e,t,i={}){var r;n=Fd(n,lp);let o=go(e),s=n._getSettings(),l=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Ml(`https://${u}`),Ol("Firestore",!0)),s.host!==PB&&s.host!==u&&Yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:i});if(!ha(f,l)&&(n._setSettings(f),i.mockUserToken)){let m,y;if(typeof i.mockUserToken=="string")m=i.mockUserToken,y=Di.MOCK_USER;else{m=zy(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Di(C)}n._authCredentials=new uO(new pw(m,y))}}var qd=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ri=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(h_(t,n._jsonSchema))return new n(e,i||null,new Be(Pn.fromString(t.referencePath)))}};Ri._jsonSchemaVersion="firestore/documentReference/1.0",Ri._jsonSchema={type:pi("string",Ri._jsonSchemaVersion),referencePath:pi("string")};var Gl=class n extends qd{constructor(e,t,i){super(e,t,sD(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ri(this.firestore,null,new Be(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function SB(n,e,...t){if(n=Yt(n),d8("collection","path",e),n instanceof lp){let i=Pn.fromString(e,...t);return x6(i),new Gl(n,null,i)}{if(!(n instanceof Ri||n instanceof Gl))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Pn.fromString(e,...t));return x6(i),new Gl(n.firestore,null,i)}}function MB(n,e,...t){if(n=Yt(n),arguments.length===1&&(e=t_.newId()),d8("doc","path",e),n instanceof lp){let i=Pn.fromString(e,...t);return w6(i),new Ri(n,null,new Be(i))}{if(!(n instanceof Ri||n instanceof Gl))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Pn.fromString(e,...t));return w6(i),new Ri(n.firestore,n instanceof Gl?n.converter:null,new Be(i))}}var o8="AsyncQueue",jw=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Rw(this,"async_queue_retry"),this.oc=()=>{let i=aO();i&&xe(o8,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=aO();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=aO();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Ia;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return O(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!gp(e))throw e;xe(o8,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Nc("INTERNAL UNHANDLED ERROR: ",s8(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=TA.createAndSchedule(this,e,t,i,o=>this.lc(o));return this.ec.push(r),r}ac(){this.tc&&He(47125,{hc:s8(this.tc)})}verifyOperationInProgress(){}Pc(){return O(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function s8(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var up=class extends lp{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new jw,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return O(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jw(e),this._firestoreClient=void 0,yield e}})}};function OB(n,e){let t=typeof n=="object"?n:bs(),i=typeof n=="string"?n:e||yw,r=ga(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=pf("firestore");o&&TB(r,...o)}return r}function AB(n){if(n._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Kie(n),n._firestoreClient}function Kie(n){var e,t,i;let r=n._freezeSettings(),o=(function(l,u,f,m){return new vO(l,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,IB(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new BA(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(l){let u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(n._componentsProvider))}var Wl=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(fr.fromBase64String(e))}catch(t){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(h_(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Wl._jsonSchemaVersion="firestore/bytes/1.0",Wl._jsonSchema={type:pi("string",Wl._jsonSchemaVersion),bytes:pi("string")};var dp=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var hp=class{constructor(e){this._methodName=e}};var Kl=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(h_(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Kl._jsonSchemaVersion="firestore/geoPoint/1.0",Kl._jsonSchema={type:pi("string",Kl._jsonSchemaVersion),latitude:pi("number"),longitude:pi("number")};var Ql=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(h_(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new me(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ql._jsonSchemaVersion="firestore/vectorValue/1.0",Ql._jsonSchema={type:pi("string",Ql._jsonSchemaVersion),vectorValues:pi("object")};var Qie=/^__.*__$/,UA=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new $d(e,this.data,t,this.fieldTransforms)}},$w=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function DB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{Ec:n})}}var zA=class n{constructor(e,t,i,r,o,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return qw(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(DB(this.Ec)&&Qie.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},jA=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Xw(e)}Dc(e,t,i,r=!1){return new zA({Ec:e,methodName:t,bc:i,path:yo.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function vD(n){let e=n._freezeSettings(),t=Xw(n._databaseId);return new jA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yie(n,e,t,i,r,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,r);yD("Data must be an object, but it was:",s,i);let l=kB(i,s),u,f;if(o.merge)u=new Uo(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){let m=[];for(let y of o.mergeFields){let C=HA(e,y,t);if(!s.contains(C))throw new me(ne.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);NB(m,C)||m.push(C)}u=new Uo(m),f=s.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,f=s.fieldTransforms;return new UA(new vo(l),u,f)}var Hw=class n extends hp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var $A=class n extends hp{_toFieldTransform(e){return new DO(e.path,new Ud)}isEqual(e){return e instanceof n}};function Zie(n,e,t,i){let r=n.Dc(1,e,t);yD("Data must be an object, but it was:",r,i);let o=[],s=vo.empty();tu(i,(u,f)=>{let m=bD(e,u,t);f=Yt(f);let y=r.gc(m);if(f instanceof Hw)o.push(m);else{let C=g_(f,y);C!=null&&(o.push(m),s.set(m,C))}});let l=new Uo(o);return new $w(s,l,r.fieldTransforms)}function Jie(n,e,t,i,r,o){let s=n.Dc(1,e,t),l=[HA(e,i,t)],u=[r];if(o.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<o.length;C+=2)l.push(HA(e,o[C])),u.push(o[C+1]);let f=[],m=vo.empty();for(let C=l.length-1;C>=0;--C)if(!NB(f,l[C])){let T=l[C],U=u[C];U=Yt(U);let H=s.gc(T);if(U instanceof Hw)f.push(T);else{let j=g_(U,H);j!=null&&(f.push(T),m.set(T,j))}}let y=new Uo(f);return new $w(m,y,s.fieldTransforms)}function Xie(n,e,t,i=!1){return g_(t,n.Dc(i?4:3,e))}function g_(n,e){if(RB(n=Yt(n)))return yD("Unsupported field value:",e,n),kB(n,e);if(n instanceof hp)return(function(i,r){if(!DB(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){let o=[],s=0;for(let l of i){let u=g_(l,r.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=Yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return kne(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=gi.fromDate(i);return{timestampValue:Sw(r.serializer,o)}}if(i instanceof gi){let o=new gi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sw(r.serializer,o)}}if(i instanceof Kl)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wl)return{bytesValue:tB(r.serializer,i._byteString)};if(i instanceof Ri){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cD(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ql)return(function(s,l){return{mapValue:{fields:{[tD]:{stringValue:nD},[tp]:{arrayValue:{values:s.toArray().map(f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return aD(l.serializer,f)})}}}}}})(i,r);throw r.wc(`Unsupported field value: ${Kw(i)}`)})(n,e)}function kB(n,e){let t={};return T8(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tu(n,(i,r)=>{let o=g_(r,e.Vc(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function RB(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gi||n instanceof Kl||n instanceof Wl||n instanceof Ri||n instanceof hp||n instanceof Ql)}function yD(n,e,t){if(!RB(t)||!h8(t)){let i=Kw(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function HA(n,e,t){if((e=Yt(e))instanceof dp)return e._internalPath;if(typeof e=="string")return bD(n,e);throw qw("Field path arguments must be of type string or ",n,!1,void 0,t)}var ere=new RegExp("[~\\*/\\[\\]]");function bD(n,e,t){if(e.search(ere)>=0)throw qw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dp(...e.split("."))._internalPath}catch{throw qw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qw(n,e,t,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${i}`),s&&(u+=` in document ${r}`),u+=")"),new me(ne.INVALID_ARGUMENT,l+n+u)}function NB(n,e){return n.some(t=>t.isEqual(e))}var Gw=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(nx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qA=class extends Gw{data(){return super.data()}};function nx(n,e){return typeof e=="string"?bD(n,e):e instanceof dp?e._internalPath:e._delegate._internalPath}var u_=class{},d_=class extends u_{};function LB(n,e,...t){let i=[];e instanceof u_&&i.push(e),i=i.concat(t),(function(o){let s=o.filter(u=>u instanceof GA).length,l=o.filter(u=>u instanceof Ww).length;if(s>1||s>0&&l>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(let r of i)n=r._apply(n);return n}var Ww=class n extends d_{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return UB(e._query,t),new qd(e.firestore,e.converter,AO(e._query,t))}_parse(e){let t=vD(e.firestore);return(function(o,s,l,u,f,m,y){let C;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){c8(y,m);let U=[];for(let H of y)U.push(a8(u,o,H));C={arrayValue:{values:U}}}else C=a8(u,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||c8(y,m),C=Xie(l,s,y,m==="in"||m==="not-in");return fi.create(f,m,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function FB(n,e,t){let i=e,r=nx("where",n);return Ww._create(r,i,t)}var GA=class n extends u_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Ms.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let s=r,l=o.getFlattenedFilters();for(let u of l)UB(s,u),s=AO(s,u)})(e._query,t),new qd(e.firestore,e.converter,AO(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var WA=class n extends d_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(r,o,s){if(r.startAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bd(o,s)})(e._query,this._field,this._direction);return new qd(e.firestore,e.converter,(function(r,o){let s=r.explicitOrderBy.concat([o]);return new Jl(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}};function VB(n,e="asc"){let t=e,i=nx("orderBy",n);return WA._create(i,t)}var KA=class n extends d_{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new qd(e.firestore,e.converter,xw(e._query,this._limit,this._limitType))}};function BB(n){return nne("limit",n),KA._create("limit",n,"F")}function a8(n,e,t){if(typeof(t=Yt(t))=="string"){if(t==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z8(e)&&t.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Pn.fromString(t));if(!Be.isDocumentKey(i))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return M6(n,new Be(i))}if(t instanceof Ri)return M6(n,t._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kw(t)}.`)}function c8(n,e){if(!Array.isArray(n)||n.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UB(n,e){let t=(function(r,o){for(let s of r)for(let l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var QA=class{convertValue(e,t="none"){switch(Zl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return In(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return tu(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,r;let o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[tp].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>In(s.doubleValue));return new Ql(o)}convertGeoPoint(e){return new Kl(In(e.latitude),In(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Yw(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(r_(e));default:return null}}convertTimestamp(e){let t=Lc(e);return new gi(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Pn.fromString(e);sn(aB(i),9688,{name:e});let r=new bw(i.get(1),i.get(3)),o=new Be(i.popFirst(5));return r.isEqual(t)||Nc(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function tre(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Rd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Nd=class n extends Gw{constructor(e,t,i,r,o,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(nx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Nd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nd._jsonSchema={type:pi("string",Nd._jsonSchemaVersion),bundleSource:pi("string","DocumentSnapshot"),bundleName:pi("string"),bundle:pi("string")};var Xf=class extends Nd{data(e={}){return super.data(e)}},e_=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Rd(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Xf(this._firestore,this._userDataWriter,i.key,i,new Rd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>{let u=new Xf(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Rd(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{let u=new Xf(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Rd(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),m=s.indexOf(l.doc.key)),{type:nre(l.type),doc:u,oldIndex:f,newIndex:m}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=t_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function nre(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:n})}}function zB(n){n=Fd(n,Ri);let e=Fd(n.firestore,up);return Wie(AB(e),n._key).then(t=>ire(e,n,t))}e_._jsonSchemaVersion="firestore/querySnapshot/1.0",e_._jsonSchema={type:pi("string",e_._jsonSchemaVersion),bundleSource:pi("string","QuerySnapshot"),bundleName:pi("string"),bundle:pi("string")};var YA=class extends QA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ri(this.firestore,null,t)}};function jB(n,e,t){n=Fd(n,Ri);let i=Fd(n.firestore,up),r=tre(n.converter,e,t);return HB(i,[Yie(vD(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,ql.none())])}function $B(n,e,t,...i){n=Fd(n,Ri);let r=Fd(n.firestore,up),o=vD(r),s;return s=typeof(e=Yt(e))=="string"||e instanceof dp?Jie(o,"updateDoc",n._key,e,t,i):Zie(o,"updateDoc",n._key,e),HB(r,[s.toMutation(n._key,ql.exists(!0))])}function HB(n,e){return(function(i,r){let o=new Ia;return i.asyncQueue.enqueueAndForget(()=>O(null,null,function*(){return Nie(yield qie(i),r,o)})),o.promise})(AB(n),e)}function ire(n,e,t){let i=t.docs.get(e._key),r=new YA(n);return new Nd(n,r,e._key,i,new Rd(t.hasPendingWrites,t.fromCache),e.converter)}function zo(){return new $A("serverTimestamp")}(function(e,t=!0){(function(r){fp=r})(ma),Mr(new wi("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),l=new up(new dO(i.getProvider("auth-internal")),new pO(s,i.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bw(f.options.projectId,m)})(s,r),s);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Zt(_6,v6,e),Zt(_6,v6,"esm2017")})();var Uc=class{constructor(e){return e}},qB="firestore",wD=class{constructor(){return _a(qB)}};var xD=new we("angularfire2.firestore-instances");function rre(n,e){let t=yc(qB,n,e);return t&&new Uc(t)}function ore(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Uc(i)}}var sre={provide:wD,deps:[[new On,xD]]},are={provide:Uc,useFactory:rre,deps:[[new On,xD],mo]};function GB(n,...e){return Zt("angularfire",Ro.full,"fst"),Pr([are,sre,{provide:xD,useFactory:ore(n),multi:!0,deps:[kt,mn,No,ws,[new On,Sc],[new On,va],...e]}])}var _p=Ht(p6,!0);var ix=Ht(SB,!0,2);var pr=Ht(MB,!0,2);var m_=Ht(zB,!0);var WB=Ht(OB,!0);var KB=Ht(BB,!0,2);var rx=Ht(VB,!0,2),__=Ht(LB,!0,2);var Wd=Ht(jB,!0,2);var Kd=Ht($B,!0,2);var CD=Ht(FB,!0,2);var vp=class n{firestore=$(Uc);incidentsCollection=ix(this.firestore,"incidents");alertsCollection=ix(this.firestore,"alerts");riskZonesCollection=ix(this.firestore,"riskZones");getSafetyFeed(e){let i=_p(__(this.incidentsCollection,rx("createdAt","desc")),{idField:"id"}).pipe(pe(o=>o.map(s=>Ee(te({},s),{type:"incident"})))).pipe(pe(o=>e==="user"?o.filter(s=>s.recipient!=="admin"):o)),r=_p(__(this.alertsCollection,rx("createdAt","desc")),{idField:"id"}).pipe(pe(o=>o.map(s=>Ee(te({},s),{type:"alert"}))));return xr([i,r]).pipe(pe(([o,s])=>[...o,...s].sort((u,f)=>f.createdAt.toMillis()-u.createdAt.toMillis())))}reportIncident(e){return O(this,null,function*(){let t=pr(this.incidentsCollection).id,i=pr(this.incidentsCollection,t),r=te({id:t,type:"incident",status:"pending",createdAt:zo(),location:e.location||{lat:0,lng:0},description:e.description||"N/A",priority:e.priority||"medium",recipient:e.recipient||"both"},e);return yield Wd(i,r),t})}createUserProfile(e,t){return O(this,null,function*(){let i=pr(this.firestore,`users/${e}`),r=pr(this.firestore,"config/adminExists"),s=!(yield m_(r)).exists(),l={uid:e,email:t.email||"",displayName:t.displayName||"",phoneNumber:t.phoneNumber||"",role:s?"admin":"citizen",createdAt:zo(),lastActive:zo()};return yield Wd(i,l),s&&(yield Wd(r,{ownerUid:e,createdAt:zo()})),l})}issueAlert(e){return O(this,null,function*(){let t=pr(this.alertsCollection).id,i=pr(this.alertsCollection,t);return yield Wd(i,Ee(te({},e),{type:"alert",createdAt:zo()})),t})}updateIncidentStatus(e,t){return O(this,null,function*(){let i=pr(this.incidentsCollection,e),r={status:t};t==="approved"&&(r.recipient="both"),yield Kd(i,r)})}updateIncident(e,t){return O(this,null,function*(){let i=pr(this.incidentsCollection,e);yield Kd(i,t)})}getRiskZones(){return _p(this.riskZonesCollection,{idField:"id"})}getUserProfile(e){return O(this,null,function*(){let t=pr(this.firestore,`users/${e}`),i=yield m_(t);if(i.exists()){let r=i.data();return te({uid:e,email:r.email||"",displayName:r.displayName||"",role:r.role||"user"},r)}return null})}updateUserProfile(e,t){return O(this,null,function*(){let i=pr(this.firestore,`users/${e}`);yield Kd(i,Ee(te({},t),{updatedAt:zo()}))})}getUserReportsCount(e){return O(this,null,function*(){let t=__(this.incidentsCollection,CD("userId","==",e));return(yield _p(t,{idField:"id"}).pipe(pe(r=>r.length)).toPromise())||0})}getUserRecentActivity(e,t=10){let i=__(this.incidentsCollection,CD("userId","==",e),rx("createdAt","desc"),KB(t));return _p(i,{idField:"id"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};var ZB="functions";var ED=class{constructor(e,t,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,xi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r?.get().then(o=>this.appCheck=o,()=>{})}getAuthToken(){return O(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return O(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return O(this,null,function*(){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return O(this,null,function*(){let t=yield this.getAuthToken(),i=yield this.getMessagingToken(),r=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:r}})}};var ID="us-central1";var PD=class{constructor(e,t,i,r,o=ID,s=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new ED(e,t,i,r),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{let l=new URL(o);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=ID}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function cre(n,e,t){let i=go(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(Ml(n.emulatorOrigin),Ol("Functions",!0))}var QB="@firebase/functions",YB="0.12.9";var lre="auth-internal",ure="app-check-internal",dre="messaging-internal";function hre(n){let e=(t,{instanceIdentifier:i})=>{let r=t.getProvider("app").getImmediate(),o=t.getProvider(lre),s=t.getProvider(dre),l=t.getProvider(ure);return new PD(r,o,s,l,i)};Mr(new wi(ZB,e,"PUBLIC").setMultipleInstances(!0)),Zt(QB,YB,n),Zt(QB,YB,"esm2017")}function JB(n=bs(),e=ID){let i=ga(Yt(n),ZB).getImmediate({identifier:e}),r=pf("functions");return r&&XB(i,...r),i}function XB(n,e,t){cre(Yt(n),e,t)}hre();var Qd=class{constructor(e){return e}},eU="functions",TD=class{constructor(){return _a(eU)}};var SD=new we("angularfire2.functions-instances");function fre(n,e){let t=yc(eU,n,e);return t&&new Qd(t)}function pre(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Qd(i)}}var gre={provide:TD,deps:[[new On,SD]]},mre={provide:Qd,useFactory:fre,deps:[[new On,SD],mo]};function tU(n,...e){return Zt("angularfire",Ro.full,"fn"),Pr([mre,gre,{provide:SD,useFactory:pre(n),multi:!0,deps:[kt,mn,No,ws,[new On,Sc],[new On,va],...e]}])}var nU=Ht(JB,!0);var Dn=class n{auth=$(Tc);router=$(Rt);data=$(vp);functions=$(Qd);currentUser$=U5(this.auth);isAdmin$=this.currentUser$.pipe(Hi(e=>e?ln(e.getIdTokenResult()).pipe(pe(t=>!!t.claims?.admin)):Le(!1)));login(e,t){return O(this,null,function*(){try{let i=yield q5(this.auth,e,t);if(console.log("Login successful for:",i.user.email),e==="jennyasas1@gmail.com"){console.log("Primary admin logged in"),this.router.navigate(["/admin-dashboard"]);return}this.router.navigate(["/dashboard"])}catch(i){console.error("Login failed:",i.code,i.message);let r="Login failed: ";switch(i.code){case"auth/user-not-found":r+="No account found with this email. Please sign up first.";break;case"auth/wrong-password":r+="Incorrect password. Please try again.";break;case"auth/invalid-email":r+="Invalid email address format.";break;case"auth/user-disabled":r+="This account has been disabled.";break;case"auth/invalid-credential":r+="Invalid credentials. Please check your email and password.";break;default:r+=i.message||"An error occurred. Please try again."}throw new Error(r)}})}logout(){return O(this,null,function*(){yield G5(this.auth),this.router.navigate(["/"])})}loginWithGoogle(){return O(this,null,function*(){try{let e=new RT;e.addScope("email"),e.addScope("profile");let i=(yield YT(this.auth,e)).user;console.log("Google login successful:",i.email);try{i&&(yield this.data.createUserProfile(i.uid,{email:i.email||"",displayName:i.displayName||"Google User",phoneNumber:i.phoneNumber||""}))}catch(r){console.warn("Failed to create/update user profile:",r)}try{let o=!!(yield i.getIdTokenResult()).claims?.admin;this.router.navigate([o?"/admin-dashboard":"/dashboard"])}catch(r){console.error("Token check error:",r),this.router.navigate(["/dashboard"])}}catch(e){console.error("Google login failed:",e);let t="Google login failed: ";switch(e.code){case"auth/account-exists-with-different-credential":t+="An account already exists with the same email. Try signing in with a different method.";break;case"auth/popup-blocked":t+="Popup was blocked. Please allow popups for this site.";break;case"auth/popup-closed-by-user":t+="Login popup was closed. Please try again.";break;case"auth/cancelled-popup-request":t+="Login was cancelled. Please try again.";break;case"auth/network-request-failed":t+="Network error. Please check your connection.";break;default:t+=e.message||"An error occurred. Please try again."}throw new Error(t)}})}loginWithFacebook(){return O(this,null,function*(){try{let e=new kT;e.addScope("email"),e.addScope("public_profile");let i=(yield YT(this.auth,e)).user;console.log("Facebook login successful:",i.email);try{i&&(yield this.data.createUserProfile(i.uid,{email:i.email||"",displayName:i.displayName||"Facebook User",phoneNumber:i.phoneNumber||""}))}catch(r){console.warn("Failed to create/update user profile:",r)}try{let o=!!(yield i.getIdTokenResult()).claims?.admin;this.router.navigate([o?"/admin-dashboard":"/dashboard"])}catch(r){console.error("Token check error:",r),this.router.navigate(["/dashboard"])}}catch(e){console.error("Facebook login failed:",e);let t="Facebook login failed: ";switch(e.code){case"auth/account-exists-with-different-credential":t+="An account already exists with the same email. Try signing in with a different method.";break;case"auth/popup-blocked":t+="Popup was blocked. Please allow popups for this site.";break;case"auth/popup-closed-by-user":t+="Login popup was closed. Please try again.";break;case"auth/cancelled-popup-request":t+="Login was cancelled. Please try again.";break;case"auth/network-request-failed":t+="Network error. Please check your connection.";break;default:t+=e.message||"An error occurred. Please try again."}throw new Error(t)}})}sendVerificationEmail(){return O(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("No authenticated user to send verification to");try{yield H5(e)}catch(t){throw console.error("Failed to send verification email:",t),t}})}register(e,t,i){return O(this,null,function*(){try{let r=yield z5(this.auth,e,t);i&&(yield Em(r.user,{displayName:i}));try{r.user&&(yield this.data.createUserProfile(r.user.uid,{email:r.user.email??"",displayName:r.user.displayName??"",phoneNumber:r.user.phoneNumber??""}))}catch(o){console.warn("Failed to create user profile automatically:",o)}this.router.navigate(["/"])}catch(r){throw console.error("Registration failed:",r),new Error(r?.message||"Registration failed")}})}isLoggedIn(){return new ze(e=>{this.currentUser$.subscribe(t=>{e.next(!!t)})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};var Aa=class n{STORAGE_KEY="mountain_sentinel_notifications";notificationsSubject=new Ut(this.loadNotificationsFromStorage());constructor(){}loadNotificationsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading notifications from storage:",e),[]}}saveNotificationsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving notifications to storage:",t)}}addSosNotification(){let e={id:this.generateId(),message:"Emergency SOS sent! Police have been notified and are on their way. Stay calm and safe.",type:"sos",createdAt:new Date().toISOString(),read:!1},t=this.notificationsSubject.value,i=[e,...t];this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}addEmergencySOSAlert(e,t,i){let r=i?` Location: ${i.lat.toFixed(6)}, ${i.lng.toFixed(6)}`:"",o={id:this.generateId(),message:`EMERGENCY SOS from ${e} (${t}).${r} Immediate assistance required!`,type:"sos",createdAt:new Date().toISOString(),read:!1,sosDetails:{userName:e,userEmail:t,location:i,timestamp:new Date().toISOString(),status:"pending"}},s=this.notificationsSubject.value,l=[o,...s];this.notificationsSubject.next(l),this.saveNotificationsToStorage(l)}markSOSAsResponded(e){let i=this.notificationsSubject.value.map(r=>r.id===e&&r.sosDetails?Ee(te({},r),{read:!0,sosDetails:Ee(te({},r.sosDetails),{status:"responded"})}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}markSOSAsResolved(e){let i=this.notificationsSubject.value.map(r=>r.id===e&&r.sosDetails?Ee(te({},r),{sosDetails:Ee(te({},r.sosDetails),{status:"resolved"})}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}notifySOSResponse(e,t,i){let r=i==="responded"?"Your emergency SOS has been received! Help is on the way. An admin/police officer is responding to your location. Stay calm and safe.":"Your emergency SOS has been resolved. The situation has been addressed by authorities. Thank you for using Mountain Sentinel.",o={id:this.generateId(),message:r,type:"action",createdAt:new Date().toISOString(),read:!1},s=this.notificationsSubject.value,l=[o,...s];this.notificationsSubject.next(l),this.saveNotificationsToStorage(l)}notifyReportAction(e,t,i,r,o){let s=r==="approved"?"Your safety report has been reviewed and approved by the admin. Authorities have been notified and appropriate action is being taken.":"Your safety report has been reviewed. The admin has determined that no further action is required at this time.",l={id:this.generateId(),message:`Report Update: "${o.substring(0,50)}${o.length>50?"...":""}" - ${s}`,type:"action",createdAt:new Date().toISOString(),read:!1,reportDetails:{reportId:i,action:r}},u=this.notificationsSubject.value,f=[l,...u];this.notificationsSubject.next(f),this.saveNotificationsToStorage(f)}addNotification(e,t="info"){let i={id:this.generateId(),message:e,type:t,createdAt:new Date().toISOString(),read:!1},r=this.notificationsSubject.value,o=[i,...r];this.notificationsSubject.next(o),this.saveNotificationsToStorage(o)}getNotifications(){return this.notificationsSubject.asObservable()}getUnreadCount(){return new ze(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>!r.read).length;e.next(i)})})}getSOSCount(){return new ze(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>r.type==="sos"&&!r.read).length;e.next(i)})})}getAdminNotifications(){return new ze(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>r.type==="sos"||r.reportDetails&&r.type==="action");e.next(i)})})}getCitizenNotifications(){return new ze(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>r.type==="alert"||r.type==="info"||r.reportDetails&&r.type==="action");e.next(i)})})}markAsRead(e){let i=this.notificationsSubject.value.map(r=>r.id===e?Ee(te({},r),{read:!0}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}deleteNotification(e){let i=this.notificationsSubject.value.filter(r=>r.id!==e);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}clearAll(){this.notificationsSubject.next([]),this.saveNotificationsToStorage([])}generateId(){return`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vn=class n{STORAGE_KEY="mountain_sentinel_reports";reportsSubject=new Ut(this.loadReportsFromStorage());notificationService=$(Aa);constructor(){}loadReportsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading reports from storage:",e),[]}}saveReportsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving reports to storage:",t)}}submitReport(e){let t=new Date().toISOString(),i=Ee(te({},e),{id:this.generateId(),status:"pending",createdAt:t,updatedAt:t}),o=[...this.reportsSubject.value,i];return this.reportsSubject.next(o),this.saveReportsToStorage(o),this.reportsSubject.asObservable().pipe(pe(s=>s.find(l=>l.id===i.id)))}getAllReports(){return this.reportsSubject.asObservable()}getPendingReports(){return this.reportsSubject.asObservable().pipe(pe(e=>e.filter(t=>t.status==="pending")))}getApprovedReports(){return this.reportsSubject.asObservable().pipe(pe(e=>e.filter(t=>t.status==="approved")))}approveReport(e){let t=this.reportsSubject.value,i=t.find(o=>o.id===e),r=t.map(o=>o.id===e?Ee(te({},o),{status:"approved",updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r),i&&i.reporterId!=="ADMIN"&&this.notificationService.notifyReportAction(i.reporterEmail||"unknown",i.reporterName||"Reporter",e,"approved",i.description)}rejectReport(e){let t=this.reportsSubject.value,i=t.find(o=>o.id===e),r=t.map(o=>o.id===e?Ee(te({},o),{status:"rejected",updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r),i&&i.reporterId!=="ADMIN"&&this.notificationService.notifyReportAction(i.reporterEmail||"unknown",i.reporterName||"Reporter",e,"rejected",i.description)}updateReport(e,t){let r=this.reportsSubject.value.map(o=>o.id===e?Ee(te(te({},o),t),{updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r)}deleteReport(e){let i=this.reportsSubject.value.filter(r=>r.id!==e);this.reportsSubject.next(i),this.saveReportsToStorage(i)}sendEmergencySOS(e,t,i){this.notificationService.addEmergencySOSAlert(t,e,i),this.notificationService.addSosNotification()}generateId(){return`report_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};var jo=class n{observer=null;isBrowser;constructor(e){this.isBrowser=l4(e)}initScrollRevealObserver(){if(!this.isBrowser)return;let e={threshold:.1,rootMargin:"0px 0px -50px 0px"};this.observer=new IntersectionObserver(i=>{i.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),this.observer?.unobserve(r.target))})},e),document.querySelectorAll(".scroll-reveal").forEach(i=>this.observer?.observe(i))}destroyScrollObserver(){this.observer&&(this.observer.disconnect(),this.observer=null)}initParallaxEffect(){if(!this.isBrowser)return;let e=document.querySelectorAll("[data-parallax]");e.length!==0&&window.addEventListener("scroll",()=>{let t=window.scrollY;e.forEach(i=>{let r=parseFloat(i.dataset.parallax||"0.5"),o=t*r;i.style.transform=`translateY(${o}px)`})},{passive:!0})}addAnimationClass(e,t,i=0){return new Promise(r=>{setTimeout(()=>{e.classList.add(t),r()},i)})}triggerPulse(e){e&&(e.style.animation="none",setTimeout(()=>{e.style.animation="pulse 0.6s cubic-bezier(0.4, 0, 0.2, 1)"},10))}triggerBounce(e,t=.1){if(!e)return;let i=e.style.transform;e.style.transform=`scale(${1-t})`,setTimeout(()=>{e.style.transition="transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)",e.style.transform=i||"scale(1)"},50)}addShimmerEffect(e){if(!e)return;let t=document.createElement("div");t.className="shimmer-effect",t.style.cssText=`
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmerSlide 0.8s infinite;
    `,e.style.position==="static"&&(e.style.position="relative"),e.appendChild(t)}smoothScrollToElement(e,t=60){if(!this.isBrowser)return;let i=typeof e=="string"?document.querySelector(e):e;if(!i)return;let r=i.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:r,behavior:"smooth"})}staggerAnimation(e,t,i=100){Array.from(e).forEach((r,o)=>{setTimeout(()=>{r.classList.add(t)},o*i)})}createFloatingEffect(e,t=10){if(!e)return;e.style.animation="float 3s ease-in-out infinite";let i=document.createElement("style");i.textContent=`
      @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-${t}px); }
      }
    `,document.head.appendChild(i)}onElementVisible(e,t,i=!0){if(!this.isBrowser)return;let r={threshold:.1},o=new IntersectionObserver(s=>{s.forEach(l=>{l.isIntersecting&&(t(),i&&o.unobserve(l.target))})},r);o.observe(e)}addRippleEffect(e){e&&e.addEventListener("click",t=>{let i=document.createElement("span"),r=e.getBoundingClientRect(),o=t.clientX-r.left,s=t.clientY-r.top,l=Math.max(r.width,r.height);i.style.cssText=`
        position: absolute;
        left: ${o-l/2}px;
        top: ${s-l/2}px;
        width: ${l}px;
        height: ${l}px;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        pointer-events: none;
        animation: rippleOut 0.6s ease-out;
      `,e.style.position="relative",e.style.overflow="hidden",e.appendChild(i),setTimeout(()=>i.remove(),600)})}triggerShake(e){e&&(e.style.animation="shake 0.5s cubic-bezier(0.4, 0, 0.2, 1)",setTimeout(()=>{e.style.animation=""},500))}addSkeletonEffect(e){e&&(e.style.cssText=`
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: skeleton 1.5s infinite;
    `)}static \u0275fac=function(t){return new(t||n)(Ge(sc))};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})},_re=`
  @keyframes shimmerSlide {
    0% { left: -100%; }
    100% { left: 100%; }
  }

  @keyframes rippleOut {
    0% {
      opacity: 1;
      transform: scale(0);
    }
    100% {
      opacity: 0;
      transform: scale(1);
    }
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
  }

  @keyframes skeleton {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }
`;if(typeof document<"u"){let n=document.createElement("style");n.textContent=_re,document.head.appendChild(n)}var Ni=class n{toasts=pn([]);generateId(){return`toast_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}show(e,t="info",i=4e3){let r={id:this.generateId(),message:e,type:t,duration:i};this.toasts.update(o=>[...o,r]),i>0&&setTimeout(()=>{this.dismiss(r.id)},i)}success(e,t=4e3){this.show(e,"success",t)}error(e,t=5e3){this.show(e,"error",t)}warning(e,t=4e3){this.show(e,"warning",t)}info(e,t=4e3){this.show(e,"info",t)}dismiss(e){this.toasts.update(t=>t.filter(i=>i.id!==e))}dismissAll(){this.toasts.set([])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};function vre(n,e){n&1&&(b(0,"span",42),I(1,"Location obtained"),w())}function yre(n,e){n&1&&(b(0,"span",43),I(1,"Obtaining your location..."),w())}function bre(n,e){if(n&1&&(b(0,"div",33),oe(1,"div",34)(2,"div",35)(3,"div",36),b(4,"div",37),re(),b(5,"svg",38),oe(6,"polygon",18)(7,"line",19)(8,"line",20),w()()(),_e(),b(9,"h2",39),I(10,"SENDING EMERGENCY SOS"),w(),b(11,"p",40),I(12,"Please wait while we alert emergency services..."),w(),b(13,"div",41),Re(14,vre,2,0,"span",42)(15,yre,2,0,"span",43),w(),b(16,"div",44),oe(17,"div",45),w(),b(18,"p",46),I(19),w()),n&2){let t=B(2);M(14),Ne(t.userLocation?14:15),M(3),cd("width",t.sosProgress,"%"),M(2),Te("",t.sosCountdown," seconds remaining")}}function wre(n,e){n&1&&(b(0,"span"),I(1,"Your location has been shared"),w())}function xre(n,e){n&1&&(b(0,"span"),I(1,"Location not available - please share your location manually"),w())}function Cre(n,e){if(n&1){let t=ve();b(0,"div",32)(1,"div",47),re(),b(2,"svg",48),oe(3,"polyline",49),w()(),_e(),b(4,"h2",50),I(5,"EMERGENCY RECEIVED"),w(),b(6,"p",51),I(7,"Admin has been notified immediately."),w(),b(8,"p",52),I(9,"Help is on the way. Stay calm and safe."),w(),b(10,"div",53)(11,"div",54),oe(12,"div",55),Re(13,wre,2,0,"span")(14,xre,2,0,"span"),w(),b(15,"div",54),oe(16,"div",56),b(17,"span"),I(18,"Emergency services alerted"),w()(),b(19,"div",54),oe(20,"div",57),b(21,"span"),I(22,"Admin notified in real-time"),w()()(),b(23,"button",58),ee("click",function(){q(t);let r=B(2);return G(r.closeSosOverlay())}),I(24,"Close"),w()()}if(n&2){let t=B(2);M(11),We("success",t.userLocation)("warning",!t.userLocation),M(2),Ne(t.userLocation?13:14)}}function Ere(n,e){if(n&1&&(b(0,"div",30)(1,"div",31),Re(2,bre,20,4)(3,Cre,25,5,"div",32),w()()),n&2){let t=B();We("sos-success",t.sosSuccess),M(2),Ne(t.sosSuccess?3:2)}}function Ire(n,e){if(n&1&&(b(0,"div",96),oe(1,"img",97),w()),n&2){let t=B().$implicit;M(),W("src",t.imageUrl,xn)("alt",t.description)}}function Pre(n,e){if(n&1){let t=ve();b(0,"article",62),ee("click",function(){let r=q(t).$implicit,o=B(3);return G(o.viewReportDetail(r.id))})("keydown.enter",function(){let r=q(t).$implicit,o=B(3);return G(o.viewReportDetail(r.id))})("keydown.space",function(){let r=q(t).$implicit,o=B(3);return G(o.viewReportDetail(r.id))}),b(1,"div",63),I(2),w(),b(3,"div",64)(4,"div",65)(5,"div",66),re(),b(6,"svg",10),oe(7,"path",67),w()(),_e(),b(8,"div",68)(9,"span",69),I(10),w(),b(11,"span",70),re(),b(12,"svg",71),oe(13,"circle",72)(14,"polyline",73),w(),I(15," Just now "),_e(),b(16,"span",74),I(17,"\u2022"),w(),re(),b(18,"svg",71),oe(19,"path",14)(20,"circle",15),w(),I(21),w()()()(),_e(),b(22,"div",75),ie(23,Ire,2,2,"div",76),b(24,"p",77),I(25),w()(),b(26,"div",78),re(),b(27,"svg",79),oe(28,"path",14)(29,"circle",15),w(),_e(),b(30,"span"),I(31),w()(),b(32,"div",80)(33,"button",81),ee("click",function(r){let o=q(t).$implicit;return B(3).viewReportDetail(o.id),G(r.stopPropagation())}),re(),b(34,"svg",82),oe(35,"path",83)(36,"circle",84),w(),I(37," Details "),w(),_e(),b(38,"div",85)(39,"button",86),ee("click",function(r){let o=q(t).$implicit,s=B(3);return G(s.shareReport(r,o))}),re(),b(40,"svg",87),oe(41,"circle",88)(42,"circle",89)(43,"circle",90)(44,"line",91)(45,"line",92),w()(),_e(),b(46,"button",93),ee("click",function(r){let o=q(t).$implicit,s=B(3);return G(s.toggleSaveReport(r,o.id))}),re(),b(47,"svg",94),oe(48,"path",95),w()()()()()}if(n&2){let t=e.$implicit,i=e.index,r=B(3);cd("animation-delay",i*.08+"s"),We("priority-high",t.priority==="high")("priority-medium",t.priority==="medium")("priority-low",t.priority==="low"||!t.priority),rn("aria-label","Safety report - "+(t.priority==="high"?"Urgent":t.priority==="medium"?"Alert":"Info")+" priority"),M(),We("high",t.priority==="high")("medium",t.priority==="medium")("low",t.priority==="low"||!t.priority),M(),Te(" ",t.priority==="high"?"URGENT":t.priority==="medium"?"ALERT":"INFO"," "),M(8),ue(t.reporterName||"Anonymous Citizen"),M(11),Te(" ",t.barangay," "),M(2),W("ngIf",t.imageUrl),M(2),ue(t.description),M(6),qn("",t.street,", ",t.barangay),M(15),We("saved",r.isReportSaved(t.id)),rn("aria-label",r.isReportSaved(t.id)?"Remove from saved reports":"Save this report")("aria-pressed",r.isReportSaved(t.id)),M(),rn("fill",r.isReportSaved(t.id)?"currentColor":"none")}}function Tre(n,e){if(n&1&&(b(0,"div",60),ie(1,Pre,49,27,"article",61),w()),n&2){let t=B().ngIf;M(),W("ngForOf",t)}}function Sre(n,e){n&1&&(b(0,"div",98)(1,"div",99),re(),b(2,"svg",100),oe(3,"path",101)(4,"polyline",102),w()(),_e(),b(5,"h3"),I(6,"All Clear!"),w(),b(7,"p"),I(8,"No safety reports at this time."),oe(9,"br"),I(10,"The community is safe. Stay vigilant!"),w()())}function Mre(n,e){if(n&1&&(b(0,"div"),ie(1,Tre,2,1,"div",59)(2,Sre,11,0,"ng-template",null,0,Qt),w()),n&2){let t=e.ngIf,i=Pt(3);M(),W("ngIf",t.length>0)("ngIfElse",i)}}var ox=class n{authService=$(Dn);reportService=$(Vn);notificationService=$(Aa);router=$(Rt);animationService=$(jo);toastService=$(Ni);sosSubscription;currentUser$=this.authService.currentUser$;isAdmin$=this.authService.isAdmin$;savedReports=new Set;SAVED_REPORTS_KEY="mountain_sentinel_saved_reports";citizenReports$=this.reportService.getAllReports().pipe(pe(e=>e.filter(t=>t.status==="approved"&&!t.isAdminReport&&t.reporterId!=="ADMIN")));filter$=new Ut("all");search$=new Ut("");currentFilter="all";filteredReports$=xr([this.citizenReports$,this.filter$.pipe(qr("all")),this.search$.pipe($p(150),qr(""))]).pipe(pe(([e,t,i])=>{let r=(i||"").trim().toLowerCase();return e.filter(o=>t&&t!=="all"&&(o.priority||"low")!==t?!1:r?((o.description||"")+" "+(o.reporterName||"")+" "+(o.street||"")+" "+(o.barangay||"")).toLowerCase().indexOf(r)!==-1:!0)}));adminAlerts$=this.reportService.getAllReports().pipe(pe(e=>e.filter(t=>t.status==="approved"&&(t.isAdminReport||t.reporterId==="ADMIN"))));approvedReports$=this.reportService.getAllReports().pipe(pe(e=>e.filter(t=>t.status==="approved")));sosActive=!1;sosSuccess=!1;sosProgress=0;sosCountdown=5;sosDuration=5;userLocation=null;locationError=null;ngOnInit(){this.loadSavedReports()}loadSavedReports(){try{let e=localStorage.getItem(this.SAVED_REPORTS_KEY);e&&(this.savedReports=new Set(JSON.parse(e)))}catch(e){console.warn("Failed to load saved reports:",e)}}persistSavedReports(){try{localStorage.setItem(this.SAVED_REPORTS_KEY,JSON.stringify([...this.savedReports]))}catch(e){console.warn("Failed to save reports:",e)}}isReportSaved(e){return this.savedReports.has(e)}toggleSaveReport(e,t){e.stopPropagation(),this.savedReports.has(t)?(this.savedReports.delete(t),this.toastService.info("Report removed from saved items")):(this.savedReports.add(t),this.toastService.success("Report saved successfully!")),this.persistSavedReports()}shareReport(e,t){return O(this,null,function*(){e.stopPropagation();let i={title:"Safety Alert - Mountain Sentinel",text:`${t.description}
\u{1F4CD} ${t.street}, ${t.barangay}`,url:`${window.location.origin}/report-detail/${t.id}`};try{navigator.share&&navigator.canShare?.(i)?(yield navigator.share(i),this.toastService.success("Shared successfully!")):(yield navigator.clipboard.writeText(i.url),this.toastService.success("Link copied to clipboard!"))}catch(r){if(r.name!=="AbortError")try{yield navigator.clipboard.writeText(i.url),this.toastService.success("Link copied to clipboard!")}catch{this.toastService.error("Unable to share. Please copy the link manually.")}}})}ngOnDestroy(){this.animationService.destroyScrollObserver(),this.sosSubscription&&this.sosSubscription.unsubscribe()}navigateToReport(){this.router.navigate(["/report"])}viewFullMap(){this.router.navigate(["/map"])}triggerSOS(){this.authService.currentUser$.pipe(Mi(1)).subscribe(e=>{if(!e){this.toastService.warning("Please log in to send an emergency SOS alert."),this.router.navigate(["/login"]);return}this.router.navigate(["/emergency-call"])})}getLocationAsync(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{this.userLocation={lat:e.coords.latitude,lng:e.coords.longitude},console.log("Location obtained:",this.userLocation)},e=>{console.warn("Location error:",e.message),this.locationError=e.message,navigator.geolocation.getCurrentPosition(t=>{this.userLocation={lat:t.coords.latitude,lng:t.coords.longitude},console.log("Location obtained (low accuracy):",this.userLocation)},t=>{console.error("Location failed completely:",t.message)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4})},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}completeSOS(e){this.userLocation?this.sendSOSToAdmin(e,this.userLocation):navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{let i={lat:t.coords.latitude,lng:t.coords.longitude};this.sendSOSToAdmin(e,i)},()=>{console.warn("Could not obtain location for SOS"),this.sendSOSToAdmin(e)},{enableHighAccuracy:!1,timeout:3e3,maximumAge:6e4}):this.sendSOSToAdmin(e)}sendSOSToAdmin(e,t){this.reportService.sendEmergencySOS(e.email||"emergency-user@sos.alert",e.displayName||"Unknown User",t),this.sosSuccess=!0,navigator.vibrate&&navigator.vibrate([200,100,200])}closeSosOverlay(){this.sosActive=!1,this.sosSuccess=!1,this.sosProgress=0,this.sosCountdown=this.sosDuration,this.router.navigate(["/notification"],{queryParams:{sos:"sent"}})}viewReportDetail(e){this.router.navigate(["/report-detail",e])}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}setFilter(e){this.currentFilter=e,this.filter$.next(e)}onSearch(e){this.search$.next(e||"")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-dashboard"]],decls:44,vars:16,consts:[["noReports",""],["role","main","id","main-content",1,"dashboard-container"],["role","alertdialog","aria-modal","true","aria-labelledby","sos-title","aria-describedby","sos-desc",1,"sos-overlay",3,"sos-success"],[1,"dashboard-content"],["role","region","aria-labelledby","feed-title",1,"main-feed-layout"],["aria-label","Safety reports feed",1,"feed-column"],[1,"feed-header-bar","scroll-reveal","animate-on-load"],["id","feed-title",1,"feed-title"],[1,"quick-actions-header"],["routerLink","/police-reports","aria-label","View Police Reports",1,"action-btn","police-btn"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],["type","button","aria-label","View Incident Map",1,"action-btn","map-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["type","button","aria-label","Trigger Emergency SOS",1,"action-btn","sos-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["role","search",1,"feed-search"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","search","placeholder","Search...","aria-label","Search reports","id","feed-search-input",3,"input"],["aria-label","Filter reports by priority",1,"feed-nav-filters"],["type","button",1,"nav-filter-btn",3,"click"],["role","feed","aria-busy","false",1,"feed-cards-container"],[4,"ngIf"],["role","alertdialog","aria-modal","true","aria-labelledby","sos-title","aria-describedby","sos-desc",1,"sos-overlay"],[1,"sos-modal","scroll-reveal","animate-on-load"],[1,"sos-success-container"],[1,"sos-sending"],[1,"sos-pulse-ring"],[1,"sos-pulse-ring","delay-1"],[1,"sos-pulse-ring","delay-2"],[1,"sos-icon-large"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["id","sos-title",1,"sos-title"],["id","sos-desc",1,"sos-subtitle"],[1,"sos-location-status"],[1,"location-obtained"],[1,"location-pending"],[1,"sos-progress-bar"],[1,"sos-progress-fill"],[1,"sos-countdown"],[1,"sos-success-icon"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["points","20 6 9 17 4 12"],[1,"sos-title","success"],[1,"sos-subtitle"],[1,"sos-info"],[1,"sos-details"],[1,"sos-detail-item"],[1,"detail-icon","location"],[1,"detail-icon","services"],[1,"detail-icon","admin"],[1,"sos-close-btn",3,"click"],["class","feed-cards","role","list",4,"ngIf","ngIfElse"],["role","list",1,"feed-cards"],["class","feed-card scroll-reveal animate-on-load","tabindex","0","role","listitem",3,"priority-high","priority-medium","priority-low","animation-delay","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","listitem",1,"feed-card","scroll-reveal","animate-on-load",3,"click","keydown.enter","keydown.space"],[1,"priority-ribbon"],[1,"card-header"],[1,"user-info"],[1,"user-avatar"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"user-details"],[1,"user-name"],[1,"post-meta"],["xmlns","http://www.w3.org/2000/svg","width","12","height","12","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["points","12 6 12 12 16 14"],[1,"meta-dot"],[1,"card-content"],["class","card-image",4,"ngIf"],[1,"content-text"],[1,"location-badge"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"card-footer"],["type","button","aria-label","View report details",1,"footer-action","primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],[1,"footer-secondary"],["type","button","aria-label","Share this report",1,"footer-action","icon-only",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],["type","button",1,"footer-action","icon-only",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"],[1,"card-image"],["loading","lazy",3,"src","alt"],[1,"empty-feed"],[1,"empty-icon"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],["points","9 12 12 15 16 10"]],template:function(t,i){t&1&&(b(0,"div",1),Re(1,Ere,4,3,"div",2),b(2,"div",3)(3,"main",4)(4,"section",5)(5,"header",6)(6,"h2",7),I(7,"Community Safety Feed"),w(),b(8,"div",8)(9,"a",9),re(),b(10,"svg",10),oe(11,"path",11),w(),_e(),b(12,"span"),I(13,"Police Reports"),w()(),b(14,"button",12),ee("click",function(){return i.viewFullMap()}),re(),b(15,"svg",13),oe(16,"path",14)(17,"circle",15),w(),_e(),b(18,"span"),I(19,"Incident Map"),w()(),b(20,"button",16),ee("click",function(){return i.triggerSOS()}),re(),b(21,"svg",17),oe(22,"polygon",18)(23,"line",19)(24,"line",20),w(),_e(),b(25,"span"),I(26,"Emergency SOS"),w()()(),b(27,"div",21),re(),b(28,"svg",22),oe(29,"circle",23)(30,"line",24),w(),_e(),b(31,"input",25),ee("input",function(o){return i.onSearch(o.target.value)}),w()(),b(32,"nav",26)(33,"button",27),ee("click",function(){return i.setFilter("all")}),I(34," All "),w(),b(35,"button",27),ee("click",function(){return i.setFilter("high")}),I(36," Urgent "),w(),b(37,"button",27),ee("click",function(){return i.setFilter("medium")}),I(38," Alerts "),w(),b(39,"button",27),ee("click",function(){return i.setFilter("low")}),I(40," Info "),w()()(),b(41,"div",28),ie(42,Mre,4,2,"div",29),Me(43,"async"),w()()()()()),t&2&&(M(),Ne(i.sosActive?1:-1),M(32),We("active",i.currentFilter==="all"),rn("aria-pressed",i.currentFilter==="all"),M(2),We("active",i.currentFilter==="high"),rn("aria-pressed",i.currentFilter==="high"),M(2),We("active",i.currentFilter==="medium"),rn("aria-pressed",i.currentFilter==="medium"),M(2),We("active",i.currentFilter==="low"),rn("aria-pressed",i.currentFilter==="low"),M(3),W("ngIf",$e(43,14,i.filteredReports$)))},dependencies:[Tt,ai,gn,po,ar,An],styles:['.dashboard-container[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#f5f7fa,#e9ecef);min-height:calc(100vh - 60px);padding:0;font-family:inherit}@media (max-width: 480px){.dashboard-container[_ngcontent-%COMP%]{min-height:calc(100vh - 48px)}}.dashboard-tabs[_ngcontent-%COMP%]{display:flex;gap:0;margin:0;padding:0 30px;border-bottom:1px solid rgba(0,0,0,.08);background:#fff;overflow-x:auto;overflow-y:hidden;box-shadow:0 4px 12px #00000014;-webkit-overflow-scrolling:touch;scrollbar-width:thin}.dashboard-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.dashboard-tabs[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.dashboard-tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d0d0d0;border-radius:2px}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{flex:0 0 auto;padding:16px 24px;border:none;background:transparent;color:#666;font-size:13px;font-weight:600;cursor:pointer;border-bottom:3px solid transparent;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;white-space:nowrap;text-transform:uppercase;letter-spacing:.5px;overflow:hidden;min-height:48px;display:flex;align-items:center;touch-action:manipulation}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;left:-100%;width:100%;height:3px;background:#1a2a5e;transition:left .4s cubic-bezier(.4,0,.2,1)}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{color:#333;background:#00000005}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:before{left:0}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{color:#1a2a5e;border-bottom-color:#1a2a5e;font-weight:700}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]:before{left:0}.dashboard-content[_ngcontent-%COMP%]{display:block;padding:24px;width:100%;max-width:100%;margin:0 auto;min-height:calc(100vh - 120px);box-sizing:border-box}@media (max-width: 768px){.dashboard-tabs[_ngcontent-%COMP%]{padding:0 16px}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{padding:14px 16px;font-size:12px}.dashboard-content[_ngcontent-%COMP%]{padding:16px;min-height:calc(100vh - 100px)}}@media (max-width: 480px){.dashboard-tabs[_ngcontent-%COMP%]{padding:0 8px}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{padding:12px;font-size:11px;letter-spacing:0px;font-weight:500;min-height:44px}.dashboard-content[_ngcontent-%COMP%]{padding:12px 8px;min-height:calc(100vh - 80px)}}@media (max-width: 375px){.dashboard-content[_ngcontent-%COMP%]{padding:8px;min-height:calc(100vh - 70px)}}.fab-stack[_ngcontent-%COMP%]{position:fixed;left:16px;bottom:24px;display:flex;flex-direction:column;gap:14px;z-index:1000;animation:_ngcontent-%COMP%_fabStackSlideIn .6s cubic-bezier(.34,1.56,.64,1) forwards}@keyframes _ngcontent-%COMP%_fabStackSlideIn{0%{opacity:0;transform:translate(-60px)}to{opacity:1;transform:translate(0)}}.fab-btn[_ngcontent-%COMP%]{width:auto;height:52px;border-radius:26px;display:flex;align-items:center;justify-content:flex-start;gap:10px;padding:0 18px 0 14px;cursor:pointer;transition:all .3s cubic-bezier(.175,.885,.32,1.275);border:none;text-decoration:none;position:relative;box-shadow:0 4px 20px #0000001f}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:26px;height:26px;flex-shrink:0}.fab-label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;white-space:nowrap;letter-spacing:.3px}@media (max-width: 768px){.fab-stack[_ngcontent-%COMP%]{left:8px;bottom:16px;gap:8px}.fab-btn[_ngcontent-%COMP%]{height:40px;border-radius:20px;padding:0 12px 0 10px;gap:6px;box-shadow:0 3px 12px #00000026}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.fab-label[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.2px}}@media (max-width: 480px){.fab-stack[_ngcontent-%COMP%]{left:6px;bottom:12px;gap:6px}.fab-btn[_ngcontent-%COMP%]{height:36px;border-radius:18px;padding:0 10px 0 8px;gap:4px;box-shadow:0 2px 8px #0000001f}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.fab-label[_ngcontent-%COMP%]{font-size:8px;letter-spacing:0px}}@media (max-width: 375px){.fab-stack[_ngcontent-%COMP%]{left:4px;bottom:10px;gap:4px}.fab-btn[_ngcontent-%COMP%]{height:32px;border-radius:16px;padding:0 8px 0 6px;gap:3px;box-shadow:0 2px 6px #0000001a}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.fab-label[_ngcontent-%COMP%]{font-size:7px}}.fab-btn.alerts-fab[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border:2px solid rgba(212,168,75,.5);box-shadow:0 6px 20px #1a2a5e80}.fab-btn.alerts-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;fill:#d4a84b}.fab-btn.alerts-fab[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{color:#fff}.fab-btn.alerts-fab[_ngcontent-%COMP%]:hover{transform:scale(1.05) translate(4px);box-shadow:0 8px 28px #1a2a5e99;border-color:#d4a84b}.fab-btn.map-fab[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#c9a227);border:2px solid rgba(255,255,255,.4);box-shadow:0 6px 20px #d4a84b80}.fab-btn.map-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;stroke:#1a2a5e}.fab-btn.map-fab[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{color:#1a2a5e}.fab-btn.map-fab[_ngcontent-%COMP%]:hover{transform:scale(1.05) translate(4px);box-shadow:0 8px 28px #d4a84b99}.fab-btn.sos-fab[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#8b0000);border:2px solid rgba(255,255,255,.4);box-shadow:0 6px 20px #c41e3a99;animation:_ngcontent-%COMP%_sosHeartbeat 1.5s ease-in-out infinite}.fab-btn.sos-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;stroke:#fff}.fab-btn.sos-fab[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{color:#fff}.fab-btn.sos-fab[_ngcontent-%COMP%]:hover{transform:scale(1.08) translate(4px);box-shadow:0 10px 32px #c41e3ab3;animation:none}.fab-btn.sos-fab.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;animation:none}@keyframes _ngcontent-%COMP%_sosHeartbeat{0%,to{transform:scale(1)}15%{transform:scale(1.08)}30%{transform:scale(1)}45%{transform:scale(1.05)}60%{transform:scale(1)}}.main-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 1fr;gap:24px;max-width:1600px;margin:0 auto}.citizen-reports-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 20px #00000014}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid rgba(26,42,94,.1)}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#1a2a5e;font-weight:700;display:flex;align-items:center;gap:10px}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";width:4px;height:22px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:2px}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:6px 0 0;font-size:13px;color:#888}.police-alerts-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:16px;padding:20px;box-shadow:0 4px 20px #1a2a5e4d;height:fit-content;position:sticky;top:24px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.1)}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#d4a84b;font-weight:700;display:flex;align-items:center;gap:8px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:4px 0 0;font-size:11px;color:#fff9}.main-feed-layout[_ngcontent-%COMP%]{display:block;width:100%;max-width:100%;margin:0 auto;padding:0 60px 0 80px}@media (max-width: 768px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 12px 0 60px}}@media (max-width: 480px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 8px 0 50px}}@media (max-width: 375px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 4px 0 44px}}.feed-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%;max-width:100%}.feed-header-bar[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:12px 14px;box-shadow:0 2px 16px #00000014;display:flex;flex-direction:column;align-items:stretch;gap:10px;flex-wrap:wrap;width:100%;justify-content:space-between;box-sizing:border-box}.feed-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:800;color:#1a2a5e;white-space:nowrap;letter-spacing:-.5px;flex-shrink:0;text-align:center}@media (min-width: 769px){.feed-header-bar[_ngcontent-%COMP%]{flex-direction:row;align-items:center}}@media (max-width: 768px){.feed-header-bar[_ngcontent-%COMP%]{padding:10px 12px;gap:8px;border-radius:14px}.feed-title[_ngcontent-%COMP%]{font-size:1.15rem;text-align:center}}@media (max-width: 480px){.feed-header-bar[_ngcontent-%COMP%]{padding:10px;gap:8px;border-radius:12px}.feed-title[_ngcontent-%COMP%]{font-size:1rem;text-align:center;margin-bottom:2px}}@media (max-width: 375px){.feed-header-bar[_ngcontent-%COMP%]{padding:8px;gap:6px;border-radius:10px}.feed-title[_ngcontent-%COMP%]{font-size:.9rem}}.feed-title[_ngcontent-%COMP%]{margin:0;flex-shrink:0;white-space:nowrap}.quick-actions-header[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;flex-shrink:0;width:100%;margin-top:8px}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;padding:10px 12px;border:none;border-radius:20px;font-size:.8rem;font-weight:600;cursor:pointer;transition:all .3s ease;white-space:nowrap;text-decoration:none;flex-shrink:0;min-height:40px;touch-action:manipulation}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;flex-shrink:0}.action-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline}.police-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#2a3a7e);color:#d4a84b}.police-btn[_ngcontent-%COMP%]:hover, .police-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px);box-shadow:0 4px 12px #1a2a5e4d}.map-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#e5b85c);color:#1a2a5e}.map-btn[_ngcontent-%COMP%]:hover, .map-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px);box-shadow:0 4px 12px #d4a84b4d}.sos-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#e63946);color:#fff}.sos-btn[_ngcontent-%COMP%]:hover, .sos-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px);box-shadow:0 4px 12px #c41e3a4d}@media (max-width: 768px){.quick-actions-header[_ngcontent-%COMP%]{gap:6px;margin-top:6px}.action-btn[_ngcontent-%COMP%]{padding:8px 10px;font-size:.75rem;min-height:38px}.action-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}}@media (max-width: 480px){.quick-actions-header[_ngcontent-%COMP%]{gap:6px;justify-content:space-around;width:100%;margin-top:8px}.action-btn[_ngcontent-%COMP%]{padding:8px 10px;border-radius:18px;font-size:.7rem;min-height:36px;flex:0 1 auto}.action-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}}@media (max-width: 375px){.quick-actions-header[_ngcontent-%COMP%]{gap:4px}.action-btn[_ngcontent-%COMP%]{padding:6px 8px;min-height:32px}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}}@media (max-width: 768px){.feed-header-bar[_ngcontent-%COMP%]{padding:10px 12px;gap:8px;border-radius:14px}}@media (max-width: 480px){.feed-header-bar[_ngcontent-%COMP%]{padding:10px;gap:8px;border-radius:12px}}@media (max-width: 375px){.feed-header-bar[_ngcontent-%COMP%]{padding:8px;gap:6px;border-radius:10px}}.feed-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:800;color:#1a2a5e;white-space:nowrap;letter-spacing:-.5px}@media (max-width: 768px){.feed-title[_ngcontent-%COMP%]{font-size:1.15rem}}@media (max-width: 480px){.feed-title[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 375px){.feed-title[_ngcontent-%COMP%]{font-size:.9rem}}.feed-nav-filters[_ngcontent-%COMP%]{display:flex;gap:10px;flex:1 1 0;align-items:center;justify-content:flex-end;flex-wrap:wrap;margin-left:auto}.nav-filter-btn[_ngcontent-%COMP%]{width:90px!important;height:44px!important;min-width:90px!important;max-width:90px!important;min-height:44px!important;max-height:44px!important;padding:0!important;margin:0!important;border:none;background:#f0f2f5;border-radius:22px;font-size:14px;font-weight:600;color:#555;cursor:pointer;transition:all .2s ease;white-space:nowrap;text-align:center;box-shadow:0 2px 6px #0000000f;display:inline-flex;align-items:center;justify-content:center;line-height:1;box-sizing:border-box}@media (max-width: 768px){.nav-filter-btn[_ngcontent-%COMP%]{width:70px!important;height:36px!important;min-width:70px!important;max-width:70px!important;min-height:36px!important;max-height:36px!important;font-size:11px;border-radius:18px}}@media (max-width: 480px){.nav-filter-btn[_ngcontent-%COMP%]{width:60px!important;height:32px!important;min-width:60px!important;max-width:60px!important;min-height:32px!important;max-height:32px!important;font-size:10px;border-radius:16px}}@media (max-width: 375px){.nav-filter-btn[_ngcontent-%COMP%]{width:50px!important;height:28px!important;min-width:50px!important;max-width:50px!important;min-height:28px!important;max-height:28px!important;font-size:9px;border-radius:14px}}.nav-filter-btn[_ngcontent-%COMP%]:hover{background:#e4e6e9;color:#1a2a5e;transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.nav-filter-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;box-shadow:0 4px 12px #1a2a5e4d}.feed-search[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#f5f7fa;border-radius:20px;padding:8px 14px;min-width:160px;max-width:220px}.feed-search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#999;flex-shrink:0}.feed-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:transparent;font-size:13px;width:100%;color:#333;outline:none}.feed-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa}.feed-section-header[_ngcontent-%COMP%], .feed-controls[_ngcontent-%COMP%]{display:none}.filter-tab.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-color:#1a2a5e;color:#fff}.filter-tab.urgent[_ngcontent-%COMP%]:hover, .filter-tab.urgent.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#8b0000);border-color:#c41e3a;color:#fff}.filter-tab.alert[_ngcontent-%COMP%]:hover, .filter-tab.alert.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#b8860b);border-color:#d4a84b;color:#fff}.filter-tab.info[_ngcontent-%COMP%]:hover, .filter-tab.info.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#1e7e34);border-color:#28a745;color:#fff}.search-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 16px;background:#f8f9fa;border-radius:25px;border:2px solid transparent;transition:all .25s ease;min-width:240px}.search-wrapper[_ngcontent-%COMP%]:focus-within{border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.search-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#888;flex-shrink:0}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{border:none;background:transparent;outline:none;font-size:14px;width:100%;color:#333}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.feed-cards-container[_ngcontent-%COMP%]{min-height:400px;width:100%;display:flex;flex-direction:column}.feed-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:28px;width:100%}.feed-card[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:0;box-shadow:0 4px 24px #00000014;cursor:pointer;transition:all .35s cubic-bezier(.175,.885,.32,1.275);position:relative;overflow:hidden;animation:_ngcontent-%COMP%_cardSlideIn .5s ease forwards;opacity:0;display:flex;flex-direction:column;height:100%;min-height:340px;border:1px solid rgba(0,0,0,.05)}@media (max-width: 768px){.feed-cards[_ngcontent-%COMP%]{gap:16px}.feed-card[_ngcontent-%COMP%]{min-height:280px;border-radius:16px}}@media (max-width: 480px){.feed-cards[_ngcontent-%COMP%]{gap:12px}.feed-card[_ngcontent-%COMP%]{min-height:240px;border-radius:12px}}@media (max-width: 375px){.feed-cards[_ngcontent-%COMP%]{gap:8px}.feed-card[_ngcontent-%COMP%]{min-height:200px;border-radius:10px}}@keyframes _ngcontent-%COMP%_cardSlideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.feed-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 50px #1a2a5e26;border-color:#d4a84b4d}.priority-ribbon[_ngcontent-%COMP%]{position:absolute;top:16px;right:-32px;padding:6px 40px;font-size:10px;font-weight:800;letter-spacing:1px;transform:rotate(45deg);z-index:2}.priority-ribbon.high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#dc3545);color:#fff;box-shadow:0 2px 8px #c41e3a66}.priority-ribbon.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#f0ad4e);color:#1a2a5e;box-shadow:0 2px 8px #d4a84b66}.priority-ribbon.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#5cb85c);color:#fff;box-shadow:0 2px 8px #28a7454d}.card-header[_ngcontent-%COMP%]{padding:28px 32px 4px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.user-avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#e9ecef,#dee2e6);display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative}@media (max-width: 768px){.card-header[_ngcontent-%COMP%]{padding:16px 20px 2px}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px}}@media (max-width: 480px){.card-header[_ngcontent-%COMP%]{padding:12px 16px 2px}.user-info[_ngcontent-%COMP%]{gap:10px}.user-avatar[_ngcontent-%COMP%]{width:36px;height:36px}}@media (max-width: 375px){.card-header[_ngcontent-%COMP%]{padding:10px 12px 2px}.user-avatar[_ngcontent-%COMP%]{width:32px;height:32px}}.user-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px;color:#555}.user-avatar.verified[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;bottom:-2px;right:-2px;width:18px;height:18px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:50%;font-size:10px;color:#fff;display:flex;align-items:center;justify-content:center;border:2px solid white}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.user-name[_ngcontent-%COMP%]{font-weight:700;font-size:17px;color:#1a2a5e}.post-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px;color:#999}.post-meta[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.6}.meta-dot[_ngcontent-%COMP%]{opacity:.4}.card-content[_ngcontent-%COMP%]{padding:20px 32px;flex:1}@media (max-width: 768px){.card-content[_ngcontent-%COMP%]{padding:14px 20px}}@media (max-width: 480px){.card-content[_ngcontent-%COMP%]{padding:10px 14px}}@media (max-width: 375px){.card-content[_ngcontent-%COMP%]{padding:8px 10px}}.card-image[_ngcontent-%COMP%]{width:100%;max-height:240px;overflow:hidden;border-radius:16px;margin-bottom:16px;background:#f0f2f5}@media (max-width: 768px){.card-image[_ngcontent-%COMP%]{max-height:180px;margin-bottom:10px}}@media (max-width: 480px){.card-image[_ngcontent-%COMP%]{max-height:150px;margin-bottom:8px}}@media (max-width: 375px){.card-image[_ngcontent-%COMP%]{max-height:120px;margin-bottom:6px}}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.feed-card[_ngcontent-%COMP%]:hover   .card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.content-text[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:1.8;color:#333;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}@media (max-width: 768px){.content-text[_ngcontent-%COMP%]{font-size:13px;line-height:1.4;-webkit-line-clamp:2}}@media (max-width: 480px){.content-text[_ngcontent-%COMP%]{font-size:12px;line-height:1.3;-webkit-line-clamp:2}}@media (max-width: 375px){.content-text[_ngcontent-%COMP%]{font-size:11px;line-height:1.2;-webkit-line-clamp:1}}.location-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;margin:0 32px 20px;padding:14px 20px;background:linear-gradient(135deg,#1a2a5e14,#1a2a5e0a);border-radius:12px;border-left:4px solid #1a2a5e}@media (max-width: 768px){.location-badge[_ngcontent-%COMP%]{margin:0 20px 14px;padding:10px 14px;gap:6px}}@media (max-width: 480px){.location-badge[_ngcontent-%COMP%]{margin:0 12px 10px;padding:8px 10px;gap:4px}}@media (max-width: 375px){.location-badge[_ngcontent-%COMP%]{margin:0 8px 8px;padding:6px 8px;gap:3px}}.location-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;flex-shrink:0}.location-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 32px;background:linear-gradient(180deg,#f8f9fa,#f1f3f5);border-top:1px solid rgba(0,0,0,.06);margin-top:auto}.footer-action[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 18px;border:none;border-radius:12px;font-size:13px;font-weight:600;cursor:pointer;transition:all .25s ease}.footer-action.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;font-size:13px;padding:10px 18px}.footer-action.primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1a2a5e59}.footer-secondary[_ngcontent-%COMP%]{display:flex;gap:10px}.footer-action.icon-only[_ngcontent-%COMP%]{padding:10px;background:#fff;color:#999;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #00000014}.footer-action.icon-only[_ngcontent-%COMP%]:hover{background:#1a2a5e14;color:#1a2a5e;transform:scale(1.1)}.footer-action.icon-only.saved[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#c9a227);color:#fff}.footer-action.icon-only.shared[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff}.empty-feed[_ngcontent-%COMP%]{text-align:center;padding:80px 40px;background:#fff;border-radius:16px;box-shadow:0 4px 24px #0000000f;width:100%;max-width:100%;min-height:400px;display:flex;flex-direction:column;align-items:center;justify-content:center}.empty-icon[_ngcontent-%COMP%]{width:100px;height:100px;margin:0 auto 20px;background:linear-gradient(135deg,#28a7451a,#28a7450d);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#28a745}.empty-feed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.75rem;color:#1a2a5e;font-weight:700}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;line-height:1.6;font-size:1rem}@media (max-width: 768px){.empty-feed[_ngcontent-%COMP%]{padding:60px 24px;min-height:300px}.empty-icon[_ngcontent-%COMP%]{width:80px;height:80px}.empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px}.empty-feed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}}@media (max-width: 480px){.empty-feed[_ngcontent-%COMP%]{padding:40px 16px;min-height:250px}.empty-icon[_ngcontent-%COMP%]{width:64px;height:64px}.empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px}.empty-feed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem}}.alerts-sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;position:sticky;top:90px;height:fit-content}.sidebar-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:16px;overflow:hidden;box-shadow:0 8px 32px #1a2a5e4d}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 20px;border-bottom:1px solid rgba(255,255,255,.1);background:#00000026}.sidebar-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#d4a84b;font-weight:700;font-size:14px}.sidebar-title[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b}.sidebar-badge[_ngcontent-%COMP%]{padding:4px 10px;background:#d4a84b33;border:1px solid rgba(212,168,75,.4);border-radius:6px;font-size:10px;font-weight:700;color:#d4a84b;letter-spacing:1px}.sidebar-content[_ngcontent-%COMP%]{padding:16px;max-height:400px;overflow-y:auto}.official-alerts-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.official-alert-item[_ngcontent-%COMP%]{background:#ffffff0f;border-radius:12px;padding:16px;cursor:pointer;transition:all .25s ease;border:1px solid rgba(255,255,255,.05)}.official-alert-item[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translate(4px)}.alert-badge-row[_ngcontent-%COMP%]{margin-bottom:10px}.official-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;background:linear-gradient(135deg,#d4a84b40,#d4a84b26);border-radius:6px;font-size:10px;font-weight:700;color:#d4a84b;letter-spacing:.5px}.official-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b}.alert-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px;font-weight:600;color:#fff;line-height:1.5}.alert-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px;color:#fff9;margin-bottom:12px}.alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.7}.alert-priority-tag[_ngcontent-%COMP%]{display:inline-block;padding:5px 12px;border-radius:6px;font-size:10px;font-weight:700;letter-spacing:.5px}.alert-priority-tag.high[_ngcontent-%COMP%]{background:#c41e3a33;color:#ff6b6b}.alert-priority-tag.medium[_ngcontent-%COMP%]{background:#d4a84b33;color:#d4a84b}.alert-priority-tag.low[_ngcontent-%COMP%]{background:#28a74533;color:#5cb85c}.sidebar-empty[_ngcontent-%COMP%]{text-align:center;padding:30px 20px;color:#fff9}.sidebar-empty[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:12px;opacity:.5}.sidebar-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px}.stats-card[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{padding:0}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}.stat-item[_ngcontent-%COMP%]{padding:20px;text-align:center;border-right:1px solid rgba(255,255,255,.08);border-bottom:1px solid rgba(255,255,255,.08)}.stat-item[_ngcontent-%COMP%]:last-child{border-right:none}.stat-value[_ngcontent-%COMP%]{display:block;font-size:28px;font-weight:800;color:#d4a84b;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:11px;color:#fff9;text-transform:uppercase;letter-spacing:.5px}@media (max-width: 1200px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 40px 0 70px}}@media (max-width: 992px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 20px 0 70px}.alerts-sidebar[_ngcontent-%COMP%]{position:relative;top:0;flex-direction:row;flex-wrap:wrap}.sidebar-card[_ngcontent-%COMP%]{flex:1;min-width:280px}}@media (max-width: 768px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 12px}.feed-header-bar[_ngcontent-%COMP%]{flex-wrap:wrap;gap:8px;padding:10px 12px}.feed-title[_ngcontent-%COMP%]{font-size:1.1rem;width:100%}.feed-nav-filters[_ngcontent-%COMP%]{flex:1 1 0;width:100%;gap:8px}.feed-search[_ngcontent-%COMP%]{flex:1 1 160px;min-width:140px}.feed-section-header[_ngcontent-%COMP%]{padding:18px 20px}.section-title[_ngcontent-%COMP%]{font-size:1.25rem}.feed-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-tabs[_ngcontent-%COMP%]{justify-content:center}.search-wrapper[_ngcontent-%COMP%]{min-width:100%}.feed-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px}.feed-card[_ngcontent-%COMP%]{border-radius:16px;min-height:240px}.card-header[_ngcontent-%COMP%]{padding:16px 18px 0}.card-content[_ngcontent-%COMP%]{padding:12px 18px}.location-badge[_ngcontent-%COMP%]{margin:0 18px 12px}.card-footer[_ngcontent-%COMP%]{padding:12px 18px;flex-wrap:wrap;gap:10px}.priority-ribbon[_ngcontent-%COMP%]{top:10px;right:-32px;padding:4px 34px;font-size:9px}.user-avatar[_ngcontent-%COMP%]{width:38px;height:38px}.user-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}}@media (max-width: 480px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 10px}.dashboard-content[_ngcontent-%COMP%]{padding:10px 8px}.feed-header-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px;padding:10px 12px}.feed-title[_ngcontent-%COMP%]{font-size:1.1rem}.feed-nav-filters[_ngcontent-%COMP%]{width:100%;overflow-x:auto;padding-bottom:4px;-webkit-overflow-scrolling:touch}.nav-filter-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.feed-search[_ngcontent-%COMP%]{width:100%;max-width:100%}.feed-section-header[_ngcontent-%COMP%]{padding:16px}.section-title-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.filter-tabs[_ngcontent-%COMP%]{width:100%;overflow-x:auto;padding-bottom:8px;-webkit-overflow-scrolling:touch}.filter-tab[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px;white-space:nowrap}.card-header[_ngcontent-%COMP%]{padding:16px 18px 0}.card-content[_ngcontent-%COMP%], .card-footer[_ngcontent-%COMP%]{padding:12px 18px}.location-badge[_ngcontent-%COMP%]{margin-left:18px;margin-right:18px;margin-bottom:12px}.footer-action.primary[_ngcontent-%COMP%]{flex:1;justify-content:center;font-size:12px;padding:8px 12px}.footer-action.icon-only[_ngcontent-%COMP%]{width:40px;height:40px;padding:8px}.feed-cards[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:14px}.feed-card[_ngcontent-%COMP%]{min-height:240px}.alerts-sidebar[_ngcontent-%COMP%]{flex-direction:column}.sidebar-card[_ngcontent-%COMP%]{min-width:100%}}@media (max-width: 1400px){.dashboard-content[_ngcontent-%COMP%]{padding:20px}.main-grid[_ngcontent-%COMP%]{gap:20px}}@media (max-width: 1200px){.dashboard-content[_ngcontent-%COMP%]{padding:16px}.main-grid[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr}.fab-stack[_ngcontent-%COMP%]{left:8px;bottom:10px;gap:6px}.fab-btn[_ngcontent-%COMP%]{height:32px;padding:0 10px 0 8px;gap:5px;border-radius:16px}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.fab-label[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 992px){.dashboard-content[_ngcontent-%COMP%]{padding:16px}.main-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.police-alerts-section[_ngcontent-%COMP%]{position:relative;top:0}}@media (max-width: 768px){.dashboard-content[_ngcontent-%COMP%]{padding:12px 12px 20px}.fab-stack[_ngcontent-%COMP%]{left:16px;bottom:20px;gap:10px;height:42px;padding:0 12px 0 10px;gap:8px}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.fab-label[_ngcontent-%COMP%]{font-size:11px}.citizen-reports-section[_ngcontent-%COMP%], .police-alerts-section[_ngcontent-%COMP%]{padding:16px;border-radius:12px}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.dashboard-content[_ngcontent-%COMP%]{padding:10px 10px 10px 70px}.fab-stack[_ngcontent-%COMP%]{left:10px;bottom:12px;gap:6px}.fab-btn[_ngcontent-%COMP%]{height:38px;padding:0 10px 0 8px;gap:6px;border-radius:19px}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.fab-label[_ngcontent-%COMP%]{font-size:10px}.citizen-reports-section[_ngcontent-%COMP%], .police-alerts-section[_ngcontent-%COMP%]{padding:12px}}.alerts-grid[_ngcontent-%COMP%]{background:transparent;padding:0;border-radius:0;box-shadow:none;border:none;position:relative}.feed-timeline[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;position:relative}.feed-item[_ngcontent-%COMP%]{display:flex;gap:16px;cursor:pointer;padding:0 0 24px;transition:all .3s ease;animation:_ngcontent-%COMP%_feedSlideIn .4s ease forwards;opacity:0}.feed-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.05s}.feed-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.feed-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.15s}.feed-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.2s}.feed-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.25s}@keyframes _ngcontent-%COMP%_feedSlideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.timeline-node[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex-shrink:0;width:24px}.node-dot[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;background:#1a2a5e;border:3px solid white;box-shadow:0 2px 8px #1a2a5e4d;z-index:2;transition:all .3s ease}.node-dot.high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#dc3545);box-shadow:0 2px 12px #c41e3a66;animation:_ngcontent-%COMP%_nodePulse 2s ease-in-out infinite}.node-dot.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#f0ad4e);box-shadow:0 2px 8px #d4a84b66}.node-dot.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#5cb85c);box-shadow:0 2px 8px #28a7454d}@keyframes _ngcontent-%COMP%_nodePulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.node-line[_ngcontent-%COMP%]{width:2px;flex-grow:1;background:linear-gradient(to bottom,#1a2a5e33,#1a2a5e0d);margin-top:4px}.feed-item[_ngcontent-%COMP%]:last-child   .node-line[_ngcontent-%COMP%]{display:none}.feed-content[_ngcontent-%COMP%]{flex:1;background:#fff;border-radius:16px;padding:18px 20px;box-shadow:0 2px 12px #0000000f;border:1px solid rgba(26,42,94,.06);transition:all .3s cubic-bezier(.175,.885,.32,1.275);position:relative;overflow:hidden}.feed-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:#1a2a5e;opacity:0;transition:opacity .3s ease}.feed-item.priority-high[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#c41e3a,#dc3545);opacity:1}.feed-item.priority-medium[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#d4a84b,#f0ad4e);opacity:1}.feed-item.priority-low[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#28a745,#5cb85c);opacity:.6}.feed-item[_ngcontent-%COMP%]:hover   .feed-content[_ngcontent-%COMP%]{transform:translate(8px);box-shadow:0 8px 24px #0000001a;border-color:#1a2a5e26}.feed-item[_ngcontent-%COMP%]:hover   .node-dot[_ngcontent-%COMP%]{transform:scale(1.3)}.feed-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.reporter-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#e9ecef,#dee2e6);display:flex;align-items:center;justify-content:center;flex-shrink:0}.reporter-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px;color:#6c757d}.reporter-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;flex:1}.reporter-name[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#1a2a5e}.report-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#888}.report-time[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.6}.priority-tag[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.priority-tag.high[_ngcontent-%COMP%]{background:#c41e3a1a;color:#c41e3a}.priority-tag.medium[_ngcontent-%COMP%]{background:#d4a84b26;color:#b8860b}.priority-tag.low[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.feed-body[_ngcontent-%COMP%]{margin-bottom:12px}.feed-text[_ngcontent-%COMP%]{margin:0;font-size:15px;line-height:1.6;color:#333}.feed-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 12px;background:#1a2a5e0a;border-radius:8px;margin-bottom:12px}.feed-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;flex-shrink:0}.feed-location[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#555}.feed-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding-top:12px;border-top:1px solid rgba(0,0,0,.06)}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease}.action-btn.view-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff}.action-btn.view-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #1a2a5e4d}.action-btn.share-btn[_ngcontent-%COMP%]{background:transparent;color:#888;padding:8px}.action-btn.share-btn[_ngcontent-%COMP%]:hover{background:#0000000d;color:#1a2a5e}@media (max-width: 768px){.feed-item[_ngcontent-%COMP%]{gap:12px}.timeline-node[_ngcontent-%COMP%]{width:20px}.node-dot[_ngcontent-%COMP%]{width:12px;height:12px}.feed-content[_ngcontent-%COMP%]{padding:14px 16px;border-radius:12px}.reporter-avatar[_ngcontent-%COMP%]{width:36px;height:36px}.reporter-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.priority-tag[_ngcontent-%COMP%]{padding:3px 8px;font-size:10px}.feed-text[_ngcontent-%COMP%]{font-size:14px}.feed-actions[_ngcontent-%COMP%]{flex-wrap:wrap}}@media (max-width: 480px){.feed-header[_ngcontent-%COMP%]{flex-wrap:wrap}.priority-tag[_ngcontent-%COMP%]{order:-1;width:100%;text-align:center;margin-bottom:8px}.feed-content[_ngcontent-%COMP%]{padding:12px 14px}.action-btn.view-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}}.alerts-controls[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:24px;background:#fff;padding:12px 16px;border-radius:12px;box-shadow:0 2px 12px #0000000f;position:relative;z-index:1}.alerts-controls[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{padding:10px 14px;border-radius:10px;border:1px solid rgba(26,42,94,.15);background:#fff;font-weight:600;color:#1a2a5e;cursor:pointer;transition:all .3s ease}.alerts-controls[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:hover{border-color:#1a2a5e}.alerts-controls[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1 1 auto;padding:10px 16px;border-radius:10px;border:1px solid rgba(26,42,94,.15);background:#fafafa;font-size:14px;transition:all .3s ease}.alerts-controls[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.alerts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;position:relative;z-index:1}@media (max-width: 768px){.alerts-container[_ngcontent-%COMP%]{gap:0}}.alert-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;background:#fff;border-radius:12px;overflow:visible;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 12px #0000000f;border:1px solid rgba(26,42,94,.08);position:relative;animation:_ngcontent-%COMP%_feedSlideIn .5s cubic-bezier(.4,0,.2,1) backwards;min-height:auto;margin-left:40px;margin-bottom:20px;padding:0}.alert-card[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-28px;top:20px;width:12px;height:12px;border-radius:50%;background:#d4a84b;border:3px solid #fff;box-shadow:0 2px 8px #d4a84b66;z-index:2}.alert-card.priority-high[_ngcontent-%COMP%]:before{background:#dc3545;box-shadow:0 2px 8px #dc354566}.alert-card.priority-medium[_ngcontent-%COMP%]:before{background:#fd7e14;box-shadow:0 2px 8px #fd7e1466}.alert-card.priority-low[_ngcontent-%COMP%]:before{background:#28a745;box-shadow:0 2px 8px #28a74566}@media (max-width: 768px){.alert-card[_ngcontent-%COMP%]{margin-left:32px}.alert-card[_ngcontent-%COMP%]:before{left:-24px;width:10px;height:10px}}.alert-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.05s}.alert-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.alert-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.15s}.alert-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.2s}.alert-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.25s}.alert-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.3s}.alert-card[_ngcontent-%COMP%]:nth-child(n+7){animation-delay:.35s}@keyframes _ngcontent-%COMP%_feedSlideIn{0%{opacity:0;transform:translate(-30px)}to{opacity:1;transform:translate(0)}}.alert-card[_ngcontent-%COMP%]:hover{transform:translate(8px);box-shadow:0 8px 24px #1a2a5e1f;border-color:#1a2a5e26}.alert-card.priority-high[_ngcontent-%COMP%]{border-left:4px solid #dc3545;border-top:none}.alert-card.priority-medium[_ngcontent-%COMP%]{border-left:4px solid #fd7e14;border-top:none}.alert-card.priority-low[_ngcontent-%COMP%]{border-left:4px solid #28a745;border-top:none}.priority-badge[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:16px;font-size:.6rem;font-weight:700;letter-spacing:.4px;text-transform:uppercase;z-index:2}.priority-badge.high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;box-shadow:0 2px 8px #dc354559}.priority-badge.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fd7e14,#e76f00);color:#fff;box-shadow:0 2px 8px #fd7e1459}.priority-badge.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;box-shadow:0 2px 8px #28a74559}.priority-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.card-body[_ngcontent-%COMP%]{flex:1;padding:16px 18px;display:flex;flex-direction:column;gap:8px}.alert-title[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:700;color:#1a2a5e;line-height:1.4;padding-right:70px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.alert-location[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:5px;color:#777;font-size:.8rem;line-height:1.4}.alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;flex-shrink:0;margin-top:2px;width:14px;height:14px}.alert-location[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.alert-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:4px;padding-top:10px;border-top:1px solid rgba(0,0,0,.05);flex-wrap:wrap}.alert-meta[_ngcontent-%COMP%]   .reporter[_ngcontent-%COMP%], .alert-meta[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.75rem;color:#999}.alert-meta[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#bbb;width:11px;height:11px}.card-arrow[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;padding:10px 16px;background:transparent;color:#d4a84b;transition:all .3s ease;font-size:.75rem;font-weight:700;gap:4px;border-top:1px solid rgba(0,0,0,.05)}.card-arrow[_ngcontent-%COMP%]:before{content:"Read More"}.alert-card[_ngcontent-%COMP%]:hover   .card-arrow[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e0f,#1a2a5e1a);color:#1a2a5e}.alert-card[_ngcontent-%COMP%]:hover   .card-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:translate(4px)}.card-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform .3s ease;width:16px;height:16px}.no-alerts[_ngcontent-%COMP%]{text-align:center;padding:80px 40px;color:#666;background:#fff;border-radius:16px;box-shadow:0 4px 16px #00000014;grid-column:1 / -1}.no-alerts-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 20px;background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-radius:50%;display:flex;align-items:center;justify-content:center}.no-alerts-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#4caf50}.no-alerts[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.3rem;color:#333;font-weight:600}.no-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:#777}@media (max-width: 768px){.alerts-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.alerts-controls[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%], .alerts-controls[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%}.alert-card[_ngcontent-%COMP%]{min-height:160px}.priority-badge[_ngcontent-%COMP%]{top:12px;right:12px;padding:4px 10px;font-size:.6rem}.card-body[_ngcontent-%COMP%]{padding:14px 16px}.alert-title[_ngcontent-%COMP%]{font-size:.95rem;padding-right:70px}.alert-location[_ngcontent-%COMP%]{font-size:.8rem}.card-arrow[_ngcontent-%COMP%]{padding:10px 16px;font-size:.75rem}}.map-preview[_ngcontent-%COMP%]{display:none;position:relative;width:100%;border-radius:12px;overflow:hidden;cursor:pointer;transition:all .3s ease}.map-preview[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.map-preview[_ngcontent-%COMP%]:hover   .map-overlay[_ngcontent-%COMP%]{opacity:1}.map-illustration[_ngcontent-%COMP%]{width:100%;height:180px;background:linear-gradient(135deg,#e3f2fd,#bbdefb);display:flex;align-items:center;justify-content:center}.map-illustration[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.map-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#1a3a52b3;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;opacity:0;transition:opacity .3s ease;color:#fff}.map-overlay[_ngcontent-%COMP%]   .map-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center}.map-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.map-legend[_ngcontent-%COMP%]{display:none;justify-content:center;gap:20px;padding:10px 0;border-top:1px solid rgba(0,0,0,.06);border-bottom:1px solid rgba(0,0,0,.06)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.8rem;color:#666}.legend-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.legend-dot.high[_ngcontent-%COMP%]{background:#dc3545;box-shadow:0 0 0 3px #dc354533}.legend-dot.medium[_ngcontent-%COMP%]{background:#fd7e14;box-shadow:0 0 0 3px #fd7e1433}.legend-dot.low[_ngcontent-%COMP%]{background:#28a745;box-shadow:0 0 0 3px #28a74533}.sos-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#1a3a52f7,#142d41fa);display:flex;align-items:center;justify-content:center;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .3s ease;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.sos-overlay.sos-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a3a52f7,#142d41fa)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sos-modal[_ngcontent-%COMP%]{text-align:center;padding:50px 40px;max-width:480px;width:90%;background:#ffffff0d;border-radius:20px;border:1px solid rgba(255,255,255,.1);box-shadow:0 25px 50px #0000004d}.sos-sending[_ngcontent-%COMP%]{position:relative;width:140px;height:140px;margin:0 auto 35px}.sos-pulse-ring[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;border:3px solid rgba(220,53,69,.6);animation:_ngcontent-%COMP%_pulseRing 1.5s ease-out infinite}.sos-pulse-ring.delay-1[_ngcontent-%COMP%]{animation-delay:.5s}.sos-pulse-ring.delay-2[_ngcontent-%COMP%]{animation-delay:1s}@keyframes _ngcontent-%COMP%_pulseRing{0%{transform:scale(.5);opacity:1}to{transform:scale(1.8);opacity:0}}.sos-icon-large[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:linear-gradient(135deg,#dc3545,#c82333);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 0 40px #dc354580;animation:_ngcontent-%COMP%_iconGlow 1s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_iconGlow{0%{box-shadow:0 0 30px #dc354566}to{box-shadow:0 0 50px #dc3545b3}}.sos-title[_ngcontent-%COMP%]{font-size:26px;color:#fff;margin:0 0 12px;font-weight:700;letter-spacing:2px;text-transform:uppercase}.sos-title.success[_ngcontent-%COMP%]{color:#2ecc71}.sos-subtitle[_ngcontent-%COMP%]{font-size:15px;color:#ffffffb3;margin:0 0 25px;font-weight:400}.sos-info[_ngcontent-%COMP%]{font-size:14px;color:#fff9;margin:0 0 30px}.sos-countdown[_ngcontent-%COMP%]{font-size:14px;color:#fff9;margin:20px 0 0;font-weight:500}.sos-location-status[_ngcontent-%COMP%]{margin-bottom:20px;padding:8px 16px;border-radius:20px;font-size:13px;font-weight:500;display:inline-block}.sos-location-status[_ngcontent-%COMP%]   .location-pending[_ngcontent-%COMP%]{color:#ffffffb3;animation:_ngcontent-%COMP%_blink 1.5s ease-in-out infinite}.sos-location-status[_ngcontent-%COMP%]   .location-obtained[_ngcontent-%COMP%]{color:#2ecc71;font-weight:600}.sos-location-status[_ngcontent-%COMP%]   .location-obtained[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:8px;height:8px;background:#2ecc71;border-radius:50%;margin-right:8px;animation:pulse 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.5}}.sos-modal[_ngcontent-%COMP%]   .sos-progress-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:#ffffff26;border-radius:3px;overflow:hidden;margin:0}.sos-modal[_ngcontent-%COMP%]   .sos-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#dc3545,#e74c3c);border-radius:3px;transition:width .1s linear}.sos-success-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease}.sos-success-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#27ae60,#2ecc71);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 25px;color:#fff;box-shadow:0 10px 30px #27ae604d;animation:_ngcontent-%COMP%_successPop .5s ease}@keyframes _ngcontent-%COMP%_successPop{0%{transform:scale(0);opacity:0}50%{transform:scale(1.1)}to{transform:scale(1);opacity:1}}.sos-details[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:12px;padding:20px;margin:25px 0;border:1px solid rgba(255,255,255,.08)}.sos-detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 0;color:#ffffffd9;font-size:14px;font-weight:500}.sos-detail-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(255,255,255,.08)}.sos-detail-item.success[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#2ecc71f2}.sos-detail-item.warning[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e74c3ce6}.detail-icon[_ngcontent-%COMP%]{height:44px;padding:0 14px 0 12px;gap:10px;border-radius:22px;align-items:center;display:flex;position:relative}.detail-icon[_ngcontent-%COMP%]   .fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.detail-icon[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{font-size:12px}.detail-icon[_ngcontent-%COMP%]:before{content:"";width:12px;height:12px;background:#fff;border-radius:50%;box-shadow:0 0 0 3px #ffffff4d}.detail-icon.services[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e67e22,#d35400)}.detail-icon.services[_ngcontent-%COMP%]:before{content:"";width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:10px solid white}.detail-icon.admin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6,#8e44ad)}.detail-icon.admin[_ngcontent-%COMP%]:before{content:"";width:10px;height:10px;background:#fff;border-radius:50%;position:relative}.detail-icon.admin[_ngcontent-%COMP%]:after{content:"";position:absolute;width:16px;height:8px;background:#fff;border-radius:0 0 8px 8px;margin-top:6px;margin-left:-3px}.sos-close-btn[_ngcontent-%COMP%]{margin-top:10px;padding:14px 50px;font-size:14px;background:linear-gradient(135deg,#1a3a52,#2a5a7a);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;text-transform:uppercase;font-weight:600;letter-spacing:1px}.sos-close-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #1a3a5266}@media (max-width: 768px){.sos-modal[_ngcontent-%COMP%]{padding:40px 25px}.sos-sending[_ngcontent-%COMP%]{width:120px;height:120px}.sos-icon-large[_ngcontent-%COMP%]{width:65px;height:65px}.sos-icon-large[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.sos-title[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1px}.sos-close-btn[_ngcontent-%COMP%]{padding:12px 40px}}@media (max-width: 480px){.sos-modal[_ngcontent-%COMP%]{padding:30px 20px;margin:15px;width:calc(100% - 30px)}.sos-sending[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:25px}.sos-icon-large[_ngcontent-%COMP%]{width:55px;height:55px}.sos-icon-large[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.sos-title[_ngcontent-%COMP%]{font-size:18px}.sos-subtitle[_ngcontent-%COMP%]{font-size:14px}.sos-success-icon[_ngcontent-%COMP%]{width:65px;height:65px}.sos-success-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px}.sos-details[_ngcontent-%COMP%]{padding:15px}.sos-detail-item[_ngcontent-%COMP%]{font-size:13px}}.police-alerts-wrapper[_ngcontent-%COMP%]{margin-top:30px}.police-alerts-section[_ngcontent-%COMP%]{margin-top:0}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#1a2a5e;font-weight:700;display:flex;align-items:center;gap:10px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:4px 0 0;font-size:12px;color:#666;font-weight:400}.police-alerts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-height:calc(100vh - 250px);overflow-y:auto;padding-right:4px}.police-alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.police-alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}.police-alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d4a84b80;border-radius:4px}@media (max-width: 992px){.police-alerts-container[_ngcontent-%COMP%]{max-height:400px}}.police-alert-card[_ngcontent-%COMP%]{background:#ffffff14;border-radius:12px;padding:14px;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;border:1px solid rgba(255,255,255,.1)}.police-alert-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:3px;height:100%;background:#d4a84b;transition:width .3s ease}.police-alert-card[_ngcontent-%COMP%]:hover{background:#ffffff1f;transform:translate(4px)}.police-alert-card[_ngcontent-%COMP%]:hover:before{width:5px}.police-alert-card.priority-high[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#dc3545,#c41e3a)}.police-alert-card.priority-medium[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#fd7e14,#e67e22)}.police-alert-card.priority-low[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#28a745,#20c997)}.police-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:#d4a84b33;padding:3px 8px;border-radius:10px;margin-bottom:8px}.police-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;width:12px;height:12px}.police-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:9px;font-weight:700;color:#d4a84b;letter-spacing:.8px}.police-alert-title[_ngcontent-%COMP%]{margin:0 0 6px;font-size:13px;font-weight:600;color:#fff;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.police-alert-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;color:#ffffffa6;font-size:11px;margin-bottom:8px}.police-alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;opacity:.7;width:12px;height:12px}.police-alert-priority[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:8px;font-size:9px;font-weight:700;letter-spacing:.4px}.police-alert-priority.high[_ngcontent-%COMP%]{background:#dc354540;color:#ff8a8a}.police-alert-priority.medium[_ngcontent-%COMP%]{background:#fd7e1440;color:#ffb366}.police-alert-priority.low[_ngcontent-%COMP%]{background:#28a74540;color:#7ce08a}.no-police-alerts[_ngcontent-%COMP%]{text-align:center;padding:24px 16px;background:#ffffff0d;border-radius:12px;color:#fff9}.no-police-alerts[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b80;margin-bottom:8px}.no-police-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px}.no-police-alerts[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#28a745;margin-bottom:10px}.no-police-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#777}@media (max-width: 768px){.police-alerts-section[_ngcontent-%COMP%]{margin-top:20px}.police-alert-card[_ngcontent-%COMP%]{padding:14px}.police-alert-title[_ngcontent-%COMP%]{font-size:.9rem}.police-alert-location[_ngcontent-%COMP%]{font-size:.75rem}}.fab-btn[_ngcontent-%COMP%]:focus-visible, .nav-filter-btn[_ngcontent-%COMP%]:focus-visible, .footer-action[_ngcontent-%COMP%]:focus-visible, .feed-card[_ngcontent-%COMP%]:focus-visible{outline:3px solid var(--wcag-focus-color, #4a90d9);outline-offset:2px}.fab-btn[_ngcontent-%COMP%]{min-width:44px;min-height:44px}.nav-filter-btn[_ngcontent-%COMP%]{min-height:44px;padding:12px 16px}.footer-action[_ngcontent-%COMP%]{min-width:44px;min-height:44px}@media (prefers-contrast: high){.feed-card[_ngcontent-%COMP%]{border:2px solid #000}.priority-ribbon[_ngcontent-%COMP%]{border:1px solid currentColor}.nav-filter-btn.active[_ngcontent-%COMP%]{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){.fab-stack[_ngcontent-%COMP%], .feed-card[_ngcontent-%COMP%], .scroll-reveal[_ngcontent-%COMP%], .animate-on-load[_ngcontent-%COMP%], .sos-pulse-ring[_ngcontent-%COMP%]{animation:none!important;transition-duration:.01ms!important}}@media print{.fab-stack[_ngcontent-%COMP%], .sos-overlay[_ngcontent-%COMP%]{display:none!important}.feed-card[_ngcontent-%COMP%]{break-inside:avoid;page-break-inside:avoid;border:1px solid #000;box-shadow:none}.dashboard-container[_ngcontent-%COMP%]{background:#fff}}',"@media (max-width: 768px){.fab-stack[_ngcontent-%COMP%]{left:6px!important;bottom:12px!important;gap:6px!important}.fab-btn[_ngcontent-%COMP%]{height:32px!important;border-radius:16px!important;padding:0 10px 0 8px!important;gap:5px!important;box-shadow:0 2px 10px #0000000f!important}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px!important;height:16px!important}.fab-label[_ngcontent-%COMP%]{font-size:9px!important;letter-spacing:.05px!important}}@media (max-width: 480px){.fab-stack[_ngcontent-%COMP%]{left:4px!important;bottom:8px!important;gap:4px!important}.fab-btn[_ngcontent-%COMP%]{height:28px!important;border-radius:14px!important;padding:0 8px 0 6px!important;gap:4px!important;box-shadow:0 2px 8px #0000000d!important}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px!important;height:14px!important}.fab-label[_ngcontent-%COMP%]{font-size:8px!important;letter-spacing:0px!important}}@media (max-width: 375px){.fab-stack[_ngcontent-%COMP%]{left:3px!important;bottom:6px!important;gap:4px!important}.fab-btn[_ngcontent-%COMP%]{height:26px!important;border-radius:13px!important;padding:0 6px 0 5px!important;gap:3px!important}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px!important;height:12px!important}.fab-label[_ngcontent-%COMP%]{font-size:7px!important;letter-spacing:0px!important}}"]})};var hU=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(Ue(Ao),Ue(ir))};static \u0275dir=_n({type:n})}return n})(),AD=(()=>{class n extends hU{static \u0275fac=(()=>{let t;return function(r){return(t||(t=ia(n)))(r||n)}})();static \u0275dir=_n({type:n,features:[lo]})}return n})(),px=new we("");var Ore={provide:px,useExisting:Io(()=>gr),multi:!0};function Are(){let n=Do()?Do().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Dre=new we(""),gr=(()=>{class n extends hU{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Are())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(Ue(Ao),Ue(ir),Ue(Dre,8))};static \u0275dir=_n({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&ee("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[fc([Ore]),lo]})}return n})();function kre(n){return n==null||fU(n)===0}function fU(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var gx=new we(""),pU=new we("");function Rre(n){return kre(n.value)?{required:!0}:null}function Nre(n){return e=>{let t=e.value?.length??fU(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function iU(n){return null}function gU(n){return n!=null}function mU(n){return lc(n)?ln(n):n}function _U(n){let e={};return n.forEach(t=>{e=t!=null?te(te({},e),t):e}),Object.keys(e).length===0?null:e}function vU(n,e){return e.map(t=>t(n))}function Lre(n){return!n.validate}function yU(n){return n.map(e=>Lre(e)?e:t=>e.validate(t))}function Fre(n){if(!n)return null;let e=n.filter(gU);return e.length==0?null:function(t){return _U(vU(t,e))}}function DD(n){return n!=null?Fre(yU(n)):null}function Vre(n){if(!n)return null;let e=n.filter(gU);return e.length==0?null:function(t){let i=vU(t,e).map(mU);return l1(i).pipe(pe(_U))}}function kD(n){return n!=null?Vre(yU(n)):null}function rU(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Bre(n){return n._rawValidators}function Ure(n){return n._rawAsyncValidators}function MD(n){return n?Array.isArray(n)?n:[n]:[]}function ax(n,e){return Array.isArray(n)?n.includes(e):n===e}function oU(n,e){let t=MD(e);return MD(n).forEach(r=>{ax(t,r)||t.push(r)}),t}function sU(n,e){return MD(e).filter(t=>!ax(n,t))}var cx=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=kD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},wp=class extends cx{name;get formDirective(){return null}get path(){return null}},C_=class extends cx{_parent=null;name=null;valueAccessor=null},lx=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},zre={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},y2e=Ee(te({},zre),{"[class.ng-submitted]":"isSubmitted"}),Yr=(()=>{class n extends lx{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Ue(C_,2))};static \u0275dir=_n({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&We("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[lo]})}return n})(),xp=(()=>{class n extends lx{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Ue(wp,10))};static \u0275dir=_n({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&We("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[lo]})}return n})();var v_="VALID",sx="INVALID",yp="PENDING",y_="DISABLED",nu=class{},ux=class extends nu{value;source;constructor(e,t){super(),this.value=e,this.source=t}},w_=class extends nu{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},x_=class extends nu{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},bp=class extends nu{status;source;constructor(e,t){super(),this.status=e,this.source=t}},OD=class extends nu{source;constructor(e){super(),this.source=e}},dx=class extends nu{source;constructor(e){super(),this.source=e}};function bU(n){return(mx(n)?n.validators:n)||null}function jre(n){return Array.isArray(n)?DD(n):n||null}function wU(n,e){return(mx(e)?e.asyncValidators:n)||null}function $re(n){return Array.isArray(n)?kD(n):n||null}function mx(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Hre(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new fe(1e3,"");if(!i[t])throw new fe(1001,"")}function qre(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new fe(1002,"")})}var hx=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return oi(this.statusReactive)}set status(e){oi(()=>this.statusReactive.set(e))}_status=wl(()=>this.statusReactive());statusReactive=pn(void 0);get valid(){return this.status===v_}get invalid(){return this.status===sx}get pending(){return this.status==yp}get disabled(){return this.status===y_}get enabled(){return this.status!==y_}errors;get pristine(){return oi(this.pristineReactive)}set pristine(e){oi(()=>this.pristineReactive.set(e))}_pristine=wl(()=>this.pristineReactive());pristineReactive=pn(!0);get dirty(){return!this.pristine}get touched(){return oi(this.touchedReactive)}set touched(e){oi(()=>this.touchedReactive.set(e))}_touched=wl(()=>this.touchedReactive());touchedReactive=pn(!1);get untouched(){return!this.touched}_events=new Cn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(oU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sU(e,this._rawAsyncValidators))}hasValidator(e){return ax(this._rawValidators,e)}hasAsyncValidator(e){return ax(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ee(te({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new x_(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new x_(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ee(te({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new w_(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new w_(!0,i))}markAsPending(e={}){this.status=yp;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bp(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ee(te({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=y_,this.errors=null,this._forEachChild(r=>{r.disable(Ee(te({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ux(this.value,i)),this._events.next(new bp(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ee(te({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=v_,this._forEachChild(i=>{i.enable(Ee(te({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ee(te({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===v_||this.status===yp)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ux(this.value,t)),this._events.next(new bp(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ee(te({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?y_:v_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=yp,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=mU(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new bp(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Mn,this.statusChanges=new Mn}_calculateStatus(){return this._allControlsDisabled()?y_:this.errors?sx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yp)?yp:this._anyControlsHaveStatus(sx)?sx:v_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new w_(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new x_(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mx(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=jre(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=$re(this._rawAsyncValidators)}},fx=class extends hx{constructor(e,t,i){super(bU(t),wU(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){qre(this,!0,e),Object.keys(e).forEach(i=>{Hre(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new dx(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var RD=new we("",{providedIn:"root",factory:()=>ND}),ND="always";function Gre(n,e){return[...e.path,n]}function xU(n,e,t=ND){CU(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Kre(n,e),Yre(n,e),Qre(n,e),Wre(n,e)}function aU(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Wre(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function CU(n,e){let t=Bre(n);e.validator!==null?n.setValidators(rU(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Ure(n);e.asyncValidator!==null?n.setAsyncValidators(rU(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();aU(e._rawValidators,r),aU(e._rawAsyncValidators,r)}function Kre(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&EU(n,e)})}function Qre(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&EU(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function EU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Yre(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Zre(n,e){n==null,CU(n,e)}function Jre(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Xre(n){return Object.getPrototypeOf(n.constructor)===AD}function eoe(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function toe(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===gr?t=o:Xre(o)?i=o:r=o}),r||i||t||null}var noe={provide:wp,useExisting:Io(()=>Yd)},b_=Promise.resolve(),Yd=(()=>{class n extends wp{callSetDisabledState;get submitted(){return oi(this.submittedReactive)}_submitted=wl(()=>this.submittedReactive());submittedReactive=pn(!1);_directives=new Set;form;ngSubmit=new Mn;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new fx({},DD(t),kD(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){b_.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),xU(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){b_.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){b_.then(()=>{let i=this._findContainer(t.path),r=new fx({});Zre(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){b_.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){b_.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),eoe(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new OD(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(Ue(gx,10),Ue(pU,10),Ue(RD,8))};static \u0275dir=_n({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&ee("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[fc([noe]),lo]})}return n})();function cU(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function lU(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ioe=class extends hx{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(bU(t),wU(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mx(t)&&(t.nonNullable||t.initialValueIsDefault)&&(lU(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new dx(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){lU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var roe={provide:C_,useExisting:Io(()=>Ar)},uU=Promise.resolve(),Ar=(()=>{class n extends C_{_changeDetectorRef;callSetDisabledState;control=new ioe;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Mn;constructor(t,i,r,o,s,l){super(),this._changeDetectorRef=s,this.callSetDisabledState=l,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=toe(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Jre(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){xU(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){uU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&xl(i);uU.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Gre(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(Ue(wp,9),Ue(gx,10),Ue(pU,10),Ue(px,10),Ue(sa,8),Ue(RD,8))};static \u0275dir=_n({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[fc([roe]),lo,na]})}return n})();var Cp=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=_n({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var ooe={provide:px,useExisting:Io(()=>Da),multi:!0};function IU(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function soe(n){return n.split(":")[0]}var Da=(()=>{class n extends AD{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=$(uc).injector;destroyRef=$(ds);cdr=$(sa);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,vg({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=IU(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=soe(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ia(n)))(r||n)}})();static \u0275dir=_n({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&ee("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fc([ooe]),lo]})}return n})(),iu=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(IU(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(Ue(ir),Ue(Ao),Ue(Da,9))};static \u0275dir=_n({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),aoe={provide:px,useExisting:Io(()=>PU),multi:!0};function dU(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function coe(n){return n.split(":")[0]}var PU=(()=>{class n extends AD{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let l=0;l<s.length;l++){let u=s[l],f=this._getOptionValue(u.value);r.push(f)}}else{let s=i.options;for(let l=0;l<s.length;l++){let u=s[l];if(u.selected){let f=this._getOptionValue(u.value);r.push(f)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=coe(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ia(n)))(r||n)}})();static \u0275dir=_n({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&ee("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fc([aoe]),lo]})}return n})(),ru=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(dU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(dU(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Ue(ir),Ue(Ao),Ue(PU,9))};static \u0275dir=_n({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function loe(n){return typeof n=="number"?n:parseInt(n,10)}var TU=(()=>{class n{_validator=iU;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):iU,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=_n({type:n,features:[na]})}return n})();var uoe={provide:gx,useExisting:Io(()=>Zd),multi:!0};var Zd=(()=>{class n extends TU{required;inputName="required";normalizeInput=xl;createValidator=t=>Rre;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=ia(n)))(r||n)}})();static \u0275dir=_n({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&rn("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[fc([uoe]),lo]})}return n})();var doe={provide:gx,useExisting:Io(()=>LD),multi:!0},LD=(()=>{class n extends TU{minlength;inputName="minlength";normalizeInput=t=>loe(t);createValidator=t=>Nre(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=ia(n)))(r||n)}})();static \u0275dir=_n({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&rn("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[fc([doe]),lo]})}return n})();var hoe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=oa({type:n});static \u0275inj=as({})}return n})();var Bn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:RD,useValue:t.callSetDisabledState??ND}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=oa({type:n});static \u0275inj=as({imports:[hoe]})}return n})();var mi=x2(FD());var Zr={"A. Bonifacio-Caguioa-Rimando (ABCR)":[16.4142,120.5947],"Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)":[16.4153,120.5934],"Alfonso Tabora":[16.4234,120.5969],Ambiong:[16.4288,120.6081],"Andres Bonifacio (Lower Bokawkan)":[16.4174,120.5856],"Apugan-Loakan":[16.3828,120.6175],"Asin Road":[16.4046,120.5636],"Atok Trail":[16.3792,120.6307],"Aurora Hill Proper (Malvar-Sgt. Floresca)":[16.4245,120.603],"Aurora Hill, North Central":[16.4278,120.6042],"Aurora Hill, South Central":[16.4254,120.6069],"Bagong Lipunan (Market Area)":[16.4153,120.596],"Baguio Dairy Farm":[16.382,120.5694],"Bakakeng Central":[16.3908,120.5839],"Bakakeng North":[16.3969,120.5878],"Bal-Marcoville (Marcoville)":[16.4089,120.6017],Balsigan:[16.4047,120.5889],"Bayan Park East":[16.4278,120.6125],"Bayan Park Village":[16.4264,120.6108],"Bayan Park West (Bayan Park)":[16.4267,120.6083],"BGH Compound":[16.4008,120.5922],Brookside:[16.4225,120.6058],Brookspoint:[16.4258,120.6153],"Cabinet Hill-Teacher's Camp":[16.4158,120.6067],"Camdas Subdivision":[16.4272,120.5975],"Camp 7":[16.3769,120.5939],"Camp 8":[16.3917,120.5967],"Camp Allen":[16.4147,120.5892],"Campo Filipino":[16.4169,120.5861],"City Camp Central":[16.4117,120.5869],"City Camp Proper":[16.4108,120.5858],"Country Club Village":[16.41,120.6189],"Cresencia Village":[16.4142,120.5867],Dagisitan:[16.4269,120.5986],"Dagsian, Lower":[16.3986,120.6028],"Dagsian, Upper":[16.4011,120.6025],"Dizon Subdivision":[16.4286,120.5989],"Dominican Hill-Mirador":[16.4097,120.5794],Dontogan:[16.3758,120.5736],"DPS Area":[16.4039,120.5986],"Engineers' Hill":[16.4111,120.6011],"Fairview Village":[16.4128,120.5819],"Ferdinand (Happy Homes-Campo Sioco)":[16.4061,120.5869],"Fort del Pilar":[16.3886,120.6192],"Gabriel Silang":[16.4006,120.6053],"General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)":[16.4239,120.5919],"General Luna, Lower":[16.4136,120.5997],"General Luna, Upper":[16.415,120.6014],Gibraltar:[16.4183,120.6278],"Greenwater Village":[16.4056,120.6083],"Guisad Central":[16.4217,120.5839],"Guisad Sorong":[16.425,120.5819],"Happy Hollow":[16.4036,120.6306],"Happy Homes (Happy Homes-Lucban)":[16.4239,120.5936],"Harrison-Claudio Carantes":[16.4131,120.5956],Hillside:[16.3981,120.605],"Holy Ghost Extension":[16.4189,120.5994],"Holy Ghost Proper":[16.4172,120.5969],"Honeymoon (Honeymoon-Holy Ghost)":[16.4206,120.5947],"Imelda R. Marcos (La Salle)":[16.4083,120.6014],"Imelda Village":[16.4167,120.6056],Irisan:[16.4083,120.5606],Kabayanihan:[16.4144,120.5931],Kagitingan:[16.4156,120.5908],"Kayang Extension":[16.4167,120.5925],"Kayang-Hilltop":[16.4161,120.5942],Kias:[16.3667,120.6233],"Legarda-Burnham-Kisad":[16.4111,120.5917],"Liwanag-Loakan":[16.3889,120.6125],"Loakan Proper":[16.3833,120.6167],"Lopez Jaena":[16.4183,120.6011],"Lourdes Subdivision Extension":[16.4089,120.585],"Lourdes Subdivision, Lower":[16.4097,120.5883],"Lourdes Subdivision, Proper":[16.4086,120.5869],Lualhati:[16.4136,120.615],Lucnab:[16.4133,120.6308],"Magsaysay Private Road":[16.4192,120.5964],"Magsaysay, Lower":[16.4208,120.5947],"Magsaysay, Upper":[16.4222,120.5958],"Malcolm Square-Perfecto (Jose Abad Santos)":[16.415,120.5958],"Manuel A. Roxas":[16.4183,120.6031],"Market Subdivision, Upper":[16.4164,120.5975],"Middle Quezon Hill Subdivision (Quezon Hill Middle)":[16.42,120.58],"Military Cut-off":[16.4067,120.5983],"Mines View Park":[16.4244,120.6331],"Modern Site, East":[16.425,120.6042],"Modern Site, West":[16.425,120.6028],"MRR-Queen of Peace":[16.4111,120.5844],"New Lucban":[16.4214,120.5925],"Outlook Drive":[16.4139,120.6225],Pacdal:[16.425,120.6194],"Padre Burgos":[16.4161,120.59],"Padre Zamora":[16.4194,120.5939],"Palma-Urbano (Cari\xF1o-Palma)":[16.405,120.595],"Phil-Am":[16.42,120.605],Pinget:[16.435,120.58],"Pinsao Pilot Project":[16.4294,120.575],"Pinsao Proper":[16.4333,120.5722],Poliwes:[16.3983,120.5933],Pucsusan:[16.4214,120.6264],"Quezon Hill Proper":[16.4233,120.5783],"Quezon Hill, Upper":[16.425,120.5767],"Quirino Hill, East":[16.43,120.5883],"Quirino Hill, Lower":[16.4283,120.59],"Quirino Hill, Middle":[16.43,120.59],"Quirino Hill, West":[16.43,120.5867],"Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)":[16.4225,120.5933],"Rizal Monument Area":[16.4131,120.5931],"Rock Quarry, Lower":[16.4083,120.5883],"Rock Quarry, Middle":[16.4094,120.5867],"Rock Quarry, Upper":[16.4106,120.585],"Salud Mitra":[16.4167,120.5983],"San Antonio Village":[16.4167,120.6083],"San Luis Village":[16.3917,120.5833],"San Roque Village":[16.395,120.575],"San Vicente":[16.3917,120.5917],"Sanitary Camp, North":[16.4367,120.6028],"Sanitary Camp, South":[16.435,120.6028],"Santa Escolastica":[16.4044,120.6017],"Santo Rosario":[16.4161,120.5833],"Santo Tomas Proper":[16.37,120.56],"Santo Tomas School Area":[16.375,120.565],"Scout Barrio":[16.3992,120.6133],"Session Road Area":[16.4125,120.5964],"Slaughter House Area (Santo Ni\xF1o Slaughter)":[16.4267,120.5942],"SLU-SVP Housing Village":[16.4022,120.59],"South Drive":[16.4139,120.6139],"Teodora Alonzo":[16.4117,120.59],Trancoville:[16.4222,120.6028],"Upper General Luna":[16.415,120.6014],"Victoria Village":[16.4172,120.5811],"Websters Subdivision":[16.4178,120.585]};var vx=class n{suggestions$=new Ut([]);STREETS_AND_LANDMARKS=[{name:"Session Road",barangay:"Session Road Area",coordinates:[16.4125,120.5964],type:"street",matchScore:0},{name:"Burnham Road",barangay:"Legarda-Burnham-Kisad",coordinates:[16.4111,120.5917],type:"street",matchScore:0},{name:"Bokawkan Road",barangay:"Andres Bonifacio (Lower Bokawkan)",coordinates:[16.4174,120.5856],type:"street",matchScore:0},{name:"Marcos Highway",barangay:"Magsaysay, Upper",coordinates:[16.4222,120.5958],type:"street",matchScore:0},{name:"Governor Pack Road",barangay:"New Lucban",coordinates:[16.4214,120.5925],type:"street",matchScore:0},{name:"Loakan Road",barangay:"Loakan Proper",coordinates:[16.3833,120.6167],type:"street",matchScore:0},{name:"Mines View Road",barangay:"Mines View Park",coordinates:[16.4244,120.6331],type:"street",matchScore:0},{name:"Outlook Drive",barangay:"Outlook Drive",coordinates:[16.4139,120.6225],type:"street",matchScore:0},{name:"South Drive",barangay:"South Drive",coordinates:[16.4139,120.6139],type:"street",matchScore:0},{name:"Santo Tomas Road",barangay:"Santo Tomas Proper",coordinates:[16.37,120.56],type:"street",matchScore:0},{name:"Mines View Park",barangay:"Mines View Park",coordinates:[16.4244,120.6331],type:"street",matchScore:0},{name:"Rizal Monument",barangay:"Rizal Monument Area",coordinates:[16.4131,120.5931],type:"street",matchScore:0},{name:"Baguio Cathedral",barangay:"Session Road Area",coordinates:[16.4125,120.5964],type:"street",matchScore:0},{name:"SM City Baguio",barangay:"Holy Ghost Extension",coordinates:[16.4189,120.5994],type:"street",matchScore:0},{name:"Ayala Technohub",barangay:"New Lucban",coordinates:[16.4214,120.5925],type:"street",matchScore:0},{name:"PNP Camp",barangay:"Camp 7",coordinates:[16.3769,120.5939],type:"street",matchScore:0}];constructor(){}searchLocations(e){if(!e||e.trim().length===0)return this.suggestions$.next([]),this.suggestions$.asObservable();let t=e.toLowerCase().trim(),i=[];Object.entries(Zr).forEach(([o,s])=>{let l=this.calculateMatchScore(t,o.toLowerCase());l>0&&i.push({name:o,barangay:o,coordinates:s,type:"barangay",matchScore:l})}),this.STREETS_AND_LANDMARKS.forEach(o=>{let s=this.calculateMatchScore(t,o.name.toLowerCase());s>0&&i.push(Ee(te({},o),{matchScore:s}))});let r=i.sort((o,s)=>s.matchScore-o.matchScore).slice(0,12);return this.suggestions$.next(r),this.suggestions$.asObservable()}calculateMatchScore(e,t){if(t===e)return 100;if(t.startsWith(e))return 80;if(t.includes(e))return 60;let i=e.split(/\s+/),r=t.split(/\s+/),o=i.filter(s=>r.some(l=>l.startsWith(s)));return o.length>0?40+o.length*10:0}getAllBarangays(){return Object.entries(Zr).map(([e,t])=>({name:e,barangay:e,coordinates:t,type:"barangay",matchScore:0}))}getLocationCoordinates(e){if(Zr[e])return Zr[e];let t=this.STREETS_AND_LANDMARKS.find(i=>i.name.toLowerCase()===e.toLowerCase());return t?t.coordinates:null}getNearbyLocations(e,t,i=1){let r=[];return Object.entries(Zr).forEach(([o,[s,l]])=>{let u=this.calculateDistance(e,t,s,l);u<=i&&r.push({name:o,barangay:o,coordinates:[s,l],type:"barangay",matchScore:100-u/i*100})}),r.sort((o,s)=>s.matchScore-o.matchScore)}calculateDistance(e,t,i,r){let s=(i-e)*Math.PI/180,l=(r-t)*Math.PI/180,u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ge({token:n,factory:n.\u0275fac,providedIn:"root"})};function foe(n,e){if(n&1){let t=ve();b(0,"div",11)(1,"span",12),I(2),w(),b(3,"button",13),ee("click",function(){q(t);let r=B();return G(r.notificationMessage="")}),I(4,"Close"),w()()}if(n&2){let t=B();We("notification-error",t.notificationType==="error")("notification-success",t.notificationType==="success")("notification-warning",t.notificationType==="warning"),M(2),ue(t.notificationMessage)}}var yx=class n{data=$(vp);auth=$(Dn);reportService=$(Vn);router=$(Rt);animationService=$(jo);locationSearchService=$(vx);map;BAGUIO_COORDS=[16.4167,120.5933];BAGUIO_BOUNDS=[[16.35,120.52],[16.48,120.66]];searchQuery="";locationSuggestions=[];showSuggestions=!1;selectedSearchLocation=null;searchMarker=null;notificationMessage="";notificationType="error";notificationTimeout;BARANGAY_CENTROIDS={"A. Bonifacio-Caguioa-Rimando (ABCR)":[16.4142,120.5947],"Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)":[16.4153,120.5934],"Alfonso Tabora":[16.4234,120.5969],Ambiong:[16.4288,120.6081],"Andres Bonifacio (Lower Bokawkan)":[16.4174,120.5856],"Apugan-Loakan":[16.3828,120.6175],"Asin Road":[16.4046,120.5636],"Atok Trail":[16.3792,120.6307],"Aurora Hill Proper (Malvar-Sgt. Floresca)":[16.4245,120.603],"Aurora Hill, North Central":[16.4278,120.6042],"Aurora Hill, South Central":[16.4254,120.6069],"Bagong Lipunan (Market Area)":[16.4153,120.596],"Baguio Dairy Farm":[16.382,120.5694],"Bakakeng Central":[16.3908,120.5839],"Bakakeng North":[16.3969,120.5878],"Bal-Marcoville (Marcoville)":[16.4089,120.6017],Balsigan:[16.4047,120.5889],"Bayan Park East":[16.4278,120.6125],"Bayan Park Village":[16.4264,120.6108],"Bayan Park West (Bayan Park)":[16.4267,120.6083],"BGH Compound":[16.4008,120.5922],Brookside:[16.4225,120.6058],Brookspoint:[16.4258,120.6153],"Cabinet Hill-Teacher's Camp":[16.4158,120.6067],"Camdas Subdivision":[16.4272,120.5975],"Camp 7":[16.3769,120.5939],"Camp 8":[16.3917,120.5967],"Camp Allen":[16.4147,120.5892],"Campo Filipino":[16.4169,120.5861],"City Camp Central":[16.4117,120.5869],"City Camp Proper":[16.4108,120.5858],"Country Club Village":[16.41,120.6189],"Cresencia Village":[16.4142,120.5867],Dagisitan:[16.4269,120.5986],"Dagsian, Lower":[16.3986,120.6028],"Dagsian, Upper":[16.4011,120.6025],"Dizon Subdivision":[16.4286,120.5989],"Dominican Hill-Mirador":[16.4097,120.5794],Dontogan:[16.3758,120.5736],"DPS Area":[16.4039,120.5986],"Engineers' Hill":[16.4111,120.6011],"Fairview Village":[16.4128,120.5819],"Ferdinand (Happy Homes-Campo Sioco)":[16.4061,120.5869],"Fort del Pilar":[16.3886,120.6192],"Gabriel Silang":[16.4006,120.6053],"General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)":[16.4239,120.5919],"General Luna, Lower":[16.4136,120.5997],"General Luna, Upper":[16.415,120.6014],Gibraltar:[16.4183,120.6278],"Greenwater Village":[16.4056,120.6083],"Guisad Central":[16.4217,120.5839],"Guisad Sorong":[16.425,120.5819],"Happy Hollow":[16.4036,120.6306],"Happy Homes (Happy Homes-Lucban)":[16.4239,120.5936],"Harrison-Claudio Carantes":[16.4131,120.5956],Hillside:[16.3981,120.605],"Holy Ghost Extension":[16.4189,120.5994],"Holy Ghost Proper":[16.4172,120.5969],"Honeymoon (Honeymoon-Holy Ghost)":[16.4206,120.5947],"Imelda R. Marcos (La Salle)":[16.4083,120.6014],"Imelda Village":[16.4167,120.6056],Irisan:[16.4083,120.5606],Kabayanihan:[16.4144,120.5931],Kagitingan:[16.4156,120.5908],"Kayang Extension":[16.4167,120.5925],"Kayang-Hilltop":[16.4161,120.5942],Kias:[16.3667,120.6233],"Legarda-Burnham-Kisad":[16.4111,120.5917],"Liwanag-Loakan":[16.3889,120.6125],"Loakan Proper":[16.3833,120.6167],"Lopez Jaena":[16.4183,120.6011],"Lourdes Subdivision Extension":[16.4089,120.585],"Lourdes Subdivision, Lower":[16.4097,120.5883],"Lourdes Subdivision, Proper":[16.4086,120.5869],Lualhati:[16.4136,120.615],Lucnab:[16.4133,120.6308],"Magsaysay Private Road":[16.4192,120.5964],"Magsaysay, Lower":[16.4208,120.5947],"Magsaysay, Upper":[16.4222,120.5958],"Malcolm Square-Perfecto (Jose Abad Santos)":[16.415,120.5958],"Manuel A. Roxas":[16.4183,120.6031],"Market Subdivision, Upper":[16.4164,120.5975],"Middle Quezon Hill Subdivision (Quezon Hill Middle)":[16.42,120.58],"Military Cut-off":[16.4067,120.5983],"Mines View Park":[16.4244,120.6331],"Modern Site, East":[16.425,120.6042],"Modern Site, West":[16.425,120.6028],"MRR-Queen of Peace":[16.4111,120.5844],"New Lucban":[16.4214,120.5925],"Outlook Drive":[16.4139,120.6225],Pacdal:[16.425,120.6194],"Padre Burgos":[16.4161,120.59],"Padre Zamora":[16.4194,120.5939],"Palma-Urbano (Cari\xF1o-Palma)":[16.405,120.595],"Phil-Am":[16.42,120.605],Pinget:[16.435,120.58],"Pinsao Pilot Project":[16.4294,120.575],"Pinsao Proper":[16.4333,120.5722],Poliwes:[16.3983,120.5933],Pucsusan:[16.4214,120.6264],"Quezon Hill Proper":[16.4233,120.5783],"Quezon Hill, Upper":[16.425,120.5767],"Quirino Hill, East":[16.43,120.5883],"Quirino Hill, Lower":[16.4283,120.59],"Quirino Hill, Middle":[16.43,120.59],"Quirino Hill, West":[16.43,120.5867],"Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)":[16.4225,120.5933],"Rizal Monument Area":[16.4131,120.5931],"Rock Quarry, Lower":[16.4083,120.5883],"Rock Quarry, Middle":[16.4094,120.5867],"Rock Quarry, Upper":[16.4106,120.585],"Salud Mitra":[16.4167,120.5983],"San Antonio Village":[16.4167,120.6083],"San Luis Village":[16.3917,120.5833],"San Roque Village":[16.395,120.575],"San Vicente":[16.3917,120.5917],"Sanitary Camp, North":[16.4367,120.6028],"Sanitary Camp, South":[16.435,120.6028],"Santa Escolastica":[16.4044,120.6017],"Santo Rosario":[16.4161,120.5833],"Santo Tomas Proper":[16.37,120.56],"Santo Tomas School Area":[16.375,120.565],"Scout Barrio":[16.3992,120.6133],"Session Road Area":[16.4125,120.5964],"Slaughter House Area (Santo Ni\xF1o Slaughter)":[16.4267,120.5942],"SLU-SVP Housing Village":[16.4022,120.59],"South Drive":[16.4139,120.6139],"Teodora Alonzo":[16.4117,120.59],Trancoville:[16.4222,120.6028],"Upper General Luna":[16.415,120.6014],"Victoria Village":[16.4172,120.5811],"Websters Subdivision":[16.4178,120.585]};incidentsLayer=mi.layerGroup();eventListenerBound=!1;allReports=[];reportsSubscription;activeFilter="all";ngOnInit(){setTimeout(()=>{this.initMap(),this.loadApprovedReports()},100),this.eventListenerBound||(window.addEventListener("viewIncidentDetail",(e=>{this.viewReportDetail(e.detail)})),this.eventListenerBound=!0)}setFilter(e){this.activeFilter=e,this.displayFilteredMarkers(),setTimeout(()=>{this.zoomToFilteredMarkers()},100)}onSearchInput(e){if(this.searchQuery=e,e.trim().length===0){this.locationSuggestions=[],this.showSuggestions=!1;return}this.locationSearchService.searchLocations(e).subscribe(t=>{this.locationSuggestions=t,this.showSuggestions=t.length>0})}selectLocation(e){if(!this.isLocationInBaguio(e.coordinates)){this.showNotification("\u26A0\uFE0F Location is outside Baguio City bounds. Please select a location within Baguio.","error");return}this.selectedSearchLocation=e,this.searchQuery=e.name,this.showSuggestions=!1,this.searchMarker&&this.map.removeLayer(this.searchMarker);let t=mi.divIcon({className:"search-marker-icon",html:`<div style="
        width: 32px; 
        height: 32px; 
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%; 
        border: 3px solid white;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.6);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
      ">
        \u{1F4CD}
      </div>`,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});this.searchMarker=mi.marker(e.coordinates,{icon:t});let i=`
      <div style="padding: 10px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
        <h4 style="margin: 0 0 8px 0; color: #333;">${e.name}</h4>
        <p style="margin: 0; font-size: 12px; color: #666;">
          <strong>Type:</strong> ${e.type==="barangay"?"Barangay":"Street/Landmark"}
        </p>
        <p style="margin: 8px 0 0 0; font-size: 11px; color: #888;">
          Lat: ${e.coordinates[0].toFixed(4)}, Lng: ${e.coordinates[1].toFixed(4)}
        </p>
      </div>
    `;this.searchMarker.bindPopup(i).openPopup(),this.map.addLayer(this.searchMarker),this.map.setView(e.coordinates,15,{animate:!0,duration:.5})}saveSelectedLocation(){if(!this.selectedSearchLocation){this.showNotification("No location selected","error");return}if(!this.isLocationInBaguio(this.selectedSearchLocation.coordinates)){this.showNotification("\u26A0\uFE0F Cannot save: Location is outside Baguio City. Please select a location within Baguio.","error");return}let e={barangay:this.selectedSearchLocation.barangay,street:this.selectedSearchLocation.name,latitude:this.selectedSearchLocation.coordinates[0],longitude:this.selectedSearchLocation.coordinates[1],type:this.selectedSearchLocation.type},t=new CustomEvent("locationSelected",{detail:e});window.dispatchEvent(t),this.showNotification(`\u2713 Location "${this.selectedSearchLocation.name}" saved successfully!`,"success")}isLocationInBaguio(e){let[t,i]=e,r=this.BAGUIO_BOUNDS,[o,s]=r[0],[l,u]=r[1];return t>=o&&t<=l&&i>=s&&i<=u}showNotification(e,t="error"){this.notificationMessage=e,this.notificationType=t,this.notificationTimeout&&clearTimeout(this.notificationTimeout),this.notificationTimeout=setTimeout(()=>{this.notificationMessage=""},5e3)}clearSearch(){this.searchQuery="",this.locationSuggestions=[],this.showSuggestions=!1,this.selectedSearchLocation=null,this.searchMarker&&(this.map.removeLayer(this.searchMarker),this.searchMarker=null)}searchLocation(){this.locationSuggestions.length>0?this.selectLocation(this.locationSuggestions[0]):this.searchQuery.trim().length===0?this.showNotification("Please enter a location to search","warning"):this.showNotification("No locations found. Try searching by barangay or street name.","warning")}ngOnDestroy(){this.animationService.destroyScrollObserver(),this.map&&this.map.remove(),this.reportsSubscription&&this.reportsSubscription.unsubscribe()}initMap(){this.map||(this.map=mi.map("mountainSentinelMap",{center:this.BAGUIO_COORDS,zoom:13,maxBounds:this.BAGUIO_BOUNDS,maxBoundsViscosity:.5}),mi.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:12,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.incidentsLayer.addTo(this.map),this.map.fitBounds(this.BAGUIO_BOUNDS))}loadApprovedReports(){this.reportsSubscription=this.reportService.getAllReports().pipe(pe(e=>{console.log("All reports:",e);let t=e.filter(i=>i.status==="approved");return console.log("Approved reports with location:",t.filter(i=>i.location)),t})).subscribe(e=>{this.allReports=e,this.displayFilteredMarkers(),this.activeFilter==="all"&&setTimeout(()=>this.zoomToFilteredMarkers(),300)})}displayFilteredMarkers(){this.incidentsLayer.clearLayers();let e=this.activeFilter==="all"?this.allReports:this.allReports.filter(r=>r.priority===this.activeFilter),t=e.filter(r=>r.location&&r.location.lat&&r.location.lng),i=e.filter(r=>!r.location||!r.location.lat||!r.location.lng);if(!(t.length===0&&i.length===0)&&(t.length>0&&this.createClusters(t).forEach(o=>{if(o.reports.length===1){let s=o.reports[0],l=s.priority||"low",u=[s.location.lat,s.location.lng],f=mi.divIcon({className:"custom-marker-icon",html:`<div class="marker-pin marker-${l}" style="
              width: 35px; 
              height: 35px; 
              background-color: ${this.getPriorityColor(l)}; 
              border-radius: 50% 50% 50% 0; 
              transform: rotate(-45deg); 
              border: 3px solid white;
              box-shadow: 0 3px 8px rgba(0,0,0,0.4);
              position: relative;
              cursor: pointer;
            ">
              <div style="
                position: absolute;
                width: 16px;
                height: 16px;
                background-color: white;
                border-radius: 50%;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
              "></div>
            </div>`,iconSize:[35,35],iconAnchor:[17.5,35],popupAnchor:[0,-35]}),m=mi.marker(u,{icon:f});this.addMarkerPopup(m,s),this.incidentsLayer.addLayer(m)}else{let s=o.center,l=mi.divIcon({className:"cluster-icon",html:`<div class="cluster-pin" style="
              width: 45px; 
              height: 45px; 
              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
              border-radius: 50%; 
              border: 3px solid white;
              box-shadow: 0 4px 12px rgba(255, 107, 107, 0.5);
              position: relative;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              color: white;
              font-size: 18px;
              text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            ">
              ${o.reports.length}
            </div>`,iconSize:[45,45],iconAnchor:[22.5,45],popupAnchor:[0,-45]}),u=mi.marker(s,{icon:l}),f=this.createClusterPopup(o);u.bindPopup(f,{maxWidth:380,className:"cluster-popup"}),u.on("click",()=>{u.openPopup()}),this.incidentsLayer.addLayer(u)}}),i.length>0)){let r={};i.forEach(o=>{let s=o.barangay||"Unknown Location";r[s]||(r[s]=[]),r[s].push(o)}),Object.entries(r).forEach(([o,s])=>{let l=this.getBarangayCentroid(o);if(!l){console.warn(`No coordinates found for barangay: ${o}`);return}let u=s[0]?.priority||"low";if(s.length===1){let f=s[0],m=mi.divIcon({className:"fallback-marker-icon",html:`<div class="marker-pin marker-fallback" style="
              width: 35px; 
              height: 35px; 
              background-color: #999; 
              border-radius: 50% 50% 50% 0; 
              transform: rotate(-45deg); 
              border: 3px solid white;
              box-shadow: 0 3px 8px rgba(0,0,0,0.2);
              position: relative;
              cursor: pointer;
              opacity: 0.7;
            ">
              <div style="
                position: absolute;
                width: 16px;
                height: 16px;
                background-color: white;
                border-radius: 50%;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
              "></div>
            </div>`,iconSize:[35,35],iconAnchor:[17.5,35],popupAnchor:[0,-35]}),y=mi.marker(l,{icon:m});this.addMarkerPopup(y,f),this.incidentsLayer.addLayer(y)}else{let f=mi.divIcon({className:"barangay-cluster-icon",html:`<div class="barangay-cluster-pin" style="
              width: 45px; 
              height: 45px; 
              background: linear-gradient(135deg, #9370DB 0%, #6A5ACD 100%);
              border-radius: 50%; 
              border: 3px solid white;
              box-shadow: 0 4px 12px rgba(147, 112, 219, 0.5);
              position: relative;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              color: white;
              font-size: 18px;
              text-shadow: 0 1px 2px rgba(0,0,0,0.3);
              opacity: 0.8;
            ">
              ${s.length}+
            </div>`,iconSize:[45,45],iconAnchor:[22.5,45],popupAnchor:[0,-45]}),m=mi.marker(l,{icon:f}),y=`
            <div style="padding: 12px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
              <h3 style="margin: 0 0 12px 0; color: #333; font-size: 14px; border-bottom: 2px solid #9370DB; padding-bottom: 8px;">
                ${o} (${s.length} reports without GPS)
              </h3>
              <div style="max-height: 200px; overflow-y: auto; margin-bottom: 12px;">
                ${s.map(C=>`
                  <div style="padding: 8px; border-bottom: 1px solid #eee; cursor: pointer; font-size: 12px;"
                       onclick="window.dispatchEvent(new CustomEvent('viewIncidentDetail', { detail: '${C.id}' }))"
                       onmouseover="this.style.backgroundColor='#f5f5f5';" 
                       onmouseout="this.style.backgroundColor='transparent';">
                    <div style="font-weight: 600; color: ${this.getPriorityColor(C.priority||"low")};">
                      ${this.getPriorityIcon(C.priority||"low")} ${C.description.substring(0,40)}...
                    </div>
                  </div>
                `).join("")}
              </div>
              <small style="color: #666;">Note: These reports use barangay-based mapping (no GPS available)</small>
            </div>
          `;m.bindPopup(y,{maxWidth:380,className:"cluster-popup"}),m.on("click",()=>{m.openPopup()}),this.incidentsLayer.addLayer(m)}})}}createClusters(e){let t=[],i=new Set,r=this.map?this.map.getZoom():13,o=1;return r>=15?o=.25:r>=13?o=.5:o=1.5,o=Math.min(o,.05),e.forEach(l=>{if(i.has(l.id))return;let u={center:[l.location.lat,l.location.lng],reports:[l]};if(i.add(l.id),e.forEach(f=>{if(i.has(f.id)||f.id===l.id)return;this.haversineDistance(l.location.lat,l.location.lng,f.location.lat,f.location.lng)<=o&&(u.reports.push(f),i.add(f.id))}),u.reports.length>1){let f=u.reports.reduce((y,C)=>y+C.location.lat,0)/u.reports.length,m=u.reports.reduce((y,C)=>y+C.location.lng,0)/u.reports.length;u.center=[f,m]}t.push(u)}),t}getBarangayCentroid(e){if(!e)return null;let t=e.trim();if(this.BARANGAY_CENTROIDS[t])return this.BARANGAY_CENTROIDS[t];let i=Object.entries(this.BARANGAY_CENTROIDS).find(([o])=>o.toLowerCase()===t.toLowerCase());if(i)return i[1];let r=Object.entries(this.BARANGAY_CENTROIDS).find(([o])=>o.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(o.toLowerCase()));return r?r[1]:null}haversineDistance(e,t,i,r){let s=(i-e)*Math.PI/180,l=(r-t)*Math.PI/180,u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}createClusterPopup(e){let t=e.reports.map((i,r)=>{let o=i.priority||"low",s=this.getPriorityColor(o),l=(i.description||"No description").substring(0,45),u=l.length>=45?"...":"";return`
      <div style="padding: 10px; border-bottom: 1px solid #eee; cursor: pointer;" 
           onclick="window.dispatchEvent(new CustomEvent('viewIncidentDetail', { detail: '${i.id}' }))"
           onmouseover="this.style.backgroundColor='#f5f5f5';" 
           onmouseout="this.style.backgroundColor='transparent';">
        <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 4px;">
          <div style="width: 8px; height: 8px; background: ${s}; border-radius: 50%; flex-shrink: 0;"></div>
          <strong style="font-size: 12px; color: #333; flex: 1; word-break: break-word;">${l}${u}</strong>
        </div>
        <small style="color: #666; font-size: 11px;">Location: ${i.barangay}</small>
      </div>
    `}).join("");return`
      <div style="padding: 12px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #fff; border-radius: 8px;">
        <h3 style="margin: 0 0 12px 0; color: #333; font-size: 14px; border-bottom: 2px solid #ff6b6b; padding-bottom: 8px; font-weight: 700;">
          Multiple Incidents (${e.reports.length})
        </h3>
        <div style="max-height: 300px; overflow-y: auto; margin-bottom: 10px;">
          ${t}
        </div>
        <button 
          onclick="console.log('View all incidents in cluster')"
          style="
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 700;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(255, 107, 107, 0.2);
          "
          onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(255, 107, 107, 0.3)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(255, 107, 107, 0.2)'"
        >
          View All Incidents
        </button>
      </div>
    `}addMarkerPopup(e,t){let i=t.priority||"low",r=this.getPriorityColor(i),o=i.charAt(0).toUpperCase()+i.slice(1),s=(t.description||"No description").substring(0,60),l=s.length>=60?"...":"",u=`
      <div style="padding: 12px; min-width: 280px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #fff; border-radius: 8px;">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px; padding-bottom: 10px; border-bottom: 2px solid ${r};">
          <div style="width: 12px; height: 12px; background: ${r}; border-radius: 50%;"></div>
          <h3 style="margin: 0; color: #333; font-size: 14px; font-weight: 700; flex: 1; word-break: break-word;">
            ${s}${l}
          </h3>
        </div>
        
        <div style="margin-bottom: 10px;">
          <div style="font-size: 12px; color: #555; margin-bottom: 8px; line-height: 1.5;">
            <strong>Location:</strong><br>
            <span style="color: #666; font-size: 11px;">
              ${t.street?t.street+"<br>":""}
              ${t.barangay||"N/A"}, ${t.city||"Baguio City"}
            </span>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px; padding: 8px; background: #f8f9fa; border-radius: 6px;">
          <div style="font-size: 11px;">
            <div style="color: #999; font-weight: 600; text-transform: uppercase; margin-bottom: 4px;">Status</div>
            <div style="color: #28a745; font-weight: 700;">Approved</div>
          </div>
          <div style="font-size: 11px;">
            <div style="color: #999; font-weight: 600; text-transform: uppercase; margin-bottom: 4px;">Priority</div>
            <div style="color: ${r}; font-weight: 700; text-transform: uppercase;">${o}</div>
          </div>
        </div>

        ${t.reporterName?`
          <div style="font-size: 11px; color: #666; margin-bottom: 8px; padding: 6px; background: #f0f0f0; border-radius: 4px;">
            <strong>Reported by:</strong> ${t.reporterName}
          </div>
        `:""}

        ${t.timestamp||t.createdAt?`
          <div style="font-size: 10px; color: #999; margin-bottom: 10px;">
            ${new Date(t.timestamp||t.createdAt).toLocaleDateString()} at ${new Date(t.timestamp||t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}
          </div>
        `:""}

        <button 
          onclick="window.dispatchEvent(new CustomEvent('viewIncidentDetail', { detail: '${t.id}' }))"
          style="
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,123,255,0.2);
          "
          onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,123,255,0.3)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,123,255,0.2)'"
        >
          View Full Report Details
        </button>
      </div>
    `;e.bindPopup(u,{maxWidth:350,className:"custom-popup"}),e.on("click",()=>{e.openPopup()})}zoomToFilteredMarkers(){let t=(this.activeFilter==="all"?this.allReports:this.allReports.filter(i=>i.priority===this.activeFilter)).filter(i=>i.location&&i.location.lat&&i.location.lng);if(t.length>0){let i=mi.latLngBounds(t.map(r=>[r.location.lat,r.location.lng]));this.map.fitBounds(i,{padding:[80,80],maxZoom:16})}else this.map.fitBounds(this.BAGUIO_BOUNDS)}viewReportDetail(e){this.router.navigate(["/report-detail",e])}getPriorityColor(e){switch(e){case"high":return"#dc3545";case"medium":return"#ffc107";case"low":return"#28a745";default:return"#6c757d"}}getPriorityIcon(e){switch(e){case"high":return"[HIGH]";case"medium":return"[MED]";case"low":return"[LOW]";default:return"[--]"}}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-map"]],decls:16,vars:9,consts:[[1,"full-map-container","scroll-reveal","animate-on-load"],["class","location-notification",3,"notification-error","notification-success","notification-warning",4,"ngIf"],[1,"map-controls"],[1,"map-title"],[1,"filter-controls"],[1,"filter-btn",3,"click"],[1,"filter-btn","filter-high",3,"click"],[1,"filter-btn","filter-medium",3,"click"],[1,"filter-btn","filter-low",3,"click"],[1,"map-wrapper-fullscreen"],["id","mountainSentinelMap",1,"map-container"],[1,"location-notification"],[1,"notification-text"],[1,"notification-close",3,"click"]],template:function(t,i){t&1&&(b(0,"div",0),ie(1,foe,5,7,"div",1),b(2,"div",2)(3,"h2",3),I(4,"Incident Map View"),w(),b(5,"div",4)(6,"button",5),ee("click",function(){return i.setFilter("all")}),I(7," ALL INCIDENTS "),w(),b(8,"button",6),ee("click",function(){return i.setFilter("high")}),I(9," HIGH PRIORITY "),w(),b(10,"button",7),ee("click",function(){return i.setFilter("medium")}),I(11," MEDIUM PRIORITY "),w(),b(12,"button",8),ee("click",function(){return i.setFilter("low")}),I(13," LOW PRIORITY "),w()()(),b(14,"div",9),oe(15,"div",10),w()()),t&2&&(M(),W("ngIf",i.notificationMessage),M(5),We("active",i.activeFilter==="all"),M(2),We("active",i.activeFilter==="high"),M(2),We("active",i.activeFilter==="medium"),M(2),We("active",i.activeFilter==="low"))},dependencies:[Tt,gn,Bn],styles:['[_ngcontent-%COMP%]:root{--primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--accent-green: #51cf66;--sos-red: #ff6b6b;--light-gray: #f5f7fa;--shadow: 0 8px 24px rgba(0, 0, 0, .12);--soft-shadow: 0 4px 12px rgba(0, 0, 0, .08)}.location-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;padding:16px 20px;border-radius:8px;display:flex;align-items:center;gap:12px;background:#fff;border-left:4px solid #667eea;box-shadow:0 8px 24px #00000026;z-index:10000;max-width:400px;animation:_ngcontent-%COMP%_slideInRight .3s ease-out}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(400px)}to{opacity:1;transform:translate(0)}}.notification-error[_ngcontent-%COMP%]{border-left-color:#ff6b6b;background:#fff5f5}.notification-success[_ngcontent-%COMP%]{border-left-color:#51cf66;background:#f1fdf4}.notification-warning[_ngcontent-%COMP%]{border-left-color:#ffc107;background:#fffbf0}.notification-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.notification-text[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500;flex:1;line-height:1.4}.notification-close[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;color:#999;padding:0;margin-left:8px;transition:color .2s ease}.notification-close[_ngcontent-%COMP%]:hover{color:#333}@media (max-width: 600px){.location-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}}.selected-location-panel[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 8px);left:0;right:0;background:#fff;border:2px solid #667eea;border-radius:12px;padding:16px;box-shadow:0 8px 32px #667eea33;z-index:999;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.location-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.location-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding-bottom:12px;border-bottom:1px solid #f0f0f0}.location-pin[_ngcontent-%COMP%]{font-size:28px;flex-shrink:0}.location-info[_ngcontent-%COMP%]{flex:1;min-width:0}.location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333;margin-bottom:4px;word-break:break-word}.location-meta[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:capitalize}.location-coordinates[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:12px;background:#f8f9fa;border-radius:8px}.coord-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;font-size:13px}.coord-label[_ngcontent-%COMP%]{font-weight:600;color:#666;flex-shrink:0}.coord-value[_ngcontent-%COMP%]{font-family:Monaco,Courier New,monospace;color:#333;font-weight:500;word-break:break-all}.location-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:4px}.save-location-btn[_ngcontent-%COMP%], .cancel-location-btn[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;min-height:40px}.save-location-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea4d}.save-location-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #667eea66}.cancel-location-btn[_ngcontent-%COMP%]{background:#f0f0f0;color:#333}.cancel-location-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}.search-container[_ngcontent-%COMP%]{position:relative;min-width:300px;max-width:500px;order:-1;flex:1 1 auto;margin-right:30px}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]{max-width:400px;margin-right:20px}}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]{order:2;margin-right:0;width:100%;max-width:100%}}.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:8px 12px;gap:8px;transition:all .3s ease;min-height:44px}.search-bar[_ngcontent-%COMP%]:focus-within{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;background:#fafbfc}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;font-size:14px;padding:8px 4px;font-family:inherit;background:transparent;color:#333;min-width:0}.search-input[_ngcontent-%COMP%]::placeholder{color:#999}.search-button[_ngcontent-%COMP%], .clear-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:6px;padding:8px 14px;cursor:pointer;font-size:16px;font-weight:600;min-width:44px;min-height:28px;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.search-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.clear-button[_ngcontent-%COMP%]{background:#ccc;padding:6px 10px}.clear-button[_ngcontent-%COMP%]:hover{background:#999}.suggestions-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 4px);left:0;right:0;background:#fff;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 8px 24px #0000001f;max-height:400px;overflow-y:auto;z-index:1000;animation:_ngcontent-%COMP%_slideDown .2s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.suggestion-item[_ngcontent-%COMP%]{padding:12px 16px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid #f0f0f0}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-item[_ngcontent-%COMP%]:hover{background:#f8f9fa;padding-left:20px}.suggestion-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.suggestion-content[_ngcontent-%COMP%]{flex:1;min-width:0}.suggestion-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:4px}.suggestion-type[_ngcontent-%COMP%]{font-size:12px;color:#999;text-transform:capitalize}.suggestion-match-score[_ngcontent-%COMP%]{flex-shrink:0;color:#51cf66;font-weight:700;font-size:16px}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;border-radius:3px}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#999}.full-map-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 60px);width:100%;background:#f5f5f5}.map-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 30px;background:#fff;border-bottom:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014;flex-shrink:0;gap:20px;flex-wrap:wrap}@media (max-width: 1024px){.map-controls[_ngcontent-%COMP%]{flex-wrap:wrap;gap:15px}}@media (max-width: 768px){.map-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch;padding:15px 20px}}@media (max-width: 480px){.map-controls[_ngcontent-%COMP%]{padding:12px 15px;gap:12px}}.map-title[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:800;color:#1a1a1a;letter-spacing:-.5px;flex-shrink:0}@media (max-width: 768px){.map-title[_ngcontent-%COMP%]{font-size:20px;text-align:center;order:1;width:100%}}@media (max-width: 480px){.map-title[_ngcontent-%COMP%]{font-size:18px}}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}@media (max-width: 768px){.filter-controls[_ngcontent-%COMP%]{justify-content:center;gap:8px}}@media (max-width: 480px){.filter-controls[_ngcontent-%COMP%]{gap:6px}}.filter-btn[_ngcontent-%COMP%]{padding:12px 20px;border:2px solid #e0e0e0;background:#fff;border-radius:8px;font-size:13px;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);color:#666;min-height:44px;text-transform:uppercase;position:relative;overflow:hidden;animation:_ngcontent-%COMP%_popIn .4s cubic-bezier(.175,.885,.32,1.275) backwards}.filter-btn[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.filter-btn[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.filter-btn[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.filter-btn[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}@keyframes _ngcontent-%COMP%_popIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.filter-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,rgba(102,126,234,.2) 0%,transparent 70%);border-radius:50%;transform:translate(-50%,-50%);pointer-events:none}.filter-btn[_ngcontent-%COMP%]:hover:before{animation:_ngcontent-%COMP%_ripple .6s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_ripple{0%{width:0;height:0}to{width:300px;height:300px}}.filter-btn[_ngcontent-%COMP%]:hover{border-color:#667eea;color:#667eea;transform:translateY(-2px);box-shadow:0 8px 16px #667eea33}@media (max-width: 480px){.filter-btn[_ngcontent-%COMP%]{padding:8px 14px;font-size:12px;flex:1 1 calc(50% - 6px);min-width:0}}.filter-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 20px #0000001f;border-color:#667eea}.filter-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-color:#667eea;box-shadow:0 8px 20px #667eea4d}.filter-btn.filter-high.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);border-color:#ff6b6b;box-shadow:0 8px 20px #ff6b6b4d}.filter-btn.filter-medium.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa94d,#fd7e14);border-color:#ffa94d;color:#fff;box-shadow:0 8px 20px #ffa04d4d}.filter-btn.filter-low.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);border-color:#51cf66;box-shadow:0 8px 20px #51cf664d}@media (max-width: 768px){.map-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}.filter-controls[_ngcontent-%COMP%]{width:100%}.filter-btn[_ngcontent-%COMP%]{flex:1;min-width:calc(50% - 5px)}}.map-wrapper-fullscreen[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;overflow:hidden}.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{width:100%;height:100%;min-height:600px}@media (max-width: 768px){.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{min-height:400px}}@media (max-width: 480px){.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{min-height:350px}}.map-container[_ngcontent-%COMP%]{width:100%;height:100%;min-height:600px}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{min-height:400px}}.map-layout-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1.2fr;gap:30px;padding:30px;background:linear-gradient(135deg,#f5f7fa,#e9ecef);min-height:calc(100vh - 60px);max-width:1400px;margin:0 auto}@media (max-width: 1200px){.map-layout-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr;gap:20px;padding:20px}}@media (max-width: 992px){.map-layout-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}}@media (max-width: 768px){.map-layout-container[_ngcontent-%COMP%]{padding:15px;gap:15px}}@media (max-width: 480px){.map-layout-container[_ngcontent-%COMP%]{padding:10px;gap:12px}}.left-section[_ngcontent-%COMP%]   .emergency-sos[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f,#c92a2a);color:#fff;padding:40px 30px;border-radius:16px;text-align:center;box-shadow:0 16px 40px #ff6b6b4d,0 0 1px #fff3 inset;border:1px solid rgba(255,255,255,.15);display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;min-height:280px}.emergency-sos[_ngcontent-%COMP%]   .sos-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:15px;animation:_ngcontent-%COMP%_pulse 2s infinite}.emergency-sos[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;margin:0 0 8px;font-weight:800;letter-spacing:-.5px;line-height:1.2}.emergency-sos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin:0 0 20px;opacity:.95;font-weight:500}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]{background:#fff;color:#ff6b6b;border:none;padding:12px 32px;border-radius:8px;font-size:15px;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 8px 20px #00000040;text-transform:uppercase;letter-spacing:.3px}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 30px #0000004d;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px)}.middle-section[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;min-height:500px}.map-wrapper[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:12px;box-shadow:0 8px 24px #0000001f;z-index:1}.custom-marker-icon[_ngcontent-%COMP%]{background:none;border:none}.marker-pin[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s}.marker-pin[_ngcontent-%COMP%]:hover{transform:rotate(-45deg) scale(1.1)}.marker-high[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:rotate(-45deg) translateY(0)}50%{transform:rotate(-45deg) translateY(-5px)}}.leaflet-popup-content-wrapper[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 8px 24px #0003;border:1px solid rgba(0,0,0,.05)}.leaflet-popup-content[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.leaflet-popup-tip[_ngcontent-%COMP%]{box-shadow:0 8px 24px #0003}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#1a1a1a;font-weight:800;letter-spacing:-.3px}.right-section[_ngcontent-%COMP%]   .updates-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px;background:#fff;padding:20px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014;max-height:400px;overflow-y:auto}.updates-list[_ngcontent-%COMP%]   .update-item[_ngcontent-%COMP%]{display:flex;gap:14px;padding:14px;background-color:#f8f9fa;border-radius:8px;transition:all .3s cubic-bezier(.4,0,.2,1);align-items:flex-start;cursor:pointer;border:1px solid #e0e0e0}.updates-list[_ngcontent-%COMP%]   .update-item[_ngcontent-%COMP%]:hover{background-color:linear-gradient(135deg,rgba(102,126,234,.05) 0%,rgba(118,75,162,.05) 100%);transform:translateY(-2px);box-shadow:0 8px 20px #667eea26;border-color:#667eea}.update-item[_ngcontent-%COMP%]   .update-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0;margin-top:2px}.update-item[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]{flex:1}.update-content[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#222;margin-bottom:4px}.update-content[_ngcontent-%COMP%]   .update-description[_ngcontent-%COMP%]{margin:0 0 4px;font-size:12px;color:#666;line-height:1.4}.update-content[_ngcontent-%COMP%]   .update-reporter[_ngcontent-%COMP%]{margin:0 0 8px;font-size:11px;color:#888;font-style:italic}.update-content[_ngcontent-%COMP%]   .update-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;color:#fff;white-space:nowrap}.updates-list[_ngcontent-%COMP%]   .no-updates[_ngcontent-%COMP%]{padding:40px 20px;text-align:center;color:#999}.no-updates[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}']})};var Dr=x2(FD());var poe=["mapContainer"];function goe(n,e){n&1&&oe(0,"div",22)}function moe(n,e){if(n&1){let t=ve();b(0,"div",27),ee("click",function(){let r=q(t).$implicit,o=B(2);return G(o.selectSuggestion(r))}),re(),b(1,"svg",28),oe(2,"path",29),w(),_e(),b(3,"div",30)(4,"strong"),I(5),w(),b(6,"small"),I(7),w()()()}if(n&2){let t=e.$implicit;M(5),ue(t.name),M(2),ue(t.address)}}function _oe(n,e){if(n&1){let t=ve();b(0,"div",23)(1,"div",24)(2,"span"),I(3,"Locations in Baguio City"),w(),b(4,"button",25),ee("click",function(){q(t);let r=B();return G(r.closeSuggestions())}),I(5," \u2715 "),w()(),ie(6,moe,8,2,"div",26),w()}if(n&2){let t=B();M(6),W("ngForOf",t.searchSuggestions)}}function voe(n,e){n&1&&(b(0,"div",31),re(),b(1,"svg",32),oe(2,"path",33),w(),_e(),b(3,"span"),I(4,"This location is outside Baguio City. Please select a location within Baguio City only."),w()())}function yoe(n,e){if(n&1&&(b(0,"div",34),re(),b(1,"svg",35),oe(2,"path",36)(3,"circle",37),w(),_e(),b(4,"span"),I(5),w()()),n&2){let t=B();M(5),ue(t.currentLocation.address)}}function boe(n,e){n&1&&(b(0,"div",38),re(),b(1,"svg",15),oe(2,"path",16),w(),_e(),b(3,"span"),I(4,"Location saved!"),w()())}var Ep=class n{locationSelected=new Mn;defaultLocation={lat:16.4023,lng:120.5961};set barangayInput(e){e&&e!==this._lastBarangay&&(this._lastBarangay=e,this.geocodeBarangayToMap(e))}set streetInput(e){e&&(this._lastStreet=e)}_lastBarangay="";_lastStreet="";mapContainer;currentLocation=te({},this.defaultLocation);searchQuery="";searchSuggestions=[];showSuggestions=!1;isLoading=!1;outsideBaguioWarning=!1;locationConfirmed=!1;map;marker;destroy$=new Cn;searchSubject$=new Cn;baguioBounds=Dr.latLngBounds(Dr.latLng(16.35,120.52),Dr.latLng(16.48,120.66));markerIcon=Dr.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});nominatimUrl="https://nominatim.openstreetmap.org";ngOnInit(){this.initializeMap(),this.setupSearch()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.map&&this.map.remove()}initializeMap(){this.map=Dr.map(this.mapContainer.nativeElement,{maxBounds:this.baguioBounds,maxBoundsViscosity:1,minZoom:12,maxZoom:19}).setView([this.currentLocation.lat,this.currentLocation.lng],14),Dr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors",maxZoom:19}).addTo(this.map),this.marker=Dr.marker([this.currentLocation.lat,this.currentLocation.lng],{draggable:!0,icon:this.markerIcon}).addTo(this.map),this.marker.bindPopup("Drag me or click on the map").openPopup(),this.map.on("click",e=>{this.baguioBounds.contains(e.latlng)?(this.outsideBaguioWarning=!1,this.updateMarkerPosition(e.latlng.lat,e.latlng.lng)):(this.outsideBaguioWarning=!0,setTimeout(()=>{this.outsideBaguioWarning=!1},4e3))}),this.marker.on("dragend",()=>{let e=this.marker.getLatLng();this.baguioBounds.contains(e)?(this.outsideBaguioWarning=!1,this.updateMarkerPosition(e.lat,e.lng)):(this.marker.setLatLng([this.currentLocation.lat,this.currentLocation.lng]),this.outsideBaguioWarning=!0,setTimeout(()=>{this.outsideBaguioWarning=!1},4e3))})}updateMarkerPosition(e,t){this.currentLocation.lat=e,this.currentLocation.lng=t,this.marker.setLatLng([e,t]),this.marker.setPopupContent("Location selected"),this.getAddressDescription(e,t),this.locationSelected.emit(te({},this.currentLocation))}setupSearch(){this.searchSubject$.pipe($p(500),b0(),Ah(this.destroy$)).subscribe(e=>{e.length>2?this.performSearch(e):this.searchSuggestions=[]})}onSearchInput(){this.searchSubject$.next(this.searchQuery),this.searchQuery.length>0?this.showSuggestions=!0:(this.showSuggestions=!1,this.searchSuggestions=[])}onSearchFocus(){this.searchSuggestions.length>0&&(this.showSuggestions=!0)}closeSuggestions(){this.showSuggestions=!1}performSearch(e){this.isLoading=!0;let t=e.toLowerCase().trim(),r=Object.entries(Zr).filter(([s])=>s.toLowerCase().includes(t)).slice(0,5).map(([s,l])=>({name:s,address:`${s}, Baguio City, Benguet, Philippines`,lat:l[0],lng:l[1]}));if(r.length>0){this.searchSuggestions=r,this.showSuggestions=!0,this.isLoading=!1;return}let o=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e+", Baguio City")}&limit=5&viewbox=120.52,16.48,120.66,16.35&bounded=1`;fetch(o).then(s=>s.json()).then(s=>{s&&s.length>0?(this.searchSuggestions=s.map(l=>({name:l.display_name.split(",")[0],address:l.display_name,lat:parseFloat(l.lat),lng:parseFloat(l.lon)})),this.showSuggestions=!0,this.isLoading=!1):this.performGlobalSearch(e)}).catch(()=>{this.isLoading=!1,this.searchSuggestions=[]})}performGlobalSearch(e){let t=`${this.nominatimUrl}/search?format=json&q=${encodeURIComponent(e)}&limit=3&addressdetails=1`;fetch(t).then(i=>i.json()).then(i=>{this.searchSuggestions=i.slice(0,3).map(r=>({name:r.display_name.split(",")[0],address:r.display_name,lat:parseFloat(r.lat),lng:parseFloat(r.lon)})),this.showSuggestions=!0,this.isLoading=!1}).catch(()=>{this.isLoading=!1,this.searchSuggestions=[]})}searchLocation(){this.searchQuery.length>0&&this.performSearch(this.searchQuery)}selectSuggestion(e){let t=Dr.latLng(e.lat,e.lng);if(!this.baguioBounds.contains(t)){this.outsideBaguioWarning=!0,this.showSuggestions=!1,this.searchQuery="",setTimeout(()=>{this.outsideBaguioWarning=!1},4e3);return}this.currentLocation={lat:e.lat,lng:e.lng,address:e.address},this.showSuggestions=!1,this.searchQuery="",this.outsideBaguioWarning=!1,this.marker.setLatLng([e.lat,e.lng]),this.map.flyTo([e.lat,e.lng],16,{duration:.8,easeLinearity:.25}),setTimeout(()=>{this.locationSelected.emit(te({},this.currentLocation))},300)}getAddressDescription(e,t){let i=`${this.nominatimUrl}/reverse?format=json&lat=${e}&lon=${t}`;fetch(i).then(r=>r.json()).then(r=>{r&&r.display_name&&(this.currentLocation.address=r.display_name)}).catch(()=>{})}reverseGeocode(e,t){let i=`${this.nominatimUrl}/reverse?format=json&lat=${e}&lon=${t}`;fetch(i).then(r=>r.json()).then(r=>{this.currentLocation.address=r.address?r.display_name:void 0,this.locationSelected.emit(te({},this.currentLocation))}).catch(()=>{this.locationSelected.emit(te({},this.currentLocation))})}onCoordinateChange(){this.isLocationValid()&&this.updateMarkerPosition(this.currentLocation.lat,this.currentLocation.lng)}isLocationValid(){return this.currentLocation.lat>=-90&&this.currentLocation.lat<=90&&this.currentLocation.lng>=-180&&this.currentLocation.lng<=180}confirmLocation(){if(!this.isLocationValid())return;let e=Dr.latLng(this.currentLocation.lat,this.currentLocation.lng);if(!this.baguioBounds.contains(e)){this.outsideBaguioWarning=!0,this.locationConfirmed=!1,setTimeout(()=>{this.outsideBaguioWarning=!1},4e3);return}this.locationConfirmed=!0,this.marker.setPopupContent("Location saved"),this.marker.openPopup(),this.locationSelected.emit(te({},this.currentLocation)),setTimeout(()=>{this.marker.setPopupContent("Location selected")},3e3)}geocodeBarangayToMap(e){if(!this.map||!this.marker)return;let t=Zr,i=e.trim().toLowerCase(),r=Object.entries(t).find(([o])=>o.toLowerCase()===i||o.toLowerCase().includes(i)||i.includes(o.toLowerCase().split("(")[0].trim()));if(r){let[o,s]=r,l=s[0],u=s[1];this.currentLocation.lat=l,this.currentLocation.lng=u,this.currentLocation.address=`${o}, Baguio City, Philippines`,this.marker.setLatLng([l,u]),this.map.flyTo([l,u],15,{duration:.8})}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-interactive-location-picker"]],viewQuery:function(t,i){if(t&1&&ad(poe,7),t&2){let r;dc(r=hc())&&(i.mapContainer=r.first)}},inputs:{defaultLocation:"defaultLocation",barangayInput:"barangayInput",streetInput:"streetInput"},outputs:{locationSelected:"locationSelected"},decls:26,vars:12,consts:[["mapContainer",""],[1,"location-picker-container"],[1,"search-bar-wrapper"],["type","text","placeholder","Search for streets, barangays, or landmarks in Baguio City...",1,"location-search-input",3,"ngModelChange","input","focus","ngModel","disabled"],["title","Search location in Baguio City",1,"search-btn",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["class","spinner",4,"ngIf"],[1,"search-help-text"],["class","search-suggestions",4,"ngIf"],[1,"map-wrapper"],["class","outside-baguio-warning",4,"ngIf"],[1,"map-container"],[1,"pin-instruction"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"],[1,"address-section"],["class","address-display",4,"ngIf"],["class","location-confirmed-message",4,"ngIf"],["type","button","title","Save this location to the form fields",1,"confirm-location-btn",3,"click","disabled"],["points","20 6 9 17 4 12"],[1,"spinner"],[1,"search-suggestions"],[1,"suggestions-header"],["title","Close suggestions",1,"close-suggestions",3,"click"],["class","suggestion-item",3,"click",4,"ngFor","ngForOf"],[1,"suggestion-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"],[1,"suggestion-content"],[1,"outside-baguio-warning"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],[1,"address-display"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"location-confirmed-message"]],template:function(t,i){if(t&1){let r=ve();b(0,"div",1)(1,"div",2)(2,"input",3),jt("ngModelChange",function(s){return q(r),Kt(i.searchQuery,s)||(i.searchQuery=s),G(s)}),ee("input",function(){return q(r),G(i.onSearchInput())})("focus",function(){return q(r),G(i.onSearchFocus())}),w(),b(3,"button",4),ee("click",function(){return q(r),G(i.searchLocation())}),re(),b(4,"svg",5),oe(5,"circle",6)(6,"path",7),w()(),ie(7,goe,1,0,"div",8),w(),_e(),b(8,"p",9),I(9," Type to search and select from suggestions below, or click on the map "),w(),ie(10,_oe,7,1,"div",10),b(11,"div",11),ie(12,voe,5,0,"div",12),oe(13,"div",13,0),b(15,"div",14),re(),b(16,"svg",15),oe(17,"path",16),w(),I(18," Click to drop pin \u2022 Drag to move "),w()(),_e(),b(19,"div",17),ie(20,yoe,6,1,"div",18)(21,boe,5,0,"div",19),b(22,"button",20),ee("click",function(){return q(r),G(i.confirmLocation())}),re(),b(23,"svg",5),oe(24,"polyline",21),w(),I(25),w()()()}t&2&&(M(2),zt("ngModel",i.searchQuery),W("disabled",i.isLoading),M(),W("disabled",!i.searchQuery||i.isLoading),M(4),W("ngIf",i.isLoading),M(3),W("ngIf",i.searchSuggestions.length>0&&i.showSuggestions),M(2),W("ngIf",i.outsideBaguioWarning),M(8),W("ngIf",i.currentLocation.address),M(),W("ngIf",i.locationConfirmed),M(),We("confirmed",i.locationConfirmed),W("disabled",!i.isLocationValid()),M(3),Te(" ",i.locationConfirmed?"Location Saved":"Save Location to Form"," "))},dependencies:[Tt,ai,gn,Bn,gr,Yr,Ar],styles:[".location-picker-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;background:#fff;padding:20px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 2px 8px #0000001a;box-sizing:border-box}@media (max-width: 480px){.location-picker-container[_ngcontent-%COMP%]{padding:16px 12px;gap:12px;border-radius:8px}}.search-bar-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;gap:8px;align-items:center;flex-wrap:wrap}@media (max-width: 480px){.search-bar-wrapper[_ngcontent-%COMP%]{gap:6px;flex-direction:column}}.location-search-input[_ngcontent-%COMP%]{flex:1;min-width:200px;padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;font-size:16px;background:#f8f9fa;color:#1a1a1a;transition:all .3s ease;font-family:inherit;box-sizing:border-box;min-height:44px}@media (max-width: 480px){.location-search-input[_ngcontent-%COMP%]{min-width:100%;width:100%;font-size:16px}}.location-search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 3px #667eea1a}.location-search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.search-btn[_ngcontent-%COMP%]{padding:10px 14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:transform .2s ease;display:flex;align-items:center;justify-content:center;min-height:44px;touch-action:manipulation}@media (max-width: 480px){.search-btn[_ngcontent-%COMP%]{width:100%}}.search-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.search-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px)}.search-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.search-help-text[_ngcontent-%COMP%]{font-size:.85rem;color:#666;margin:-8px 0 0;padding:0 4px}@media (max-width: 480px){.search-help-text[_ngcontent-%COMP%]{font-size:.75rem;margin:-4px 0 0}}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #e0e0e0;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.search-suggestions[_ngcontent-%COMP%]{position:relative;width:100%;max-height:250px;overflow-y:auto;-webkit-overflow-scrolling:touch;background:#fff;border:2px solid #667eea;border-radius:10px;box-shadow:0 8px 24px #0003;z-index:1000;margin-bottom:8px}.suggestions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-weight:600;font-size:.9rem;border-radius:8px 8px 0 0;position:sticky;top:0;z-index:10}.close-suggestions[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;cursor:pointer;padding:4px 8px;border-radius:4px;font-size:1rem;line-height:1;transition:background .2s ease}.close-suggestions[_ngcontent-%COMP%]:hover{background:#ffffff4d}.suggestion-item[_ngcontent-%COMP%]{padding:12px 14px;cursor:pointer;border-bottom:1px solid #f0f0f0;transition:background .2s ease;display:flex;align-items:flex-start;gap:10px}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-item[_ngcontent-%COMP%]:hover{background:#f5f7ff}.suggestion-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#667eea;flex-shrink:0;margin-top:2px}.suggestion-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.suggestion-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.95rem;color:#1a1a1a}.suggestion-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;color:#999}.map-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:8px}.outside-baguio-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 16px;background:linear-gradient(135deg,#fff3cd,#ffeeba);border:2px solid #ffc107;border-radius:10px;color:#856404;font-size:.9rem;font-weight:500;animation:_ngcontent-%COMP%_warningSlideIn .3s ease-out;box-shadow:0 4px 12px #ffc1074d}.outside-baguio-warning[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#e67e22;flex-shrink:0}@keyframes _ngcontent-%COMP%_warningSlideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.map-container[_ngcontent-%COMP%]{width:100%;height:320px;border-radius:8px;border:2px solid #1a2a5e;overflow:hidden;background:#f0f0f0;cursor:crosshair}.map-container[_ngcontent-%COMP%]   .leaflet-marker-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.map-container[_ngcontent-%COMP%]   .leaflet-popup-content-wrapper[_ngcontent-%COMP%]{background:#1a2a5e;color:#fff;border-radius:8px;font-weight:600}.map-container[_ngcontent-%COMP%]   .leaflet-popup-tip[_ngcontent-%COMP%]{background:#1a2a5e}.pin-instruction[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.85rem;color:#28a745;padding:10px 14px;background:#28a7451a;border-radius:8px;border:1px solid rgba(40,167,69,.2);font-weight:500}.address-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.address-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 14px;background:linear-gradient(135deg,#f0f8ff,#e8f4fd);border:1px solid #d0e8ff;border-radius:8px;font-size:.95rem;color:#1a2a5e;font-weight:500}.address-display[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;flex-shrink:0}.location-confirmed-message[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;background:#d4edda;border:1px solid #28a745;border-radius:6px;color:#155724;font-size:.85rem;font-weight:600;animation:_ngcontent-%COMP%_confirmSlideIn .3s ease-out}.location-confirmed-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#28a745;flex-shrink:0;width:16px;height:16px}@keyframes _ngcontent-%COMP%_confirmSlideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.confirm-location-btn[_ngcontent-%COMP%]{padding:14px 24px;background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 2px 8px #28a74533}.confirm-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #28a74566}.confirm-location-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.confirm-location-btn.confirmed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#155724,#28a745);box-shadow:0 2px 8px #1557244d}.confirm-location-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}@media (max-width: 768px){.location-picker-container[_ngcontent-%COMP%]{padding:16px;gap:14px}.search-bar-wrapper[_ngcontent-%COMP%]{flex-direction:row}.location-search-input[_ngcontent-%COMP%]{min-width:0;padding:10px 12px;font-size:.9rem}.search-btn[_ngcontent-%COMP%]{padding:10px 12px}.search-suggestions[_ngcontent-%COMP%]{max-height:200px}.suggestion-item[_ngcontent-%COMP%]{padding:10px}.map-container[_ngcontent-%COMP%]{height:280px}}@media (max-width: 480px){.location-picker-container[_ngcontent-%COMP%]{padding:12px;gap:12px}.location-search-input[_ngcontent-%COMP%]{padding:10px;font-size:.85rem}.search-btn[_ngcontent-%COMP%]{padding:8px 10px}.map-container[_ngcontent-%COMP%]{height:220px}.suggestion-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.85rem}.suggestion-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}.pin-instruction[_ngcontent-%COMP%]{font-size:.8rem;padding:8px 12px}.address-display[_ngcontent-%COMP%]{font-size:.85rem;padding:10px 12px}}"]})};var woe=["reportFormContainer"],xoe=()=>({lat:16.4023,lng:120.5961});function Coe(n,e){if(n&1&&(b(0,"div",54),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.successMessage," ")}}function Eoe(n,e){if(n&1&&(b(0,"div",55),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.errorMessage," ")}}function Ioe(n,e){if(n&1&&(b(0,"span",56),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.validationErrors.fullName," ")}}function Poe(n,e){if(n&1&&(b(0,"span",57),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.validationErrors.email," ")}}function Toe(n,e){if(n&1&&(b(0,"span",58),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.validationErrors.description," ")}}function Soe(n,e){if(n&1){let t=ve();b(0,"div",59)(1,"app-interactive-location-picker",60),ee("locationSelected",function(r){q(t);let o=B(2);return G(o.onMapLocationSelected(r))}),w()()}if(n&2){let t=B(2);M(),W("defaultLocation",t.location||Zh(3,xoe))("barangayInput",t.barangay)("streetInput",t.street)}}function Moe(n,e){if(n&1&&(b(0,"span",61),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.validationErrors.location," ")}}function Ooe(n,e){if(n&1){let t=ve();b(0,"li",65),ee("click",function(){let r=q(t).$implicit,o=B(3);return G(o.selectBarangay(r))}),I(1),w()}if(n&2){let t=e.$implicit;M(),Te(" ",t," ")}}function Aoe(n,e){if(n&1&&(b(0,"li",66),I(1),w()),n&2){let t=B(3);M(),Te(" + ",t.filteredBarangays.length-8," more results ")}}function Doe(n,e){if(n&1){let t=ve();b(0,"ul",62),ee("mousedown",function(r){return q(t),G(r.preventDefault())}),ie(1,Ooe,2,1,"li",63)(2,Aoe,2,1,"li",64),w()}if(n&2){let t=B(2);M(),W("ngForOf",t.filteredBarangays.slice(0,8)),M(),W("ngIf",t.filteredBarangays.length>8)}}function koe(n,e){if(n&1&&(b(0,"span",67),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.validationErrors.barangay," ")}}function Roe(n,e){if(n&1&&(b(0,"span",68),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.validationErrors.street," ")}}function Noe(n,e){if(n&1&&(b(0,"div",72),oe(1,"img",73),w()),n&2){let t=B(3);M(),W("src",t.proofImageUrl,xn)}}function Loe(n,e){if(n&1&&(b(0,"div",69)(1,"p",70),I(2," Selected file: "),b(3,"strong"),I(4),w()(),ie(5,Noe,2,1,"div",71),w()),n&2){let t=B(2);M(4),ue(t.proofImageFileName),M(),W("ngIf",t.proofImageUrl)}}function Foe(n,e){if(n&1){let t=ve();pt(0),b(1,"form",7,2),ee("ngSubmit",function(){q(t);let r=B();return G(r.onSubmit())}),ie(3,Coe,2,1,"div",8)(4,Eoe,2,1,"div",9),b(5,"fieldset",10)(6,"legend",11),I(7,"Reporter Information"),w(),b(8,"div",12)(9,"label",13),I(10,"Full Name *"),w(),b(11,"input",14),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.fullName,r)||(o.fullName=r),G(r)}),w(),ie(12,Ioe,2,1,"span",15),w(),b(13,"div",12)(14,"label",16),I(15,"Email Address *"),w(),b(16,"input",17),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.email,r)||(o.email=r),G(r)}),w(),ie(17,Poe,2,1,"span",18),w()(),b(18,"fieldset",10)(19,"legend",11),I(20,"Safety Alert Details"),w(),b(21,"div",12)(22,"label",19),I(23,"Describe the Safety Concern *"),w(),b(24,"textarea",20),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.description,r)||(o.description=r),G(r)}),ee("blur",function(){q(t);let r=B();return G(r.saveFormProgress())}),w(),ie(25,Toe,2,1,"span",21),w(),b(26,"div",12)(27,"label",22),I(28,"Priority Level *"),w(),b(29,"select",23),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.priority,r)||(o.priority=r),G(r)}),ee("blur",function(){q(t);let r=B();return G(r.saveFormProgress())}),b(30,"option",24),I(31,"Info - General information, no immediate concern"),w(),b(32,"option",25),I(33,"Alert - Moderate concern, needs attention"),w(),b(34,"option",26),I(35,"Urgent - Requires immediate action"),w()()()(),b(36,"fieldset",10)(37,"legend",11),I(38,"Location Information"),w(),b(39,"p",27),I(40,"Baguio City, Philippines"),w(),b(41,"div",28)(42,"label",29),I(43,"Pin Location on Map"),w(),b(44,"p",30),I(45," Click on the map to mark the exact incident location. The address fields below will update automatically. "),w(),b(46,"button",31),ee("click",function(){q(t);let r=B();return G(r.toggleInteractiveMap())}),re(),b(47,"svg",32),oe(48,"path",33)(49,"circle",34),w(),I(50),w(),ie(51,Soe,2,4,"div",35)(52,Moe,2,1,"span",36),w(),_e(),b(53,"div",12)(54,"label",37),I(55,"City"),w(),b(56,"input",38),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.city,r)||(o.city=r),G(r)}),w()(),b(57,"div",39)(58,"label",40),I(59,"Barangay *"),w(),b(60,"input",41),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.barangay,r)||(o.barangay=r),G(r)}),ee("input",function(r){q(t);let o=B();return G(o.filterBarangays(r))})("focus",function(){q(t);let r=B();return G(r.showBarangaySuggestions=!0)})("blur",function(){q(t);let r=B();return r.onBarangayBlur(),G(r.hideBarangaySuggestions())}),w(),ie(61,Doe,3,2,"ul",42)(62,koe,2,1,"span",43),w(),b(63,"div",12)(64,"label",44),I(65,"Street / Purok *"),w(),b(66,"input",45),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.street,r)||(o.street=r),G(r)}),ee("blur",function(){q(t);let r=B();return G(r.saveFormProgress())})("input",function(){q(t);let r=B();return G(r.onStreetChange())}),w(),ie(67,Roe,2,1,"span",46),w(),b(68,"div",12)(69,"label",47),I(70,"Landmark or Nearby Location (Optional)"),w(),b(71,"input",48),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.landmark,r)||(o.landmark=r),G(r)}),ee("blur",function(){q(t);let r=B();return G(r.saveFormProgress())}),w()()(),b(72,"fieldset",10)(73,"legend",11),I(74,"Evidence"),w(),b(75,"div",12)(76,"label",49),I(77,"Photo of Incident (Optional)"),w(),b(78,"input",50),ee("change",function(r){q(t);let o=B();return G(o.onProofImageSelected(r))}),w(),b(79,"p",51),I(80," Upload a clear photo of the incident. Maximum 5MB. This helps with verification. "),w(),ie(81,Loe,6,2,"div",52),w()(),b(82,"button",53),I(83),w()(),gt()}if(n&2){let t=B();M(3),W("ngIf",t.successMessage),M(),W("ngIf",t.errorMessage),M(7),zt("ngModel",t.fullName),rn("aria-invalid",t.validationErrors.fullName?"true":null)("aria-describedby",t.validationErrors.fullName?"fullName-error":null),M(),W("ngIf",t.validationErrors.fullName),M(4),zt("ngModel",t.email),rn("aria-invalid",t.validationErrors.email?"true":null)("aria-describedby",t.validationErrors.email?"email-error":null),M(),W("ngIf",t.validationErrors.email),M(7),zt("ngModel",t.description),rn("aria-invalid",t.validationErrors.description?"true":null)("aria-describedby",t.validationErrors.description?"description-error":null),M(),W("ngIf",t.validationErrors.description),M(4),zt("ngModel",t.priority),M(21),Te(" ",t.showInteractiveMap?"Hide Location Map":"Select Location on Map"," "),M(),W("ngIf",t.showInteractiveMap),M(),W("ngIf",t.validationErrors.location),M(4),zt("ngModel",t.city),M(4),zt("ngModel",t.barangay),rn("aria-controls",t.showBarangaySuggestions&&t.filteredBarangays.length>0?"barangay-suggestions":null)("aria-invalid",t.validationErrors.barangay?"true":null)("aria-describedby",t.validationErrors.barangay?"barangay-error":null),M(),W("ngIf",t.showBarangaySuggestions&&t.filteredBarangays.length>0),M(),W("ngIf",t.validationErrors.barangay),M(4),zt("ngModel",t.street),rn("aria-invalid",t.validationErrors.street?"true":null)("aria-describedby",t.validationErrors.street?"street-error":null),M(),W("ngIf",t.validationErrors.street),M(4),zt("ngModel",t.landmark),M(10),W("ngIf",t.proofImageFileName),M(),W("disabled",t.isLoading),rn("aria-busy",t.isLoading),M(),Te(" ",t.isLoading?"Submitting Alert...":"Submit Safety Alert"," ")}}function Voe(n,e){n&1&&(b(0,"div",74)(1,"div",75)(2,"h3"),I(3,"Authentication Required"),w(),b(4,"p",76),I(5," You need to create an account or sign in before you can submit a safety alert. "),w(),b(6,"p",77),I(7," Creating an account helps us verify reports and keep the community safe. "),w(),b(8,"div",78)(9,"a",79),I(10,"Sign In"),w(),b(11,"span",80),I(12,"or"),w(),b(13,"a",81),I(14,"Sign Up"),w()()()())}var bx=class n{reportService=$(Vn);authService=$(Dn);router=$(Rt);animationService=$(jo);toastService=$(Ni);reportFormContainer;description="";street="";barangay="";landmark="";city="Baguio City";priority="medium";fullName="";email="";idImageUrl=null;idImageFile=null;idImageFileName=null;proofImageUrl=null;proofImageFile=null;proofImageFileName=null;location=null;showInteractiveMap=!1;errorMessage=null;successMessage=null;isLoading=!1;validationErrors={};baguioBarangays=["A. Bonifacio-Caguioa-Rimando (ABCR)","Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)","Alfonso Tabora","Ambiong","Andres Bonifacio (Lower Bokawkan)","Apugan-Loakan","Asin Road","Atok Trail","Aurora Hill Proper (Malvar-Sgt. Floresca)","Aurora Hill, North Central","Aurora Hill, South Central","Bagong Lipunan (Market Area)","Baguio Dairy Farm","Bakakeng Central","Bakakeng North","Bal-Marcoville (Marcoville)","Balsigan","Bayan Park East","Bayan Park Village","Bayan Park West (Bayan Park)","BGH Compound","Brookside","Brookspoint","Cabinet Hill-Teacher's Camp","Camdas Subdivision","Camp 7","Camp 8","Camp Allen","Campo Filipino","City Camp Central","City Camp Proper","Country Club Village","Cresencia Village","Dagisitan","Dagsian, Lower","Dagsian, Upper","Dizon Subdivision","Dominican Hill-Mirador","Dontogan","DPS Area","Engineers' Hill","Fairview Village","Ferdinand (Happy Homes-Campo Sioco)","Fort del Pilar","Gabriel Silang","General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)","General Luna, Lower","General Luna, Upper","Gibraltar","Greenwater Village","Guisad Central","Guisad Sorong","Happy Hollow","Happy Homes (Happy Homes-Lucban)","Harrison-Claudio Carantes","Hillside","Holy Ghost Extension","Holy Ghost Proper","Honeymoon (Honeymoon-Holy Ghost)","Imelda R. Marcos (La Salle)","Imelda Village","Irisan","Kabayanihan","Kagitingan","Kayang Extension","Kayang-Hilltop","Kias","Legarda-Burnham-Kisad","Liwanag-Loakan","Loakan Proper","Lopez Jaena","Lourdes Subdivision Extension","Lourdes Subdivision, Lower","Lourdes Subdivision, Proper","Lualhati","Lucnab","Magsaysay Private Road","Magsaysay, Lower","Magsaysay, Upper","Malcolm Square-Perfecto (Jose Abad Santos)","Manuel A. Roxas","Market Subdivision, Upper","Middle Quezon Hill Subdivision (Quezon Hill Middle)","Military Cut-off","Mines View Park","Modern Site, East","Modern Site, West","MRR-Queen of Peace","New Lucban","Outlook Drive","Pacdal","Padre Burgos","Padre Zamora","Palma-Urbano (Cari\xF1o-Palma)","Phil-Am","Pinget","Pinsao Pilot Project","Pinsao Proper","Poliwes","Pucsusan","Quezon Hill Proper","Quezon Hill, Upper","Quirino Hill, East","Quirino Hill, Lower","Quirino Hill, Middle","Quirino Hill, West","Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)","Rizal Monument Area","Rock Quarry, Lower","Rock Quarry, Middle","Rock Quarry, Upper","Salud Mitra","San Antonio Village","San Luis Village","San Roque Village","San Vicente","Sanitary Camp, North","Sanitary Camp, South","Santa Escolastica","Santo Rosario","Santo Tomas Proper","Santo Tomas School Area","Scout Barrio","Session Road Area","Slaughter House Area (Santo Ni\xF1o Slaughter)","SLU-SVP Housing Village","South Drive","Teodora Alonzo","Trancoville","Upper General Luna","Victoria Village","Websters Subdivision"];filteredBarangays=[...this.baguioBarangays];showBarangaySuggestions=!1;ngOnInit(){this.authService.currentUser$.subscribe(t=>{t&&(this.email=t.email||"",this.fullName=t.displayName||"")});let e=sessionStorage.getItem("reportFormData");if(e){let t=JSON.parse(e);this.description=t.description||"",this.street=t.street||"",this.barangay=t.barangay||"",this.landmark=t.landmark||"",this.priority=t.priority||"medium"}}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.showBarangaySuggestions=!0,!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.barangay=e,this.showBarangaySuggestions=!1,this.filteredBarangays=[...this.baguioBarangays],this.saveFormProgress()}onStreetChange(){this.saveFormProgress()}hideBarangaySuggestions(){setTimeout(()=>{this.showBarangaySuggestions=!1,this.saveFormProgress()},150)}onBarangayBlur(){return O(this,null,function*(){let e=(this.barangay||"").trim();if(e&&!this.location)try{let t=yield this.geocodeBarangay(e);t&&(this.location=t,this.saveFormProgress())}catch(t){console.warn("Failed to geocode barangay on blur: - report.ts:262",t)}})}onMapLocationSelected(e){this.location={lat:e.lat,lng:e.lng},this.getAddressFromCoordinates(e.lat,e.lng),this.saveFormProgress(),console.log("Location updated from map: - report.ts:274",this.location)}toggleInteractiveMap(){this.showInteractiveMap=!this.showInteractiveMap}getAddressFromCoordinates(e,t){return O(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,s=o.road||o.street||o.neighbourhood||"";s&&(this.street=s),(o.amenity||o.building||o.shop)&&(this.landmark=o.amenity||o.building||o.shop);let l=this.findNearestBarangay(e,t);l&&(this.barangay=l)}}catch(i){console.warn("Could not fetch address details: - report.ts:311",i);let r=this.findNearestBarangay(e,t);r&&(this.barangay=r)}})}findNearestBarangay(e,t){let i=Zr,r=null,o=1/0;for(let[s,[l,u]]of Object.entries(i)){let f=this.haversineDistance(e,t,l,u);f<o&&(o=f,r=s)}return r}haversineDistance(e,t,i,r){let s=(i-e)*Math.PI/180,l=(r-t)*Math.PI/180,u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}geocodeBarangay(e){return O(this,null,function*(){let t=Zr,i=e.trim(),r=t[i];if(r)return{lat:r[0],lng:r[1]};let o=Object.entries(t).find(([s])=>s.toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes(s.toLowerCase()));if(o){let s=o[1];return{lat:s[0],lng:s[1]}}return null})}onProofImageSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.errorMessage="Proof image must be less than 5MB.",this.toastService.error("Proof image must be less than 5MB.");return}this.proofImageFile=t,this.proofImageFileName=t.name;let i=new FileReader;i.onload=r=>{this.proofImageUrl=r.target?.result,this.successMessage="Proof image uploaded successfully!",this.toastService.success("Proof image uploaded successfully!"),setTimeout(()=>{this.successMessage==="Proof image uploaded successfully!"&&(this.successMessage=null)},3e3)},i.readAsDataURL(t)}}onIdImageSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.errorMessage="ID image must be less than 5MB.",this.toastService.error("ID image must be less than 5MB.");return}this.idImageFile=t,this.idImageFileName=t.name;let i=new FileReader;i.onload=r=>{this.idImageUrl=r.target?.result,this.successMessage="ID image uploaded successfully!",this.toastService.success("ID image uploaded successfully!"),setTimeout(()=>{this.successMessage==="ID image uploaded successfully!"&&(this.successMessage=null)},3e3)},i.readAsDataURL(t)}}validateForm(){return this.validationErrors={},this.description.trim()||(this.validationErrors.description="Incident description is required."),this.fullName.trim()||(this.validationErrors.fullName="Full name is required."),(!this.email.trim()||!this.isValidEmail(this.email))&&(this.validationErrors.email="Valid email address is required."),this.street.trim()||(this.validationErrors.street="Street address is required."),this.barangay.trim()||(this.validationErrors.barangay="Barangay is required."),Object.keys(this.validationErrors).length===0}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}onSubmit(){return O(this,null,function*(){if(this.errorMessage=null,this.successMessage=null,!this.validateForm()){this.toastService.warning("Please fill in all required fields.");return}this.isLoading=!0;try{let e=yield ol(this.authService.currentUser$);if(!e){this.errorMessage="You must be logged in to submit a report. Redirecting to login...",this.toastService.error("You must be logged in to submit a report."),setTimeout(()=>this.router.navigate(["/login"]),900),this.isLoading=!1;return}let t={reporterId:e.uid||e.email||"unknown",reporterName:this.fullName.trim(),reporterEmail:this.email.trim(),description:this.description.trim(),street:this.street.trim(),barangay:this.barangay.trim(),landmark:this.landmark.trim()||void 0,city:this.city,priority:this.priority,location:this.location||void 0,timestamp:new Date().toISOString(),imageUrl:this.proofImageUrl||void 0,idImageUrl:this.idImageUrl||void 0};yield ol(this.reportService.submitReport(t)),this.successMessage="Report submitted successfully and is awaiting admin approval.",this.toastService.success("Safety report submitted successfully! Awaiting admin approval.");let i=()=>{this.reportFormContainer&&this.reportFormContainer.nativeElement.scrollIntoView({behavior:"smooth",block:"start"}),window.scrollTo({top:0,behavior:"smooth",left:0})};i(),setTimeout(()=>{this.clearForm(),sessionStorage.removeItem("reportFormData"),setTimeout(()=>{i(),document.documentElement.scrollTop=0,document.body.scrollTop=0},50)},2e3)}catch(e){console.error("Report submission failed: - report.ts:539",e),this.errorMessage="Submission failed. Please try again.",this.toastService.error("Submission failed. Please try again.")}finally{this.isLoading=!1}})}clearForm(){this.description="",this.street="",this.barangay="",this.landmark="",this.priority="medium",this.proofImageUrl=null,this.proofImageFile=null,this.proofImageFileName=null,this.idImageUrl=null,this.idImageFile=null,this.idImageFileName=null,this.location=null}saveFormProgress(){let e={description:this.description,street:this.street,barangay:this.barangay,landmark:this.landmark,priority:this.priority};sessionStorage.setItem("reportFormData",JSON.stringify(e))}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}ngOnDestroy(){this.animationService.destroyScrollObserver()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-report"]],viewQuery:function(t,i){if(t&1&&ad(woe,5),t&2){let r;dc(r=hc())&&(i.reportFormContainer=r.first)}},decls:11,vars:4,consts:[["reportFormContainer",""],["notLogged",""],["reportForm","ngForm"],["role","main",1,"report-page","scroll-reveal","animate-on-load"],["role","region","aria-labelledby","report-title",1,"report-container"],["id","report-title"],[4,"ngIf","ngIfElse"],["aria-describedby","form-status",3,"ngSubmit"],["class","message success","role","status","aria-live","polite","id","form-status",4,"ngIf"],["class","message error","role","alert","aria-live","assertive","id","form-status",4,"ngIf"],[1,"form-section","scroll-reveal","animate-on-load"],[1,"section-title"],[1,"form-group"],["for","fullName"],["id","fullName","type","text","name","fullName","required","","placeholder","Enter your full name","aria-required","true","autocomplete","name",3,"ngModelChange","ngModel"],["class","error-text","id","fullName-error","role","alert",4,"ngIf"],["for","email"],["id","email","type","email","name","email","required","","placeholder","your.email@example.com","aria-required","true","autocomplete","email",3,"ngModelChange","ngModel"],["class","error-text","id","email-error","role","alert",4,"ngIf"],["for","description"],["id","description","name","description","rows","5","required","","placeholder","Describe what happened in detail...","aria-required","true",3,"ngModelChange","blur","ngModel"],["class","error-text","id","description-error","role","alert",4,"ngIf"],["for","priority"],["id","priority","name","priority","required","","aria-required","true",3,"ngModelChange","blur","ngModel"],["value","low"],["value","medium"],["value","high"],[1,"hierarchy-note"],[1,"form-group","location-info"],["id","map-label"],["id","map-help",1,"help-text"],["type","button","aria-describedby","map-help",1,"map-picker-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["class","interactive-map-wrapper","role","application","aria-label","Interactive location picker map",4,"ngIf"],["class","error-text","role","alert",4,"ngIf"],["for","city"],["id","city","type","text","name","city","readonly","","aria-readonly","true",1,"readonly-field",3,"ngModelChange","ngModel"],[1,"form-group","barangay-group"],["for","barangay"],["id","barangay","type","text","name","barangay","required","","placeholder","Start typing to search from 128 barangays...","autocomplete","off","aria-required","true","role","combobox","aria-expanded","false","aria-autocomplete","list",3,"ngModelChange","input","focus","blur","ngModel"],["class","barangay-suggestions","id","barangay-suggestions","role","listbox","aria-label","Barangay suggestions",3,"mousedown",4,"ngIf"],["class","error-text","id","barangay-error","role","alert",4,"ngIf"],["for","street"],["id","street","type","text","name","street","required","","placeholder","e.g., Purok 3, Session Road","aria-required","true",3,"ngModelChange","blur","input","ngModel"],["class","error-text","id","street-error","role","alert",4,"ngIf"],["for","landmark"],["id","landmark","type","text","name","landmark","placeholder","e.g., Near Burnham Park, In front of SM Baguio",3,"ngModelChange","blur","ngModel"],["for","proofImage"],["id","proofImage","type","file","name","proofImage","accept","image/*","aria-describedby","proofImage-help",3,"change"],["id","proofImage-help",1,"help-text"],["class","image-preview-container",4,"ngIf"],["type","submit",1,"submit-btn",3,"disabled"],["role","status","aria-live","polite","id","form-status",1,"message","success"],["role","alert","aria-live","assertive","id","form-status",1,"message","error"],["id","fullName-error","role","alert",1,"error-text"],["id","email-error","role","alert",1,"error-text"],["id","description-error","role","alert",1,"error-text"],["role","application","aria-label","Interactive location picker map",1,"interactive-map-wrapper"],[3,"locationSelected","defaultLocation","barangayInput","streetInput"],["role","alert",1,"error-text"],["id","barangay-suggestions","role","listbox","aria-label","Barangay suggestions",1,"barangay-suggestions",3,"mousedown"],["class","suggestion-item","role","option",3,"click",4,"ngFor","ngForOf"],["class","suggestion-more","role","status",4,"ngIf"],["role","option",1,"suggestion-item",3,"click"],["role","status",1,"suggestion-more"],["id","barangay-error","role","alert",1,"error-text"],["id","street-error","role","alert",1,"error-text"],[1,"image-preview-container"],[1,"file-name"],["class","image-preview",4,"ngIf"],[1,"image-preview"],["alt","Preview of uploaded incident photo",3,"src"],["role","alert",1,"not-logged"],[1,"auth-prompt-box"],[1,"login-warning"],[1,"help-text"],["role","group","aria-label","Authentication options",1,"action-row"],["routerLink","/login",1,"btn","login-btn"],["aria-hidden","true",1,"or-text"],["routerLink","/login",1,"btn","signup-btn"]],template:function(t,i){if(t&1&&(b(0,"main",3,0)(2,"div",4)(3,"h2",5),I(4,"Submit a Safety Alert"),w(),b(5,"p"),I(6,"Report safety concerns in your neighborhood. All fields marked with * are required."),w(),ie(7,Foe,84,34,"ng-container",6),Me(8,"async"),ie(9,Voe,15,0,"ng-template",null,1,Qt),w()()),t&2){let r=Pt(10);M(7),W("ngIf",$e(8,2,i.authService.currentUser$))("ngIfElse",r)}},dependencies:[Tt,ai,gn,Bn,Cp,iu,ru,gr,Da,Yr,xp,Zd,Ar,Yd,po,ar,Ep,An],styles:[".report-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#1a2a5e,#2d4a8e,#d4a84b);background-size:cover;background-position:center;background-attachment:fixed;display:flex;align-items:flex-start;justify-content:center;padding:40px 20px}@media (max-width: 768px){.report-page[_ngcontent-%COMP%]{padding:20px 15px}}@media (max-width: 480px){.report-page[_ngcontent-%COMP%]{padding:15px 10px}}.report-container[_ngcontent-%COMP%]{max-width:1200px;width:95%;margin:0 auto;padding:40px 48px;background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d,0 0 1px #ffffff80 inset;border:1px solid rgba(255,255,255,.6);color:#1a1a1a;animation:_ngcontent-%COMP%_containerFadeUp .7s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_containerFadeUp{0%{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 1280px){.report-container[_ngcontent-%COMP%]{max-width:1000px;width:92%;padding:36px 40px}}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]{max-width:100%;width:95%;padding:28px 20px;border-radius:12px}}@media (max-width: 480px){.report-container[_ngcontent-%COMP%]{width:98%;padding:20px 15px;border-radius:10px}}.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:2rem;font-weight:800;margin-bottom:10px;text-align:center;letter-spacing:-.5px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}}@media (max-width: 480px){.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}}.report-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px;font-size:.9rem;line-height:1.5;text-align:center;font-weight:400}@media (max-width: 480px){.report-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:20px;font-size:.85rem}}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}@media (max-width: 480px){form[_ngcontent-%COMP%]{gap:18px}}.form-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:25px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #0000000f;animation:_ngcontent-%COMP%_slideInUp .6s cubic-bezier(.4,0,.2,1) backwards}.form-section[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.form-section[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.form-section[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.form-section[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.form-section[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.form-section[_ngcontent-%COMP%]{padding:18px 15px}}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0 0 20px;padding-bottom:12px;border-bottom:2px solid #1a2a5e;letter-spacing:-.5px}@media (max-width: 480px){.section-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:15px}}.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:.9rem;letter-spacing:0px}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;box-sizing:border-box;font-size:16px;font-family:inherit;transition:all .3s cubic-bezier(.4,0,.2,1);background:#f8f9fa;color:#333;min-height:44px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px 14px}}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#aaa}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:120px}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding:12px;border:2px solid #e0e0e0;border-radius:8px;width:100%;box-sizing:border-box;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);background:#f8f9fa;color:#666;font-size:.95rem}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.help-text[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin-top:8px;font-style:normal}.error-text[_ngcontent-%COMP%]{display:block;color:#ff6b6b;font-size:.85rem;margin-top:6px;font-weight:600}.form-group[_ngcontent-%COMP%]{position:relative}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;background:#fff;border:2px solid #1a2a5e;border-top:none;border-radius:0 0 8px 8px;max-height:350px;overflow-y:auto;overflow-x:hidden;width:100%;box-shadow:0 8px 24px #1a2a5e26;z-index:1000;color:#333;top:100%;left:0;right:0}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1a2a5e;border-radius:4px}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#2a3f7a}.suggestion-item[_ngcontent-%COMP%]{padding:12px 15px;cursor:pointer;transition:all .15s ease;border-bottom:1px solid #e0e0e0;font-size:.95rem;line-height:1.4;white-space:normal;word-wrap:break-word;-webkit-user-select:none;user-select:none}.suggestion-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#1a2a5e;padding-left:18px}.suggestion-item[_ngcontent-%COMP%]:active{background-color:#e8ebf7;color:#1a2a5e}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-more[_ngcontent-%COMP%]{padding:10px 15px;background:#f0f4f8;color:#6c757d;font-style:italic;font-size:.85rem;text-align:center;border-top:1px solid #e0e0e0}.readonly-field[_ngcontent-%COMP%]{background-color:#e9ecef!important;color:#6c757d!important;cursor:not-allowed}.hierarchy-note[_ngcontent-%COMP%]{color:#1a2a5e;font-size:.9rem;font-weight:600;margin-bottom:16px;padding:10px 14px;background:linear-gradient(135deg,#d4a84b1f,#d4a84b0d);border-left:3px solid #d4a84b;border-radius:4px}.barangay-group[_ngcontent-%COMP%]{margin-bottom:16px}.location-info[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 2px 8px #0000000f}.get-location-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);margin-bottom:15px;box-shadow:0 8px 20px #1a2a5e4d;text-transform:uppercase;letter-spacing:.3px}.get-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px);box-shadow:0 12px 30px #1a2a5e66}.get-location-btn[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed;opacity:.6;transform:none;box-shadow:none}.map-picker-btn[_ngcontent-%COMP%]{width:100%;padding:12px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:.95rem;font-weight:600;transition:all .3s cubic-bezier(.4,0,.2,1);margin-top:15px;margin-bottom:15px;box-shadow:0 4px 12px #1a2a5e4d;display:flex;align-items:center;justify-content:center;gap:8px}.map-picker-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1a2a5e66}.map-picker-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.map-picker-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.interactive-map-wrapper[_ngcontent-%COMP%]{width:100%;margin:15px 0;animation:_ngcontent-%COMP%_slideDown .3s cubic-bezier(.4,0,.2,1)}.location-display[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:15px;border-radius:8px;margin-bottom:10px;border:2px solid #e0e0e0}.location-coords[_ngcontent-%COMP%]{margin:10px 0;color:#1a1a1a;font-size:1rem;font-weight:600;font-family:Monaco,Courier New,monospace;color:#1a2a5e}.location-accuracy[_ngcontent-%COMP%]{margin:10px 0;color:#666;font-size:.9rem}.location-error[_ngcontent-%COMP%]{background-color:#ffebee;color:#ff6b6b;padding:12px;border-radius:8px;border-left:4px solid #ff6b6b;margin-bottom:10px;font-size:.9rem}.image-preview-container[_ngcontent-%COMP%]{margin-top:15px;padding:20px;background-color:#f8f9fa;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 2px 8px #0000000f}.file-name[_ngcontent-%COMP%]{margin:0 0 15px;color:#666;font-size:.95rem;font-weight:600}.image-preview[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:12px}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:350px;width:auto;height:auto;border-radius:8px;border:1px solid #e0e0e0;box-shadow:0 8px 24px #0000001f;transition:all .3s cubic-bezier(.4,0,.2,1)}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.03);box-shadow:0 12px 32px #1a2a5e33}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:16px 14px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);margin-top:10px;box-shadow:0 8px 20px #1a2a5e4d;text-transform:uppercase;letter-spacing:.3px;min-height:48px;touch-action:manipulation}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px);box-shadow:0 12px 30px #1a2a5e66}.submit-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px);box-shadow:0 6px 16px #1a2a5e4d}.submit-btn[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed;opacity:.6;transform:none;box-shadow:none}.message[_ngcontent-%COMP%]{padding:15px 20px;margin-bottom:20px;border-radius:8px;font-weight:600;text-align:center;font-size:.95rem;animation:_ngcontent-%COMP%_slideDown .4s cubic-bezier(.4,0,.2,1);word-wrap:break-word}.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf661a,#40c0571a);color:#40c057;border:2px solid #51cf66;box-shadow:0 4px 12px #40c05733}.error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b1a,#ee5a6f1a);color:#ff6b6b;border:2px solid #ff6b6b;box-shadow:0 4px 12px #ff6b6b33}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.submit-btn[_ngcontent-%COMP%]{padding:14px 12px;font-size:.95rem;min-height:44px}.message[_ngcontent-%COMP%]{padding:12px 16px;font-size:.9rem;margin-bottom:16px}}.not-logged[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;margin-top:20px}.auth-prompt-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e1a,#d4a84b1a);border:2px solid #1a2a5e;border-radius:12px;padding:40px;max-width:600px;margin:0 auto;box-shadow:0 8px 24px #1a2a5e26}.auth-prompt-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;color:#1a2a5e;margin-bottom:15px;font-weight:800}.login-warning[_ngcontent-%COMP%]{font-size:1.15rem;color:#333;margin-bottom:10px;font-weight:600;line-height:1.5}.auth-prompt-box[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-bottom:25px;opacity:.9;line-height:1.6}.not-logged[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;align-items:center;margin-top:20px}.or-text[_ngcontent-%COMP%]{font-size:1rem;color:#856404;font-weight:600}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%], .not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]{padding:14px 30px;color:#fff;border-radius:6px;text-decoration:none;font-weight:700;border:none;cursor:pointer;transition:all .2s;font-size:1rem;display:inline-block}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{background-color:#2c5282}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background-color:#1e3a5f;transform:translateY(-2px);box-shadow:0 4px 12px #2c52824d}.not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]{background-color:#28a745}.not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]:hover{background-color:#218838;transform:translateY(-2px);box-shadow:0 4px 12px #28a7454d}.name-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.name-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:0}}@media (max-width: 768px){.report-page[_ngcontent-%COMP%]{padding:20px 15px}.report-container[_ngcontent-%COMP%]{padding:30px 20px}.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.1rem}.form-section[_ngcontent-%COMP%]{padding:20px 15px}.name-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}fieldset.form-section[_ngcontent-%COMP%]{border:none;margin:0 0 24px;padding:28px;background:#fafbfc;border-radius:14px;border:1px solid rgba(0,0,0,.06)}fieldset.form-section[_ngcontent-%COMP%]   legend.section-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:700;color:#1a2a5e;margin-bottom:20px;padding:0 8px;width:auto}.report-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible, .report-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible, .report-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .report-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible, .suggestion-item[_ngcontent-%COMP%]:focus-visible{outline:3px solid var(--wcag-focus-color, #4a90d9);outline-offset:2px}.submit-btn[_ngcontent-%COMP%], .map-picker-btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.suggestion-item[_ngcontent-%COMP%]{min-height:44px;display:flex;align-items:center}@media (prefers-contrast: high){.report-container[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:2px solid #000}.submit-btn[_ngcontent-%COMP%]{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){.report-container[_ngcontent-%COMP%], .scroll-reveal[_ngcontent-%COMP%], .animate-on-load[_ngcontent-%COMP%]{animation:none!important;transition-duration:.01ms!important}}@media print{.report-page[_ngcontent-%COMP%]{background:#fff;min-height:auto}.report-container[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #000}.map-picker-btn[_ngcontent-%COMP%], .interactive-map-wrapper[_ngcontent-%COMP%]{display:none!important}}"]})};function Boe(n,e){if(n&1&&(b(0,"div",8)(1,"h3"),I(2,"Incident Photo"),w(),oe(3,"img",13),w()),n&2){let t=B().ngIf;M(3),W("src",t.imageUrl,xn)}}function Uoe(n,e){if(n&1){let t=ve();b(0,"div",3)(1,"button",4),ee("click",function(){q(t);let r=B();return G(r.goBack())}),I(2,"\u2190 Back"),w(),b(3,"div",5)(4,"h1"),I(5),w(),b(6,"div",6),I(7),Me(8,"uppercase"),w()(),b(9,"div",7)(10,"div",8)(11,"h3"),I(12,"Location Information"),w(),b(13,"div",9)(14,"div",10)(15,"label"),I(16,"Street:"),w(),b(17,"p"),I(18),w()(),b(19,"div",10)(20,"label"),I(21,"Barangay:"),w(),b(22,"p"),I(23),w()()()(),b(24,"div",8)(25,"h3"),I(26,"Reporter Information"),w(),b(27,"div",9)(28,"div",10)(29,"label"),I(30,"Name:"),w(),b(31,"p"),I(32),w()(),b(33,"div",10)(34,"label"),I(35,"ID:"),w(),b(36,"p"),I(37),w()()()(),b(38,"div",8)(39,"h3"),I(40,"Description"),w(),b(41,"p",11),I(42),w()(),ie(43,Boe,4,1,"div",12),b(44,"div",8)(45,"h3"),I(46,"Timeline"),w(),b(47,"div",9)(48,"div",10)(49,"label"),I(50,"Reported:"),w(),b(51,"p"),I(52),Me(53,"date"),w()(),b(54,"div",10)(55,"label"),I(56,"Last Updated:"),w(),b(57,"p"),I(58),Me(59,"date"),w()()()()()()}if(n&2){let t=e.ngIf,i=B();M(5),ue(t.description),M(),cd("background-color",i.getStatusBadgeColor(t.status)),M(),Te(" ",$e(8,12,t.status)," "),M(11),ue(t.street),M(5),ue(t.barangay),M(9),ue(t.reporterName||"Anonymous"),M(5),ue(t.reporterId),M(5),ue(t.description),M(),W("ngIf",t.imageUrl),M(9),ue(ri(53,14,t.createdAt,"medium")),M(6),ue(ri(59,17,t.updatedAt,"medium"))}}function zoe(n,e){n&1&&(b(0,"div",14)(1,"p"),I(2,"Loading report details..."),w()())}var wx=class n{route=$(sr);router=$(Rt);reportService=$(Vn);reportId=this.route.snapshot.paramMap.get("id");report$=this.reportService.getAllReports().pipe(pe(e=>e.find(t=>t.id===this.reportId)));ngOnInit(){}goBack(){this.router.navigate(["/"])}getStatusBadgeColor(e){switch(e){case"approved":return"#4caf50";case"pending":return"#ff9800";case"rejected":return"#f44336";default:return"#999"}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-report-detail"]],decls:5,vars:4,consts:[["loading",""],[1,"report-detail-container"],["class","report-detail-content",4,"ngIf","ngIfElse"],[1,"report-detail-content"],[1,"back-btn",3,"click"],[1,"report-header"],[1,"status-badge"],[1,"report-body"],[1,"report-section"],[1,"info-grid"],[1,"info-item"],[1,"description-text"],["class","report-section",4,"ngIf"],["alt","Report photo",1,"report-image",3,"src"],[1,"loading"]],template:function(t,i){if(t&1&&(b(0,"div",1),ie(1,Uoe,60,20,"div",2),Me(2,"async"),ie(3,zoe,3,0,"ng-template",null,0,Qt),w()),t&2){let r=Pt(4);M(),W("ngIf",$e(2,2,i.report$))("ngIfElse",r)}},dependencies:[Tt,gn,An,mc,_s],styles:[".report-detail-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:30px;background:#fff;min-height:calc(100vh - 60px)}.report-detail-container[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f0f0f0;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:14px;font-weight:600;color:#333;margin-bottom:20px;transition:all .2s ease}.report-detail-container[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;transform:translate(-4px)}.report-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #e0e0e0}.report-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;color:#333;flex:1}.report-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;color:#fff;font-weight:600;font-size:12px;white-space:nowrap;margin-left:20px}.report-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.report-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;color:#333;font-weight:600;border-bottom:2px solid #f0f0f0;padding-bottom:8px}.report-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.report-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#888;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333;line-height:1.5;word-wrap:break-word}.report-section[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#555;line-height:1.6;background:#f9f9f9;padding:16px;border-radius:4px}.report-section[_ngcontent-%COMP%]   .report-image[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px;box-shadow:0 4px 12px #0000001a;margin-top:12px}.report-detail-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}"]})};function joe(n,e){if(n&1&&(pt(0),b(1,"small"),I(2),w(),gt()),n&2){let t=B().$implicit;M(2),ue(t.city)}}function $oe(n,e){if(n&1&&(pt(0),oe(1,"img",21),gt()),n&2){let t=B().$implicit;M(),W("src",t.imageUrl,xn)}}function Hoe(n,e){n&1&&(b(0,"span",22),I(1,"No image"),w())}function qoe(n,e){if(n&1){let t=ve();b(0,"tr")(1,"td")(2,"div",14)(3,"div"),I(4),Me(5,"date"),w(),b(6,"small"),I(7),Me(8,"date"),w()()(),b(9,"td")(10,"strong"),I(11),w()(),b(12,"td")(13,"span",15),I(14),Me(15,"uppercase"),w()(),b(16,"td")(17,"div",16)(18,"div"),I(19),w(),b(20,"small"),I(21),w(),ie(22,joe,3,1,"ng-container",8),w()(),b(23,"td")(24,"div",17)(25,"p")(26,"strong"),I(27),w()(),b(28,"small"),I(29),w()()(),b(30,"td"),ie(31,$oe,2,1,"ng-container",11)(32,Hoe,2,0,"ng-template",null,2,Qt),w(),b(34,"td",18)(35,"button",19),ee("click",function(){let r=q(t).$implicit,o=B(4);return G(o.approveReport(r.id))}),I(36," Accept "),w(),b(37,"button",20),ee("click",function(){let r=q(t).$implicit,o=B(4);return G(o.deleteReport(r.id))}),I(38,"Delete"),w()()()}if(n&2){let t=e.$implicit,i=Pt(33);rn("data-id",t.id),M(4),ue(ri(5,13,t.createdAt,"MMM d, y")),M(3),ue(ri(8,16,t.createdAt,"h:mm a")),M(4),ue(t.description),M(2),W("ngClass","priority-"+(t.priority||"medium")),M(),Te(" ",$e(15,19,t.priority||"medium")," "),M(5),ue(t.street),M(2),ue(t.barangay),M(),W("ngIf",t.city),M(5),ue(t.reporterName||"N/A"),M(2),ue(t.reporterId),M(2),W("ngIf",t.imageUrl)("ngIfElse",i)}}function Goe(n,e){if(n&1&&(pt(0),b(1,"div",12)(2,"table")(3,"thead")(4,"tr")(5,"th"),I(6,"Submitted"),w(),b(7,"th"),I(8,"Description"),w(),b(9,"th"),I(10,"Priority"),w(),b(11,"th"),I(12,"Location"),w(),b(13,"th"),I(14,"Reporter"),w(),b(15,"th"),I(16,"Image"),w(),b(17,"th"),I(18,"Actions"),w()()(),b(19,"tbody"),ie(20,qoe,39,21,"tr",13),w()()(),gt()),n&2){let t=B().ngIf,i=B(2);M(20),W("ngForOf",t)("ngForTrackBy",i.trackById)}}function Woe(n,e){n&1&&(b(0,"div",23)(1,"p"),I(2,"No pending reports. All reports have been reviewed!"),w()())}function Koe(n,e){if(n&1&&(pt(0),ie(1,Goe,21,2,"ng-container",11)(2,Woe,3,0,"ng-template",null,1,Qt),gt()),n&2){let t=e.ngIf,i=Pt(3);M(),W("ngIf",t.length>0)("ngIfElse",i)}}function Qoe(n,e){n&1&&(b(0,"div",24),I(1,"Loading reports..."),w())}function Yoe(n,e){if(n&1&&(pt(0),b(1,"div",9)(2,"h3",10),I(3,"Pending Safety Alerts - Awaiting Review"),w(),ie(4,Koe,4,2,"ng-container",11),Me(5,"async"),ie(6,Qoe,2,0,"ng-template",null,0,Qt),w(),gt()),n&2){let t=Pt(7),i=B();M(4),W("ngIf",$e(5,2,i.pendingReports$))("ngIfElse",t)}}function Zoe(n,e){if(n&1&&(pt(0),b(1,"div",36),I(2),w(),gt()),n&2){let t=B().ngIf,i=B().ngIf;M(2),qn(" Showing ",t.length," of ",i.length," approved reports ")}}function Joe(n,e){if(n&1&&(pt(0),b(1,"span",48),I(2),w(),gt()),n&2){let t=B().$implicit;M(2),ue(t.city)}}function Xoe(n,e){if(n&1&&(pt(0),b(1,"div",45)(2,"strong"),I(3,"Coordinates:"),w(),b(4,"span",49),I(5),Me(6,"number"),Me(7,"number"),w()(),gt()),n&2){let t=B().$implicit;M(5),qn(" ",ri(6,2,t.location.lat,"1.6-6"),", ",ri(7,5,t.location.lng,"1.6-6")," ")}}function ese(n,e){if(n&1&&(pt(0),b(1,"div",45)(2,"strong"),I(3,"Email:"),w(),b(4,"span"),I(5),w()(),gt()),n&2){let t=B().$implicit;M(5),ue(t.reporterEmail)}}function tse(n,e){if(n&1&&(pt(0),b(1,"div",50),oe(2,"img",51),w(),gt()),n&2){let t=B().$implicit;M(2),W("src",t.imageUrl,xn)}}function nse(n,e){if(n&1){let t=ve();b(0,"div",39)(1,"div",40)(2,"span",15),I(3),Me(4,"uppercase"),w(),b(5,"span",41),I(6),Me(7,"date"),w()(),b(8,"div",42)(9,"h4",43),I(10),w(),b(11,"div",44)(12,"div",45)(13,"strong"),I(14,"Location:"),w(),b(15,"span"),I(16),w(),ie(17,Joe,3,1,"ng-container",8),w(),ie(18,Xoe,8,8,"ng-container",8),b(19,"div",45)(20,"strong"),I(21,"Reporter:"),w(),b(22,"span"),I(23),w()(),ie(24,ese,6,1,"ng-container",8),w(),ie(25,tse,3,1,"ng-container",8),w(),b(26,"div",46)(27,"button",47),ee("click",function(){let r=q(t).$implicit,o=B(5);return G(o.deleteApprovedReport(r.id))}),I(28," Delete Report "),w()()()}if(n&2){let t=e.$implicit;M(2),W("ngClass","priority-"+(t.priority||"medium")),M(),Te(" ",$e(4,11,t.priority||"medium")," "),M(3),Te(" ",t.timestamp?t.timestamp:ri(7,13,t.createdAt,"MMM d, y h:mm a")," "),M(4),ue(t.description),M(6),qn("",t.street,", ",t.barangay),M(),W("ngIf",t.city),M(),W("ngIf",t.location),M(5),ue(t.reporterName||"N/A"),M(),W("ngIf",t.reporterEmail),M(),W("ngIf",t.imageUrl)}}function ise(n,e){if(n&1&&(pt(0),b(1,"div",37),ie(2,nse,29,16,"div",38),w(),gt()),n&2){let t=B().ngIf,i=B(3);M(2),W("ngForOf",t)("ngForTrackBy",i.trackById)}}function rse(n,e){n&1&&(pt(0),b(1,"p"),I(2,"No approved reports match your filters."),w(),gt())}function ose(n,e){n&1&&(pt(0),b(1,"p"),I(2,"No approved reports yet."),w(),gt())}function sse(n,e){if(n&1&&(b(0,"div",23),ie(1,rse,3,0,"ng-container",8)(2,ose,3,0,"ng-container",8),w()),n&2){let t=B(2).ngIf,i=B(2);M(),W("ngIf",i.approvedFilterPriority!=="all"||i.approvedFilterSearch),M(),W("ngIf",i.approvedFilterPriority==="all"&&!i.approvedFilterSearch&&t.length===0)}}function ase(n,e){if(n&1&&(pt(0),ie(1,Zoe,3,2,"ng-container",8)(2,ise,3,2,"ng-container",11)(3,sse,3,2,"ng-template",null,4,Qt),gt()),n&2){let t=e.ngIf,i=Pt(4),r=B().ngIf;M(),W("ngIf",r.length>0),M(),W("ngIf",t.length>0)("ngIfElse",i)}}function cse(n,e){if(n&1&&(pt(0),ie(1,ase,5,3,"ng-container",8),gt()),n&2){let t=e.ngIf,i=B(2);M(),W("ngIf",i.getFilteredApprovedReports(t))}}function lse(n,e){n&1&&(b(0,"div",24),I(1,"Loading approved reports..."),w())}function use(n,e){if(n&1){let t=ve();pt(0),b(1,"div",9)(2,"h3",10),I(3,"Published Safety Alerts - Visible to Residents"),w(),b(4,"div",25)(5,"div",26)(6,"label",27),I(7,"Filter by Priority:"),w(),b(8,"select",28),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.approvedFilterPriority,r)||(o.approvedFilterPriority=r),G(r)}),b(9,"option",29),I(10,"All Priorities"),w(),b(11,"option",30),I(12,"High Priority"),w(),b(13,"option",31),I(14,"Medium Priority"),w(),b(15,"option",32),I(16,"Low Priority"),w()()(),b(17,"div",26)(18,"label",33),I(19,"Search:"),w(),b(20,"input",34),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.approvedFilterSearch,r)||(o.approvedFilterSearch=r),G(r)}),w()(),b(21,"button",35),ee("click",function(){q(t);let r=B();return G(r.resetFilters())}),I(22,"Reset Filters"),w()(),ie(23,cse,2,1,"ng-container",11),Me(24,"async"),ie(25,lse,2,0,"ng-template",null,3,Qt),w(),gt()}if(n&2){let t=Pt(26),i=B();M(8),zt("ngModel",i.approvedFilterPriority),M(12),zt("ngModel",i.approvedFilterSearch),M(3),W("ngIf",$e(24,4,i.approvedReports$))("ngIfElse",t)}}var xx=class n{reportService=$(Vn);toastService=$(Ni);activeView="pending";pendingReports$=this.reportService.getPendingReports();approvedReports$=this.reportService.getApprovedReports();approvedFilterPriority="all";approvedFilterSearch="";ngOnInit(){}switchView(e){this.activeView=e}filterByPriority(e){return this.approvedFilterPriority==="all"?e:e.filter(t=>t.priority===this.approvedFilterPriority)}filterBySearch(e){if(!this.approvedFilterSearch.trim())return e;let t=this.approvedFilterSearch.toLowerCase();return e.filter(i=>i.description?.toLowerCase().includes(t)||i.barangay?.toLowerCase().includes(t)||i.street?.toLowerCase().includes(t)||i.reporterName?.toLowerCase().includes(t))}getFilteredApprovedReports(e){let t=this.filterByPriority(e);return t=this.filterBySearch(t),t}resetFilters(){this.approvedFilterPriority="all",this.approvedFilterSearch=""}approveReport(e){confirm("Are you sure you want to accept this report for publication?")&&(this.reportService.approveReport(e),this.toastService.success("Report accepted and published to user dashboard"))}deleteReport(e){confirm("Are you sure you want to delete this report permanently?")&&(this.reportService.deleteReport(e),this.toastService.success("Report deleted successfully"))}deleteApprovedReport(e){confirm("This will permanently delete this approved report and remove it from the user dashboard and map. Continue?")&&(this.reportService.deleteReport(e),this.toastService.success("Approved report deleted successfully"))}trackById(e,t){return t?.id??e.toString()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-admin-dashboard"]],decls:12,vars:6,consts:[["pendingLoading",""],["noPendingReports",""],["noImage",""],["approvedLoading",""],["noApprovedMatches",""],[1,"admin-dashboard-container"],[1,"dashboard-tabs"],[1,"tab-btn",3,"click"],[4,"ngIf"],[1,"reports-management"],[1,"section-subtitle"],[4,"ngIf","ngIfElse"],[1,"reports-table"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"date-display"],[1,"priority-badge",3,"ngClass"],[1,"location-display"],[1,"reporter-info"],[1,"actions"],[1,"btn-approve",3,"click"],[1,"btn-delete",3,"click"],["alt","Report image",1,"thumbnail",3,"src"],[1,"no-image"],[1,"no-reports-message"],[1,"loading"],[1,"filters-bar"],[1,"filter-group"],["for","priorityFilter"],["id","priorityFilter",1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","high"],["value","medium"],["value","low"],["for","searchFilter"],["type","text","id","searchFilter","placeholder","Search by description, location, or reporter...",1,"filter-input",3,"ngModelChange","ngModel"],[1,"btn-reset-filters",3,"click"],[1,"results-count"],[1,"reports-grid"],["class","report-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"report-card"],[1,"card-header"],[1,"report-date"],[1,"card-body"],[1,"report-title"],[1,"report-details"],[1,"detail-item"],[1,"card-footer"],[1,"btn-delete-approved",3,"click"],[1,"text-muted"],[1,"coords"],[1,"report-image"],["alt","Report evidence",3,"src"]],template:function(t,i){t&1&&(b(0,"div",5)(1,"h2"),I(2,"Admin Dashboard"),w(),b(3,"p"),I(4,"Manage incident reports submitted by users."),w(),b(5,"div",6)(6,"button",7),ee("click",function(){return i.switchView("pending")}),I(7," Pending Alerts "),w(),b(8,"button",7),ee("click",function(){return i.switchView("approved")}),I(9," Published Alerts "),w()(),ie(10,Yoe,8,4,"ng-container",8)(11,use,27,6,"ng-container",8),w()),t&2&&(M(6),We("active",i.activeView==="pending"),M(2),We("active",i.activeView==="approved"),M(2),W("ngIf",i.activeView==="pending"),M(),W("ngIf",i.activeView==="approved"))},dependencies:[Tt,gc,ai,gn,Bn,iu,ru,gr,Da,Yr,Ar,An,mc,Ag,_s],styles:[".admin-dashboard-container[_ngcontent-%COMP%]{padding:30px;max-width:1400px;margin:0 auto;background:linear-gradient(135deg,#f5f7fa,#e9ecef);min-height:100vh}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:2rem;font-weight:800;margin-bottom:10px;letter-spacing:-.5px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.admin-dashboard-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.dashboard-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:30px;border-bottom:1px solid rgba(0,0,0,.08);background:#fff;padding:0;border-radius:12px 12px 0 0;box-shadow:0 2px 8px #0000000f}.tab-btn[_ngcontent-%COMP%]{padding:16px 28px;background:transparent;border:none;border-bottom:3px solid transparent;font-size:.95rem;font-weight:700;color:#666;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);margin-bottom:0;text-transform:uppercase;letter-spacing:.3px}.tab-btn[_ngcontent-%COMP%]:hover{color:#1a2a5e;background:#1a2a5e0d}.tab-btn.active[_ngcontent-%COMP%]{color:#1a2a5e;border-bottom-color:#1a2a5e;background:transparent}.section-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:#1a1a1a;margin-bottom:20px;font-weight:800;letter-spacing:-.3px}.filters-bar[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end;padding:24px;background:#fff;border-radius:12px;margin-bottom:20px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014}.filter-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333;font-size:.9rem;letter-spacing:0px}.filter-select[_ngcontent-%COMP%], .filter-input[_ngcontent-%COMP%]{padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;background:#f8f9fa;font-size:.95rem;transition:all .3s cubic-bezier(.4,0,.2,1)}.filter-select[_ngcontent-%COMP%]:hover, .filter-input[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.filter-select[_ngcontent-%COMP%]:focus, .filter-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.btn-reset-filters[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#333;border:2px solid #e0e0e0;border-radius:8px;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;text-transform:uppercase;letter-spacing:.3px;font-size:.85rem}.btn-reset-filters[_ngcontent-%COMP%]:hover{background:#f8f9fa;border-color:#1a2a5e;color:#1a2a5e;transform:translateY(-2px);box-shadow:0 8px 20px #1a2a5e26}.results-count[_ngcontent-%COMP%]{margin-bottom:15px;color:#666;font-weight:500}.reports-table[_ngcontent-%COMP%]{overflow-x:auto;background:#fff;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014}.reports-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:.9rem;border-collapse:collapse;width:100%}.reports-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px;text-align:left}th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;padding:16px;text-align:left;font-weight:700;font-size:.85rem;text-transform:uppercase;letter-spacing:.3px}td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e0e0e0;vertical-align:top;color:#333}tr[_ngcontent-%COMP%]:hover{background:#1a2a5e08}.date-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.date-display[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;border-radius:6px;font-size:.7rem;font-weight:800;text-transform:uppercase;letter-spacing:.2px}.priority-high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b33,#ee5a6f33);color:#ff6b6b;border:1px solid #ff6b6b}.priority-medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa04d33,#fd7e1433);color:#fd7e14;border:1px solid #ffa94d}.priority-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf6633,#40c05733);color:#51cf66;border:1px solid #51cf66}.location-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.location-display[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.reporter-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.reporter-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.reporter-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.8rem}.thumbnail[_ngcontent-%COMP%]{max-width:100px;max-height:100px;width:auto;height:auto;border-radius:8px;border:1px solid #e0e0e0;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px #0000000f}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 8px 20px #667eea26;border-color:#667eea}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.08);z-index:10;position:relative}.no-image[_ngcontent-%COMP%]{color:#999;font-style:italic}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-approve[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:8px;font-size:.8rem;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;text-transform:uppercase;letter-spacing:.2px;min-height:36px}.btn-edit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea33}.btn-edit[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#764ba2,#667eea);transform:translateY(-2px);box-shadow:0 8px 20px #667eea4d}.btn-save[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff;box-shadow:0 4px 12px #51cf6633}.btn-save[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40c057,#51cf66);transform:translateY(-2px);box-shadow:0 8px 20px #51cf664d}.btn-cancel[_ngcontent-%COMP%]{background:#e0e0e0;color:#333;border:1px solid #d0d0d0}.btn-cancel[_ngcontent-%COMP%]:hover{background:#d0d0d0;transform:translateY(-2px)}.btn-approve[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff;box-shadow:0 4px 12px #51cf6633}.btn-approve[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40c057,#51cf66);transform:translateY(-2px);box-shadow:0 8px 20px #51cf664d}.btn-delete[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff;box-shadow:0 4px 12px #ff6b6b33}.btn-delete[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ee5a6f,#ff6b6b);transform:translateY(-2px);box-shadow:0 8px 20px #ff6b6b4d}.reports-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.report-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:all .3s}.report-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 16px #00000026}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;background:#f5f7ff;border-bottom:2px solid #9fa8da}.report-date[_ngcontent-%COMP%]{font-size:.85rem;color:#666;font-weight:500}.card-body[_ngcontent-%COMP%]{padding:20px}.report-title[_ngcontent-%COMP%]{font-size:1.1rem;color:#1a237e;margin-bottom:15px;font-weight:700}.report-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a237e;font-size:.9rem}.detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-size:.95rem}.text-muted[_ngcontent-%COMP%]{color:#666!important;font-size:.85rem!important}.coords[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem!important;background:#f5f7ff;padding:4px 8px;border-radius:4px}.report-image[_ngcontent-%COMP%]{margin-top:15px}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:6px;border:2px solid #e0e0e0}.card-footer[_ngcontent-%COMP%]{padding:15px;background:#f9f9f9;border-top:1px solid #e0e0e0}.btn-delete-approved[_ngcontent-%COMP%]{width:100%;padding:10px;background:#f44336;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s}.btn-delete-approved[_ngcontent-%COMP%]:hover{background:#d32f2f;transform:translateY(-2px);box-shadow:0 4px 8px #f443364d}.edit-location[_ngcontent-%COMP%], .edit-reporter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.edit-location[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-reporter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:8px;border:2px solid #9fa8da;border-radius:4px;font-size:.9rem}.edit-location[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .edit-reporter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a237e}.no-reports-message[_ngcontent-%COMP%]{padding:40px;text-align:center;background:#f5f7ff;border-radius:8px;color:#1a237e;font-size:1.1rem;font-weight:500}.loading[_ngcontent-%COMP%]{padding:40px;text-align:center;color:#666;font-size:1.1rem}@media (max-width: 992px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:20px}.dashboard-tabs[_ngcontent-%COMP%]{flex-wrap:wrap;gap:5px}.tab-btn[_ngcontent-%COMP%]{padding:10px 18px;font-size:.9rem}}@media (max-width: 768px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:15px}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.filters-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:15px;padding:15px}.filter-group[_ngcontent-%COMP%]{width:100%}.reports-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.reports-table[_ngcontent-%COMP%]{font-size:.85rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:6px}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-approve[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem;flex:1;min-width:70px}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.dashboard-tabs[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:5px}.tab-btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:.85rem;white-space:nowrap}.section-subtitle[_ngcontent-%COMP%]{font-size:1.3rem}}@media (max-width: 480px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:10px}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.admin-dashboard-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:.85rem}.tab-btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem}.filters-bar[_ngcontent-%COMP%]{padding:12px;gap:12px}.filter-select[_ngcontent-%COMP%], .filter-input[_ngcontent-%COMP%]{padding:10px;font-size:16px}.btn-reset-filters[_ngcontent-%COMP%]{padding:12px 16px;font-size:.9rem}.reports-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block}.reports-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.reports-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid #e0e0e0;border-radius:8px;padding:10px}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;text-align:left;position:relative;padding:8px 10px 8px 40%}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:10px;font-weight:600;color:#1a237e;font-size:.8rem}.report-card[_ngcontent-%COMP%]{border-radius:10px}.card-header[_ngcontent-%COMP%]{padding:12px}.card-body[_ngcontent-%COMP%]{padding:15px}.card-footer[_ngcontent-%COMP%]{padding:12px}.report-title[_ngcontent-%COMP%]{font-size:1rem}}"]})};function dse(n,e){if(n&1&&(b(0,"div",47),I(1),w()),n&2){let t=B(2);M(),ue(t.successMessage)}}function hse(n,e){if(n&1&&(b(0,"div",48),I(1),w()),n&2){let t=B(2);M(),ue(t.errorMessage)}}function fse(n,e){if(n&1&&(b(0,"span",49),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.validationErrors.description," ")}}function pse(n,e){if(n&1&&(b(0,"div",50),re(),b(1,"svg",30),oe(2,"path",51)(3,"polyline",52),w(),_e(),b(4,"span"),I(5),w()()),n&2){let t=B(2);M(5),qn("Location saved: ",t.location.lat.toFixed(5),", ",t.location.lng.toFixed(5))}}function gse(n,e){if(n&1&&(b(0,"span",49),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.validationErrors.location," ")}}function mse(n,e){if(n&1){let t=ve();b(0,"div",56),ee("click",function(){let r=q(t).$implicit,o=B(3);return G(o.selectBarangay(r))}),I(1),w()}if(n&2){let t=e.$implicit;M(),Te(" ",t," ")}}function _se(n,e){if(n&1&&(b(0,"div",57),I(1),w()),n&2){let t=B(3);M(),Te(" + ",t.filteredBarangays.length-8," more results ")}}function vse(n,e){if(n&1){let t=ve();b(0,"div",53),ee("mousedown",function(r){return q(t),G(r.preventDefault())}),ie(1,mse,2,1,"div",54)(2,_se,2,1,"div",55),w()}if(n&2){let t=B(2);M(),W("ngForOf",t.filteredBarangays.slice(0,8)),M(),W("ngIf",t.filteredBarangays.length>8)}}function yse(n,e){if(n&1&&(b(0,"span",49),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.validationErrors.barangay," ")}}function bse(n,e){if(n&1&&(b(0,"span",49),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.validationErrors.street," ")}}function wse(n,e){if(n&1){let t=ve();b(0,"div",58),oe(1,"img",59),b(2,"button",60),ee("click",function(){q(t);let r=B(2);return G(r.removePhoto())}),I(3," Remove Photo "),w()()}if(n&2){let t=B(2);M(),W("src",t.imagePreview,xn)}}function xse(n,e){if(n&1){let t=ve();pt(0),b(1,"form",5,1),ee("ngSubmit",function(){q(t);let r=B();return G(r.onSubmit())}),ie(3,dse,2,1,"div",6)(4,hse,2,1,"div",7),b(5,"div",8)(6,"div",9),re(),b(7,"svg",10),oe(8,"path",11),w()(),_e(),b(9,"div",12)(10,"strong"),I(11,"Police Admin Report"),w(),b(12,"span"),I(13,"Submitted by: Police Admin"),w()()(),b(14,"div",13)(15,"h3",14),I(16,"Alert Details"),w(),b(17,"div",15)(18,"label",16),I(19,"Description *"),w(),b(20,"textarea",17),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.description,r)||(o.description=r),G(r)}),w(),ie(21,fse,2,1,"span",18),w(),b(22,"div",15)(23,"label",19),I(24,"Priority *"),w(),b(25,"select",20),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.priority,r)||(o.priority=r),G(r)}),b(26,"option",21),I(27,"Urgent"),w(),b(28,"option",22),I(29,"Important"),w(),b(30,"option",23),I(31,"Advisory"),w()()()(),b(32,"div",13)(33,"h3",14),I(34,"Location"),w(),b(35,"div",24)(36,"label"),I(37,"Pin Location *"),w(),b(38,"p",25),I(39,"Click on the map or search to select location."),w(),b(40,"app-interactive-location-picker",26),ee("locationSelected",function(r){q(t);let o=B();return G(o.onMapLocationSelected(r))}),w(),ie(41,pse,6,2,"div",27)(42,gse,2,1,"span",18),w(),b(43,"div",28)(44,"div",29),re(),b(45,"svg",30),oe(46,"path",31)(47,"circle",32),w(),_e(),b(48,"span"),I(49,"Philippines > Benguet > Baguio City"),w()()(),b(50,"div",33)(51,"label",34),I(52,"Barangay *"),w(),b(53,"input",35),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.barangay,r)||(o.barangay=r),G(r)}),ee("input",function(r){q(t);let o=B();return G(o.filterBarangays(r))})("focus",function(){q(t);let r=B();return G(r.showBarangaySuggestions=!0)})("blur",function(){q(t);let r=B();return G(r.showBarangaySuggestions=!1)}),w(),ie(54,vse,3,2,"div",36)(55,yse,2,1,"span",18),w(),b(56,"div",15)(57,"label",37),I(58,"Street *"),w(),b(59,"input",38),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.street,r)||(o.street=r),G(r)}),w(),ie(60,bse,2,1,"span",18),w(),b(61,"div",15)(62,"label",39),I(63,"Landmark (Optional)"),w(),b(64,"input",40),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.landmark,r)||(o.landmark=r),G(r)}),w()(),b(65,"div",15)(66,"label",41),I(67,"Attach Photo (Optional)"),w(),b(68,"input",42),ee("change",function(r){q(t);let o=B();return G(o.onFileSelected(r))}),w(),ie(69,wse,4,1,"div",43),w()(),b(70,"div",44)(71,"button",45),I(72),w(),b(73,"a",46),I(74," Cancel "),w()()(),gt()}if(n&2){let t=B();M(3),W("ngIf",t.successMessage),M(),W("ngIf",t.errorMessage),M(16),zt("ngModel",t.description),M(),W("ngIf",t.validationErrors.description),M(4),zt("ngModel",t.priority),M(15),W("barangayInput",t.barangay)("streetInput",t.street),M(),W("ngIf",t.location),M(),W("ngIf",t.validationErrors.location),M(11),zt("ngModel",t.barangay),M(),W("ngIf",t.showBarangaySuggestions&&t.filteredBarangays.length>0),M(),W("ngIf",t.validationErrors.barangay),M(4),zt("ngModel",t.street),M(),W("ngIf",t.validationErrors.street),M(4),zt("ngModel",t.landmark),M(5),W("ngIf",t.imagePreview),M(2),W("disabled",t.isLoading),M(),Te(" ",t.isLoading?"Issuing Alert...":"Issue Safety Alert"," ")}}function Cse(n,e){n&1&&(b(0,"div",61)(1,"p",62),I(2,"You must be signed in as admin to create reports."),w(),b(3,"div",63)(4,"a",64),I(5,"Sign In"),w()()())}var Cx=class n{reportService=$(Vn);authService=$(Dn);router=$(Rt);toastService=$(Ni);description="";street="";barangay="";landmark="";city="Baguio City";priority="high";location=null;locationAccuracy=null;isGettingLocation=!1;locationError=null;selectedFile=null;imagePreview=null;imageUrl=null;isUploadingImage=!1;errorMessage=null;successMessage=null;isLoading=!1;validationErrors={};baguioBarangays=["A. Bonifacio-Caguioa-Rimando (ABCR)","Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)","Alfonso Tabora","Ambiong","Andres Bonifacio (Lower Bokawkan)","Apugan-Loakan","Asin Road","Atok Trail","Aurora Hill Proper (Malvar-Sgt. Floresca)","Aurora Hill, North Central","Aurora Hill, South Central","Bagong Lipunan (Market Area)","Baguio Dairy Farm","Bakakeng Central","Bakakeng North","Bal-Marcoville (Marcoville)","Balsigan","Bayan Park East","Bayan Park Village","Bayan Park West (Bayan Park)","BGH Compound","Brookside","Brookspoint","Cabinet Hill-Teacher's Camp","Camdas Subdivision","Camp 7","Camp 8","Camp Allen","Campo Filipino","City Camp Central","City Camp Proper","Country Club Village","Cresencia Village","Dagisitan","Dagsian, Lower","Dagsian, Upper","Dizon Subdivision","Dominican Hill-Mirador","Dontogan","DPS Area","Engineers' Hill","Fairview Village","Ferdinand (Happy Homes-Campo Sioco)","Fort del Pilar","Gabriel Silang","General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)","General Luna, Lower","General Luna, Upper","Gibraltar","Greenwater Village","Guisad Central","Guisad Sorong","Happy Hollow","Happy Homes (Happy Homes-Lucban)","Harrison-Claudio Carantes","Hillside","Holy Ghost Extension","Holy Ghost Proper","Honeymoon (Honeymoon-Holy Ghost)","Imelda R. Marcos (La Salle)","Imelda Village","Irisan","Kabayanihan","Kagitingan","Kayang Extension","Kayang-Hilltop","Kias","Legarda-Burnham-Kisad","Liwanag-Loakan","Loakan Proper","Lopez Jaena","Lourdes Subdivision Extension","Lourdes Subdivision, Lower","Lourdes Subdivision, Proper","Lualhati","Lucnab","Magsaysay Private Road","Magsaysay, Lower","Magsaysay, Upper","Malcolm Square-Perfecto (Jose Abad Santos)","Manuel A. Roxas","Market Subdivision, Upper","Middle Quezon Hill Subdivision (Quezon Hill Middle)","Military Cut-off","Mines View Park","Modern Site, East","Modern Site, West","MRR-Queen of Peace","New Lucban","Outlook Drive","Pacdal","Padre Burgos","Padre Zamora","Palma-Urbano (Cari\xF1o-Palma)","Phil-Am","Pinget","Pinsao Pilot Project","Pinsao Proper","Poliwes","Pucsusan","Quezon Hill Proper","Quezon Hill, Upper","Quirino Hill, East","Quirino Hill, Lower","Quirino Hill, Middle","Quirino Hill, West","Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)","Rizal Monument Area","Rock Quarry, Lower","Rock Quarry, Middle","Rock Quarry, Upper","Salud Mitra","San Antonio Village","San Luis Village","San Roque Village","San Vicente","Sanitary Camp, North","Sanitary Camp, South","Santa Escolastica","Santo Rosario","Santo Tomas Proper","Santo Tomas School Area","Scout Barrio","Session Road Area","Slaughter House Area (Santo Ni\xF1o Slaughter)","SLU-SVP Housing Village","South Drive","Teodora Alonzo","Trancoville","Upper General Luna","Victoria Village","Websters Subdivision"];filteredBarangays=[...this.baguioBarangays];showBarangaySuggestions=!1;recentReports=[];ngOnInit(){this.reportService.getAllReports().subscribe(e=>{this.recentReports=(e||[]).slice(-30).reverse()})}onSelectLocation(e){if(e){if(e.startsWith("brgy:")){let t=e.replace("brgy:","");this.barangay=t;let i=this.recentReports.find(r=>(r.barangay||"").toLowerCase()===t.toLowerCase());i&&i.location?(this.location=i.location,this.street=this.street||i.street||"",this.locationAccuracy=i.locationAccuracy||null,this.locationError=null):(this.location=null,this.locationAccuracy=null,this.locationError="No coordinates found for selected barangay from recent reports. You may use Get Current Location.")}else if(e.startsWith("rpt:")){let t=e.replace("rpt:",""),i=this.recentReports.find(r=>r.id===t);i&&(this.location=i.location||null,this.locationAccuracy=i.locationAccuracy||null,this.barangay=i.barangay||this.barangay,this.street=i.street||this.street,this.locationError=null)}}}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.showBarangaySuggestions=!0,!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.barangay=e,this.showBarangaySuggestions=!1,this.filteredBarangays=[...this.baguioBarangays]}getAddressFromCoordinates(e,t){return O(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,s=o.road||o.street||o.neighbourhood||"";s&&!this.street&&(this.street=s);let l=this.findNearestBarangay(e,t);l&&!this.barangay&&(this.barangay=l)}}catch(i){console.warn("Could not fetch address details:",i);let r=this.findNearestBarangay(e,t);r&&!this.barangay&&(this.barangay=r)}})}getCurrentLocation(){if(!navigator.geolocation){this.locationError="Geolocation is not supported by your browser.";return}this.isGettingLocation=!0,this.locationError=null,navigator.geolocation.getCurrentPosition(e=>O(this,null,function*(){let t=e.coords.latitude,i=e.coords.longitude;t>=16.35&&t<=16.48&&i>=120.52&&i<=120.66?(this.location={lat:t,lng:i},this.locationAccuracy=e.coords.accuracy,this.locationError=null,yield this.getAddressFromCoordinates(t,i)):(this.locationError="Your location is outside Baguio City. Please ensure you are within Baguio City to report an incident.",this.location=null),this.isGettingLocation=!1}),e=>{switch(this.isGettingLocation=!1,e.code){case e.PERMISSION_DENIED:this.locationError="Location access denied. Please enable location access to submit a report.";break;case e.POSITION_UNAVAILABLE:this.locationError="Location information unavailable. Please check your GPS settings.";break;case e.TIMEOUT:this.locationError="Location request timed out. Please try again.";break;default:this.locationError="Unable to get your location. Please try again."}this.location=null},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}validateForm(){this.validationErrors={};let e=[];return this.description.trim()||(this.validationErrors.description="Description is required.",e.push("Description")),this.location||(this.validationErrors.location="Please select a location on the map.",e.push("Location")),this.barangay.trim()||(this.validationErrors.barangay="Barangay is required.",e.push("Barangay")),this.street.trim()||(this.validationErrors.street="Street is required.",e.push("Street")),e.length>0&&this.toastService.warning(`Please fill in: ${e.join(", ")}`),Object.keys(this.validationErrors).length===0}onSubmit(){return O(this,null,function*(){if(this.errorMessage=null,this.successMessage=null,!!this.validateForm()){this.isLoading=!0;try{let e=yield ol(this.authService.currentUser$);if(!e){this.toastService.error("You must be logged in as admin to create reports."),this.errorMessage="You must be logged in as admin to create reports.",setTimeout(()=>this.router.navigate(["/login"]),900),this.isLoading=!1;return}if(!this.location){this.toastService.warning("Location is required. Please enable location access and try again."),this.errorMessage="Location is required. Please enable location access and try again.",this.isLoading=!1;return}let t={reporterId:"ADMIN",reporterName:"Police Admin",reporterEmail:e.email||"admin@mountainsentinel.com",description:this.description.trim(),street:this.street.trim(),barangay:this.barangay.trim(),landmark:this.landmark.trim()||void 0,city:this.city,priority:this.priority,location:this.location,locationAccuracy:this.locationAccuracy??void 0,timestamp:new Date().toISOString(),isAdminReport:!0,imageUrl:this.imageUrl||void 0};yield ol(this.reportService.submitReport(t));let i=yield ol(this.reportService.getAllReports()),r=i[i.length-1];r&&this.reportService.approveReport(r.id),this.toastService.success("Safety alert issued and published successfully!"),this.successMessage="Safety alert issued and published successfully!",this.clearForm(),setTimeout(()=>{this.router.navigate(["/admin-dashboard"])},1500)}catch(e){console.error("Report creation failed:",e),this.toastService.error("Submission failed. Please try again."),this.errorMessage="Submission failed. Please try again."}finally{this.isLoading=!1}}})}clearForm(){this.description="",this.street="",this.barangay="",this.landmark="",this.priority="high",this.location=null,this.locationAccuracy=null}onMapLocationSelected(e){this.location={lat:e.lat,lng:e.lng},this.locationAccuracy=10,this.locationError=null,this.validationErrors.location&&delete this.validationErrors.location,e.address?this.parseAddressToFields(e.address):this.reverseGeocodeAndFill(e.lat,e.lng)}parseAddressToFields(e){let t=e.split(",").map(i=>i.trim());for(let i of t){let r=this.baguioBarangays.find(o=>o.toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes(o.toLowerCase().split("(")[0].trim().toLowerCase()));if(r){this.barangay=r;break}}if(t.length>0&&!this.street){let i=t[0];this.baguioBarangays.some(r=>r.toLowerCase().includes(i.toLowerCase()))||(this.street=i)}}reverseGeocodeAndFill(e,t){return O(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,s=o.road||o.street||o.neighbourhood||o.hamlet||"";s&&!this.street&&(this.street=s);let l=o.suburb||o.neighbourhood||o.quarter||o.village||"";if(l){let u=this.baguioBarangays.find(f=>f.toLowerCase().includes(l.toLowerCase())||l.toLowerCase().includes(f.toLowerCase().split("(")[0].trim().toLowerCase()));u&&!this.barangay&&(this.barangay=u)}if(!this.barangay){let u=this.findNearestBarangay(e,t);u&&!this.barangay&&(this.barangay=u)}}}catch(i){console.warn("Could not reverse geocode for auto-fill:",i)}})}findNearestBarangay(e,t){let i={"Asin (Pinsao East)":[16.4089,120.5483],"Aurora Hill":[16.4119,120.5556],Bahpo:[16.388,120.5397],Beckel:[16.4139,120.5447],Bislig:[16.3928,120.5517],Bugnay:[16.4156,120.5333],Burnham:[16.4178,120.5392],"Camp 1 (Kayang)":[16.4142,120.5522],"Camp 2":[16.4067,120.5556],"Camp 3 (Irisan)":[16.4247,120.5333],Cabangahan:[16.4153,120.5228],Calabatok:[16.4003,120.5342],Cambinan:[16.4214,120.5267],Capangan:[16.4261,120.5361],Chaguisian:[16.3978,120.5583],Cresencia:[16.4206,120.5481],Cutcut:[16.4089,120.5178],Dalindingan:[16.4114,120.5289],Dalupirip:[16.3853,120.5383],Demang:[16.4025,120.5303],Dikilili:[16.4136,120.5114],"East Quirino Hill":[16.418,120.5619],Ekip:[16.4008,120.5228],Elias:[16.4167,120.5403],Guisad:[16.3939,120.5442],Hillside:[16.4189,120.5586],Honeymoon:[16.4047,120.5464],"Imelda (formerly Pacdal)":[16.4314,120.5392],Irisan:[16.4247,120.5333],"Kayang (Camp 1)":[16.4142,120.5522],Kias:[16.4036,120.5136],Kisad:[16.3997,120.5361],"La Trinidad":[16.4217,120.5153],Longlong:[16.3953,120.5253],Loakan:[16.3778,120.5531],Lubas:[16.4094,120.5392],Lucban:[16.42,120.5247],Luntiang:[16.4214,120.5506],Madaymen:[16.4033,120.5589],Magsaysay:[16.3989,120.5481],Malugong:[16.3814,120.5286],Malolos:[16.4122,120.5217],Mandala:[16.4333,120.5425],Mangahas:[16.4281,120.5225],Marcoville:[16.4189,120.5361],Midtown:[16.4131,120.5358],"Military Cutoff":[16.3889,120.5364],"Mines View":[16.4081,120.5522],MinfrCut:[16.3842,120.5356],"Modern Timber":[16.3964,120.5086],Mombong:[16.4178,120.5136],Moore:[16.4042,120.5392],"New Lucban":[16.4042,120.5517],"North Kabayan":[16.3867,120.5175],Outlook:[16.4164,120.5575],Pacdal:[16.4314,120.5392],Penalosa:[16.4286,120.5286],"Pinsao East (Asin)":[16.4089,120.5483],"Pinsao West":[16.4103,120.5364],Pilapil:[16.4158,120.5261],Puguis:[16.3797,120.5425],"Quezon Hill":[16.4308,120.5514],"Rock Quarry":[16.4267,120.5447],Rosario:[16.4175,120.5225],Sadjap:[16.4025,120.5286],Sago:[16.3903,120.5236],Salugan:[16.3942,120.5392],Salubetsu:[16.4183,120.5303],"San Isidro":[16.4128,120.5464],"San Luis":[16.4089,120.5578],"San Roque":[16.3967,120.5625],"Santa Cruz":[16.4172,120.5325],"Santo Tomas":[16.4128,120.5556],Sapsap:[16.3889,120.5233],Shag:[16.3953,120.5325],"Slaughter House":[16.3931,120.5158],Stonehill:[16.4006,120.5614],Suppang:[16.4019,120.5303],Taiwan:[16.3828,120.5303],Tandoc:[16.4122,120.5122],"Taong Empleyado (TE)":[16.4289,120.5556],Teestahan:[16.4122,120.5392],"The Pines":[16.3758,120.5428],Tikiwan:[16.3867,120.5464],"Upper Tutubi":[16.3956,120.5622],Virac:[16.3906,120.5158],"Vista Verde":[16.4267,120.5353],Wangal:[16.3936,120.5578],"West Modern Timber":[16.4003,120.5086],"West Quirino Hill":[16.4206,120.5619],"Zamora Hill":[16.4219,120.5625]},r=null,o=1/0;for(let[s,[l,u]]of Object.entries(i)){let f=this.haversineDistance(e,t,l,u);f<o&&(o=f,r=s)}return r}haversineDistance(e,t,i,r){let s=(i-e)*Math.PI/180,l=(r-t)*Math.PI/180,u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}saveFormProgress(){}onFileSelected(e){let t=e.target;if(t.files&&t.files[0]){let i=t.files[0];if(!i.type.startsWith("image/")){this.toastService.error("Please select an image file.");return}if(i.size>5*1024*1024){this.toastService.error("Image size must be less than 5MB.");return}this.selectedFile=i;let r=new FileReader;r.onload=o=>{this.imagePreview=o.target?.result,this.imageUrl=this.imagePreview},r.readAsDataURL(i)}}removePhoto(){this.selectedFile=null,this.imagePreview=null,this.imageUrl=null}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-admin-report"]],decls:9,vars:4,consts:[["notLogged",""],["reportForm","ngForm"],[1,"admin-report-container"],[1,"subtitle"],[4,"ngIf","ngIfElse"],[3,"ngSubmit"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],[1,"admin-info-banner"],[1,"badge-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6.3 1 .9 1 1.5v3c0 1-.8 1.8-1.8 1.8h-4c-1 0-1.8-.8-1.8-1.8v-3c0-.6.4-1.2 1-1.5V9.5C9.2 8.1 10.6 7 12 7zm0 1.2c-.8 0-1.5.5-1.5 1.3v1.5h3V9.5c0-.8-.7-1.3-1.5-1.3z"],[1,"badge-text"],[1,"form-section"],[1,"section-title"],[1,"form-group"],["for","description"],["id","description","name","description","rows","5","required","","placeholder","Provide a detailed description of the incident...",3,"ngModelChange","ngModel"],["class","error-text",4,"ngIf"],["for","priority"],["id","priority","name","priority","required","",3,"ngModelChange","ngModel"],["value","high"],["value","medium"],["value","low"],[1,"form-group","map-picker-group"],[1,"help-text"],[3,"locationSelected","barangayInput","streetInput"],["class","location-confirmed-badge",4,"ngIf"],[1,"location-hierarchy"],[1,"hierarchy-label"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"form-group","barangay-group"],["for","barangay"],["id","barangay","type","text","name","barangay","required","","placeholder","Type to search barangay...","autocomplete","off",3,"ngModelChange","input","focus","blur","ngModel"],["class","barangay-suggestions",3,"mousedown",4,"ngIf"],["for","street"],["id","street","type","text","name","street","required","","placeholder","Enter street or purok...",3,"ngModelChange","ngModel"],["for","landmark"],["id","landmark","type","text","name","landmark","placeholder","e.g., Near Burnham Park, SM Baguio",3,"ngModelChange","ngModel"],["for","photo"],["id","photo","type","file","accept","image/*",3,"change"],["class","photo-preview",4,"ngIf"],[1,"button-group"],["type","submit",1,"submit-btn",3,"disabled"],["routerLink","/admin-dashboard",1,"cancel-btn"],[1,"message","success"],[1,"message","error"],[1,"error-text"],[1,"location-confirmed-badge"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"barangay-suggestions",3,"mousedown"],["class","suggestion-item",3,"click",4,"ngFor","ngForOf"],["class","suggestion-more",4,"ngIf"],[1,"suggestion-item",3,"click"],[1,"suggestion-more"],[1,"photo-preview"],["alt","Photo preview",3,"src"],["type","button",1,"remove-photo-btn",3,"click"],[1,"not-logged"],[1,"login-warning"],[1,"action-row"],["href","/login",1,"btn","login-btn"]],template:function(t,i){if(t&1&&(b(0,"div",2)(1,"h2"),I(2,"Issue Police Alert"),w(),b(3,"p",3),I(4,"This alert will be published immediately."),w(),ie(5,xse,75,18,"ng-container",4),Me(6,"async"),ie(7,Cse,6,0,"ng-template",null,0,Qt),w()),t&2){let r=Pt(8);M(5),W("ngIf",$e(6,2,i.authService.currentUser$))("ngIfElse",r)}},dependencies:[Tt,ai,gn,Bn,Cp,iu,ru,gr,Da,Yr,xp,Zd,Ar,Yd,po,ar,Ep,An],styles:[".admin-report-container[_ngcontent-%COMP%]{max-width:900px;margin:20px auto;padding:25px;background:linear-gradient(135deg,#e8eef5,#f0f4f8);border-radius:12px;box-shadow:0 4px 12px #00000026}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#1a2a5e;font-size:clamp(1.25rem,4vw,2.5rem);margin-bottom:8px;font-weight:700;letter-spacing:.5px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:16px;font-size:clamp(.85rem,3vw,1rem);line-height:1.4}.admin-info-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:8px;margin-bottom:16px;color:#fff;box-shadow:0 3px 8px #1a2a5e4d}.badge-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:44px;height:44px;background:#ffffff26;border-radius:50%;flex-shrink:0}.badge-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#fff}.badge-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.badge-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(.95rem,2.5vw,1.2rem);line-height:1.2}.badge-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:clamp(.8rem,2vw,.9rem);opacity:.9;line-height:1.2}.form-section[_ngcontent-%COMP%]{background:#f0f4f8;padding:16px;border-radius:8px;margin-bottom:16px;box-shadow:0 2px 4px #0000000d}.section-title[_ngcontent-%COMP%]{color:#1a2a5e;font-size:clamp(1.1rem,3vw,1.4rem);font-weight:700;margin-bottom:14px;padding-bottom:8px;border-bottom:3px solid #d4a84b;line-height:1.2}.form-group[_ngcontent-%COMP%]{margin-bottom:14px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:700;color:#1a2a5e;font-size:clamp(.85rem,2.5vw,1rem)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:2px solid #c5cdd8;border-radius:6px;font-size:1rem;background:#f8fafc;transition:all .3s;font-family:inherit;min-height:44px;color:#1a1a1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;padding:10px}.photo-preview[_ngcontent-%COMP%]{margin-top:8px;display:flex;flex-direction:column;align-items:flex-start;gap:6px}.photo-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:180px;max-height:140px;border-radius:8px;border:1px solid #c5cdd8;box-shadow:0 2px 8px #00000014}.remove-photo-btn[_ngcontent-%COMP%]{background:#d32f2f;color:#fff;border:none;border-radius:6px;padding:6px 12px;font-size:.9rem;cursor:pointer;margin-top:3px;transition:background .2s;min-height:36px}.remove-photo-btn[_ngcontent-%COMP%]:hover{background:#b71c1c}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;z-index:1000;background:#fff;border:2px solid #1a2a5e;border-radius:8px;max-height:200px;overflow-y:auto;box-shadow:0 8px 24px #0003;margin-top:2px;width:100%;left:0;right:0}.suggestion-item[_ngcontent-%COMP%]{padding:10px 14px;cursor:pointer;transition:all .15s ease;border-bottom:1px solid #eef2f7;font-size:.9rem;color:#1a2a5e;min-height:40px;display:flex;align-items:center}.suggestion-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e8eef5,#f0f4f8);padding-left:18px}.suggestion-more[_ngcontent-%COMP%]{padding:8px 14px;text-align:center;color:#666;font-size:.8rem;background:#f8fafc;border-top:1px solid #eef2f7;min-height:36px;display:flex;align-items:center;justify-content:center}.location-info[_ngcontent-%COMP%]{position:relative}.get-location-btn[_ngcontent-%COMP%]{width:100%;padding:10px;background:#1a2a5e;color:#fff;border:none;border-radius:6px;font-size:.95rem;font-weight:700;cursor:pointer;transition:all .3s;text-transform:uppercase;letter-spacing:.5px;margin-bottom:12px;min-height:44px}.get-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2a3f7a;transform:translateY(-2px);box-shadow:0 4px 12px #1a2a5e4d}.get-location-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.location-display[_ngcontent-%COMP%]{padding:12px;background:#fff;border:2px solid #c5cdd8;border-radius:6px;margin-bottom:12px}.location-coords[_ngcontent-%COMP%]{margin:6px 0;font-size:.9rem;color:#333;word-break:break-all}.location-accuracy[_ngcontent-%COMP%]{margin:6px 0;font-size:.85rem;color:#666;font-style:italic}.location-error[_ngcontent-%COMP%]{padding:10px;background:#ffebee;color:#c62828;border-radius:6px;border:2px solid #ef5350;margin-bottom:12px;font-weight:500;font-size:.9rem}.help-text[_ngcontent-%COMP%]{font-size:.8rem;color:#666;margin:6px 0 0;font-style:italic}.hierarchy-note[_ngcontent-%COMP%]{color:#1a2a5e;font-size:.85rem;font-weight:600;margin-bottom:12px;padding:10px 12px;background:linear-gradient(135deg,#d4a84b1f,#d4a84b0d);border-left:3px solid #d4a84b;border-radius:4px;line-height:1.4}.readonly-field[_ngcontent-%COMP%]{background-color:#e9ecef!important;color:#6c757d!important;cursor:not-allowed}.barangay-group[_ngcontent-%COMP%]{position:relative}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;background:#fff;border:2px solid #1a2a5e;border-top:none;border-radius:0 0 8px 8px;max-height:200px;overflow-y:auto;width:100%;box-shadow:0 8px 24px #1a2a5e26;z-index:1000;color:#333;top:100%;left:0;right:0}.suggestion-item[_ngcontent-%COMP%]{padding:10px 14px;cursor:pointer;transition:all .15s ease;border-bottom:1px solid #e0e0e0;font-size:.9rem;min-height:40px;display:flex;align-items:center}.suggestion-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#1a2a5e;padding-left:16px}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-more[_ngcontent-%COMP%]{padding:8px 14px;background:#f0f4f8;color:#6c757d;font-style:italic;font-size:.8rem;text-align:center;border-top:1px solid #e0e0e0;min-height:36px;display:flex;align-items:center;justify-content:center}.message[_ngcontent-%COMP%]{padding:12px;border-radius:6px;margin-bottom:16px;font-weight:600;text-align:center;font-size:.95rem}.message.success[_ngcontent-%COMP%]{background:#c8e6c9;color:#2e7d32;border:2px solid #66bb6a}.message.error[_ngcontent-%COMP%]{background:#ffcdd2;color:#c62828;border:2px solid #ef5350}.error-text[_ngcontent-%COMP%]{display:block;color:#c62828;font-size:.8rem;margin-top:4px;font-weight:600}.button-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}.submit-btn[_ngcontent-%COMP%]{flex:1;min-width:140px;padding:12px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;font-size:clamp(.9rem,2.5vw,1.1rem);font-weight:700;cursor:pointer;transition:all .3s;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 12px #1a2a5e4d;min-height:44px}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-2px);box-shadow:0 6px 16px #1a2a5e66}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.cancel-btn[_ngcontent-%COMP%]{flex:0 1 auto;padding:12px 20px;background:#9e9e9e;color:#fff;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s;text-decoration:none;text-align:center;display:flex;align-items:center;justify-content:center;min-height:44px}.cancel-btn[_ngcontent-%COMP%]:hover{background:#757575;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.not-logged[_ngcontent-%COMP%]{text-align:center;padding:30px 20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a}.login-warning[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.2rem);color:#666;margin-bottom:16px}.action-row[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;flex-wrap:wrap}.login-btn[_ngcontent-%COMP%]{padding:12px 20px;background:#1a237e;color:#fff;text-decoration:none;border-radius:6px;font-weight:600;transition:all .3s;min-height:44px;display:flex;align-items:center;justify-content:center;font-size:.95rem}.login-btn[_ngcontent-%COMP%]:hover{background:#0d1654;transform:translateY(-2px);box-shadow:0 4px 12px #1a237e4d}.map-picker-group[_ngcontent-%COMP%]{margin-bottom:16px}.map-picker-group[_ngcontent-%COMP%]   app-interactive-location-picker[_ngcontent-%COMP%]{display:block;margin-top:8px;border-radius:8px;overflow:hidden;box-shadow:0 4px 16px #00000026}.location-confirmed-badge[_ngcontent-%COMP%]{gap:8px;margin-top:10px;padding:10px 12px;background:linear-gradient(135deg,#2ecc71,#27ae60);color:#fff;border-radius:8px;font-size:.85rem;font-weight:600;box-shadow:0 3px 10px #2ecc714d;min-height:40px;display:flex;align-items:center}.location-confirmed-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;width:16px;height:16px}.location-hierarchy[_ngcontent-%COMP%]{margin:12px 0;padding:10px 12px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:8px;border-left:4px solid #d4a84b}.hierarchy-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#fff;font-size:.85rem;font-weight:500;word-break:break-word}.hierarchy-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;flex-shrink:0;width:18px;height:18px}@media (max-width: 768px){.admin-report-container[_ngcontent-%COMP%]{padding:16px;margin:12px;max-width:100%}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:6px}.subtitle[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:12px}.admin-info-banner[_ngcontent-%COMP%]{gap:10px;padding:12px;margin-bottom:12px}.badge-icon[_ngcontent-%COMP%]{width:40px;height:40px}.badge-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.badge-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1rem}.badge-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem}.form-section[_ngcontent-%COMP%]{padding:14px;margin-bottom:12px}.section-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:12px}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:4px;font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:9px;font-size:1rem}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:70px}.barangay-suggestions[_ngcontent-%COMP%]{max-height:180px}.suggestion-item[_ngcontent-%COMP%]{padding:9px 12px;font-size:.85rem;min-height:38px}.map-picker-group[_ngcontent-%COMP%]   app-interactive-location-picker[_ngcontent-%COMP%]{border-radius:8px}.location-hierarchy[_ngcontent-%COMP%]{padding:8px 10px;margin:10px 0}.hierarchy-label[_ngcontent-%COMP%]{font-size:.8rem;gap:6px}.button-group[_ngcontent-%COMP%]{flex-direction:column;gap:8px;margin-top:12px}.submit-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%]{width:100%;padding:11px;min-width:unset;font-size:.9rem}.message[_ngcontent-%COMP%]{padding:10px;font-size:.9rem;margin-bottom:12px}}@media (max-width: 480px){.admin-report-container[_ngcontent-%COMP%]{padding:12px;margin:8px}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:4px}.subtitle[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:10px}.admin-info-banner[_ngcontent-%COMP%]{gap:8px;padding:10px;margin-bottom:10px}.badge-icon[_ngcontent-%COMP%]{width:36px;height:36px}.badge-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.badge-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.9rem}.badge-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7rem}.form-section[_ngcontent-%COMP%]{padding:12px;margin-bottom:10px;border-radius:6px}.section-title[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:10px;border-bottom-width:2px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:4px;font-size:.85rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px;font-size:16px;min-height:42px;border-radius:5px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:60px}.photo-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:140px;max-height:110px}.remove-photo-btn[_ngcontent-%COMP%]{padding:5px 10px;font-size:.85rem;min-height:32px}.barangay-suggestions[_ngcontent-%COMP%]{max-height:160px;border-radius:6px;margin-top:0}.suggestion-item[_ngcontent-%COMP%]{padding:8px 10px;font-size:.8rem;min-height:36px}.suggestion-more[_ngcontent-%COMP%]{font-size:.75rem;padding:6px 10px;min-height:32px}.get-location-btn[_ngcontent-%COMP%]{padding:9px;font-size:.85rem;letter-spacing:0;min-height:42px}.location-display[_ngcontent-%COMP%]{padding:10px;margin-bottom:10px;border-radius:5px}.location-coords[_ngcontent-%COMP%]{font-size:.8rem;margin:4px 0}.location-accuracy[_ngcontent-%COMP%]{font-size:.75rem;margin:4px 0}.location-error[_ngcontent-%COMP%]{padding:8px;font-size:.8rem;margin-bottom:10px}.help-text[_ngcontent-%COMP%]{font-size:.75rem;margin:4px 0 0}.hierarchy-note[_ngcontent-%COMP%]{font-size:.8rem;padding:8px 10px;margin-bottom:10px;border-left-width:2px}.location-confirmed-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:8px 10px;margin-top:8px;min-height:36px;gap:6px}.location-confirmed-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.location-hierarchy[_ngcontent-%COMP%]{padding:8px 10px;margin:10px 0;border-left-width:3px}.hierarchy-label[_ngcontent-%COMP%]{font-size:.75rem;gap:6px}.hierarchy-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.button-group[_ngcontent-%COMP%]{gap:6px;margin-top:10px}.submit-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:.85rem;min-height:42px;border-radius:6px}.not-logged[_ngcontent-%COMP%]{padding:20px 16px;margin:10px}.login-warning[_ngcontent-%COMP%]{font-size:.95rem;margin-bottom:12px}.action-row[_ngcontent-%COMP%]{gap:8px}.login-btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:.85rem;min-height:42px}.message[_ngcontent-%COMP%]{padding:8px;font-size:.85rem;margin-bottom:10px}.error-text[_ngcontent-%COMP%]{font-size:.75rem;margin-top:3px}}@media (max-width: 375px){.admin-report-container[_ngcontent-%COMP%]{padding:10px;margin:6px}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:7px;font-size:16px}.submit-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:9px}.badge-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.85rem}.hierarchy-label[_ngcontent-%COMP%]{font-size:.7rem}}"]})};function Ese(n,e){if(n&1){let t=ve();b(0,"button",11),ee("click",function(){q(t);let r=B();return G(r.clearSearch())}),re(),b(1,"svg",12),oe(2,"line",13)(3,"line",14),w()()}}function Ise(n,e){if(n&1&&(b(0,"div",24),oe(1,"img",25),w()),n&2){let t=B().$implicit;M(),W("src",t.imageUrl,xn)}}function Pse(n,e){if(n&1&&(b(0,"div",19)(1,"div",20)(2,"h3"),I(3),w(),b(4,"span",21),I(5),w()(),b(6,"div",22)(7,"p")(8,"strong"),I(9,"Location:"),w(),I(10),w(),b(11,"p")(12,"strong"),I(13,"Reporter:"),w(),I(14),w(),b(15,"p")(16,"strong"),I(17,"Reported:"),w(),I(18),Me(19,"date"),w()(),ie(20,Ise,2,1,"div",23),w()),n&2){let t=e.$implicit;M(3),ue(t.description),M(2),ue(t.status),M(5),qn(" ",t.street,", ",t.barangay),M(4),Te(" ",t.reporterName||t.reporterId),M(4),Te(" ",ri(19,7,t.createdAt,"short")),M(2),W("ngIf",t.imageUrl)}}function Tse(n,e){if(n&1&&(pt(0),ie(1,Pse,21,10,"div",18),gt()),n&2){let t=B().ngIf;M(),W("ngForOf",t)}}function Sse(n,e){n&1&&(b(0,"p"),I(1,"No incidents match your search. Try different keywords."),w())}function Mse(n,e){n&1&&(b(0,"p"),I(1,"No incidents reported at this time. Stay safe!"),w())}function Ose(n,e){if(n&1&&(b(0,"div",26),ie(1,Sse,2,0,"p",27)(2,Mse,2,0,"p",27),w()),n&2){let t=B(2);M(),W("ngIf",t.searchQuery.value),M(),W("ngIf",!t.searchQuery.value)}}function Ase(n,e){if(n&1&&(b(0,"div",15)(1,"div",16),ie(2,Tse,2,1,"ng-container",17)(3,Ose,3,2,"ng-template",null,1,Qt),w()()),n&2){let t=e.ngIf,i=Pt(4);M(2),W("ngIf",t.length>0)("ngIfElse",i)}}function Dse(n,e){n&1&&(b(0,"div",28),I(1,"Loading safety feed..."),w())}var Ex=class n{reportService=$(Vn);searchQuery=new Ut("");allApprovedReports$=this.reportService.getAllReports().pipe(pe(e=>e.filter(t=>t.status==="approved")));filteredReports$=xr([this.allApprovedReports$,this.searchQuery.pipe(qr(""))]).pipe(pe(([e,t])=>{if(!t.trim())return e;let i=t.toLowerCase();return e.filter(r=>{let o=(r.description||"").toLowerCase(),s=(r.street||"").toLowerCase(),l=(r.barangay||"").toLowerCase(),u=(r.landmark||"").toLowerCase(),f=(r.reporterName||"").toLowerCase(),m=(r.createdAt||"").toString().toLowerCase();return o.includes(i)||s.includes(i)||l.includes(i)||u.includes(i)||f.includes(i)||m.includes(i)})}));ngOnInit(){}onSearchChange(e){this.searchQuery.next(e)}clearSearch(){this.searchQuery.next("")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-safety-feed"]],decls:16,vars:6,consts:[["loading",""],["emptyFeed",""],[1,"safety-feed-container"],[1,"search-container"],[1,"search-wrapper"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Search by location, keyword, or date...","aria-label","Search incident reports",1,"report-search-input",3,"input","value"],["class","clear-search-btn","title","Clear search","aria-label","Clear search",3,"click",4,"ngIf"],["class","feed-wrapper",4,"ngIf","ngIfElse"],["title","Clear search","aria-label","Clear search",1,"clear-search-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"feed-wrapper"],[1,"feed-list"],[4,"ngIf","ngIfElse"],["class","feed-item approved",4,"ngFor","ngForOf"],[1,"feed-item","approved"],[1,"item-header"],[1,"status-badge"],[1,"item-details"],["class","item-image",4,"ngIf"],[1,"item-image"],["alt","Incident",3,"src"],[1,"empty-feed"],[4,"ngIf"],[1,"loading"]],template:function(t,i){if(t&1){let r=ve();b(0,"div",2)(1,"h2"),I(2,"Real-Time Safety Feed"),w(),b(3,"p"),I(4,"View approved incident reports in real-time."),w(),b(5,"div",3)(6,"div",4),re(),b(7,"svg",5),oe(8,"circle",6)(9,"path",7),w(),_e(),b(10,"input",8),ee("input",function(s){return q(r),G(i.onSearchChange(s.target.value))}),w(),ie(11,Ese,4,0,"button",9),w()(),ie(12,Ase,5,2,"div",10),Me(13,"async"),ie(14,Dse,2,0,"ng-template",null,0,Qt),w()}if(t&2){let r=Pt(15);M(10),W("value",i.searchQuery.value),M(),W("ngIf",i.searchQuery.value),M(),W("ngIf",$e(13,4,i.filteredReports$))("ngIfElse",r)}},dependencies:[Tt,ai,gn,Bn,An,_s],styles:[".safety-feed-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto;display:flex;flex-direction:column;height:calc(100vh - 56px)}@media (max-width: 600px){.safety-feed-container[_ngcontent-%COMP%]{padding:8px 6px;height:calc(100vh - 48px)}}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%]{padding:12px 10px;height:calc(100vh - 56px)}}@media (max-width: 480px){.safety-feed-container[_ngcontent-%COMP%]{padding:8px 6px;height:calc(100vh - 48px)}}.safety-feed-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem;color:#1a3a52;margin-bottom:6px;text-align:center;flex-shrink:0}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}}@media (max-width: 480px){.safety-feed-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}}.safety-feed-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:10px;flex-shrink:0;font-size:.9rem}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:8px;font-size:.85rem}}@media (max-width: 480px){.safety-feed-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:6px;font-size:.8rem}}.search-container[_ngcontent-%COMP%]{flex-shrink:0;margin-bottom:10px}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-icon[_ngcontent-%COMP%]{position:absolute;left:14px;color:#1a2a5e;pointer-events:none;z-index:1}.report-search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px;border:2px solid #e0e0e0;border-radius:8px;font-size:.95rem;background:#f8f9fa;color:#1a1a1a;transition:all .3s cubic-bezier(.4,0,.2,1);font-family:inherit}.report-search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.report-search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:12px;background:transparent;border:none;cursor:pointer;color:#999;padding:6px;display:flex;align-items:center;justify-content:center;transition:color .2s ease}.clear-search-btn[_ngcontent-%COMP%]:hover{color:#1a2a5e}.feed-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;border:1px solid #e0e0e0;border-radius:8px;background:#f5f5f5;padding:4px;min-height:0}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1a2a5e;border-radius:4px;transition:background .2s ease}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#2a3f7a}.feed-wrapper[_ngcontent-%COMP%]{scrollbar-color:#1a2a5e #f1f1f1;scrollbar-width:thin}.feed-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:4px}@media (max-width: 768px){.feed-list[_ngcontent-%COMP%]{gap:6px}}@media (max-width: 480px){.feed-list[_ngcontent-%COMP%]{gap:4px;padding:2px}}@media (max-width: 375px){.feed-list[_ngcontent-%COMP%]{gap:3px;padding:2px}}.feed-item[_ngcontent-%COMP%]{border-left:5px solid #ccc;padding:10px;margin-bottom:0;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;transition:box-shadow .2s ease}.feed-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001f}@media (max-width: 768px){.feed-item[_ngcontent-%COMP%]{padding:8px;border-radius:6px}}@media (max-width: 480px){.feed-item[_ngcontent-%COMP%]{padding:5px 4px;border-left-width:3px;border-radius:5px}}@media (max-width: 375px){.feed-item[_ngcontent-%COMP%]{padding:4px;border-left-width:2px}}.feed-item.approved[_ngcontent-%COMP%]{border-left-color:#4caf50}.feed-item.feed-item-high[_ngcontent-%COMP%]{border-left-color:#d32f2f;background-color:#fdeaea}.feed-item.feed-item-medium[_ngcontent-%COMP%]{border-left-color:#ffb300;background-color:#fff9e6}.feed-item.feed-item-low[_ngcontent-%COMP%]{border-left-color:#43a047;background-color:#edf7ed}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:12px;font-weight:700}@media (max-width: 768px){.item-header[_ngcontent-%COMP%]{margin-bottom:10px}}@media (max-width: 480px){.item-header[_ngcontent-%COMP%]{flex-direction:column;gap:6px;margin-bottom:8px}}.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#333;flex:1}@media (max-width: 768px){.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 375px){.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.8rem}}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:.75rem;font-weight:700;background:#4caf50;color:#fff;text-transform:uppercase;white-space:nowrap}.item-details[_ngcontent-%COMP%]{margin-bottom:10px}@media (max-width: 768px){.item-details[_ngcontent-%COMP%]{margin-bottom:8px}}@media (max-width: 480px){.item-details[_ngcontent-%COMP%]{margin-bottom:6px}}.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:6px;font-size:.9rem}@media (max-width: 768px){.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:4px}}@media (max-width: 480px){.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:3px}}.type-tag[_ngcontent-%COMP%], .priority-tag[_ngcontent-%COMP%]{padding:2px 6px;border-radius:3px;font-size:.75rem;color:#fff}.type-tag[_ngcontent-%COMP%]{background-color:#3f51b5}.priority-tag.priority-high[_ngcontent-%COMP%]{background-color:#d32f2f}.priority-tag.priority-medium[_ngcontent-%COMP%]{background-color:#ffb300}.priority-tag.priority-low[_ngcontent-%COMP%]{background-color:#43a047}.item-description[_ngcontent-%COMP%]{margin:0 0 5px;font-size:.9rem}.item-footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.7rem}.empty-feed[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;border:2px dashed #ccc;color:#888;border-radius:8px;background:#fafafa}@media (max-width: 768px){.empty-feed[_ngcontent-%COMP%]{padding:30px 15px}}@media (max-width: 600px){.empty-feed[_ngcontent-%COMP%]{padding:20px 10px}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em}.empty-feed[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .empty-feed[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .empty-feed[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:48px;height:48px;max-width:48px;max-height:48px}}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;font-size:1rem}.item-image[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:center}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:250px;width:auto;height:auto;border-radius:8px;border:1px solid #ddd;box-shadow:0 2px 8px #0000001a}@media (max-width: 768px){.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}}@media (max-width: 480px){.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:120px}}@media (max-width: 375px){.item-image[_ngcontent-%COMP%]{margin-top:8px}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100px}}"]})};var kse=n=>({"no-image":n}),Rse=n=>["/report-detail",n],Nse=(n,e)=>e.id;function Lse(n,e){if(n&1){let t=ve();b(0,"button",24),ee("click",function(){q(t);let r=B();return G(r.clearSearch())}),re(),b(1,"svg",25),oe(2,"line",26)(3,"line",27),w()()}}function Fse(n,e){n&1&&(b(0,"div",28)(1,"div",29),re(),b(2,"svg",30),oe(3,"path",9)(4,"line",31)(5,"line",32),w()(),_e(),b(6,"h3"),I(7,"No Police Reports Found"),w(),b(8,"p"),I(9,"There are no official alerts matching your criteria at this time."),w()())}function Vse(n,e){if(n&1&&(b(0,"span",51),re(),b(1,"svg",52),oe(2,"path",53),w(),_e(),b(3,"span"),I(4),w()()),n&2){let t=B().$implicit;M(4),ue(t.landmark)}}function Bse(n,e){if(n&1&&(b(0,"div",54),oe(1,"img",55),w()),n&2){let t=B().$implicit;M(),W("src",t.imageUrl,xn)}}function Use(n,e){if(n&1&&(b(0,"div",34)(1,"div",35)(2,"span",36),I(3),w()(),b(4,"div",37)(5,"div",38),I(6),w(),b(7,"div",39)(8,"span",40),re(),b(9,"svg",41),oe(10,"path",42)(11,"circle",43),w(),_e(),b(12,"span"),I(13),w()(),ie(14,Vse,5,1,"span",44),b(15,"span",45),I(16),w()()(),ie(17,Bse,2,1,"div",46),b(18,"div",47)(19,"a",48),re(),b(20,"svg",25),oe(21,"line",49)(22,"polyline",50),w()()()()),n&2){let t=e.$implicit,i=B(3);ld(WE("feed-item approved ",i.getPriorityClass(t.priority))),W("ngClass",$v(12,kse,!t.imageUrl)),M(3),ue(i.getPriorityLabel(t.priority)),M(3),ue(t.description),M(7),qn("",t.street,"",t.barangay?", "+t.barangay:""),M(),W("ngIf",t.landmark),M(2),ue(i.formatDate(t.createdAt)),M(),W("ngIf",t.imageUrl),M(2),W("routerLink",$v(14,Rse,t.id))}}function zse(n,e){if(n&1&&od(0,Use,23,16,"div",33,Nse),n&2){let t=B();sd(t)}}function jse(n,e){n&1&&Re(0,Fse,10,0,"div",28)(1,zse,2,0),n&2&&Ne(e.length===0?0:1)}var Ix=class n{reportService=$(Vn);searchQuery=new Ut("");selectedPriority=new Ut("all");allPoliceReports$=this.reportService.getAllReports().pipe(pe(e=>e.filter(t=>t.isAdminReport&&t.status==="approved")));filteredReports$=xr([this.allPoliceReports$,this.searchQuery.pipe(qr("")),this.selectedPriority.pipe(qr("all"))]).pipe(pe(([e,t,i])=>{let r=e;if(i!=="all"&&(r=r.filter(o=>o.priority===i)),t.trim()){let o=t.toLowerCase();r=r.filter(s=>{let l=(s.description||"").toLowerCase(),u=(s.street||"").toLowerCase(),f=(s.barangay||"").toLowerCase(),m=(s.landmark||"").toLowerCase();return l.includes(o)||u.includes(o)||f.includes(o)||m.includes(o)})}return r.sort((o,s)=>new Date(s.createdAt).getTime()-new Date(o.createdAt).getTime())}));ngOnInit(){}onSearchChange(e){this.searchQuery.next(e)}clearSearch(){this.searchQuery.next("")}onPriorityChange(e){this.selectedPriority.next(e)}getPriorityClass(e){switch(e){case"high":return"priority-high";case"medium":return"priority-medium";case"low":return"priority-low";default:return"priority-medium"}}getPriorityLabel(e){switch(e){case"high":return"Urgent";case"medium":return"Important";case"low":return"Advisory";default:return"Alert"}}formatDate(e){let t=new Date(e),i=new Date,r=i.getTime()-t.getTime(),o=Math.floor(r/6e4),s=Math.floor(r/36e5),l=Math.floor(r/864e5);return o<1?"Just now":o<60?`${o}m ago`:s<24?`${s}h ago`:l<7?`${l}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==i.getFullYear()?"numeric":void 0})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-police-issuance-reports"]],decls:40,vars:25,consts:[[1,"police-reports-page"],[1,"page-header"],["routerLink","/","aria-label","Go back to dashboard",1,"back-button"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M19 12H5"],["points","12 19 5 12 12 5"],[1,"header-content"],[1,"header-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],[1,"header-text"],[1,"controls-section"],[1,"search-container"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","placeholder","Search alerts...",1,"search-input",3,"ngModelChange","ngModel"],["aria-label","Clear search",1,"clear-search"],[1,"filter-tabs"],[1,"filter-tab",3,"click"],[1,"filter-tab","priority-high",3,"click"],[1,"filter-tab","priority-medium",3,"click"],[1,"filter-tab","priority-low",3,"click"],[1,"reports-list"],["aria-label","Clear search",1,"clear-search",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"empty-state"],[1,"empty-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[3,"class","ngClass"],[3,"ngClass"],[1,"item-header"],[1,"status-badge"],[1,"item-details"],[1,"report-desc"],[1,"meta-row"],[1,"location-row"],["width","16","height","16","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["class","landmark-row",4,"ngIf"],[1,"date-row"],["class","item-image",4,"ngIf"],[1,"item-footer"],[1,"view-details-btn",3,"routerLink"],["x1","5","y1","12","x2","19","y2","12"],["points","12 5 19 12 12 19"],[1,"landmark-row"],["width","14","height","14","fill","none","stroke","currentColor","stroke-width","2"],["d","M3 21h18M9 8h1M9 12h1M9 16h1M14 8h1M14 12h1M14 16h1M5 21V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16"],[1,"item-image"],["alt","Incident",3,"src"]],template:function(t,i){if(t&1&&(b(0,"div",0)(1,"header",1)(2,"a",2),re(),b(3,"svg",3),oe(4,"path",4)(5,"polyline",5),w()(),_e(),b(6,"div",6)(7,"div",7),re(),b(8,"svg",8),oe(9,"path",9),w()(),_e(),b(10,"div",10)(11,"h1"),I(12,"Police Issuance Reports"),w(),b(13,"p"),I(14,"Official alerts issued by Baguio City authorities"),w()()()(),b(15,"section",11)(16,"div",12),re(),b(17,"svg",13),oe(18,"circle",14)(19,"line",15),w(),_e(),b(20,"input",16),Me(21,"async"),ee("ngModelChange",function(o){return i.onSearchChange(o)}),w(),Re(22,Lse,4,0,"button",17),Me(23,"async"),w(),b(24,"div",18)(25,"button",19),Me(26,"async"),ee("click",function(){return i.onPriorityChange("all")}),I(27," All "),w(),b(28,"button",20),Me(29,"async"),ee("click",function(){return i.onPriorityChange("high")}),I(30," Urgent "),w(),b(31,"button",21),Me(32,"async"),ee("click",function(){return i.onPriorityChange("medium")}),I(33," Important "),w(),b(34,"button",22),Me(35,"async"),ee("click",function(){return i.onPriorityChange("low")}),I(36," Advisory "),w()()(),b(37,"main",23),Re(38,jse,2,1),Me(39,"async"),w()()),t&2){let r;M(20),W("ngModel",$e(21,11,i.searchQuery)),M(2),Ne($e(23,13,i.searchQuery)!==""?22:-1),M(3),We("active",$e(26,15,i.selectedPriority)==="all"),M(3),We("active",$e(29,17,i.selectedPriority)==="high"),M(3),We("active",$e(32,19,i.selectedPriority)==="medium"),M(3),We("active",$e(35,21,i.selectedPriority)==="low"),M(4),Ne((r=$e(39,23,i.filteredReports$))?38:-1,r)}},dependencies:[Tt,gc,gn,Bn,gr,Yr,Ar,po,ar,An],styles:[".police-reports-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#0d1a3d,#1a2a5e,#0d1a3d);padding:12px 12px 32px;color:#000}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);padding:10px 16px;display:flex;align-items:center;gap:12px;border-bottom:1px solid rgba(212,168,75,.2);position:sticky;top:0;z-index:10;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}.back-button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#ffffff1a;border:1px solid rgba(255,255,255,.15);color:#fff;text-decoration:none}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;background:#ffffff14;display:flex;align-items:center;justify-content:center;color:#d4a84b}.header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;color:#fff}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0 0;color:#ffffffbf;font-size:.95rem}.controls-section[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:12px auto 0;display:flex;flex-direction:column;gap:10px;align-items:center}.search-container[_ngcontent-%COMP%]{width:100%;max-width:720px;display:flex;align-items:center;position:relative;background:#fff;border:1px solid #dcdfe6;border-radius:12px;padding:10px 12px;box-shadow:0 4px 16px #00000014}.search-icon[_ngcontent-%COMP%]{width:18px;height:18px;color:#888;margin-right:10px}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;font-size:1rem;color:#333}.clear-search[_ngcontent-%COMP%]{border:none;background:transparent;cursor:pointer;padding:4px;color:#888}.filter-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}.filter-tab[_ngcontent-%COMP%]{padding:10px 16px;border-radius:24px;border:1px solid rgba(255,255,255,.2);background:#ffffff14;color:#fff;cursor:pointer;transition:all .2s ease}.filter-tab.active[_ngcontent-%COMP%]{background:#d4a84b33;border-color:#d4a84b;color:#d4a84b}.filter-tab.priority-high.active[_ngcontent-%COMP%]{background:#c41e3a2e;border-color:#c41e3a;color:#ff6b6b}.filter-tab.priority-medium.active[_ngcontent-%COMP%]{background:#d4a84b33;border-color:#d4a84b;color:#d4a84b}.filter-tab.priority-low.active[_ngcontent-%COMP%]{background:#2ecc7133;border-color:#2ecc71;color:#2ecc71}.reports-list[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:16px auto 24px;padding:0 12px;display:flex;flex-direction:column;gap:16px;align-items:center}.feed-item[_ngcontent-%COMP%]{border-left:5px solid #ccc;padding:24px 20px 16px;margin-bottom:12px;background-color:#fff;border-radius:12px;box-shadow:0 4px 16px #0000001a;transition:box-shadow .2s ease;width:100%;max-width:720px;word-break:break-word;display:flex;flex-direction:column;gap:12px}.feed-item[_ngcontent-%COMP%]:hover{box-shadow:0 6px 18px #00000024}.feed-item.approved[_ngcontent-%COMP%]{border-left-color:#4caf50}.feed-item.priority-high[_ngcontent-%COMP%]{border-left-color:#c41e3a}.feed-item.priority-medium[_ngcontent-%COMP%]{border-left-color:#d4a84b}.feed-item.priority-low[_ngcontent-%COMP%]{border-left-color:#2ecc71}.feed-item.no-image[_ngcontent-%COMP%]{padding-bottom:8px}.feed-item.no-image[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{display:none}.item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:10px;font-size:.8rem;font-weight:600;text-transform:capitalize;background:#0000000f;color:#333}.item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.report-desc[_ngcontent-%COMP%]{font-size:1.08rem;color:#222;font-weight:600;margin:0}.meta-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:14px;align-items:center;font-size:.98rem;color:#444}.meta-row[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%], .meta-row[_ngcontent-%COMP%]   .landmark-row[_ngcontent-%COMP%], .meta-row[_ngcontent-%COMP%]   .date-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.meta-row[_ngcontent-%COMP%]   .date-row[_ngcontent-%COMP%]{color:#888;font-size:.95rem}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:220px;width:auto;height:auto;border-radius:8px;border:1px solid #ddd;box-shadow:0 2px 8px #00000014;margin:0 auto;display:block}.item-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:6px}.view-details-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:10px;background:linear-gradient(135deg,#d4a84b,#c9a227);color:#1a2a5e;text-decoration:none;font-weight:600;transition:all .2s ease}.view-details-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #d4a84b59;transform:translateY(-1px)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 24px;color:#fff}.empty-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 18px;border-radius:50%;background:#ffffff0d;display:flex;align-items:center;justify-content:center;color:#fff9}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#ffffffb3}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{padding:10px 12px}.header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem}.controls-section[_ngcontent-%COMP%]{padding:0 8px}.feed-item[_ngcontent-%COMP%]{padding:18px 14px 12px}.report-desc[_ngcontent-%COMP%]{font-size:1rem}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:180px}}@media (max-width: 480px){.filter-tab[_ngcontent-%COMP%]{padding:8px 12px}.meta-row[_ngcontent-%COMP%]{gap:10px}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:150px}}"]})};function $se(n,e){if(n&1&&(b(0,"option",19),I(1),w()),n&2){let t=e.$implicit;W("value",t),M(),Te(" ",t," ")}}function Hse(n,e){if(n&1){let t=ve();b(0,"div",7)(1,"select",8),jt("ngModelChange",function(r){q(t);let o=B(2);return Kt(o.filterBarangay,r)||(o.filterBarangay=r),G(r)}),b(2,"option",17),I(3,"All Barangays"),w(),ie(4,$se,2,2,"option",18),w()()}if(n&2){let t=B(2);M(),zt("ngModel",t.filterBarangay),M(3),W("ngForOf",t.barangayList)}}function qse(n,e){if(n&1&&(b(0,"p"),I(1," Showing "),b(2,"strong"),I(3),w(),I(4," of "),b(5,"strong"),I(6),w(),I(7," reports "),w()),n&2){let t=B().ngIf,i=B().ngIf;M(3),ue(t.length),M(3),ue(i.length)}}function Gse(n,e){if(n&1&&(b(0,"div",20),ie(1,qse,8,2,"p",21),w()),n&2){let t=B().ngIf;M(),W("ngIf",t.length>0)}}function Wse(n,e){if(n&1&&(b(0,"p")(1,"strong"),I(2,"City:"),w(),I(3),w()),n&2){let t=B().$implicit;M(3),Te(" ",t.city)}}function Kse(n,e){if(n&1&&(b(0,"p",28)(1,"strong"),I(2,"GPS:"),w(),b(3,"span",30),I(4),Me(5,"number"),Me(6,"number"),w()()),n&2){let t=B().$implicit;M(4),qn("",ri(5,2,t.location.lat,"1.4-4"),", ",ri(6,5,t.location.lng,"1.4-4"))}}function Qse(n,e){if(n&1&&(b(0,"div",31),oe(1,"img",32),w()),n&2){let t=B().$implicit;M(),W("src",t.imageUrl,xn)}}function Yse(n,e){if(n&1&&(b(0,"div",24)(1,"div",25)(2,"h3"),I(3),w(),b(4,"span",26),I(5),Me(6,"uppercase"),w()(),b(7,"div",27)(8,"p")(9,"strong"),I(10,"Location:"),w(),I(11),w(),b(12,"p")(13,"strong"),I(14,"Reporter:"),w(),I(15),w(),b(16,"p")(17,"strong"),I(18,"Submitted:"),w(),I(19),Me(20,"date"),w(),Re(21,Wse,4,1,"p"),Re(22,Kse,7,8,"p",28),w(),ie(23,Qse,2,1,"div",29),w()),n&2){let t=e.$implicit;M(3),ue(t.description),M(),ld("priority-"+(t.priority||"medium")),M(),Te(" ",$e(6,11,t.priority||"medium")," "),M(6),qn(" ",t.street,", ",t.barangay),M(4),Te(" ",t.reporterName||"N/A"),M(4),Te(" ",ri(20,13,t.createdAt,"short")," "),M(2),Ne(t.city?21:-1),M(),Ne(t.location?22:-1),M(),W("ngIf",t.imageUrl)}}function Zse(n,e){if(n&1&&(pt(0),ie(1,Yse,24,16,"div",23),gt()),n&2){let t=B().ngIf;M(),W("ngForOf",t)}}function Jse(n,e){n&1&&(b(0,"p"),I(1,"No approved reports available at this time."),w())}function Xse(n,e){n&1&&(b(0,"p"),I(1," No reports match your search criteria. "),w())}function eae(n,e){if(n&1&&(b(0,"div",33),ie(1,Jse,2,0,"p",21)(2,Xse,2,0,"p",21),w()),n&2){let t=B(2).ngIf,i=B();M(),W("ngIf",t.length===0),M(),W("ngIf",t.length>0&&i.getFilteredReports(t).length===0)}}function tae(n,e){if(n&1&&(b(0,"div",22),ie(1,Zse,2,1,"ng-container",3)(2,eae,3,2,"ng-template",null,1,Qt),w()),n&2){let t=e.ngIf,i=Pt(3);M(),W("ngIf",t.length>0)("ngIfElse",i)}}function nae(n,e){if(n&1){let t=ve();b(0,"div")(1,"div",4)(2,"div",5)(3,"input",6),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.searchTerm,r)||(o.searchTerm=r),G(r)}),w()(),b(4,"div",7)(5,"select",8),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.filterPriority,r)||(o.filterPriority=r),G(r)}),b(6,"option",9),I(7,"All Priorities"),w(),b(8,"option",10),I(9,"High Priority"),w(),b(10,"option",11),I(11,"Medium Priority"),w(),b(12,"option",12),I(13,"Low Priority"),w()()(),ie(14,Hse,5,2,"div",13),b(15,"button",14),ee("click",function(){q(t);let r=B();return G(r.resetFilters())}),I(16,"Reset Filters"),w()(),ie(17,Gse,2,1,"div",15)(18,tae,4,2,"div",16),w()}if(n&2){let t=e.ngIf,i=B();M(3),zt("ngModel",i.searchTerm),M(2),zt("ngModel",i.filterPriority),M(9),W("ngIf",i.uniqueBarangays.size>0),M(3),W("ngIf",i.getFilteredReports(t)),M(),W("ngIf",i.getFilteredReports(t))}}function iae(n,e){n&1&&(b(0,"div",34),I(1,"Loading reports..."),w())}var Px=class n{reportService=$(Vn);searchTerm="";filterPriority="all";filterBarangay="";uniqueBarangays=new Set;approvedReports$=this.reportService.getAllReports().pipe(pe(e=>{let t=e.filter(i=>i.status==="approved");return this.uniqueBarangays=new Set(t.map(i=>i.barangay).filter(i=>i)),t}));get barangayList(){return Array.from(this.uniqueBarangays)}getFilteredReports(e){let t=e;if(this.searchTerm.trim()){let i=this.searchTerm.toLowerCase();t=t.filter(r=>r.description.toLowerCase().includes(i)||r.street?.toLowerCase().includes(i)||r.barangay?.toLowerCase().includes(i)||r.reporterName?.toLowerCase().includes(i))}return this.filterPriority!=="all"&&(t=t.filter(i=>i.priority===this.filterPriority)),this.filterBarangay&&(t=t.filter(i=>i.barangay===this.filterBarangay)),t}resetFilters(){this.searchTerm="",this.filterPriority="all",this.filterBarangay=""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-user-dashboard"]],decls:9,vars:4,consts:[["loading",""],["noReports",""],[1,"user-dashboard-container"],[4,"ngIf","ngIfElse"],[1,"filters-bar"],[1,"filter-group","search-group"],["type","text","placeholder","Search by description, location, or reporter name...",1,"search-input",3,"ngModelChange","ngModel"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","high"],["value","medium"],["value","low"],["class","filter-group",4,"ngIf"],[1,"btn-reset",3,"click"],["class","results-info",4,"ngIf"],["class","reports-scroll-container",4,"ngIf"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"results-info"],[4,"ngIf"],[1,"reports-scroll-container"],["class","report-card",4,"ngFor","ngForOf"],[1,"report-card"],[1,"report-header"],[1,"status-badge","approved"],[1,"report-details"],[1,"gps-info"],["class","report-image",4,"ngIf"],[1,"coords"],[1,"report-image"],["alt","Incident image",3,"src"],[1,"no-reports"],[1,"loading"]],template:function(t,i){if(t&1&&(b(0,"div",2)(1,"h2"),I(2,"Report Management"),w(),b(3,"p"),I(4,"View all approved incident reports in Baguio City."),w(),ie(5,nae,19,5,"div",3),Me(6,"async"),ie(7,iae,2,0,"ng-template",null,0,Qt),w()),t&2){let r=Pt(8);M(5),W("ngIf",$e(6,2,i.approvedReports$))("ngIfElse",r)}},dependencies:[Tt,ai,gn,Bn,iu,ru,gr,Da,Yr,Ar,An,mc,Ag,_s],styles:[".user-dashboard-container[_ngcontent-%COMP%]{max-width:900px;margin:16px auto;padding:16px}.user-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:clamp(1.25rem,4vw,2rem);font-weight:800;letter-spacing:-.3px;border-bottom:2px solid #1a2a5e;padding-bottom:12px;margin-bottom:8px}.user-dashboard-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:16px;font-size:clamp(.85rem,2.5vw,.95rem);line-height:1.5}.filters-bar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:16px;padding:14px;background-color:#fff;border-radius:10px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014}.filter-group[_ngcontent-%COMP%]{flex:1;min-width:140px}.filter-group.search-group[_ngcontent-%COMP%]{flex:1 1 100%;min-width:100%}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:2px solid #e0e0e0;border-radius:6px;font-size:.9rem;font-family:inherit;background-color:#f8f9fa;color:#333;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:44px}.search-input[_ngcontent-%COMP%]:hover, .filter-select[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background-color:#fff}.search-input[_ngcontent-%COMP%]:focus, .filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background-color:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.btn-reset[_ngcontent-%COMP%]{padding:10px 16px;background-color:#fff;border:2px solid #e0e0e0;border-radius:6px;font-size:.85rem;font-weight:600;color:#333;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:44px;white-space:nowrap}.btn-reset[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#1a2a5e;color:#1a2a5e;transform:translateY(-2px);box-shadow:0 8px 24px #1a2a5e26}@media (max-width: 768px){.filters-bar[_ngcontent-%COMP%]{gap:8px;padding:12px}.filter-group[_ngcontent-%COMP%]{min-width:120px}.btn-reset[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem;min-height:40px}}@media (max-width: 480px){.filters-bar[_ngcontent-%COMP%]{flex-direction:column;gap:8px;padding:10px}.filter-group[_ngcontent-%COMP%], .filter-group.search-group[_ngcontent-%COMP%]{flex:1 1 100%;min-width:100%}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%]{padding:8px 10px;font-size:16px;min-height:44px}.btn-reset[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:.75rem}}.results-info[_ngcontent-%COMP%]{margin-bottom:10px;padding:6px 0;font-size:clamp(.8rem,2vw,.9rem);color:#666}.results-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.reports-scroll-container[_ngcontent-%COMP%]{height:500px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:10px;padding:12px;background-color:#fff;display:flex;flex-direction:column;gap:12px;box-shadow:0 4px 12px #0000000f}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f5f5;border-radius:8px}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:8px}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#764ba2,#667eea);box-shadow:0 0 6px #667eea4d}.reports-scroll-container[_ngcontent-%COMP%]{scrollbar-color:#667eea #f5f5f5;scrollbar-width:thin}@media (max-width: 768px){.reports-scroll-container[_ngcontent-%COMP%]{height:400px;padding:10px;gap:10px}}@media (max-width: 480px){.reports-scroll-container[_ngcontent-%COMP%]{height:350px;padding:8px;gap:8px}}.report-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:10px;padding:14px;background-color:#fff;box-shadow:0 2px 8px #0000000f;transition:all .3s cubic-bezier(.4,0,.2,1);flex-shrink:0}.report-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #667eea26;border-color:#667eea;transform:translateY(-3px)}.report-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px;gap:8px;flex-wrap:wrap}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#1a1a1a;font-size:clamp(.9rem,2.5vw,1.05rem);font-weight:700;flex:1;word-break:break-word;min-width:150px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:5px 10px;border-radius:16px;font-size:.65rem;font-weight:700;white-space:nowrap;text-transform:uppercase;letter-spacing:.3px;flex-shrink:0}.status-badge.priority-high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff;box-shadow:0 4px 12px #ff6b6b33}.status-badge.priority-medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa94d,#fd7e14);color:#fff;box-shadow:0 4px 12px #ffa04d33}.status-badge.priority-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff;box-shadow:0 4px 12px #51cf6633}.report-details[_ngcontent-%COMP%]{margin-bottom:10px;line-height:1.5;font-size:.85rem}.report-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;color:#555}.report-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a1a1a;font-weight:600}.coords[_ngcontent-%COMP%]{font-family:Monaco,Courier New,monospace;background-color:#f8f9fa;padding:3px 6px;border-radius:3px;font-size:.75rem;color:#667eea;word-break:break-all}.gps-info[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.report-image[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:160px;max-height:120px;width:auto;height:auto;border-radius:6px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014;transition:all .3s cubic-bezier(.4,0,.2,1)}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 24px #667eea33}.no-reports[_ngcontent-%COMP%]{text-align:center;padding:40px 16px;color:#999;font-size:.9rem;display:flex;align-items:center;justify-content:center;min-height:150px}.no-reports[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading[_ngcontent-%COMP%]{text-align:center;padding:30px 16px;color:#999;font-style:italic;font-size:.9rem}@media (max-width: 768px){.report-card[_ngcontent-%COMP%]{padding:12px}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.95rem}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;font-size:.6rem}.report-details[_ngcontent-%COMP%]{font-size:.8rem}.coords[_ngcontent-%COMP%]{font-size:.7rem;padding:2px 4px}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:140px;max-height:100px}}@media (max-width: 480px){.report-card[_ngcontent-%COMP%]{padding:10px;margin:0;border-radius:8px}.report-header[_ngcontent-%COMP%]{margin-bottom:8px;gap:6px}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.85rem;min-width:120px}.status-badge[_ngcontent-%COMP%]{padding:3px 6px;font-size:.55rem;border-radius:12px}.report-details[_ngcontent-%COMP%]{font-size:.75rem;margin-bottom:8px;line-height:1.4}.report-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0}.coords[_ngcontent-%COMP%]{font-size:.65rem;padding:2px 4px}.gps-info[_ngcontent-%COMP%]{font-size:.7rem}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:130px;max-height:90px}.no-reports[_ngcontent-%COMP%]{padding:30px 12px;min-height:120px;font-size:.8rem}.loading[_ngcontent-%COMP%]{padding:20px 12px;font-size:.8rem}}@media (max-width: 375px){.user-dashboard-container[_ngcontent-%COMP%]{padding:10px;margin:8px auto}.filters-bar[_ngcontent-%COMP%]{padding:8px;gap:6px}.report-card[_ngcontent-%COMP%]{padding:8px}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.8rem}.report-details[_ngcontent-%COMP%]{font-size:.7rem}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:120px;max-height:80px}.reports-scroll-container[_ngcontent-%COMP%]{height:320px;padding:6px;gap:6px}}"]})};function rae(n,e){if(n&1){let t=ve();b(0,"div",6)(1,"div",7)(2,"strong"),I(3),w(),b(4,"button",8),ee("click",function(){q(t);let r=B();return G(r.closeAlert())}),I(5,"\xD7"),w()()()}if(n&2){let t=B();M(3),ue(t.sosMessage)}}function oae(n,e){if(n&1&&(b(0,"div",18)(1,"span",19),I(2,"GPS Location:"),w(),b(3,"span",24),I(4),w()()),n&2){let t=B(4);M(4),qn(" ",t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null||t.selectedSOS.sosDetails.location.lat==null?null:t.selectedSOS.sosDetails.location.lat.toFixed(6),", ",t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null||t.selectedSOS.sosDetails.location.lng==null?null:t.selectedSOS.sosDetails.location.lng.toFixed(6)," ")}}function sae(n,e){if(n&1&&(b(0,"div",18)(1,"span",19),I(2,"Map Link:"),w(),b(3,"a",25),I(4," Open in Google Maps "),w()()),n&2){let t=B(4);M(3),W("href","https://www.google.com/maps?q="+(t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null?null:t.selectedSOS.sosDetails.location.lat)+","+(t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null?null:t.selectedSOS.sosDetails.location.lng),xn)}}function aae(n,e){if(n&1){let t=ve();b(0,"div",26)(1,"button",27),ee("click",function(){q(t);let r=B(4);return G(r.respondToSOS(r.selectedSOS.id))}),I(2," Mark as Responded "),w()()}}function cae(n,e){if(n&1){let t=ve();b(0,"div",26)(1,"button",28),ee("click",function(){q(t);let r=B(4);return G(r.resolveSOS(r.selectedSOS.id))}),I(2," Mark as Resolved "),w()()}}function lae(n,e){n&1&&(b(0,"div",29),I(1," This emergency has been resolved. "),w())}function uae(n,e){if(n&1){let t=ve();b(0,"div",12),ee("click",function(){q(t);let r=B(3);return G(r.closeSOSDetail())}),b(1,"div",13),ee("click",function(r){return q(t),G(r.stopPropagation())}),b(2,"div",14)(3,"h3"),I(4,"Emergency SOS Details"),w(),b(5,"button",15),ee("click",function(){q(t);let r=B(3);return G(r.closeSOSDetail())}),I(6,"\xD7"),w()(),b(7,"div",16)(8,"div",17),I(9),Me(10,"uppercase"),w(),b(11,"div",18)(12,"span",19),I(13,"Reporter Name:"),w(),b(14,"span",20),I(15),w()(),b(16,"div",18)(17,"span",19),I(18,"Email:"),w(),b(19,"span",20),I(20),w()(),b(21,"div",18)(22,"span",19),I(23,"Time Reported:"),w(),b(24,"span",20),I(25),Me(26,"date"),w()(),ie(27,oae,5,2,"div",21)(28,sae,5,1,"div",21),w(),ie(29,aae,3,0,"div",22)(30,cae,3,0,"div",22)(31,lae,2,0,"div",23),w()()}if(n&2){let t=B(3);M(8),W("ngClass","status-"+(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)),M(),Te(" ",$e(10,10,t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)," "),M(6),ue(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.userName),M(5),ue(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.userEmail),M(5),ue(ri(26,12,t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.timestamp,"medium")),M(2),W("ngIf",t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.location),M(),W("ngIf",t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.location),M(),W("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="pending"),M(),W("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="responded"),M(),W("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="resolved")}}function dae(n,e){if(n&1){let t=ve();b(0,"div",49)(1,"span",50),I(2),Me(3,"uppercase"),w(),b(4,"button",51),ee("click",function(r){q(t);let o=B().$implicit;return B(5).onNotificationClick(o),G(r.stopPropagation())}),I(5," View Details "),w()()}if(n&2){let t=B().$implicit;M(),W("ngClass","status-"+t.sosDetails.status),M(),Te(" ",$e(3,2,t.sosDetails.status)," ")}}function hae(n,e){if(n&1){let t=ve();b(0,"button",52),ee("click",function(r){q(t);let o=B().$implicit;return B(5).quickRespondToSOS(o),G(r.stopPropagation())}),re(),b(1,"svg",46),oe(2,"path",53),w(),I(3," Respond "),w()}}function fae(n,e){if(n&1){let t=ve();b(0,"button",54),ee("click",function(r){q(t);let o=B().$implicit;return B(5).markAsRead(o.id),G(r.stopPropagation())}),re(),b(1,"svg",55),oe(2,"polyline",56),w()()}}function pae(n,e){if(n&1){let t=ve();b(0,"div",36),Me(1,"async"),oe(2,"div",37),b(3,"div",38),ee("click",function(){let r=q(t).$implicit,o=B(5);return G(o.onNotificationClick(r))}),b(4,"p",39),I(5),w(),b(6,"small",40),I(7),Me(8,"date"),w(),ie(9,dae,6,4,"div",41),w(),b(10,"div",42),ie(11,hae,4,0,"button",43)(12,fae,3,0,"button",44),b(13,"button",45),ee("click",function(r){let o=q(t).$implicit;return B(5).deleteNotification(o.id),G(r.stopPropagation())}),re(),b(14,"svg",46),oe(15,"polyline",47)(16,"path",48),w()()()()}if(n&2){let t=e.$implicit,i=B(5);We("clickable",t.sosDetails&&$e(1,9,i.isAdmin$)),W("ngClass",i.getNotificationClass(t)),M(2),W("innerHTML",i.getNotificationIcon(t.type),Ov),M(3),ue(t.message),M(2),Te(" ",ri(8,11,t.createdAt,"short")," "),M(2),W("ngIf",t.sosDetails),M(2),W("ngIf",t.sosDetails&&t.sosDetails.status==="pending"),M(),W("ngIf",!t.read)}}function gae(n,e){if(n&1){let t=ve();pt(0),b(1,"div",31)(2,"p",32)(3,"strong"),I(4,"Emergency SOS Alerts"),w(),I(5," - You have "),b(6,"strong"),I(7),w(),I(8," alert(s) "),w(),b(9,"button",33),ee("click",function(){q(t);let r=B(4);return G(r.clearAll())}),I(10,"Clear All"),w()(),b(11,"div",34),ie(12,pae,17,14,"div",35),w(),gt()}if(n&2){let t=B().ngIf;M(7),ue(t.length),M(5),W("ngForOf",t)}}function mae(n,e){n&1&&(b(0,"div",57)(1,"p"),I(2,"No emergency SOS alerts at this time."),w()())}function _ae(n,e){if(n&1&&(b(0,"div",30),ie(1,gae,13,2,"ng-container",5)(2,mae,3,0,"ng-template",null,2,Qt),w()),n&2){let t=e.ngIf,i=Pt(3);M(),W("ngIf",t.length>0)("ngIfElse",i)}}function vae(n,e){if(n&1&&(pt(0),ie(1,uae,32,15,"div",10)(2,_ae,4,2,"div",11),Me(3,"async"),gt()),n&2){let t=B(2),i=Pt(9);M(),W("ngIf",t.selectedSOS),M(),W("ngIf",$e(3,3,t.adminNotifications$))("ngIfElse",i)}}function yae(n,e){if(n&1&&(b(0,"p",66),I(1),w()),n&2){let t=B(2).$implicit;M(),Te(" Admin Note: ",t.reportDetails.adminNote," ")}}function bae(n,e){if(n&1&&(b(0,"div",63)(1,"span",64),I(2),Me(3,"uppercase"),w(),ie(4,yae,2,1,"p",65),w()),n&2){let t=B().$implicit;M(),W("ngClass","status-"+t.reportDetails.action),M(),Te(" Report ",$e(3,3,t.reportDetails.action)," "),M(2),W("ngIf",t.reportDetails.adminNote)}}function wae(n,e){if(n&1){let t=ve();b(0,"button",54),ee("click",function(r){q(t);let o=B().$implicit;return B(5).markAsRead(o.id),G(r.stopPropagation())}),re(),b(1,"svg",55),oe(2,"polyline",56),w()()}}function xae(n,e){if(n&1){let t=ve();b(0,"div",60),oe(1,"div",37),b(2,"div",61)(3,"p",39),I(4),w(),b(5,"small",40),I(6),Me(7,"date"),w(),ie(8,bae,5,5,"div",62),w(),b(9,"div",42),ie(10,wae,3,0,"button",44),b(11,"button",45),ee("click",function(r){let o=q(t).$implicit;return B(5).deleteNotification(o.id),G(r.stopPropagation())}),re(),b(12,"svg",46),oe(13,"polyline",47)(14,"path",48),w()()()()}if(n&2){let t=e.$implicit,i=B(5);W("ngClass",i.getNotificationClass(t)),M(),W("innerHTML",i.getNotificationIcon(t.type),Ov),M(3),ue(t.message),M(2),Te(" ",ri(7,6,t.createdAt,"short")," "),M(2),W("ngIf",t.reportDetails),M(2),W("ngIf",!t.read)}}function Cae(n,e){if(n&1){let t=ve();pt(0),b(1,"div",31)(2,"p",32)(3,"strong"),I(4,"Your Updates"),w(),I(5," - You have "),b(6,"strong"),I(7),w(),I(8," notification(s) "),w(),b(9,"button",33),ee("click",function(){q(t);let r=B(4);return G(r.clearAll())}),I(10,"Clear All"),w()(),b(11,"div",58),ie(12,xae,15,9,"div",59),w(),gt()}if(n&2){let t=B().ngIf;M(7),ue(t.length),M(5),W("ngForOf",t)}}function Eae(n,e){n&1&&(b(0,"div",57)(1,"p"),I(2,"No notifications yet. Stay safe!"),w()())}function Iae(n,e){if(n&1&&(b(0,"div",30),ie(1,Cae,13,2,"ng-container",5)(2,Eae,3,0,"ng-template",null,2,Qt),w()),n&2){let t=e.ngIf,i=Pt(3);M(),W("ngIf",t.length>0)("ngIfElse",i)}}function Pae(n,e){if(n&1&&(pt(0),ie(1,Iae,4,2,"div",11),Me(2,"async"),gt()),n&2){let t=B(2),i=Pt(9);M(),W("ngIf",$e(2,2,t.citizenNotifications$))("ngIfElse",i)}}function Tae(n,e){if(n&1&&(pt(0),ie(1,vae,4,5,"ng-container",9),Me(2,"async"),ie(3,Pae,3,4,"ng-container",9),Me(4,"async"),gt()),n&2){let t=B();M(),W("ngIf",$e(2,2,t.isAdmin$)),M(2),W("ngIf",!$e(4,4,t.isAdmin$))}}function Sae(n,e){n&1&&(b(0,"div",67),re(),b(1,"svg",68),oe(2,"path",69)(3,"circle",70),w(),_e(),b(4,"h3"),I(5,"Please Log In"),w(),b(6,"p"),I(7,"You need to be logged in to view notifications and safety alerts."),w(),b(8,"p"),I(9,"Log in to receive important updates about your reports and emergency alerts."),w()())}function Mae(n,e){n&1&&(b(0,"div",71),I(1,"Loading notifications..."),w())}var Tx=class n{route=$(sr);notificationService=$(Aa);authService=$(Dn);toastService=$(Ni);showSosAlert=!1;sosMessage="";selectedSOS=null;notifications$=this.notificationService.getNotifications();isAdmin$=this.authService.isAdmin$;currentUser$=this.authService.currentUser$;adminNotifications$=this.notificationService.getAdminNotifications();citizenNotifications$=this.notificationService.getCitizenNotifications();ngOnInit(){this.route.snapshot.queryParamMap.get("sos")==="sent"&&this.triggerSosAlert()}triggerSosAlert(){this.sosMessage="EMERGENCY SOS SENT - Police/Admin have been notified and will respond immediately. Stay safe!",this.showSosAlert=!0,setTimeout(()=>{this.showSosAlert=!1},1e4)}closeAlert(){this.showSosAlert=!1}onNotificationClick(e){e.sosDetails&&this.authService.isAdmin$.pipe(Mi(1)).subscribe(t=>{t&&(this.selectedSOS=e)})}closeSOSDetail(){this.selectedSOS=null}respondToSOS(e){this.selectedSOS&&this.selectedSOS.sosDetails&&(this.notificationService.markSOSAsResponded(e),this.notificationService.notifySOSResponse(this.selectedSOS.sosDetails.userName,this.selectedSOS.sosDetails.userEmail,"responded"),this.selectedSOS=Ee(te({},this.selectedSOS),{sosDetails:Ee(te({},this.selectedSOS.sosDetails),{status:"responded"})}),this.toastService.success("SOS marked as responded. User has been notified."))}resolveSOS(e){this.selectedSOS&&this.selectedSOS.sosDetails&&(this.notificationService.markSOSAsResolved(e),this.notificationService.notifySOSResponse(this.selectedSOS.sosDetails.userName,this.selectedSOS.sosDetails.userEmail,"resolved"),this.selectedSOS=Ee(te({},this.selectedSOS),{sosDetails:Ee(te({},this.selectedSOS.sosDetails),{status:"resolved"})}),this.toastService.success("SOS has been resolved. User has been notified."))}quickRespondToSOS(e){e.sosDetails&&(this.notificationService.markSOSAsResponded(e.id),this.notificationService.notifySOSResponse(e.sosDetails.userName,e.sosDetails.userEmail,"responded"),this.toastService.success("Quick response sent. User has been notified."))}deleteNotification(e){this.notificationService.deleteNotification(e),this.selectedSOS&&this.selectedSOS.id===e&&(this.selectedSOS=null),this.toastService.info("Notification deleted")}markAsRead(e){this.notificationService.markAsRead(e)}clearAll(){confirm("Clear all notifications?")&&(this.notificationService.clearAll(),this.selectedSOS=null,this.toastService.info("All notifications cleared"))}getNotificationIcon(e){switch(e){case"sos":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc3545" stroke-width="2"><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>';case"alert":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>';case"action":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>';default:return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>'}}getNotificationClass(e){return{[`notification-${e.type}`]:!0,unread:!e.read}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-notification"]],decls:10,vars:5,consts:[["notLoggedIn",""],["loading",""],["noNotifications",""],[1,"notification-container"],["class","sos-alert",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"sos-alert"],[1,"alert-content"],[1,"close-btn",3,"click"],[4,"ngIf"],["class","sos-detail-modal",3,"click",4,"ngIf"],["class","notifications-panel",4,"ngIf","ngIfElse"],[1,"sos-detail-modal",3,"click"],[1,"sos-detail-content",3,"click"],[1,"sos-detail-header"],[1,"modal-close-btn",3,"click"],[1,"sos-detail-body"],[1,"sos-status-badge",3,"ngClass"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-row",4,"ngIf"],["class","sos-detail-actions",4,"ngIf"],["class","sos-resolved-notice",4,"ngIf"],[1,"detail-value","coordinates"],["target","_blank",1,"map-link",3,"href"],[1,"sos-detail-actions"],[1,"action-btn","respond-btn",3,"click"],[1,"action-btn","resolve-btn",3,"click"],[1,"sos-resolved-notice"],[1,"notifications-panel"],[1,"notifications-header"],[1,"header-title"],[1,"clear-btn",3,"click"],[1,"notifications-list","admin-list"],["class","notification-item admin-notification",3,"ngClass","clickable",4,"ngFor","ngForOf"],[1,"notification-item","admin-notification",3,"ngClass"],[1,"notification-icon",3,"innerHTML"],[1,"notification-content",3,"click"],[1,"notification-message"],[1,"notification-time"],["class","sos-quick-info",4,"ngIf"],[1,"notification-actions"],["class","quick-respond-btn","title","Respond to Emergency",3,"click",4,"ngIf"],["class","mark-read-btn","title","Mark as read",3,"click",4,"ngIf"],["title","Delete",1,"delete-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"sos-quick-info"],[1,"sos-status",3,"ngClass"],[1,"view-details-btn",3,"click"],["title","Respond to Emergency",1,"quick-respond-btn",3,"click"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],["title","Mark as read",1,"mark-read-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["points","20 6 9 17 4 12"],[1,"no-notifications"],[1,"notifications-list","citizen-list"],["class","notification-item citizen-notification",3,"ngClass",4,"ngFor","ngForOf"],[1,"notification-item","citizen-notification",3,"ngClass"],[1,"notification-content"],["class","report-update-info",4,"ngIf"],[1,"report-update-info"],[1,"report-status",3,"ngClass"],["class","admin-note",4,"ngIf"],[1,"admin-note"],[1,"not-logged-in-message"],["width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"loading"]],template:function(t,i){if(t&1&&(b(0,"div",3)(1,"h2"),I(2,"Safety Alerts & Notifications"),w(),ie(3,rae,6,1,"div",4)(4,Tae,5,6,"ng-container",5),Me(5,"async"),ie(6,Sae,10,0,"ng-template",null,0,Qt)(8,Mae,2,0,"ng-template",null,1,Qt),w()),t&2){let r=Pt(7);M(3),W("ngIf",i.showSosAlert),M(),W("ngIf",$e(5,3,i.currentUser$))("ngIfElse",r)}},dependencies:[Tt,gc,ai,gn,An,mc,_s],styles:[".notification-container[_ngcontent-%COMP%]{max-width:700px;margin:30px auto;padding:20px}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]{margin:20px auto;padding:15px}}@media (max-width: 480px){.notification-container[_ngcontent-%COMP%]{margin:15px auto;padding:10px}}.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:2rem;font-weight:800;letter-spacing:-.5px;border-bottom:2px solid #1a2a5e;padding-bottom:12px;margin-bottom:24px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.not-logged-in-message[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:linear-gradient(135deg,#f0f4f8,#e8ecf1);border-radius:8px;border-left:4px solid #1a2a5e}.not-logged-in-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:#1a2a5e;margin-bottom:20px;opacity:.7}.not-logged-in-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1a2a5e;font-size:1.5rem;margin-bottom:12px}.not-logged-in-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:.95rem;margin:8px 0;line-height:1.6}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}}@media (max-width: 480px){.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:15px}}.sos-alert[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b1a,#ee5a6f1a);border:2px solid #ff6b6b;border-radius:12px;margin-bottom:20px;animation:_ngcontent-%COMP%_slideDown .4s cubic-bezier(.34,1.56,.64,1);box-shadow:0 8px 24px #ff6b6b26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.alert-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;color:#ff6b6b;font-weight:700;font-size:1rem;letter-spacing:.3px}@media (max-width: 480px){.alert-content[_ngcontent-%COMP%]{padding:12px;font-size:.9rem}}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#ff6b6b;padding:0;width:40px;height:40px;min-width:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .3s cubic-bezier(.4,0,.2,1)}.close-btn[_ngcontent-%COMP%]:hover{background-color:#ff6b6b26;transform:rotate(90deg)}.sos-detail-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sos-detail-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;max-width:500px;width:100%;box-shadow:0 20px 50px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.sos-detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0;background:linear-gradient(135deg,#1a2a5e,#2a3f7a);border-radius:12px 12px 0 0}.sos-detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.2rem;font-weight:600}.modal-close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;font-size:1.5rem;width:36px;height:36px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}.modal-close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.sos-detail-body[_ngcontent-%COMP%]{padding:24px}.sos-status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 16px;border-radius:20px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;margin-bottom:20px}.sos-status-badge.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.sos-status-badge.status-responded[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.sos-status-badge.status-resolved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.detail-row[_ngcontent-%COMP%]{display:flex;padding:12px 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-label[_ngcontent-%COMP%]{font-weight:600;color:#666;min-width:130px;font-size:.9rem}.detail-value[_ngcontent-%COMP%]{color:#333;font-size:.95rem;word-break:break-word}.detail-value.coordinates[_ngcontent-%COMP%]{font-family:Courier New,monospace;background:#f5f5f5;padding:4px 8px;border-radius:4px;font-size:.85rem}.map-link[_ngcontent-%COMP%]{color:#1a2a5e;text-decoration:none;font-weight:600;display:inline-flex;align-items:center;gap:6px}.map-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#2a3f7a}.sos-detail-actions[_ngcontent-%COMP%]{padding:20px 24px;border-top:1px solid #e0e0e0;display:flex;gap:12px;justify-content:flex-end}.action-btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.respond-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1565c0,#1976d2);color:#fff}.respond-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #1565c04d}.resolve-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2e7d32,#43a047);color:#fff}.resolve-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #2e7d324d}.sos-resolved-notice[_ngcontent-%COMP%]{padding:16px 24px;background:#e8f5e9;color:#2e7d32;text-align:center;font-weight:500;border-radius:0 0 12px 12px}@media (max-width: 480px){.sos-detail-content[_ngcontent-%COMP%]{margin:10px}.sos-detail-header[_ngcontent-%COMP%]{padding:16px 20px}.sos-detail-body[_ngcontent-%COMP%]{padding:20px}.detail-row[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.detail-label[_ngcontent-%COMP%]{min-width:auto}.sos-detail-actions[_ngcontent-%COMP%]{padding:16px 20px;flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%}}.notifications-panel[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;padding:20px}@media (max-width: 480px){.notifications-panel[_ngcontent-%COMP%]{padding:15px;border-radius:6px}}.notifications-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #f0f0f0;gap:12px}.notifications-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#1a2a5e;font-weight:500}.notifications-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a2a5e;font-weight:700}@media (max-width: 480px){.notifications-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:10px}.notifications-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:.9rem}}.notifications-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333;font-size:.95rem}.clear-btn[_ngcontent-%COMP%]{padding:10px 16px;background-color:#f5f5f5;color:#666;border:1px solid #ddd;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .2s;min-height:44px;white-space:nowrap}@media (max-width: 480px){.clear-btn[_ngcontent-%COMP%]{width:100%;text-align:center}}.clear-btn[_ngcontent-%COMP%]:hover{background-color:#eee;border-color:#ccc}.notifications-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.notification-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:15px;border-radius:6px;background-color:#f9f9f9;border-left:4px solid #ccc;transition:all .2s}.notification-item.clickable[_ngcontent-%COMP%]{cursor:pointer}.notification-item.clickable[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;transform:translate(4px)}@media (max-width: 480px){.notification-item[_ngcontent-%COMP%]{padding:12px;gap:10px;flex-wrap:wrap}}.notification-item.unread[_ngcontent-%COMP%]{background-color:#f0f7ff;border-left-color:var(--sentinel-blue, #0b57a4)}.notification-item.notification-sos[_ngcontent-%COMP%]{background-color:#ffebee;border-left-color:#d32f2f}.notification-item.notification-alert[_ngcontent-%COMP%]{background-color:#fff3e0;border-left-color:#ffb300}.notification-item.notification-info[_ngcontent-%COMP%]{background-color:#e3f2fd;border-left-color:#1976d2}.notification-item.notification-action[_ngcontent-%COMP%]{background-color:#e8f5e9;border-left-color:#43a047}.notification-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 6px #0000001a}.notification-icon[_ngcontent-%COMP%]{min-width:40px;display:flex;align-items:flex-start;justify-content:center;padding-top:2px}@media (max-width: 480px){.notification-icon[_ngcontent-%COMP%]{min-width:35px}.notification-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}}.notification-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px;min-width:0}.notification-message[_ngcontent-%COMP%]{margin:0;color:#333;font-weight:500;font-size:.95rem;word-break:break-word}@media (max-width: 480px){.notification-message[_ngcontent-%COMP%]{font-size:.9rem}}.notification-time[_ngcontent-%COMP%]{color:#999;font-size:.85rem}.sos-quick-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:8px;flex-wrap:wrap}.sos-status[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase;padding:3px 8px;border-radius:10px;letter-spacing:.3px}.sos-status.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.sos-status.status-responded[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.sos-status.status-resolved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.view-details-btn[_ngcontent-%COMP%]{font-size:.75rem;padding:4px 12px;background:linear-gradient(135deg,#1a3a52,#2a5a7a);color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:all .2s}.view-details-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #1a3a524d}.quick-respond-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:.8rem;font-weight:600;transition:all .2s;white-space:nowrap}.quick-respond-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #27ae6066}.quick-respond-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.click-hint[_ngcontent-%COMP%]{font-size:.75rem;color:#999;font-style:italic}.notification-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap}@media (max-width: 480px){.notification-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end;padding-top:8px;border-top:1px solid #eee;margin-top:8px}.quick-respond-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}}.mark-read-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{padding:8px 12px;border:none;background-color:transparent;cursor:pointer;transition:all .2s;border-radius:4px;min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center}.mark-read-btn[_ngcontent-%COMP%]:hover, .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mark-read-btn[_ngcontent-%COMP%]{color:#4caf50}.mark-read-btn[_ngcontent-%COMP%]:hover{background-color:#4caf501a}.delete-btn[_ngcontent-%COMP%]{color:#999}.delete-btn[_ngcontent-%COMP%]:hover{color:#d32f2f;background-color:#d32f2f1a}.no-notifications[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999}.notifications-list.admin-list[_ngcontent-%COMP%]   .admin-notification[_ngcontent-%COMP%]{border-left:4px solid #dc3545;background:linear-gradient(90deg,rgba(220,53,69,.03) 0%,transparent 100%)}.admin-notification[_ngcontent-%COMP%]   .sos-quick-info[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-top:8px;padding-top:8px;border-top:1px solid #f0f0f0}.sos-status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:4px;font-size:.75rem;font-weight:700;letter-spacing:.5px}.sos-status.status-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.sos-status.status-responded[_ngcontent-%COMP%]{background:#cfe2ff;color:#084298}.sos-status.status-resolved[_ngcontent-%COMP%]{background:#d1e7dd;color:#0f5132}.view-details-btn[_ngcontent-%COMP%]{padding:4px 12px;background:linear-gradient(135deg,#1a2a5e,#2a3f7a);color:#fff;border:none;border-radius:4px;font-size:.75rem;font-weight:600;cursor:pointer;transition:all .2s}.view-details-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #1a2a5e4d}.notifications-list.citizen-list[_ngcontent-%COMP%]   .citizen-notification[_ngcontent-%COMP%]{border-left:4px solid #4caf50;background:linear-gradient(90deg,rgba(76,175,80,.03) 0%,transparent 100%)}.citizen-notification[_ngcontent-%COMP%]   .report-update-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:8px;padding-top:8px;border-top:1px solid #f0f0f0}.report-status[_ngcontent-%COMP%]{padding:6px 12px;border-radius:4px;font-size:.8rem;font-weight:700;letter-spacing:.5px;width:fit-content}.report-status.status-approved[_ngcontent-%COMP%]{background:#d1e7dd;color:#0f5132}.report-status.status-rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.admin-note[_ngcontent-%COMP%]{font-size:.85rem;color:#555;font-style:italic;margin:0;line-height:1.4}.notification-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 8px;background:#f0f0f0;color:#666;border-radius:3px;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#1a2a5e;font-weight:500}@media (max-width: 480px){.no-notifications[_ngcontent-%COMP%]{padding:30px 15px}}.no-notifications[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:30px;color:#999;font-style:italic}"]})};function Oae(n,e){if(n&1&&(b(0,"div",18),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.errorMessage," ")}}function Aae(n,e){if(n&1){let t=ve();b(0,"section",6)(1,"h2",8),I(2,"Sign In"),w(),b(3,"form",9,0),ee("ngSubmit",function(){q(t);let r=B();return G(r.onSubmitLogin())}),b(5,"div",10)(6,"label",11),I(7,"Email Address"),w(),b(8,"input",12),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.email,r)||(o.email=r),G(r)}),w()(),b(9,"div",10)(10,"label",13),I(11,"Password"),w(),b(12,"div",14)(13,"div",15)(14,"input",16),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.password,r)||(o.password=r),G(r)}),w()(),b(15,"button",17),ee("click",function(){q(t);let r=B();return G(r.togglePasswordVisibility("login"))}),I(16),w()()(),Re(17,Oae,2,1,"div",18),b(18,"button",19),I(19),w()(),b(20,"div",20)(21,"span"),I(22,"or"),w()(),b(23,"div",21)(24,"button",22),ee("click",function(){q(t);let r=B();return G(r.loginWithGoogle())}),re(),b(25,"svg",23),oe(26,"path",24)(27,"path",25)(28,"path",26)(29,"path",27),w(),I(30," Continue with Google "),w()(),_e(),b(31,"div",28)(32,"p"),I(33," Don't have an account? "),b(34,"button",29),ee("click",function(){q(t);let r=B();return G(r.setTab("signup"))}),I(35,"Create one"),w()()()()}if(n&2){let t=Pt(4),i=B();M(8),zt("ngModel",i.email),M(6),W("type",i.showLoginPassword?"text":"password"),zt("ngModel",i.password),M(),rn("aria-pressed",i.showLoginPassword)("aria-label",i.showLoginPassword?"Hide password":"Show password"),M(),Te(" ",i.showLoginPassword?"Hide":"Show"," "),M(),Ne(i.errorMessage?17:-1),M(),W("disabled",t.invalid||i.isLoading),rn("aria-busy",i.isLoading),M(),Te(" ",i.isLoading?"Signing in...":"Sign In"," "),M(5),W("disabled",i.isLoading)}}function Dae(n,e){if(n&1&&(b(0,"div",42),I(1),w()),n&2){let t=B(2);M(),Te(" ",t.errorMessage," ")}}function kae(n,e){if(n&1&&(b(0,"div",43),I(1),w()),n&2){let t=B(2);M(),ue(t.successMessage)}}function Rae(n,e){if(n&1){let t=ve();b(0,"section",7)(1,"h2",30),I(2,"Create Account"),w(),b(3,"p",31),I(4,"Join Mountain Sentinel community"),w(),b(5,"form",32,1),ee("ngSubmit",function(){q(t);let r=B();return G(r.onSubmitSignup())}),b(7,"div",10)(8,"label",33),I(9,"Email Address"),w(),b(10,"input",34),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.email,r)||(o.email=r),G(r)}),w()(),b(11,"div",10)(12,"label",35),I(13,"Full Name (Optional)"),w(),b(14,"input",36),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.displayName,r)||(o.displayName=r),G(r)}),w()(),b(15,"div",10)(16,"label",37),I(17,"Password"),w(),b(18,"div",14)(19,"div",15)(20,"input",38),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.password,r)||(o.password=r),G(r)}),w()(),b(21,"button",17),ee("click",function(){q(t);let r=B();return G(r.togglePasswordVisibility("signup"))}),I(22),w()(),b(23,"small",39),I(24,"Minimum 6 characters"),w()(),b(25,"div",10)(26,"label",40),I(27,"Confirm Password"),w(),b(28,"div",14)(29,"div",15)(30,"input",41),jt("ngModelChange",function(r){q(t);let o=B();return Kt(o.confirmPassword,r)||(o.confirmPassword=r),G(r)}),w()(),b(31,"button",17),ee("click",function(){q(t);let r=B();return G(r.togglePasswordVisibility("confirm"))}),I(32),w()()(),Re(33,Dae,2,1,"div",42),Re(34,kae,2,1,"div",43),b(35,"button",44),I(36),w()(),b(37,"div",28)(38,"p"),I(39," Already have an account? "),b(40,"button",29),ee("click",function(){q(t);let r=B();return G(r.setTab("unified"))}),I(41,"Sign in"),w()()()()}if(n&2){let t=Pt(6),i=B();M(10),zt("ngModel",i.email),M(4),zt("ngModel",i.displayName),M(5),We("show-password",i.showSignupPassword)("hide-password",!i.showSignupPassword),M(),W("type",i.showSignupPassword?"text":"password"),zt("ngModel",i.password),M(),rn("aria-pressed",i.showSignupPassword)("aria-label",i.showSignupPassword?"Hide password":"Show password"),M(),Te(" ",i.showSignupPassword?"Hide":"Show"," "),M(7),We("show-password",i.showConfirmPassword)("hide-password",!i.showConfirmPassword),M(),W("type",i.showConfirmPassword?"text":"password"),zt("ngModel",i.confirmPassword),M(),rn("aria-pressed",i.showConfirmPassword)("aria-label",i.showConfirmPassword?"Hide password":"Show password"),M(),Te(" ",i.showConfirmPassword?"Hide":"Show"," "),M(),Ne(i.errorMessage?33:-1),M(),Ne(i.successMessage?34:-1),M(),W("disabled",t.invalid||i.isLoading),rn("aria-busy",i.isLoading),M(),Te(" ",i.isLoading?"Creating account...":"Create Account"," ")}}var Sx=class n{authService=$(Dn);animationService=$(jo);toastService=$(Ni);tab="unified";email="";password="";displayName="";confirmPassword="";errorMessage=null;successMessage=null;isLoading=!1;showLoginPassword=!1;showSignupPassword=!1;showConfirmPassword=!1;ngOnInit(){this.tab="unified"}setTab(e){this.tab=e,this.errorMessage=null,this.successMessage=null}onSubmitLogin(){return O(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{yield this.authService.login(this.email,this.password),this.toastService.success("Login successful! Welcome back.")}catch(e){this.errorMessage=e.message||"Login failed. Please check your credentials.",this.toastService.error(this.errorMessage||"Login failed")}finally{this.isLoading=!1}})}onSubmitSignup(){return O(this,null,function*(){this.errorMessage=null,this.successMessage=null,this.isLoading=!0;try{if(this.password!==this.confirmPassword){this.errorMessage="Passwords do not match.",this.toastService.error("Passwords do not match."),this.isLoading=!1;return}if(this.password.length<6){this.errorMessage="Password must be at least 6 characters.",this.toastService.error("Password must be at least 6 characters."),this.isLoading=!1;return}yield this.authService.register(this.email,this.password,this.displayName||void 0),this.successMessage="Account created successfully! Redirecting...",this.toastService.success("Account created successfully! Welcome to Baguio Finest."),this.clearForm()}catch(e){this.errorMessage=e.message||"Signup failed.",this.toastService.error(this.errorMessage||"Signup failed")}finally{this.isLoading=!1}})}clearForm(){this.email="",this.password="",this.displayName="",this.confirmPassword=""}loginWithGoogle(){return O(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{yield this.authService.loginWithGoogle(),this.toastService.success("Google login successful! Welcome.")}catch(e){this.errorMessage=e.message||"Google login failed. Please try again.",this.toastService.error(this.errorMessage||"Google login failed")}finally{this.isLoading=!1}})}loginWithFacebook(){return O(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{yield this.authService.loginWithFacebook(),this.toastService.success("Facebook login successful! Welcome.")}catch(e){this.errorMessage=e.message||"Facebook login failed. Please try again.",this.toastService.error(this.errorMessage||"Facebook login failed")}finally{this.isLoading=!1}})}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}togglePasswordVisibility(e){e==="login"?this.showLoginPassword=!this.showLoginPassword:e==="signup"?this.showSignupPassword=!this.showSignupPassword:e==="confirm"&&(this.showConfirmPassword=!this.showConfirmPassword)}ngOnDestroy(){this.animationService.destroyScrollObserver()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-login"]],decls:9,vars:2,consts:[["loginForm","ngForm"],["signupFormRef","ngForm"],["role","main",1,"login-bg"],["role","region","aria-labelledby","login-title",1,"login-card","scroll-reveal","animate-on-load"],[1,"login-header"],["id","login-title"],["aria-labelledby","signin-heading",1,"unified-login-section","scroll-reveal","animate-on-load"],["aria-labelledby","signup-heading",1,"signup-section"],["id","signin-heading"],["aria-describedby","login-error",1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["id","email","type","email","name","email","required","","placeholder","your@email.com","autocomplete","email","aria-required","true",3,"ngModelChange","ngModel"],["for","password"],[1,"password-field"],[1,"password-input-wrapper"],["id","password","name","password","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","current-password","aria-required","true",1,"password-input",3,"ngModelChange","type","ngModel"],["type","button",1,"password-toggle-btn",3,"click"],["id","login-error","role","alert","aria-live","polite",1,"error-message"],["type","submit",1,"login-btn","primary-btn",3,"disabled"],[1,"social-divider"],["role","group","aria-label","Social sign in options",1,"social-login-buttons"],["type","button","aria-label","Sign in with Google",1,"btn-social","google-btn","full-width",3,"click","disabled"],["viewBox","0 0 24 24","width","20","height","20","aria-hidden","true",1,"social-icon"],["fill","#4285F4","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","#34A853","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","#FBBC05","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","#EA4335","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],[1,"auth-switch"],["type","button",1,"link-btn",3,"click"],["id","signup-heading"],[1,"subtitle"],["aria-describedby","signup-error",1,"signup-form",3,"ngSubmit"],["for","signupEmail"],["id","signupEmail","type","email","name","email","required","","placeholder","your@email.com","autocomplete","email","aria-required","true",3,"ngModelChange","ngModel"],["for","displayName"],["id","displayName","type","text","name","displayName","placeholder","Your Full Name","autocomplete","name",3,"ngModelChange","ngModel"],["for","signupPassword"],["id","signupPassword","name","password","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","minlength","6","autocomplete","new-password","aria-required","true","aria-describedby","password-hint",1,"password-input",3,"ngModelChange","type","ngModel"],["id","password-hint"],["for","confirm"],["id","confirm","name","confirm","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","new-password","aria-required","true",1,"password-input",3,"ngModelChange","type","ngModel"],["id","signup-error","role","alert","aria-live","polite",1,"error-message"],["role","status","aria-live","polite",1,"success-message"],["type","submit",1,"signup-btn",3,"disabled"]],template:function(t,i){t&1&&(b(0,"main",2)(1,"div",3)(2,"header",4)(3,"h1",5),I(4,"Baguio Safety Alert"),w(),b(5,"p"),I(6,"Community Emergency Response System"),w()(),Re(7,Aae,36,11,"section",6),Re(8,Rae,42,25,"section",7),w()()),t&2&&(M(7),Ne(i.tab==="unified"?7:-1),M(),Ne(i.tab==="signup"?8:-1))},dependencies:[Tt,Bn,Cp,gr,Yr,xp,Zd,LD,Ar,Yd],styles:['.login-bg[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#1a2a5ef2,#0d1a3dfa,#2a3f7af2);background-size:cover;background-position:center;background-attachment:fixed;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;position:relative;overflow:hidden}.login-bg[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.05) 1px,transparent 1px);background-size:50px 50px;animation:_ngcontent-%COMP%_float 20s linear infinite}@keyframes _ngcontent-%COMP%_float{0%{transform:translate(0)}to{transform:translate(50px,50px)}}@media (max-width: 768px){.login-bg[_ngcontent-%COMP%]{padding:50px 15px 30px;justify-content:flex-start;background-attachment:scroll}}@media (max-width: 480px){.login-bg[_ngcontent-%COMP%]{padding:30px 10px 20px}}.login-card[_ngcontent-%COMP%]{background:#fffffffa;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);color:#1a1a1a;max-width:480px;width:100%;padding:50px 45px;border-radius:24px;box-shadow:0 25px 80px #00000059,0 0 1px #ffffff80 inset;position:relative;border:1px solid rgba(255,255,255,.6);animation:_ngcontent-%COMP%_slideUp .6s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:35px 25px;border-radius:16px;max-width:100%}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;border-bottom:none;padding-bottom:0}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;margin:0 0 8px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#666;margin:0;letter-spacing:.3px;font-weight:500}@media (max-width: 480px){.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}.unified-login-section[_ngcontent-%COMP%], .signup-section[_ngcontent-%COMP%]{margin-top:0;padding:0}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:1.6rem;font-weight:700;margin-bottom:12px;text-align:center;letter-spacing:-.5px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#888;font-size:.95rem;margin-bottom:32px;font-weight:400;line-height:1.5}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:8px}.subtitle[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:24px}}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:600;color:#333;font-size:.9rem;letter-spacing:.2px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #e0e0e0;border-radius:10px;box-sizing:border-box;font-size:1rem;background:#f8f9fa;color:#1a1a1a;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:50px;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa;font-weight:400}.password-field[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;gap:8px}.password-input-wrapper[_ngcontent-%COMP%]{flex:1;position:relative;width:100%}.password-input[_ngcontent-%COMP%]{width:100%;display:block;padding:14px 16px;border:2px solid #e0e0e0;border-radius:10px;box-sizing:border-box;font-size:1rem;background:#f8f9fa;color:#1a1a1a;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:50px;font-family:inherit}.password-input[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.password-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.password-toggle-btn[_ngcontent-%COMP%]{flex-shrink:0;background:transparent;border:1px solid #d0d0d0;cursor:pointer;color:#1a2a5e;padding:6px 12px;transition:all .2s ease;font-size:.85rem;font-weight:600;border-radius:6px;white-space:nowrap;min-height:50px;display:flex;align-items:center;justify-content:center}.password-toggle-btn[_ngcontent-%COMP%]:hover{color:#d4a84b;background:#1a2a5e1a;border-color:#1a2a5e}.password-toggle-btn[_ngcontent-%COMP%]:focus{outline:2px solid #1a2a5e;outline-offset:2px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 14px;font-size:16px}}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:#7f8c8d;font-size:.8rem;margin-top:4px}.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%]{width:100%;padding:16px 24px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:2px solid rgba(212,168,75,.4);border-radius:10px;cursor:pointer;font-size:1.05rem;font-weight:800;transition:all .35s cubic-bezier(.175,.885,.32,1.275);margin-top:12px;box-shadow:0 12px 28px #1a2a5e59,inset 0 1px 2px #fff3;min-height:52px;letter-spacing:.4px;text-transform:uppercase;position:relative;overflow:hidden}.login-btn[_ngcontent-%COMP%]:before, .signup-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);animation:_ngcontent-%COMP%_shimmer 3s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}to{left:100%}}.login-btn[_ngcontent-%COMP%]:hover, .signup-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px) scale(1.02);box-shadow:0 16px 40px #1a2a5e73,inset 0 1px 2px #ffffff4d}.login-btn[_ngcontent-%COMP%]:active, .signup-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px) scale(.98)}.login-btn[_ngcontent-%COMP%]:disabled, .signup-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.login-btn[_ngcontent-%COMP%]:hover:not([disabled]), .signup-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px);box-shadow:0 16px 40px #1a2a5e73,inset 0 1px 2px #ffffff4d}.login-btn[_ngcontent-%COMP%]:active:not([disabled]), .signup-btn[_ngcontent-%COMP%]:active:not([disabled]){transform:translateY(-2px);box-shadow:0 8px 20px #1a2a5e59,inset 0 1px 2px #fff3}.login-btn[_ngcontent-%COMP%]:disabled, .signup-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;box-shadow:0 4px 12px #0000001a}.social-divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:28px 0;gap:16px}.social-divider[_ngcontent-%COMP%]:before, .social-divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:linear-gradient(90deg,transparent,#ddd,transparent)}.social-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#999;font-size:.85rem;font-weight:600;text-transform:uppercase;letter-spacing:1px}.social-login-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}.social-login-buttons[_ngcontent-%COMP%]   .btn-social[_ngcontent-%COMP%]{flex:1;padding:14px 20px;border:2px solid #e8e8e8;border-radius:12px;color:#333;font-weight:600;font-size:.95rem;cursor:pointer;transition:all .3s ease;min-height:52px;display:flex;align-items:center;justify-content:center;gap:10px;background:#fff}.social-login-buttons[_ngcontent-%COMP%]   .btn-social[_ngcontent-%COMP%]   .social-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.social-login-buttons[_ngcontent-%COMP%]   .google-btn[_ngcontent-%COMP%]{background:#fff;border-color:#e0e0e0;color:#333}.social-login-buttons[_ngcontent-%COMP%]   .google-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#f8f9fa;border-color:#1a2a5e;box-shadow:0 6px 16px #1a2a5e26;transform:translateY(-2px)}.social-login-buttons[_ngcontent-%COMP%]   .google-btn.full-width[_ngcontent-%COMP%]{width:100%;flex:none}.social-login-buttons[_ngcontent-%COMP%]   .facebook-btn[_ngcontent-%COMP%]{background:#1877f2;border-color:#1877f2;color:#fff}.social-login-buttons[_ngcontent-%COMP%]   .facebook-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#0a66c2;border-color:#0a66c2;box-shadow:0 6px 16px #1877f259;transform:translateY(-2px)}.social-login-buttons[_ngcontent-%COMP%]   .btn-social[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.primary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d)!important}.quick-login[_ngcontent-%COMP%]{margin:32px 0 0;padding:24px 0 0;border-top:1px solid rgba(26,42,94,.2)}.quick-login-label[_ngcontent-%COMP%]{text-align:center;color:#999;font-size:.85rem;margin:0 0 18px;letter-spacing:.5px;font-weight:600;text-transform:uppercase}.quick-login-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%}.btn-social[_ngcontent-%COMP%]{width:100%;padding:13px 18px;border:2px solid #e0e0e0;border-radius:10px;color:#333;font-weight:700;font-size:.95rem;cursor:pointer;transition:all .35s cubic-bezier(.4,0,.2,1);min-height:50px;display:flex;align-items:center;justify-content:center;gap:12px;background:#fff;position:relative;overflow:hidden;letter-spacing:.2px}.btn-social[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:_ngcontent-%COMP%_shimmerSocial 3s infinite}@keyframes _ngcontent-%COMP%_shimmerSocial{0%{left:-100%}50%,to{left:100%}}.social-icon[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;min-width:24px;text-align:center;position:relative;z-index:1}.btn-social.google-btn[_ngcontent-%COMP%]{background:#fff;border-color:#e0e0e0;color:#333}.btn-social.google-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#f8f9fa;border-color:#1a2a5e;box-shadow:0 8px 20px #1a2a5e33;transform:translateY(-3px)}.btn-social.facebook-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1877f2,#0a66c2);border-color:transparent;color:#fff;box-shadow:0 4px 12px #1877f24d}.btn-social.facebook-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:linear-gradient(135deg,#0a66c2,#001f54);box-shadow:0 12px 28px #1877f266;transform:translateY(-3px)}.btn-social[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;box-shadow:none}@media (max-width: 480px){.btn-quick[_ngcontent-%COMP%]{min-width:80px;padding:10px 12px;font-size:.85rem}.quick-login[_ngcontent-%COMP%]{margin:24px 0;padding:16px 0}}.auth-switch[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.auth-switch[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#95a5b8;font-size:.9rem}.link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#5dade2;cursor:pointer;font-weight:600;font-size:.9rem;text-decoration:underline;transition:color .2s;padding:0}.link-btn[_ngcontent-%COMP%]:hover{color:#3498db}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{margin:15px 0;padding:12px;border-radius:6px;font-size:.9rem;text-align:center}.error-message[_ngcontent-%COMP%]{background-color:#fdeaea;color:#d32f2f;border:1px solid #d32f2f}.success-message[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32;border:1px solid #2e7d32}@media (max-width: 480px){.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{font-size:.85rem;padding:10px}}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible, .login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible, .link-btn[_ngcontent-%COMP%]:focus-visible, .password-toggle-btn[_ngcontent-%COMP%]:focus-visible{outline:3px solid var(--wcag-focus-color, #4a90d9);outline-offset:2px}.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%], .btn-social[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.password-toggle-btn[_ngcontent-%COMP%]{min-width:44px;min-height:44px}@media (prefers-contrast: high){.login-card[_ngcontent-%COMP%], .login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:2px solid #fff}.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%]{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){.login-bg[_ngcontent-%COMP%]:before, .login-card[_ngcontent-%COMP%], .scroll-reveal[_ngcontent-%COMP%], .animate-on-load[_ngcontent-%COMP%]{animation:none!important;transition-duration:.01ms!important}}@media print{.login-bg[_ngcontent-%COMP%]{background:#fff;min-height:auto}.login-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #000}}']})};function Nae(n,e){n&1&&(re(),Y(0,"svg",3),Ye(1,"path",47)(2,"path",48)(3,"line",49)(4,"line",50),J())}function Lae(n,e){n&1&&(re(),Y(0,"svg",3),Ye(1,"line",51)(2,"path",52),J())}function Fae(n,e){n&1&&(re(),Y(0,"svg",3),Ye(1,"polygon",53)(2,"path",54),J())}function Vae(n,e){n&1&&(re(),Y(0,"svg",3),Ye(1,"polygon",53)(2,"line",55)(3,"line",56),J())}function Bae(n,e){if(n&1){let t=ve();Y(0,"div",0)(1,"div",1)(2,"button",2),Ct("click",function(){q(t);let r=B();return G(r.endCall())}),re(),Y(3,"svg",3),Ye(4,"polyline",4),J()(),_e(),Y(5,"div",5)(6,"h3",6),I(7),J(),Y(8,"p",7),I(9),J(),Y(10,"div",8)(11,"span",9),I(12),J()()(),Ye(13,"div",10),J(),Y(14,"div",11)(15,"div",12),Ye(16,"img",13)(17,"div",14)(18,"div",15)(19,"div",16),J()(),Y(20,"div",17)(21,"div",18)(22,"button",19),Ct("click",function(){q(t);let r=B();return G(r.toggleMute())}),Re(23,Nae,5,0,":svg:svg",3)(24,Lae,3,0,":svg:svg",3),Y(25,"span",20),I(26,"Mute"),J()(),Y(27,"button",21),Ct("click",function(){q(t);let r=B();return G(r.viewContacts())}),re(),Y(28,"svg",3),Ye(29,"rect",22)(30,"line",23)(31,"line",24)(32,"line",25)(33,"line",26),J(),_e(),Y(34,"span",20),I(35,"Keypad"),J()(),Y(36,"button",27),Ct("click",function(){q(t);let r=B();return G(r.toggleSpeaker())}),Re(37,Fae,3,0,":svg:svg",3)(38,Vae,4,0,":svg:svg",3),Y(39,"span",20),I(40,"Speaker"),J()()(),Y(41,"div",28)(42,"button",29),Ct("click",function(){q(t);let r=B();return G(r.addCall())}),re(),Y(43,"svg",30),Ye(44,"circle",31)(45,"path",32),J(),_e(),Y(46,"span"),I(47,"+"),J()(),Y(48,"button",33),Ct("click",function(){q(t);let r=B();return G(r.holdCall())}),re(),Y(49,"svg",30),Ye(50,"circle",34)(51,"circle",35)(52,"circle",36)(53,"circle",37),J(),_e(),Y(54,"span"),I(55,"\u2261"),J()(),Y(56,"button",38),Ct("click",function(){q(t);let r=B();return G(r.viewContacts())}),re(),Y(57,"svg",30),Ye(58,"path",39)(59,"circle",40),J(),_e(),Y(60,"span"),I(61,"\u2261"),J()()()(),Y(62,"div",41)(63,"button",42),Ct("click",function(){q(t);let r=B();return G(r.endCall())}),re(),Y(64,"svg",43),Ye(65,"path",44)(66,"path",45),J()(),_e(),Y(67,"p",46),I(68,"End Call"),J()()()}if(n&2){let t=B();M(7),ue(t.callerName),M(2),ue(t.callerStatus),M(3),ue(t.callDisplayTime),M(4),ii("alt",GE(t.callerName))("src",t.callerImage,xn),M(6),We("active",t.isMuted),M(),Ne(t.isMuted?24:23),M(13),We("active",t.isSpeakerOn),M(),Ne(t.isSpeakerOn?37:38)}}var Mx=class n{authService=$(Dn);router=$(Rt);isCallActive=!1;isMuted=!1;isSpeakerOn=!0;callDuration=0;callDisplayTime="0:00";callerImage="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop";callerName="911 Emergency Services";callerStatus="Calling 911\u2026";callTimerSubscription=null;callTimer;ngOnInit(){this.authService.currentUser$.pipe(Mi(1)).subscribe(e=>{if(!e){this.router.navigate(["/login"]);return}this.initializeCall()})}ngOnDestroy(){this.endCall()}initializeCall(){this.isCallActive=!0,this.callDuration=0,this.updateCallTime(),this.callTimer=setInterval(()=>{this.callDuration++,this.updateCallTime()},1e3)}updateCallTime(){let e=Math.floor(this.callDuration/60),t=this.callDuration%60;this.callDisplayTime=`${e}:${t.toString().padStart(2,"0")}`}toggleMute(){this.isMuted=!this.isMuted}toggleSpeaker(){this.isSpeakerOn=!this.isSpeakerOn}volumeUp(){console.log("Volume increased")}volumeDown(){console.log("Volume decreased")}addCall(){console.log("Add call action")}holdCall(){console.log("Hold call toggled")}viewContacts(){console.log("View contacts")}endCall(){this.callTimer&&clearInterval(this.callTimer),this.isCallActive=!1,this.callDuration=0,this.isMuted=!1,this.isSpeakerOn=!0,this.callDisplayTime="0:00",this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-emergency-call"]],decls:1,vars:1,consts:[[1,"call-interface"],[1,"call-header"],["title","End Call",1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["points","15 18 9 12 15 6"],[1,"call-status-info"],[1,"caller-name"],[1,"caller-status"],[1,"call-timer"],[1,"timer-value"],[1,"header-spacer"],[1,"caller-profile"],[1,"caller-image-wrapper"],[1,"caller-image",3,"src","alt"],[1,"pulse-ring","pulse-ring-1"],[1,"pulse-ring","pulse-ring-2"],[1,"pulse-ring","pulse-ring-3"],[1,"call-controls"],[1,"controls-grid"],["title","Toggle Mute",1,"control-btn",3,"click"],[1,"btn-label"],["title","Keypad",1,"control-btn",3,"click"],["x","5","y","2","width","14","height","20","rx","2","ry","2"],["x1","9","y1","6","x2","15","y2","6"],["x1","9","y1","10","x2","15","y2","10"],["x1","9","y1","14","x2","15","y2","14"],["x1","9","y1","18","x2","15","y2","18"],["title","Toggle Speaker",1,"control-btn",3,"click"],[1,"secondary-controls"],["title","Add Call",1,"secondary-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["cx","12","cy","12","r","1"],["d","M12 1v6m8-2l-4.24 4.24M1 12h6m-2 8l4.24-4.24M23 12v0m0 0l-6-6m6 6l-6 6M12 19v4"],["title","Hold",1,"secondary-btn",3,"click"],["cx","12","cy","12","r","10"],["cx","8","cy","12","r","2","fill","currentColor"],["cx","12","cy","12","r","2","fill","currentColor"],["cx","16","cy","12","r","2","fill","currentColor"],["title","Contacts",1,"secondary-btn",3,"click"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"end-call-section"],["title","End Call",1,"end-call-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24","fill","currentColor"],["d","M23.5 12a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"],["d","M20 17.5c-2.5 0-4.5-2-5.5-3.5-1 1.5-3 3.5-5.5 3.5-3 0-5.5-2.5-5.5-5.5v-6c0-3 2.5-5.5 5.5-5.5 2.5 0 4.5 2 5.5 3.5 1-1.5 3-3.5 5.5-3.5 3 0 5.5 2.5 5.5 5.5v6c0 3-2.5 5.5-5.5 5.5z"],[1,"end-call-text"],["d","M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"],["d","M19 10v2a7 7 0 0 1-14 0v-2"],["x1","12","y1","19","x2","12","y2","23"],["x1","8","y1","23","x2","16","y2","23"],["x1","1","y1","1","x2","23","y2","23"],["d","M9 9v3a3 3 0 0 0 5.12 2.12M15.5 1.67A7 7 0 0 1 19 19M9 17H5a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h4"],["points","11 5 6 9 2 9 2 15 6 15 11 19 11 5"],["d","M15.54 8.46a7 7 0 0 1 0 9.9M20.54 3.46a11 11 0 0 1 0 15.56"],["x1","23","y1","9","x2","17","y2","15"],["x1","17","y1","9","x2","23","y2","15"]],template:function(t,i){t&1&&Re(0,Bae,69,12,"div",0),t&2&&Ne(i.isCallActive?0:-1)},dependencies:[Tt],styles:[".call-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px;animation:_ngcontent-%COMP%_fadeInCall .4s ease-out}@keyframes _ngcontent-%COMP%_fadeInCall{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.call-interface[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:420px;height:100vh;max-height:900px;background:linear-gradient(180deg,#1a1a2e,#16213e,#0f3460);border-radius:20px;box-shadow:0 20px 60px #0009,0 0 80px #10c3d333;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .5s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100px);opacity:0}to{transform:translateY(0);opacity:1}}.call-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background:linear-gradient(180deg,#ffffff14,#0003);border-bottom:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.back-btn[_ngcontent-%COMP%]{background:#ffffff1f;border:none;width:44px;height:44px;border-radius:50%;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.34,1.56,.64,1);flex-shrink:0}.back-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.08)}.back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.call-status-info[_ngcontent-%COMP%]{flex:1;text-align:center;color:#fff;margin:0 16px;animation:_ngcontent-%COMP%_fadeIn .6s ease-out .2s both}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.caller-name[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;letter-spacing:.3px;text-shadow:0 2px 4px rgba(0,0,0,.3)}.caller-status[_ngcontent-%COMP%]{margin:4px 0 8px;font-size:13px;opacity:.85;font-weight:500;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.85}50%{opacity:.6}}.call-timer[_ngcontent-%COMP%]{display:inline-block;background:#10c3d326;border:1px solid rgba(16,195,211,.4);border-radius:6px;padding:4px 12px;margin-top:4px}.timer-value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#10c3d3;letter-spacing:1px;font-family:Courier New,monospace}.header-spacer[_ngcontent-%COMP%]{width:44px;flex-shrink:0}.caller-profile[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:40px 20px;animation:_ngcontent-%COMP%_fadeIn .6s ease-out .3s both}.caller-image-wrapper[_ngcontent-%COMP%]{position:relative;width:180px;height:180px}.caller-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;box-shadow:0 10px 40px #00000080,0 0 40px #10c3d34d;border:3px solid rgba(16,195,211,.4);animation:_ngcontent-%COMP%_profileZoom .6s ease-out .4s both}@keyframes _ngcontent-%COMP%_profileZoom{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}.pulse-ring[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border:2px solid rgba(16,195,211,.4);border-radius:50%;animation:_ngcontent-%COMP%_expandPulse 2s ease-out infinite}.pulse-ring-1[_ngcontent-%COMP%]{width:200px;height:200px;animation-delay:0s}.pulse-ring-2[_ngcontent-%COMP%]{width:220px;height:220px;animation-delay:.3s;opacity:.8}.pulse-ring-3[_ngcontent-%COMP%]{width:240px;height:240px;animation-delay:.6s;opacity:.6}@keyframes _ngcontent-%COMP%_expandPulse{0%{opacity:.8}to{opacity:0;transform:translate(-50%,-50%) scale(1.4)}}.call-controls[_ngcontent-%COMP%]{padding:30px 20px;background:#0000004d;border-top:1px solid rgba(255,255,255,.1);animation:_ngcontent-%COMP%_slideUp .5s cubic-bezier(.34,1.56,.64,1) .2s backwards}.controls-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:20px}.control-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;background:linear-gradient(135deg,#ffffff1f,#ffffff14);border:1px solid rgba(255,255,255,.15);color:#ffffffe6;width:100%;aspect-ratio:1;border-radius:12px;cursor:pointer;transition:all .3s cubic-bezier(.34,1.56,.64,1);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;transition:transform .3s ease}.control-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fff3,#ffffff26);border-color:#ffffff4d;transform:translateY(-2px);box-shadow:0 8px 20px #0000004d}.control-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 4px 10px #0003}.control-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10c3d34d,#10c3d326);border-color:#10c3d399;color:#10c3d3;box-shadow:0 0 20px #10c3d34d}.control-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(16,195,211,.6))}.btn-label[_ngcontent-%COMP%]{display:block}.secondary-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.secondary-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;background:#ffffff14;border:1px solid rgba(255,255,255,.12);color:#ffffffb3;height:44px;border-radius:10px;cursor:pointer;transition:all .3s cubic-bezier(.34,1.56,.64,1);font-weight:600;font-size:18px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.secondary-btn[_ngcontent-%COMP%]:hover{background:#ffffff26;border-color:#ffffff40;transform:translateY(-2px);box-shadow:0 6px 16px #0000004d}.secondary-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.end-call-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;gap:12px;animation:_ngcontent-%COMP%_slideUp .5s cubic-bezier(.34,1.56,.64,1) .3s backwards}.end-call-btn[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#d32f2f,#e53935,#f44336);border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.34,1.56,.64,1);box-shadow:0 8px 24px #d32f2f66;animation:_ngcontent-%COMP%_pulseEndCall 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulseEndCall{0%,to{box-shadow:0 8px 24px #d32f2f66}50%{box-shadow:0 12px 32px #d32f2f99}}.end-call-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 12px 36px #d32f2f99}.end-call-btn[_ngcontent-%COMP%]:active{transform:scale(.95);box-shadow:0 4px 16px #d32f2f66}.end-call-text[_ngcontent-%COMP%]{color:#fffc;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin:0}@media (max-width: 480px){.call-interface[_ngcontent-%COMP%]{max-width:100%;border-radius:0;height:100vh}.caller-image-wrapper[_ngcontent-%COMP%]{width:140px;height:140px}.caller-image[_ngcontent-%COMP%]{width:100%;height:100%}.pulse-ring-1[_ngcontent-%COMP%]{width:160px;height:160px}.pulse-ring-2[_ngcontent-%COMP%]{width:180px;height:180px}.pulse-ring-3[_ngcontent-%COMP%]{width:200px;height:200px}.controls-grid[_ngcontent-%COMP%]{gap:12px}.control-btn[_ngcontent-%COMP%]{font-size:10px}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.end-call-btn[_ngcontent-%COMP%]{width:70px;height:70px}.end-call-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.caller-profile[_ngcontent-%COMP%]{padding:30px 20px}}@media (min-width: 481px) and (max-width: 768px){.call-interface[_ngcontent-%COMP%]{max-width:450px}.caller-image-wrapper[_ngcontent-%COMP%]{width:160px;height:160px}.controls-grid[_ngcontent-%COMP%]{gap:14px}.control-btn[_ngcontent-%COMP%]{font-size:11px}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}}@media (min-width: 769px){.call-interface[_ngcontent-%COMP%]{max-width:400px}.control-btn[_ngcontent-%COMP%]:hover{box-shadow:0 12px 28px #0006}.secondary-btn[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #00000059}.end-call-btn[_ngcontent-%COMP%]:hover{box-shadow:0 16px 40px #d32f2f80}}.control-btn[_ngcontent-%COMP%]:focus, .secondary-btn[_ngcontent-%COMP%]:focus, .end-call-btn[_ngcontent-%COMP%]:focus, .back-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(16,195,211,.6);outline-offset:2px}*[_ngcontent-%COMP%]{transition:background-color .3s ease,border-color .3s ease,box-shadow .3s ease}button[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.34,1.56,.64,1)}"]})};var Uae=["reportsWrapper"];function zae(n,e){if(n&1&&(b(0,"div",22),oe(1,"div",23),b(2,"div",24)(3,"div",25)(4,"h3",26),I(5),w(),b(6,"span",27),I(7),w()(),b(8,"div",28)(9,"div",29),re(),b(10,"svg",30),oe(11,"path",12)(12,"circle",13),w(),_e(),b(13,"span",31),I(14),w()(),b(15,"div",29),re(),b(16,"svg",30),oe(17,"path",32)(18,"circle",33),w(),_e(),b(19,"span"),I(20),w()(),b(21,"div",29)(22,"span",34),I(23,"Recent"),w()()(),b(24,"div",35)(25,"button",36),re(),b(26,"svg",37),oe(27,"polyline",38),w()()()()()),n&2){let t=e.$implicit,i=B(3);W("ngClass",i.getPriorityClass(t.priority)),M(5),ue(t.description),M(),W("ngClass",i.getPriorityClass(t.priority)),M(),Te(" ",i.getPriorityLabel(t.priority)," "),M(7),qn("",t.street,", ",t.barangay),M(6),ue(t.reporterName||t.reporterId)}}function jae(n,e){if(n&1&&(pt(0),ie(1,zae,28,7,"div",21),gt()),n&2){let t=B().ngIf,i=B();M(),W("ngForOf",t)("ngForTrackBy",i.trackById)}}function $ae(n,e){if(n&1&&(pt(0),ie(1,jae,2,2,"ng-container",20),gt()),n&2){let t=e.ngIf;B();let i=Pt(28);M(),W("ngIf",t.length>0)("ngIfElse",i)}}function Hae(n,e){n&1&&(b(0,"p"),I(1,"No incidents match your search. Try different keywords."),w())}function qae(n,e){n&1&&(b(0,"p"),I(1,"No incidents reported at this time. Stay safe!"),w())}function Gae(n,e){if(n&1&&(b(0,"div",39),re(),b(1,"svg",40),oe(2,"path",41)(3,"line",42)(4,"line",18),w(),ie(5,Hae,2,0,"p",20)(6,qae,2,0,"ng-template",null,3,Qt),w()),n&2){let t=Pt(7),i=B();M(5),W("ngIf",i.searchQuery.value)("ngIfElse",t)}}function Wae(n,e){n&1&&(b(0,"div",43),oe(1,"div",44),b(2,"p"),I(3,"Loading community reports..."),w()())}var Ox=class n{reportService=$(Vn);router=$(Rt);reportsWrapper;searchQuery=new Ut("");allApprovedReports$=this.reportService.getAllReports().pipe(pe(e=>e.filter(t=>t.status==="approved")),Xn(()=>this.scrollToTop()));filteredReports$=xr([this.allApprovedReports$,this.searchQuery.pipe(qr(""))]).pipe(pe(([e,t])=>{if(!t.trim())return e;let i=t.toLowerCase();return e.filter(r=>{let o=(r.description||"").toLowerCase(),s=(r.street||"").toLowerCase(),l=(r.barangay||"").toLowerCase(),u=(r.landmark||"").toLowerCase(),f=(r.reporterName||"").toLowerCase(),m=(r.createdAt||"").toString().toLowerCase();return o.includes(i)||s.includes(i)||l.includes(i)||u.includes(i)||f.includes(i)||m.includes(i)})}));ngOnInit(){}ngAfterViewInit(){setTimeout(()=>this.scrollToTop(),100)}scrollToTop(){this.reportsWrapper&&(this.reportsWrapper.nativeElement.scrollTop=0),window.scrollTo({top:0,behavior:"smooth"})}trackById(e,t){return t?.id??e}onSearchChange(e){this.searchQuery.next(e),setTimeout(()=>this.scrollToTop(),50)}clearSearch(){this.searchQuery.next(""),setTimeout(()=>this.scrollToTop(),50)}viewMap(){this.router.navigate(["/map"])}triggerSOS(){console.log("SOS triggered")}getPriorityClass(e){switch(e){case"high":return"priority-high";case"medium":return"priority-medium";case"low":return"priority-low";default:return"priority-low"}}getPriorityLabel(e){return(e||"low").toUpperCase()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-citizen-reports"]],viewQuery:function(t,i){if(t&1&&ad(Uae,5),t&2){let r;dc(r=hc())&&(i.reportsWrapper=r.first)}},decls:31,vars:4,consts:[["reportsWrapper",""],["empty",""],["loading",""],["noSearchMatch",""],[1,"citizen-reports-container"],[1,"reports-header"],[1,"quick-actions"],["routerLink","/police-reports","aria-label","View Police Reports",1,"action-btn","police-btn"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],["type","button","aria-label","View Incident Map",1,"action-btn","map-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["type","button","aria-label","Trigger Emergency SOS",1,"action-btn","sos-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"reports-wrapper"],[4,"ngIf","ngIfElse"],["class","report-card",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"report-card",3,"ngClass"],[1,"card-border"],[1,"card-content"],[1,"card-header"],[1,"report-title"],[1,"priority-badge",3,"ngClass"],[1,"card-meta"],[1,"meta-item"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"icon"],[1,"location-text"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"recent-label"],[1,"card-footer"],["aria-label","View full report",1,"expand-btn"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","9 18 15 12 9 6"],[1,"empty-state"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"],["x1","12","y1","6","x2","12","y2","12"],[1,"loading-state"],[1,"spinner"]],template:function(t,i){if(t&1){let r=ve();b(0,"div",4)(1,"div",5)(2,"h2"),I(3,"Citizen Reports"),w(),b(4,"div",6)(5,"a",7),re(),b(6,"svg",8),oe(7,"path",9),w(),_e(),b(8,"span"),I(9,"Police Reports"),w()(),b(10,"button",10),ee("click",function(){return q(r),G(i.viewMap())}),re(),b(11,"svg",11),oe(12,"path",12)(13,"circle",13),w(),_e(),b(14,"span"),I(15,"Incident Map"),w()(),b(16,"button",14),ee("click",function(){return q(r),G(i.triggerSOS())}),re(),b(17,"svg",15),oe(18,"polygon",16)(19,"line",17)(20,"line",18),w(),_e(),b(21,"span"),I(22,"Emergency SOS"),w()()()(),b(23,"div",19,0),ie(25,$ae,2,2,"ng-container",20),Me(26,"async"),ie(27,Gae,8,2,"ng-template",null,1,Qt)(29,Wae,4,0,"ng-template",null,2,Qt),w()()}if(t&2){let r=Pt(30);M(25),W("ngIf",$e(26,2,i.filteredReports$))("ngIfElse",r)}},dependencies:[Tt,gc,ai,gn,Bn,po,ar,An],styles:[".citizen-reports-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:16px;height:100vh;box-sizing:border-box}.reports-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;gap:12px}.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:#1a3a52;flex:1;text-align:center}.quick-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;padding:10px 14px;border:none;border-radius:20px;font-size:.85rem;font-weight:600;cursor:pointer;transition:all .3s ease;white-space:nowrap;text-decoration:none;min-height:44px;touch-action:manipulation}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0}.police-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#2a3a7e);color:#d4a84b}.police-btn[_ngcontent-%COMP%]:hover, .police-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px);box-shadow:0 4px 12px #1a2a5e4d}.map-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#e5b85c);color:#1a2a5e}.map-btn[_ngcontent-%COMP%]:hover, .map-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px);box-shadow:0 4px 12px #d4a84b4d}.sos-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#e63946);color:#fff}.sos-btn[_ngcontent-%COMP%]:hover, .sos-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px);box-shadow:0 4px 12px #c41e3a4d}.search-section[_ngcontent-%COMP%]{width:100%}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:none;border-radius:8px;font-size:16px;box-shadow:0 2px 8px #0000001a;box-sizing:border-box}.search-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 2px 12px #1a2a5e4d}.reports-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;display:flex;flex-direction:column;gap:12px;padding:8px;box-sizing:border-box}.report-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:14px;box-shadow:0 2px 8px #0000001a;border-left:4px solid #1a2a5e;flex-shrink:0;transition:all .3s ease}.report-card[_ngcontent-%COMP%]:active{transform:scale(.98)}.report-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1rem;color:#1a3a52;font-weight:600;line-height:1.3}.card-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;font-size:.9rem;color:#666}.meta-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0;margin-top:2px}.location-text[_ngcontent-%COMP%]{line-height:1.4;word-break:break-word}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:16px;font-size:.75rem;font-weight:700;color:#fff;background:#1a2a5e;margin-top:6px;text-transform:uppercase;letter-spacing:.5px}@media (max-width: 768px){.citizen-reports-container[_ngcontent-%COMP%]{padding:16px 12px;gap:14px}.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.action-btn[_ngcontent-%COMP%]{padding:9px 12px;font-size:.8rem}.action-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.report-card[_ngcontent-%COMP%]{padding:12px}.report-title[_ngcontent-%COMP%]{font-size:.95rem}.card-meta[_ngcontent-%COMP%]{gap:5px}.meta-item[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 480px){.citizen-reports-container[_ngcontent-%COMP%]{padding:12px 10px;gap:12px;height:auto;min-height:100vh}.reports-header[_ngcontent-%COMP%]{gap:10px;margin-bottom:8px}.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.2}.quick-actions[_ngcontent-%COMP%]{gap:8px;justify-content:space-around}.action-btn[_ngcontent-%COMP%]{flex:0 1 auto;padding:8px 12px;font-size:.75rem;border-radius:18px;min-height:40px}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.action-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.search-section[_ngcontent-%COMP%]{margin-bottom:6px}.search-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:16px;border-radius:6px}.reports-wrapper[_ngcontent-%COMP%]{gap:10px;padding:4px}.report-card[_ngcontent-%COMP%]{padding:12px;border-radius:6px;border-left-width:3px}.report-title[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:8px}.card-meta[_ngcontent-%COMP%]{gap:4px}.meta-item[_ngcontent-%COMP%]{font-size:.8rem}.location-text[_ngcontent-%COMP%]{word-wrap:break-word}.priority-badge[_ngcontent-%COMP%]{padding:3px 8px;font-size:.7rem;margin-top:4px}.card-border[_ngcontent-%COMP%], .card-footer[_ngcontent-%COMP%]{display:none}}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1a2a5e;border-radius:4px}.report-card.priority-high[_ngcontent-%COMP%]{border-left-color:#ff5252}.report-card.priority-medium[_ngcontent-%COMP%]{border-left-color:#ffa726}.report-card.priority-low[_ngcontent-%COMP%]{border-left-color:#66bb6a}.report-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:.9rem;color:#1a3a52}.card-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:.85rem;color:#666}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:16px;font-size:.7rem;font-weight:700;color:#fff;background:#1a2a5e;margin-top:4px}.priority-badge.priority-high[_ngcontent-%COMP%]{background:#ff5252}.priority-badge.priority-medium[_ngcontent-%COMP%]{background:#ffa726}.priority-badge.priority-low[_ngcontent-%COMP%]{background:#66bb6a}@media (max-width: 768px){.citizen-reports-container[_ngcontent-%COMP%]{padding:20px 16px;gap:20px}}@media (max-width: 480px){.citizen-reports-container[_ngcontent-%COMP%]{padding:16px 12px;gap:16px}}.reports-header[_ngcontent-%COMP%]{flex-shrink:0;text-align:center}.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1a3a52;margin:0 0 8px;letter-spacing:-.5px}@media (max-width: 768px){.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem}}@media (max-width: 480px){.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#666;margin:0;font-weight:400}@media (max-width: 768px){.subtitle[_ngcontent-%COMP%]{font-size:.9rem}}.search-section[_ngcontent-%COMP%]{flex-shrink:0;width:100%;margin-bottom:16px}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;box-shadow:0 2px 12px #00000014;border-radius:10px;overflow:hidden;background:#fff}.search-icon[_ngcontent-%COMP%]{position:absolute;left:14px;color:#667eea;pointer-events:none;z-index:2;flex-shrink:0}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 44px;border:none;border-radius:10px;font-size:.95rem;background:#fff;color:#1a1a1a;transition:all .3s cubic-bezier(.4,0,.2,1);font-family:inherit}.search-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #667eea26}.search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.clear-btn[_ngcontent-%COMP%]{position:absolute;right:12px;background:transparent;border:none;cursor:pointer;color:#999;padding:6px;display:flex;align-items:center;justify-content:center;transition:color .2s ease;z-index:2;flex-shrink:0}.clear-btn[_ngcontent-%COMP%]:hover{color:#667eea}.reports-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column;gap:12px;padding:4px}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:10px}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:10px;transition:background .2s ease}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#764ba2,#667eea)}.reports-list[_ngcontent-%COMP%]{scrollbar-color:#667eea rgba(255,255,255,.1);scrollbar-width:thin}@media (max-width: 1024px){.reports-list[_ngcontent-%COMP%]{gap:10px}}@media (max-width: 768px){.reports-list[_ngcontent-%COMP%]{gap:8px}}.reports-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:600px;max-height:600px;overflow:hidden;padding:8px;border-radius:12px;background:#ffffff4d}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:10px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:10px;transition:background .2s ease}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#764ba2,#667eea)}.reports-wrapper[_ngcontent-%COMP%]{scrollbar-color:#667eea rgba(255,255,255,.1);scrollbar-width:thin}@media (max-width: 1024px){.reports-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}}@media (max-width: 768px){.reports-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:14px}}@media (max-width: 480px){.reports-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.report-card[_ngcontent-%COMP%]{background:#fff;border-radius:6px;padding:12px;box-shadow:0 1px 3px #0000001a;border-left:3px solid #1a2a5e;flex-shrink:0}.report-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #0000001f;transform:translateY(-2px)}.card-border[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2)}.report-card.priority-high[_ngcontent-%COMP%]   .card-border[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff5252,#ff1744)}.report-card.priority-medium[_ngcontent-%COMP%]   .card-border[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ffa726,#ffb300)}.report-card.priority-low[_ngcontent-%COMP%]   .card-border[_ngcontent-%COMP%]{background:linear-gradient(90deg,#66bb6a,#43a047)}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px;flex:1}@media (max-width: 480px){.card-content[_ngcontent-%COMP%]{padding:16px;gap:14px}}.card-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}.report-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700;color:#1a3a52;margin:0;flex:1;line-height:1.3}.priority-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:2px 8px;border-radius:20px;font-size:.7rem;font-weight:800;color:#fff;text-transform:uppercase;white-space:nowrap;letter-spacing:.5px;background:linear-gradient(135deg,#667eea,#764ba2)}.priority-badge.priority-high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff5252,#ff1744)}.priority-badge.priority-medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa726,#ffb300)}.priority-badge.priority-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#66bb6a,#43a047)}.card-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:.85rem}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#555}.icon[_ngcontent-%COMP%]{color:#667eea;flex-shrink:0}.location-text[_ngcontent-%COMP%]{font-weight:500;color:#333}.recent-label[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:8px;border-top:1px solid #f0f0f0}.expand-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;flex-shrink:0}.expand-btn[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px #667eea66}.expand-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center;color:#888;background:#ffffff80;border-radius:12px;border:2px dashed #ddd;min-height:200px;flex-shrink:0}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]{padding:40px 30px;min-height:250px}}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ccc;margin-bottom:16px;opacity:.6}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;gap:16px;min-height:200px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid rgba(102,126,234,.2);border-top:3px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:.95rem;margin:0}@media (max-width: 480px){.reports-wrapper[_ngcontent-%COMP%]{max-height:calc(100vh - 280px)}.card-meta[_ngcontent-%COMP%]{font-size:.85rem}.report-title[_ngcontent-%COMP%]{font-size:.95rem}}"]})};var NU="firebasestorage.googleapis.com",LU="storageBucket",Kae=120*1e3,Qae=600*1e3;var Un=class n extends cr{constructor(e,t,i=0){super(VD(e),`Firebase Storage: ${t} (${VD(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return VD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Wn=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(Wn||{});function VD(n){return"storage/"+n}function HD(){let n="An unknown error occurred, please check the error payload for server response.";return new Un(Wn.UNKNOWN,n)}function Yae(n){return new Un(Wn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Zae(n){return new Un(Wn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Jae(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Un(Wn.UNAUTHENTICATED,n)}function Xae(){return new Un(Wn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ece(n){return new Un(Wn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function tce(){return new Un(Wn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nce(){return new Un(Wn.CANCELED,"User canceled the upload/download.")}function ice(n){return new Un(Wn.INVALID_URL,"Invalid URL '"+n+"'.")}function rce(n){return new Un(Wn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function oce(){return new Un(Wn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LU+"' property when initializing the app?")}function sce(){return new Un(Wn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ace(){return new Un(Wn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function cce(n){return new Un(Wn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function BD(n){return new Un(Wn.INVALID_ARGUMENT,n)}function FU(){return new Un(Wn.APP_DELETED,"The Firebase app was deleted.")}function lce(n){return new Un(Wn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function I_(n,e){return new Un(Wn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function E_(n){throw new Un(Wn.INTERNAL_ERROR,"Internal error: "+n)}var Os=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(i.path==="")return i;throw rce(e)}static makeFromUrl(e,t){let i=null,r="([A-Za-z0-9.\\-_]+)";function o(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}let s="(/(.*))?$",l=new RegExp("^gs://"+r+s,"i"),u={bucket:1,path:3};function f(he){he.path_=decodeURIComponent(he.path)}let m="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),C="(/([^?#]*).*)?$",T=new RegExp(`^https?://${y}/${m}/b/${r}/o${C}`,"i"),U={bucket:1,path:3},H=t===NU?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",X=new RegExp(`^https?://${H}/${r}/${j}`,"i"),le=[{regex:l,indices:u,postModify:o},{regex:T,indices:U,postModify:f},{regex:X,indices:{bucket:1,path:2},postModify:f}];for(let he=0;he<le.length;he++){let ct=le[he],Se=ct.regex.exec(e);if(Se){let k=Se[ct.indices.bucket],E=Se[ct.indices.path];E||(E=""),i=new n(k,E),ct.postModify(i);break}}if(i==null)throw ice(e);return i}},UD=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function uce(n,e,t){let i=1,r=null,o=null,s=!1,l=0;function u(){return l===2}let f=!1;function m(...j){f||(f=!0,e.apply(null,j))}function y(j){r=setTimeout(()=>{r=null,n(T,u())},j)}function C(){o&&clearTimeout(o)}function T(j,...X){if(f){C();return}if(j){C(),m.call(null,j,...X);return}if(u()||s){C(),m.call(null,j,...X);return}i<64&&(i*=2);let le;l===1?(l=2,le=0):le=(i+Math.random())*1e3,y(le)}let U=!1;function H(j){U||(U=!0,C(),!f&&(r!==null?(j||(l=2),clearTimeout(r),y(0)):j||(l=1)))}return y(0),o=setTimeout(()=>{s=!0,H(!0)},t),H}function dce(n){n(!1)}function hce(n){return n!==void 0}function fce(n){return typeof n=="object"&&!Array.isArray(n)}function qD(n){return typeof n=="string"||n instanceof String}function MU(n){return GD()&&n instanceof Blob}function GD(){return typeof Blob<"u"}function OU(n,e,t,i){if(i<e)throw BD(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw BD(`Invalid value for '${n}'. Expected ${t} or less.`)}function WD(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function VU(n){let e=encodeURIComponent,t="?";for(let i in n)if(n.hasOwnProperty(i)){let r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}var Pp=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(Pp||{});function pce(n,e){let t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||r||o}var zD=class{constructor(e,t,i,r,o,s,l,u,f,m,y,C=!0,T=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=u,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=y,this.retry=C,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,H)=>{this.resolve_=U,this.reject_=H,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new Ip(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=l=>{let u=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,f)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let l=o.getErrorCode()===Pp.NO_ERROR,u=o.getStatus();if(!l||pce(u,this.additionalRetryCodes_)&&this.retry){let m=o.getErrorCode()===Pp.ABORT;i(!1,new Ip(!1,null,m));return}let f=this.successCodes_.indexOf(u)!==-1;i(!0,new Ip(f,o))})},t=(i,r)=>{let o=this.resolve_,s=this.reject_,l=r.connection;if(r.wasSuccessCode)try{let u=this.callback_(l,l.getResponse());hce(u)?o(u):o()}catch(u){s(u)}else if(l!==null){let u=HD();u.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,u)):s(u)}else if(r.canceled){let u=this.appDelete_?FU():nce();s(u)}else{let u=tce();s(u)}};this.canceled_?t(!1,new Ip(!1,null,!0)):this.backoffId_=uce(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dce(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ip=class{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}};function gce(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function mce(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _ce(n,e){e&&(n["X-Firebase-GMPID"]=e)}function vce(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function yce(n,e,t,i,r,o,s=!0,l=!1){let u=VU(n.urlParams),f=n.url+u,m=Object.assign({},n.headers);return _ce(m,e),gce(m,t),mce(m,o),vce(m,i),new zD(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,s,l)}function bce(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wce(...n){let e=bce();if(e!==void 0){let t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(GD())return new Blob(n);throw new Un(Wn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xce(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Cce(n){if(typeof atob>"u")throw cce("base-64");return atob(n)}var ka={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},P_=class{constructor(e,t){this.data=e,this.contentType=t||null}};function Ece(n,e){switch(n){case ka.RAW:return new P_(BU(e));case ka.BASE64:case ka.BASE64URL:return new P_(UU(n,e));case ka.DATA_URL:return new P_(Pce(e),Tce(e))}throw HD()}function BU(n){let e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=i,s=n.charCodeAt(++t);i=65536|(o&1023)<<10|s&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Ice(n){let e;try{e=decodeURIComponent(n)}catch{throw I_(ka.DATA_URL,"Malformed data URL.")}return BU(e)}function UU(n,e){switch(n){case ka.BASE64:{let r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw I_(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ka.BASE64URL:{let r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw I_(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Cce(e)}catch(r){throw r.message.includes("polyfill")?r:I_(n,"Invalid character found")}let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}var Dx=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw I_(ka.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=t[1]||null;i!=null&&(this.base64=Sce(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}};function Pce(n){let e=new Dx(n);return e.base64?UU(ka.BASE64,e.rest):Ice(e.rest)}function Tce(n){return new Dx(n).contentType}function Sce(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var kx=class n{constructor(e,t){let i=0,r="";MU(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(MU(this.data_)){let i=this.data_,r=xce(i,e,t);return r===null?null:new n(r)}else{let i=new Uint8Array(this.data_.buffer,e,t-e);return new n(i,!0)}}static getBlob(...e){if(GD()){let t=e.map(i=>i instanceof n?i.data_:i);return new n(wce.apply(null,t))}else{let t=e.map(s=>qD(s)?Ece(ka.RAW,s).data:s.data_),i=0;t.forEach(s=>{i+=s.byteLength});let r=new Uint8Array(i),o=0;return t.forEach(s=>{for(let l=0;l<s.length;l++)r[o++]=s[l]}),new n(r,!0)}}uploadData(){return this.data_}};function zU(n){let e;try{e=JSON.parse(n)}catch{return null}return fce(e)?e:null}function Mce(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Oce(n,e){let t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function jU(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Ace(n,e){return e}var Wi=class{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||Ace}},Ax=null;function Dce(n){return!qD(n)||n.length<2?n:jU(n)}function $U(){if(Ax)return Ax;let n=[];n.push(new Wi("bucket")),n.push(new Wi("generation")),n.push(new Wi("metageneration")),n.push(new Wi("name","fullPath",!0));function e(o,s){return Dce(s)}let t=new Wi("name");t.xform=e,n.push(t);function i(o,s){return s!==void 0?Number(s):s}let r=new Wi("size");return r.xform=i,n.push(r),n.push(new Wi("timeCreated")),n.push(new Wi("updated")),n.push(new Wi("md5Hash",null,!0)),n.push(new Wi("cacheControl",null,!0)),n.push(new Wi("contentDisposition",null,!0)),n.push(new Wi("contentEncoding",null,!0)),n.push(new Wi("contentLanguage",null,!0)),n.push(new Wi("contentType",null,!0)),n.push(new Wi("metadata","customMetadata",!0)),Ax=n,Ax}function kce(n,e){function t(){let i=n.bucket,r=n.fullPath,o=new Os(i,r);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function Rce(n,e,t){let i={};i.type="file";let r=t.length;for(let o=0;o<r;o++){let s=t[o];i[s.local]=s.xform(i,e[s.server])}return kce(i,n),i}function HU(n,e,t){let i=zU(e);return i===null?null:Rce(n,i,t)}function Nce(n,e,t,i){let r=zU(e);if(r===null||!qD(r.downloadTokens))return null;let o=r.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(f=>{let m=n.bucket,y=n.fullPath,C="/b/"+s(m)+"/o/"+s(y),T=WD(C,t,i),U=VU({alt:"media",token:f});return T+U})[0]}function Lce(n,e){let t={},i=e.length;for(let r=0;r<i;r++){let o=e[r];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var Rx=class{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function qU(n){if(!n)throw HD()}function Fce(n,e){function t(i,r){let o=HU(n,r,e);return qU(o!==null),o}return t}function Vce(n,e){function t(i,r){let o=HU(n,r,e);return qU(o!==null),Nce(o,r,n.host,n._protocol)}return t}function GU(n){function e(t,i){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=Xae():r=Jae():t.getStatus()===402?r=Zae(n.bucket):t.getStatus()===403?r=ece(n.path):r=i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Bce(n){let e=GU(n);function t(i,r){let o=e(i,r);return i.getStatus()===404&&(o=Yae(n.path)),o.serverResponse=r.serverResponse,o}return t}function Uce(n,e,t){let i=e.fullServerUrl(),r=WD(i,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,l=new Rx(r,o,Vce(n,t),s);return l.errorHandler=Bce(e),l}function zce(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function jce(n,e,t){let i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=zce(null,e)),i}function $ce(n,e,t,i,r){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let le="";for(let he=0;he<2;he++)le=le+Math.random().toString().slice(2);return le}let u=l();s["Content-Type"]="multipart/related; boundary="+u;let f=jce(e,i,r),m=Lce(f,t),y="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+u+`\r
Content-Type: `+f.contentType+`\r
\r
`,C=`\r
--`+u+"--",T=kx.getBlob(y,i,C);if(T===null)throw sce();let U={name:f.fullPath},H=WD(o,n.host,n._protocol),j="POST",X=n.maxUploadRetryTime,ae=new Rx(H,j,Fce(n,t),X);return ae.urlParams=U,ae.headers=s,ae.body=T.uploadData(),ae.errorHandler=GU(e),ae}var qNe=256*1024;var AU=null,jD=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r,o){if(this.sent_)throw E_("cannot .send() more than once");if(go(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw E_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw E_("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw E_("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw E_("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},$D=class extends jD{initXhr(){this.xhr_.responseType="text"}};function WU(){return AU?AU():new $D}var Tp=class n{constructor(e,t){this._service=e,t instanceof Os?this._location=t:this._location=Os.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Os(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jU(this._location.path)}get storage(){return this._service}get parent(){let e=Mce(this._location.path);if(e===null)return null;let t=new Os(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw lce(e)}};function Hce(n,e,t){n._throwIfRoot("uploadBytes");let i=$ce(n.storage,n._location,$U(),new kx(e,!0),t);return n.storage.makeRequestWithTokens(i,WU).then(r=>({metadata:r,ref:n}))}function qce(n){n._throwIfRoot("getDownloadURL");let e=Uce(n.storage,n._location,$U());return n.storage.makeRequestWithTokens(e,WU).then(t=>{if(t===null)throw ace();return t})}function Gce(n,e){let t=Oce(n._location.path,e),i=new Os(n._location.bucket,t);return new Tp(n.storage,i)}function Wce(n){return/^[A-Za-z]+:\/\//.test(n)}function Kce(n,e){return new Tp(n,e)}function KU(n,e){if(n instanceof T_){let t=n;if(t._bucket==null)throw oce();let i=new Tp(t,t._bucket);return e!=null?KU(i,e):i}else return e!==void 0?Gce(n,e):n}function Qce(n,e){if(e&&Wce(e)){if(n instanceof T_)return Kce(n,e);throw BD("To use ref(service, url), the first argument must be a Storage instance.")}else return KU(n,e)}function DU(n,e){let t=e?.[LU];return t==null?null:Os.makeFromBucketSpec(t,n)}function Yce(n,e,t,i={}){n.host=`${e}:${t}`;let r=go(e);r&&(Ml(`https://${n.host}/b`),Ol("Storage",!0)),n._isUsingEmulator=!0,n._protocol=r?"https":"http";let{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:zy(o,n.app.options.projectId))}var T_=class{constructor(e,t,i,r,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=NU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Kae,this._maxUploadRetryTime=Qae,this._requests=new Set,r!=null?this._bucket=Os.makeFromBucketSpec(r,this._host):this._bucket=DU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Os.makeFromBucketSpec(this._url,e):this._bucket=DU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){OU("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){OU("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return O(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return O(this,null,function*(){if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tp(this,e)}_makeRequest(e,t,i,r,o=!0){if(this._deleted)return new UD(FU());{let s=yce(e,this._appId,i,r,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return O(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()})}},kU="@firebase/storage",RU="0.13.14";var QU="storage";function YU(n,e,t){return n=Yt(n),Hce(n,e,t)}function ZU(n){return n=Yt(n),qce(n)}function JU(n,e){return n=Yt(n),Qce(n,e)}function XU(n=bs(),e){n=Yt(n);let i=ga(n,QU).getImmediate({identifier:e}),r=pf("storage");return r&&ez(i,...r),i}function ez(n,e,t,i={}){Yce(n,e,t,i)}function Zce(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new T_(t,i,r,e,ma)}function Jce(){Mr(new wi(QU,Zce,"PUBLIC").setMultipleInstances(!0)),Zt(kU,RU,""),Zt(kU,RU,"esm2017")}Jce();var Xd=class{constructor(e){return e}},tz="storage",KD=class{constructor(){return _a(tz)}};var QD=new we("angularfire2.storage-instances");function Xce(n,e){let t=yc(tz,n,e);return t&&new Xd(t)}function ele(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Xd(i)}}var tle={provide:KD,deps:[[new On,QD]]},nle={provide:Xd,useFactory:Xce,deps:[[new On,QD],mo]};function nz(n,...e){return Zt("angularfire",Ro.full,"gcs"),Pr([nle,tle,{provide:QD,useFactory:ele(n),multi:!0,deps:[kt,mn,No,ws,[new On,Sc],[new On,va],...e]}])}var iz=Ht(ZU,!0);var rz=Ht(XU,!0);var oz=Ht(JU,!0,2);var sz=Ht(YU,!0);function ile(n,e){n&1&&(Y(0,"div",6)(1,"div",11),Ye(2,"div",12),J(),Y(3,"div",13)(4,"p"),I(5,"Loading profile..."),J()()())}function rle(n,e){if(n&1&&(Y(0,"div",7),re(),Y(1,"svg",14),Ye(2,"circle",15)(3,"line",16)(4,"line",17),J(),I(5),J()),n&2){let t=B();M(5),Te(" ",t.errorMessage()," ")}}function ole(n,e){if(n&1&&(Y(0,"div",8),re(),Y(1,"svg",14),Ye(2,"path",18)(3,"polyline",19),J(),I(4),J()),n&2){let t=B();M(4),Te(" ",t.successMessage()," ")}}function sle(n,e){if(n&1&&Ye(0,"img",25),n&2){let t,i=B(2);ii("src",(t=i.profile())==null?null:t.photoURL,xn)}}function ale(n,e){if(n&1&&(Y(0,"div",26),I(1),J()),n&2){let t=B(2);M(),Te(" ",t.avatarInitials()," ")}}function cle(n,e){if(n&1){let t=ve();Y(0,"label",27)(1,"input",45),Ct("change",function(r){q(t);let o=B(2);return G(o.uploadPhoto(r))}),J(),re(),Y(2,"svg",46),Ye(3,"path",47)(4,"circle",48),J()()}}function lle(n,e){n&1&&(re(),Y(0,"svg",49),Ye(1,"path",50),J(),I(2," BCPO Admin "))}function ule(n,e){n&1&&(re(),Y(0,"svg",49),Ye(1,"path",51),J(),I(2," Citizen "))}function dle(n,e){if(n&1&&(Y(0,"p",53),I(1),J()),n&2){let t,i=B(3);M(),ue((t=i.profile())==null?null:t.bio)}}function hle(n,e){n&1&&(Y(0,"div",54),re(),Y(1,"svg",55),Ye(2,"path",56),J(),I(3," Verified Account "),J())}function fle(n,e){if(n&1&&(Y(0,"h2",52),I(1),J(),Re(2,dle,2,1,"p",53),Re(3,hle,4,0,"div",54)),n&2){let t,i,r,o=B(2);M(),ue((t=o.profile())==null?null:t.displayName),M(),Ne((i=o.profile())!=null&&i.bio?2:-1),M(),Ne((r=o.profile())!=null&&r.isVerified?3:-1)}}function ple(n,e){if(n&1){let t=ve();Y(0,"div",35)(1,"label"),I(2,"Display Name"),J(),Y(3,"input",57),Ct("input",function(r){q(t);let o=B(2);return G(o.updateFormField("displayName",r.target.value))}),J()(),Y(4,"div",35)(5,"label"),I(6,"Bio"),J(),Y(7,"textarea",58),Ct("input",function(r){q(t);let o=B(2);return G(o.updateFormField("bio",r.target.value))}),J()()}if(n&2){let t=B(2);M(3),ii("value",t.editForm().displayName),M(4),ii("value",t.editForm().bio)}}function gle(n,e){if(n&1){let t=ve();Y(0,"button",59),Ct("click",function(){q(t);let r=B(3);return G(r.toggleEditMode())}),re(),Y(1,"svg",46),Ye(2,"path",60)(3,"path",61),J(),I(4," Edit Profile "),J(),_e(),Y(5,"button",62),Ct("click",function(){q(t);let r=B(3);return G(r.openPasswordModal())}),re(),Y(6,"svg",46),Ye(7,"rect",63)(8,"path",64),J(),I(9," Change Password "),J()}}function mle(n,e){n&1&&(Ye(0,"div",66),I(1," Saving... "))}function _le(n,e){n&1&&(re(),Y(0,"svg",46),Ye(1,"polyline",67),J(),I(2," Save Changes "))}function vle(n,e){if(n&1){let t=ve();Y(0,"button",65),Ct("click",function(){q(t);let r=B(3);return G(r.saveProfile())}),Re(1,mle,2,0)(2,_le,3,0),J(),Y(3,"button",62),Ct("click",function(){q(t);let r=B(3);return G(r.toggleEditMode())}),I(4,"Cancel"),J()}if(n&2){let t=B(3);ii("disabled",t.isSaving()),M(),Ne(t.isSaving()?1:2)}}function yle(n,e){if(n&1&&(Y(0,"div",30),Re(1,gle,10,0)(2,vle,5,2),J()),n&2){let t=B(2);M(),Ne(t.isEditMode()?2:1)}}function ble(n,e){n&1&&(Y(0,"span",71),I(1,"Private"),J())}function wle(n,e){if(n&1&&(Y(0,"div",68)(1,"span",69),I(2,"Email"),J(),Y(3,"span",70),I(4),J(),Re(5,ble,2,0,"span",71),J()),n&2){let t,i,r=B(3);M(4),ue((t=r.profile())==null?null:t.email),M(),Ne(!(!((i=r.profile())==null||i.privacy==null)&&i.privacy.showEmail)&&r.isOwnProfile()?5:-1)}}function xle(n,e){n&1&&(Y(0,"span",71),I(1,"Private"),J())}function Cle(n,e){if(n&1&&(Y(0,"div",68)(1,"span",69),I(2,"Phone"),J(),Y(3,"span",70),I(4),J(),Re(5,xle,2,0,"span",71),J()),n&2){let t,i,r=B(3);M(4),ue(((t=r.profile())==null?null:t.phoneNumber)||"Not set"),M(),Ne(!(!((i=r.profile())==null||i.privacy==null)&&i.privacy.showPhone)&&r.isOwnProfile()?5:-1)}}function Ele(n,e){if(n&1&&(Y(0,"div",34),Re(1,wle,6,2,"div",68),Re(2,Cle,6,2,"div",68),J()),n&2){let t,i,r=B(2);M(),Ne(!((t=r.profile())==null||t.privacy==null)&&t.privacy.showEmail||r.isOwnProfile()?1:-1),M(),Ne((i=r.profile())!=null&&i.phoneNumber&&(!((i=r.profile())==null||i.privacy==null)&&i.privacy.showPhone)||r.isOwnProfile()?2:-1)}}function Ile(n,e){if(n&1){let t=ve();Y(0,"div",35)(1,"label"),I(2,"Phone Number"),J(),Y(3,"input",72),Ct("input",function(r){q(t);let o=B(2);return G(o.updateFormField("phoneNumber",r.target.value))}),J()()}if(n&2){let t=B(2);M(3),ii("value",t.editForm().phoneNumber)}}function Ple(n,e){n&1&&(Y(0,"span",71),I(1,"Address is private"),J())}function Tle(n,e){if(n&1&&(Y(0,"div",68)(1,"span",69),I(2,"Street"),J(),Y(3,"span",70),I(4),J()(),Y(5,"div",68)(6,"span",69),I(7,"Barangay"),J(),Y(8,"span",70),I(9),J()(),Y(10,"div",68)(11,"span",69),I(12,"City"),J(),Y(13,"span",70),I(14),J()(),Re(15,Ple,2,0,"span",71)),n&2){let t,i,r,o,s=B(3);M(4),ue(((t=s.profile())==null||t.address==null?null:t.address.street)||"Not set"),M(5),ue(((i=s.profile())==null||i.address==null?null:i.address.barangay)||"Not set"),M(5),ue(((r=s.profile())==null||r.address==null?null:r.address.city)||"Baguio City"),M(),Ne(!(!((o=s.profile())==null||o.privacy==null)&&o.privacy.showAddress)&&s.isOwnProfile()?15:-1)}}function Sle(n,e){n&1&&(Y(0,"p",73),I(1,"Address is private"),J())}function Mle(n,e){if(n&1&&(Y(0,"div",34),Re(1,Tle,16,4)(2,Sle,2,0,"p",73),J()),n&2){let t,i=B(2);M(),Ne(!((t=i.profile())==null||t.address==null)&&t.address.street&&(!((t=i.profile())==null||t.privacy==null)&&t.privacy.showAddress)||i.isOwnProfile()?1:2)}}function Ole(n,e){if(n&1){let t=ve();Y(0,"li",84),Ct("mousedown",function(){let r=q(t).$implicit,o=B(4);return G(o.selectBarangay(r))}),I(1),J()}if(n&2){let t=e.$implicit;M(),ue(t)}}function Ale(n,e){if(n&1&&(Y(0,"li",83),I(1),J()),n&2){let t=B(4);M(),Te(" + ",t.filteredBarangays.length-8," more results ")}}function Dle(n,e){if(n&1&&(Y(0,"ul",80),od(1,Ole,2,1,"li",null,HE),Re(3,Ale,2,1,"li",83),J()),n&2){let t=B(3);M(),sd(t.filteredBarangays.slice(0,8)),M(2),Ne(t.filteredBarangays.length>8?3:-1)}}function kle(n,e){if(n&1){let t=ve();Y(0,"p",74),I(1,"Baguio City, Philippines"),J(),Y(2,"div",35)(3,"label"),I(4,"City"),J(),Ye(5,"input",75),J(),Y(6,"div",76)(7,"label"),I(8,"Barangay "),Y(9,"span",77),I(10,"*"),J()(),Y(11,"div",78)(12,"input",79),Ct("input",function(r){q(t);let o=B(2);return G(o.filterBarangays(r))})("focus",function(r){q(t);let o=B(2);return G(o.filterBarangays(r))})("blur",function(){q(t);let r=B(2);return G(r.hideBarangaySuggestions())}),J(),Re(13,Dle,4,1,"ul",80),J(),Y(14,"small",81),I(15,"Select from 128 Baguio City barangays"),J()(),Y(16,"div",35)(17,"label"),I(18,"Street / Purok"),J(),Y(19,"input",82),Ct("input",function(r){q(t);let o=B(2);return G(o.updateFormField("street",r.target.value))}),J()()}if(n&2){let t=B(2);M(5),ii("value","Baguio City"),M(7),ii("value",t.editForm().barangay),M(),Ne(t.showBarangaySuggestions()&&t.filteredBarangays.length>0?13:-1),M(6),ii("value",t.editForm().street)}}function Rle(n,e){if(n&1){let t=ve();Y(0,"div",38)(1,"h3"),re(),Y(2,"svg",14),Ye(3,"path",85),J(),I(4," Privacy Settings "),J(),_e(),Y(5,"p",86),I(6,"Choose what others can see on your profile"),J(),Y(7,"div",87)(8,"label",88)(9,"input",89),Ct("change",function(r){q(t);let o=B(2);return G(o.updateFormField("showEmail",r.target.checked))}),J(),Ye(10,"span",90),Y(11,"span",91),I(12,"Show email address"),J()(),Y(13,"label",88)(14,"input",89),Ct("change",function(r){q(t);let o=B(2);return G(o.updateFormField("showPhone",r.target.checked))}),J(),Ye(15,"span",90),Y(16,"span",91),I(17,"Show phone number"),J()(),Y(18,"label",88)(19,"input",89),Ct("change",function(r){q(t);let o=B(2);return G(o.updateFormField("showAddress",r.target.checked))}),J(),Ye(20,"span",90),Y(21,"span",91),I(22,"Show address"),J()()()()}if(n&2){let t=B(2);M(9),ii("checked",t.editForm().showEmail),M(5),ii("checked",t.editForm().showPhone),M(5),ii("checked",t.editForm().showAddress)}}function Nle(n,e){if(n&1&&(Y(0,"div",9)(1,"div",20)(2,"div",21),Ye(3,"div",22),J(),Y(4,"div",23)(5,"div",24),Re(6,sle,1,1,"img",25)(7,ale,2,1,"div",26),Re(8,cle,5,0,"label",27),J(),Y(9,"div",28),Re(10,lle,3,0)(11,ule,3,0),J()(),Y(12,"div",29),Re(13,fle,4,3)(14,ple,8,2),J(),Re(15,yle,3,1,"div",30),J(),Y(16,"div",31)(17,"div",32)(18,"h3"),re(),Y(19,"svg",14),Ye(20,"path",33),J(),I(21," Contact Information "),J(),Re(22,Ele,3,2,"div",34)(23,Ile,4,1,"div",35),J(),_e(),Y(24,"div",32)(25,"h3"),re(),Y(26,"svg",14),Ye(27,"path",36)(28,"circle",37),J(),I(29," Address "),J(),Re(30,Mle,3,1,"div",34)(31,kle,20,4),J(),Re(32,Rle,23,3,"div",38),_e(),Y(33,"div",39)(34,"h3"),re(),Y(35,"svg",14),Ye(36,"polyline",40),J(),I(37," Activity "),J(),_e(),Y(38,"div",41)(39,"div",42)(40,"span",43),I(41),J(),Y(42,"span",44),I(43,"Reports"),J()(),Y(44,"div",42)(45,"span",43),I(46),J(),Y(47,"span",44),I(48,"Alerts"),J()(),Y(49,"div",42)(50,"span",43),I(51),J(),Y(52,"span",44),I(53,"SOS"),J()()()()()()),n&2){let t,i,r,o,s,l,u=B();M(6),Ne((t=u.profile())!=null&&t.photoURL?6:7),M(2),Ne(u.isOwnProfile()?8:-1),M(),We("admin",((i=u.profile())==null?null:i.role)==="admin"),M(),Ne(((r=u.profile())==null?null:r.role)==="admin"?10:11),M(3),Ne(u.isEditMode()?14:13),M(2),Ne(u.isOwnProfile()?15:-1),M(7),Ne(u.isEditMode()?23:22),M(8),Ne(u.isEditMode()?31:30),M(2),Ne(u.isOwnProfile()&&u.isEditMode()?32:-1),M(9),ue(((o=u.profile())==null||o.stats==null?null:o.stats.reportsSubmitted)||0),M(5),ue(((s=u.profile())==null||s.stats==null?null:s.stats.alertsReceived)||0),M(5),ue(((l=u.profile())==null||l.stats==null?null:l.stats.sosTriggered)||0)}}function Lle(n,e){if(n&1&&(Y(0,"div",99),I(1),J()),n&2){let t=B(2);M(),ue(t.errorMessage())}}function Fle(n,e){n&1&&(Ye(0,"div",66),I(1," Changing... "))}function Vle(n,e){n&1&&I(0," Change Password ")}function Ble(n,e){if(n&1){let t=ve();Y(0,"div",92),Ct("click",function(){q(t);let r=B();return G(r.closePasswordModal())}),Y(1,"div",93),Ct("click",function(r){return q(t),G(r.stopPropagation())}),Y(2,"div",94)(3,"h3"),I(4,"Change Password"),J(),Y(5,"button",95),Ct("click",function(){q(t);let r=B();return G(r.closePasswordModal())}),re(),Y(6,"svg",3),Ye(7,"line",96)(8,"line",97),J()()(),_e(),Y(9,"div",98),Re(10,Lle,2,1,"div",99),Y(11,"div",100)(12,"label"),I(13,"Current Password"),J(),Y(14,"input",101),Ct("input",function(r){q(t);let o=B();return G(o.updatePasswordField("currentPassword",r.target.value))}),J()(),Y(15,"div",100)(16,"label"),I(17,"New Password"),J(),Y(18,"input",102),Ct("input",function(r){q(t);let o=B();return G(o.updatePasswordField("newPassword",r.target.value))}),J()(),Y(19,"div",100)(20,"label"),I(21,"Confirm New Password"),J(),Y(22,"input",103),Ct("input",function(r){q(t);let o=B();return G(o.updatePasswordField("confirmPassword",r.target.value))}),J()()(),Y(23,"div",104)(24,"button",62),Ct("click",function(){q(t);let r=B();return G(r.closePasswordModal())}),I(25,"Cancel"),J(),Y(26,"button",65),Ct("click",function(){q(t);let r=B();return G(r.changePassword())}),Re(27,Fle,2,0)(28,Vle,1,0),J()()()()}if(n&2){let t=B();M(10),Ne(t.errorMessage()?10:-1),M(4),ii("value",t.passwordForm().currentPassword),M(4),ii("value",t.passwordForm().newPassword),M(4),ii("value",t.passwordForm().confirmPassword),M(4),ii("disabled",t.isSaving()),M(),Ne(t.isSaving()?27:28)}}var Nx=class n{auth=$(Tc);firestore=$(Uc);storage=$(Xd);router=$(Rt);route=$(sr);authService=$(Dn);toastService=$(Ni);isLoading=pn(!0);isSaving=pn(!1);isOwnProfile=pn(!0);isEditMode=pn(!1);showPasswordModal=pn(!1);errorMessage=pn("");successMessage=pn("");profile=pn(null);profileId=pn(null);editForm=pn({displayName:"",phoneNumber:"",bio:"",barangay:"",street:"",city:"",showEmail:!0,showPhone:!1,showAddress:!1});passwordForm=pn({currentPassword:"",newPassword:"",confirmPassword:""});baguioBarangays=Object.keys(Zr).sort();filteredBarangays=[];showBarangaySuggestions=pn(!1);currentUser$=this.authService.currentUser$;isAdmin$=this.authService.isAdmin$;avatarInitials=wl(()=>{let e=this.profile()?.displayName||"U",t=e.split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e.substring(0,2).toUpperCase()});ngOnInit(){this.route.params.subscribe(e=>O(this,null,function*(){let t=e.id;if(t){this.profileId.set(t),yield this.loadProfile(t);let i=this.auth.currentUser;this.isOwnProfile.set(i?.uid===t)}else{let i=this.auth.currentUser;i?(this.profileId.set(i.uid),this.isOwnProfile.set(!0),yield this.loadProfile(i.uid)):this.router.navigate(["/login"])}}))}loadProfile(e){return O(this,null,function*(){this.isLoading.set(!0),this.errorMessage.set("");try{let t=pr(this.firestore,"users",e),i=yield m_(t);if(i.exists()){let r=i.data();this.profile.set(Ee(te({},r),{uid:e})),this.populateEditForm(r)}else{let r=this.auth.currentUser;if(r&&r.uid===e){let o=yield this.createDefaultProfile(r);this.profile.set(o),this.populateEditForm(o)}else this.errorMessage.set("Profile not found")}}catch(t){console.error("Error loading profile:",t),this.errorMessage.set("Failed to load profile")}finally{this.isLoading.set(!1)}})}createDefaultProfile(e){return O(this,null,function*(){let i=!!(yield e.getIdTokenResult()).claims?.admin,r={uid:e.uid,email:e.email||"",displayName:e.displayName||e.email?.split("@")[0]||"User",photoURL:e.photoURL||"",phoneNumber:e.phoneNumber||"",bio:"",role:i?"admin":"user",isVerified:e.emailVerified,createdAt:zo(),updatedAt:zo(),privacy:{showEmail:!0,showPhone:!1,showAddress:!1},stats:{reportsSubmitted:0,alertsReceived:0,sosTriggered:0}},o=pr(this.firestore,"users",e.uid);return yield Wd(o,r,{merge:!0}),r})}populateEditForm(e){this.editForm.set({displayName:e.displayName||"",phoneNumber:e.phoneNumber||"",bio:e.bio||"",barangay:e.address?.barangay||"",street:e.address?.street||"",city:e.address?.city||"Baguio City",showEmail:e.privacy?.showEmail??!0,showPhone:e.privacy?.showPhone??!1,showAddress:e.privacy?.showAddress??!1})}toggleEditMode(){if(this.isEditMode()){let e=this.profile();e&&this.populateEditForm(e)}this.isEditMode.set(!this.isEditMode()),this.successMessage.set(""),this.errorMessage.set("")}updateFormField(e,t){this.editForm.update(i=>Ee(te({},i),{[e]:t}))}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.updateFormField("barangay",e.target.value),this.showBarangaySuggestions.set(!0),!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.updateFormField("barangay",e),this.showBarangaySuggestions.set(!1),this.filteredBarangays=[...this.baguioBarangays]}hideBarangaySuggestions(){setTimeout(()=>{this.showBarangaySuggestions.set(!1)},200)}saveProfile(){return O(this,null,function*(){if(this.isOwnProfile()){this.isSaving.set(!0),this.errorMessage.set(""),this.successMessage.set("");try{let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let t=this.editForm();yield Em(e,{displayName:t.displayName});let i=pr(this.firestore,"users",e.uid);yield Kd(i,{displayName:t.displayName,phoneNumber:t.phoneNumber,bio:t.bio,address:{barangay:t.barangay,street:t.street,city:t.city},privacy:{showEmail:t.showEmail,showPhone:t.showPhone,showAddress:t.showAddress},updatedAt:zo()}),yield this.loadProfile(e.uid),this.successMessage.set("Profile updated successfully!"),this.toastService.success("Profile updated successfully!"),this.isEditMode.set(!1)}catch(e){console.error("Error saving profile:",e),this.errorMessage.set(e.message||"Failed to save profile"),this.toastService.error(e.message||"Failed to save profile")}finally{this.isSaving.set(!1)}}})}uploadPhoto(e){return O(this,null,function*(){let t=e.target;if(!t.files||!t.files[0])return;let i=t.files[0];if(!i.type.startsWith("image/")){this.errorMessage.set("Please select an image file"),this.toastService.error("Please select an image file");return}if(i.size>5*1024*1024){this.errorMessage.set("Image must be less than 5MB"),this.toastService.error("Image must be less than 5MB");return}this.isSaving.set(!0),this.errorMessage.set("");try{let r=this.auth.currentUser;if(!r)throw new Error("Not authenticated");let o=oz(this.storage,`profile-photos/${r.uid}`);yield sz(o,i);let s=yield iz(o);yield Em(r,{photoURL:s});let l=pr(this.firestore,"users",r.uid);yield Kd(l,{photoURL:s,updatedAt:zo()}),yield this.loadProfile(r.uid),this.successMessage.set("Photo updated successfully!"),this.toastService.success("Profile photo updated successfully!")}catch(r){console.error("Error uploading photo:",r),this.errorMessage.set(r.message||"Failed to upload photo"),this.toastService.error(r.message||"Failed to upload photo")}finally{this.isSaving.set(!1)}})}openPasswordModal(){this.passwordForm.set({currentPassword:"",newPassword:"",confirmPassword:""}),this.showPasswordModal.set(!0),this.errorMessage.set("")}closePasswordModal(){this.showPasswordModal.set(!1)}updatePasswordField(e,t){this.passwordForm.update(i=>Ee(te({},i),{[e]:t}))}changePassword(){return O(this,null,function*(){let e=this.passwordForm();if(e.newPassword!==e.confirmPassword){this.errorMessage.set("Passwords do not match"),this.toastService.error("Passwords do not match");return}if(e.newPassword.length<6){this.errorMessage.set("Password must be at least 6 characters"),this.toastService.error("Password must be at least 6 characters");return}this.isSaving.set(!0),this.errorMessage.set("");try{let t=this.auth.currentUser;if(!t||!t.email)throw new Error("Not authenticated");let i=xb.credential(t.email,e.currentPassword);yield $5(t,i),yield W5(t,e.newPassword),this.successMessage.set("Password changed successfully!"),this.toastService.success("Password changed successfully!"),this.closePasswordModal()}catch(t){console.error("Error changing password:",t),t.code==="auth/wrong-password"?(this.errorMessage.set("Current password is incorrect"),this.toastService.error("Current password is incorrect")):(this.errorMessage.set(t.message||"Failed to change password"),this.toastService.error(t.message||"Failed to change password"))}finally{this.isSaving.set(!1)}})}goBack(){this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-profile"]],decls:14,vars:6,consts:[[1,"profile-container"],[1,"profile-header"],[1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","15 18 9 12 15 6"],[1,"header-spacer"],[1,"loading-state"],[1,"error-banner"],[1,"success-banner"],[1,"profile-content"],[1,"modal-overlay"],[1,"loading-spinner-container"],[1,"spinner"],[1,"loading-text-container"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"profile-card"],[1,"cover-photo"],[1,"cover-gradient"],[1,"avatar-section"],[1,"avatar-wrapper"],["alt","Profile Photo",1,"avatar-image",3,"src"],[1,"avatar-placeholder"],["title","Change photo",1,"avatar-upload-btn"],[1,"role-badge"],[1,"user-info"],[1,"action-buttons"],[1,"details-grid"],[1,"details-card"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"info-list"],[1,"edit-field"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"details-card","privacy-card"],[1,"details-card","stats-card"],["points","22 12 18 12 15 21 9 3 6 12 2 12"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],["type","file","accept","image/*","hidden","",3,"change"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"],["cx","12","cy","13","r","4"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"user-name"],[1,"user-bio"],[1,"verified-badge"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L9.19 4.69 4.69 4.69 4.69 9.19 1 12l3.69 2.81 0 4.5h4.5L12 23l2.81-3.69h4.5l0-4.5L23 12l-3.69-2.81 0-4.5h-4.5L12 1zm-1.41 14.59L6 11l1.41-1.41 3.18 3.18 6-6L18 8.18l-7.41 7.41z"],["type","text","placeholder","Your name",3,"input","value"],["placeholder","Tell us about yourself...","rows","3",3,"input","value"],[1,"btn-primary",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"btn-secondary",3,"click"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"btn-primary",3,"click","disabled"],[1,"btn-spinner"],["points","20 6 9 17 4 12"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"privacy-indicator"],["type","tel","placeholder","+63 9XX XXX XXXX",3,"input","value"],[1,"private-message"],[1,"address-hierarchy-note"],["type","text","readonly","",1,"readonly-field",3,"value"],[1,"edit-field","barangay-field"],[1,"required"],[1,"autocomplete-wrapper"],["type","text","placeholder","Start typing to search barangay...","autocomplete","off",3,"input","focus","blur","value"],[1,"barangay-suggestions"],[1,"field-hint"],["type","text","placeholder","e.g., Purok 5, Main Street",3,"input","value"],[1,"more-results"],[3,"mousedown"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],[1,"privacy-note"],[1,"toggle-list"],[1,"toggle-item"],["type","checkbox",3,"change","checked"],[1,"toggle-slider"],[1,"toggle-label"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"modal-body"],[1,"error-message"],[1,"form-group"],["type","password","placeholder","Enter current password",3,"input","value"],["type","password","placeholder","Enter new password",3,"input","value"],["type","password","placeholder","Confirm new password",3,"input","value"],[1,"modal-footer"]],template:function(t,i){t&1&&(Y(0,"div",0)(1,"header",1)(2,"button",2),Ct("click",function(){return i.goBack()}),re(),Y(3,"svg",3),Ye(4,"polyline",4),J(),I(5," Back "),J(),_e(),Y(6,"h1"),I(7),J(),Ye(8,"div",5),J(),Re(9,ile,6,0,"div",6),Re(10,rle,6,1,"div",7),Re(11,ole,5,1,"div",8),Re(12,Nle,54,13,"div",9),Re(13,Ble,29,6,"div",10),J()),t&2&&(M(7),ue(i.isOwnProfile()?"My Profile":"User Profile"),M(2),Ne(i.isLoading()?9:-1),M(),Ne(i.errorMessage()&&!i.isLoading()?10:-1),M(),Ne(i.successMessage()?11:-1),M(),Ne(i.profile()&&!i.isLoading()?12:-1),M(),Ne(i.showPasswordModal()?13:-1))},dependencies:[Tt,Bn],styles:[`[_nghost-%COMP%]{--navy-primary: #1a2a5e;--navy-dark: #0d1a3d;--navy-light: #2a3a6e;--gold-primary: #d4a84b;--gold-light: #e5c896;--gold-dark: #c9a227;--red-accent: #c41e3a;--red-light: #ff6b6b;--white: #ffffff;--gray-50: #f8f9fa;--gray-100: #f1f3f5;--gray-200: #e9ecef;--gray-300: #dee2e6;--gray-400: #ced4da;--gray-500: #adb5bd;--gray-600: #868e96;--gray-700: #495057;--gray-800: #343a40;--gray-900: #212529;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06);--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);--shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, .15), 0 10px 10px -5px rgba(0, 0, 0, .04);--shadow-gold: 0 4px 14px rgba(212, 168, 75, .3);--shadow-navy: 0 4px 14px rgba(26, 42, 94, .25);--transition-fast: .15s cubic-bezier(.4, 0, .2, 1);--transition-normal: .3s cubic-bezier(.4, 0, .2, 1);--transition-slow: .5s cubic-bezier(.4, 0, .2, 1);--radius-sm: 6px;--radius-md: 10px;--radius-lg: 14px;--radius-xl: 20px;--radius-2xl: 28px;--radius-full: 50%;display:block;min-height:100vh;background:linear-gradient(165deg,#f8f9fb,#eef1f5,#e8edf3)}.profile-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding-bottom:80px;position:relative}.profile-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:100;display:flex;align-items:center;justify-content:space-between;padding:14px 24px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);box-shadow:var(--shadow-navy);border-bottom:2px solid rgba(212,168,75,.3)}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--white);font-size:1.1rem;font-weight:600;letter-spacing:.5px;text-transform:uppercase}.profile-header[_ngcontent-%COMP%]   .header-spacer[_ngcontent-%COMP%]{width:80px}.back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 18px;background:#ffffff1a;border:1px solid rgba(212,168,75,.4);border-radius:var(--radius-lg);color:var(--gold-light);font-size:.9rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}.back-btn[_ngcontent-%COMP%]:hover{background:#d4a84b33;border-color:var(--gold-primary);transform:translate(-3px)}.back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform var(--transition-fast)}.back-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-3px)}.edit-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 22px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--navy-dark);font-size:.9rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold);text-transform:uppercase;letter-spacing:.5px}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 6px 20px #d4a84b66}.edit-button.cancel[_ngcontent-%COMP%]{background:#ffffff1a;color:var(--white);border:1px solid rgba(255,255,255,.3);box-shadow:none}.edit-button.cancel[_ngcontent-%COMP%]:hover{background:#fff3;border-color:var(--white)}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;padding-top:80px;animation:none!important}.loading-spinner-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;animation:none!important}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:56px;height:56px;border:4px solid rgba(26,42,94,.15);border-top-color:var(--gold-primary);border-radius:var(--radius-full);animation:_ngcontent-%COMP%_spin .8s linear infinite!important}.loading-text-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;animation:none!important}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;color:var(--navy-primary);font-size:1rem;font-weight:500;animation:none!important;transform:none!important}.error-banner[_ngcontent-%COMP%], .success-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:76px 20px 16px;padding:16px 20px;border-radius:var(--radius-lg);font-size:.95rem;font-weight:500;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.error-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a1a,#ff6b6b1a);border:1px solid rgba(196,30,58,.3);color:var(--red-accent)}.success-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b9811a,#34d3991a);border:1px solid rgba(16,185,129,.3);color:#059669}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.profile-content[_ngcontent-%COMP%]{padding-top:76px}.profile-card[_ngcontent-%COMP%]{margin:20px;background:var(--white);border-radius:var(--radius-2xl);box-shadow:var(--shadow-xl);overflow:hidden;border:1px solid rgba(26,42,94,.08)}.cover-section[_ngcontent-%COMP%]{position:relative;margin-top:60px}.cover-photo[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 40%,var(--navy-light) 100%);overflow:hidden}.cover-photo[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 50%,rgba(212,168,75,.15) 0%,transparent 50%),radial-gradient(circle at 80% 30%,rgba(212,168,75,.1) 0%,transparent 40%),url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4a84b' fill-opacity='0.06'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}.cover-gradient[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 0%,rgba(255,255,255,.1) 100%)}.cover-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.cover-photo[_ngcontent-%COMP%]   .default-cover[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 50%,var(--navy-light) 100%);display:flex;align-items:center;justify-content:center}.cover-photo[_ngcontent-%COMP%]   .default-cover[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4a84b' fill-opacity='0.08'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}.cover-photo[_ngcontent-%COMP%]   .default-cover[_ngcontent-%COMP%]   .police-badge[_ngcontent-%COMP%]{font-size:4rem;opacity:.3;z-index:1}.cover-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.4) 0%,transparent 60%);pointer-events:none}.change-cover-btn[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;display:flex;align-items:center;gap:8px;padding:10px 16px;background:#0009;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:var(--radius-md);color:var(--white);font-size:.85rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}.change-cover-btn[_ngcontent-%COMP%]:hover{background:#000c;transform:scale(1.02)}.change-cover-btn[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.avatar-section[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;margin-top:-70px;padding:0 20px;z-index:10}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:140px;height:140px}.avatar-container[_ngcontent-%COMP%]{position:relative;width:160px;height:160px}.avatar[_ngcontent-%COMP%], .avatar-image[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:var(--radius-full);border:5px solid var(--white);box-shadow:0 8px 32px #1a2a5e40,0 0 0 4px #d4a84b4d;overflow:hidden;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%)}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar[_ngcontent-%COMP%]   .default-avatar[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);color:var(--gold-primary);font-size:3.5rem;font-weight:700;text-transform:uppercase;letter-spacing:2px}.verified-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;margin-top:12px;padding:8px 16px;background:linear-gradient(135deg,#10b9811a,#34d39926);border:1px solid rgba(16,185,129,.3);border-radius:var(--radius-lg);color:#059669;font-size:.85rem;font-weight:600}.verified-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#10b981}.avatar-upload-btn[_ngcontent-%COMP%], .change-avatar-btn[_ngcontent-%COMP%]{position:absolute;bottom:4px;right:4px;width:40px;height:40px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:3px solid var(--white);border-radius:var(--radius-full);display:flex;align-items:center;justify-content:center;color:var(--navy-dark);font-size:1rem;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold)}.avatar-upload-btn[_ngcontent-%COMP%]:hover, .change-avatar-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 20px #d4a84b66}.role-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;margin-top:16px;padding:10px 20px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-xl);color:var(--gold-primary);font-size:.85rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;box-shadow:var(--shadow-navy);border:2px solid rgba(212,168,75,.3)}.role-badge.admin[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);color:var(--navy-dark);border-color:var(--gold-dark)}.role-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.9}.change-avatar-btn[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.user-info[_ngcontent-%COMP%]{padding:24px 30px 30px;text-align:center}.user-name[_ngcontent-%COMP%]{font-size:1.85rem;font-weight:800;color:var(--navy-dark);letter-spacing:-.5px;margin:0}.user-role[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;margin-top:10px;padding:8px 16px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-lg);color:var(--gold-primary);font-size:.85rem;font-weight:600;text-transform:capitalize}.user-role[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{font-size:.9rem}.user-bio[_ngcontent-%COMP%]{margin-top:16px;font-size:1rem;color:var(--gray-600);line-height:1.6;max-width:500px;margin-left:auto;margin-right:auto}.edit-field[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.edit-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.85rem;font-weight:600;color:var(--navy-primary);text-transform:uppercase;letter-spacing:.5px}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:14px 18px;background:var(--gray-50);border:2px solid var(--gray-200);border-radius:var(--radius-lg);font-size:1rem;color:var(--gray-800);transition:all var(--transition-fast)}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .edit-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gold-primary);background:var(--white);box-shadow:0 0 0 4px #d4a84b26}.edit-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical;font-family:inherit}.readonly-field[_ngcontent-%COMP%]{background:var(--gray-100)!important;color:var(--gray-600)!important;cursor:not-allowed}.address-hierarchy-note[_ngcontent-%COMP%]{color:var(--navy-primary);font-size:.85rem;font-weight:600;margin-bottom:16px;padding:10px 14px;background:linear-gradient(135deg,#d4a84b1a,#d4a84b0d);border-left:3px solid var(--gold-primary);border-radius:var(--radius-sm)}.edit-field[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--red-accent);font-weight:700}.field-hint[_ngcontent-%COMP%]{display:block;margin-top:6px;color:var(--gray-500);font-size:.75rem}.barangay-field[_ngcontent-%COMP%]   .autocomplete-wrapper[_ngcontent-%COMP%]{position:relative}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;max-height:280px;margin:0;padding:0;list-style:none;background:var(--white);border:2px solid var(--gold-primary);border-top:none;border-radius:0 0 var(--radius-lg) var(--radius-lg);box-shadow:var(--shadow-lg);overflow-y:auto;z-index:100}.barangay-suggestions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:12px 18px;cursor:pointer;font-size:.9rem;color:var(--gray-700);border-bottom:1px solid var(--gray-100);transition:all var(--transition-fast)}.barangay-suggestions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.barangay-suggestions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d4a84b26,#d4a84b0d);color:var(--navy-primary)}.barangay-suggestions[_ngcontent-%COMP%]   li.more-results[_ngcontent-%COMP%]{background:var(--gray-50);color:var(--gray-500);font-style:italic;font-size:.8rem;cursor:default;text-align:center}.barangay-suggestions[_ngcontent-%COMP%]   li.more-results[_ngcontent-%COMP%]:hover{background:var(--gray-50)}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;padding:0 30px 30px}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px 28px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--navy-dark);font-size:.95rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold)}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #d4a84b66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-secondary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px 28px;background:var(--gray-100);border:2px solid var(--gray-300);border-radius:var(--radius-lg);color:var(--gray-700);font-size:.95rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--gray-200);border-color:var(--gray-400)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;margin:0 20px 20px;background:var(--gray-200);border-radius:var(--radius-xl);overflow:hidden;box-shadow:var(--shadow-md)}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px 16px;background:var(--white);transition:all var(--transition-fast)}.stat-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1a2a5e08,#d4a84b0d)}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:var(--navy-primary);line-height:1}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{margin-top:6px;font-size:.8rem;color:var(--gray-500);font-weight:600;text-transform:uppercase;letter-spacing:.5px}.stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.5rem;color:var(--gold-primary)}.tabs[_ngcontent-%COMP%]{display:flex;gap:4px;margin:0 20px 20px;padding:6px;background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);border:1px solid var(--gray-200)}.tab-btn[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:10px;padding:14px 20px;background:transparent;border:none;border-radius:var(--radius-lg);color:var(--gray-500);font-size:.9rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.tab-btn[_ngcontent-%COMP%]:hover{background:var(--gray-100);color:var(--navy-primary)}.tab-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);color:var(--white);box-shadow:var(--shadow-navy)}.tab-btn.active[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--navy-light) 0%,var(--navy-primary) 100%)}.tab-btn[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{font-size:1.1rem}.tab-content[_ngcontent-%COMP%]{margin:0 20px 20px}.info-section[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;margin-bottom:20px;border:1px solid rgba(26,42,94,.06)}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 24px;padding-bottom:16px;border-bottom:2px solid var(--gray-100);font-size:1.1rem;font-weight:700;color:var(--navy-primary)}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--gold-primary)}.about-panel[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;border:1px solid rgba(26,42,94,.06)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--gray-100);font-size:1.1rem;font-weight:700;color:var(--navy-primary)}.section-title[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{color:var(--gold-primary)}.info-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding:16px;background:linear-gradient(135deg,var(--gray-50) 0%,rgba(212,168,75,.03) 100%);border-radius:var(--radius-lg);border:1px solid var(--gray-200);transition:all var(--transition-fast)}.info-item[_ngcontent-%COMP%]:hover{border-color:#d4a84b4d;transform:translate(4px)}.info-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{flex-shrink:0;width:44px;height:44px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-md);color:var(--gold-primary);font-size:1.1rem}.info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{flex:1}.info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--gray-500);font-weight:700;text-transform:uppercase;letter-spacing:.75px}.info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{margin-top:4px;font-size:1rem;color:var(--gray-800);font-weight:600}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:.85rem;font-weight:700;color:var(--navy-primary);text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:14px 18px;background:var(--gray-50);border:2px solid var(--gray-200);border-radius:var(--radius-lg);font-size:1rem;color:var(--gray-800);transition:all var(--transition-fast)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gold-primary);background:var(--white);box-shadow:0 0 0 4px #d4a84b26}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:120px;resize:vertical;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--gray-400)}.save-button[_ngcontent-%COMP%]{width:100%;padding:16px 28px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--navy-dark);font-size:1rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold);text-transform:uppercase;letter-spacing:.5px}.save-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #d4a84b66}.save-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.activity-panel[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;border:1px solid rgba(26,42,94,.06)}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.activity-item[_ngcontent-%COMP%]{display:flex;gap:16px;padding:18px;background:linear-gradient(135deg,var(--gray-50) 0%,rgba(212,168,75,.03) 100%);border-radius:var(--radius-lg);border:1px solid var(--gray-200);transition:all var(--transition-fast)}.activity-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1a2a5e08,#d4a84b14);border-color:#d4a84b4d;transform:translate(6px)}.activity-icon[_ngcontent-%COMP%]{flex-shrink:0;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-lg);color:var(--gold-primary);font-size:1.2rem;box-shadow:var(--shadow-navy)}.activity-content[_ngcontent-%COMP%]{flex:1}.activity-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:var(--gray-800)}.activity-description[_ngcontent-%COMP%]{margin-top:4px;font-size:.9rem;color:var(--gray-500);line-height:1.4}.activity-time[_ngcontent-%COMP%]{margin-top:8px;font-size:.75rem;color:var(--gray-400);font-weight:600;text-transform:uppercase;letter-spacing:.5px}.empty-activity[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;color:var(--gray-500)}.empty-activity[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:16px;opacity:.4}.empty-activity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}.settings-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.settings-section[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;border:1px solid rgba(26,42,94,.06)}.settings-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--gray-100);font-size:1.1rem;font-weight:700;color:var(--navy-primary)}.settings-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .settings-icon[_ngcontent-%COMP%]{color:var(--gold-primary)}.password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.change-password-btn[_ngcontent-%COMP%]{width:100%;padding:14px 28px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--white);font-size:.95rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-navy);text-transform:uppercase;letter-spacing:.5px}.change-password-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #1a2a5e4d;background:linear-gradient(135deg,var(--navy-light) 0%,var(--navy-primary) 100%)}.change-password-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.danger-zone[_ngcontent-%COMP%]{border:2px solid rgba(196,30,58,.3);background:linear-gradient(135deg,#c41e3a05,#ff6b6b08)}.danger-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .danger-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .settings-icon[_ngcontent-%COMP%]{color:var(--red-accent)}.danger-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;width:100%;padding:14px 28px;background:transparent;border:2px solid var(--red-accent);border-radius:var(--radius-lg);color:var(--red-accent);font-size:.95rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);text-transform:uppercase;letter-spacing:.5px}.danger-btn[_ngcontent-%COMP%]:hover{background:var(--red-accent);color:var(--white);box-shadow:0 4px 16px #c41e3a4d}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1000;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#0d1a3df2,#1a2a5ef2);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.loading-overlay[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:56px;height:56px;border:4px solid rgba(212,168,75,.2);border-top-color:var(--gold-primary);border-radius:var(--radius-full);animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;color:var(--white);font-size:1rem;font-weight:500;letter-spacing:.5px;animation:none!important}@media (max-width: 768px){.profile-header[_ngcontent-%COMP%]{padding:12px 16px}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:.95rem}.back-btn[_ngcontent-%COMP%]{padding:8px 14px;font-size:.85rem}.edit-button[_ngcontent-%COMP%]{padding:8px 16px;font-size:.85rem}.cover-photo[_ngcontent-%COMP%]{height:160px}.avatar-wrapper[_ngcontent-%COMP%]{width:110px;height:110px}.avatar-placeholder[_ngcontent-%COMP%]{font-size:2.5rem}.avatar-section[_ngcontent-%COMP%]{margin-top:-55px}.role-badge[_ngcontent-%COMP%]{padding:8px 16px;font-size:.75rem}.user-info[_ngcontent-%COMP%]{padding:20px}.user-name[_ngcontent-%COMP%]{font-size:1.5rem}.profile-card[_ngcontent-%COMP%]{margin:16px}.stats-grid[_ngcontent-%COMP%]{margin:0 16px 16px}.stat-item[_ngcontent-%COMP%]{padding:16px 8px}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.7rem}.tabs[_ngcontent-%COMP%]{margin:0 16px 16px;padding:4px}.tab-btn[_ngcontent-%COMP%]{padding:12px 10px;font-size:.85rem;gap:6px}.tab-content[_ngcontent-%COMP%]{margin:0 16px 16px}.about-panel[_ngcontent-%COMP%], .activity-panel[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%], .info-section[_ngcontent-%COMP%]{padding:20px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;padding:0 20px 20px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.profile-header[_ngcontent-%COMP%]{padding:10px 12px}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:.85rem}.back-btn[_ngcontent-%COMP%]{padding:8px 12px}.cover-photo[_ngcontent-%COMP%]{height:120px}.avatar-wrapper[_ngcontent-%COMP%]{width:90px;height:90px}.avatar-placeholder[_ngcontent-%COMP%]{font-size:2rem}.avatar-section[_ngcontent-%COMP%]{margin-top:-45px}.avatar-upload-btn[_ngcontent-%COMP%]{width:32px;height:32px}.user-name[_ngcontent-%COMP%]{font-size:1.3rem}.role-badge[_ngcontent-%COMP%]{padding:6px 14px;font-size:.7rem}.stats-grid[_ngcontent-%COMP%]{margin:0 12px 12px}.stat-item[_ngcontent-%COMP%]{padding:12px 6px}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.3rem}.tabs[_ngcontent-%COMP%]{margin:0 12px 12px}.tab-btn[_ngcontent-%COMP%]{padding:10px 8px;font-size:.75rem}.tab-content[_ngcontent-%COMP%]{margin:0 12px 12px}.info-item[_ngcontent-%COMP%]{padding:12px;gap:12px}.info-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{width:36px;height:36px;font-size:.9rem}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.92)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.profile-card[_ngcontent-%COMP%], .cover-section[_ngcontent-%COMP%], .cover-photo[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s cubic-bezier(.4,0,.2,1)}.avatar-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn .5s cubic-bezier(.4,0,.2,1) .15s both}.role-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1) .25s both}.user-info[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1) .2s both}.stats-grid[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s cubic-bezier(.4,0,.2,1) .3s both}.tabs[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s cubic-bezier(.4,0,.2,1) .35s both}.tab-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1)}.info-section[_ngcontent-%COMP%], .about-panel[_ngcontent-%COMP%], .activity-panel[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1)}.profile-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-xl),0 0 0 1px #d4a84b1a}.info-item[_ngcontent-%COMP%], .activity-item[_ngcontent-%COMP%]{position:relative;overflow:hidden}.info-item[_ngcontent-%COMP%]:before, .activity-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(212,168,75,.05),transparent);transition:left .5s ease}.info-item[_ngcontent-%COMP%]:hover:before, .activity-item[_ngcontent-%COMP%]:hover:before{left:100%}`]})};var YD=(n,e)=>{let t=$(Dn),i=$(Rt);return t.isAdmin$.pipe(pe(r=>r?!0:i.createUrlTree(["/login"])))},S_=(n,e)=>{let t=$(Dn),i=$(Rt);return t.currentUser$.pipe(pe(r=>r?!0:i.createUrlTree(["/login"])))};var az=[{path:"",component:ox,title:"Mountain Sentinel Home"},{path:"map",component:yx,title:"Safety Alert Map"},{path:"login",component:Sx,title:"Login / Sign Up"},{path:"report",component:bx,title:"Submit Safety Alert",canActivate:[S_]},{path:"report-detail/:id",component:wx,title:"Alert Details"},{path:"admin-dashboard",component:xx,title:"Admin Dashboard",canActivate:[YD]},{path:"admin-report",component:Cx,title:"Issue Safety Alert",canActivate:[YD]},{path:"safety-feed",component:Ex,title:"Safety Feed"},{path:"police-reports",component:Ix,title:"Police Issuance Reports"},{path:"citizen-reports",component:Ox,title:"Citizen Reports"},{path:"user-dashboard",component:Px,title:"User Dashboard",canActivate:[S_]},{path:"notification",component:Tx,title:"Notifications"},{path:"emergency-call",component:Mx,title:"Emergency Call",canActivate:[S_]},{path:"profile",component:Nx,title:"My Profile",canActivate:[S_]},{path:"**",redirectTo:""}];var Ule={apiKey:"AIzaSyC5tdlJxwcSqbHwGAjOjUbd7XVU54ePawk",authDomain:"mountain-sentinel.firebaseapp.com",projectId:"mountain-sentinel",storageBucket:"mountain-sentinel.firebasestorage.app",messagingSenderId:"635510430186",appId:"1:635510430186:web:e333c2a926d64d44383a93",measurementId:"G-5G9M3TM3NW"},cz={providers:[KF(()=>QF(Ule)),GB(()=>WB()),B5(()=>j5()),nz(()=>rz()),tU(()=>nU()),eP(az)]};var zle=(n,e)=>e.id;function jle(n,e){n&1&&(re(),Y(0,"svg",4),Ye(1,"path",10)(2,"polyline",11),J())}function $le(n,e){n&1&&(re(),Y(0,"svg",4),Ye(1,"circle",12)(2,"line",13)(3,"line",14),J())}function Hle(n,e){n&1&&(re(),Y(0,"svg",4),Ye(1,"path",15)(2,"line",16)(3,"line",17),J())}function qle(n,e){n&1&&(re(),Y(0,"svg",4),Ye(1,"circle",12)(2,"line",18)(3,"line",19),J())}function Gle(n,e){if(n&1){let t=ve();Y(0,"div",2),Ct("click",function(){let r=q(t).$implicit,o=B();return G(o.dismiss(r.id))}),Y(1,"div",3),Re(2,jle,3,0,":svg:svg",4)(3,$le,4,0,":svg:svg",4)(4,Hle,4,0,":svg:svg",4)(5,qle,4,0,":svg:svg",4),J(),Y(6,"span",5),I(7),J(),Y(8,"button",6),Ct("click",function(r){let o=q(t).$implicit;return B().dismiss(o.id),G(r.stopPropagation())}),re(),Y(9,"svg",7),Ye(10,"line",8)(11,"line",9),J()()()}if(n&2){let t,i=e.$implicit;ld("toast-"+i.type),M(2),Ne((t=i.type)==="success"?2:t==="error"?3:t==="warning"?4:t==="info"?5:-1),M(5),ue(i.message)}}var Lx=class n{toastService=$(Ni);dismiss(e){this.toastService.dismiss(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-toast"]],decls:3,vars:0,consts:[[1,"toast-container"],[1,"toast",3,"class"],[1,"toast",3,"click"],[1,"toast-icon"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"toast-message"],[1,"toast-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"]],template:function(t,i){t&1&&(Y(0,"div",0),od(1,Gle,12,4,"div",1,zle),J()),t&2&&(M(),sd(i.toastService.toasts()))},dependencies:[Tt],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:80px;right:20px;z-index:10000;display:flex;flex-direction:column;gap:12px;max-width:400px}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 18px;border-radius:12px;box-shadow:0 8px 32px #00000026,0 4px 12px #0000001a;cursor:pointer;animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}.toast-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#059669,#10b981);color:#fff}.toast-error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#ef4444);color:#fff}.toast-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d97706,#f59e0b);color:#fff}.toast-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#2563eb);color:#fff}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center}.toast-message[_ngcontent-%COMP%]{flex:1;font-size:.95rem;font-weight:500;line-height:1.4}.toast-close[_ngcontent-%COMP%]{flex-shrink:0;background:#fff3;border:none;border-radius:6px;padding:4px;cursor:pointer;color:inherit;display:flex;align-items:center;justify-content:center;transition:background .2s}.toast-close[_ngcontent-%COMP%]:hover{background:#ffffff4d}@media (max-width: 480px){.toast-container[_ngcontent-%COMP%]{left:12px;right:12px;max-width:none}}"]})};var lz=()=>({exact:!0});function Wle(n,e){if(n&1&&(b(0,"span",29),I(1),w()),n&2){let t=e.ngIf;We("hidden",t===0),M(),ue(t)}}function Kle(n,e){if(n&1){let t=ve();pt(0),b(1,"a",17),ee("click",function(){q(t);let r=B();return G(r.closeNavMenu())}),re(),b(2,"svg",18),oe(3,"path",19),w(),I(4," Home "),w(),_e(),b(5,"a",20),ee("click",function(){q(t);let r=B();return G(r.closeNavMenu())}),re(),b(6,"svg",18),oe(7,"path",21),w(),I(8," Admin Dashboard "),w(),_e(),b(9,"a",22),ee("click",function(){q(t);let r=B();return G(r.closeNavMenu())}),re(),b(10,"svg",18),oe(11,"path",23),w(),I(12," Issue Alert "),w(),_e(),b(13,"a",24),ee("click",function(){q(t);let r=B();return G(r.closeNavMenu())}),re(),b(14,"svg",18),oe(15,"path",25),w(),I(16," SOS Notifications "),ie(17,Wle,2,3,"span",26),Me(18,"async"),w(),_e(),b(19,"a",27),ee("click",function(){q(t);let r=B();return G(r.closeNavMenu())}),re(),b(20,"svg",18),oe(21,"path",28),w(),I(22," Incident Map "),w(),gt()}if(n&2){let t=B();M(),W("routerLinkActiveOptions",Zh(4,lz)),M(16),W("ngIf",$e(18,2,t.sosCount$))}}function Qle(n,e){if(n&1&&(b(0,"span",35),I(1),w()),n&2){let t=e.ngIf;We("hidden",t===0),M(),ue(t)}}function Yle(n,e){if(n&1){let t=ve();pt(0),b(1,"a",17),ee("click",function(){q(t);let r=B();return G(r.closeNavMenu())}),re(),b(2,"svg",18),oe(3,"path",19),w(),I(4," Home "),w(),_e(),b(5,"a",30),ee("click",function(){q(t);let r=B();return G(r.closeNavMenu())}),re(),b(6,"svg",18),oe(7,"path",31),w(),I(8," Notifications "),ie(9,Qle,2,3,"span",32),Me(10,"async"),w(),_e(),b(11,"a",33),ee("click",function(r){q(t);let o=B();return G(o.handleNavReportClick(r))}),re(),b(12,"svg",18),oe(13,"path",34),w(),I(14," Submit Report "),w(),gt()}if(n&2){let t=B();M(),W("routerLinkActiveOptions",Zh(4,lz)),M(8),W("ngIf",$e(10,2,t.unreadCount$))}}function Zle(n,e){if(n&1){let t=ve();pt(0),b(1,"div",36),Me(2,"async"),b(3,"span",37),I(4),Me(5,"async"),w()(),b(6,"div",38),ee("click",function(){q(t);let r=B();return G(r.toggleProfileMenu())}),b(7,"div",39),re(),b(8,"svg",18),oe(9,"path",40),w()(),_e(),b(10,"div",41)(11,"a",42),ee("click",function(){q(t);let r=B();return G(r.closeProfileMenu())}),re(),b(12,"svg",43),oe(13,"path",40),w(),I(14," My Profile "),w(),_e(),b(15,"button",44),ee("click",function(){q(t);let r=B();return r.logout(),G(r.closeProfileMenu())}),re(),b(16,"svg",45),oe(17,"path",46)(18,"polyline",47)(19,"line",48),w(),I(20," Logout "),w()()(),gt()}if(n&2){let t=B();M(),We("admin-indicator",$e(2,5,t.authService.isAdmin$)),M(3),ue($e(5,7,t.authService.isAdmin$)?"ADMIN":"CITIZEN"),M(6),We("open",t.profileMenuOpen)}}function Jle(n,e){if(n&1){let t=ve();b(0,"a",49),ee("click",function(){q(t);let r=B();return G(r.closeMenu())}),re(),b(1,"svg",50),oe(2,"path",40),w(),I(3," Login "),w()}}function Xle(n,e){if(n&1){let t=ve();b(0,"div",51),ee("click",function(){q(t);let r=B();return G(r.closeAuthPrompt())}),b(1,"div",52),ee("click",function(r){return q(t),G(r.stopPropagation())}),b(2,"button",53),ee("click",function(){q(t);let r=B();return G(r.closeAuthPrompt())}),I(3,"\xD7"),w(),b(4,"div",54),re(),b(5,"svg",55),oe(6,"rect",56)(7,"path",57),w()(),_e(),b(8,"h2"),I(9,"Authentication Required"),w(),b(10,"p",58),I(11," You need to create an account or sign in before you can submit a safety alert. "),w(),b(12,"p",59),I(13," Creating an account helps us verify reports and keep the community safe. "),w(),b(14,"div",60)(15,"button",61),ee("click",function(){q(t);let r=B();return G(r.navigateToLogin())}),I(16," Sign In / Sign Up "),w(),b(17,"button",62),ee("click",function(){q(t);let r=B();return G(r.closeAuthPrompt())}),I(18,"Cancel"),w()()()()}}var Fx=class n{title="Mountain Sentinel";authService=$(Dn);notificationService=$(Aa);animationService=$(jo);router=$(Rt);unreadCount$;sosCount$;showAuthPrompt=!1;menuOpen=!1;profileMenuOpen=!1;navMenuOpen=!1;constructor(){this.unreadCount$=this.notificationService.getUnreadCount(),this.sosCount$=this.notificationService.getSOSCount()}ngOnInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect()}ngAfterViewInit(){document.querySelectorAll("button:not(.hamburger-btn)").forEach(t=>{this.animationService.addRippleEffect(t)})}ngOnDestroy(){this.animationService.destroyScrollObserver()}toggleMenu(){this.menuOpen=!this.menuOpen,this.profileMenuOpen=!1,this.navMenuOpen=!1}closeMenu(){this.menuOpen=!1}toggleNavMenu(){this.navMenuOpen=!this.navMenuOpen,this.menuOpen=!1,this.profileMenuOpen=!1}closeNavMenu(){this.navMenuOpen=!1}handleNavReportClick(e){this.closeNavMenu(),this.handleReportClick(e)}toggleProfileMenu(){this.profileMenuOpen=!this.profileMenuOpen}closeProfileMenu(){this.profileMenuOpen=!1}handleReportClick(e){this.authService.currentUser$.pipe(Mi(1)).subscribe(t=>{t||(e.preventDefault(),this.showAuthPrompt=!0)})}closeAuthPrompt(){this.showAuthPrompt=!1}navigateToLogin(){this.showAuthPrompt=!1,this.router.navigate(["/login"])}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-root"]],decls:33,vars:24,consts:[["loginBtn",""],[1,"app-header"],[1,"header-brand-group"],["aria-label","Navigation menu",1,"nav-hamburger-btn",3,"click"],[1,"nav-hamburger-line"],[1,"logo-area"],[1,"logo-badge"],[1,"app-title"],[1,"nav-slide-menu"],[1,"nav-slide-header"],[1,"nav-close-btn",3,"click"],[4,"ngIf"],[1,"nav-menu-overlay",3,"click"],[1,"header-right"],[4,"ngIf","ngIfElse"],[1,"app-main"],[1,"modal-overlay"],["routerLink","/","routerLinkActive","active",1,"nav-slide-item",3,"click","routerLinkActiveOptions"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","currentColor"],["d","M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"],["routerLink","/admin-dashboard","routerLinkActive","active",1,"nav-slide-item","admin-item",3,"click"],["d","M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"],["routerLink","/admin-report","routerLinkActive","active",1,"nav-slide-item","admin-item",3,"click"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"],["routerLink","/notification","routerLinkActive","active",1,"nav-slide-item","admin-item","sos-item",3,"click"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],["class","nav-badge sos-badge",3,"hidden",4,"ngIf"],["routerLink","/map","routerLinkActive","active",1,"nav-slide-item","admin-item",3,"click"],["d","M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"],[1,"nav-badge","sos-badge"],["routerLink","/notification","routerLinkActive","active",1,"nav-slide-item",3,"click"],["d","M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"],["class","nav-badge",3,"hidden",4,"ngIf"],["routerLink","/report","routerLinkActive","active",1,"nav-slide-item",3,"click"],["d","M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"],[1,"nav-badge"],[1,"user-role-indicator"],[1,"role-text"],[1,"profile-dropdown",3,"click"],[1,"profile-avatar"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"profile-menu"],["routerLink","/profile",1,"profile-menu-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],[1,"profile-menu-item","logout-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],["routerLink","/login","routerLinkActive","active",1,"login-link",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","currentColor"],[1,"modal-overlay",3,"click"],[1,"auth-prompt-modal",3,"click"],["aria-label","Close",1,"close-btn",3,"click"],[1,"modal-icon"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"modal-message"],[1,"modal-submessage"],[1,"modal-actions"],[1,"modal-btn","primary-btn",3,"click"],[1,"modal-btn","secondary-btn",3,"click"]],template:function(t,i){if(t&1){let r=ve();oe(0,"app-toast"),b(1,"header",1)(2,"div",2)(3,"button",3),ee("click",function(){return q(r),G(i.toggleNavMenu())}),oe(4,"span",4)(5,"span",4)(6,"span",4),w(),b(7,"div",5)(8,"div",6),I(9,"BCPO"),w()(),b(10,"h1",7),I(11,"BAGUIO FINEST"),w()(),b(12,"div",8),Me(13,"async"),b(14,"div",9)(15,"span"),I(16),Me(17,"async"),w(),b(18,"button",10),ee("click",function(){return q(r),G(i.closeNavMenu())}),I(19,"\xD7"),w()(),ie(20,Kle,23,5,"ng-container",11),Me(21,"async"),ie(22,Yle,15,5,"ng-container",11),Me(23,"async"),w(),b(24,"div",12),ee("click",function(){return q(r),G(i.closeNavMenu())}),w(),b(25,"div",13),ie(26,Zle,21,9,"ng-container",14),Me(27,"async"),ie(28,Jle,4,0,"ng-template",null,0,Qt),w()(),b(30,"main",15),oe(31,"router-outlet"),w(),Re(32,Xle,19,0,"div",16)}if(t&2){let r=Pt(29);M(3),We("active",i.navMenuOpen),M(9),We("open",i.navMenuOpen)("admin-menu",$e(13,14,i.authService.isAdmin$)),M(4),ue($e(17,16,i.authService.isAdmin$)?"Admin Panel":"Navigation"),M(4),W("ngIf",$e(21,18,i.authService.isAdmin$)),M(2),W("ngIf",!$e(23,20,i.authService.isAdmin$)),M(2),We("open",i.navMenuOpen),M(2),W("ngIf",$e(27,22,i.authService.currentUser$))("ngIfElse",r),M(6),Ne(i.showAuthPrompt?32:-1)}},dependencies:[Tt,gn,Yg,ar,po,XI,Lx,An],styles:['.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;padding:8px 16px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 8px 32px #0d1a3d80;height:56px;position:relative;z-index:1000;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:2px solid #d4a84b;animation:_ngcontent-%COMP%_slideDown .6s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.app-header[_ngcontent-%COMP%]{padding:6px 12px;height:48px}}.header-brand-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0;flex-shrink:0}.header-brand-group[_ngcontent-%COMP%]   .nav-hamburger-btn[_ngcontent-%COMP%]{margin-right:10px}.header-brand-group[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:46px;height:46px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid rgba(255,255,255,.8);flex-shrink:0;box-shadow:0 4px 16px #d4a84b80,inset 0 1px 2px #ffffff80;transition:all .3s cubic-bezier(.4,0,.2,1);margin-right:10px}.header-brand-group[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 8px 24px #d4a84b99}.header-brand-group[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:11px;font-weight:800;color:#1a3a52;text-align:center;line-height:1}.header-brand-group[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:800;letter-spacing:1px;line-height:1.2;white-space:nowrap;background:linear-gradient(135deg,#fff,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.app-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-shrink:0}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:46px;height:46px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid rgba(255,255,255,.8);flex-shrink:0;box-shadow:0 4px 16px #d4a84b80,inset 0 1px 2px #ffffff80;transition:all .3s cubic-bezier(.4,0,.2,1)}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 8px 24px #d4a84b99}.header-left[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:11px;font-weight:800;color:#1a3a52;text-align:center;line-height:1}.header-left[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:800;letter-spacing:1px;line-height:1.2;white-space:nowrap;background:linear-gradient(135deg,#fff,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.app-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-shrink:0}.user-role-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;padding:6px 14px;background:linear-gradient(135deg,#50c878,#3ba55c);border-radius:20px;font-size:.7rem;font-weight:700;letter-spacing:.5px;color:#fff;box-shadow:0 2px 6px #50c87859;border:1px solid rgba(255,255,255,.3)}.user-role-indicator[_ngcontent-%COMP%]   .role-text[_ngcontent-%COMP%]{line-height:1}.user-role-indicator.admin-indicator[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#f0c800);color:#1a3a52;box-shadow:0 2px 8px #ffd70073;border:1px solid rgba(255,215,0,.5);animation:_ngcontent-%COMP%_adminGlow 3s ease-in-out infinite}.profile-dropdown[_ngcontent-%COMP%]{position:relative;cursor:pointer}.profile-avatar[_ngcontent-%COMP%]{width:42px;height:42px;background:linear-gradient(135deg,#fff,#e0e0e0);border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid #d4a84b;box-shadow:0 4px 12px #0003;transition:all .3s ease}.profile-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e}.profile-avatar[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 6px 16px #d4a84b66;border-color:#e5c896}.profile-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);right:0;min-width:180px;background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s cubic-bezier(.4,0,.2,1);overflow:hidden;z-index:1001}.profile-menu.open[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.profile-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:14px 18px;border:none;background:transparent;color:#333;font-size:.9rem;font-weight:500;text-decoration:none;cursor:pointer;transition:all .2s ease}.profile-menu-item[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:#1a2a5e}.profile-menu-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.profile-menu-item.logout-item[_ngcontent-%COMP%]{border-top:1px solid #eee;color:#c41e3a}.profile-menu-item.logout-item[_ngcontent-%COMP%]:hover{background:#fff5f5;color:#a01830}.header-right[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:10px 20px;background:linear-gradient(135deg,#d4a84b,#c9a227);color:#1a2a5e;font-weight:700;font-size:.9rem;border-radius:25px;text-decoration:none;box-shadow:0 4px 12px #d4a84b66;transition:all .3s ease}.header-right[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.header-right[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #d4a84b80}.user-role-indicator.admin-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a3a52}@keyframes _ngcontent-%COMP%_adminGlow{0%,to{box-shadow:0 2px 10px #ffd70080}50%{box-shadow:0 4px 18px #ffd700b3}}.nav-hamburger-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:4px;width:42px;height:42px;background:#ffffff1a;border:2px solid rgba(212,168,75,.5);border-radius:10px;cursor:pointer;padding:8px;transition:all .3s cubic-bezier(.4,0,.2,1);z-index:1002;flex-shrink:0;margin-right:8px}.nav-hamburger-btn[_ngcontent-%COMP%]:hover{background:#d4a84b33;border-color:#d4a84b;transform:scale(1.05)}.nav-hamburger-line[_ngcontent-%COMP%]{width:20px;height:2.5px;background:#d4a84b;border-radius:2px;transition:all .3s ease}.nav-hamburger-btn.active[_ngcontent-%COMP%]{background:#d4a84b4d;border-color:#d4a84b}.nav-hamburger-btn.active[_ngcontent-%COMP%]   .nav-hamburger-line[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(4px,5px)}.nav-hamburger-btn.active[_ngcontent-%COMP%]   .nav-hamburger-line[_ngcontent-%COMP%]:nth-child(2){opacity:0;transform:translate(-10px)}.nav-hamburger-btn.active[_ngcontent-%COMP%]   .nav-hamburger-line[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(4px,-5px)}.nav-slide-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:-280px;width:280px;height:100vh;background:linear-gradient(180deg,#1a2a5e,#0d1a3d);box-shadow:4px 0 30px #0000004d;z-index:1100;transition:left .35s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column;overflow-y:auto}.nav-slide-menu.open[_ngcontent-%COMP%]{left:0}.nav-slide-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 20px 16px;border-bottom:2px solid rgba(212,168,75,.3);background:#0003}.nav-slide-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d4a84b;font-size:1.1rem;font-weight:700;letter-spacing:1px;text-transform:uppercase}.nav-close-btn[_ngcontent-%COMP%]{width:36px;height:36px;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:50%;color:#fff;font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.nav-close-btn[_ngcontent-%COMP%]:hover{background:#c41e3a99;border-color:#c41e3a}.nav-slide-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:18px 24px;color:#ffffffe6;text-decoration:none;font-size:1rem;font-weight:500;border-bottom:1px solid rgba(255,255,255,.08);transition:all .25s ease;position:relative}.nav-slide-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;opacity:.8}.nav-slide-item[_ngcontent-%COMP%]:hover{background:#d4a84b26;color:#d4a84b;padding-left:30px}.nav-slide-item[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{opacity:1;color:#d4a84b}.nav-slide-item.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(212,168,75,.25) 0%,transparent 100%);color:#d4a84b;border-left:4px solid #d4a84b}.nav-badge[_ngcontent-%COMP%]{margin-left:auto;background:linear-gradient(135deg,#c41e3a,#a01830);color:#fff;font-size:.7rem;font-weight:700;padding:3px 8px;border-radius:12px;min-width:20px;text-align:center}.nav-badge.hidden[_ngcontent-%COMP%]{display:none}.nav-menu-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;z-index:1099;opacity:0;visibility:hidden;transition:all .3s ease}.nav-menu-overlay.open[_ngcontent-%COMP%]{opacity:1;visibility:visible}.nav-slide-menu.admin-menu[_ngcontent-%COMP%]{background:linear-gradient(180deg,#0d1a3d,#1a2a5e,#0d1a3d);border-right:3px solid rgba(212,168,75,.4)}.nav-slide-menu.admin-menu[_ngcontent-%COMP%]   .nav-slide-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b26,#0000004d);border-bottom:2px solid rgba(212,168,75,.5)}.nav-slide-menu.admin-menu[_ngcontent-%COMP%]   .nav-slide-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d4a84b;font-weight:800;letter-spacing:2px}.nav-slide-item.admin-item[_ngcontent-%COMP%]{border-left:3px solid transparent;transition:all .3s ease}.nav-slide-item.admin-item[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,rgba(212,168,75,.2) 0%,transparent 100%);border-left-color:#d4a84b;padding-left:28px}.nav-slide-item.admin-item.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(212,168,75,.3) 0%,transparent 100%);border-left:4px solid #d4a84b;color:#d4a84b}.nav-slide-item.sos-item[_ngcontent-%COMP%]{background:#c41e3a1a;border-left:3px solid rgba(196,30,58,.5)}.nav-slide-item.sos-item[_ngcontent-%COMP%]:hover{background:#c41e3a40;border-left-color:#c41e3a}.nav-slide-item.sos-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b6b}.nav-badge.sos-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#8b0000);animation:_ngcontent-%COMP%_sosPulse 2s infinite}@keyframes _ngcontent-%COMP%_sosPulse{0%,to{transform:scale(1);box-shadow:0 0 #c41e3a80}50%{transform:scale(1.1);box-shadow:0 0 10px 3px #c41e3a66}}.hamburger-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:center;align-items:center;gap:5px;width:44px;height:44px;background:#ffffff1a;border:2px solid rgba(255,255,255,.2);border-radius:8px;cursor:pointer;padding:10px;transition:all .3s ease;z-index:1002}.hamburger-btn[_ngcontent-%COMP%]:hover{background:#fff3}.hamburger-line[_ngcontent-%COMP%]{width:22px;height:3px;background:#fff;border-radius:2px;transition:all .3s ease}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(5px,6px)}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(2){opacity:0;transform:translate(-10px)}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(5px,-6px)}.menu-overlay[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;background:#00000080;z-index:999;opacity:0;transition:opacity .3s ease}.menu-overlay.open[_ngcontent-%COMP%]{opacity:1}.app-header[_ngcontent-%COMP%]   .header-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:12px 24px;border-radius:8px;transition:all .25s ease;font-size:14px;font-weight:600;border:none;background:transparent;cursor:pointer;display:flex;align-items:center;gap:6px;white-space:nowrap;position:relative;overflow:hidden}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:#ffffff1a;transition:left .4s cubic-bezier(.4,0,.2,1);z-index:-1}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{left:100%}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffffff26;transform:translateY(-2px)}.header-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:inset 0 -2px #ffffff80;animation:_ngcontent-%COMP%_activeLink .5s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_activeLink{0%{transform:scale(.95)}50%{transform:scale(1.05)}to{transform:scale(1)}}.header-nav[_ngcontent-%COMP%]   .report-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);font-weight:700;box-shadow:0 8px 20px #51cf6659;border:1px solid rgba(255,255,255,.2)}.header-nav[_ngcontent-%COMP%]   .report-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40c057,#2da043);transform:translateY(-3px);box-shadow:0 12px 28px #51cf6673}.header-nav[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);font-weight:700;box-shadow:0 8px 20px #1a2a5e59;border:1px solid rgba(255,255,255,.2)}.header-nav[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-3px);box-shadow:0 12px 28px #1a2a5e73}.header-nav[_ngcontent-%COMP%]   .profile-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,#d4a84b,#c9a227);color:#1a2a5e;font-weight:700;box-shadow:0 8px 20px #d4a84b59;border:1px solid rgba(255,255,255,.3)}.header-nav[_ngcontent-%COMP%]   .profile-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e5c896,#d4a84b);transform:translateY(-3px);box-shadow:0 12px 28px #d4a84b80;color:#0d1a3d}.header-nav[_ngcontent-%COMP%]   .profile-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{background:#ffffff26;font-size:14px;border:1px solid rgba(255,255,255,.2)}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff40}.header-nav[_ngcontent-%COMP%]   .notification-link[_ngcontent-%COMP%]{position:relative;padding:12px 18px}.header-nav[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background-color:#d32f2f;color:#fff;border-radius:50%;min-width:20px;height:20px;font-size:.75rem;font-weight:700;padding:0 4px;animation:_ngcontent-%COMP%_pulse 2s infinite}.header-nav[_ngcontent-%COMP%]   .unread-badge.hidden[_ngcontent-%COMP%]{display:none}.header-nav[_ngcontent-%COMP%]   .sos-emergency-link[_ngcontent-%COMP%]{background:#d32f2f33;border:2px solid rgba(211,47,47,.5);font-weight:700}.header-nav[_ngcontent-%COMP%]   .sos-emergency-link[_ngcontent-%COMP%]:hover{background:#d32f2f59;transform:translateY(-1px)}.header-nav[_ngcontent-%COMP%]   .sos-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background-color:#d32f2f;color:#fff;border-radius:50%;min-width:22px;height:22px;font-size:.8rem;font-weight:700;padding:0 5px;animation:_ngcontent-%COMP%_urgentPulse 1s infinite;box-shadow:0 0 12px #d32f2fcc}.header-nav[_ngcontent-%COMP%]   .sos-badge.hidden[_ngcontent-%COMP%]{display:none}@keyframes _ngcontent-%COMP%_urgentPulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.8}}.header-nav[_ngcontent-%COMP%]   .admin-link[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   .admin-report-link[_ngcontent-%COMP%]{background:#ffd70026;border:2px solid rgba(255,215,0,.35)}.header-nav[_ngcontent-%COMP%]   .admin-link[_ngcontent-%COMP%]:hover, .header-nav[_ngcontent-%COMP%]   .admin-report-link[_ngcontent-%COMP%]:hover{background:#ffd7004d;transform:translateY(-1px)}.app-main[_ngcontent-%COMP%]{padding:0;min-height:calc(100vh - 70px)}.global-sos[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:120px;width:220px;z-index:1200}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}@media (max-width: 1200px){.app-header[_ngcontent-%COMP%]{padding:12px 40px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 18px;font-size:13px}}@media (max-width: 992px){.app-header[_ngcontent-%COMP%]{padding:10px 25px}.hamburger-btn[_ngcontent-%COMP%]{display:flex}.menu-overlay[_ngcontent-%COMP%], .menu-overlay.open[_ngcontent-%COMP%]{display:block}.header-nav[_ngcontent-%COMP%]{position:fixed;top:0;right:-320px;width:300px;height:100vh;background:linear-gradient(180deg,#1a2a5e,#0d1a3d);flex-direction:column;align-items:stretch;padding:90px 20px 30px;gap:8px;transition:right .3s ease;z-index:1001;box-shadow:-5px 0 30px #0000004d;overflow-y:auto}.header-nav.open[_ngcontent-%COMP%]{right:0}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:15px 20px;font-size:15px;border-radius:10px;justify-content:flex-start;width:100%}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{margin-top:auto;background:#dc354533;border:1px solid rgba(220,53,69,.4)}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#dc35454d}}@media (max-width: 600px){.app-header[_ngcontent-%COMP%]{padding:10px 15px;height:auto;min-height:65px}.header-left[_ngcontent-%COMP%]   .brand-section[_ngcontent-%COMP%]{gap:3px}.user-role-indicator[_ngcontent-%COMP%]{padding:3px 8px 3px 5px;font-size:.6rem;gap:4px}.user-role-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{width:16px;height:16px}.user-role-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:9px;height:9px}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:42px;height:42px}.logo-area[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:11px}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}.hamburger-btn[_ngcontent-%COMP%]{width:40px;height:40px}.hamburger-line[_ngcontent-%COMP%]{width:20px}.header-nav[_ngcontent-%COMP%]{width:280px;right:-290px;padding:80px 15px 25px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 16px;font-size:14px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#0009;display:flex;align-items:center;justify-content:center;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.auth-prompt-modal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);border:3px solid #ffc107;border-radius:16px;padding:40px;max-width:500px;width:90%;box-shadow:0 10px 40px #0000004d;position:relative;text-align:center;animation:_ngcontent-%COMP%_slideIn .3s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-30px);opacity:0}to{transform:translateY(0);opacity:1}}.auth-prompt-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:transparent;border:none;font-size:32px;color:#856404;cursor:pointer;line-height:1;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;transition:all .2s}.auth-prompt-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#d32f2f;transform:scale(1.1)}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:20px}.auth-prompt-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#856404;margin:0 0 15px;font-weight:700}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-message[_ngcontent-%COMP%]{font-size:1.1rem;color:#856404;margin:0 0 10px;font-weight:600;line-height:1.5}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-submessage[_ngcontent-%COMP%]{font-size:.95rem;color:#856404;margin:0 0 30px;opacity:.9;line-height:1.6}.modal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.modal-btn[_ngcontent-%COMP%]{padding:14px 30px;font-size:1rem;font-weight:700;border-radius:8px;border:none;cursor:pointer;transition:all .2s;width:100%}.modal-btn.primary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c5282,#1e3a5f);color:#fff;box-shadow:0 4px 12px #2c52824d}.modal-btn.primary-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #2c528266}.modal-btn.secondary-btn[_ngcontent-%COMP%]{background:#fff;color:#856404;border:2px solid #ffc107}.modal-btn.secondary-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;transform:translateY(-1px)}@media (max-width: 600px){.auth-prompt-modal[_ngcontent-%COMP%]{padding:30px 20px;max-width:95%}.auth-prompt-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-message[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]{padding:8px 12px;height:auto;min-height:56px;flex-wrap:wrap;gap:8px}.header-brand-group[_ngcontent-%COMP%]{gap:6px;width:100%;justify-content:flex-start}.header-brand-group[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:40px;height:40px;border-width:2px;margin-right:6px}.header-brand-group[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:9px}.header-brand-group[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.2rem);letter-spacing:.5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 100px)}.app-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{width:100%;justify-content:flex-end;gap:8px;order:3}.user-role-indicator[_ngcontent-%COMP%]{padding:4px 10px;font-size:.65rem;min-height:32px;display:flex;align-items:center}.profile-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-width:1.5px}}@media (max-width: 480px){.app-header[_ngcontent-%COMP%]{padding:6px 10px;min-height:52px}.header-brand-group[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:36px;height:36px;border-width:2px;margin-right:6px}.header-brand-group[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:8px}.header-brand-group[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:.9rem;letter-spacing:0;max-width:calc(100% - 80px)}.header-brand-group[_ngcontent-%COMP%]   .nav-hamburger-btn[_ngcontent-%COMP%]{margin-right:6px}.user-role-indicator[_ngcontent-%COMP%]{padding:3px 8px;font-size:.6rem;min-height:28px;letter-spacing:0}.profile-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-width:1px}}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;max-width:100%}.content-wrapper[_ngcontent-%COMP%]{padding:12px 0}}@media (max-width: 480px){.container[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px;max-width:100%}.content-wrapper[_ngcontent-%COMP%]{padding:8px 0}}@media (max-width: 768px){.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:6px;font-size:.95rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;font-size:1rem;min-height:44px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px}}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;font-size:16px;min-height:44px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:70px}}@media (max-width: 768px){.btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%], a.btn[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .login-btn[_ngcontent-%COMP%], .report-link[_ngcontent-%COMP%], .admin-link[_ngcontent-%COMP%], .notification-link[_ngcontent-%COMP%]{width:100%;padding:12px 16px;font-size:.95rem;min-height:44px}.btn-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){.btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%], a.btn[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .login-btn[_ngcontent-%COMP%], .report-link[_ngcontent-%COMP%], .admin-link[_ngcontent-%COMP%], .notification-link[_ngcontent-%COMP%]{width:100%;padding:10px 12px;font-size:.9rem;min-height:44px}}@media (max-width: 768px){.modal-dialog[_ngcontent-%COMP%]{max-width:calc(100% - 24px);margin:20px auto}.modal-content[_ngcontent-%COMP%]{padding:20px}.modal-header[_ngcontent-%COMP%]{padding:16px;font-size:1.25rem}.modal-body[_ngcontent-%COMP%]{padding:16px}.modal-footer[_ngcontent-%COMP%]{padding:16px;gap:8px;flex-direction:column}}@media (max-width: 480px){.modal-dialog[_ngcontent-%COMP%]{max-width:calc(100% - 16px);margin:10px auto}.modal-content[_ngcontent-%COMP%]{padding:16px;border-radius:8px}.modal-header[_ngcontent-%COMP%]{padding:12px;font-size:1.1rem}.modal-body[_ngcontent-%COMP%]{padding:12px}.modal-footer[_ngcontent-%COMP%]{padding:12px;gap:6px}}@media (max-width: 768px){nav[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]{flex-direction:column}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]{padding:12px 16px;width:100%;border-bottom:1px solid rgba(255,255,255,.1)}}@media (max-width: 480px){nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem}}@media (max-width: 768px){h1[_ngcontent-%COMP%]{font-size:clamp(1.25rem,4vw,1.75rem);margin-bottom:12px}h2[_ngcontent-%COMP%]{font-size:clamp(1.1rem,3.5vw,1.5rem);margin-bottom:12px}h3[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.25rem);margin-bottom:10px}p[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.5;margin-bottom:10px}}@media (max-width: 480px){h1[_ngcontent-%COMP%]{font-size:clamp(1.1rem,4vw,1.5rem)}h2[_ngcontent-%COMP%]{font-size:clamp(1rem,3.5vw,1.3rem)}h3[_ngcontent-%COMP%]{font-size:clamp(.9rem,3vw,1.1rem)}p[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 768px){.card[_ngcontent-%COMP%], [class*=card][_ngcontent-%COMP%], .alert-card[_ngcontent-%COMP%], .report-card[_ngcontent-%COMP%]{padding:12px;margin:8px;border-radius:8px}}@media (max-width: 480px){.card[_ngcontent-%COMP%], [class*=card][_ngcontent-%COMP%], .alert-card[_ngcontent-%COMP%], .report-card[_ngcontent-%COMP%]{padding:10px;margin:6px;border-radius:6px}}@media (max-width: 768px){.flex[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%], .grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:1fr!important;gap:10px}.flex-row[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 480px){.flex[_ngcontent-%COMP%], .grid[_ngcontent-%COMP%]{gap:8px}}@media (max-width: 768px){.p-lg[_ngcontent-%COMP%], [class*=p-lg][_ngcontent-%COMP%]{padding:16px!important}.m-lg[_ngcontent-%COMP%], [class*=m-lg][_ngcontent-%COMP%]{margin:16px!important}.gap-lg[_ngcontent-%COMP%]{gap:12px!important}}@media (max-width: 480px){.p-lg[_ngcontent-%COMP%], [class*=p-lg][_ngcontent-%COMP%]{padding:12px!important}.m-lg[_ngcontent-%COMP%], [class*=m-lg][_ngcontent-%COMP%]{margin:12px!important}.gap-lg[_ngcontent-%COMP%]{gap:8px!important}.px-lg[_ngcontent-%COMP%]{padding-left:10px!important;padding-right:10px!important}}@media (max-width: 768px){.overflow-x-auto[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;overflow-x:auto}table[_ngcontent-%COMP%]{font-size:.9rem}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:8px}}@media (max-width: 480px){table[_ngcontent-%COMP%]{font-size:.85rem}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:6px}}@media (max-width: 768px){.hide-mobile[_ngcontent-%COMP%]{display:none!important}.show-mobile[_ngcontent-%COMP%]{display:block!important}}@media (min-width: 769px){.show-mobile[_ngcontent-%COMP%]{display:none!important}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%], [class*=sidebar][_ngcontent-%COMP%], .drawer[_ngcontent-%COMP%], [class*=drawer][_ngcontent-%COMP%]{position:fixed;left:0;top:56px;width:100%;max-width:280px;height:calc(100vh - 56px);transform:translate(-100%);transition:transform .3s ease;z-index:999}.sidebar.active[_ngcontent-%COMP%], [class*=sidebar].active[_ngcontent-%COMP%], .drawer.active[_ngcontent-%COMP%], [class*=drawer].active[_ngcontent-%COMP%]{transform:translate(0)}}@media (max-width: 480px){.sidebar[_ngcontent-%COMP%], [class*=sidebar][_ngcontent-%COMP%], .drawer[_ngcontent-%COMP%], [class*=drawer][_ngcontent-%COMP%]{max-width:100%;width:100%}}@media (max-height: 600px) and (orientation: landscape){.app-header[_ngcontent-%COMP%]{min-height:48px}.btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:8px 12px;font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-height:36px;padding:6px 10px}}@media (max-width: 375px){.app-header[_ngcontent-%COMP%]{padding:6px 8px}.header-brand-group[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:.85rem;max-width:calc(100% - 70px)}.btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:.85rem;padding:8px 10px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:4px}}@media (hover: none) and (pointer: coarse){.btn[_ngcontent-%COMP%]:hover, button[_ngcontent-%COMP%]:hover, .card[_ngcontent-%COMP%]:hover{transform:none}.btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%], a.btn[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]{min-height:48px;min-width:48px}.btn[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:active{opacity:.85}}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]{padding:8px 12px;height:56px}}@media (max-width: 480px){.app-header[_ngcontent-%COMP%]{padding:6px 10px;height:50px}}']})};II(Fx,cz).catch(n=>console.error(n));
