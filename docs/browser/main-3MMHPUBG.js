var rF=Object.create;var Zy=Object.defineProperty,oF=Object.defineProperties,sF=Object.getOwnPropertyDescriptor,aF=Object.getOwnPropertyDescriptors,cF=Object.getOwnPropertyNames,$M=Object.getOwnPropertySymbols,qM=Object.getPrototypeOf,WM=Object.prototype.hasOwnProperty,lF=Object.prototype.propertyIsEnumerable,uF=Reflect.get;var GM=(n,e,t)=>e in n?Zy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,J=(n,e)=>{for(var t in e||={})WM.call(e,t)&&GM(n,t,e[t]);if($M)for(var t of $M(e))lF.call(e,t)&&GM(n,t,e[t]);return n},ve=(n,e)=>oF(n,aF(e));var dF=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var hF=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of cF(e))!WM.call(n,r)&&r!==t&&Zy(n,r,{get:()=>e[r],enumerable:!(i=sF(e,r))||i.enumerable});return n};var KM=(n,e,t)=>(t=n!=null?rF(qM(n)):{},hF(e||!n||!n.__esModule?Zy(t,"default",{value:n,enumerable:!0}):t,n));var ra=(n,e,t)=>uF(qM(n),t,e);var P=(n,e,t)=>new Promise((i,r)=>{var o=u=>{try{l(t.next(u))}catch(f){r(f)}},a=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(o,a);l((t=t.apply(n,e)).next())});var lM=dF((yy,Y4)=>{"use strict";(function(n,e){typeof yy=="object"&&typeof Y4<"u"?e(yy):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(yy,function(n){"use strict";var e="1.9.4";function t(s){var c,h,p,y;for(h=1,p=arguments.length;h<p;h++){y=arguments[h];for(c in y)s[c]=y[c]}return s}var i=Object.create||(function(){function s(){}return function(c){return s.prototype=c,new s}})();function r(s,c){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function l(s,c,h){var p,y,I,A;return A=function(){p=!1,y&&(I.apply(h,y),y=!1)},I=function(){p?y=arguments:(s.apply(h,arguments),setTimeout(A,c),p=!0)},I}function u(s,c,h){var p=c[1],y=c[0],I=p-y;return s===p&&h?s:((s-y)%I+I)%I+y}function f(){return!1}function g(s,c){if(c===!1)return s;var h=Math.pow(10,c===void 0?6:c);return Math.round(s*h)/h}function b(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return b(s).split(/\s+/)}function S(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in c)s.options[h]=c[h];return s.options}function R(s,c,h){var p=[];for(var y in s)p.push(encodeURIComponent(h?y.toUpperCase():y)+"="+encodeURIComponent(s[y]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var K=/\{ *([\w_ -]+) *\}/g;function q(s,c){return s.replace(K,function(h,p){var y=c[p];if(y===void 0)throw new Error("No value provided for variable "+h);return typeof y=="function"&&(y=y(c)),y})}var ne=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function fe(s,c){for(var h=0;h<s.length;h++)if(s[h]===c)return h;return-1}var we="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Re(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var zt=0;function ct(s){var c=+new Date,h=Math.max(0,16-(c-zt));return zt=c+h,window.setTimeout(s,h)}var V=window.requestAnimationFrame||Re("RequestAnimationFrame")||ct,O=window.cancelAnimationFrame||Re("CancelAnimationFrame")||Re("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,c,h){if(h&&V===ct)s.call(c);else return V.call(window,r(s,c))}function N(s){s&&O.call(window,s)}var B={__proto__:null,extend:t,create:i,bind:r,get lastId(){return o},stamp:a,throttle:l,wrapNum:u,falseFn:f,formatNum:g,trim:b,splitWords:E,setOptions:S,getParamString:R,template:q,isArray:ne,indexOf:fe,emptyImageUrl:we,requestFn:V,cancelFn:O,requestAnimFrame:D,cancelAnimFrame:N};function H(){}H.extend=function(s){var c=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=i(h);p.constructor=c,c.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(c[y]=this[y]);return s.statics&&t(c,s.statics),s.includes&&(k(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?i(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,A=p._initHooks.length;I<A;I++)p._initHooks[I].call(this)}},c},H.include=function(s){var c=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},H.mergeOptions=function(s){return t(this.prototype.options,s),this},H.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function k(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=ne(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var nn={on:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c);else{s=E(s);for(var y=0,I=s.length;y<I;y++)this._on(s[y],c,h)}return this},off:function(s,c,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],c);else{s=E(s);for(var y=arguments.length===1,I=0,A=s.length;I<A;I++)y?this._off(s[I]):this._off(s[I],c,h)}return this},_on:function(s,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,h)===!1){h===this&&(h=void 0);var y={fn:c,ctx:h};p&&(y.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(y)}},_off:function(s,c,h){var p,y,I;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,I=p.length;y<I;y++)p[y].fn=f;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var A=this._listens(s,c,h);if(A!==!1){var G=p[A];this._firingCount&&(G.fn=f,this._events[s]=p=p.slice()),p.splice(A,1)}}},fire:function(s,c,h){if(!this.listens(s,h))return this;var p=t({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var y=this._events[s];if(y){this._firingCount=this._firingCount+1||1;for(var I=0,A=y.length;I<A;I++){var G=y[I],Z=G.fn;G.once&&this.off(s,Z,G.ctx),Z.call(G.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,c,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var y=c;typeof c!="function"&&(p=!!c,y=void 0,h=void 0);var I=this._events&&this._events[s];if(I&&I.length&&this._listens(s,y,h)!==!1)return!0;if(p){for(var A in this._eventParents)if(this._eventParents[A].listens(s,c,h,p))return!0}return!1},_listens:function(s,c,h){if(!this._events)return!1;var p=this._events[s]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var y=0,I=p.length;y<I;y++)if(p[y].fn===c&&p[y].ctx===h)return y;return!1},once:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c,!0);else{s=E(s);for(var y=0,I=s.length;y<I;y++)this._on(s[y],c,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};nn.addEventListener=nn.on,nn.removeEventListener=nn.clearAllEventListeners=nn.off,nn.addOneTimeEventListener=nn.once,nn.fireEvent=nn.fire,nn.hasEventListeners=nn.listens;var Mr=H.extend(nn);function Ge(s,c,h){this.x=h?Math.round(s):s,this.y=h?Math.round(c):c}var $s=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Ge.prototype={clone:function(){return new Ge(this.x,this.y)},add:function(s){return this.clone()._add(Ne(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Ne(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Ge(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Ge(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=$s(this.x),this.y=$s(this.y),this},distanceTo:function(s){s=Ne(s);var c=s.x-this.x,h=s.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(s){return s=Ne(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Ne(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function Ne(s,c,h){return s instanceof Ge?s:ne(s)?new Ge(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Ge(s.x,s.y):new Ge(s,c,h)}function Ft(s,c){if(s)for(var h=c?[s,c]:s,p=0,y=h.length;p<y;p++)this.extend(h[p])}Ft.prototype={extend:function(s){var c,h;if(!s)return this;if(s instanceof Ge||typeof s[0]=="number"||"x"in s)c=h=Ne(s);else if(s=Xn(s),c=s.min,h=s.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return Ne((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Ne(this.min.x,this.max.y)},getTopRight:function(){return Ne(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,h;return typeof s[0]=="number"||s instanceof Ge?s=Ne(s):s=Xn(s),s instanceof Ft?(c=s.min,h=s.max):c=h=s,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=Xn(s);var c=this.min,h=this.max,p=s.min,y=s.max,I=y.x>=c.x&&p.x<=h.x,A=y.y>=c.y&&p.y<=h.y;return I&&A},overlaps:function(s){s=Xn(s);var c=this.min,h=this.max,p=s.min,y=s.max,I=y.x>c.x&&p.x<h.x,A=y.y>c.y&&p.y<h.y;return I&&A},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*s,y=Math.abs(c.y-h.y)*s;return Xn(Ne(c.x-p,c.y-y),Ne(h.x+p,h.y+y))},equals:function(s){return s?(s=Xn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Xn(s,c){return!s||s instanceof Ft?s:new Ft(s,c)}function ci(s,c){if(s)for(var h=c?[s,c]:s,p=0,y=h.length;p<y;p++)this.extend(h[p])}ci.prototype={extend:function(s){var c=this._southWest,h=this._northEast,p,y;if(s instanceof je)p=s,y=s;else if(s instanceof ci){if(p=s._southWest,y=s._northEast,!p||!y)return this}else return s?this.extend(lt(s)||At(s)):this;return!c&&!h?(this._southWest=new je(p.lat,p.lng),this._northEast=new je(y.lat,y.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(y.lat,h.lat),h.lng=Math.max(y.lng,h.lng)),this},pad:function(s){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*s,y=Math.abs(c.lng-h.lng)*s;return new ci(new je(c.lat-p,c.lng-y),new je(h.lat+p,h.lng+y))},getCenter:function(){return new je((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new je(this.getNorth(),this.getWest())},getSouthEast:function(){return new je(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof je||"lat"in s?s=lt(s):s=At(s);var c=this._southWest,h=this._northEast,p,y;return s instanceof ci?(p=s.getSouthWest(),y=s.getNorthEast()):p=y=s,p.lat>=c.lat&&y.lat<=h.lat&&p.lng>=c.lng&&y.lng<=h.lng},intersects:function(s){s=At(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),I=y.lat>=c.lat&&p.lat<=h.lat,A=y.lng>=c.lng&&p.lng<=h.lng;return I&&A},overlaps:function(s){s=At(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),I=y.lat>c.lat&&p.lat<h.lat,A=y.lng>c.lng&&p.lng<h.lng;return I&&A},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=At(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function At(s,c){return s instanceof ci?s:new ci(s,c)}function je(s,c,h){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,h!==void 0&&(this.alt=+h)}je.prototype={equals:function(s,c){if(!s)return!1;s=lt(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+g(this.lat,s)+", "+g(this.lng,s)+")"},distanceTo:function(s){return ro.distance(this,lt(s))},wrap:function(){return ro.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return At([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new je(this.lat,this.lng,this.alt)}};function lt(s,c,h){return s instanceof je?s:ne(s)&&typeof s[0]!="object"?s.length===3?new je(s[0],s[1],s[2]):s.length===2?new je(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new je(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new je(s,c,h)}var bi={latLngToPoint:function(s,c){var h=this.projection.project(s),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(s,c){var h=this.scale(c),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(c.min,h),y=this.transformation.transform(c.max,h);return new Ft(p,y)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new je(h,c,p)},wrapLatLngBounds:function(s){var c=s.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,y=c.lng-h.lng;if(p===0&&y===0)return s;var I=s.getSouthWest(),A=s.getNorthEast(),G=new je(I.lat-p,I.lng-y),Z=new je(A.lat-p,A.lng-y);return new ci(G,Z)}},ro=t({},bi,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var h=Math.PI/180,p=s.lat*h,y=c.lat*h,I=Math.sin((c.lat-s.lat)*h/2),A=Math.sin((c.lng-s.lng)*h/2),G=I*I+Math.cos(p)*Math.cos(y)*A*A,Z=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*Z}}),Gs=6378137,zd={R:Gs,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),y=Math.sin(p*c);return new Ge(this.R*s.lng*c,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(s){var c=180/Math.PI;return new je((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:(function(){var s=Gs*Math.PI;return new Ft([-s,-s],[s,s])})()};function Hd(s,c,h,p){if(ne(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=h,this._d=p}Hd.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new Ge((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function oo(s,c,h,p){return new Hd(s,c,h,p)}var qs=t({},ro,{code:"EPSG:3857",projection:zd,transformation:(function(){var s=.5/(Math.PI*zd.R);return oo(s,.5,-s,.5)})()}),$d=t({},qs,{code:"EPSG:900913"});function Pl(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Tl(s,c){var h="",p,y,I,A,G,Z;for(p=0,I=s.length;p<I;p++){for(G=s[p],y=0,A=G.length;y<A;y++)Z=G[y],h+=(y?"L":"M")+Z.x+" "+Z.y;h+=c?Ce.svg?"z":"x":""}return h||"M0 0"}var ic=document.documentElement.style,rc="ActiveXObject"in window,Gp=rc&&!document.addEventListener,qp="msLaunchUri"in navigator&&!("documentMode"in document),Ol=qi("webkit"),Gd=qi("android"),Dl=qi("android 2")||qi("android 3"),Wp=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Uy=Gd&&qi("Google")&&Wp<537&&!("AudioNode"in window),oc=!!window.opera,Al=!qp&&qi("chrome"),kl=qi("gecko")&&!Ol&&!oc&&!rc,zn=!Al&&qi("safari"),Hn=qi("phantom"),sc="OTransition"in ic,Kp=navigator.platform.indexOf("Win")===0,qd=rc&&"transition"in ic,Wd="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Dl,Ws="MozPerspective"in ic,Zp=!window.L_DISABLE_3D&&(qd||Wd||Ws)&&!sc&&!Hn,Ks=typeof orientation<"u"||qi("mobile"),Kd=Ks&&Ol,jy=Ks&&Wd,Yp=!window.PointerEvent&&window.MSPointerEvent,Rl=!!(window.PointerEvent||Yp),Zd="ontouchstart"in window||!!window.TouchEvent,Qp=!window.L_NO_TOUCH&&(Zd||Rl),ac=Ks&&oc,Yd=Ks&&kl,Qd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Qo=(function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return s})(),Jp=(function(){return!!document.createElement("canvas").getContext})(),Zs=!!(document.createElementNS&&Pl("svg").createSVGRect),Xp=!!Zs&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),cc=!Zs&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),eg=navigator.platform.indexOf("Mac")===0,ei=navigator.platform.indexOf("Linux")===0;function qi(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Ce={ie:rc,ielt9:Gp,edge:qp,webkit:Ol,android:Gd,android23:Dl,androidStock:Uy,opera:oc,chrome:Al,gecko:kl,safari:zn,phantom:Hn,opera12:sc,win:Kp,ie3d:qd,webkit3d:Wd,gecko3d:Ws,any3d:Zp,mobile:Ks,mobileWebkit:Kd,mobileWebkit3d:jy,msPointer:Yp,pointer:Rl,touch:Qp,touchNative:Zd,mobileOpera:ac,mobileGecko:Yd,retina:Qd,passiveEvents:Qo,canvas:Jp,svg:Zs,vml:cc,inlineSvg:Xp,mac:eg,linux:ei},Ys=Ce.msPointer?"MSPointerDown":"pointerdown",tg=Ce.msPointer?"MSPointerMove":"pointermove",ng=Ce.msPointer?"MSPointerUp":"pointerup",Jo=Ce.msPointer?"MSPointerCancel":"pointercancel",Jd={touchstart:Ys,touchmove:tg,touchend:ng,touchcancel:Jo},ig={touchstart:og,touchmove:Qs,touchend:Qs,touchcancel:Qs},Pr={},Xd=!1;function eh(s,c,h){return c==="touchstart"&&nh(),ig[c]?(h=ig[c].bind(this,h),s.addEventListener(Jd[c],h,!1),h):(console.warn("wrong event specified:",c),f)}function Nl(s,c,h){if(!Jd[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Jd[c],h,!1)}function so(s){Pr[s.pointerId]=s}function rg(s){Pr[s.pointerId]&&(Pr[s.pointerId]=s)}function th(s){delete Pr[s.pointerId]}function nh(){Xd||(document.addEventListener(Ys,so,!0),document.addEventListener(tg,rg,!0),document.addEventListener(ng,th,!0),document.addEventListener(Jo,th,!0),Xd=!0)}function Qs(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in Pr)c.touches.push(Pr[h]);c.changedTouches=[c],s(c)}}function og(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&on(c),Qs(s,c)}function sg(s){var c={},h,p;for(p in s)h=s[p],c[p]=h&&h.bind?h.bind(s):h;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var zy=200;function Ll(s,c){s.addEventListener("dblclick",c);var h=0,p;function y(I){if(I.detail!==1){p=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var A=dh(I);if(!(A.some(function(Z){return Z instanceof HTMLLabelElement&&Z.attributes.for})&&!A.some(function(Z){return Z instanceof HTMLInputElement||Z instanceof HTMLSelectElement}))){var G=Date.now();G-h<=zy?(p++,p===2&&c(sg(I))):p=1,h=G}}}return s.addEventListener("click",y),{dblclick:c,simDblclick:y}}function ag(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var lc=lr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Tr=lr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ao=Tr==="webkitTransition"||Tr==="OTransition"?Tr+"End":"transitionend";function Fl(s){return typeof s=="string"?document.getElementById(s):s}function uc(s,c){var h=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[c]:null}return h==="auto"?null:h}function pt(s,c,h){var p=document.createElement(s);return p.className=c||"",h&&h.appendChild(p),p}function Ht(s){var c=s.parentNode;c&&c.removeChild(s)}function dc(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function co(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function lo(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function Vl(s,c){if(s.classList!==void 0)return s.classList.contains(c);var h=hc(s);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function Ke(s,c){if(s.classList!==void 0)for(var h=E(c),p=0,y=h.length;p<y;p++)s.classList.add(h[p]);else if(!Vl(s,c)){var I=hc(s);ih(s,(I?I+" ":"")+c)}}function rn(s,c){s.classList!==void 0?s.classList.remove(c):ih(s,b((" "+hc(s)+" ").replace(" "+c+" "," ")))}function ih(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function hc(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function xi(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&Hy(s,c)}function Hy(s,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):s.style.filter+=" progid:"+p+"(opacity="+c+")"}function lr(s){for(var c=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in c)return s[h];return!1}function ti(s,c,h){var p=c||new Ge(0,0);s.style[lc]=(Ce.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function Wt(s,c){s._leaflet_pos=c,Ce.any3d?ti(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function ur(s){return s._leaflet_pos||new Ge(0,0)}var Js,It,Xs;if("onselectstart"in document)Js=function(){ze(window,"selectstart",on)},It=function(){kt(window,"selectstart",on)};else{var Or=lr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Js=function(){if(Or){var s=document.documentElement.style;Xs=s[Or],s[Or]="none"}},It=function(){Or&&(document.documentElement.style[Or]=Xs,Xs=void 0)}}function Xo(){ze(window,"dragstart",on)}function rh(){kt(window,"dragstart",on)}var fc,oh;function sh(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Bl(),fc=s,oh=s.style.outlineStyle,s.style.outlineStyle="none",ze(window,"keydown",Bl))}function Bl(){fc&&(fc.style.outlineStyle=oh,fc=void 0,oh=void 0,kt(window,"keydown",Bl))}function cg(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function es(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var uo={__proto__:null,TRANSFORM:lc,TRANSITION:Tr,TRANSITION_END:ao,get:Fl,getStyle:uc,create:pt,remove:Ht,empty:dc,toFront:co,toBack:lo,hasClass:Vl,addClass:Ke,removeClass:rn,setClass:ih,getClass:hc,setOpacity:xi,testProp:lr,setTransform:ti,setPosition:Wt,getPosition:ur,get disableTextSelection(){return Js},get enableTextSelection(){return It},disableImageDrag:Xo,enableImageDrag:rh,preventOutline:sh,restoreOutline:Bl,getSizedParentNode:cg,getScale:es};function ze(s,c,h,p){if(c&&typeof c=="object")for(var y in c)ch(s,y,c[y],h);else{c=E(c);for(var I=0,A=c.length;I<A;I++)ch(s,c[I],h,p)}return this}var Wi="_leaflet_events";function kt(s,c,h,p){if(arguments.length===1)ts(s),delete s[Wi];else if(c&&typeof c=="object")for(var y in c)lh(s,y,c[y],h);else if(c=E(c),arguments.length===2)ts(s,function(G){return fe(c,G)!==-1});else for(var I=0,A=c.length;I<A;I++)lh(s,c[I],h,p);return this}function ts(s,c){for(var h in s[Wi]){var p=h.split(/\d/)[0];(!c||c(p))&&lh(s,p,null,null,h)}}var ah={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ch(s,c,h,p){var y=c+a(h)+(p?"_"+a(p):"");if(s[Wi]&&s[Wi][y])return this;var I=function(G){return h.call(p||s,G||window.event)},A=I;!Ce.touchNative&&Ce.pointer&&c.indexOf("touch")===0?I=eh(s,c,I):Ce.touch&&c==="dblclick"?I=Ll(s,I):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(ah[c]||c,I,Ce.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(I=function(G){G=G||window.event,mc(s,G)&&A(G)},s.addEventListener(ah[c],I,!1)):s.addEventListener(c,A,!1):s.attachEvent("on"+c,I),s[Wi]=s[Wi]||{},s[Wi][y]=I}function lh(s,c,h,p,y){y=y||c+a(h)+(p?"_"+a(p):"");var I=s[Wi]&&s[Wi][y];if(!I)return this;!Ce.touchNative&&Ce.pointer&&c.indexOf("touch")===0?Nl(s,c,I):Ce.touch&&c==="dblclick"?ag(s,I):"removeEventListener"in s?s.removeEventListener(ah[c]||c,I,!1):s.detachEvent("on"+c,I),s[Wi][y]=null}function li(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function uh(s){return ch(s,"wheel",li),this}function pc(s){return ze(s,"mousedown touchstart dblclick contextmenu",li),s._leaflet_disable_click=!0,this}function on(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function dr(s){return on(s),li(s),this}function dh(s){if(s.composedPath)return s.composedPath();for(var c=[],h=s.target;h;)c.push(h),h=h.parentNode;return c}function ea(s,c){if(!c)return new Ge(s.clientX,s.clientY);var h=es(c),p=h.boundingClientRect;return new Ge((s.clientX-p.left)/h.x-c.clientLeft,(s.clientY-p.top)/h.y-c.clientTop)}var gc=Ce.linux&&Ce.chrome?window.devicePixelRatio:Ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function hh(s){return Ce.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/gc:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function mc(s,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var Zt={__proto__:null,on:ze,off:kt,stopPropagation:li,disableScrollPropagation:uh,disableClickPropagation:pc,preventDefault:on,stop:dr,getPropagationPath:dh,getMousePosition:ea,getWheelDelta:hh,isExternalTarget:mc,addListener:ze,removeListener:kt},lg=Mr.extend({run:function(s,c,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=ur(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var h=this._startPos.add(this._offset.multiplyBy(s));c&&h._round(),Wt(this._el,h),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),ut=Mr.extend({options:{crs:qs,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=S(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(lt(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Tr&&Ce.any3d&&!Ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,ao,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(lt(s),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,h){var p=this.getZoomScale(c),y=this.getSize().divideBy(2),I=s instanceof Ge?s:this.latLngToContainerPoint(s),A=I.subtract(y).multiplyBy(1-1/p),G=this.containerPointToLatLng(y.add(A));return this.setView(G,c,{zoom:h})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():At(s);var h=Ne(c.paddingTopLeft||c.padding||[0,0]),p=Ne(c.paddingBottomRight||c.padding||[0,0]),y=this.getBoundsZoom(s,!1,h.add(p));if(y=typeof c.maxZoom=="number"?Math.min(c.maxZoom,y):y,y===1/0)return{center:s.getCenter(),zoom:y};var I=p.subtract(h).divideBy(2),A=this.project(s.getSouthWest(),y),G=this.project(s.getNorthEast(),y),Z=this.unproject(A.add(G).divideBy(2).add(I),y);return{center:Z,zoom:y}},fitBounds:function(s,c){if(s=At(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=Ne(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new lg,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ke(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,h){if(h=h||{},h.animate===!1||!Ce.any3d)return this.setView(s,c,h);this._stop();var p=this.project(this.getCenter()),y=this.project(s),I=this.getSize(),A=this._zoom;s=lt(s),c=c===void 0?A:c;var G=Math.max(I.x,I.y),Z=G*this.getZoomScale(A,c),re=y.distanceTo(p)||1,me=1.42,Ve=me*me;function it(wn){var Mg=wn?-1:1,eF=wn?Z:G,tF=Z*Z-G*G+Mg*Ve*Ve*re*re,nF=2*eF*Ve*re,Ky=tF/nF,HM=Math.sqrt(Ky*Ky+1)-Ky,iF=HM<1e-9?-18:Math.log(HM);return iF}function Ci(wn){return(Math.exp(wn)-Math.exp(-wn))/2}function Gn(wn){return(Math.exp(wn)+Math.exp(-wn))/2}function hr(wn){return Ci(wn)/Gn(wn)}var Ni=it(0);function Ql(wn){return G*(Gn(Ni)/Gn(Ni+me*wn))}function Y3(wn){return G*(Gn(Ni)*hr(Ni+me*wn)-Ci(Ni))/Ve}function Q3(wn){return 1-Math.pow(1-wn,1.5)}var J3=Date.now(),jM=(it(1)-Ni)/me,X3=h.duration?1e3*h.duration:1e3*jM*.8;function zM(){var wn=(Date.now()-J3)/X3,Mg=Q3(wn)*jM;wn<=1?(this._flyToFrame=D(zM,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(Y3(Mg)/re)),A),this.getScaleZoom(G/Ql(Mg),A),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),zM.call(this),this},flyToBounds:function(s,c){var h=this._getBoundsCenterZoom(s,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(s){return s=At(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,At(s));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var h=Ne(c.paddingTopLeft||c.padding||[0,0]),p=Ne(c.paddingBottomRight||c.padding||[0,0]),y=this.project(this.getCenter()),I=this.project(s),A=this.getPixelBounds(),G=Xn([A.min.add(h),A.max.subtract(p)]),Z=G.getSize();if(!G.contains(I)){this._enforcingBounds=!0;var re=I.subtract(G.getCenter()),me=G.extend(I).getSize().subtract(Z);y.x+=re.x<0?-me.x:me.x,y.y+=re.y<0?-me.y:me.y,this.panTo(this.unproject(y),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),y=h.divideBy(2).round(),I=p.subtract(y);return!I.x&&!I.y?this:(s.animate&&s.pan?this.panBy(I):(s.pan&&this._rawPanBy(I),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,s):navigator.geolocation.getCurrentPosition(c,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,h=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,h=s.coords.longitude,p=new je(c,h),y=p.toBounds(s.coords.accuracy*2),I=this._locateOptions;if(I.setView){var A=this.getBoundsZoom(y);this.setView(p,I.maxZoom?Math.min(A,I.maxZoom):A)}var G={latlng:p,bounds:y,timestamp:s.timestamp};for(var Z in s.coords)typeof s.coords[Z]=="number"&&(G[Z]=s.coords[Z]);this.fire("locationfound",G)}},addHandler:function(s,c){if(!c)return this;var h=this[s]=new c(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ht(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ht(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=pt("div",h,c||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new ci(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,h){s=At(s),h=Ne(h||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),I=this.getMaxZoom(),A=s.getNorthWest(),G=s.getSouthEast(),Z=this.getSize().subtract(h),re=Xn(this.project(G,p),this.project(A,p)).getSize(),me=Ce.any3d?this.options.zoomSnap:1,Ve=Z.x/re.x,it=Z.y/re.y,Ci=c?Math.max(Ve,it):Math.min(Ve,it);return p=this.getScaleZoom(Ci,p),me&&(p=Math.round(p/(me/100))*(me/100),p=c?Math.ceil(p/me)*me:Math.floor(p/me)*me),Math.max(y,Math.min(I,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ge(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var h=this._getTopLeftPoint(s,c);return new Ft(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(s)/h.scale(c)},getScaleZoom:function(s,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(s*h.scale(c));return isNaN(p)?1/0:p},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(lt(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Ne(s),c)},layerPointToLatLng:function(s){var c=Ne(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(lt(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(lt(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(At(s))},distance:function(s,c){return this.options.crs.distance(lt(s),lt(c))},containerPointToLayerPoint:function(s){return Ne(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Ne(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(Ne(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(lt(s)))},mouseEventToContainerPoint:function(s){return ea(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=Fl(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ze(c,"scroll",this._onScroll,this),this._containerId=a(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ce.any3d,Ke(s,"leaflet-container"+(Ce.touch?" leaflet-touch":"")+(Ce.retina?" leaflet-retina":"")+(Ce.ielt9?" leaflet-oldie":"")+(Ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=uc(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Wt(this._mapPane,new Ge(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ke(s.markerPane,"leaflet-zoom-hide"),Ke(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,h){Wt(this._mapPane,new Ge(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var y=this._zoom!==c;this._moveStart(y,h)._move(s,c)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,h,p){c===void 0&&(c=this._zoom);var y=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((y||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Wt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var c=s?kt:ze;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ce.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var h=[],p,y=c==="mouseout"||c==="mouseover",I=s.target||s.srcElement,A=!1;I;){if(p=this._targets[a(I)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){A=!0;break}if(p&&p.listens(c,!0)&&(y&&!mc(I,s)||(h.push(p),y))||I===this._container)break;I=I.parentNode}return!h.length&&!A&&!y&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var h=s.type;h==="mousedown"&&sh(c),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var y=this._findEventTargets(s,c);if(h){for(var I=[],A=0;A<h.length;A++)h[A].listens(c,!0)&&I.push(h[A]);y=I.concat(y)}if(y.length){c==="contextmenu"&&on(s);var G=y[0],Z={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var re=G.getLatLng&&(!G._radius||G._radius<=10);Z.containerPoint=re?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(s),Z.layerPoint=this.containerPointToLayerPoint(Z.containerPoint),Z.latlng=re?G.getLatLng():this.layerPointToLatLng(Z.layerPoint)}for(A=0;A<y.length;A++)if(y[A].fire(c,Z,!0),Z.originalEvent._stopped||y[A].options.bubblingMouseEvents===!1&&fe(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return ur(this._mapPane)||new Ge(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var h=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var h=this.getSize()._divideBy(2);return this.project(s,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(s,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return Xn([this.project(s.getSouthWest(),c)._subtract(p),this.project(s.getNorthWest(),c)._subtract(p),this.project(s.getSouthEast(),c)._subtract(p),this.project(s.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,h){if(!h)return s;var p=this.project(s,c),y=this.getSize().divideBy(2),I=new Ft(p.subtract(y),p.add(y)),A=this._getBoundsOffset(I,h,c);return Math.abs(A.x)<=1&&Math.abs(A.y)<=1?s:this.unproject(p.add(A),c)},_limitOffset:function(s,c){if(!c)return s;var h=this.getPixelBounds(),p=new Ft(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(s,c,h){var p=Xn(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),y=p.min.subtract(s.min),I=p.max.subtract(s.max),A=this._rebound(y.x,-I.x),G=this._rebound(y.y,-I.y);return new Ge(A,G)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),h=this.getMaxZoom(),p=Ce.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(c,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){rn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var h=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var s=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var h=lc,p=this._proxy.style[h];ti(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ht(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();ti(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),y=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(y)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Ke(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&rn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ug(s,c){return new ut(s,c)}var Ri=H.extend({options:{position:"topright"},initialize:function(s){S(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Ke(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ht(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ta=function(s){return new Ri(s)};ut.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",h=this._controlContainer=pt("div",c+"control-container",this._container);function p(y,I){var A=c+y+" "+c+I;s[y+I]=pt("div",A,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ht(this._controlCorners[s]);Ht(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _c=Ri.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,c,h){S(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Ri.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(a(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ke(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Ke(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):rn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return rn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=pt("div",s),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),pc(c),uh(c);var p=this._section=pt("section",s+"-list");h&&(this._map.on("click",this.collapse,this),ze(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=pt("a",s+"-toggle",c);y.href="#",y.title="Layers",y.setAttribute("role","button"),ze(y,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){on(I),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=pt("div",s+"-base",p),this._separator=pt("div",s+"-separator",p),this._overlaysList=pt("div",s+"-overlays",p),c.appendChild(p)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&a(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;dc(this._baseLayersList),dc(this._overlaysList),this._layerControlInputs=[];var s,c,h,p,y=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,s=s||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&y>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(a(s.target)),h=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(s,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var c=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),ze(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+s.name;var I=document.createElement("span");c.appendChild(I),I.appendChild(p),I.appendChild(y);var A=s.overlay?this._overlaysList:this._baseLayersList;return A.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,h,p=[],y=[];this._handlingClick=!0;for(var I=s.length-1;I>=0;I--)c=s[I],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||y.push(h);for(I=0;I<y.length;I++)this._map.hasLayer(y[I])&&this._map.removeLayer(y[I]);for(I=0;I<p.length;I++)this._map.hasLayer(p[I])||this._map.addLayer(p[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,h,p=this._map.getZoom(),y=s.length-1;y>=0;y--)c=s[y],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ze(s,"click",on),this.expand();var c=this;setTimeout(function(){kt(s,"click",on),c._preventClick=!1})}}),dg=function(s,c,h){return new _c(s,c,h)},Ki=Ri.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",h=pt("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,h,p,y){var I=pt("a",h,p);return I.innerHTML=s,I.href="#",I.title=c,I.setAttribute("role","button"),I.setAttribute("aria-label",c),pc(I),ze(I,"click",dr),ze(I,"click",y,this),ze(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";rn(this._zoomInButton,c),rn(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Ke(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Ke(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});ut.mergeOptions({zoomControl:!0}),ut.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ki,this.addControl(this.zoomControl))});var hg=function(s){return new Ki(s)},fg=Ri.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",h=pt("div",c),p=this.options;return this._addScales(p,c+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,h){s.metric&&(this._mScale=pt("div",c,h)),s.imperial&&(this._iScale=pt("div",c,h))},_update:function(){var s=this._map,c=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/s)},_updateImperial:function(s){var c=s*3.2808399,h,p,y;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(y=this._getRoundNum(c),this._updateScale(this._iScale,y+" ft",y/c))},_updateScale:function(s,c,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),h=s/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),vc=function(s){return new fg(s)},pg='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',yc=Ri.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ce.inlineSvg?pg+" ":"")+"Leaflet</a>"},initialize:function(s){S(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),pc(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});ut.mergeOptions({attributionControl:!0}),ut.addInitHook(function(){this.options.attributionControl&&new yc().addTo(this)});var Ul=function(s){return new yc(s)};Ri.Layers=_c,Ri.Zoom=Ki,Ri.Scale=fg,Ri.Attribution=yc,ta.layers=dg,ta.zoom=hg,ta.scale=vc,ta.attribution=Ul;var Zi=H.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zi.addTo=function(s,c){return s.addHandler(c,this),this};var jl={Events:nn},gg=Ce.touch?"touchstart mousedown":"mousedown",Dr=Mr.extend({options:{clickTolerance:3},initialize:function(s,c,h,p){S(this,p),this._element=s,this._dragStartTarget=c||s,this._preventOutline=h},enable:function(){this._enabled||(ze(this._dragStartTarget,gg,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Dr._dragging===this&&this.finishDrag(!0),kt(this._dragStartTarget,gg,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Vl(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Dr._dragging===this&&this.finishDrag();return}if(!(Dr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Dr._dragging=this,this._preventOutline&&sh(this._element),Xo(),Js(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,h=cg(this._element);this._startPoint=new Ge(c.clientX,c.clientY),this._startPos=ur(this._element),this._parentScale=es(h);var p=s.type==="mousedown";ze(document,p?"mousemove":"touchmove",this._onMove,this),ze(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Ge(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,on(s),this._moved||(this.fire("dragstart"),this._moved=!0,Ke(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ke(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Wt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){rn(document.body,"leaflet-dragging"),this._lastTarget&&(rn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),kt(document,"mousemove touchmove",this._onMove,this),kt(document,"mouseup touchend touchcancel",this._onUp,this),rh(),It();var c=this._moved&&this._moving;this._moving=!1,Dr._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function na(s,c,h){var p,y=[1,4,2,8],I,A,G,Z,re,me,Ve,it;for(I=0,me=s.length;I<me;I++)s[I]._code=ho(s[I],c);for(G=0;G<4;G++){for(Ve=y[G],p=[],I=0,me=s.length,A=me-1;I<me;A=I++)Z=s[I],re=s[A],Z._code&Ve?re._code&Ve||(it=bc(re,Z,Ve,c,h),it._code=ho(it,c),p.push(it)):(re._code&Ve&&(it=bc(re,Z,Ve,c,h),it._code=ho(it,c),p.push(it)),p.push(Z));s=p}return s}function fh(s,c){var h,p,y,I,A,G,Z,re,me;if(!s||s.length===0)throw new Error("latlngs not passed");wi(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ve=lt([0,0]),it=At(s),Ci=it.getNorthWest().distanceTo(it.getSouthWest())*it.getNorthEast().distanceTo(it.getNorthWest());Ci<1700&&(Ve=zl(s));var Gn=s.length,hr=[];for(h=0;h<Gn;h++){var Ni=lt(s[h]);hr.push(c.project(lt([Ni.lat-Ve.lat,Ni.lng-Ve.lng])))}for(G=Z=re=0,h=0,p=Gn-1;h<Gn;p=h++)y=hr[h],I=hr[p],A=y.y*I.x-I.y*y.x,Z+=(y.x+I.x)*A,re+=(y.y+I.y)*A,G+=A*3;G===0?me=hr[0]:me=[Z/G,re/G];var Ql=c.unproject(Ne(me));return lt([Ql.lat+Ve.lat,Ql.lng+Ve.lng])}function zl(s){for(var c=0,h=0,p=0,y=0;y<s.length;y++){var I=lt(s[y]);c+=I.lat,h+=I.lng,p++}return lt([c/p,h/p])}var ph={__proto__:null,clipPolygon:na,polygonCenter:fh,centroid:zl};function Hl(s,c){if(!c||!s.length)return s.slice();var h=c*c;return s=ns(s,h),s=mg(s,h),s}function gh(s,c,h){return Math.sqrt(Vn(s,c,h,!0))}function $l(s,c,h){return Vn(s,c,h)}function mg(s,c){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,y=new p(h);y[0]=y[h-1]=1,Gl(s,y,c,0,h-1);var I,A=[];for(I=0;I<h;I++)y[I]&&A.push(s[I]);return A}function Gl(s,c,h,p,y){var I=0,A,G,Z;for(G=p+1;G<=y-1;G++)Z=Vn(s[G],s[p],s[y],!0),Z>I&&(A=G,I=Z);I>h&&(c[A]=1,Gl(s,c,h,p,A),Gl(s,c,h,A,y))}function ns(s,c){for(var h=[s[0]],p=1,y=0,I=s.length;p<I;p++)ql(s[p],s[y])>c&&(h.push(s[p]),y=p);return y<I-1&&h.push(s[I-1]),h}var mh;function _h(s,c,h,p,y){var I=p?mh:ho(s,h),A=ho(c,h),G,Z,re;for(mh=A;;){if(!(I|A))return[s,c];if(I&A)return!1;G=I||A,Z=bc(s,c,G,h,y),re=ho(Z,h),G===I?(s=Z,I=re):(c=Z,A=re)}}function bc(s,c,h,p,y){var I=c.x-s.x,A=c.y-s.y,G=p.min,Z=p.max,re,me;return h&8?(re=s.x+I*(Z.y-s.y)/A,me=Z.y):h&4?(re=s.x+I*(G.y-s.y)/A,me=G.y):h&2?(re=Z.x,me=s.y+A*(Z.x-s.x)/I):h&1&&(re=G.x,me=s.y+A*(G.x-s.x)/I),new Ge(re,me,y)}function ho(s,c){var h=0;return s.x<c.min.x?h|=1:s.x>c.max.x&&(h|=2),s.y<c.min.y?h|=4:s.y>c.max.y&&(h|=8),h}function ql(s,c){var h=c.x-s.x,p=c.y-s.y;return h*h+p*p}function Vn(s,c,h,p){var y=c.x,I=c.y,A=h.x-y,G=h.y-I,Z=A*A+G*G,re;return Z>0&&(re=((s.x-y)*A+(s.y-I)*G)/Z,re>1?(y=h.x,I=h.y):re>0&&(y+=A*re,I+=G*re)),A=s.x-y,G=s.y-I,p?A*A+G*G:new Ge(y,I)}function wi(s){return!ne(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function vh(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),wi(s)}function is(s,c){var h,p,y,I,A,G,Z,re;if(!s||s.length===0)throw new Error("latlngs not passed");wi(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var me=lt([0,0]),Ve=At(s),it=Ve.getNorthWest().distanceTo(Ve.getSouthWest())*Ve.getNorthEast().distanceTo(Ve.getNorthWest());it<1700&&(me=zl(s));var Ci=s.length,Gn=[];for(h=0;h<Ci;h++){var hr=lt(s[h]);Gn.push(c.project(lt([hr.lat-me.lat,hr.lng-me.lng])))}for(h=0,p=0;h<Ci-1;h++)p+=Gn[h].distanceTo(Gn[h+1])/2;if(p===0)re=Gn[0];else for(h=0,I=0;h<Ci-1;h++)if(A=Gn[h],G=Gn[h+1],y=A.distanceTo(G),I+=y,I>p){Z=(I-p)/y,re=[G.x-Z*(G.x-A.x),G.y-Z*(G.y-A.y)];break}var Ni=c.unproject(Ne(re));return lt([Ni.lat+me.lat,Ni.lng+me.lng])}var d={__proto__:null,simplify:Hl,pointToSegmentDistance:gh,closestPointOnSegment:$l,clipSegment:_h,_getEdgeIntersection:bc,_getBitCode:ho,_sqClosestPointOnSegment:Vn,isFlat:wi,_flat:vh,polylineCenter:is},m={project:function(s){return new Ge(s.lng,s.lat)},unproject:function(s){return new je(s.y,s.x)},bounds:new Ft([-180,-90],[180,90])},x={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ft([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,h=this.R,p=s.lat*c,y=this.R_MINOR/h,I=Math.sqrt(1-y*y),A=I*Math.sin(p),G=Math.tan(Math.PI/4-p/2)/Math.pow((1-A)/(1+A),I/2);return p=-h*Math.log(Math.max(G,1e-10)),new Ge(s.lng*c*h,p)},unproject:function(s){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,y=Math.sqrt(1-p*p),I=Math.exp(-s.y/h),A=Math.PI/2-2*Math.atan(I),G=0,Z=.1,re;G<15&&Math.abs(Z)>1e-7;G++)re=y*Math.sin(A),re=Math.pow((1-re)/(1+re),y/2),Z=Math.PI/2-2*Math.atan(I*re)-A,A+=Z;return new je(A*c,s.x*c/h)}},M={__proto__:null,LonLat:m,Mercator:x,SphericalMercator:zd},U=t({},ro,{code:"EPSG:3395",projection:x,transformation:(function(){var s=.5/(Math.PI*x.R);return oo(s,.5,-s,.5)})()}),Y=t({},ro,{code:"EPSG:4326",projection:m,transformation:oo(1/180,1,-1/180,.5)}),ce=t({},bi,{projection:m,transformation:oo(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var h=c.lng-s.lng,p=c.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});bi.Earth=ro,bi.EPSG3395=U,bi.EPSG3857=qs,bi.EPSG900913=$d,bi.EPSG4326=Y,bi.Simple=ce;var tt=Mr.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});ut.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=a(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=a(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},_addLayers:function(s){s=s?ne(s)?s:[s]:[];for(var c=0,h=s.length;c<h;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=a(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;s=y.minZoom===void 0?s:Math.min(s,y.minZoom),c=y.maxZoom===void 0?c:Math.max(c,y.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Yt=tt.extend({initialize:function(s,c){S(this,c),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),gt=function(s,c){return new Yt(s,c)},$t=Yt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Yt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Yt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new ci;for(var c in this._layers){var h=this._layers[c];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),$n=function(s,c){return new $t(s,c)},Yi=H.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){S(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var y=Ne(p),I=Ne(c==="shadow"&&h.shadowAnchor||h.iconAnchor||y&&y.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(h.className||""),I&&(s.style.marginLeft=-I.x+"px",s.style.marginTop=-I.y+"px"),y&&(s.style.width=y.x+"px",s.style.height=y.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return Ce.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Qi(s){return new Yi(s)}var fo=Yi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof fo.imagePath!="string"&&(fo.imagePath=this._detectIconPath()),(this.options.imagePath||fo.imagePath)+Yi.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(h,p,y){var I=p.exec(h);return I&&I[y]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=pt("div","leaflet-default-icon-path",document.body),c=uc(s,"background-image")||uc(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Wl=Zi.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Dr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ke(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&rn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,I=ur(c._icon),A=h.getPixelBounds(),G=h.getPixelOrigin(),Z=Xn(A.min._subtract(G).add(y),A.max._subtract(G).subtract(y));if(!Z.contains(I)){var re=Ne((Math.max(Z.max.x,I.x)-Z.max.x)/(A.max.x-Z.max.x)-(Math.min(Z.min.x,I.x)-Z.min.x)/(A.min.x-Z.min.x),(Math.max(Z.max.y,I.y)-Z.max.y)/(A.max.y-Z.max.y)-(Math.min(Z.min.y,I.y)-Z.min.y)/(A.min.y-Z.min.y)).multiplyBy(p);h.panBy(re,{animate:!1}),this._draggable._newPos._add(re),this._draggable._startPos._add(re),Wt(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,h=c._shadow,p=ur(c._icon),y=c._map.layerPointToLatLng(p);h&&Wt(h,p),c._latlng=y,s.latlng=y,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),_g=tt.extend({options:{icon:new fo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){S(this,c),this._latlng=lt(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=lt(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Ke(h,c),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(h,"focus",this._panOnFocus,this);var y=s.icon.createShadow(this._shadow),I=!1;y!==this._shadow&&(this._removeShadow(),I=!0),y&&(Ke(y,c),y.alt=""),this._shadow=y,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&I&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&kt(this._icon,"focus",this._panOnFocus,this),Ht(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ht(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Wt(this._icon,s),this._shadow&&Wt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ke(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Wl)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Wl(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&xi(this._icon,s),this._shadow&&xi(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,h=c.iconSize?Ne(c.iconSize):Ne(0,0),p=c.iconAnchor?Ne(c.iconAnchor):Ne(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function A3(s,c){return new _g(s,c)}var ia=tt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return S(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),vg=ia.extend({options:{fill:!0,radius:10},initialize:function(s,c){S(this,c),this._latlng=lt(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=lt(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return ia.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,h=this._clickTolerance(),p=[s+h,c+h];this._pxBounds=new Ft(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function k3(s,c){return new vg(s,c)}var $y=vg.extend({initialize:function(s,c,h){if(typeof c=="number"&&(c=t({},h,{radius:c})),S(this,c),this._latlng=lt(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new ci(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:ia.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===ro.distance){var y=Math.PI/180,I=this._mRadius/ro.R/y,A=h.project([c+I,s]),G=h.project([c-I,s]),Z=A.add(G).divideBy(2),re=h.unproject(Z).lat,me=Math.acos((Math.cos(I*y)-Math.sin(c*y)*Math.sin(re*y))/(Math.cos(c*y)*Math.cos(re*y)))/y;(isNaN(me)||me===0)&&(me=I/Math.cos(Math.PI/180*c)),this._point=Z.subtract(h.getPixelOrigin()),this._radius=isNaN(me)?0:Z.x-h.project([re,s-me]).x,this._radiusY=Z.y-A.y}else{var Ve=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Ve).x}this._updateBounds()}});function R3(s,c,h){return new $y(s,c,h)}var rs=ia.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){S(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,h=null,p=Vn,y,I,A=0,G=this._parts.length;A<G;A++)for(var Z=this._parts[A],re=1,me=Z.length;re<me;re++){y=Z[re-1],I=Z[re];var Ve=p(s,y,I,!0);Ve<c&&(c=Ve,h=p(s,y,I))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return is(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=lt(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new ci,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return wi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],h=wi(s),p=0,y=s.length;p<y;p++)h?(c[p]=lt(s[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(s[p]);return c},_project:function(){var s=new Ft;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new Ge(s,s);this._rawPxBounds&&(this._pxBounds=new Ft([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,h){var p=s[0]instanceof je,y=s.length,I,A;if(p){for(A=[],I=0;I<y;I++)A[I]=this._map.latLngToLayerPoint(s[I]),h.extend(A[I]);c.push(A)}else for(I=0;I<y;I++)this._projectLatlngs(s[I],c,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,y,I,A,G,Z;for(h=0,y=0,I=this._rings.length;h<I;h++)for(Z=this._rings[h],p=0,A=Z.length;p<A-1;p++)G=_h(Z[p],Z[p+1],s,p,!0),G&&(c[y]=c[y]||[],c[y].push(G[0]),(G[1]!==Z[p+1]||p===A-2)&&(c[y].push(G[1]),y++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=Hl(s[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var h,p,y,I,A,G,Z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,I=this._parts.length;h<I;h++)for(G=this._parts[h],p=0,A=G.length,y=A-1;p<A;y=p++)if(!(!c&&p===0)&&gh(s,G[y],G[p])<=Z)return!0;return!1}});function N3(s,c){return new rs(s,c)}rs._flat=vh;var Kl=rs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=rs.prototype._convertLatLngs.call(this,s),h=c.length;return h>=2&&c[0]instanceof je&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(s){rs.prototype._setLatLngs.call(this,s),wi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return wi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,h=new Ge(c,c);if(s=new Ft(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,I;p<y;p++)I=na(this._rings[p],s,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,h,p,y,I,A,G,Z,re;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(I=0,Z=this._parts.length;I<Z;I++)for(h=this._parts[I],A=0,re=h.length,G=re-1;A<re;G=A++)p=h[A],y=h[G],p.y>s.y!=y.y>s.y&&s.x<(y.x-p.x)*(s.y-p.y)/(y.y-p.y)+p.x&&(c=!c);return c||rs.prototype._containsPoint.call(this,s,!0)}});function L3(s,c){return new Kl(s,c)}var os=$t.extend({initialize:function(s,c){S(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=ne(s)?s:s.features,h,p,y;if(c){for(h=0,p=c.length;h<p;h++)y=c[h],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var I=this.options;if(I.filter&&!I.filter(s))return this;var A=yg(s,I);return A?(A.feature=wg(s),A.defaultOptions=A.options,this.resetStyle(A),I.onEachFeature&&I.onEachFeature(s,A),this.addLayer(A)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function yg(s,c){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,y=[],I=c&&c.pointToLayer,A=c&&c.coordsToLatLng||Gy,G,Z,re,me;if(!p&&!h)return null;switch(h.type){case"Point":return G=A(p),CM(I,s,G,c);case"MultiPoint":for(re=0,me=p.length;re<me;re++)G=A(p[re]),y.push(CM(I,s,G,c));return new $t(y);case"LineString":case"MultiLineString":return Z=bg(p,h.type==="LineString"?0:1,A),new rs(Z,c);case"Polygon":case"MultiPolygon":return Z=bg(p,h.type==="Polygon"?1:2,A),new Kl(Z,c);case"GeometryCollection":for(re=0,me=h.geometries.length;re<me;re++){var Ve=yg({geometry:h.geometries[re],type:"Feature",properties:s.properties},c);Ve&&y.push(Ve)}return new $t(y);case"FeatureCollection":for(re=0,me=h.features.length;re<me;re++){var it=yg(h.features[re],c);it&&y.push(it)}return new $t(y);default:throw new Error("Invalid GeoJSON object.")}}function CM(s,c,h,p){return s?s(c,h):new _g(h,p&&p.markersInheritOptions&&p)}function Gy(s){return new je(s[1],s[0],s[2])}function bg(s,c,h){for(var p=[],y=0,I=s.length,A;y<I;y++)A=c?bg(s[y],c-1,h):(h||Gy)(s[y]),p.push(A);return p}function qy(s,c){return s=lt(s),s.alt!==void 0?[g(s.lng,c),g(s.lat,c),g(s.alt,c)]:[g(s.lng,c),g(s.lat,c)]}function xg(s,c,h,p){for(var y=[],I=0,A=s.length;I<A;I++)y.push(c?xg(s[I],wi(s[I])?0:c-1,h,p):qy(s[I],p));return!c&&h&&y.length>0&&y.push(y[0].slice()),y}function Zl(s,c){return s.feature?t({},s.feature,{geometry:c}):wg(c)}function wg(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Wy={toGeoJSON:function(s){return Zl(this,{type:"Point",coordinates:qy(this.getLatLng(),s)})}};_g.include(Wy),$y.include(Wy),vg.include(Wy),rs.include({toGeoJSON:function(s){var c=!wi(this._latlngs),h=xg(this._latlngs,c?1:0,!1,s);return Zl(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),Kl.include({toGeoJSON:function(s){var c=!wi(this._latlngs),h=c&&!wi(this._latlngs[0]),p=xg(this._latlngs,h?2:c?1:0,!0,s);return c||(p=[p]),Zl(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),Yt.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(s).geometry.coordinates)}),Zl(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var I=y.toGeoJSON(s);if(h)p.push(I.geometry);else{var A=wg(I);A.type==="FeatureCollection"?p.push.apply(p,A.features):p.push(A)}}}),h?Zl(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function EM(s,c){return new os(s,c)}var F3=EM,Cg=tt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,h){this._url=s,this._bounds=At(c),S(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ke(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ht(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&co(this._image),this},bringToBack:function(){return this._map&&lo(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=At(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:pt("img");if(Ke(c,"leaflet-image-layer"),this._zoomAnimated&&Ke(c,"leaflet-zoom-animated"),this.options.className&&Ke(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=r(this.fire,this,"load"),c.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ti(this._image,h,c)},_reset:function(){var s=this._image,c=new Ft(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();Wt(s,c.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){xi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),V3=function(s,c,h){return new Cg(s,c,h)},IM=Cg.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:pt("video");if(Ke(c,"leaflet-image-layer"),this._zoomAnimated&&Ke(c,"leaflet-zoom-animated"),this.options.className&&Ke(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=r(this.fire,this,"load"),s){for(var h=c.getElementsByTagName("source"),p=[],y=0;y<h.length;y++)p.push(h[y].src);this._url=h.length>0?p:[c.src];return}ne(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var A=pt("source");A.src=this._url[I],c.appendChild(A)}}});function B3(s,c,h){return new IM(s,c,h)}var SM=Cg.extend({_initImage:function(){var s=this._image=this._url;Ke(s,"leaflet-image-layer"),this._zoomAnimated&&Ke(s,"leaflet-zoom-animated"),this.options.className&&Ke(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function U3(s,c,h){return new SM(s,c,h)}var po=tt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof je||ne(s))?(this._latlng=lt(s),S(this,c)):(S(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&xi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&xi(this._container,1),this.bringToFront(),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(xi(this._container,0),this._removeTimeout=setTimeout(r(Ht,void 0,this._container),200)):Ht(this._container),this.options.interactive&&(rn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=lt(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&co(this._container),this},bringToBack:function(){return this._map&&lo(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof $t){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=Ne(this.options.offset),h=this._getAnchor();this._zoomAnimated?Wt(this._container,s.add(h)):c=c.add(s).add(h);var p=this._containerBottom=-c.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});ut.include({_initOverlay:function(s,c,h,p){var y=c;return y instanceof s||(y=new s(p).setContent(c)),h&&y.setLatLng(h),y}}),tt.include({_initOverlay:function(s,c,h,p){var y=h;return y instanceof s?(S(y,p),y._source=this):(y=c&&!p?c:new s(p,this),y.setContent(h)),y}});var Eg=po.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,po.prototype.openOn.call(this,s)},onAdd:function(s){po.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ia||this._source.on("preclick",li))},onRemove:function(s){po.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ia||this._source.off("preclick",li))},getEvents:function(){var s=po.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=pt("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=pt("div",s+"-content-wrapper",c);if(this._contentNode=pt("div",s+"-content",h),pc(c),uh(this._contentNode),ze(c,"contextmenu",li),this._tipContainer=pt("div",s+"-tip-container",c),this._tip=pt("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=pt("a",s+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ze(p,"click",function(y){on(y),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=s.offsetHeight,y=this.options.maxHeight,I="leaflet-popup-scrolled";y&&p>y?(c.height=y+"px",Ke(s,I)):rn(s,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();Wt(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(uc(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,y=new Ge(this._containerLeft,-h-this._containerBottom);y._add(ur(this._container));var I=s.layerPointToContainerPoint(y),A=Ne(this.options.autoPanPadding),G=Ne(this.options.autoPanPaddingTopLeft||A),Z=Ne(this.options.autoPanPaddingBottomRight||A),re=s.getSize(),me=0,Ve=0;I.x+p+Z.x>re.x&&(me=I.x+p-re.x+Z.x),I.x-me-G.x<0&&(me=I.x-G.x),I.y+h+Z.y>re.y&&(Ve=I.y+h-re.y+Z.y),I.y-Ve-G.y<0&&(Ve=I.y-G.y),(me||Ve)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([me,Ve]))}},_getAnchor:function(){return Ne(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),j3=function(s,c){return new Eg(s,c)};ut.mergeOptions({closePopupOnClick:!0}),ut.include({openPopup:function(s,c,h){return this._initOverlay(Eg,s,c,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),tt.include({bindPopup:function(s,c){return this._popup=this._initOverlay(Eg,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof $t||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){dr(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof ia)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Ig=po.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){po.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){po.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=po.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,h,p=this._map,y=this._container,I=p.latLngToContainerPoint(p.getCenter()),A=p.layerPointToContainerPoint(s),G=this.options.direction,Z=y.offsetWidth,re=y.offsetHeight,me=Ne(this.options.offset),Ve=this._getAnchor();G==="top"?(c=Z/2,h=re):G==="bottom"?(c=Z/2,h=0):G==="center"?(c=Z/2,h=re/2):G==="right"?(c=0,h=re/2):G==="left"?(c=Z,h=re/2):A.x<I.x?(G="right",c=0,h=re/2):(G="left",c=Z+(me.x+Ve.x)*2,h=re/2),s=s.subtract(Ne(c,h,!0)).add(me).add(Ve),rn(y,"leaflet-tooltip-right"),rn(y,"leaflet-tooltip-left"),rn(y,"leaflet-tooltip-top"),rn(y,"leaflet-tooltip-bottom"),Ke(y,"leaflet-tooltip-"+G),Wt(y,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&xi(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return Ne(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),z3=function(s,c){return new Ig(s,c)};ut.include({openTooltip:function(s,c,h){return this._initOverlay(Ig,s,c,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),tt.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ig,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof $t||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(ze(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ze(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var MM=Yi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(dc(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=Ne(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function H3(s){return new MM(s)}Yi.Default=fo;var yh=tt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){S(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ht(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(co(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(lo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Ge?s:new Ge(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,h=-s(-1/0,1/0),p=0,y=c.length,I;p<y;p++)I=c[p].style.zIndex,c[p]!==this._container&&I&&(h=s(h,+I));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ce.ielt9){xi(this._container,this.options.opacity);var s=+new Date,c=!1,h=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var I=Math.min(1,(s-y.loaded)/200);xi(y.el,I),I<1?c=!0:(y.active?h=!0:this._onOpaqueTile(y),y.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(N(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=c-Math.abs(s-h),this._onUpdateLevel(h)):(Ht(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],y=this._map;return p||(p=this._levels[s]={},p.el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=y.project(y.unproject(y.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,y.getCenter(),y.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ht(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,h,p){var y=Math.floor(s/2),I=Math.floor(c/2),A=h-1,G=new Ge(+y,+I);G.z=+A;var Z=this._tileCoordsToKey(G),re=this._tiles[Z];return re&&re.active?(re.retain=!0,!0):(re&&re.loaded&&(re.retain=!0),A>p?this._retainParent(y,I,A,p):!1)},_retainChildren:function(s,c,h,p){for(var y=2*s;y<2*s+2;y++)for(var I=2*c;I<2*c+2;I++){var A=new Ge(y,I);A.z=h+1;var G=this._tileCoordsToKey(A),Z=this._tiles[G];if(Z&&Z.active){Z.retain=!0;continue}else Z&&Z.loaded&&(Z.retain=!0);h+1<p&&this._retainChildren(y,I,h+1,p)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,h,p){var y=Math.round(c);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var I=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||I)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,c)},_setZoomTransform:function(s,c,h){var p=this._map.getZoomScale(h,s.zoom),y=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();Ce.any3d?ti(s.el,y,p):Wt(s.el,y)},_resetGrid:function(){var s=this._map,c=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),y=c.project(s,this._tileZoom).floor(),I=c.getSize().divideBy(p*2);return new Ft(y.subtract(I),y.add(I))},_update:function(s){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),y=this._pxBoundsToTileRange(p),I=y.getCenter(),A=[],G=this.options.keepBuffer,Z=new Ft(y.getBottomLeft().subtract([G,-G]),y.getTopRight().add([G,-G]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var re in this._tiles){var me=this._tiles[re].coords;(me.z!==this._tileZoom||!Z.contains(new Ge(me.x,me.y)))&&(this._tiles[re].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var Ve=y.min.y;Ve<=y.max.y;Ve++)for(var it=y.min.x;it<=y.max.x;it++){var Ci=new Ge(it,Ve);if(Ci.z=this._tileZoom,!!this._isValidTile(Ci)){var Gn=this._tiles[this._tileCoordsToKey(Ci)];Gn?Gn.current=!0:A.push(Ci)}}if(A.sort(function(Ni,Ql){return Ni.distanceTo(I)-Ql.distanceTo(I)}),A.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hr=document.createDocumentFragment();for(it=0;it<A.length;it++)this._addTile(A[it],hr);this._level.el.appendChild(hr)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!c.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return At(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,h=this.getTileSize(),p=s.scaleBy(h),y=p.add(h),I=c.unproject(p,s.z),A=c.unproject(y,s.z);return[I,A]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),h=new ci(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),h=new Ge(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(s){var c=this._tiles[s];c&&(Ht(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Ke(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=f,s.onmousemove=f,Ce.ielt9&&this.options.opacity<1&&xi(s,this.options.opacity)},_addTile:function(s,c){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),y=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(y),this.createTile.length<2&&D(r(this._tileReady,this,s,null,y)),Wt(y,h),this._tiles[p]={el:y,coords:s,current:!0},c.appendChild(y),this.fire("tileloadstart",{tile:y,coords:s})},_tileReady:function(s,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(xi(h.el,0),N(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(Ke(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ce.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new Ge(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new Ft(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function $3(s){return new yh(s)}var Yl=yh.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=S(this,c),c.detectRetina&&Ce.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var h=document.createElement("img");return ze(h,"load",r(this._tileOnLoad,this,c,h)),ze(h,"error",r(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var c={r:Ce.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=h),c["-y"]=h}return q(this._url,t(c,this.options))},_tileOnLoad:function(s,c){Ce.ielt9?setTimeout(r(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),s(h,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=c-s),s+p},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=f,c.onerror=f,!c.complete)){c.src=we;var h=this._tiles[s].coords;Ht(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",we),yh.prototype._removeTile.call(this,s)},_tileReady:function(s,c,h){if(!(!this._map||h&&h.getAttribute("src")===we))return yh.prototype._tileReady.call(this,s,c,h)}});function PM(s,c){return new Yl(s,c)}var TM=Yl.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var h=t({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=S(this,c);var y=c.detectRetina&&Ce.retina?2:1,I=this.getTileSize();h.width=I.x*y,h.height=I.y*y,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Yl.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),h=this._crs,p=Xn(h.project(c[0]),h.project(c[1])),y=p.min,I=p.max,A=(this._wmsVersion>=1.3&&this._crs===Y?[y.y,y.x,I.y,I.x]:[y.x,y.y,I.x,I.y]).join(","),G=Yl.prototype.getTileUrl.call(this,s);return G+R(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+A},setParams:function(s,c){return t(this.wmsParams,s),c||this.redraw(),this}});function G3(s,c){return new TM(s,c)}Yl.WMS=TM,PM.wms=G3;var ss=tt.extend({options:{padding:.1},initialize:function(s){S(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ke(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,c),I=p.multiplyBy(-h).add(y).subtract(this._map._getNewPixelOrigin(s,c));Ce.any3d?ti(this._container,I,h):Wt(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new Ft(h,h.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),OM=ss.extend({options:{tolerance:0},getEvents:function(){var s=ss.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ss.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ze(s,"mousemove",this._onMouseMove,this),ze(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,Ht(this._container),kt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ss.prototype._update.call(this);var s=this._bounds,c=this._container,h=s.getSize(),p=Ce.retina?2:1;Wt(c,s.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",Ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){ss.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),h=[],p,y;for(y=0;y<c.length;y++){if(p=Number(c[y]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ft,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var h,p,y,I,A=s._parts,G=A.length,Z=this._ctx;if(G){for(Z.beginPath(),h=0;h<G;h++){for(p=0,y=A[h].length;p<y;p++)I=A[h][p],Z[p?"lineTo":"moveTo"](I.x,I.y);c&&Z.closePath()}this._fillStroke(Z,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),y=(Math.max(Math.round(s._radiusY),1)||p)/p;y!==1&&(h.save(),h.scale(1,y)),h.beginPath(),h.arc(c.x,c.y/y,p,0,Math.PI*2,!1),y!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,c){var h=c.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),h,p,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(rn(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var h,p,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,h){this._map._fireDOMEvent(c,h||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function DM(s){return Ce.canvas?new OM(s):null}var bh=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),q3={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ss.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=bh("shape");Ke(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=bh("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;Ht(c),s.removeInteractiveTarget(c),delete this._layers[a(s)]},_updateStyle:function(s){var c=s._stroke,h=s._fill,p=s.options,y=s._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(c||(c=s._stroke=bh("stroke")),y.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=ne(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(y.removeChild(c),s._stroke=null),p.fill?(h||(h=s._fill=bh("fill")),y.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(y.removeChild(h),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){co(s._container)},_bringToBack:function(s){lo(s._container)}},Sg=Ce.vml?bh:Pl,xh=ss.extend({_initContainer:function(){this._container=Sg("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Sg("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ht(this._container),kt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ss.prototype._update.call(this);var s=this._bounds,c=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),Wt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=Sg("path");s.options.className&&Ke(c,s.options.className),s.options.interactive&&Ke(c,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ht(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,h=s.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,Tl(s._parts,c))},_updateCircle:function(s){var c=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,y="a"+h+","+p+" 0 1,0 ",I=s._empty()?"M0 0":"M"+(c.x-h)+","+c.y+y+h*2+",0 "+y+-h*2+",0 ";this._setPath(s,I)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){co(s._path)},_bringToBack:function(s){lo(s._path)}});Ce.vml&&xh.include(q3);function AM(s){return Ce.svg||Ce.vml?new xh(s):null}ut.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&DM(s)||AM(s)}});var kM=Kl.extend({initialize:function(s,c){Kl.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=At(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function W3(s,c){return new kM(s,c)}xh.create=Sg,xh.pointsToPath=Tl,os.geometryToLayer=yg,os.coordsToLatLng=Gy,os.coordsToLatLngs=bg,os.latLngToCoords=qy,os.latLngsToCoords=xg,os.getFeature=Zl,os.asFeature=wg,ut.mergeOptions({boxZoom:!0});var RM=Zi.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){kt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ht(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Js(),Xo(),this._startPoint=this._map.mouseEventToContainerPoint(s),ze(document,{contextmenu:dr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),Ke(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new Ft(this._point,this._startPoint),h=c.getSize();Wt(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Ht(this._box),rn(this._container,"leaflet-crosshair")),It(),rh(),kt(document,{contextmenu:dr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var c=new ci(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ut.addInitHook("addHandler","boxZoom",RM),ut.mergeOptions({doubleClickZoom:!0});var NM=Zi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,y=s.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(y):c.setZoomAround(s.containerPoint,y)}});ut.addInitHook("addHandler","doubleClickZoom",NM),ut.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var LM=Zi.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Dr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Ke(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){rn(this._map._container,"leaflet-grab"),rn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=At(this._map.options.maxBounds);this._offsetLimit=Xn(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-c+h)%s+c-h,I=(p+c+h)%s-c-h,A=Math.abs(y+h)<Math.abs(I+h)?y:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=A},_onDragEnd:function(s){var c=this._map,h=c.options,p=!h.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),p)c.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,A=h.easeLinearity,G=y.multiplyBy(A/I),Z=G.distanceTo([0,0]),re=Math.min(h.inertiaMaxSpeed,Z),me=G.multiplyBy(re/Z),Ve=re/(h.inertiaDeceleration*A),it=me.multiplyBy(-Ve/2).round();!it.x&&!it.y?c.fire("moveend"):(it=c._limitOffset(it,c.options.maxBounds),D(function(){c.panBy(it,{duration:Ve,easeLinearity:A,noMoveStart:!0,animate:!0})}))}}});ut.addInitHook("addHandler","dragging",LM),ut.mergeOptions({keyboard:!0,keyboardPanDelta:80});var FM=Zi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ze(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),kt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,h=s.scrollTop||c.scrollTop,p=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},h=this.keyCodes,p,y;for(p=0,y=h.left.length;p<y;p++)c[h.left[p]]=[-1*s,0];for(p=0,y=h.right.length;p<y;p++)c[h.right[p]]=[s,0];for(p=0,y=h.down.length;p<y;p++)c[h.down[p]]=[0,s];for(p=0,y=h.up.length;p<y;p++)c[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},h=this.keyCodes,p,y;for(p=0,y=h.zoomIn.length;p<y;p++)c[h.zoomIn[p]]=s;for(p=0,y=h.zoomOut.length;p<y;p++)c[h.zoomOut[p]]=-s},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){kt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],s.shiftKey&&(p=Ne(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(Ne(p),h.options.maxBounds)),h.options.worldCopyJump){var y=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(y)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;dr(s)}}});ut.addInitHook("addHandler","keyboard",FM),ut.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var VM=Zi.extend({addHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){kt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=hh(s),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),p),dr(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,I=h?Math.ceil(y/h)*h:y,A=s._limitZoom(c+(this._delta>0?I:-I))-c;this._delta=0,this._startTime=null,A&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+A):s.setZoomAround(this._lastMousePos,c+A))}});ut.addInitHook("addHandler","scrollWheelZoom",VM);var K3=600;ut.mergeOptions({tapHold:Ce.touchNative&&Ce.safari&&Ce.mobile,tapTolerance:15});var BM=Zi.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){kt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new Ge(c.clientX,c.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(ze(document,"touchend",on),ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),K3),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){kt(document,"touchend",on),kt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),kt(document,"touchend touchcancel contextmenu",this._cancel,this),kt(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new Ge(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});ut.addInitHook("addHandler","tapHold",BM),ut.mergeOptions({touchZoom:Ce.touch,bounceAtZoomLimits:!0});var UM=Zi.extend({addHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){rn(this._map._container,"leaflet-touch-zoom"),kt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),on(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]),y=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(y,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&y<1||this._zoom>c.getMaxZoom()&&y>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var I=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&I.x===0&&I.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var A=r(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(A,this,!0),on(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,N(this._animRequest),kt(document,"touchmove",this._onTouchMove,this),kt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ut.addInitHook("addHandler","touchZoom",UM),ut.BoxZoom=RM,ut.DoubleClickZoom=NM,ut.Drag=LM,ut.Keyboard=FM,ut.ScrollWheelZoom=VM,ut.TapHold=BM,ut.TouchZoom=UM,n.Bounds=Ft,n.Browser=Ce,n.CRS=bi,n.Canvas=OM,n.Circle=$y,n.CircleMarker=vg,n.Class=H,n.Control=Ri,n.DivIcon=MM,n.DivOverlay=po,n.DomEvent=Zt,n.DomUtil=uo,n.Draggable=Dr,n.Evented=Mr,n.FeatureGroup=$t,n.GeoJSON=os,n.GridLayer=yh,n.Handler=Zi,n.Icon=Yi,n.ImageOverlay=Cg,n.LatLng=je,n.LatLngBounds=ci,n.Layer=tt,n.LayerGroup=Yt,n.LineUtil=d,n.Map=ut,n.Marker=_g,n.Mixin=jl,n.Path=ia,n.Point=Ge,n.PolyUtil=ph,n.Polygon=Kl,n.Polyline=rs,n.Popup=Eg,n.PosAnimation=lg,n.Projection=M,n.Rectangle=kM,n.Renderer=ss,n.SVG=xh,n.SVGOverlay=SM,n.TileLayer=Yl,n.Tooltip=Ig,n.Transformation=Hd,n.Util=B,n.VideoOverlay=IM,n.bind=r,n.bounds=Xn,n.canvas=DM,n.circle=R3,n.circleMarker=k3,n.control=ta,n.divIcon=H3,n.extend=t,n.featureGroup=$n,n.geoJSON=EM,n.geoJson=F3,n.gridLayer=$3,n.icon=Qi,n.imageOverlay=V3,n.latLng=lt,n.latLngBounds=At,n.layerGroup=gt,n.map=ug,n.marker=A3,n.point=Ne,n.polygon=L3,n.polyline=N3,n.popup=j3,n.rectangle=W3,n.setOptions=S,n.stamp=a,n.svg=AM,n.svgOverlay=U3,n.tileLayer=PM,n.tooltip=z3,n.transformation=oo,n.version=e,n.videoOverlay=B3;var Z3=window.L;n.noConflict=function(){return window.L=Z3,this},window.L=n})});var Yy;function Pg(){return Yy}function go(n){let e=Yy;return Yy=n,e}var ZM=Symbol("NotFound");function Jl(n){return n===ZM||n?.name==="\u0275NotFound"}var ui=null,Tg=!1,Qy=1,fF=null,di=Symbol("SIGNAL");function He(n){let e=ui;return ui=n,e}function kg(){return ui}var Xl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function eu(n){if(Tg)throw new Error("");if(ui===null)return;ui.consumerOnSignalRead(n);let e=ui.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=ui.recomputing;if(i&&(t=e!==void 0?e.nextProducer:ui.producers,t!==void 0&&t.producer===n)){ui.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===ui&&(!i||gF(r,ui)))return;let o=nu(ui),a={producer:n,consumer:ui,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};ui.producersTail=a,e!==void 0?e.nextProducer=a:ui.producers=a,o&&XM(n,a)}function YM(){Qy++}function Rg(n){if(!(nu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Qy)){if(!n.producerMustRecompute(n)&&!Eh(n)){Ag(n);return}n.producerRecomputeValue(n),Ag(n)}}function Jy(n){if(n.consumers===void 0)return;let e=Tg;Tg=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||pF(i)}}finally{Tg=e}}function Xy(){return ui?.consumerAllowSignalWrites!==!1}function pF(n){n.dirty=!0,Jy(n),n.consumerMarkedDirty?.(n)}function Ag(n){n.dirty=!1,n.lastCleanEpoch=Qy}function tu(n){return n&&QM(n),He(n)}function QM(n){n.producersTail=void 0,n.recomputing=!0}function Ch(n,e){He(e),n&&JM(n)}function JM(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(nu(n))do t=eb(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Eh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(Rg(t),i!==t.version))return!0}return!1}function Ih(n){if(nu(n)){let e=n.producers;for(;e!==void 0;)e=eb(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function XM(n,e){let t=n.consumersTail,i=nu(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)XM(r.producer,r)}function eb(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!nu(e)){let o=e.producers;for(;o!==void 0;)o=eb(o)}return t}function nu(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Ng(n){fF?.(n)}function gF(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function Lg(n,e){return Object.is(n,e)}function Fg(n,e){let t=Object.create(mF);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(Rg(t),eu(t),t.value===wh)throw t.error;return t.value};return i[di]=t,Ng(t),i}var Og=Symbol("UNSET"),Dg=Symbol("COMPUTING"),wh=Symbol("ERRORED"),mF=ve(J({},Xl),{value:Og,dirty:!0,error:null,equal:Lg,kind:"computed",producerMustRecompute(n){return n.value===Og||n.value===Dg},producerRecomputeValue(n){if(n.value===Dg)throw new Error("");let e=n.value;n.value=Dg;let t=tu(n),i,r=!1;try{i=n.computation(),He(null),r=e!==Og&&e!==wh&&i!==wh&&n.equal(e,i)}catch(o){i=wh,n.error=o}finally{Ch(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function _F(){throw new Error}var eP=_F;function tP(n){eP(n)}function tb(n){eP=n}var vF=null;function nb(n,e){let t=Object.create(Vg);t.value=n,e!==void 0&&(t.equal=e);let i=()=>nP(t);return i[di]=t,Ng(t),[i,a=>iu(t,a),a=>ib(t,a)]}function nP(n){return eu(n),n.value}function iu(n,e){Xy()||tP(n),n.equal(n.value,e)||(n.value=e,yF(n))}function ib(n,e){Xy()||tP(n),iu(n,e(n.value))}var Vg=ve(J({},Xl),{equal:Lg,value:void 0,kind:"signal"});function yF(n){n.version++,YM(),Jy(n),vF?.(n)}function Ze(n){return typeof n=="function"}function ru(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Bg=ru(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function xc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var un=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Ze(i))try{i()}catch(o){e=o instanceof Bg?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{iP(o)}catch(a){e=e??[],a instanceof Bg?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Bg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)iP(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xc(t,e)}remove(e){let{_finalizers:t}=this;t&&xc(t,e),e instanceof n&&e._removeParent(this)}};un.EMPTY=(()=>{let n=new un;return n.closed=!0,n})();var rb=un.EMPTY;function Ug(n){return n instanceof un||n&&"closed"in n&&Ze(n.remove)&&Ze(n.add)&&Ze(n.unsubscribe)}function iP(n){Ze(n)?n():n.unsubscribe()}var Ar={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ou={setTimeout(n,e,...t){let{delegate:i}=ou;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ou;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function jg(n){ou.setTimeout(()=>{let{onUnhandledError:e}=Ar;if(e)e(n);else throw n})}function Sh(){}var rP=ob("C",void 0,void 0);function oP(n){return ob("E",void 0,n)}function sP(n){return ob("N",n,void 0)}function ob(n,e,t){return{kind:n,value:e,error:t}}var wc=null;function su(n){if(Ar.useDeprecatedSynchronousErrorHandling){let e=!wc;if(e&&(wc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=wc;if(wc=null,t)throw i}}else n()}function aP(n){Ar.useDeprecatedSynchronousErrorHandling&&wc&&(wc.errorThrown=!0,wc.error=n)}var Cc=class extends un{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ug(e)&&e.add(this)):this.destination=wF}static create(e,t,i){return new oa(e,t,i)}next(e){this.isStopped?ab(sP(e),this):this._next(e)}error(e){this.isStopped?ab(oP(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ab(rP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bF=Function.prototype.bind;function sb(n,e){return bF.call(n,e)}var cb=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){zg(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){zg(i)}else zg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zg(t)}}},oa=class extends Cc{constructor(e,t,i){super();let r;if(Ze(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Ar.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&sb(e.next,o),error:e.error&&sb(e.error,o),complete:e.complete&&sb(e.complete,o)}):r=e}this.destination=new cb(r)}};function zg(n){Ar.useDeprecatedSynchronousErrorHandling?aP(n):jg(n)}function xF(n){throw n}function ab(n,e){let{onStoppedNotification:t}=Ar;t&&ou.setTimeout(()=>t(n,e))}var wF={closed:!0,next:Sh,error:xF,complete:Sh};var au=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ei(n){return n}function Hg(...n){return lb(n)}function lb(n){return n.length===0?Ei:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=EF(t)?t:new oa(t,i,r);return su(()=>{let{operator:a,source:l}=this;o.add(a?a.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=cP(i),new i((r,o)=>{let a=new oa({next:l=>{try{t(l)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[au](){return this}pipe(...t){return lb(t)(this)}toPromise(t){return t=cP(t),new t((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return n.create=e=>new n(e),n})();function cP(n){var e;return(e=n??Ar.Promise)!==null&&e!==void 0?e:Promise}function CF(n){return n&&Ze(n.next)&&Ze(n.error)&&Ze(n.complete)}function EF(n){return n&&n instanceof Cc||CF(n)&&Ug(n)}function ub(n){return Ze(n?.lift)}function rt(n){return e=>{if(ub(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Je(n,e,t,i,r){return new db(n,e,t,i,r)}var db=class extends Cc{constructor(e,t,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(l){try{t(l)}catch(u){e.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function cu(){return rt((n,e)=>{let t=null;n._refCount++;let i=Je(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var lu=class extends Ae{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ub(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new un;let t=this.getSubject();e.add(this.source.subscribe(Je(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=un.EMPTY)}return e}refCount(){return cu()(this)}};var lP=ru(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Qt=(()=>{class n extends Ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new $g(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new lP}next(t){su(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){su(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){su(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?rb:(this.currentObservers=null,o.push(t),new un(()=>{this.currentObservers=null,xc(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Ae;return t.source=this,t}}return n.create=(e,t)=>new $g(e,t),n})(),$g=class extends Qt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:rb}};var _t=class extends Qt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var hb={now(){return(hb.delegate||Date).now()},delegate:void 0};var Gg=class extends un{constructor(e,t){super()}schedule(e,t=0){return this}};var Mh={setInterval(n,e,...t){let{delegate:i}=Mh;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Mh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var uu=class extends Gg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Mh.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Mh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xc(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var du=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};du.now=hb.now;var hu=class extends du{constructor(e,t=du.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Ph=new hu(uu);var qg=class extends uu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var Wg=class extends hu{};var fb=new Wg(qg);var Li=new Ae(n=>n.complete());function uP(n){return n&&Ze(n.schedule)}function dP(n){return n[n.length-1]}function Kg(n){return Ze(dP(n))?n.pop():void 0}function sa(n){return uP(dP(n))?n.pop():void 0}function Zg(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function fP(n,e,t,i){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(g){try{f(i.next(g))}catch(b){a(b)}}function u(g){try{f(i.throw(g))}catch(b){a(b)}}function f(g){g.done?o(g.value):r(g.value).then(l,u)}f((i=i.apply(n,e||[])).next())})}function hP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ec(n){return this instanceof Ec?(this.v=n,this):new Ec(n)}function pP(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(S){return function(R){return Promise.resolve(R).then(S,b)}}function l(S,R){i[S]&&(r[S]=function(K){return new Promise(function(q,ne){o.push([S,K,q,ne])>1||u(S,K)})},R&&(r[S]=R(r[S])))}function u(S,R){try{f(i[S](R))}catch(K){E(o[0][3],K)}}function f(S){S.value instanceof Ec?Promise.resolve(S.value.v).then(g,b):E(o[0][2],S)}function g(S){u("next",S)}function b(S){u("throw",S)}function E(S,R){S(R),o.shift(),o.length&&u(o[0][0],o[0][1])}}function gP(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof hP=="function"?hP(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(a){return new Promise(function(l,u){a=n[o](a),r(l,u,a.done,a.value)})}}function r(o,a,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},a)}}var Yg=n=>n&&typeof n.length=="number"&&typeof n!="function";function Qg(n){return Ze(n?.then)}function Jg(n){return Ze(n[au])}function Xg(n){return Symbol.asyncIterator&&Ze(n?.[Symbol.asyncIterator])}function em(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function IF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tm=IF();function nm(n){return Ze(n?.[tm])}function im(n){return pP(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Ec(t.read());if(r)return yield Ec(void 0);yield yield Ec(i)}}finally{t.releaseLock()}})}function rm(n){return Ze(n?.getReader)}function Cn(n){if(n instanceof Ae)return n;if(n!=null){if(Jg(n))return SF(n);if(Yg(n))return MF(n);if(Qg(n))return PF(n);if(Xg(n))return mP(n);if(nm(n))return TF(n);if(rm(n))return OF(n)}throw em(n)}function SF(n){return new Ae(e=>{let t=n[au]();if(Ze(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MF(n){return new Ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function PF(n){return new Ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,jg)})}function TF(n){return new Ae(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function mP(n){return new Ae(e=>{DF(n,e).catch(t=>e.error(t))})}function OF(n){return mP(im(n))}function DF(n,e){var t,i,r,o;return fP(this,void 0,void 0,function*(){try{for(t=gP(n);i=yield t.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Fi(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function aa(n,e=0){return rt((t,i)=>{t.subscribe(Je(i,r=>Fi(i,n,()=>i.next(r),e),()=>Fi(i,n,()=>i.complete(),e),r=>Fi(i,n,()=>i.error(r),e)))})}function ca(n,e=0){return rt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function _P(n,e){return Cn(n).pipe(ca(e),aa(e))}function vP(n,e){return Cn(n).pipe(ca(e),aa(e))}function yP(n,e){return new Ae(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function bP(n,e){return new Ae(t=>{let i;return Fi(t,e,()=>{i=n[tm](),Fi(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){t.error(a);return}o?t.complete():t.next(r)},0,!0)}),()=>Ze(i?.return)&&i.return()})}function om(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ae(t=>{Fi(t,e,()=>{let i=n[Symbol.asyncIterator]();Fi(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function xP(n,e){return om(im(n),e)}function wP(n,e){if(n!=null){if(Jg(n))return _P(n,e);if(Yg(n))return yP(n,e);if(Qg(n))return vP(n,e);if(Xg(n))return om(n,e);if(nm(n))return bP(n,e);if(rm(n))return xP(n,e)}throw em(n)}function Rt(n,e){return e?wP(n,e):Cn(n)}function Se(...n){let e=sa(n);return Rt(n,e)}function fu(n,e){let t=Ze(n)?n:()=>n,i=r=>r.error(t());return new Ae(e?r=>e.schedule(i,0,r):i)}function pb(n){return!!n&&(n instanceof Ae||Ze(n.lift)&&Ze(n.subscribe))}var kr=ru(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function la(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new oa({next:a=>{i(a),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new kr)}});n.subscribe(o)})}function ue(n,e){return rt((t,i)=>{let r=0;t.subscribe(Je(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:AF}=Array;function kF(n,e){return AF(e)?n(...e):n(e)}function sm(n){return ue(e=>kF(n,e))}var{isArray:RF}=Array,{getPrototypeOf:NF,prototype:LF,keys:FF}=Object;function am(n){if(n.length===1){let e=n[0];if(RF(e))return{args:e,keys:null};if(VF(e)){let t=FF(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function VF(n){return n&&typeof n=="object"&&NF(n)===LF}function cm(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Ii(...n){let e=sa(n),t=Kg(n),{args:i,keys:r}=am(n);if(i.length===0)return Rt([],e);let o=new Ae(BF(i,e,r?a=>cm(r,a):Ei));return t?o.pipe(sm(t)):o}function BF(n,e,t=Ei){return i=>{CP(e,()=>{let{length:r}=n,o=new Array(r),a=r,l=r;for(let u=0;u<r;u++)CP(e,()=>{let f=Rt(n[u],e),g=!1;f.subscribe(Je(i,b=>{o[u]=b,g||(g=!0,l--),l||i.next(t(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function CP(n,e,t){n?Fi(t,n,e):e()}function EP(n,e,t,i,r,o,a,l){let u=[],f=0,g=0,b=!1,E=()=>{b&&!u.length&&!f&&e.complete()},S=K=>f<i?R(K):u.push(K),R=K=>{o&&e.next(K),f++;let q=!1;Cn(t(K,g++)).subscribe(Je(e,ne=>{r?.(ne),o?S(ne):e.next(ne)},()=>{q=!0},void 0,()=>{if(q)try{for(f--;u.length&&f<i;){let ne=u.shift();a?Fi(e,a,()=>R(ne)):R(ne)}E()}catch(ne){e.error(ne)}}))};return n.subscribe(Je(e,S,()=>{b=!0,E()})),()=>{l?.()}}function _n(n,e,t=1/0){return Ze(e)?_n((i,r)=>ue((o,a)=>e(i,o,r,a))(Cn(n(i,r))),t):(typeof e=="number"&&(t=e),rt((i,r)=>EP(i,r,n,t)))}function ua(n=1/0){return _n(Ei,n)}function IP(){return ua(1)}function pu(...n){return IP()(Rt(n,sa(n)))}function Th(n){return new Ae(e=>{Cn(n()).subscribe(e)})}function gb(...n){let e=Kg(n),{args:t,keys:i}=am(n),r=new Ae(o=>{let{length:a}=t;if(!a){o.complete();return}let l=new Array(a),u=a,f=a;for(let g=0;g<a;g++){let b=!1;Cn(t[g]).subscribe(Je(o,E=>{b||(b=!0,f--),l[g]=E},()=>u--,void 0,()=>{(!u||!b)&&(f||o.next(i?cm(i,l):l),o.complete())}))}});return e?r.pipe(sm(e)):r}function Si(n,e){return rt((t,i)=>{let r=0;t.subscribe(Je(i,o=>n.call(e,o,r++)&&i.next(o)))})}function as(n){return rt((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Je(t,void 0,void 0,a=>{o=Cn(n(a,as(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function SP(n,e,t,i,r){return(o,a)=>{let l=t,u=e,f=0;o.subscribe(Je(a,g=>{let b=f++;u=l?n(u,g,b):(l=!0,g),i&&a.next(u)},r&&(()=>{l&&a.next(u),a.complete()})))}}function da(n,e){return Ze(e)?_n(n,e,1):_n(n,1)}function Oh(n,e=Ph){return rt((t,i)=>{let r=null,o=null,a=null,l=()=>{if(r){r.unsubscribe(),r=null;let f=o;o=null,i.next(f)}};function u(){let f=a+n,g=e.now();if(g<f){r=this.schedule(void 0,f-g),i.add(r);return}l()}t.subscribe(Je(i,f=>{o=f,a=e.now(),r||(r=e.schedule(u,n),i.add(r))},()=>{l(),i.complete()},void 0,()=>{o=r=null}))})}function ha(n){return rt((e,t)=>{let i=!1;e.subscribe(Je(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function qn(n){return n<=0?()=>Li:rt((e,t)=>{let i=0;e.subscribe(Je(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function lm(n,e=Ei){return n=n??UF,rt((t,i)=>{let r,o=!0;t.subscribe(Je(i,a=>{let l=e(a);(o||!n(r,l))&&(o=!1,r=l,i.next(a))}))})}function UF(n,e){return n===e}function um(n=jF){return rt((e,t)=>{let i=!1;e.subscribe(Je(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function jF(){return new kr}function Dh(n){return rt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function cs(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Si((r,o)=>n(r,o,i)):Ei,qn(1),t?ha(e):um(()=>new kr))}function gu(n){return n<=0?()=>Li:rt((e,t)=>{let i=[];e.subscribe(Je(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function mb(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Si((r,o)=>n(r,o,i)):Ei,gu(1),t?ha(e):um(()=>new kr))}function dm(n,e){return rt(SP(n,e,arguments.length>=2,!0))}function Vi(...n){let e=sa(n);return rt((t,i)=>{(e?pu(n,t,e):pu(n,t)).subscribe(i)})}function ni(n,e){return rt((t,i)=>{let r=null,o=0,a=!1,l=()=>a&&!r&&i.complete();t.subscribe(Je(i,u=>{r?.unsubscribe();let f=0,g=o++;Cn(n(u,g)).subscribe(r=Je(i,b=>i.next(e?e(u,b,g,f++):b),()=>{r=null,l()}))},()=>{a=!0,l()}))})}function mu(n){return rt((e,t)=>{Cn(n).subscribe(Je(t,()=>t.complete(),Sh)),!t.closed&&e.subscribe(t)})}function Wn(n,e,t){let i=Ze(n)||e||t?{next:n,error:e,complete:t}:n;return i?rt((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let l=!0;r.subscribe(Je(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;l=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;l=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;l&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Ei}function MP(n){let e=He(null);try{return n()}finally{He(e)}}var fa=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Tb=new fa("20.3.14");var gm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",le=class extends Error{code;constructor(e,t){super(ma(e,t)),this.code=e}};function zF(n){return`NG0${Math.abs(n)}`}function ma(n,e){return`${zF(n)}${e?": "+e:""}`}var Nr=globalThis;function Tt(n){for(let e in n)if(n[e]===Tt)return e;throw Error("")}function OP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function us(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(us).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function mm(n,e){return n?e?`${n} ${e}`:n:e||""}var HF=Tt({__forward_ref__:Tt});function fr(n){return n.__forward_ref__=fr,n.toString=function(){return us(this())},n}function ii(n){return Ob(n)?n():n}function Ob(n){return typeof n=="function"&&n.hasOwnProperty(HF)&&n.__forward_ref__===fr}function he(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Lr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nh(n){return $F(n,_m)}function Db(n){return Nh(n)!==null}function $F(n,e){return n.hasOwnProperty(e)&&n[e]||null}function GF(n){let e=n?.[_m]??null;return e||null}function vb(n){return n&&n.hasOwnProperty(fm)?n[fm]:null}var _m=Tt({\u0275prov:Tt}),fm=Tt({\u0275inj:Tt}),ye=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=he({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ab(n){return n&&!!n.\u0275providers}var kb=Tt({\u0275cmp:Tt}),Rb=Tt({\u0275dir:Tt}),Nb=Tt({\u0275pipe:Tt}),Lb=Tt({\u0275mod:Tt}),kh=Tt({\u0275fac:Tt}),Tc=Tt({__NG_ELEMENT_ID__:Tt}),PP=Tt({__NG_ENV_ID__:Tt});function hs(n){return typeof n=="string"?n:n==null?"":String(n)}function DP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():hs(n)}var AP=Tt({ngErrorCode:Tt}),qF=Tt({ngErrorMessage:Tt}),WF=Tt({ngTokenPath:Tt});function Fb(n,e){return kP("",-200,e)}function vm(n,e){throw new le(-201,!1)}function kP(n,e,t){let i=new le(e,n);return i[AP]=e,i[qF]=n,t&&(i[WF]=t),i}function KF(n){return n[AP]}var yb;function RP(){return yb}function Mi(n){let e=yb;return yb=n,e}function Vb(n,e,t){let i=Nh(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;vm(n,"Injector")}var ZF={},Ic=ZF,bb="__NG_DI_FLAG__",xb=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=Sc(t)||0;try{return this.injector.get(e,i&8?null:Ic,i)}catch(r){if(Jl(r))return r;throw r}}};function YF(n,e=0){let t=Pg();if(t===void 0)throw new le(-203,!1);if(t===null)return Vb(n,void 0,e);{let i=QF(e),r=t.retrieve(n,i);if(Jl(r)){if(i.optional)return null;throw r}return r}}function Be(n,e=0){return(RP()||YF)(ii(n),e)}function F(n,e){return Be(n,Sc(e))}function Sc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function QF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function wb(n){let e=[];for(let t=0;t<n.length;t++){let i=ii(n[t]);if(Array.isArray(i)){if(i.length===0)throw new le(900,!1);let r,o=0;for(let a=0;a<i.length;a++){let l=i[a],u=JF(l);typeof u=="number"?u===-1?r=l.token:o|=u:r=l}e.push(Be(r,o))}else e.push(Be(i))}return e}function NP(n,e){return n[bb]=e,n.prototype[bb]=e,n}function JF(n){return n[bb]}function pa(n,e){let t=n.hasOwnProperty(kh);return t?n[kh]:null}function LP(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function FP(n){return n.flat(Number.POSITIVE_INFINITY)}function ym(n,e){n.forEach(t=>Array.isArray(t)?ym(t,e):e(t))}function Bb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Lh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function VP(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function bm(n,e,t){let i=vu(n,e);return i>=0?n[i|1]=t:(i=~i,VP(n,i,e,t)),i}function xm(n,e){let t=vu(n,e);if(t>=0)return n[t|1]}function vu(n,e){return XF(n,e,1)}function XF(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),a=n[o<<t];if(e===a)return o<<t;a>e?r=o:i=o+1}return~(r<<t)}var _a={},Pi=[],va=new ye(""),Ub=new ye("",-1),jb=new ye(""),Rh=class{get(e,t=Ic){if(t===Ic){let r=kP("",-201);throw r.name="\u0275NotFound",r}return t}};function zb(n){return n[Lb]||null}function fs(n){return n[kb]||null}function Hb(n){return n[Rb]||null}function BP(n){return n[Nb]||null}function Ji(n){return{\u0275providers:n}}function UP(...n){return{\u0275providers:$b(!0,n),\u0275fromNgModule:!0}}function $b(n,...e){let t=[],i=new Set,r,o=a=>{t.push(a)};return ym(e,a=>{let l=a;pm(l,o,[],i)&&(r||=[],r.push(l))}),r!==void 0&&jP(r,o),t}function jP(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];Gb(r,o=>{e(o,i)})}}function pm(n,e,t,i){if(n=ii(n),!n)return!1;let r=null,o=vb(n),a=!o&&fs(n);if(!o&&!a){let u=n.ngModule;if(o=vb(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=n}let l=i.has(r);if(a){if(l)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)pm(f,e,t,i)}}else if(o){if(o.imports!=null&&!l){i.add(r);let f;try{ym(o.imports,g=>{pm(g,e,t,i)&&(f||=[],f.push(g))})}finally{}f!==void 0&&jP(f,e)}if(!l){let f=pa(r)||(()=>new r);e({provide:r,useFactory:f,deps:Pi},r),e({provide:jb,useValue:r,multi:!0},r),e({provide:va,useValue:()=>Be(r),multi:!0},r)}let u=o.providers;if(u!=null&&!l){let f=n;Gb(u,g=>{e(g,f)})}}else return!1;return r!==n&&n.providers!==void 0}function Gb(n,e){for(let t of n)Ab(t)&&(t=t.\u0275providers),Array.isArray(t)?Gb(t,e):e(t)}var e5=Tt({provide:String,useValue:Tt});function zP(n){return n!==null&&typeof n=="object"&&e5 in n}function t5(n){return!!(n&&n.useExisting)}function n5(n){return!!(n&&n.useFactory)}function Mc(n){return typeof n=="function"}function HP(n){return!!n.useClass}var Fh=new ye(""),hm={},TP={},_b;function Vh(){return _b===void 0&&(_b=new Rh),_b}var vn=class{},Pc=class extends vn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,Eb(e,a=>this.processProvider(a)),this.records.set(Ub,_u(void 0,this)),r.has("environment")&&this.records.set(vn,_u(void 0,this));let o=this.records.get(Fh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(jb,Pi,{self:!0}))}retrieve(e,t){let i=Sc(t)||0;try{return this.get(e,Ic,i)}catch(r){if(Jl(r))return r;throw r}}destroy(){Ah(this),this._destroyed=!0;let e=He(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(e)}}onDestroy(e){return Ah(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ah(this);let t=go(this),i=Mi(void 0),r;try{return e()}finally{go(t),Mi(i)}}get(e,t=Ic,i){if(Ah(this),e.hasOwnProperty(PP))return e[PP](this);let r=Sc(i),o,a=go(this),l=Mi(void 0);try{if(!(r&4)){let f=this.records.get(e);if(f===void 0){let g=a5(e)&&Nh(e);g&&this.injectableDefInScope(g)?f=_u(Cb(e),hm):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f,r)}let u=r&2?Vh():this.parent;return t=r&8&&t===Ic?null:t,u.get(e,t)}catch(u){let f=KF(u);throw f===-200||f===-201?new le(f,null):u}finally{Mi(l),go(a)}}resolveInjectorInitializers(){let e=He(null),t=go(this),i=Mi(void 0),r;try{let o=this.get(va,Pi,{self:!0});for(let a of o)a()}finally{go(t),Mi(i),He(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(us(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ii(e);let t=Mc(e)?e:ii(e&&e.provide),i=r5(e);if(!Mc(e)&&e.multi===!0){let r=this.records.get(t);r||(r=_u(void 0,hm,!0),r.factory=()=>wb(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=He(null);try{if(t.value===TP)throw Fb(us(e));return t.value===hm&&(t.value=TP,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&s5(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{He(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ii(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Cb(n){let e=Nh(n),t=e!==null?e.factory:pa(n);if(t!==null)return t;if(n instanceof ye)throw new le(204,!1);if(n instanceof Function)return i5(n);throw new le(204,!1)}function i5(n){if(n.length>0)throw new le(204,!1);let t=GF(n);return t!==null?()=>t.factory(n):()=>new n}function r5(n){if(zP(n))return _u(void 0,n.useValue);{let e=qb(n);return _u(e,hm)}}function qb(n,e,t){let i;if(Mc(n)){let r=ii(n);return pa(r)||Cb(r)}else if(zP(n))i=()=>ii(n.useValue);else if(n5(n))i=()=>n.useFactory(...wb(n.deps||[]));else if(t5(n))i=(r,o)=>Be(ii(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=ii(n&&(n.useClass||n.provide));if(o5(n))i=()=>new r(...wb(n.deps));else return pa(r)||Cb(r)}return i}function Ah(n){if(n.destroyed)throw new le(205,!1)}function _u(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function o5(n){return!!n.deps}function s5(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function a5(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Eb(n,e){for(let t of n)Array.isArray(t)?Eb(t,e):t&&Ab(t)?Eb(t.\u0275providers,e):e(t)}function En(n,e){let t;n instanceof Pc?(Ah(n),t=n):t=new xb(n);let i,r=go(t),o=Mi(void 0);try{return e()}finally{go(r),Mi(o)}}function $P(){return RP()!==void 0||Pg()!=null}var Fr=0,Pe=1,$e=2,Bn=3,pr=4,gr=5,yu=6,bu=7,yn=8,ps=9,mo=10,Vt=11,xu=12,Wb=13,Oc=14,Xi=15,ya=16,Dc=17,_o=18,Bh=19,Kb=20,ls=21,wm=22,Uh=23,er=24,Ac=25,kc=26,sn=27,GP=1,Zb=6,ba=7,jh=8,Rc=9,dn=10;function vo(n){return Array.isArray(n)&&typeof n[GP]=="object"}function Vr(n){return Array.isArray(n)&&n[GP]===!0}function Yb(n){return(n.flags&4)!==0}function xa(n){return n.componentOffset>-1}function wu(n){return(n.flags&1)===1}function yo(n){return!!n.template}function Cu(n){return(n[$e]&512)!==0}function Nc(n){return(n[$e]&256)===256}var Qb="svg",qP="math";function mr(n){for(;Array.isArray(n);)n=n[Fr];return n}function Jb(n,e){return mr(e[n])}function Br(n,e){return mr(e[n.index])}function zh(n,e){return n.data[e]}function Cm(n,e){return n[e]}function Xb(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function _r(n,e){let t=e[n];return vo(t)?t:t[Fr]}function WP(n){return(n[$e]&4)===4}function Em(n){return(n[$e]&128)===128}function KP(n){return Vr(n[Bn])}function vr(n,e){return e==null?null:n[e]}function e1(n){n[Dc]=0}function t1(n){n[$e]&1024||(n[$e]|=1024,Em(n)&&Eu(n))}function ZP(n,e){for(;n>0;)e=e[Oc],n--;return e}function Hh(n){return!!(n[$e]&9216||n[er]?.dirty)}function Im(n){n[mo].changeDetectionScheduler?.notify(8),n[$e]&64&&(n[$e]|=1024),Hh(n)&&Eu(n)}function Eu(n){n[mo].changeDetectionScheduler?.notify(0);let e=ga(n);for(;e!==null&&!(e[$e]&8192||(e[$e]|=8192,!Em(e)));)e=ga(e)}function n1(n,e){if(Nc(n))throw new le(911,!1);n[ls]===null&&(n[ls]=[]),n[ls].push(e)}function YP(n,e){if(n[ls]===null)return;let t=n[ls].indexOf(e);t!==-1&&n[ls].splice(t,1)}function ga(n){let e=n[Bn];return Vr(e)?e[Bn]:e}function i1(n){return n[bu]??=[]}function r1(n){return n.cleanup??=[]}function QP(n,e,t,i){let r=i1(e);r.push(t),n.firstCreatePass&&r1(n).push(i,r.length-1)}var Qe={lFrame:dT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ib=!1;function JP(){return Qe.lFrame.elementDepthCount}function XP(){Qe.lFrame.elementDepthCount++}function o1(){Qe.lFrame.elementDepthCount--}function Sm(){return Qe.bindingsEnabled}function eT(){return Qe.skipHydrationRootTNode!==null}function s1(n){return Qe.skipHydrationRootTNode===n}function a1(){Qe.skipHydrationRootTNode=null}function Le(){return Qe.lFrame.lView}function Xt(){return Qe.lFrame.tView}function j(n){return Qe.lFrame.contextLView=n,n[yn]}function z(n){return Qe.lFrame.contextLView=null,n}function In(){let n=c1();for(;n!==null&&n.type===64;)n=n.parent;return n}function c1(){return Qe.lFrame.currentTNode}function tT(){let n=Qe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Iu(n,e){let t=Qe.lFrame;t.currentTNode=n,t.isParent=e}function l1(){return Qe.lFrame.isParent}function nT(){Qe.lFrame.isParent=!1}function iT(){return Qe.lFrame.contextLView}function u1(){return Ib}function d1(n){let e=Ib;return Ib=n,e}function $h(){let n=Qe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function rT(){return Qe.lFrame.bindingIndex}function oT(n){return Qe.lFrame.bindingIndex=n}function gs(){return Qe.lFrame.bindingIndex++}function Mm(n){let e=Qe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function sT(){return Qe.lFrame.inI18n}function aT(n,e){let t=Qe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Pm(e)}function cT(){return Qe.lFrame.currentDirectiveIndex}function Pm(n){Qe.lFrame.currentDirectiveIndex=n}function lT(n){let e=Qe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function h1(){return Qe.lFrame.currentQueryIndex}function Tm(n){Qe.lFrame.currentQueryIndex=n}function c5(n){let e=n[Pe];return e.type===2?e.declTNode:e.type===1?n[gr]:null}function f1(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=c5(o),r===null||(o=o[Oc],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Qe.lFrame=uT();return i.currentTNode=e,i.lView=n,!0}function Om(n){let e=uT(),t=n[Pe];Qe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function uT(){let n=Qe.lFrame,e=n===null?null:n.child;return e===null?dT(n):e}function dT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function hT(){let n=Qe.lFrame;return Qe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var p1=hT;function Dm(){let n=hT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fT(n){return(Qe.lFrame.contextLView=ZP(n,Qe.lFrame.contextLView))[yn]}function bo(){return Qe.lFrame.selectedIndex}function wa(n){Qe.lFrame.selectedIndex=n}function Gh(){let n=Qe.lFrame;return zh(n.tView,n.selectedIndex)}function ie(){Qe.lFrame.currentNamespace=Qb}function pe(){l5()}function l5(){Qe.lFrame.currentNamespace=null}function pT(){return Qe.lFrame.currentNamespace}var gT=!0;function Am(){return gT}function qh(n){gT=n}function Sb(n,e=null,t=null,i){let r=g1(n,e,t,i);return r.resolveInjectorInitializers(),r}function g1(n,e=null,t=null,i,r=new Set){let o=[t||Pi,UP(n)];return i=i||(typeof n=="object"?void 0:us(n)),new Pc(o,e||Vh(),i||null,r)}var Jt=class n{static THROW_IF_NOT_FOUND=Ic;static NULL=new Rh;static create(e,t){if(Array.isArray(e))return Sb({name:""},t,e,"");{let i=e.name??"";return Sb({name:i},e.parent,e.providers,i)}}static \u0275prov=he({token:n,providedIn:"any",factory:()=>Be(Ub)});static __NG_ELEMENT_ID__=-1},Sn=new ye(""),Ur=(()=>{class n{static __NG_ELEMENT_ID__=u5;static __NG_ENV_ID__=t=>t}return n})(),Mb=class extends Ur{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Nc(this._lView)}onDestroy(e){let t=this._lView;return n1(t,e),()=>YP(t,e)}};function u5(){return new Mb(Le())}var Rr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ti=new ye("",{providedIn:"root",factory:()=>{let n=F(vn),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Rr),e.handleError(t))}}}),mT={provide:va,useValue:()=>void F(Rr),multi:!0};function m1(n){return typeof n=="function"&&n[di]!==void 0}function Bt(n,e){let[t,i,r]=nb(n,e?.equal),o=t,a=o[di];return o.set=i,o.update=r,o.asReadonly=_T.bind(o),o}function _T(){let n=this[di];if(n.readonlyFn===void 0){let e=()=>this();e[di]=n,n.readonlyFn=e}return n.readonlyFn}function _1(n){return m1(n)&&typeof n.set=="function"}var km=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=d5}return n})();function d5(){return new km(Le(),In())}var ds=class{},Rm=new ye("",{providedIn:"root",factory:()=>!1});var v1=new ye(""),y1=new ye(""),xo=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new _t(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ae(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),Su=(()=>{class n{internalPendingTasks=F(xo);scheduler=F(ds);errorHandler=F(Ti);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})();function Wh(...n){}var b1=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>new Pb})}return n})(),Pb=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function Au(n){return{toString:n}.toString()}var Nm="__parameters__";function _5(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function v5(n,e,t){return Au(()=>{let i=_5(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return l.annotation=a,l;function l(u,f,g){let b=u.hasOwnProperty(Nm)?u[Nm]:Object.defineProperty(u,Nm,{value:[]})[Nm];for(;b.length<=g;)b.push(null);return(b[g]=b[g]||[]).push(a),u}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Kn=NP(v5("Optional"),8);function y5(n){return typeof n=="function"}var qm=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function XT(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var Eo=(()=>{let n=()=>e2;return n.ngInherit=!0,n})();function e2(n){return n.type.prototype.ngOnChanges&&(n.setInput=x5),b5}function b5(){let n=n2(this),e=n?.current;if(e){let t=n.previous;if(t===_a)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function x5(n,e,t,i,r){let o=this.declaredInputs[i],a=n2(n)||w5(n,{previous:_a,current:null}),l=a.current||(a.current={}),u=a.previous,f=u[o];l[o]=new qm(f&&f.currentValue,t,u===_a),XT(n,e,r,t)}var t2="__ngSimpleChanges__";function n2(n){return n[t2]||null}function w5(n,e){return n[t2]=e}var vT=[];var Nt=function(n,e=null,t){for(let i=0;i<vT.length;i++){let r=vT[i];r(n,e,t)}};function C5(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=e2(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function i2(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:g}=o;a&&(n.contentHooks??=[]).push(-t,a),l&&((n.contentHooks??=[]).push(t,l),(n.contentCheckHooks??=[]).push(t,l)),u&&(n.viewHooks??=[]).push(-t,u),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),g!=null&&(n.destroyHooks??=[]).push(t,g)}}function jm(n,e,t){r2(n,e,3,t)}function zm(n,e,t,i){(n[$e]&3)===t&&r2(n,e,t,i)}function x1(n,e){let t=n[$e];(t&3)===e&&(t&=16383,t+=1,n[$e]=t)}function r2(n,e,t,i){let r=i!==void 0?n[Dc]&65535:0,o=i??-1,a=e.length-1,l=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(l=e[u],i!=null&&l>=i)break}else e[u]<0&&(n[Dc]+=65536),(l<o||o==-1)&&(E5(n,t,e,u),n[Dc]=(n[Dc]&4294901760)+u+2),u++}function yT(n,e){Nt(4,n,e);let t=He(null);try{e.call(n)}finally{He(t),Nt(5,n,e)}}function E5(n,e,t,i){let r=t[i]<0,o=t[i+1],a=r?-t[i]:t[i],l=n[a];r?n[$e]>>14<n[Dc]>>16&&(n[$e]&3)===e&&(n[$e]+=16384,yT(l,o)):yT(l,o)}var Pu=-1,Fc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function I5(n){return(n.flags&8)!==0}function S5(n){return(n.flags&16)!==0}function M5(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],a=t[i++],l=t[i++];n.setAttribute(e,a,l,o)}else{let o=r,a=t[++i];P5(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),i++}}return i}function o2(n){return n===3||n===4||n===6}function P5(n){return n.charCodeAt(0)===64}function Tu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?bT(n,t,r,null,e[++i]):bT(n,t,r,null,null))}}return n}function bT(n,e,t,i,r){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let l=n[o++];if(typeof l=="number"){if(l===e){a=-1;break}else if(l>e){a=o-1;break}}}for(;o<n.length;){let l=n[o];if(typeof l=="number")break;if(l===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function s2(n){return n!==Pu}function Wm(n){return n&32767}function T5(n){return n>>16}function Km(n,e){let t=T5(n),i=e;for(;t>0;)i=i[Oc],t--;return i}var A1=!0;function Zm(n){let e=A1;return A1=n,e}var O5=256,a2=O5-1,c2=5,D5=0,wo={};function A5(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Tc)&&(i=t[Tc]),i==null&&(i=t[Tc]=D5++);let r=i&a2,o=1<<r;e.data[n+(r>>c2)]|=o}function Ym(n,e){let t=l2(n,e);if(t!==-1)return t;let i=e[Pe];i.firstCreatePass&&(n.injectorIndex=e.length,w1(i.data,n),w1(e,null),w1(i.blueprint,null));let r=hx(n,e),o=n.injectorIndex;if(s2(r)){let a=Wm(r),l=Km(r,e),u=l[Pe].data;for(let f=0;f<8;f++)e[o+f]=l[a+f]|u[a+f]}return e[o+8]=r,o}function w1(n,e){n.push(0,0,0,0,0,0,0,0,e)}function l2(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function hx(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=p2(r),i===null)return Pu;if(t++,r=r[Oc],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Pu}function k1(n,e,t){A5(n,e,t)}function k5(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(o2(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function u2(n,e,t){if(t&8||n!==void 0)return n;vm(e,"NodeInjector")}function d2(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[ps],o=Mi(void 0);try{return r?r.get(e,i,t&8):Vb(e,i,t&8)}finally{Mi(o)}}return u2(i,e,t)}function h2(n,e,t,i=0,r){if(n!==null){if(e[$e]&2048&&!(i&2)){let a=F5(n,e,t,i,wo);if(a!==wo)return a}let o=f2(n,e,t,i,wo);if(o!==wo)return o}return d2(e,t,i,r)}function f2(n,e,t,i,r){let o=N5(t);if(typeof o=="function"){if(!f1(e,n,i))return i&1?u2(r,t,i):d2(e,t,i,r);try{let a;if(a=o(i),a==null&&!(i&8))vm(t);else return a}finally{p1()}}else if(typeof o=="number"){let a=null,l=l2(n,e),u=Pu,f=i&1?e[Xi][gr]:null;for((l===-1||i&4)&&(u=l===-1?hx(n,e):e[l+8],u===Pu||!wT(i,!1)?l=-1:(a=e[Pe],l=Wm(u),e=Km(u,e)));l!==-1;){let g=e[Pe];if(xT(o,l,g.data)){let b=R5(l,e,t,a,i,f);if(b!==wo)return b}u=e[l+8],u!==Pu&&wT(i,e[Pe].data[l+8]===f)&&xT(o,l,e)?(a=g,l=Wm(u),e=Km(u,e)):l=-1}}return r}function R5(n,e,t,i,r,o){let a=e[Pe],l=a.data[n+8],u=i==null?xa(l)&&A1:i!=a&&(l.type&3)!==0,f=r&1&&o===l,g=Hm(l,a,t,u,f);return g!==null?Yh(e,a,g,l,r):wo}function Hm(n,e,t,i,r){let o=n.providerIndexes,a=e.data,l=o&1048575,u=n.directiveStart,f=n.directiveEnd,g=o>>20,b=i?l:l+g,E=r?l+g:f;for(let S=b;S<E;S++){let R=a[S];if(S<u&&t===R||S>=u&&R.type===t)return S}if(r){let S=a[u];if(S&&yo(S)&&S.type===t)return u}return null}function Yh(n,e,t,i,r){let o=n[t],a=e.data;if(o instanceof Fc){let l=o;if(l.resolving){let S=DP(a[t]);throw Fb(S)}let u=Zm(l.canSeeViewProviders);l.resolving=!0;let f=a[t].type||a[t],g,b=l.injectImpl?Mi(l.injectImpl):null,E=f1(n,i,0);try{o=n[t]=l.factory(void 0,r,a,n,i),e.firstCreatePass&&t>=i.directiveStart&&C5(t,a[t],e)}finally{b!==null&&Mi(b),Zm(u),l.resolving=!1,p1()}}return o}function N5(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Tc)?n[Tc]:void 0;return typeof e=="number"?e>=0?e&a2:L5:e}function xT(n,e,t){let i=1<<n;return!!(t[e+(n>>c2)]&i)}function wT(n,e){return!(n&2)&&!(n&1&&e)}var Lc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return h2(this._tNode,this._lView,e,Sc(i),t)}};function L5(){return new Lc(In(),Le())}function Io(n){return Au(()=>{let e=n.prototype.constructor,t=e[kh]||R1(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[kh]||R1(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function R1(n){return Ob(n)?()=>{let e=R1(ii(n));return e&&e()}:pa(n)}function F5(n,e,t,i,r){let o=n,a=e;for(;o!==null&&a!==null&&a[$e]&2048&&!Cu(a);){let l=f2(o,a,t,i|2,wo);if(l!==wo)return l;let u=o.parent;if(!u){let f=a[Kb];if(f){let g=f.get(t,wo,i);if(g!==wo)return g}u=p2(a),a=a[Oc]}o=u}return r}function p2(n){let e=n[Pe],t=e.type;return t===2?e.declTNode:t===1?n[gr]:null}function nf(n){return k5(In(),n)}function V5(){return ku(In(),Le())}function ku(n,e){return new hi(Br(n,e))}var hi=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=V5}return n})();function B5(n){return n instanceof hi?n.nativeElement:n}function U5(){return this._results[Symbol.iterator]()}var Qm=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Qt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=FP(e);(this._changesDetected=!LP(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=U5};function g2(n){return(n.flags&128)===128}var fx=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(fx||{}),m2=new Map,j5=0;function z5(){return j5++}function H5(n){m2.set(n[Bh],n)}function N1(n){m2.delete(n[Bh])}var CT="__ngContext__";function Ou(n,e){vo(e)?(n[CT]=e[Bh],H5(e)):n[CT]=e}function _2(n){return y2(n[xu])}function v2(n){return y2(n[pr])}function y2(n){for(;n!==null&&!Vr(n);)n=n[pr];return n}var L1;function px(n){L1=n}function gx(){if(L1!==void 0)return L1;if(typeof document<"u")return document;throw new le(210,!1)}var p_=new ye("",{providedIn:"root",factory:()=>$5}),$5="ng",g_=new ye(""),_s=new ye("",{providedIn:"platform",factory:()=>"unknown"});var m_=new ye("",{providedIn:"root",factory:()=>gx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var G5="h",q5="b";var b2="r";var x2="di";var w2=!1,C2=new ye("",{providedIn:"root",factory:()=>w2});var mx=new ye("");var W5=(n,e,t,i)=>{};function K5(n,e,t,i){W5(n,e,t,i)}function _x(n){return(n.flags&32)===32}var Z5=()=>null;function E2(n,e,t=!1){return Z5(n,e,t)}function I2(n,e){let t=n.contentQueries;if(t!==null){let i=He(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],a=t[r+1];if(a!==-1){let l=n.data[a];Tm(o),l.contentQueries(2,e[a],a)}}}finally{He(i)}}}function F1(n,e,t){Tm(0);let i=He(null);try{e(n,t)}finally{He(i)}}function vx(n,e,t){if(Yb(e)){let i=He(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let l=n.data[a];if(l.contentQueries){let u=t[a];l.contentQueries(1,u,a)}}}finally{He(i)}}}var ms=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(ms||{}),Lm;function Y5(){if(Lm===void 0&&(Lm=null,Nr.trustedTypes))try{Lm=Nr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Lm}function __(n){return Y5()?.createHTML(n)||n}var Fm;function S2(){if(Fm===void 0&&(Fm=null,Nr.trustedTypes))try{Fm=Nr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Fm}function ET(n){return S2()?.createHTML(n)||n}function IT(n){return S2()?.createScriptURL(n)||n}var Jm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gm})`}};function Hc(n){return n instanceof Jm?n.changingThisBreaksApplicationSecurity:n}function v_(n,e){let t=M2(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gm})`)}return t===e}function M2(n){return n instanceof Jm&&n.getTypeName()||null}function Q5(n){let e=new B1(n);return J5()?new V1(e):e}var V1=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(__(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},B1=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=__(e),t}};function J5(){try{return!!new window.DOMParser().parseFromString(__(""),"text/html")}catch{return!1}}var X5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yx(n){return n=String(n),n.match(X5)?n:"unsafe:"+n}function vs(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function rf(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var P2=vs("area,br,col,hr,img,wbr"),T2=vs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),O2=vs("rp,rt"),e6=rf(O2,T2),t6=rf(T2,vs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),n6=rf(O2,vs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ST=rf(P2,t6,n6,e6),D2=vs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),i6=vs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),r6=vs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),o6=rf(D2,i6,r6),s6=vs("script,style,template"),U1=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=l6(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=c6(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=MT(e).toLowerCase();if(!ST.hasOwnProperty(t))return this.sanitizedSomething=!0,!s6.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),a=o.name,l=a.toLowerCase();if(!o6.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let u=o.value;D2[l]&&(u=yx(u)),this.buf.push(" ",a,'="',PT(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=MT(e).toLowerCase();ST.hasOwnProperty(t)&&!P2.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(PT(e))}};function a6(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function c6(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw A2(e);return e}function l6(n){let e=n.firstChild;if(e&&a6(n,e))throw A2(e);return e}function MT(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function A2(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var u6=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d6=/([^\#-~ |!])/g;function PT(n){return n.replace(/&/g,"&amp;").replace(u6,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(d6,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Vm;function k2(n,e){let t=null;try{Vm=Vm||Q5(n);let i=e?String(e):"";t=Vm.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=Vm.getInertBodyElement(i)}while(i!==o);let l=new U1().sanitizeChildren(TT(t)||t);return __(l)}finally{if(t){let i=TT(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function TT(n){return"content"in n&&h6(n)?n.content:null}function h6(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var of=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(of||{});function y_(n){let e=xx();return e?ET(e.sanitize(of.HTML,n)||""):v_(n,"HTML")?ET(Hc(n)):k2(gx(),hs(n))}function Kt(n){let e=xx();return e?e.sanitize(of.URL,n)||"":v_(n,"URL")?Hc(n):yx(hs(n))}function R2(n){let e=xx();if(e)return IT(e.sanitize(of.RESOURCE_URL,n)||"");if(v_(n,"ResourceURL"))return IT(Hc(n));throw new le(904,!1)}function f6(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?R2:Kt}function bx(n,e,t){return f6(e,t)(n)}function xx(){let n=Le();return n&&n[mo].sanitizer}var p6=/^>|^->|<!--|-->|--!>|<!-$/g,g6=/(<|>)/g,m6="\u200B$1\u200B";function _6(n){return n.replace(p6,e=>e.replace(g6,m6))}function N2(n){return n instanceof Function?n():n}function v6(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var L2="ng-template";function y6(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&v6(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(wx(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function wx(n){return n.type===4&&n.value!==L2}function b6(n,e,t){let i=n.type===4&&!t?L2:n.value;return e===i}function x6(n,e,t){let i=4,r=n.attrs,o=r!==null?E6(r):0,a=!1;for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="number"){if(!a&&!jr(i)&&!jr(u))return!1;if(a&&jr(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!b6(n,u,t)||u===""&&e.length===1){if(jr(i))return!1;a=!0}}else if(i&8){if(r===null||!y6(n,r,u,t)){if(jr(i))return!1;a=!0}}else{let f=e[++l],g=w6(u,r,wx(n),t);if(g===-1){if(jr(i))return!1;a=!0;continue}if(f!==""){let b;if(g>o?b="":b=r[g+1].toLowerCase(),i&2&&f!==b){if(jr(i))return!1;a=!0}}}}return jr(i)||a}function jr(n){return(n&1)===0}function w6(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let a=e[r];if(a===n)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return I6(e,n)}function C6(n,e,t=!1){for(let i=0;i<e.length;i++)if(x6(n,e[i],t))return!0;return!1}function E6(n){for(let e=0;e<n.length;e++){let t=n[e];if(o2(t))return e}return n.length}function I6(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function OT(n,e){return n?":not("+e.trim()+")":e}function S6(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(i&2){let l=n[++t];r+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!jr(a)&&(e+=OT(o,r),r=""),i=a,o=o||!jr(i);t++}return r!==""&&(e+=OT(o,r)),e}function M6(n){return n.map(S6).join(",")}function P6(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!jr(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var fi={};function T6(n,e){return n.createText(e)}function O6(n,e,t){n.setValue(e,t)}function D6(n,e){return n.createComment(_6(e))}function F2(n,e,t){return n.createElement(e,t)}function Xm(n,e,t,i,r){n.insertBefore(e,t,i,r)}function V2(n,e,t){n.appendChild(e,t)}function DT(n,e,t,i,r){i!==null?Xm(n,e,t,i,r):V2(n,e,t)}function B2(n,e,t,i){n.removeChild(null,e,t,i)}function A6(n,e,t){n.setAttribute(e,"style",t)}function k6(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function U2(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&M5(n,e,i),r!==null&&k6(n,e,r),o!==null&&A6(n,e,o)}function Cx(n,e,t,i,r,o,a,l,u,f,g){let b=sn+i,E=b+r,S=R6(b,E),R=typeof f=="function"?f():f;return S[Pe]={type:n,blueprint:S,template:t,queries:null,viewQuery:l,declTNode:e,data:S.slice().fill(null,b),bindingStartIndex:b,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:R,incompleteFirstPass:!1,ssrId:g}}function R6(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:fi);return t}function N6(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Cx(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ex(n,e,t,i,r,o,a,l,u,f,g){let b=e.blueprint.slice();return b[Fr]=r,b[$e]=i|4|128|8|64|1024,(f!==null||n&&n[$e]&2048)&&(b[$e]|=2048),e1(b),b[Bn]=b[Oc]=n,b[yn]=t,b[mo]=a||n&&n[mo],b[Vt]=l||n&&n[Vt],b[ps]=u||n&&n[ps]||null,b[gr]=o,b[Bh]=z5(),b[yu]=g,b[Kb]=f,b[Xi]=e.type==2?n[Xi]:b,b}function L6(n,e,t){let i=Br(e,n),r=N6(t),o=n[mo].rendererFactory,a=Ix(n,Ex(n,r,null,j2(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=a}function j2(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function z2(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Ix(n,e){return n[xu]?n[Wb][pr]=e:n[xu]=e,n[Wb]=e,e}function C(n=1){H2(Xt(),Le(),bo()+n,!1)}function H2(n,e,t,i){if(!i)if((e[$e]&3)===3){let o=n.preOrderCheckHooks;o!==null&&jm(e,o,t)}else{let o=n.preOrderHooks;o!==null&&zm(e,o,0,t)}wa(t)}var b_=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(b_||{});function j1(n,e,t,i){let r=He(null);try{let[o,a,l]=n.inputs[t],u=null;(a&b_.SignalBased)!==0&&(u=e[o][di]),u!==null&&u.transformFn!==void 0?i=u.transformFn(i):l!==null&&(i=l.call(e,i)),n.setInput!==null?n.setInput(e,u,i,t,o):XT(e,u,o,i)}finally{He(r)}}var Co=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Co||{}),F6;function Sx(n,e){return F6(n,e)}var Vc=new Set,x_=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(x_||{}),$c=new ye(""),AT=new Set;function So(n){AT.has(n)||(AT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var $2=!1,z1=class extends Qt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,$P()&&(this.destroyRef=F(Ur,{optional:!0})??void 0,this.pendingTasks=F(xo,{optional:!0})??void 0)}emit(e){let t=He(null);try{super.next(e)}finally{He(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let l=super.subscribe({next:r,error:o,complete:a});return e instanceof un&&e.add(l),l}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},an=z1;function G2(n){let e,t;function i(){n=Wh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function kT(n){return queueMicrotask(()=>n()),()=>{n=Wh}}var Mx="isAngularZone",e_=Mx+"_ID",V6=0,xt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new an(!1);onMicrotaskEmpty=new an(!1);onStable=new an(!1);onError=new an(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=$2}=e;if(typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=o,j6(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Mx)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new le(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,B6,Wh,Wh);try{return o.runTask(a,t,i)}finally{o.cancelTask(a)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},B6={};function Px(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function U6(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){G2(()=>{n.callbackScheduled=!1,H1(n),n.isCheckStableRunning=!0,Px(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),H1(n)}function j6(n){let e=()=>{U6(n)},t=V6++;n._inner=n._inner.fork({name:"angular",properties:{[Mx]:!0,[e_]:t,[e_+t]:!0},onInvokeTask:(i,r,o,a,l,u)=>{if(z6(u))return i.invokeTask(o,a,l,u);try{return RT(n),i.invokeTask(o,a,l,u)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),NT(n)}},onInvoke:(i,r,o,a,l,u,f)=>{try{return RT(n),i.invoke(o,a,l,u,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!H6(u)&&e(),NT(n)}},onHasTask:(i,r,o,a)=>{i.hasTask(o,a),r===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,H1(n),Px(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,o,a)=>(i.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function H1(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function RT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function NT(n){n._nesting--,Px(n)}var t_=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new an;onMicrotaskEmpty=new an;onStable=new an;onError=new an;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function z6(n){return q2(n,"__ignore_ng_zone__")}function H6(n){return q2(n,"__scheduler_tick__")}function q2(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Tx=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),W2=[0,1,2,3],K2=(()=>{class n{ngZone=F(xt);scheduler=F(ds);errorHandler=F(Rr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F($c,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Nt(16),this.executing=!0;for(let i of W2)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Nt(17)}register(t){let{view:i}=t;i!==void 0?((i[Ac]??=[]).push(t),Eu(i),i[$e]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(x_.AFTER_NEXT_RENDER,t):t()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),n_=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,a=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ac];e&&(this.view[Ac]=e.filter(t=>t!==this))}};function sf(n,e){let t=e?.injector??F(Jt);return So("NgAfterNextRender"),G6(n,t,e,!0)}function $6(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function G6(n,e,t,i){let r=e.get(Tx);r.impl??=e.get(K2);let o=e.get($c,null,{optional:!0}),a=t?.manualCleanup!==!0?e.get(Ur):null,l=e.get(km,null,{optional:!0}),u=new n_(r.impl,$6(n),l?.view,i,a,o?.snapshot(null));return r.impl.register(u),u}var Z2=new ye("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Y2(n,e,t){let i=n.get(Z2);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function q6(n,e){let t=n.get(Z2);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)t.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function W6(n,e){for(let[t,i]of e)Y2(n,i.animateFns)}function LT(n,e,t,i){let r=n?.[kc]?.enter;e!==null&&r&&r.has(t.index)&&W6(i,r)}function Mu(n,e,t,i,r,o,a,l){if(r!=null){let u,f=!1;Vr(r)?u=r:vo(r)&&(f=!0,r=r[Fr]);let g=mr(r);n===0&&i!==null?(LT(l,i,o,t),a==null?V2(e,i,g):Xm(e,i,g,a||null,!0)):n===1&&i!==null?(LT(l,i,o,t),Xm(e,i,g,a||null,!0)):n===2?FT(l,o,t,b=>{B2(e,g,f,b)}):n===3&&FT(l,o,t,()=>{e.destroyNode(g)}),u!=null&&sV(e,n,t,u,o,i,a)}}function K6(n,e){Q2(n,e),e[Fr]=null,e[gr]=null}function Z6(n,e,t,i,r,o){i[Fr]=r,i[gr]=e,C_(n,i,t,1,r,o)}function Q2(n,e){e[mo].changeDetectionScheduler?.notify(9),C_(n,e,e[Vt],2,null,null)}function Y6(n){let e=n[xu];if(!e)return C1(n[Pe],n);for(;e;){let t=null;if(vo(e))t=e[xu];else{let i=e[dn];i&&(t=i)}if(!t){for(;e&&!e[pr]&&e!==n;)vo(e)&&C1(e[Pe],e),e=e[Bn];e===null&&(e=n),vo(e)&&C1(e[Pe],e),t=e&&e[pr]}e=t}}function Ox(n,e){let t=n[Rc],i=t.indexOf(e);t.splice(i,1)}function w_(n,e){if(Nc(e))return;let t=e[Vt];t.destroyNode&&C_(n,e,t,3,null,null),Y6(e)}function C1(n,e){if(Nc(e))return;let t=He(null);try{e[$e]&=-129,e[$e]|=256,e[er]&&Ih(e[er]),X6(n,e),J6(n,e),e[Pe].type===1&&e[Vt].destroy();let i=e[ya];if(i!==null&&Vr(e[Bn])){i!==e[Bn]&&Ox(i,e);let r=e[_o];r!==null&&r.detachView(n)}N1(e)}finally{He(t)}}function FT(n,e,t,i){let r=n?.[kc];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&Vc.add(n),Y2(t,()=>{if(r.leave&&r.leave.has(e.index)){let a=r.leave.get(e.index),l=[];if(a){for(let u=0;u<a.animateFns.length;u++){let f=a.animateFns[u],{promise:g}=f();l.push(g)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(l),Q6(n,i)}else n&&Vc.delete(n),i(!1)},r)}function Q6(n,e){let t=n[kc]?.running;if(t){t.then(()=>{n[kc].running=void 0,Vc.delete(n),e(!0)});return}e(!1)}function J6(n,e){let t=n.cleanup,i=e[bu];if(t!==null)for(let a=0;a<t.length-1;a+=2)if(typeof t[a]=="string"){let l=t[a+3];l>=0?i[l]():i[-l].unsubscribe(),a+=2}else{let l=i[t[a+1]];t[a].call(l)}i!==null&&(e[bu]=null);let r=e[ls];if(r!==null){e[ls]=null;for(let a=0;a<r.length;a++){let l=r[a];l()}}let o=e[Uh];if(o!==null){e[Uh]=null;for(let a of o)a.destroy()}}function X6(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Fc)){let o=t[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let l=r[o[a]],u=o[a+1];Nt(4,l,u);try{u.call(l)}finally{Nt(5,l,u)}}else{Nt(4,r,o);try{o.call(r)}finally{Nt(5,r,o)}}}}}function eV(n,e,t){return tV(n,e.parent,t)}function tV(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Fr];if(xa(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===ms.None||r===ms.Emulated)return null}return Br(i,t)}function nV(n,e,t){return rV(n,e,t)}function iV(n,e,t){return n.type&40?Br(n,t):null}var rV=iV,VT;function Dx(n,e,t,i){let r=eV(n,i,e),o=e[Vt],a=i.parent||e[gr],l=nV(a,i,e);if(r!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)DT(o,r,t[u],l,!1);else DT(o,r,t,l,!1);VT!==void 0&&VT(o,i,e,t,r)}function Kh(n,e){if(e!==null){let t=e.type;if(t&3)return Br(e,n);if(t&4)return $1(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Kh(n,i);{let r=n[e.index];return Vr(r)?$1(-1,r):mr(r)}}else{if(t&128)return Kh(n,e.next);if(t&32)return Sx(e,n)()||mr(n[e.index]);{let i=J2(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=ga(n[Xi]);return Kh(r,i)}else return Kh(n,e.next)}}}return null}function J2(n,e){if(e!==null){let i=n[Xi][gr],r=e.projection;return i.projection[r]}return null}function $1(n,e){let t=dn+n+1;if(t<e.length){let i=e[t],r=i[Pe].firstChild;if(r!==null)return Kh(i,r)}return e[ba]}function Ax(n,e,t,i,r,o,a){for(;t!=null;){let l=i[ps];if(t.type===128){t=t.next;continue}let u=i[t.index],f=t.type;if(a&&e===0&&(u&&Ou(mr(u),i),t.flags|=2),!_x(t))if(f&8)Ax(n,e,t.child,i,r,o,!1),Mu(e,n,l,r,u,t,o,i);else if(f&32){let g=Sx(t,i),b;for(;b=g();)Mu(e,n,l,r,b,t,o,i);Mu(e,n,l,r,u,t,o,i)}else f&16?oV(n,e,i,t,r,o):Mu(e,n,l,r,u,t,o,i);t=a?t.projectionNext:t.next}}function C_(n,e,t,i,r,o){Ax(t,i,n.firstChild,e,r,o,!1)}function oV(n,e,t,i,r,o){let a=t[Xi],u=a[gr].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let g=u[f];Mu(e,n,t[ps],r,g,i,o,t)}else{let f=u,g=a[Bn];g2(i)&&(f.flags|=128),Ax(n,e,f,g,r,o,!0)}}function sV(n,e,t,i,r,o,a){let l=i[ba],u=mr(i);l!==u&&Mu(e,n,t,o,l,r,a);for(let f=dn;f<i.length;f++){let g=i[f];C_(g[Pe],g,n,e,o,l)}}function aV(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:Co.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Co.Important),n.setStyle(t,i,r,o))}}function X2(n,e,t,i,r){let o=bo(),a=i&2;try{wa(-1),a&&e.length>sn&&H2(n,e,sn,!1),Nt(a?2:0,r,t),t(i,r)}finally{wa(o),Nt(a?3:1,r,t)}}function E_(n,e,t){fV(n,e,t),(t.flags&64)===64&&pV(n,e,t)}function af(n,e,t=Br){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],l=a===-1?t(e,n):n[a];n[r++]=l}}}function cV(n,e,t,i){let o=i.get(C2,w2)||t===ms.ShadowDom,a=n.selectRootElement(e,o);return lV(a),a}function lV(n){uV(n)}var uV=()=>null;function dV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function eO(n,e,t,i,r,o){let a=e[Pe];if(Lx(n,a,e,t,i)){xa(n)&&hV(e,n.index);return}n.type&3&&(t=dV(t)),tO(n,e,t,i,r,o)}function tO(n,e,t,i,r,o){if(n.type&3){let a=Br(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(a,t,i)}else n.type&12}function hV(n,e){let t=_r(e,n);t[$e]&16||(t[$e]|=64)}function fV(n,e,t){let i=t.directiveStart,r=t.directiveEnd;xa(t)&&L6(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ym(t,e);let o=t.initialInputs;for(let a=i;a<r;a++){let l=n.data[a],u=Yh(e,n,a,t);if(Ou(u,e),o!==null&&vV(e,a-i,u,l,t,o),yo(l)){let f=_r(t.index,e);f[yn]=Yh(e,n,a,t)}}}function pV(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,a=cT();try{wa(o);for(let l=i;l<r;l++){let u=n.data[l],f=e[l];Pm(l),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&gV(u,f)}}finally{wa(-1),Pm(a)}}function gV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function kx(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];C6(e,o.selectors,!1)&&(i??=[],yo(o)?i.unshift(o):i.push(o))}return i}function mV(n,e,t,i,r,o){let a=Br(n,e);_V(e[Vt],a,o,n.value,t,i,r)}function _V(n,e,t,i,r,o,a){if(o==null)n.removeAttribute(e,r,t);else{let l=a==null?hs(o):a(o,i||"",r);n.setAttribute(e,r,l,t)}}function vV(n,e,t,i,r,o){let a=o[e];if(a!==null)for(let l=0;l<a.length;l+=2){let u=a[l],f=a[l+1];j1(i,t,u,f)}}function Rx(n,e,t,i,r){let o=sn+t,a=e[Pe],l=r(a,e,n,i,t);e[o]=l,Iu(n,!0);let u=n.type===2;return u?(U2(e[Vt],l,n),(JP()===0||wu(n))&&Ou(l,e),XP()):Ou(l,e),Am()&&(!u||!_x(n))&&Dx(a,e,l,n),n}function Nx(n){let e=n;return l1()?nT():(e=e.parent,Iu(e,!1)),e}function yV(n,e){let t=n[ps];if(!t)return;let i;try{i=t.get(Ti,null)}catch{i=null}i?.(e)}function Lx(n,e,t,i,r){let o=n.inputs?.[i],a=n.hostDirectiveInputs?.[i],l=!1;if(a)for(let u=0;u<a.length;u+=2){let f=a[u],g=a[u+1],b=e.data[f];j1(b,t[f],g,r),l=!0}if(o)for(let u of o){let f=t[u],g=e.data[u];j1(g,f,i,r),l=!0}return l}function bV(n,e){let t=_r(e,n),i=t[Pe];xV(i,t);let r=t[Fr];r!==null&&t[yu]===null&&(t[yu]=E2(r,t[ps])),Nt(18),Fx(i,t,t[yn]),Nt(19,t[yn])}function xV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Fx(n,e,t){Om(e);try{let i=n.viewQuery;i!==null&&F1(1,i,t);let r=n.template;r!==null&&X2(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[_o]?.finishViewCreation(n),n.staticContentQueries&&I2(n,e),n.staticViewQueries&&F1(2,n.viewQuery,t);let o=n.components;o!==null&&wV(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[$e]&=-5,Dm()}}function wV(n,e){for(let t=0;t<e.length;t++)bV(n,e[t])}function I_(n,e,t,i){let r=He(null);try{let o=e.tView,l=n[$e]&4096?4096:16,u=Ex(n,o,t,l,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[e.index];u[ya]=f;let g=n[_o];return g!==null&&(u[_o]=g.createEmbeddedView(o)),Fx(o,u,t),u}finally{He(r)}}function Qh(n,e){return!e||e.firstChild===null||g2(n)}function Jh(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(mr(o)),Vr(o)&&nO(o,i);let a=t.type;if(a&8)Jh(n,e,t.child,i);else if(a&32){let l=Sx(t,e),u;for(;u=l();)i.push(u)}else if(a&16){let l=J2(e,t);if(Array.isArray(l))i.push(...l);else{let u=ga(e[Xi]);Jh(u[Pe],u,l,i,!0)}}t=r?t.projectionNext:t.next}return i}function nO(n,e){for(let t=dn;t<n.length;t++){let i=n[t],r=i[Pe].firstChild;r!==null&&Jh(i[Pe],i,r,e)}n[ba]!==n[Fr]&&e.push(n[ba])}function iO(n){if(n[Ac]!==null){for(let e of n[Ac])e.impl.addSequence(e);n[Ac].length=0}}var rO=[];function CV(n){return n[er]??EV(n)}function EV(n){let e=rO.pop()??Object.create(SV);return e.lView=n,e}function IV(n){n.lView[er]!==n&&(n.lView=null,rO.push(n))}var SV=ve(J({},Xl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Eu(n.lView)},consumerOnSignalRead(){this.lView[er]=this}});function MV(n){let e=n[er]??Object.create(PV);return e.lView=n,e}var PV=ve(J({},Xl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ga(n.lView);for(;e&&!oO(e[Pe]);)e=ga(e);e&&t1(e)},consumerOnSignalRead(){this.lView[er]=this}});function oO(n){return n.type!==2}function sO(n){if(n[Uh]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Uh])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[$e]&8192)}}var TV=100;function aO(n,e=0){let i=n[mo].rendererFactory,r=!1;r||i.begin?.();try{OV(n,e)}finally{r||i.end?.()}}function OV(n,e){let t=u1();try{d1(!0),G1(n,e);let i=0;for(;Hh(n);){if(i===TV)throw new le(103,!1);i++,G1(n,1)}}finally{d1(t)}}function DV(n,e,t,i){if(Nc(e))return;let r=e[$e],o=!1,a=!1;Om(e);let l=!0,u=null,f=null;o||(oO(n)?(f=CV(e),u=tu(f)):kg()===null?(l=!1,f=MV(e),u=tu(f)):e[er]&&(Ih(e[er]),e[er]=null));try{e1(e),oT(n.bindingStartIndex),t!==null&&X2(n,e,t,2,i);let g=(r&3)===3;if(!o)if(g){let S=n.preOrderCheckHooks;S!==null&&jm(e,S,null)}else{let S=n.preOrderHooks;S!==null&&zm(e,S,0,null),x1(e,0)}if(a||AV(e),sO(e),cO(e,0),n.contentQueries!==null&&I2(n,e),!o)if(g){let S=n.contentCheckHooks;S!==null&&jm(e,S)}else{let S=n.contentHooks;S!==null&&zm(e,S,1),x1(e,1)}RV(n,e);let b=n.components;b!==null&&uO(e,b,0);let E=n.viewQuery;if(E!==null&&F1(2,E,i),!o)if(g){let S=n.viewCheckHooks;S!==null&&jm(e,S)}else{let S=n.viewHooks;S!==null&&zm(e,S,2),x1(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[wm]){for(let S of e[wm])S();e[wm]=null}o||(iO(e),e[$e]&=-73)}catch(g){throw o||Eu(e),g}finally{f!==null&&(Ch(f,u),l&&IV(f)),Dm()}}function cO(n,e){for(let t=_2(n);t!==null;t=v2(t))for(let i=dn;i<t.length;i++){let r=t[i];lO(r,e)}}function AV(n){for(let e=_2(n);e!==null;e=v2(e)){if(!(e[$e]&2))continue;let t=e[Rc];for(let i=0;i<t.length;i++){let r=t[i];t1(r)}}}function kV(n,e,t){Nt(18);let i=_r(e,n);lO(i,t),Nt(19,i[yn])}function lO(n,e){Em(n)&&G1(n,e)}function G1(n,e){let i=n[Pe],r=n[$e],o=n[er],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&Eh(o)),a||=!1,o&&(o.dirty=!1),n[$e]&=-9217,a)DV(i,n,i.template,n[yn]);else if(r&8192){let l=He(null);try{sO(n),cO(n,1);let u=i.components;u!==null&&uO(n,u,1),iO(n)}finally{He(l)}}}function uO(n,e,t){for(let i=0;i<e.length;i++)kV(n,e[i],t)}function RV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)wa(~r);else{let o=r,a=t[++i],l=t[++i];aT(a,o);let u=e[o];Nt(24,u),l(2,u),Nt(25,u)}}}finally{wa(-1)}}function Vx(n,e){let t=u1()?64:1088;for(n[mo].changeDetectionScheduler?.notify(e);n;){n[$e]|=t;let i=ga(n);if(Cu(n)&&!i)return n;n=i}return null}function dO(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function hO(n,e){let t=dn+e;if(t<n.length)return n[t]}function S_(n,e,t,i=!0){let r=e[Pe];if(NV(r,e,n,t),i){let a=$1(t,n),l=e[Vt],u=l.parentNode(n[ba]);u!==null&&Z6(r,n[gr],l,e,u,a)}let o=e[yu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function fO(n,e){let t=Xh(n,e);return t!==void 0&&w_(t[Pe],t),t}function Xh(n,e){if(n.length<=dn)return;let t=dn+e,i=n[t];if(i){let r=i[ya];r!==null&&r!==n&&Ox(r,i),e>0&&(n[t-1][pr]=i[pr]);let o=Lh(n,dn+e);K6(i[Pe],i);let a=o[_o];a!==null&&a.detachView(o[Pe]),i[Bn]=null,i[pr]=null,i[$e]&=-129}return i}function NV(n,e,t,i){let r=dn+i,o=t.length;i>0&&(t[r-1][pr]=e),i<o-dn?(e[pr]=t[r],Bb(t,dn+i,e)):(t.push(e),e[pr]=null),e[Bn]=t;let a=e[ya];a!==null&&t!==a&&pO(a,e);let l=e[_o];l!==null&&l.insertView(n),Im(e),e[$e]|=128}function pO(n,e){let t=n[Rc],i=e[Bn];if(vo(i))n[$e]|=2;else{let r=i[Bn][Xi];e[Xi]!==r&&(n[$e]|=2)}t===null?n[Rc]=[e]:t.push(e)}var Ca=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Pe];return Jh(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[yn]}set context(e){this._lView[yn]=e}get destroyed(){return Nc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Bn];if(Vr(e)){let t=e[jh],i=t?t.indexOf(this):-1;i>-1&&(Xh(e,i),Lh(t,i))}this._attachedToViewContainer=!1}w_(this._lView[Pe],this._lView)}onDestroy(e){n1(this._lView,e)}markForCheck(){Vx(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$e]&=-129}reattach(){Im(this._lView),this._lView[$e]|=128}detectChanges(){this._lView[$e]|=1024,aO(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Cu(this._lView),t=this._lView[ya];t!==null&&!e&&Ox(t,this._lView),Q2(this._lView[Pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=e;let t=Cu(this._lView),i=this._lView[ya];i!==null&&!t&&pO(i,this._lView),Im(this._lView)}};var Ea=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=LV;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=I_(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new Ca(o)}}return n})();function LV(){return M_(In(),Le())}function M_(n,e){return n.type&4?new Ea(e,n,ku(n,e)):null}function cf(n,e,t,i,r){let o=n.data[e];if(o===null)o=FV(n,e,t,i,r),sT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let a=tT();o.injectorIndex=a===null?-1:a.injectorIndex}return Iu(o,!0),o}function FV(n,e,t,i,r){let o=c1(),a=l1(),l=a?o:o&&o.parent,u=n.data[e]=BV(n,l,t,e,i,r);return VV(n,u,o,a),u}function VV(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function BV(n,e,t,i,r,o){let a=e?e.injectorIndex:-1,l=0;return eT()&&(l|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var nae=new RegExp(`^(\\d+)*(${q5}|${G5})*(.*)`);function UV(n){let e=n[Zb]??[],i=n[Bn][Vt],r=[];for(let o of e)o.data[x2]!==void 0?r.push(o):jV(o,i);n[Zb]=r}function jV(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[b2];for(;t<r;){let o=i.nextSibling;B2(e,i,!1),i=o,t++}}}var zV=()=>null,HV=()=>null;function q1(n,e){return zV(n,e)}function gO(n,e,t){return HV(n,e,t)}var mO=class{},P_=class{},W1=class{resolveComponentFactory(e){throw new le(917,!1)}},lf=class{static NULL=new W1},Bc=class{},yr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>$V()}return n})();function $V(){let n=Le(),e=In(),t=_r(e.index,n);return(vo(t)?t:n)[Vt]}var _O=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>null})}return n})();var $m={},K1=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,$m,i);return r!==$m||t===$m?r:this.parentInjector.get(e,t,i)}};function i_(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number")o=l;else if(o==1)r=mm(r,l);else if(o==2){let u=l,f=e[++a];i=mm(i,u+": "+f+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Oe(n,e=0){let t=Le();if(t===null)return Be(n,e);let i=In();return h2(i,t,ii(n),e)}function Bx(){let n="invalid";throw new Error(n)}function vO(n,e,t,i,r){let o=i===null?null:{"":-1},a=r(n,t);if(a!==null){let l=a,u=null,f=null;for(let g of a)if(g.resolveHostDirectives!==null){[l,u,f]=g.resolveHostDirectives(a);break}WV(n,e,t,l,o,u,f)}o!==null&&i!==null&&GV(t,i,o)}function GV(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new le(-301,!1);i.push(e[r],o)}}function qV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function WV(n,e,t,i,r,o,a){let l=i.length,u=!1;for(let E=0;E<l;E++){let S=i[E];!u&&yo(S)&&(u=!0,qV(n,t,E)),k1(Ym(t,e),n,S.type)}XV(t,n.data.length,l);for(let E=0;E<l;E++){let S=i[E];S.providersResolver&&S.providersResolver(S)}let f=!1,g=!1,b=z2(n,e,l,null);l>0&&(t.directiveToIndex=new Map);for(let E=0;E<l;E++){let S=i[E];if(t.mergedAttrs=Tu(t.mergedAttrs,S.hostAttrs),ZV(n,t,e,b,S),JV(b,S,r),a!==null&&a.has(S)){let[K,q]=a.get(S);t.directiveToIndex.set(S.type,[b,K+t.directiveStart,q+t.directiveStart])}else(o===null||!o.has(S))&&t.directiveToIndex.set(S.type,b);S.contentQueries!==null&&(t.flags|=4),(S.hostBindings!==null||S.hostAttrs!==null||S.hostVars!==0)&&(t.flags|=64);let R=S.type.prototype;!f&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),f=!0),!g&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),g=!0),b++}KV(n,t,o)}function KV(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))BT(0,e,r,i),BT(1,e,r,i),jT(e,i,!1);else{let o=t.get(r);UT(0,e,o,i),UT(1,e,o,i),jT(e,i,!0)}}}function BT(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a;n===0?a=e.inputs??={}:a=e.outputs??={},a[o]??=[],a[o].push(i),yO(e,o)}}function UT(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a=r[o],l;n===0?l=e.hostDirectiveInputs??={}:l=e.hostDirectiveOutputs??={},l[a]??=[],l[a].push(i,o),yO(e,a)}}function yO(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function jT(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||wx(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let a=null,l=0;for(;l<i.length;){let u=i[l];if(u===0){l+=4;continue}else if(u===5){l+=2;continue}else if(typeof u=="number")break;if(!t&&r.hasOwnProperty(u)){let f=r[u];for(let g of f)if(g===e){a??=[],a.push(u,i[l+1]);break}}else if(t&&o.hasOwnProperty(u)){let f=o[u];for(let g=0;g<f.length;g+=2)if(f[g]===e){a??=[],a.push(f[g+1],i[l+1]);break}}l+=2}n.initialInputs??=[],n.initialInputs.push(a)}function ZV(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=pa(r.type,!0)),a=new Fc(o,yo(r),Oe,null);n.blueprint[i]=a,t[i]=a,YV(n,e,i,z2(n,t,r.hostVars,fi),r)}function YV(n,e,t,i,r){let o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let l=~e.index;QV(a)!=l&&a.push(l),a.push(t,i,o)}}function QV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function JV(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;yo(e)&&(t[""]=n)}}function XV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Ux(n,e,t,i,r,o,a,l){let u=e[Pe],f=u.consts,g=vr(f,a),b=cf(u,n,t,i,g);return o&&vO(u,e,b,vr(f,l),r),b.mergedAttrs=Tu(b.mergedAttrs,b.attrs),b.attrs!==null&&i_(b,b.attrs,!1),b.mergedAttrs!==null&&i_(b,b.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,b),b}function jx(n,e){i2(n,e),Yb(e)&&n.queries.elementEnd(e)}function e8(n,e,t,i,r,o){let a=e.consts,l=vr(a,r),u=cf(e,n,t,i,l);if(u.mergedAttrs=Tu(u.mergedAttrs,u.attrs),o!=null){let f=vr(a,o);u.localNames=[];for(let g=0;g<f.length;g+=2)u.localNames.push(f[g],-1)}return u.attrs!==null&&i_(u,u.attrs,!1),u.mergedAttrs!==null&&i_(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function zx(n){return xO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function bO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function xO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Hx(n,e,t){return n[e]=t}function t8(n,e){return n[e]}function tr(n,e,t){if(t===fi)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function wO(n,e,t,i){let r=tr(n,e,t);return tr(n,e+1,i)||r}function Gm(n,e,t){return function i(r){let o=xa(n)?_r(n.index,e):e;Vx(o,5);let a=e[yn],l=zT(e,a,t,r),u=i.__ngNextListenerFn__;for(;u;)l=zT(e,a,u,r)&&l,u=u.__ngNextListenerFn__;return l}}function zT(n,e,t,i){let r=He(null);try{return Nt(6,e,t),t(i)!==!1}catch(o){return yV(n,o),!1}finally{Nt(7,e,t),He(r)}}function CO(n,e,t,i,r,o,a,l){let u=wu(n),f=!1,g=null;if(!i&&u&&(g=i8(e,t,o,n.index)),g!==null){let b=g.__ngLastListenerFn__||g;b.__ngNextListenerFn__=a,g.__ngLastListenerFn__=a,f=!0}else{let b=Br(n,t),E=i?i(b):b;K5(t,E,o,l);let S=r.listen(E,o,l);if(!n8(o)){let R=i?K=>i(mr(K[n.index])):n.index;EO(R,e,t,o,l,S,!1)}}return f}function n8(n){return n.startsWith("animation")||n.startsWith("transition")}function i8(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===t&&r[o+1]===i){let l=e[bu],u=r[o+2];return l&&l.length>u?l[u]:null}typeof a=="string"&&(o+=2)}return null}function EO(n,e,t,i,r,o,a){let l=e.firstCreatePass?r1(e):null,u=i1(t),f=u.length;u.push(r,o),l&&l.push(i,n,f,(f+1)*(a?-1:1))}function HT(n,e,t,i,r,o){let a=e[t],l=e[Pe],f=l.data[t].outputs[i],b=a[f].subscribe(o);EO(n.index,l,e,r,o,b,!0)}var Z1=Symbol("BINDING");var r_=class extends lf{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=fs(e);return new Uc(t,this.ngModule)}};function r8(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&b_.SignalBased)!==0};return r&&(o.transform=r),o})}function o8(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function s8(n,e,t){let i=e instanceof vn?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new K1(t,i):t}function a8(n){let e=n.get(Bc,null);if(e===null)throw new le(407,!1);let t=n.get(_O,null),i=n.get(ds,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function c8(n,e){let t=IO(n);return F2(e,t,t==="svg"?Qb:t==="math"?qP:null)}function IO(n){return(n.selectors[0][0]||"div").toLowerCase()}var Uc=class extends P_{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=r8(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=o8(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=M6(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,a){Nt(22);let l=He(null);try{let u=this.componentDef,f=l8(i,u,a,o),g=s8(u,r||this.ngModule,e),b=a8(g),E=b.rendererFactory.createRenderer(null,u),S=i?cV(E,i,u.encapsulation,g):c8(u,E),R=a?.some($T)||o?.some(ne=>typeof ne!="function"&&ne.bindings.some($T)),K=Ex(null,f,null,512|j2(u),null,null,b,E,g,null,E2(S,g,!0));K[sn]=S,Om(K);let q=null;try{let ne=Ux(sn,K,2,"#host",()=>f.directiveRegistry,!0,0);U2(E,S,ne),Ou(S,K),E_(f,K,ne),vx(f,ne,K),jx(f,ne),t!==void 0&&d8(ne,this.ngContentSelectors,t),q=_r(ne.index,K),K[yn]=q[yn],Fx(f,K,null)}catch(ne){throw q!==null&&N1(q),N1(K),ne}finally{Nt(23),Dm()}return new o_(this.componentType,K,!!R)}finally{He(l)}}};function l8(n,e,t,i){let r=n?["ng-version","20.3.14"]:P6(e.selectors[0]),o=null,a=null,l=0;if(t)for(let g of t)l+=g[Z1].requiredVars,g.create&&(g.targetIdx=0,(o??=[]).push(g)),g.update&&(g.targetIdx=0,(a??=[]).push(g));if(i)for(let g=0;g<i.length;g++){let b=i[g];if(typeof b!="function")for(let E of b.bindings){l+=E[Z1].requiredVars;let S=g+1;E.create&&(E.targetIdx=S,(o??=[]).push(E)),E.update&&(E.targetIdx=S,(a??=[]).push(E))}}let u=[e];if(i)for(let g of i){let b=typeof g=="function"?g:g.type,E=Hb(b);u.push(E)}return Cx(0,null,u8(o,a),1,l,u,null,null,null,[r],null)}function u8(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function $T(n){let e=n[Z1].kind;return e==="input"||e==="twoWay"}var o_=class extends mO{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=zh(t[Pe],sn),this.location=ku(this._tNode,t),this.instance=_r(this._tNode.index,t)[yn],this.hostView=this.changeDetectorRef=new Ca(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=Lx(i,r[Pe],r,e,t);this.previousInputValues.set(e,t);let a=_r(i.index,r);Vx(a,1)}get injector(){return new Lc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function d8(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var ys=(()=>{class n{static __NG_ELEMENT_ID__=h8}return n})();function h8(){let n=In();return MO(n,Le())}var f8=ys,SO=class extends f8{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return ku(this._hostTNode,this._hostLView)}get injector(){return new Lc(this._hostTNode,this._hostLView)}get parentInjector(){let e=hx(this._hostTNode,this._hostLView);if(s2(e)){let t=Km(e,this._hostLView),i=Wm(e),r=t[Pe].data[i+8];return new Lc(r,t)}else return new Lc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=GT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-dn}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=q1(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(l,r,Qh(this._hostTNode,a)),l}createComponent(e,t,i,r,o,a,l){let u=e&&!y5(e),f;if(u)f=t;else{let q=t||{};f=q.index,i=q.injector,r=q.projectableNodes,o=q.environmentInjector||q.ngModuleRef,a=q.directives,l=q.bindings}let g=u?e:new Uc(fs(e)),b=i||this.parentInjector;if(!o&&g.ngModule==null){let ne=(u?b:this.parentInjector).get(vn,null);ne&&(o=ne)}let E=fs(g.componentType??{}),S=q1(this._lContainer,E?.id??null),R=S?.firstChild??null,K=g.create(b,r,R,o,a,l);return this.insertImpl(K.hostView,f,Qh(this._hostTNode,S)),K}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(KP(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let u=r[Bn],f=new SO(u,u[gr],u[Bn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return S_(a,r,o,i),e.attachToViewContainerRef(),Bb(E1(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=GT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Xh(this._lContainer,t);i&&(Lh(E1(this._lContainer),t),w_(i[Pe],i))}detach(e){let t=this._adjustIndex(e,-1),i=Xh(this._lContainer,t);return i&&Lh(E1(this._lContainer),t)!=null?new Ca(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function GT(n){return n[jh]}function E1(n){return n[jh]||(n[jh]=[])}function MO(n,e){let t,i=e[n.index];return Vr(i)?t=i:(t=dO(i,e,null,n),e[n.index]=t,Ix(e,t)),g8(t,e,n,i),new SO(t,n,e)}function p8(n,e){let t=n[Vt],i=t.createComment(""),r=Br(e,n),o=t.parentNode(r);return Xm(t,o,i,t.nextSibling(r),!1),i}var g8=v8,m8=()=>!1;function _8(n,e,t){return m8(n,e,t)}function v8(n,e,t,i){if(n[ba])return;let r;t.type&8?r=mr(i):r=p8(e,t),n[ba]=r}var Y1=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Q1=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let a=t.getByIndex(o),l=this.queries[a.indexInDeclarationView];r.push(l.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)$x(e,t).matches!==null&&this.queries[t].setDirty()}},s_=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=S8(e):this.predicate=e}},J1=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},X1=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,y8(t,o)),this.matchTNodeWithReadOption(e,t,Hm(t,e,o,!1,!1))}else i===Ea?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Hm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===hi||r===ys||r===Ea&&t.type&4)this.addMatch(t.index,-2);else{let o=Hm(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function y8(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function b8(n,e){return n.type&11?ku(n,e):n.type&4?M_(n,e):null}function x8(n,e,t,i){return t===-1?b8(e,n):t===-2?w8(n,e,i):Yh(n,n[Pe],t,e)}function w8(n,e,t){if(t===hi)return ku(e,n);if(t===Ea)return M_(e,n);if(t===ys)return MO(e,n)}function PO(n,e,t,i){let r=e[_o].queries[i];if(r.matches===null){let o=n.data,a=t.matches,l=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)l.push(null);else{let g=o[f];l.push(x8(e,g,a[u+1],t.metadata.read))}}r.matches=l}return r.matches}function ex(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let a=PO(n,e,r,t);for(let l=0;l<o.length;l+=2){let u=o[l];if(u>0)i.push(a[l/2]);else{let f=o[l+1],g=e[-u];for(let b=dn;b<g.length;b++){let E=g[b];E[ya]===E[Bn]&&ex(E[Pe],E,f,i)}if(g[Rc]!==null){let b=g[Rc];for(let E=0;E<b.length;E++){let S=b[E];ex(S[Pe],S,f,i)}}}}}return i}function C8(n,e){return n[_o].queries[e].queryList}function TO(n,e,t){let i=new Qm((t&4)===4);return QP(n,e,i,i.destroy),(e[_o]??=new Q1).queries.push(new Y1(i))-1}function E8(n,e,t){let i=Xt();return i.firstCreatePass&&(OO(i,new s_(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),TO(i,Le(),e)}function I8(n,e,t,i){let r=Xt();if(r.firstCreatePass){let o=In();OO(r,new s_(e,t,i),o.index),M8(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return TO(r,Le(),t)}function S8(n){return n.split(",").map(e=>e.trim())}function OO(n,e,t){n.queries===null&&(n.queries=new J1),n.queries.track(new X1(e,t))}function M8(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function $x(n,e){return n.queries.getByIndex(e)}function P8(n,e){let t=n[Pe],i=$x(t,e);return i.crossesNgTemplate?ex(t,n,e,[]):PO(t,n,i,e)}var jc=class{},T_=class{};var a_=class extends jc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new r_(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=zb(e);this._bootstrapComponents=N2(o.bootstrap),this._r3Injector=g1(e,t,[{provide:jc,useValue:this},{provide:lf,useValue:this.componentFactoryResolver},...i],us(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},c_=class extends T_{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new a_(this.moduleType,e,[])}};var ef=class extends jc{injector;componentFactoryResolver=new r_(this);instance=null;constructor(e){super();let t=new Pc([...e.providers,{provide:jc,useValue:this},{provide:lf,useValue:this.componentFactoryResolver}],e.parent||Vh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ru(n,e,t=null){return new ef({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var T8=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=$b(!1,t.type),r=i.length>0?Ru([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=he({token:n,providedIn:"environment",factory:()=>new n(Be(vn))})}return n})();function st(n){return Au(()=>{let e=DO(n),t=ve(J({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===fx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(T8).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ms.Emulated,styles:n.styles||Pi,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&So("NgStandalone"),AO(t);let i=n.dependencies;return t.directiveDefs=qT(i,O8),t.pipeDefs=qT(i,BP),t.id=k8(t),t})}function O8(n){return fs(n)||Hb(n)}function Mo(n){return Au(()=>({type:n.type,bootstrap:n.bootstrap||Pi,declarations:n.declarations||Pi,imports:n.imports||Pi,exports:n.exports||Pi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function D8(n,e){if(n==null)return _a;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,a,l,u;Array.isArray(r)?(l=r[0],o=r[1],a=r[2]??o,u=r[3]||null):(o=r,a=r,l=b_.None,u=null),t[o]=[i,l,u],e[o]=a}return t}function A8(n){if(n==null)return _a;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Gt(n){return Au(()=>{let e=DO(n);return AO(e),e})}function Nu(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function DO(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||_a,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Pi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:D8(n.inputs,e),outputs:A8(n.outputs),debugInfo:null}}function AO(n){n.features?.forEach(e=>e(n))}function qT(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function k8(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function R8(n){return Object.getPrototypeOf(n.prototype).constructor}function nr(n){let e=R8(n.type),t=!0,i=[n];for(;e;){let r;if(yo(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new le(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let a=n;a.inputs=I1(n.inputs),a.declaredInputs=I1(n.declaredInputs),a.outputs=I1(n.outputs);let l=r.hostBindings;l&&B8(n,l);let u=r.viewQuery,f=r.contentQueries;if(u&&F8(n,u),f&&V8(n,f),N8(n,r),OP(n.outputs,r.outputs),yo(r)&&r.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let l=o[a];l&&l.ngInherit&&l(n),l===nr&&(t=!1)}}e=Object.getPrototypeOf(e)}L8(i)}function N8(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function L8(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Tu(r.hostAttrs,t=Tu(t,r.hostAttrs))}}function I1(n){return n===_a?{}:n===Pi?[]:n}function F8(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function V8(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function B8(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function kO(n,e,t,i,r,o,a,l){if(t.firstCreatePass){n.mergedAttrs=Tu(n.mergedAttrs,n.attrs);let g=n.tView=Cx(2,n,r,o,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),g.queries=t.queries.embeddedTView(n))}l&&(n.flags|=l),Iu(n,!1);let u=j8(t,e,n,i);Am()&&Dx(t,e,u,n),Ou(u,e);let f=dO(u,e,u,n);e[i+sn]=f,Ix(e,f),_8(f,n,e)}function U8(n,e,t,i,r,o,a,l,u,f,g){let b=t+sn,E;return e.firstCreatePass?(E=cf(e,b,4,a||null,l||null),Sm()&&vO(e,n,E,vr(e.consts,f),kx),i2(e,E)):E=e.data[b],kO(E,n,e,t,i,r,o,u),wu(E)&&E_(e,n,E),f!=null&&af(n,E,g),E}function l_(n,e,t,i,r,o,a,l,u,f,g){let b=t+sn,E;if(e.firstCreatePass){if(E=cf(e,b,4,a||null,l||null),f!=null){let S=vr(e.consts,f);E.localNames=[];for(let R=0;R<S.length;R+=2)E.localNames.push(S[R],-1)}}else E=e.data[b];return kO(E,n,e,t,i,r,o,u),f!=null&&af(n,E,g),E}function te(n,e,t,i,r,o,a,l){let u=Le(),f=Xt(),g=vr(f.consts,o);return U8(u,f,n,e,t,i,r,g,void 0,a,l),te}var j8=z8;function z8(n,e,t,i){return qh(!0),e[Vt].createComment("")}var Gx=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var qx=new ye("");function bs(n){return!!n&&typeof n.then=="function"}function O_(n){return!!n&&typeof n.subscribe=="function"}var Wx=new ye("");function D_(n){return Ji([{provide:Wx,multi:!0,useValue:n}])}var Kx=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=F(Wx,{optional:!0})??[];injector=F(Jt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=En(this.injector,r);if(bs(o))t.push(o);else if(O_(o)){let a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});t.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uf=new ye("");function RO(){tb(()=>{let n="";throw new le(600,n)})}function NO(n){return n.isBoundToModule}var H8=10;var xs=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(Ti);afterRenderManager=F(Tx);zonelessEnabled=F(Rm);rootEffectScheduler=F(b1);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Qt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=F(xo);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ue(t=>!t))}constructor(){F($c,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=F(vn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Jt.NULL){return this._injector.get(xt).run(()=>{Nt(10);let a=t instanceof P_;if(!this._injector.get(Kx).done){let R="";throw new le(405,R)}let u;a?u=t:u=this._injector.get(lf).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let f=NO(u)?void 0:this._injector.get(jc),g=i||u.selector,b=u.create(r,[],g,f),E=b.location.nativeElement,S=b.injector.get(qx,null);return S?.registerApplication(E),b.onDestroy(()=>{this.detachView(b.hostView),Zh(this.components,b),S?.unregisterApplication(E)}),this._loadComponent(b),Nt(11,b),b})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Nt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(x_.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new le(101,!1);let t=He(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,He(t),this.afterTick.next(),Nt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Bc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<H8;)Nt(14),this.synchronizeOnce(),Nt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!Hh(r))continue;let o=i&&!this.zonelessEnabled?0:1;aO(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Hh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Zh(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(uf,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Zh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new le(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function St(n,e,t,i){let r=Le(),o=gs();if(tr(r,o,e)){let a=Xt(),l=Gh();mV(l,r,n,e,t,i)}return St}var lae=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var tx=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let a=this.detach(i);this.attach(i,o),this.attach(r,a)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function S1(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function $8(n,e,t){let i,r,o=0,a=n.length-1,l=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=a&&o<=u;){let f=n.at(o),g=e[o],b=S1(o,f,o,g,t);if(b!==0){b<0&&n.updateValue(o,g),o++;continue}let E=n.at(a),S=e[u],R=S1(a,E,u,S,t);if(R!==0){R<0&&n.updateValue(a,S),a--,u--;continue}let K=t(o,f),q=t(a,E),ne=t(o,g);if(Object.is(ne,q)){let fe=t(u,S);Object.is(fe,K)?(n.swap(o,a),n.updateValue(a,S),u--,a--):n.move(a,o),n.updateValue(o,g),o++;continue}if(i??=new u_,r??=KT(n,o,a,t),nx(n,i,o,ne))n.updateValue(o,g),o++,a++;else if(r.has(ne))i.set(K,n.detach(o)),a--;else{let fe=n.create(o,e[o]);n.attach(o,fe),o++,a++}}for(;o<=u;)WT(n,i,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),f=u.next();for(;!f.done&&o<=a;){let g=n.at(o),b=f.value,E=S1(o,g,o,b,t);if(E!==0)E<0&&n.updateValue(o,b),o++,f=u.next();else{i??=new u_,r??=KT(n,o,a,t);let S=t(o,b);if(nx(n,i,o,S))n.updateValue(o,b),o++,a++,f=u.next();else if(!r.has(S))n.attach(o,n.create(o,b)),o++,a++,f=u.next();else{let R=t(o,g);i.set(R,n.detach(o)),a--}}}for(;!f.done;)WT(n,i,t,n.length,f.value),f=u.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(u=>{n.destroy(u)})}function nx(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function WT(n,e,t,i,r){if(nx(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function KT(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var u_=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function Ee(n,e,t,i,r,o,a,l){So("NgControlFlow");let u=Le(),f=Xt(),g=vr(f.consts,o);return l_(u,f,n,e,t,i,r,g,256,a,l),Zx}function Zx(n,e,t,i,r,o,a,l){So("NgControlFlow");let u=Le(),f=Xt(),g=vr(f.consts,o);return l_(u,f,n,e,t,i,r,g,512,a,l),Zx}function Ie(n,e){So("NgControlFlow");let t=Le(),i=gs(),r=t[i]!==fi?t[i]:-1,o=r!==-1?d_(t,sn+r):void 0,a=0;if(tr(t,i,n)){let l=He(null);try{if(o!==void 0&&fO(o,a),n!==-1){let u=sn+n,f=d_(t,u),g=sx(t[Pe],u),b=gO(f,g,t),E=I_(t,g,e,{dehydratedView:b});S_(f,E,a,Qh(g,b))}}finally{He(l)}}else if(o!==void 0){let l=hO(o,a);l!==void 0&&(l[yn]=e)}}var ix=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-dn}};function Yx(n,e){return e}var rx=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function Gc(n,e,t,i,r,o,a,l,u,f,g,b,E){So("NgControlFlow");let S=Le(),R=Xt(),K=u!==void 0,q=Le(),ne=l?a.bind(q[Xi][yn]):a,fe=new rx(K,ne);q[sn+n]=fe,l_(S,R,n+1,e,t,i,r,vr(R.consts,o),256),K&&l_(S,R,n+2,u,f,g,b,vr(R.consts,E),512)}var ox=class extends tx{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-dn}at(e){return this.getLView(e)[yn].$implicit}attach(e,t){let i=t[yu];this.needsIndexUpdate||=e!==this.length,S_(this.lContainer,t,e,Qh(this.templateTNode,i)),G8(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,q8(this.lContainer,e),W8(this.lContainer,e)}create(e,t){let i=q1(this.lContainer,this.templateTNode.tView.ssrId),r=I_(this.hostLView,this.templateTNode,new ix(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){w_(e[Pe],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[yn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[yn].$index=e}getLView(e){return K8(this.lContainer,e)}};function qc(n){let e=He(null),t=bo();try{let i=Le(),r=i[Pe],o=i[t],a=t+1,l=d_(i,a);if(o.liveCollection===void 0){let f=sx(r,a);o.liveCollection=new ox(l,i,f)}else o.liveCollection.reset();let u=o.liveCollection;if($8(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let f=gs(),g=u.length===0;if(tr(i,f,g)){let b=t+2,E=d_(i,b);if(g){let S=sx(r,b),R=gO(E,S,i),K=I_(i,S,void 0,{dehydratedView:R});S_(E,K,0,Qh(S,R))}else r.firstUpdatePass&&UV(E),fO(E,0)}}}finally{He(e)}}function d_(n,e){return n[e]}function G8(n,e){if(n.length<=dn)return;let t=dn+e,i=n[t],r=i?i[kc]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[ps];q6(o,r),Vc.delete(i),r.detachedLeaveAnimationFns=void 0}}function q8(n,e){if(n.length<=dn)return;let t=dn+e,i=n[t],r=i?i[kc]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function W8(n,e){return Xh(n,e)}function K8(n,e){return hO(n,e)}function sx(n,e){return zh(n,e)}function $(n,e,t){let i=Le(),r=gs();if(tr(i,r,e)){let o=Xt(),a=Gh();eO(a,i,n,e,i[Vt],t)}return $}function ax(n,e,t,i,r){Lx(e,n,t,r?"class":"style",i)}function _(n,e,t,i){let r=Le(),o=r[Pe],a=n+sn,l=o.firstCreatePass?Ux(a,r,2,e,kx,Sm(),t,i):o.data[a];if(Rx(l,r,n,e,LO),wu(l)){let u=r[Pe];E_(u,r,l),vx(u,l,r)}return i!=null&&af(r,l),_}function v(){let n=Xt(),e=In(),t=Nx(e);return n.firstCreatePass&&jx(n,t),s1(t)&&a1(),o1(),t.classesWithoutHost!=null&&I5(t)&&ax(n,t,Le(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&S5(t)&&ax(n,t,Le(),t.stylesWithoutHost,!1),v}function oe(n,e,t,i){return _(n,e,t,i),v(),oe}function W(n,e,t,i){let r=Le(),o=r[Pe],a=n+sn,l=o.firstCreatePass?e8(a,o,2,e,t,i):o.data[a];return Rx(l,r,n,e,LO),i!=null&&af(r,l),W}function Q(){let n=In(),e=Nx(n);return s1(e)&&a1(),o1(),Q}function Ue(n,e,t,i){return W(n,e,t,i),Q(),Ue}var LO=(n,e,t,i,r)=>(qh(!0),F2(e[Vt],i,pT()));function Xe(n,e,t){let i=Le(),r=i[Pe],o=n+sn,a=r.firstCreatePass?Ux(o,i,8,"ng-container",kx,Sm(),e,t):r.data[o];if(Rx(a,i,n,"ng-container",Z8),wu(a)){let l=i[Pe];E_(l,i,a),vx(l,a,i)}return t!=null&&af(i,a),Xe}function et(){let n=Xt(),e=In(),t=Nx(e);return n.firstCreatePass&&jx(n,t),et}var Z8=(n,e,t,i,r)=>(qh(!0),D6(e[Vt],""));function ge(){return Le()}function Mn(n,e,t){let i=Le(),r=gs();if(tr(i,r,e)){let o=Xt(),a=Gh();tO(a,i,n,e,i[Vt],t)}return Mn}var Bm=void 0;function Y8(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Q8=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bm,"{1} 'at' {0}",Bm],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Y8],M1={};function Bi(n){let e=J8(n),t=ZT(e);if(t)return t;let i=e.split("-")[0];if(t=ZT(i),t)return t;if(i==="en")return Q8;throw new le(701,!1)}function ZT(n){return n in M1||(M1[n]=Nr.ng&&Nr.ng.common&&Nr.ng.common.locales&&Nr.ng.common.locales[n]),M1[n]}var hn=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(hn||{});function J8(n){return n.toLowerCase().replace(/_/g,"-")}var df="en-US";var X8=df;function FO(n){typeof n=="string"&&(X8=n.toLowerCase().replace(/_/g,"-"))}function X(n,e,t){let i=Le(),r=Xt(),o=In();return VO(r,i,i[Vt],o,n,e,t),X}function ot(n,e,t){let i=Le(),r=Xt(),o=In();return(o.type&3||t)&&CO(o,r,i,t,i[Vt],n,e,Gm(o,i,e)),ot}function VO(n,e,t,i,r,o,a){let l=!0,u=null;if((i.type&3||a)&&(u??=Gm(i,e,o),CO(i,n,e,a,t,r,o,u)&&(l=!1)),l){let f=i.outputs?.[r],g=i.hostDirectiveOutputs?.[r];if(g&&g.length)for(let b=0;b<g.length;b+=2){let E=g[b],S=g[b+1];u??=Gm(i,e,o),HT(i,e,E,S,r,u)}if(f&&f.length)for(let b of f)u??=Gm(i,e,o),HT(i,e,b,r,r,u)}}function T(n=1){return fT(n)}function Qx(n,e,t,i){I8(n,e,t,i)}function Jx(n,e,t){E8(n,e,t)}function hf(n){let e=Le(),t=Xt(),i=h1();Tm(i+1);let r=$x(t,i);if(n.dirty&&WP(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=P8(e,i);n.reset(o,B5),n.notifyOnChanges()}return!0}return!1}function ff(){return C8(Le(),h1())}function dt(n){let e=iT();return Cm(e,sn+n)}function Um(n,e){return n<<17|e<<2}function zc(n){return n>>17&32767}function eB(n){return(n&2)==2}function tB(n,e){return n&131071|e<<17}function cx(n){return n|2}function Du(n){return(n&131068)>>2}function P1(n,e){return n&-131069|e<<2}function nB(n){return(n&1)===1}function lx(n){return n|1}function iB(n,e,t,i,r,o){let a=o?e.classBindings:e.styleBindings,l=zc(a),u=Du(a);n[i]=t;let f=!1,g;if(Array.isArray(t)){let b=t;g=b[1],(g===null||vu(b,g)>0)&&(f=!0)}else g=t;if(r)if(u!==0){let E=zc(n[l+1]);n[i+1]=Um(E,l),E!==0&&(n[E+1]=P1(n[E+1],i)),n[l+1]=tB(n[l+1],i)}else n[i+1]=Um(l,0),l!==0&&(n[l+1]=P1(n[l+1],i)),l=i;else n[i+1]=Um(u,0),l===0?l=i:n[u+1]=P1(n[u+1],i),u=i;f&&(n[i+1]=cx(n[i+1])),YT(n,g,i,!0),YT(n,g,i,!1),rB(e,g,n,i,o),a=Um(l,u),o?e.classBindings=a:e.styleBindings=a}function rB(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&vu(o,e)>=0&&(t[i+1]=lx(t[i+1]))}function YT(n,e,t,i){let r=n[t+1],o=e===null,a=i?zc(r):Du(r),l=!1;for(;a!==0&&(l===!1||o);){let u=n[a],f=n[a+1];oB(u,e)&&(l=!0,n[a+1]=i?lx(f):cx(f)),a=i?zc(f):Du(f)}l&&(n[t+1]=i?cx(r):lx(r))}function oB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?vu(n,e)>=0:!1}var zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function sB(n){return n.substring(zr.key,zr.keyEnd)}function aB(n){return cB(n),BO(n,UO(n,0,zr.textEnd))}function BO(n,e){let t=zr.textEnd;return t===e?-1:(e=zr.keyEnd=lB(n,zr.key=e,t),UO(n,e,t))}function cB(n){zr.key=0,zr.keyEnd=0,zr.value=0,zr.valueEnd=0,zr.textEnd=n.length}function UO(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function lB(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Wc(n,e,t){return jO(n,e,t,!1),Wc}function ke(n,e){return jO(n,e,null,!0),ke}function Kc(n){dB(_B,uB,n,!0)}function uB(n,e){for(let t=aB(e);t>=0;t=BO(e,t))bm(n,sB(e),!0)}function jO(n,e,t,i){let r=Le(),o=Xt(),a=Mm(2);if(o.firstUpdatePass&&HO(o,n,a,i),e!==fi&&tr(r,a,e)){let l=o.data[bo()];$O(o,l,r,r[Vt],n,r[a+1]=yB(e,t),i,a)}}function dB(n,e,t,i){let r=Xt(),o=Mm(2);r.firstUpdatePass&&HO(r,null,o,i);let a=Le();if(t!==fi&&tr(a,o,t)){let l=r.data[bo()];if(GO(l,i)&&!zO(r,o)){let u=i?l.classesWithoutHost:l.stylesWithoutHost;u!==null&&(t=mm(u,t||"")),ax(r,l,a,t,i)}else vB(r,l,a,a[Vt],a[o+1],a[o+1]=mB(n,e,t),i,o)}}function zO(n,e){return e>=n.expandoStartIndex}function HO(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[bo()],a=zO(n,t);GO(o,i)&&e===null&&!a&&(e=!1),e=hB(r,o,e,i),iB(r,o,e,t,a,i)}}function hB(n,e,t,i){let r=lT(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=T1(null,n,e,t,i),t=tf(t,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==r)if(t=T1(r,n,e,t,i),o===null){let u=fB(n,e,i);u!==void 0&&Array.isArray(u)&&(u=T1(null,n,e,u[1],i),u=tf(u,e.attrs,i),pB(n,e,i,u))}else o=gB(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function fB(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Du(i)!==0)return n[zc(i)]}function pB(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[zc(r)]=i}function gB(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=n[o].hostAttrs;i=tf(i,a,t)}return tf(i,e.attrs,t)}function T1(n,e,t,i,r){let o=null,a=t.directiveEnd,l=t.directiveStylingLast;for(l===-1?l=t.directiveStart:l++;l<a&&(o=e[l],i=tf(i,o.hostAttrs,r),o!==n);)l++;return n!==null&&(t.directiveStylingLast=l),i}function tf(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),bm(n,a,t?!0:e[++o]))}return n===void 0?null:n}function mB(n,e,t){if(t==null||t==="")return Pi;let i=[],r=Hc(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function _B(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&bm(n,i,t)}function vB(n,e,t,i,r,o,a,l){r===fi&&(r=Pi);let u=0,f=0,g=0<r.length?r[0]:null,b=0<o.length?o[0]:null;for(;g!==null||b!==null;){let E=u<r.length?r[u+1]:void 0,S=f<o.length?o[f+1]:void 0,R=null,K;g===b?(u+=2,f+=2,E!==S&&(R=b,K=S)):b===null||g!==null&&g<b?(u+=2,R=g):(f+=2,R=b,K=S),R!==null&&$O(n,e,t,i,R,K,a,l),g=u<r.length?r[u]:null,b=f<o.length?o[f]:null}}function $O(n,e,t,i,r,o,a,l){if(!(e.type&3))return;let u=n.data,f=u[l+1],g=nB(f)?QT(u,e,t,r,Du(f),a):void 0;if(!h_(g)){h_(o)||eB(f)&&(o=QT(u,null,t,r,l,a));let b=Jb(bo(),t);aV(i,a,b,r,o)}}function QT(n,e,t,i,r,o){let a=e===null,l;for(;r>0;){let u=n[r],f=Array.isArray(u),g=f?u[1]:u,b=g===null,E=t[r+1];E===fi&&(E=b?Pi:void 0);let S=b?xm(E,i):g===i?E:void 0;if(f&&!h_(S)&&(S=xm(u,i)),h_(S)&&(l=S,a))return l;let R=n[r+1];r=a?zc(R):Du(R)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(l=xm(u,i))}return l}function h_(n){return n!==void 0}function yB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=us(Hc(n)))),n}function GO(n,e){return(n.flags&(e?8:16))!==0}function w(n,e=""){let t=Le(),i=Xt(),r=n+sn,o=i.firstCreatePass?cf(i,r,1,e,null):i.data[r],a=bB(i,t,o,e,n);t[r]=a,Am()&&Dx(i,t,a,o),Iu(o,!1)}var bB=(n,e,t,i,r)=>(qh(!0),T6(e[Vt],i));function qO(n,e,t,i=""){return tr(n,gs(),t)?e+hs(t)+i:fi}function xB(n,e,t,i,r,o=""){let a=rT(),l=wO(n,a,t,r);return Mm(2),l?e+hs(t)+i+hs(r)+o:fi}function ae(n){return be("",n),ae}function be(n,e,t){let i=Le(),r=qO(i,n,e,t);return r!==fi&&WO(i,bo(),r),be}function bn(n,e,t,i,r){let o=Le(),a=xB(o,n,e,t,i,r);return a!==fi&&WO(o,bo(),a),bn}function WO(n,e,t){let i=Jb(e,n);O6(n[Vt],i,t)}function vt(n,e,t){_1(e)&&(e=e());let i=Le(),r=gs();if(tr(i,r,e)){let o=Xt(),a=Gh();eO(a,i,n,e,i[Vt],t)}return vt}function wt(n,e){let t=_1(n);return t&&n.set(e),t}function yt(n,e){let t=Le(),i=Xt(),r=In();return VO(i,t,t[Vt],r,n,e),yt}function Xx(n){return tr(Le(),gs(),n)?hs(n):fi}function ew(n,e,t=""){return qO(Le(),n,e,t)}function wB(n,e,t){let i=Xt();if(i.firstCreatePass){let r=yo(n);ux(t,i.data,i.blueprint,r,!0),ux(e,i.data,i.blueprint,r,!1)}}function ux(n,e,t,i,r){if(n=ii(n),Array.isArray(n))for(let o=0;o<n.length;o++)ux(n[o],e,t,i,r);else{let o=Xt(),a=Le(),l=In(),u=Mc(n)?n:ii(n.provide),f=qb(n),g=l.providerIndexes&1048575,b=l.directiveStart,E=l.providerIndexes>>20;if(Mc(n)||!n.multi){let S=new Fc(f,r,Oe,null),R=D1(u,e,r?g:g+E,b);R===-1?(k1(Ym(l,a),o,u),O1(o,n,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(S),a.push(S)):(t[R]=S,a[R]=S)}else{let S=D1(u,e,g+E,b),R=D1(u,e,g,g+E),K=S>=0&&t[S],q=R>=0&&t[R];if(r&&!q||!r&&!K){k1(Ym(l,a),o,u);let ne=IB(r?EB:CB,t.length,r,i,f,n);!r&&q&&(t[R].providerFactory=ne),O1(o,n,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(ne),a.push(ne)}else{let ne=KO(t[r?R:S],f,!r&&i);O1(o,n,S>-1?S:R,ne)}!r&&i&&q&&t[R].componentProviders++}}}function O1(n,e,t,i){let r=Mc(e),o=HP(e);if(r||o){let u=(o?ii(e.useClass):e).prototype.ngOnDestroy;if(u){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let g=f.indexOf(t);g===-1?f.push(t,[i,u]):f[g+1].push(i,u)}else f.push(t,u)}}}function KO(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function D1(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function CB(n,e,t,i,r){return dx(this.multi,[])}function EB(n,e,t,i,r){let o=this.multi,a;if(this.providerFactory){let l=this.providerFactory.componentProviders,u=Yh(i,i[Pe],this.providerFactory.index,r);a=u.slice(0,l),dx(o,a);for(let f=l;f<u.length;f++)a.push(u[f])}else a=[],dx(o,a);return a}function dx(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function IB(n,e,t,i,r,o){let a=new Fc(n,t,Oe,null);return a.multi=[],a.index=e,a.componentProviders=0,KO(a,r,i&&!t),a}function ws(n,e=[]){return t=>{t.providersResolver=(i,r)=>wB(i,r?r(n):n,e)}}function Lu(n,e,t){let i=$h()+n,r=Le();return r[i]===fi?Hx(r,i,t?e.call(t):e()):t8(r,i)}function A_(n,e,t,i){return YO(Le(),$h(),n,e,t,i)}function ZO(n,e){let t=n[e];return t===fi?void 0:t}function YO(n,e,t,i,r,o){let a=e+t;return tr(n,a,r)?Hx(n,a+1,o?i.call(o,r):i(r)):ZO(n,a+1)}function SB(n,e,t,i,r,o,a){let l=e+t;return wO(n,l,r,o)?Hx(n,l+2,a?i.call(a,r,o):i(r,o)):ZO(n,l+2)}function xe(n,e){let t=Xt(),i,r=n+sn;t.firstCreatePass?(i=MB(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=pa(i.type,!0)),a,l=Mi(Oe);try{let u=Zm(!1),f=o();return Zm(u),Xb(t,Le(),r,f),f}finally{Mi(l)}}function MB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function De(n,e,t){let i=n+sn,r=Le(),o=Cm(r,i);return QO(r,i)?YO(r,$h(),e,o.transform,t,o):o.transform(t)}function Pn(n,e,t,i){let r=n+sn,o=Le(),a=Cm(o,r);return QO(o,r)?SB(o,$h(),e,a.transform,t,i,a):a.transform(t,i)}function QO(n,e){return n[Pe].data[e].pure}function Ct(n,e){return M_(n,e)}var f_=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},tw=(()=>{class n{compileModuleSync(t){return new c_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=zb(t),o=N2(r.declarations).reduce((a,l)=>{let u=fs(l);return u&&a.push(new Uc(u)),a},[]);return new f_(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var PB=(()=>{class n{zone=F(xt);changeDetectionScheduler=F(ds);applicationRef=F(xs);applicationErrorHandler=F(Ti);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function JO({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new xt(ve(J({},XO()),{scheduleInRootZone:t})),[{provide:xt,useFactory:n},{provide:va,multi:!0,useFactory:()=>{let i=F(PB,{optional:!0});return()=>i.initialize()}},{provide:va,multi:!0,useFactory:()=>{let i=F(TB);return()=>{i.initialize()}}},e===!0?{provide:v1,useValue:!0}:[],{provide:y1,useValue:t??$2},{provide:Ti,useFactory:()=>{let i=F(xt),r=F(vn),o;return a=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw a}):(o??=r.get(Rr),o.handleError(a))})}}}]}function XO(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var TB=(()=>{class n{subscription=new un;initialized=!1;zone=F(xt);pendingTasks=F(xo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eD=(()=>{class n{applicationErrorHandler=F(Ti);appRef=F(xs);taskService=F(xo);ngZone=F(xt);zonelessEnabled=F(Rm);tracing=F($c,{optional:!0});disableScheduling=F(v1,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new un;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(e_):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(y1,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof t_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?kT:G2;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(e_+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,kT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OB(){return typeof $localize<"u"&&$localize.locale||df}var Fu=new ye("",{providedIn:"root",factory:()=>F(Fu,{optional:!0,skipSelf:!0})||OB()});function Tn(n){return MP(n)}function Ia(n,e){return Fg(n,e?.equal)}var tD=class{[di];constructor(e){this[di]=e}destroy(){this[di].destroy()}};var sD=Symbol("InputSignalNode#UNSET"),zB=ve(J({},Vg),{transformFn:void 0,applyValueToInputSignal(n,e){iu(n,e)}});function aD(n,e){let t=Object.create(zB);t.value=n,t.transformFn=e?.transform;function i(){if(eu(t),t.value===sD){let r=null;throw new le(-950,r)}return t.value}return i[di]=t,i}var R_=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>nf(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},HB=new ye("");HB.__NG_ELEMENT_ID__=n=>{let e=In();if(e===null)throw new le(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new le(204,!1)};function nD(n,e){return aD(n,e)}function $B(n){return aD(sD,n)}var cD=(nD.required=$B,nD);var nw=new ye(""),GB=new ye("");function pf(n){return!n.moduleRef}function qB(n){let e=pf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(xt);return t.run(()=>{pf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Ti),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),pf(n)){let o=()=>e.destroy(),a=n.platformInjector.get(nw);a.add(o),e.onDestroy(()=>{r.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(nw);a.add(o),n.moduleRef.onDestroy(()=>{Zh(n.allPlatformModules,n.moduleRef),r.unsubscribe(),a.delete(o)})}return KB(i,t,()=>{let o=e.get(xo),a=o.add(),l=e.get(Kx);return l.runInitializers(),l.donePromise.then(()=>{let u=e.get(Fu,df);if(FO(u||df),!e.get(GB,!0))return pf(n)?e.get(xs):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(pf(n)){let g=e.get(xs);return n.rootComponent!==void 0&&g.bootstrap(n.rootComponent),g}else return WB?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(a))})})}var WB;function KB(n,e,t){try{let i=t();return bs(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var k_=null;function ZB(n=[],e){return Jt.create({name:e,providers:[{provide:Fh,useValue:"platform"},{provide:nw,useValue:new Set([()=>k_=null])},...n]})}function YB(n=[]){if(k_)return k_;let e=ZB(n);return k_=e,RO(),QB(e),e}function QB(n){let e=n.get(g_,null);En(n,()=>{e?.forEach(t=>t())})}function aw(){return!1}var Po=(()=>{class n{static __NG_ELEMENT_ID__=JB}return n})();function JB(n){return XB(In(),Le(),(n&16)===16)}function XB(n,e,t){if(xa(n)&&!t){let i=_r(n.index,e);return new Ca(i,i)}else if(n.type&175){let i=e[Xi];return new Ca(i,e)}return null}var iw=class{constructor(){}supports(e){return zx(e)}create(e){return new rw(e)}},eU=(n,e)=>e,rw=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||eU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let a=!i||t&&t.currentIndex<iD(i,r,o)?t:i,l=iD(a,r,o),u=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(t=t._next,a.previousIndex==null)r++;else{o||(o=[]);let f=l-r,g=u-r;if(f!=g){for(let E=0;E<f;E++){let S=E<o.length?o[E]:o[E]=0,R=S+E;g<=R&&R<f&&(o[E]=S+1)}let b=a.previousIndex;o[b]=g-f}}l!==u&&e(a,l,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!zx(e))throw new le(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,a;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],a=this._trackByFn(l,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,l),i=!0):(i&&(t=this._verifyReinsertion(t,o,a,l)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,bO(e,l=>{a=this._trackByFn(r,l),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,l,a,r),i=!0):(i&&(t=this._verifyReinsertion(t,l,a,r)),Object.is(t.item,l)||this._addIdentityChange(t,l)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new ow(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new N_),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new N_),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ow=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},sw=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},N_=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new sw,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function iD(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function rD(){return new cw([new iw])}var cw=(()=>{class n{factories;static \u0275prov=he({token:n,providedIn:"root",factory:rD});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let i=F(n,{optional:!0,skipSelf:!0});return n.create(t,i||rD())}}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new le(901,!1)}}return n})();function lD(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;Nt(8);try{let o=r?.injector??YB(i),a=[JO({}),{provide:ds,useExisting:eD},mT,...t||[]],l=new ef({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return qB({r3Injector:l.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Nt(9)}}function Sa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function uD(n){let e=fs(n);if(!e)return null;let t=new Uc(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var fD=null;function br(){return fD}function lw(n){fD??=n}var gf=class{},mf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(pD),providedIn:"platform"})}return n})(),uw=new ye(""),pD=(()=>{class n extends mf{_location;_history;_doc=F(Sn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return br().getBaseHref(this._doc)}onPopState(t){let i=br().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=br().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function L_(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function dD(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Hr(n){return n&&n[0]!=="?"?`?${n}`:n}var $r=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(V_),providedIn:"root"})}return n})(),F_=new ye(""),V_=(()=>{class n extends $r{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??F(Sn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return L_(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Hr(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Hr(o));this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Hr(o));this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Be(mf),Be(F_,8))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ma=(()=>{class n{_subject=new Qt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=iU(dD(hD(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Hr(i))}normalize(t){return n.stripTrailingSlash(nU(this._basePath,hD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hr(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hr(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Hr;static joinWithSlash=L_;static stripTrailingSlash=dD;static \u0275fac=function(i){return new(i||n)(Be($r))};static \u0275prov=he({token:n,factory:()=>tU(),providedIn:"root"})}return n})();function tU(){return new Ma(Be($r))}function nU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function hD(n){return n.replace(/\/index.html$/,"")}function iU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var yw=(()=>{class n extends $r{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=L_(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Hr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Hr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Be(mf),Be(F_,8))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();var bw=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(bw||{});var pi=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(pi||{}),Lt=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Lt||{}),Ui=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Ui||{}),ji={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function bD(n){return Bi(n)[hn.LocaleId]}function xD(n,e,t){let i=Bi(n),r=[i[hn.DayPeriodsFormat],i[hn.DayPeriodsStandalone]],o=xr(r,e);return xr(o,t)}function wD(n,e,t){let i=Bi(n),r=[i[hn.DaysFormat],i[hn.DaysStandalone]],o=xr(r,e);return xr(o,t)}function CD(n,e,t){let i=Bi(n),r=[i[hn.MonthsFormat],i[hn.MonthsStandalone]],o=xr(r,e);return xr(o,t)}function ED(n,e){let i=Bi(n)[hn.Eras];return xr(i,e)}function _f(n,e){let t=Bi(n);return xr(t[hn.DateFormat],e)}function vf(n,e){let t=Bi(n);return xr(t[hn.TimeFormat],e)}function yf(n,e){let i=Bi(n)[hn.DateTimeFormat];return xr(i,e)}function To(n,e){let t=Bi(n),i=t[hn.NumberSymbols][e];if(typeof i>"u"){if(e===ji.CurrencyDecimal)return t[hn.NumberSymbols][ji.Decimal];if(e===ji.CurrencyGroup)return t[hn.NumberSymbols][ji.Group]}return i}function ID(n,e){return Bi(n)[hn.NumberFormats][e]}function SD(n){if(!n[hn.ExtraData])throw new le(2303,!1)}function MD(n){let e=Bi(n);return SD(e),(e[hn.ExtraData][2]||[]).map(i=>typeof i=="string"?dw(i):[dw(i[0]),dw(i[1])])}function PD(n,e,t){let i=Bi(n);SD(i);let r=[i[hn.ExtraData][0],i[hn.ExtraData][1]],o=xr(r,e)||[];return xr(o,t)||[]}function xr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new le(2304,!1)}function dw(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var rU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,B_={},oU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function TD(n,e,t,i){let r=pU(n);e=Cs(t,e)||e;let a=[],l;for(;e;)if(l=oU.exec(e),l){a=a.concat(l.slice(1));let g=a.pop();if(!g)break;e=g}else{a.push(e);break}let u=r.getTimezoneOffset();i&&(u=DD(i,u),r=fU(r,i));let f="";return a.forEach(g=>{let b=dU(g);f+=b?b(r,t,u):g==="''"?"'":g.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function $_(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Cs(n,e){let t=bD(n);if(B_[t]??={},B_[t][e])return B_[t][e];let i="";switch(e){case"shortDate":i=_f(n,Ui.Short);break;case"mediumDate":i=_f(n,Ui.Medium);break;case"longDate":i=_f(n,Ui.Long);break;case"fullDate":i=_f(n,Ui.Full);break;case"shortTime":i=vf(n,Ui.Short);break;case"mediumTime":i=vf(n,Ui.Medium);break;case"longTime":i=vf(n,Ui.Long);break;case"fullTime":i=vf(n,Ui.Full);break;case"short":let r=Cs(n,"shortTime"),o=Cs(n,"shortDate");i=U_(yf(n,Ui.Short),[r,o]);break;case"medium":let a=Cs(n,"mediumTime"),l=Cs(n,"mediumDate");i=U_(yf(n,Ui.Medium),[a,l]);break;case"long":let u=Cs(n,"longTime"),f=Cs(n,"longDate");i=U_(yf(n,Ui.Long),[u,f]);break;case"full":let g=Cs(n,"fullTime"),b=Cs(n,"fullDate");i=U_(yf(n,Ui.Full),[g,b]);break}return i&&(B_[t][e]=i),i}function U_(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function Gr(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let a=String(n);for(;a.length<e;)a="0"+a;return i&&(a=a.slice(a.length-e)),o+a}function sU(n,e){return Gr(n,3).substring(0,e)}function On(n,e,t=0,i=!1,r=!1){return function(o,a){let l=aU(n,o);if((t>0||l>-t)&&(l+=t),n===3)l===0&&t===-12&&(l=12);else if(n===6)return sU(l,e);let u=To(a,ji.MinusSign);return Gr(l,e,u,i,r)}}function aU(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new le(2301,!1)}}function qt(n,e,t=pi.Format,i=!1){return function(r,o){return cU(r,o,n,e,t,i)}}function cU(n,e,t,i,r,o){switch(t){case 2:return CD(e,r,i)[n.getMonth()];case 1:return wD(e,r,i)[n.getDay()];case 0:let a=n.getHours(),l=n.getMinutes();if(o){let f=MD(e),g=PD(e,r,i),b=f.findIndex(E=>{if(Array.isArray(E)){let[S,R]=E,K=a>=S.hours&&l>=S.minutes,q=a<R.hours||a===R.hours&&l<R.minutes;if(S.hours<R.hours){if(K&&q)return!0}else if(K||q)return!0}else if(E.hours===a&&E.minutes===l)return!0;return!1});if(b!==-1)return g[b]}return xD(e,r,i)[a<12?0:1];case 3:return ED(e,i)[n.getFullYear()<=0?0:1];default:let u=t;throw new le(2302,!1)}}function j_(n){return function(e,t,i){let r=-1*i,o=To(t,ji.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+Gr(a,2,o)+Gr(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+Gr(a,1,o);case 2:return"GMT"+(r>=0?"+":"")+Gr(a,2,o)+":"+Gr(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+Gr(a,2,o)+":"+Gr(Math.abs(r%60),2,o);default:throw new le(2310,!1)}}}var lU=0,H_=4;function uU(n){let e=$_(n,lU,1).getDay();return $_(n,0,1+(e<=H_?H_:H_+7)-e)}function OD(n){let e=n.getDay(),t=e===0?-3:H_-e;return $_(n.getFullYear(),n.getMonth(),n.getDate()+t)}function hw(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,a=t.getDate();r=1+Math.floor((a+o)/7)}else{let o=OD(t),a=uU(o.getFullYear()),l=o.getTime()-a.getTime();r=1+Math.round(l/6048e5)}return Gr(r,n,To(i,ji.MinusSign))}}function z_(n,e=!1){return function(t,i){let o=OD(t).getFullYear();return Gr(o,n,To(i,ji.MinusSign),e)}}var fw={};function dU(n){if(fw[n])return fw[n];let e;switch(n){case"G":case"GG":case"GGG":e=qt(3,Lt.Abbreviated);break;case"GGGG":e=qt(3,Lt.Wide);break;case"GGGGG":e=qt(3,Lt.Narrow);break;case"y":e=On(0,1,0,!1,!0);break;case"yy":e=On(0,2,0,!0,!0);break;case"yyy":e=On(0,3,0,!1,!0);break;case"yyyy":e=On(0,4,0,!1,!0);break;case"Y":e=z_(1);break;case"YY":e=z_(2,!0);break;case"YYY":e=z_(3);break;case"YYYY":e=z_(4);break;case"M":case"L":e=On(1,1,1);break;case"MM":case"LL":e=On(1,2,1);break;case"MMM":e=qt(2,Lt.Abbreviated);break;case"MMMM":e=qt(2,Lt.Wide);break;case"MMMMM":e=qt(2,Lt.Narrow);break;case"LLL":e=qt(2,Lt.Abbreviated,pi.Standalone);break;case"LLLL":e=qt(2,Lt.Wide,pi.Standalone);break;case"LLLLL":e=qt(2,Lt.Narrow,pi.Standalone);break;case"w":e=hw(1);break;case"ww":e=hw(2);break;case"W":e=hw(1,!0);break;case"d":e=On(2,1);break;case"dd":e=On(2,2);break;case"c":case"cc":e=On(7,1);break;case"ccc":e=qt(1,Lt.Abbreviated,pi.Standalone);break;case"cccc":e=qt(1,Lt.Wide,pi.Standalone);break;case"ccccc":e=qt(1,Lt.Narrow,pi.Standalone);break;case"cccccc":e=qt(1,Lt.Short,pi.Standalone);break;case"E":case"EE":case"EEE":e=qt(1,Lt.Abbreviated);break;case"EEEE":e=qt(1,Lt.Wide);break;case"EEEEE":e=qt(1,Lt.Narrow);break;case"EEEEEE":e=qt(1,Lt.Short);break;case"a":case"aa":case"aaa":e=qt(0,Lt.Abbreviated);break;case"aaaa":e=qt(0,Lt.Wide);break;case"aaaaa":e=qt(0,Lt.Narrow);break;case"b":case"bb":case"bbb":e=qt(0,Lt.Abbreviated,pi.Standalone,!0);break;case"bbbb":e=qt(0,Lt.Wide,pi.Standalone,!0);break;case"bbbbb":e=qt(0,Lt.Narrow,pi.Standalone,!0);break;case"B":case"BB":case"BBB":e=qt(0,Lt.Abbreviated,pi.Format,!0);break;case"BBBB":e=qt(0,Lt.Wide,pi.Format,!0);break;case"BBBBB":e=qt(0,Lt.Narrow,pi.Format,!0);break;case"h":e=On(3,1,-12);break;case"hh":e=On(3,2,-12);break;case"H":e=On(3,1);break;case"HH":e=On(3,2);break;case"m":e=On(4,1);break;case"mm":e=On(4,2);break;case"s":e=On(5,1);break;case"ss":e=On(5,2);break;case"S":e=On(6,1);break;case"SS":e=On(6,2);break;case"SSS":e=On(6,3);break;case"Z":case"ZZ":case"ZZZ":e=j_(0);break;case"ZZZZZ":e=j_(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=j_(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=j_(2);break;default:return null}return fw[n]=e,e}function DD(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function hU(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function fU(n,e,t){let r=n.getTimezoneOffset(),o=DD(e,r);return hU(n,-1*(o-r))}function pU(n){if(gD(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,a=1]=n.split("-").map(l=>+l);return $_(r,o-1,a)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(rU))return gU(i)}let e=new Date(n);if(!gD(e))throw new le(2311,!1);return e}function gU(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let a=Number(n[4]||0)-t,l=Number(n[5]||0)-i,u=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,a,l,u,f),e}function gD(n){return n instanceof Date&&!isNaN(n.valueOf())}var mU=/^(\d+)?\.((\d+)(-(\d+))?)?$/,mD=22,G_=".",bf="0",_U=";",vU=",",pw="#";function yU(n,e,t,i,r,o,a=!1){let l="",u=!1;if(!isFinite(n))l=To(t,ji.Infinity);else{let f=wU(n);a&&(f=xU(f));let g=e.minInt,b=e.minFrac,E=e.maxFrac;if(o){let fe=o.match(mU);if(fe===null)throw new le(2306,!1);let we=fe[1],Re=fe[3],zt=fe[5];we!=null&&(g=gw(we)),Re!=null&&(b=gw(Re)),zt!=null?E=gw(zt):Re!=null&&b>E&&(E=b)}CU(f,b,E);let S=f.digits,R=f.integerLen,K=f.exponent,q=[];for(u=S.every(fe=>!fe);R<g;R++)S.unshift(0);for(;R<0;R++)S.unshift(0);R>0?q=S.splice(R,S.length):(q=S,S=[0]);let ne=[];for(S.length>=e.lgSize&&ne.unshift(S.splice(-e.lgSize,S.length).join(""));S.length>e.gSize;)ne.unshift(S.splice(-e.gSize,S.length).join(""));S.length&&ne.unshift(S.join("")),l=ne.join(To(t,i)),q.length&&(l+=To(t,r)+q.join("")),K&&(l+=To(t,ji.Exponential)+"+"+K)}return n<0&&!u?l=e.negPre+l+e.negSuf:l=e.posPre+l+e.posSuf,l}function AD(n,e,t){let i=ID(e,bw.Decimal),r=bU(i,To(e,ji.MinusSign));return yU(n,r,e,ji.Group,ji.Decimal,t)}function bU(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(_U),r=i[0],o=i[1],a=r.indexOf(G_)!==-1?r.split(G_):[r.substring(0,r.lastIndexOf(bf)+1),r.substring(r.lastIndexOf(bf)+1)],l=a[0],u=a[1]||"";t.posPre=l.substring(0,l.indexOf(pw));for(let g=0;g<u.length;g++){let b=u.charAt(g);b===bf?t.minFrac=t.maxFrac=g+1:b===pw?t.maxFrac=g+1:t.posSuf+=b}let f=l.split(vU);if(t.gSize=f[1]?f[1].length:0,t.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let g=r.length-t.posPre.length-t.posSuf.length,b=o.indexOf(pw);t.negPre=o.substring(0,b).replace(/'/g,""),t.negSuf=o.slice(b+g).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function xU(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function wU(n){let e=Math.abs(n)+"",t=0,i,r,o,a,l;for((r=e.indexOf(G_))>-1&&(e=e.replace(G_,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===bf;o++);if(o===(l=e.length))i=[0],r=1;else{for(l--;e.charAt(l)===bf;)l--;for(r-=o,i=[],a=0;o<=l;o++,a++)i[a]=Number(e.charAt(o))}return r>mD&&(i=i.splice(0,mD-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function CU(n,e,t){if(e>t)throw new le(2307,!1);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),a=o+n.integerLen,l=i[a];if(a>0){i.splice(Math.max(n.integerLen,a));for(let b=a;b<i.length;b++)i[b]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let b=1;b<a;b++)i[b]=0}if(l>=5)if(a-1<0){for(let b=0;b>a;b--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[a-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+n.integerLen,g=i.reduceRight(function(b,E,S,R){return E=E+b,R[S]=E<10?E:E-10,u&&(R[S]===0&&S>=f?R.pop():u=!1),E>=10?1:0},0);g&&(i.unshift(g),n.integerLen++)}function gw(n){let e=parseInt(n);if(isNaN(e))throw new le(2305,!1);return e}var mw=/\s+/,_D=[],Es=(()=>{class n{_ngEl;_renderer;initialClasses=_D;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(mw):_D}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(mw):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(mw).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(Oe(hi),Oe(yr))};static \u0275dir=Gt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var q_=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Dn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,a)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new q_(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),vD(l,r)}});for(let r=0,o=i.length;r<o;r++){let l=i.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);vD(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Oe(ys),Oe(Ea),Oe(cw))};static \u0275dir=Gt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function vD(n,e){n.context.$implicit=e.item}var Ut=(()=>{class n{_viewContainer;_context=new W_;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yD(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yD(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Oe(ys),Oe(Ea))};static \u0275dir=Gt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),W_=class{$implicit=null;ngIf=null};function yD(n,e){if(n&&!n.createEmbeddedView)throw new le(2020,!1)}function K_(n,e){return new le(2100,!1)}var _w=class{createSubscription(e,t,i){return Tn(()=>e.subscribe({next:t,error:i}))}dispose(e){Tn(()=>e.unsubscribe())}},vw=class{createSubscription(e,t,i){return e.then(r=>t?.(r),r=>i?.(r)),{unsubscribe:()=>{t=null,i=null}}}dispose(e){e.unsubscribe()}},EU=new vw,IU=new _w,cn=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=F(Ti);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i),i=>this.applicationErrorHandler(i))}_selectStrategy(t){if(bs(t))return EU;if(O_(t))return IU;throw K_(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(Oe(Po,16))};static \u0275pipe=Nu({name:"async",type:n,pure:!1})}return n})();var Is=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw K_(n,t);return t.toUpperCase()}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Nu({name:"uppercase",type:n,pure:!0})}return n})(),SU="mediumDate",kD=new ye(""),RD=new ye(""),qr=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let a=i??this.defaultOptions?.dateFormat??SU,l=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return TD(t,a,o||this.locale,l)}catch(a){throw K_(n,a.message)}}static \u0275fac=function(i){return new(i||n)(Oe(Fu,16),Oe(kD,24),Oe(RD,24))};static \u0275pipe=Nu({name:"date",type:n,pure:!0})}return n})();var xf=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,r){if(!MU(t))return null;r||=this._locale;try{let o=PU(t);return AD(o,r,i)}catch(o){throw K_(n,o.message)}}static \u0275fac=function(i){return new(i||n)(Oe(Fu,16))};static \u0275pipe=Nu({name:"number",type:n,pure:!0})}return n})();function MU(n){return!(n==null||n===""||n!==n)}function PU(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new le(2309,!1);return n}var ht=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Lr({})}return n})();function xw(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var wf=class{};var Cw="browser";function ND(n){return n===Cw}var LD=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>new ww(F(Sn),window)})}return n})(),ww=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ve(J({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let i=TU(this.document,e);i&&(this.scrollToElement(i,t),i.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(ma(2400,!1))}}scrollToElement(e,t){let i=e.getBoundingClientRect(),r=i.left+this.window.pageXOffset,o=i.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(ve(J({},t),{left:r-a[0],top:o-a[1]}))}};function TU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}var Cf=class{_doc;constructor(e){this._doc=e}manager},Z_=(()=>{class n extends Cf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Be(Sn))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Q_=new ye(""),Pw=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(a=>{a.manager=this});let r=t.filter(a=>!(a instanceof Z_));this._plugins=r.slice().reverse();let o=t.find(a=>a instanceof Z_);o&&this._plugins.push(o)}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new le(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Be(Q_),Be(xt))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Ew="ng-app-id";function FD(n){for(let e of n)e.remove()}function VD(n,e){let t=e.createElement("style");return t.textContent=n,t}function OU(n,e,t,i){let r=n.head?.querySelectorAll(`style[${Ew}="${e}"],link[${Ew}="${e}"]`);if(r)for(let o of r)o.removeAttribute(Ew),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Sw(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Tw=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,OU(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,VD);i?.forEach(r=>this.addUsage(r,this.external,Sw))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(FD(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])FD(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,VD(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,Sw(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Be(Sn),Be(p_),Be(m_,8),Be(_s))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Iw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ow=/%COMP%/g;var UD="%COMP%",DU=`_nghost-${UD}`,AU=`_ngcontent-${UD}`,kU=!0,RU=new ye("",{providedIn:"root",factory:()=>kU});function NU(n){return AU.replace(Ow,n)}function LU(n){return DU.replace(Ow,n)}function jD(n,e){return e.map(t=>t.replace(Ow,n))}var Dw=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,a,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new Ef(t,a,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof Y_?r.applyToHost(t):r instanceof If&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,l=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,b=this.platformIsServer,E=this.tracingService;switch(i.encapsulation){case ms.Emulated:o=new Y_(u,f,i,this.appId,g,a,l,b,E);break;case ms.ShadowDom:return new Mw(u,f,t,i,a,l,this.nonce,b,E);default:o=new If(u,f,i,g,a,l,b,E);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(Be(Pw),Be(Tw),Be(p_),Be(RU),Be(Sn),Be(xt),Be(m_),Be($c,8))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Ef=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Iw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(BD(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(BD(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new le(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=Iw[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Iw[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Co.DashCase|Co.Important)?e.style.setProperty(t,i,r&Co.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Co.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=br().getGlobalEventTarget(this.doc,e),!e))throw new le(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function BD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Mw=class extends Ef{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,a,l,u,f){super(e,o,a,u,f),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let g=r.styles;g=jD(r.id,g);for(let E of g){let S=document.createElement("style");l&&S.setAttribute("nonce",l),S.textContent=E,this.shadowRoot.appendChild(S)}let b=r.getExternalStyles?.();if(b)for(let E of b){let S=Sw(E,o);l&&S.setAttribute("nonce",l),this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},If=class extends Ef{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,a,l,u,f){super(e,o,a,l,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let g=i.styles;this.styles=f?jD(f,g):g,this.styleUrls=i.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Vc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Y_=class extends If{contentAttr;hostAttr;constructor(e,t,i,r,o,a,l,u,f){let g=r+"-"+i.id;super(e,t,i,o,a,l,u,f,g),this.contentAttr=NU(g),this.hostAttr=LU(g)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var J_=class n extends gf{supportsDOMEvents=!0;static makeCurrent(){lw(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=FU();return t==null?null:VU(t)}resetBaseElement(){Sf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xw(document.cookie,e)}},Sf=null;function FU(){return Sf=Sf||document.head.querySelector("base"),Sf?Sf.getAttribute("href"):null}function VU(n){return new URL(n,document.baseURI).pathname}var BU=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),zD=["alt","control","meta","shift"],UU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},HD=(()=>{class n extends Cf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let a=n.parseEventName(i),l=n.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>br().onAndCancel(t,a.domEventName,l,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),zD.forEach(f=>{let g=i.indexOf(f);g>-1&&(i.splice(g,1),a+=f+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(t,i){let r=UU[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),zD.forEach(a=>{if(a!==r){let l=jU[a];l(t)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Be(Sn))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function Aw(n,e,t){let i=J({rootComponent:n,platformRef:t?.platformRef},zU(e));return lD(i)}function zU(n){return{appProviders:[...WU,...n?.providers??[]],platformProviders:qU}}function HU(){J_.makeCurrent()}function $U(){return new Rr}function GU(){return px(document),document}var qU=[{provide:_s,useValue:Cw},{provide:g_,useValue:HU,multi:!0},{provide:Sn,useFactory:GU}];var WU=[{provide:Fh,useValue:"root"},{provide:Rr,useFactory:$U},{provide:Q_,useClass:Z_,multi:!0,deps:[Sn]},{provide:Q_,useClass:HD,multi:!0,deps:[Sn]},Dw,Tw,Pw,{provide:Bc,useExisting:Dw},{provide:wf,useClass:BU},[]];var $D=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(Be(Sn))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qe="primary",Bf=Symbol("RouteTitle"),Fw=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qc(n){return new Fw(n)}function JD(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],l=n[o];if(a[0]===":")r[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ZU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Oo(n[t],e[t]))return!1;return!0}function Oo(n,e){let t=n?Vw(n):void 0,i=e?Vw(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!XD(n[r],e[r]))return!1;return!0}function Vw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function XD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function eA(n){return n.length>0?n[n.length-1]:null}function Ss(n){return pb(n)?n:bs(n)?Rt(Promise.resolve(n)):Se(n)}var YU={exact:nA,subset:iA},tA={exact:QU,subset:JU,ignored:()=>!0};function GD(n,e,t){return YU[t.paths](n.root,e.root,t.matrixParams)&&tA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function QU(n,e){return Oo(n,e)}function nA(n,e,t){if(!Zc(n.segments,e.segments)||!t0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!nA(n.children[i],e.children[i],t))return!1;return!0}function JU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>XD(n[t],e[t]))}function iA(n,e,t){return rA(n,e,e.segments,t)}function rA(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Zc(r,t)||e.hasChildren()||!t0(r,t,i))}else if(n.segments.length===t.length){if(!Zc(n.segments,t)||!t0(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!iA(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Zc(n.segments,r)||!t0(n.segments,r,i)||!n.children[qe]?!1:rA(n.children[qe],e,o,i)}}function t0(n,e,t){return e.every((i,r)=>tA[t](n[r].parameters,i.parameters))}var Ao=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Mt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Qc(this.queryParams),this._queryParamMap}toString(){return tj.serialize(this)}},Mt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return n0(this)}},Pa=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qc(this.parameters),this._parameterMap}toString(){return sA(this)}};function XU(n,e){return Zc(n,e)&&n.every((t,i)=>Oo(t.parameters,e[i].parameters))}function Zc(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function ej(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===qe&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==qe&&(t=t.concat(e(r,i)))}),t}var Jc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>new Ta,providedIn:"root"})}return n})(),Ta=class{parse(e){let t=new Uw(e);return new Ao(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Mf(e.root,!0)}`,i=rj(e.queryParams),r=typeof e.fragment=="string"?`#${nj(e.fragment)}`:"";return`${t}${i}${r}`}},tj=new Ta;function n0(n){return n.segments.map(e=>sA(e)).join("/")}function Mf(n,e){if(!n.hasChildren())return n0(n);if(e){let t=n.children[qe]?Mf(n.children[qe],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==qe&&i.push(`${r}:${Mf(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=ej(n,(i,r)=>r===qe?[Mf(n.children[qe],!1)]:[`${r}:${Mf(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[qe]!=null?`${n0(n)}/${t[0]}`:`${n0(n)}/(${t.join("//")})`}}function oA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function X_(n){return oA(n).replace(/%3B/gi,";")}function nj(n){return encodeURI(n)}function Bw(n){return oA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function i0(n){return decodeURIComponent(n)}function qD(n){return i0(n.replace(/\+/g,"%20"))}function sA(n){return`${Bw(n.path)}${ij(n.parameters)}`}function ij(n){return Object.entries(n).map(([e,t])=>`;${Bw(e)}=${Bw(t)}`).join("")}function rj(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${X_(t)}=${X_(r)}`).join("&"):`${X_(t)}=${X_(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var oj=/^[^\/()?;#]+/;function kw(n){let e=n.match(oj);return e?e[0]:""}var sj=/^[^\/()?;=#]+/;function aj(n){let e=n.match(sj);return e?e[0]:""}var cj=/^[^=?&#]+/;function lj(n){let e=n.match(cj);return e?e[0]:""}var uj=/^[^&#]+/;function dj(n){let e=n.match(uj);return e?e[0]:""}var Uw=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mt([],{}):new Mt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[qe]=new Mt(e,t)),i}parseSegment(){let e=kw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new le(4009,!1);return this.capture(e),new Pa(i0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=aj(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=kw(this.remaining);r&&(i=r,this.capture(i))}e[i0(t)]=i0(i)}parseQueryParam(e){let t=lj(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=dj(this.remaining);a&&(i=a,this.capture(i))}let r=qD(t),o=qD(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=kw(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new le(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=qe);let a=this.parseChildren();t[o??qe]=Object.keys(a).length===1&&a[qe]?a[qe]:new Mt([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new le(4011,!1)}};function aA(n){return n.segments.length>0?new Mt([],{[qe]:n}):n}function cA(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=cA(r);if(i===qe&&o.segments.length===0&&o.hasChildren())for(let[a,l]of Object.entries(o.children))e[a]=l;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Mt(n.segments,e);return hj(t)}function hj(n){if(n.numberOfChildren===1&&n.children[qe]){let e=n.children[qe];return new Mt(n.segments.concat(e.segments),e.children)}return n}function Oa(n){return n instanceof Ao}function lA(n,e,t=null,i=null){let r=uA(n);return dA(r,e,t,i)}function uA(n){let e;function t(o){let a={};for(let u of o.children){let f=t(u);a[u.outlet]=f}let l=new Mt(o.url,a);return o===n&&(e=l),l}let i=t(n.root),r=aA(i);return e??r}function dA(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Rw(r,r,r,t,i);let o=fj(e);if(o.toRoot())return Rw(r,r,new Mt([],{}),t,i);let a=pj(o,r,n),l=a.processChildren?Tf(a.segmentGroup,a.index,o.commands):fA(a.segmentGroup,a.index,o.commands);return Rw(r,a.segmentGroup,l,t,i)}function r0(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Df(n){return typeof n=="object"&&n!=null&&n.outlets}function Rw(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(g=>`${g}`):`${f}`});let a;n===e?a=t:a=hA(n,e,t);let l=aA(cA(a));return new Ao(l,o,r)}function hA(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=hA(o,e,t)}),new Mt(n.segments,i)}var o0=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&r0(i[0]))throw new le(4003,!1);let r=i.find(Df);if(r&&r!==eA(i))throw new le(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new o0(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([u,f])=>{l[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?t=!0:l===".."?e++:l!=""&&r.push(l))}),r):[...r,o]},[]);return new o0(t,e,i)}var Uu=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function pj(n,e,t){if(n.isAbsolute)return new Uu(e,!0,0);if(!t)return new Uu(e,!1,NaN);if(t.parent===null)return new Uu(t,!0,0);let i=r0(n.commands[0])?0:1,r=t.segments.length-1+i;return gj(t,r,n.numberOfDoubleDots)}function gj(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new le(4005,!1);r=i.segments.length}return new Uu(i,!1,r-o)}function mj(n){return Df(n[0])?n[0].outlets:{[qe]:n}}function fA(n,e,t){if(n??=new Mt([],{}),n.segments.length===0&&n.hasChildren())return Tf(n,e,t);let i=_j(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Mt(n.segments.slice(0,i.pathIndex),{});return o.children[qe]=new Mt(n.segments.slice(i.pathIndex),n.children),Tf(o,0,r)}else return i.match&&r.length===0?new Mt(n.segments,{}):i.match&&!n.hasChildren()?jw(n,e,t):i.match?Tf(n,0,r):jw(n,e,t)}function Tf(n,e,t){if(t.length===0)return new Mt(n.segments,{});{let i=mj(t),r={};if(Object.keys(i).some(o=>o!==qe)&&n.children[qe]&&n.numberOfChildren===1&&n.children[qe].segments.length===0){let o=Tf(n.children[qe],e,t);return new Mt(n.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=fA(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new Mt(n.segments,r)}}function _j(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let a=n.segments[r],l=t[i];if(Df(l))break;let u=`${l}`,f=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!KD(u,f,a))return o;i+=2}else{if(!KD(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function jw(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Df(o)){let u=vj(o.outlets);return new Mt(i,u)}if(r===0&&r0(t[0])){let u=n.segments[e];i.push(new Pa(u.path,WD(t[0]))),r++;continue}let a=Df(o)?o.outlets[qe]:`${o}`,l=r<t.length-1?t[r+1]:null;a&&l&&r0(l)?(i.push(new Pa(a,WD(l))),r+=2):(i.push(new Pa(a,{})),r++)}return new Mt(i,{})}function vj(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=jw(new Mt([],{}),0,i))}),e}function WD(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function KD(n,e,t){return n==t.path&&Oo(e,t.parameters)}var ju="imperative",Un=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Un||{}),rr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Da=class extends rr{type=Un.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},or=class extends rr{urlAfterRedirects;type=Un.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Oi=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Oi||{}),Hu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Hu||{}),Do=class extends rr{reason;code;type=Un.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ko=class extends rr{reason;code;type=Un.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},$u=class extends rr{error;target;type=Un.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Af=class extends rr{urlAfterRedirects;state;type=Un.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},s0=class extends rr{urlAfterRedirects;state;type=Un.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},a0=class extends rr{urlAfterRedirects;state;shouldActivate;type=Un.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},c0=class extends rr{urlAfterRedirects;state;type=Un.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},l0=class extends rr{urlAfterRedirects;state;type=Un.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},u0=class{route;type=Un.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},d0=class{route;type=Un.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},h0=class{snapshot;type=Un.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},f0=class{snapshot;type=Un.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},p0=class{snapshot;type=Un.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},g0=class{snapshot;type=Un.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gu=class{routerEvent;position;anchor;type=Un.Scroll;constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},kf=class{},qu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function yj(n){return!(n instanceof kf)&&!(n instanceof qu)}function bj(n,e){return n.providers&&!n._injector&&(n._injector=Ru(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Wr(n){return n.outlet||qe}function xj(n,e){let t=n.filter(i=>Wr(i)===e);return t.push(...n.filter(i=>Wr(i)!==e)),t}function Zu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var m0=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Zu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Xc(this.rootInjector)}},Xc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new m0(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(Be(vn))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_0=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=zw(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=zw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Hw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Hw(e,this._root).map(t=>t.value)}};function zw(n,e){if(n===e.value)return e;for(let t of e.children){let i=zw(n,t);if(i)return i}return null}function Hw(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Hw(n,t);if(i.length)return i.unshift(e),i}return[]}var ir=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Bu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Rf=class extends _0{snapshot;constructor(e,t){super(e),this.snapshot=t,Qw(this,e)}toString(){return this.snapshot.toString()}};function pA(n){let e=wj(n),t=new _t([new Pa("",{})]),i=new _t({}),r=new _t({}),o=new _t({}),a=new _t(""),l=new gi(t,i,o,a,r,qe,n,e.root);return l.snapshot=e.root,new Rf(new ir(l,[]),e)}function wj(n){let e={},t={},i={},o=new Yc([],e,i,"",t,qe,n,null,{});return new Nf("",new ir(o,[]))}var gi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,a,l,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ue(f=>f[Bf]))??Se(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>Qc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>Qc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function v0(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:J(J({},e.params),n.params),data:J(J({},e.data),n.data),resolve:J(J(J(J({},n.data),e.data),r?.data),n._resolvedData)}:i={params:J({},n.params),data:J({},n.data),resolve:J(J({},n.data),n._resolvedData??{})},r&&mA(r)&&(i.resolve[Bf]=r.title),i}var Yc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Bf]}constructor(e,t,i,r,o,a,l,u,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Nf=class extends _0{url;constructor(e,t){super(t),this.url=e,Qw(this,t)}toString(){return gA(this._root)}};function Qw(n,e){e.value._routerState=n,e.children.forEach(t=>Qw(n,t))}function gA(n){let e=n.children.length>0?` { ${n.children.map(gA).join(", ")} } `:"";return`${n.value}${e}`}function Nw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Oo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Oo(e.params,t.params)||n.paramsSubject.next(t.params),ZU(e.url,t.url)||n.urlSubject.next(t.url),Oo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $w(n,e){let t=Oo(n.params,e.params)&&XU(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||$w(n.parent,e.parent))}function mA(n){return typeof n.title=="string"||n.title===null}var _A=new ye(""),Uf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=qe;activateEvents=new an;deactivateEvents=new an;attachEvents=new an;detachEvents=new an;routerOutletData=cD();parentContexts=F(Xc);location=F(ys);changeDetector=F(Po);inputBinder=F(jf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new le(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new le(4013,!1);this._activatedRoute=t;let r=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new Gw(t,l,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Gt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Eo]})}return n})(),Gw=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===gi?this.route:e===Xc?this.childContexts:e===_A?this.outletData:this.parent.get(e,t)}},jf=new ye(""),Jw=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=Ii([i.queryParams,i.params,i.data]).pipe(ni(([o,a,l],u)=>(l=J(J(J({},o),a),l),u===0?Se(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let a=uD(i.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Xw=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=st({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&oe(0,"router-outlet")},dependencies:[Uf],encapsulation:2})}return n})();function eC(n){let e=n.children&&n.children.map(eC),t=e?ve(J({},n),{children:e}):J({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qe&&(t.component=Xw),t}function Cj(n,e,t){let i=Lf(n,e._root,t?t._root:void 0);return new Rf(i,e)}function Lf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=Ej(n,e,t);return new ir(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(l=>Lf(n,l)),a}}let i=Ij(e.value),r=e.children.map(o=>Lf(n,o));return new ir(i,r)}}function Ej(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Lf(n,i,r);return Lf(n,i)})}function Ij(n){return new gi(new _t(n.url),new _t(n.params),new _t(n.queryParams),new _t(n.fragment),new _t(n.data),n.outlet,n.component,n)}var Wu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},vA="ngNavigationCancelingError";function y0(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Oa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=yA(!1,Oi.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function yA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[vA]=!0,t.cancellationCode=e,t}function Sj(n){return bA(n)&&Oa(n.url)}function bA(n){return!!n&&n[vA]}var Mj=(n,e,t,i)=>ue(r=>(new qw(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),qw=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Nw(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Bu(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Bu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Bu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Bu(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new g0(o.value.snapshot))}),e.children.length&&this.forwardEvent(new f0(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Nw(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),Nw(l.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},b0=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Pj(n,e,t){let i=n._root,r=e?e._root:null;return Pf(i,r,t,[i.value])}function Tj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Yu(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Db(n)?n:e.get(n):i}function Pf(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Bu(e);return n.children.forEach(a=>{Oj(a,o[a.value.outlet],t,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,l])=>Of(l,t.getContext(a),r)),r}function Oj(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=Dj(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new b0(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Pf(n,e,l?l.children:null,i,r):Pf(n,e,t,i,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new zu(l.outlet.component,a))}else a&&Of(e,l,r),r.canActivateChecks.push(new b0(i)),o.component?Pf(n,null,l?l.children:null,i,r):Pf(n,null,t,i,r);return r}function Dj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Zc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zc(n.url,e.url)||!Oo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$w(n,e)||!Oo(n.queryParams,e.queryParams);case"paramsChange":default:return!$w(n,e)}}function Of(n,e,t){let i=Bu(n),r=n.value;Object.entries(i).forEach(([o,a])=>{r.component?e?Of(a,e.children.getContext(o),t):Of(a,null,t):Of(a,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new zu(e.outlet.component,r)):t.canDeactivateChecks.push(new zu(null,r)):t.canDeactivateChecks.push(new zu(null,r))}function zf(n){return typeof n=="function"}function Aj(n){return typeof n=="boolean"}function kj(n){return n&&zf(n.canLoad)}function Rj(n){return n&&zf(n.canActivate)}function Nj(n){return n&&zf(n.canActivateChild)}function Lj(n){return n&&zf(n.canDeactivate)}function Fj(n){return n&&zf(n.canMatch)}function xA(n){return n instanceof kr||n?.name==="EmptyError"}var e0=Symbol("INITIAL_VALUE");function Ku(){return ni(n=>Ii(n.map(e=>e.pipe(qn(1),Vi(e0)))).pipe(ue(e=>{for(let t of e)if(t!==!0){if(t===e0)return e0;if(t===!1||Vj(t))return t}return!0}),Si(e=>e!==e0),qn(1)))}function Vj(n){return Oa(n)||n instanceof Wu}function Bj(n,e){return _n(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?Se(ve(J({},t),{guardsResult:!0})):Uj(a,i,r,n).pipe(_n(l=>l&&Aj(l)?jj(i,o,n,e):Se(l)),ue(l=>ve(J({},t),{guardsResult:l})))})}function Uj(n,e,t,i){return Rt(n).pipe(_n(r=>qj(r.component,r.route,t,e,i)),cs(r=>r!==!0,!0))}function jj(n,e,t,i){return Rt(e).pipe(da(r=>pu(Hj(r.route.parent,i),zj(r.route,i),Gj(n,r.path,t),$j(n,r.route,t))),cs(r=>r!==!0,!0))}function zj(n,e){return n!==null&&e&&e(new p0(n)),Se(!0)}function Hj(n,e){return n!==null&&e&&e(new h0(n)),Se(!0)}function $j(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Se(!0);let r=i.map(o=>Th(()=>{let a=Zu(e)??t,l=Yu(o,a),u=Rj(l)?l.canActivate(e,n):En(a,()=>l(e,n));return Ss(u).pipe(cs())}));return Se(r).pipe(Ku())}function Gj(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>Tj(a)).filter(a=>a!==null).map(a=>Th(()=>{let l=a.guards.map(u=>{let f=Zu(a.node)??t,g=Yu(u,f),b=Nj(g)?g.canActivateChild(i,n):En(f,()=>g(i,n));return Ss(b).pipe(cs())});return Se(l).pipe(Ku())}));return Se(o).pipe(Ku())}function qj(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Se(!0);let a=o.map(l=>{let u=Zu(e)??r,f=Yu(l,u),g=Lj(f)?f.canDeactivate(n,e,t,i):En(u,()=>f(n,e,t,i));return Ss(g).pipe(cs())});return Se(a).pipe(Ku())}function Wj(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Se(!0);let o=r.map(a=>{let l=Yu(a,n),u=kj(l)?l.canLoad(e,t):En(n,()=>l(e,t));return Ss(u)});return Se(o).pipe(Ku(),wA(i))}function wA(n){return Hg(Wn(e=>{if(typeof e!="boolean")throw y0(n,e)}),ue(e=>e===!0))}function Kj(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Se(!0);let o=r.map(a=>{let l=Yu(a,n),u=Fj(l)?l.canMatch(e,t):En(n,()=>l(e,t));return Ss(u)});return Se(o).pipe(Ku(),wA(i))}var Ff=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Vf=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Vu(n){return fu(new Ff(n))}function Zj(n){return fu(new le(4e3,!1))}function Yj(n){return fu(yA(!1,Oi.GuardRejected))}var Ww=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Se(i);if(r.numberOfChildren>1||!r.children[qe])return Zj(`${e.redirectTo}`);r=r.children[qe]}}applyRedirectCommands(e,t,i,r,o){return Qj(t,r,o).pipe(ue(a=>{if(a instanceof Ao)throw new Vf(a);let l=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,i);if(a[0]==="/")throw new Vf(l);return l}))}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new Ao(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);i[r]=t[l]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),a={};return Object.entries(t.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(e,u,i,r)}),new Mt(o,a)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new le(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function Qj(n,e,t){if(typeof n=="string")return Se(n);let i=n,{queryParams:r,fragment:o,routeConfig:a,url:l,outlet:u,params:f,data:g,title:b}=e;return Ss(En(t,()=>i({params:f,data:g,queryParams:r,fragment:o,routeConfig:a,url:l,outlet:u,title:b})))}var Kw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jj(n,e,t,i,r){let o=CA(n,e,t);return o.matched?(i=bj(e,i),Kj(i,e,t,r).pipe(ue(a=>a===!0?o:J({},Kw)))):Se(o)}function CA(n,e,t){if(e.path==="**")return Xj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?J({},Kw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||JD)(t,n,e);if(!r)return J({},Kw);let o={};Object.entries(r.posParams??{}).forEach(([l,u])=>{o[l]=u.path});let a=r.consumed.length>0?J(J({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function Xj(n){return{matched:!0,parameters:n.length>0?eA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ZD(n,e,t,i){return t.length>0&&nz(n,t,i)?{segmentGroup:new Mt(e,tz(i,new Mt(t,n.children))),slicedSegments:[]}:t.length===0&&iz(n,t,i)?{segmentGroup:new Mt(n.segments,ez(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Mt(n.segments,n.children),slicedSegments:t}}function ez(n,e,t,i){let r={};for(let o of t)if(w0(n,e,o)&&!i[Wr(o)]){let a=new Mt([],{});r[Wr(o)]=a}return J(J({},i),r)}function tz(n,e){let t={};t[qe]=e;for(let i of n)if(i.path===""&&Wr(i)!==qe){let r=new Mt([],{});t[Wr(i)]=r}return t}function nz(n,e,t){return t.some(i=>w0(n,e,i)&&Wr(i)!==qe)}function iz(n,e,t){return t.some(i=>w0(n,e,i))}function w0(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function rz(n,e,t){return e.length===0&&!n.children[t]}var Zw=class{};function oz(n,e,t,i,r,o,a="emptyOnly"){return new Yw(n,e,t,i,r,a,o).recognize()}var sz=31,Yw=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,a,l){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new Ww(this.urlSerializer,this.urlTree)}noMatchError(e){return new le(4002,`'${e.segmentGroup}'`)}recognize(){let e=ZD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:t,rootSnapshot:i})=>{let r=new ir(i,t),o=new Nf("",r),a=lA(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new Yc([],Object.freeze({}),Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),qe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,qe,t).pipe(ue(i=>({children:i,rootSnapshot:t})),as(i=>{if(i instanceof Vf)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ff?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(ue(a=>a instanceof ir?[a]:[]))}processChildren(e,t,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return Rt(o).pipe(da(a=>{let l=i.children[a],u=xj(t,a);return this.processSegmentGroup(e,u,l,a,r)}),dm((a,l)=>(a.push(...l),a)),ha(null),mb(),_n(a=>{if(a===null)return Vu(i);let l=EA(a);return az(l),Se(l)}))}processSegment(e,t,i,r,o,a,l){return Rt(t).pipe(da(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,o,a,l).pipe(as(f=>{if(f instanceof Ff)return Se(null);throw f}))),cs(u=>!!u),as(u=>{if(xA(u))return rz(i,r,o)?Se(new Zw):Vu(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,o,a,l,u){return Wr(i)!==a&&(a===qe||!w0(r,o,i))?Vu(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,a,u):Vu(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,a,l){let{matched:u,parameters:f,consumedSegments:g,positionalParamSegments:b,remainingSegments:E}=CA(t,r,o);if(!u)return Vu(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sz&&(this.allowRedirects=!1));let S=new Yc(o,f,Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,YD(r),Wr(r),r.component??r._loadedComponent??null,r,QD(r)),R=v0(S,l,this.paramsInheritanceStrategy);return S.params=Object.freeze(R.params),S.data=Object.freeze(R.data),this.applyRedirects.applyRedirectCommands(g,r.redirectTo,b,S,e).pipe(ni(q=>this.applyRedirects.lineralizeSegments(r,q)),_n(q=>this.processSegment(e,i,t,q.concat(E),a,!1,l)))}matchSegmentAgainstRoute(e,t,i,r,o,a){let l=Jj(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),l.pipe(ni(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(ni(({routes:f})=>{let g=i._loadedInjector??e,{parameters:b,consumedSegments:E,remainingSegments:S}=u,R=new Yc(E,b,Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,YD(i),Wr(i),i.component??i._loadedComponent??null,i,QD(i)),K=v0(R,a,this.paramsInheritanceStrategy);R.params=Object.freeze(K.params),R.data=Object.freeze(K.data);let{segmentGroup:q,slicedSegments:ne}=ZD(t,E,S,f);if(ne.length===0&&q.hasChildren())return this.processChildren(g,f,q,R).pipe(ue(we=>new ir(R,we)));if(f.length===0&&ne.length===0)return Se(new ir(R,[]));let fe=Wr(i)===o;return this.processSegment(g,f,q,ne,fe?qe:o,!0,R).pipe(ue(we=>new ir(R,we instanceof ir?[we]:[])))}))):Vu(t)))}getChildConfig(e,t,i){return t.children?Se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Se({routes:t._loadedRoutes,injector:t._loadedInjector}):Wj(e,t,i,this.urlSerializer).pipe(_n(r=>r?this.configLoader.loadChildren(e,t).pipe(Wn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Yj(t))):Se({routes:[],injector:e})}};function az(n){n.sort((e,t)=>e.value.outlet===qe?-1:t.value.outlet===qe?1:e.value.outlet.localeCompare(t.value.outlet))}function cz(n){let e=n.value.routeConfig;return e&&e.path===""}function EA(n){let e=[],t=new Set;for(let i of n){if(!cz(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=EA(i.children);e.push(new ir(i.value,r))}return e.filter(i=>!t.has(i))}function YD(n){return n.data||{}}function QD(n){return n.resolve||{}}function lz(n,e,t,i,r,o){return _n(a=>oz(n,e,t,i,a.extractedUrl,r,o).pipe(ue(({state:l,tree:u})=>ve(J({},a),{targetSnapshot:l,urlAfterRedirects:u}))))}function uz(n,e){return _n(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Se(t);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of IA(u))a.add(f);let l=0;return Rt(a).pipe(da(u=>o.has(u)?dz(u,i,n,e):(u.data=v0(u,u.parent,n).resolve,Se(void 0))),Wn(()=>l++),gu(1),_n(u=>l===a.size?Se(t):Li))})}function IA(n){let e=n.children.map(t=>IA(t)).flat();return[n,...e]}function dz(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!mA(r)&&(o[Bf]=r.title),Th(()=>(n.data=v0(n,n.parent,t).resolve,hz(o,n,e,i).pipe(ue(a=>(n._resolvedData=a,n.data=J(J({},n.data),a),null)))))}function hz(n,e,t,i){let r=Vw(n);if(r.length===0)return Se({});let o={};return Rt(r).pipe(_n(a=>fz(n[a],e,t,i).pipe(cs(),Wn(l=>{if(l instanceof Wu)throw y0(new Ta,l);o[a]=l}))),gu(1),ue(()=>o),as(a=>xA(a)?Li:fu(a)))}function fz(n,e,t,i){let r=Zu(e)??i,o=Yu(n,r),a=o.resolve?o.resolve(e,t):En(r,()=>o(e,t));return Ss(a)}function Lw(n){return ni(e=>{let t=n(e);return t?Rt(t).pipe(ue(()=>e)):Se(e)})}var tC=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===qe);return i}getResolvedTitleForRoute(t){return t.data[Bf]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(SA),providedIn:"root"})}return n})(),SA=(()=>{class n extends tC{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Be($D))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Aa=new ye("",{providedIn:"root",factory:()=>({})}),el=new ye(""),C0=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=F(tw);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Se(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Ss(En(t,()=>i.loadComponent())).pipe(ue(PA),ni(TA),Wn(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Dh(()=>{this.componentLoaders.delete(i)})),o=new lu(r,()=>new Qt).pipe(cu());return this.componentLoaders.set(i,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=MA(i,this.compiler,t,this.onLoadEndListener).pipe(Dh(()=>{this.childrenLoaders.delete(i)})),a=new lu(o,()=>new Qt).pipe(cu());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MA(n,e,t,i){return Ss(En(t,()=>n.loadChildren())).pipe(ue(PA),ni(TA),_n(r=>r instanceof T_||Array.isArray(r)?Se(r):Rt(e.compileModuleAsync(r))),ue(r=>{i&&i(n);let o,a,l=!1;return Array.isArray(r)?(a=r,l=!0):(o=r.create(t).injector,a=o.get(el,[],{optional:!0,self:!0}).flat()),{routes:a.map(eC),injector:o}}))}function pz(n){return n&&typeof n=="object"&&"default"in n}function PA(n){return pz(n)?n.default:n}function TA(n){return Se(n)}var E0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(gz),providedIn:"root"})}return n})(),gz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nC=new ye(""),iC=new ye("");function OA(n,e,t){let i=n.get(iC),r=n.get(Sn);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),l=r.startViewTransition(()=>(o(),mz(n)));l.ready.catch(f=>{});let{onViewTransitionCreated:u}=i;return u&&En(n,()=>u({transition:l,from:e,to:t})),a}function mz(n){return new Promise(e=>{sf({read:()=>setTimeout(e)},{injector:n})})}var rC=new ye(""),I0=(()=>{class n{currentNavigation=Bt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Qt;transitionAbortWithErrorSubject=new Qt;configLoader=F(C0);environmentInjector=F(vn);destroyRef=F(Ur);urlSerializer=F(Jc);rootContexts=F(Xc);location=F(Ma);inputBindingEnabled=F(jf,{optional:!0})!==null;titleStrategy=F(tC);options=F(Aa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=F(E0);createViewTransition=F(nC,{optional:!0});navigationErrorHandler=F(rC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Se(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new u0(r)),i=r=>this.events.next(new d0(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;Tn(()=>{this.transitions?.next(ve(J({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(t){return this.transitions=new _t(null),this.transitions.pipe(Si(i=>i!==null),ni(i=>{let r=!1;return Se(i).pipe(ni(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Oi.SupersededByNewNavigation),Li;this.currentTransition=i,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ve(J({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload")return this.events.next(new ko(o.id,this.urlSerializer.serialize(o.rawUrl),"",Hu.IgnoredSameUrlNavigation)),o.resolve(!1),Li;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Se(o).pipe(ni(u=>(this.events.next(new Da(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Li:Promise.resolve(u))),lz(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Wn(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=u.urlAfterRedirects,g));let f=new Af(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:f,source:g,restoredState:b,extras:E}=o,S=new Da(u,this.urlSerializer.serialize(f),g,b);this.events.next(S);let R=pA(this.rootComponentType).snapshot;return this.currentTransition=i=ve(J({},o),{targetSnapshot:R,urlAfterRedirects:f,extras:ve(J({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(K=>(K.finalUrl=f,K)),Se(i)}else return this.events.next(new ko(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Hu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Li}),Wn(o=>{let a=new s0(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ue(o=>(this.currentTransition=i=ve(J({},o),{guards:Pj(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),Bj(this.environmentInjector,o=>this.events.next(o)),Wn(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw y0(this.urlSerializer,o.guardsResult);let a=new a0(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Si(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Oi.GuardRejected),!1)),Lw(o=>{if(o.guards.canActivateChecks.length!==0)return Se(o).pipe(Wn(a=>{let l=new c0(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),ni(a=>{let l=!1;return Se(a).pipe(uz(this.paramsInheritanceStrategy,this.environmentInjector),Wn({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Oi.NoDataFromResolver)}}))}),Wn(a=>{let l=new l0(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Lw(o=>{let a=l=>{let u=[];if(l.routeConfig?.loadComponent){let f=Zu(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(f,l.routeConfig).pipe(Wn(g=>{l.component=g}),ue(()=>{})))}for(let f of l.children)u.push(...a(f));return u};return Ii(a(o.targetSnapshot.root)).pipe(ha(null),qn(1))}),Lw(()=>this.afterPreactivation()),ni(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return l?Rt(l).pipe(ue(()=>i)):Se(i)}),ue(o=>{let a=Cj(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=ve(J({},o),{targetRouterState:a}),this.currentNavigation.update(l=>(l.targetRouterState=a,l)),i}),Wn(()=>{this.events.next(new kf)}),Mj(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),qn(1),mu(new Ae(o=>{let a=i.abortController.signal,l=()=>o.next();return a.addEventListener("abort",l),()=>a.removeEventListener("abort",l)}).pipe(Si(()=>!r&&!i.targetRouterState),Wn(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Oi.Aborted)}))),Wn({next:o=>{r=!0,this.lastSuccessfulNavigation=Tn(this.currentNavigation),this.events.next(new or(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),mu(this.transitionAbortWithErrorSubject.pipe(Wn(o=>{throw o}))),Dh(()=>{r||this.cancelNavigationTransition(i,"",Oi.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),as(o=>{if(this.destroyed)return i.resolve(!1),Li;if(r=!0,bA(o))this.events.next(new Do(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),Sj(o)?this.events.next(new qu(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new $u(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let l=En(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Wu){let{message:u,cancellationCode:f}=y0(this.urlSerializer,l);this.events.next(new Do(i.id,this.urlSerializer.serialize(i.extractedUrl),u,f)),this.events.next(new qu(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Li}))}))}cancelNavigationTransition(t,i,r){let o=new Do(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=Tn(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _z(n){return n!==ju}var DA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(vz),providedIn:"root"})}return n})(),x0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},vz=(()=>{class n extends x0{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Io(n)))(r||n)}})();static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AA=(()=>{class n{urlSerializer=F(Jc);options=F(Aa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=F(Ma);urlHandlingStrategy=F(E0);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ao;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,a=r??o;return a instanceof Ao?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=pA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(yz),providedIn:"root"})}return n})(),yz=(()=>{class n extends AA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Da?this.updateStateMemento():t instanceof ko?this.commitTransition(i):t instanceof Af?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof kf?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Do&&t.code!==Oi.SupersededByNewNavigation&&t.code!==Oi.Redirect?this.restoreHistory(i):t instanceof $u?this.restoreHistory(i,!0):t instanceof or&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:a}=i;if(this.location.isCurrentPathEqualTo(t)||o){let l=this.browserPageId,u=J(J({},a),this.generateNgRouterState(r,l));this.location.replaceState(t,"",u)}else{let l=J(J({},a),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",l)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Io(n)))(r||n)}})();static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S0(n,e){n.events.pipe(Si(t=>t instanceof or||t instanceof Do||t instanceof $u||t instanceof ko),ue(t=>t instanceof or||t instanceof ko?0:(t instanceof Do?t.code===Oi.Redirect||t.code===Oi.SupersededByNewNavigation:!1)?2:1),Si(t=>t!==2),qn(1)).subscribe(()=>{e()})}var bz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Et=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=F(Gx);stateManager=F(AA);options=F(Aa,{optional:!0})||{};pendingTasks=F(xo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=F(I0);urlSerializer=F(Jc);location=F(Ma);urlHandlingStrategy=F(E0);injector=F(vn);_events=new Qt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=F(DA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=F(el,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!F(jf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new un;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=Tn(this.navigationTransitions.currentNavigation);if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Do&&i.code!==Oi.Redirect&&i.code!==Oi.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof or)this.navigated=!0;else if(i instanceof qu){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=J({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_z(r.source)},a);this.scheduleNavigation(l,ju,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}yj(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ju,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let u=J({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(t);this.scheduleNavigation(l,i,a,o).catch(u=>{this.disposed||this.injector.get(Ti)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Tn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(eC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,f=u?this.currentUrlTree.fragment:a,g=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":g=J(J({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let b;try{let E=r?r.snapshot:this.routerState.snapshot.root;b=uA(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),b=this.currentUrlTree.root}return dA(b,t,g,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Oa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,ju,null,i)}navigate(t,i={skipLocationChange:!1}){return wz(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ma(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=J({},bz):i===!1?r=J({},xz):r=i,Oa(t))return GD(this.currentUrlTree,t,r);let o=this.parseUrl(t);return GD(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let l,u,f;a?(l=a.resolve,u=a.reject,f=a.promise):f=new Promise((b,E)=>{l=b,u=E});let g=this.pendingTasks.add();return S0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(b=>Promise.reject(b))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wz(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new le(4008,!1)}var Hi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Bt(null);get href(){return Tn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Qt;applicationErrorHandler=F(Ti);options=F(Aa,{optional:!0});constructor(t,i,r,o,a,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=l,this.reactiveHref.set(F(new R_("href"),{optional:!0}));let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,i=r=>r==="merge"||r==="preserve";t||=i(this.queryParamsHandling),t||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(r=>{r instanceof or&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Oa(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||i||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,u)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Oa(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(Oe(Et),Oe(gi),nf("tabindex"),Oe(yr),Oe(hi),Oe($r))};static \u0275dir=Gt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&X("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&St("href",r.reactiveHref(),bx)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Sa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Sa],replaceUrl:[2,"replaceUrl","replaceUrl",Sa],routerLink:"routerLink"},features:[Eo]})}return n})(),sC=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new an;constructor(t,i,r,o,a){this.router=t,this.element=i,this.renderer=r,this.cdr=o,this.link=a,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof or&&this.update()})}ngAfterContentInit(){Se(this.links.changes,Se(null)).pipe(ua()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Rt(t).pipe(ua()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){let i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let i=Cz(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?t.isActive(o,i):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(i){return new(i||n)(Oe(Et),Oe(hi),Oe(yr),Oe(Po),Oe(Hi,8))};static \u0275dir=Gt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&Qx(o,Hi,5),i&2){let a;hf(a=ff())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Eo]})}return n})();function Cz(n){return!!n.paths}var Hf=class{};var kA=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,i,r,o){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Si(t=>t instanceof or),da(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Ru(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(l,o.children??o._loadedRoutes))}return Rt(r).pipe(ua())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=Se(null);let o=r.pipe(_n(a=>a===null?Se(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(t,i);return Rt([o,a]).pipe(ua())}else return o})}static \u0275fac=function(i){return new(i||n)(Be(Et),Be(vn),Be(Hf),Be(C0))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RA=new ye(""),Ez=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=ju;restoredId=0;store={};constructor(t,i,r,o,a={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Da?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof or?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ko&&t.code===Hu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Gu))return;let i={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,i):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>P(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new Gu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){Bx()};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function aC(n,...e){return Ji([{provide:el,multi:!0,useValue:n},[],{provide:gi,useFactory:NA,deps:[Et]},{provide:uf,multi:!0,useFactory:LA},e.map(t=>t.\u0275providers)])}function NA(n){return n.routerState.root}function $f(n,e){return{\u0275kind:n,\u0275providers:e}}function LA(){let n=F(Jt);return e=>{let t=n.get(xs);if(e!==t.components[0])return;let i=n.get(Et),r=n.get(FA);n.get(cC)===1&&i.initialNavigation(),n.get(UA,null,{optional:!0})?.setUpPreloading(),n.get(RA,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var FA=new ye("",{factory:()=>new Qt}),cC=new ye("",{providedIn:"root",factory:()=>1});function VA(){let n=[{provide:mx,useValue:!0},{provide:cC,useValue:0},D_(()=>{let e=F(Jt);return e.get(uw,Promise.resolve()).then(()=>new Promise(i=>{let r=e.get(Et),o=e.get(FA);S0(r,()=>{i(!0)}),e.get(I0).afterPreactivation=()=>(i(!0),o.closed?Se(void 0):o),r.initialNavigation()}))})];return $f(2,n)}function BA(){let n=[D_(()=>{F(Et).setUpLocationChangeListener()}),{provide:cC,useValue:2}];return $f(3,n)}var UA=new ye("");function jA(n){return $f(0,[{provide:UA,useExisting:kA},{provide:Hf,useExisting:n}])}function zA(){return $f(8,[Jw,{provide:jf,useExisting:Jw}])}function HA(n){So("NgRouterViewTransitions");let e=[{provide:nC,useValue:OA},{provide:iC,useValue:J({skipNextTransition:!!n?.skipInitialTransition},n)}];return $f(9,e)}var $A=[Ma,{provide:Jc,useClass:Ta},Et,Xc,{provide:gi,useFactory:NA,deps:[Et]},C0,[]],Kr=(()=>{class n{constructor(){}static forRoot(t,i){return{ngModule:n,providers:[$A,[],{provide:el,multi:!0,useValue:t},[],i?.errorHandler?{provide:rC,useValue:i.errorHandler}:[],{provide:Aa,useValue:i||{}},i?.useHash?Sz():Mz(),Iz(),i?.preloadingStrategy?jA(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Pz(i):[],i?.bindToComponentInputs?zA().\u0275providers:[],i?.enableViewTransitions?HA().\u0275providers:[],Tz()]}}static forChild(t){return{ngModule:n,providers:[{provide:el,multi:!0,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Lr({})}return n})();function Iz(){return{provide:RA,useFactory:()=>{let n=F(LD),e=F(xt),t=F(Aa),i=F(I0),r=F(Jc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Ez(r,i,n,e,t)}}}function Sz(){return{provide:$r,useClass:yw}}function Mz(){return{provide:$r,useClass:V_}}function Pz(n){return[n.initialNavigation==="disabled"?BA().\u0275providers:[],n.initialNavigation==="enabledBlocking"?VA().\u0275providers:[]]}var oC=new ye("");function Tz(){return[{provide:oC,useFactory:LA},{provide:uf,multi:!0,useExisting:oC}]}var GA=()=>{};var KA=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Oz=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[t++],a=n[t++],l=n[t++],u=((r&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},M0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],a=r+1<n.length,l=a?n[r+1]:0,u=r+2<n.length,f=u?n[r+2]:0,g=o>>2,b=(o&3)<<4|l>>4,E=(l&15)<<2|f>>6,S=f&63;u||(S=64,a||(E=64)),i.push(t[g],t[b],t[E],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Oz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;let f=r<n.length?t[n.charAt(r)]:64;++r;let b=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||l==null||f==null||b==null)throw new uC;let E=o<<2|l>>4;if(i.push(E),f!==64){let S=l<<4&240|f>>2;if(i.push(S),b!==64){let R=f<<6&192|b;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},uC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Dz=function(n){let e=KA(n);return M0.encodeByteArray(e,!0)},Wf=function(n){return Dz(n).replace(/\./g,"")},P0=function(n){try{return M0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Az=()=>hC().__FIREBASE_DEFAULTS__,kz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Rz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&P0(n[1]);return e&&JSON.parse(e)},T0=()=>{try{return GA()||Az()||kz()||Rz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fC=n=>{var e,t;return(t=(e=T0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},O0=n=>{let e=fC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},pC=()=>{var n;return(n=T0())===null||n===void 0?void 0:n.config},gC=n=>{var e;return(e=T0())===null||e===void 0?void 0:e[`_${n}`]};var tl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function Yr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Qu(n){return P(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function D0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Wf(JSON.stringify(t)),Wf(JSON.stringify(a)),""].join(".")}var qf={};function Nz(){let n={prod:[],emulator:[]};for(let e of Object.keys(qf))qf[e]?n.emulator.push(e):n.prod.push(e);return n}function Lz(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var qA=!1;function Ju(n,e){if(typeof window>"u"||typeof document>"u"||!Yr(window.location.host)||qf[n]===e||qf[n]||qA)return;qf[n]=e;function t(E){return`__firebase__banner__${E}`}let i="__firebase__banner",o=Nz().prod.length>0;function a(){let E=document.getElementById(i);E&&E.remove()}function l(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function u(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{qA=!0,a()},E}function g(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function b(){let E=Lz(i),S=t("text"),R=document.getElementById(S)||document.createElement("span"),K=t("learnmore"),q=document.getElementById(K)||document.createElement("a"),ne=t("preprendIcon"),fe=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let we=E.element;l(we),g(q,K);let Re=f();u(fe,ne),we.append(fe,R,q,Re),document.body.appendChild(we)}o?(R.innerText="Preview backend disconnected.",fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zn())}function Fz(){var n;let e=(n=T0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function JA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XA(){let n=Zn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ek(){return!Fz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kf(){try{return typeof indexedDB=="object"}catch{return!1}}function tk(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Vz="FirebaseError",Di=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Vz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zr.prototype.create)}},Zr=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?Bz(o,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Di(r,l,i)}};function Bz(n,e){return n.replace(Uz,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Uz=/\{\$([^}]+)}/g;function nk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ro(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let o=n[r],a=e[r];if(WA(o)&&WA(a)){if(!Ro(o,a))return!1}else if(o!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function WA(n){return n!==null&&typeof n=="object"}function Xu(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ed(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function td(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ik(n,e){let t=new dC(n,e);return t.subscribe.bind(t)}var dC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");jz(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=lC),r.error===void 0&&(r.error=lC),r.complete===void 0&&(r.complete=lC);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lC(){}var zge=14400*1e3;function Ot(n){return n&&n._delegate?n._delegate:n}var oi=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var nl="[DEFAULT]";var mC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new tl;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hz(e))try{this.getOrInitializeService({instanceIdentifier:nl})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=nl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return P(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=nl){return this.instances.has(e)}getOptions(e=nl){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[o,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);let a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:zz(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=nl){return this.component?this.component.multipleInstances?e:nl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zz(n){return n===nl?void 0:n}function Hz(n){return n.instantiationMode==="EAGER"}var A0=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new mC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var $z=[],at=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(at||{}),Gz={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},qz=at.INFO,Wz={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},Kz=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Wz[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},No=class{constructor(e){this.name=e,this._logLevel=qz,this._logHandler=Kz,this._userLogHandler=null,$z.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}};var Zz=(n,e)=>e.some(t=>n instanceof t),rk,ok;function Yz(){return rk||(rk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qz(){return ok||(ok=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var sk=new WeakMap,vC=new WeakMap,ak=new WeakMap,_C=new WeakMap,bC=new WeakMap;function Jz(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Lo(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&sk.set(t,n)}).catch(()=>{}),bC.set(e,n),e}function Xz(n){if(vC.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});vC.set(n,e)}var yC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ak.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Lo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ck(n){yC=n(yC)}function e9(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(k0(this),e,...t);return ak.set(i,e.sort?e.sort():[e]),Lo(i)}:Qz().includes(n)?function(...e){return n.apply(k0(this),e),Lo(sk.get(this))}:function(...e){return Lo(n.apply(k0(this),e))}}function t9(n){return typeof n=="function"?e9(n):(n instanceof IDBTransaction&&Xz(n),Zz(n,Yz())?new Proxy(n,yC):n)}function Lo(n){if(n instanceof IDBRequest)return Jz(n);if(_C.has(n))return _C.get(n);let e=t9(n);return e!==n&&(_C.set(n,e),bC.set(e,n)),e}var k0=n=>bC.get(n);function uk(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){let a=indexedDB.open(n,e),l=Lo(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Lo(a.result),u.oldVersion,u.newVersion,Lo(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var n9=["get","getKey","getAll","getAllKeys","count"],i9=["put","add","delete","clear"],xC=new Map;function lk(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xC.get(e))return xC.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=i9.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||n9.includes(t)))return;let o=function(a,...l){return P(this,null,function*(){let u=this.transaction(a,r?"readwrite":"readonly"),f=u.store;return i&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),r&&u.done]))[0]})};return xC.set(e,o),o}ck(n=>ve(J({},n),{get:(e,t,i)=>lk(e,t)||n.get(e,t,i),has:(e,t)=>!!lk(e,t)||n.has(e,t)}));var CC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(r9(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function r9(n){let e=n.getComponent();return e?.type==="VERSION"}var EC="@firebase/app",dk="0.13.2";var Ms=new No("@firebase/app"),o9="@firebase/app-compat",s9="@firebase/analytics-compat",a9="@firebase/analytics",c9="@firebase/app-check-compat",l9="@firebase/app-check",u9="@firebase/auth",d9="@firebase/auth-compat",h9="@firebase/database",f9="@firebase/data-connect",p9="@firebase/database-compat",g9="@firebase/functions",m9="@firebase/functions-compat",_9="@firebase/installations",v9="@firebase/installations-compat",y9="@firebase/messaging",b9="@firebase/messaging-compat",x9="@firebase/performance",w9="@firebase/performance-compat",C9="@firebase/remote-config",E9="@firebase/remote-config-compat",I9="@firebase/storage",S9="@firebase/storage-compat",M9="@firebase/firestore",P9="@firebase/ai",T9="@firebase/firestore-compat",O9="firebase",D9="11.10.0";var IC="[DEFAULT]",A9={[EC]:"fire-core",[o9]:"fire-core-compat",[a9]:"fire-analytics",[s9]:"fire-analytics-compat",[l9]:"fire-app-check",[c9]:"fire-app-check-compat",[u9]:"fire-auth",[d9]:"fire-auth-compat",[h9]:"fire-rtdb",[f9]:"fire-data-connect",[p9]:"fire-rtdb-compat",[g9]:"fire-fn",[m9]:"fire-fn-compat",[_9]:"fire-iid",[v9]:"fire-iid-compat",[y9]:"fire-fcm",[b9]:"fire-fcm-compat",[x9]:"fire-perf",[w9]:"fire-perf-compat",[C9]:"fire-rc",[E9]:"fire-rc-compat",[I9]:"fire-gcs",[S9]:"fire-gcs-compat",[M9]:"fire-fst",[T9]:"fire-fst-compat",[P9]:"fire-vertex","fire-js":"fire-js",[O9]:"fire-js-all"};var Zf=new Map,k9=new Map,SC=new Map;function hk(n,e){try{n.container.addComponent(e)}catch(t){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sr(n){let e=n.name;if(SC.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;SC.set(e,n);for(let t of Zf.values())hk(t,n);for(let t of k9.values())hk(t,n);return!0}function Ra(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function si(n){return n==null?!1:n.settings!==void 0}var R9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ka=new Zr("app","Firebase",R9);var MC=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}};var Fo=D9;function OC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:IC,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw ka.create("bad-app-name",{appName:String(r)});if(t||(t=pC()),!t)throw ka.create("no-options");let o=Zf.get(r);if(o){if(Ro(t,o.options)&&Ro(i,o.config))return o;throw ka.create("duplicate-app",{appName:r})}let a=new A0(r);for(let u of SC.values())a.addComponent(u);let l=new MC(t,i,a);return Zf.set(r,l),l}function Ps(n=IC){let e=Zf.get(n);if(!e&&n===IC&&pC())return OC();if(!e)throw ka.create("no-app",{appName:n});return e}function R0(){return Array.from(Zf.values())}function jt(n,e,t){var i;let r=(i=A9[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(l.join(" "));return}sr(new oi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var N9="firebase-heartbeat-database",L9=1,Yf="firebase-heartbeat-store",wC=null;function mk(){return wC||(wC=uk(N9,L9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yf)}catch(t){console.warn(t)}}}}).catch(n=>{throw ka.create("idb-open",{originalErrorMessage:n.message})})),wC}function F9(n){return P(this,null,function*(){try{let t=(yield mk()).transaction(Yf),i=yield t.objectStore(Yf).get(_k(n));return yield t.done,i}catch(e){if(e instanceof Di)Ms.warn(e.message);else{let t=ka.create("idb-get",{originalErrorMessage:e?.message});Ms.warn(t.message)}}})}function fk(n,e){return P(this,null,function*(){try{let i=(yield mk()).transaction(Yf,"readwrite");yield i.objectStore(Yf).put(e,_k(n)),yield i.done}catch(t){if(t instanceof Di)Ms.warn(t.message);else{let i=ka.create("idb-set",{originalErrorMessage:t?.message});Ms.warn(i.message)}}})}function _k(n){return`${n.name}!${n.options.appId}`}var V9=1024,B9=30,PC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new TC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return P(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=pk();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>B9){let a=j9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ms.warn(i)}})}getHeartbeatsHeader(){return P(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=pk(),{heartbeatsToSend:i,unsentEntries:r}=U9(this._heartbeatsCache.heartbeats),o=Wf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ms.warn(t),""}})}};function pk(){return new Date().toISOString().substring(0,10)}function U9(n,e=V9){let t=[],i=n.slice();for(let r of n){let o=t.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),gk(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),gk(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var TC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return P(this,null,function*(){return Kf()?tk().then(()=>!0).catch(()=>!1):!1})}read(){return P(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield F9(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return P(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return fk(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return P(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return fk(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function gk(n){return Wf(JSON.stringify({version:2,heartbeats:n})).length}function j9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function z9(n){sr(new oi("platform-logger",e=>new CC(e),"PRIVATE")),sr(new oi("heartbeat",e=>new PC(e),"PRIVATE")),jt(EC,dk,n),jt(EC,dk,"esm2017"),jt("fire-js","")}z9("");var H9="firebase",$9="11.10.0";jt(H9,$9,"app");function vk(n){n===void 0&&(n=F(Jt));let e=n.get(Su);return t=>new Ae(i=>{let r=e.add(),o=!1;function a(){o||(r(),o=!0)}let l=t.subscribe({next:u=>{i.next(u),a()},complete:()=>{i.complete(),a()},error:u=>{i.error(u),a()}});return l.add(()=>{i.unsubscribe(),a()}),l})}var Vo=new fa("ANGULARFIRE2_VERSION");function rl(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Na=(n,e)=>{let t=e?[e]:R0(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},nd=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(nd||{}),yk=aw()&&typeof Zone<"u"?nd.WARN:nd.SILENT;var N0=class{zone;delegate;constructor(e,t=fb){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,o=function(a){r?r.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(o,t,i)}},Bo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=F(xt);this.outsideAngular=t.runOutsideAngular(()=>new N0(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new N0(typeof Zone>"u"?void 0:Zone.current,Ph))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bk=!1;function G9(n,e){!bk&&(yk>nd.SILENT||aw())&&(bk=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),yk>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function q9(n){let e=F(xt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function il(n){let e=F(xt,{optional:!0});return e?e.run(()=>n()):n()}var W9=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),En(t,()=>il(()=>n.apply(void 0,i)))),Pt=(n,e,t)=>(t||=e?nd.WARN:nd.VERBOSE,function(){let i,r=arguments,o,a,l;try{o=F(Bo),a=F(Su),l=F(vn)}catch{return G9(n,t),n.apply(this,r)}for(let f=0;f<arguments.length;f++)typeof r[f]=="function"&&(e&&(i||=il(()=>a.add())),r[f]=W9(r[f],i,l));let u=q9(()=>n.apply(this,r));return e?u instanceof Ae?u.pipe(ca(o.outsideAngular),aa(o.insideAngular),vk(l)):u instanceof Promise?il(()=>{let f=a.add();return new Promise((g,b)=>{u.then(E=>En(l,()=>il(()=>g(E))),E=>En(l,()=>il(()=>b(E)))).finally(f)})}):typeof u=="function"&&i?function(){return setTimeout(i,0),u.apply(this,arguments)}:il(()=>u):u instanceof Ae?u.pipe(ca(o.outsideAngular),aa(o.insideAngular)):il(()=>u)});var Qr=class{constructor(e){return e}},Ts=class{constructor(){return R0()}};function K9(n){return n&&n.length===1?n[0]:new Qr(Ps())}var DC=new ye("angularfire2._apps"),Z9={provide:Qr,useFactory:K9,deps:[[new Kn,DC]]},Y9={provide:Ts,deps:[[new Kn,DC]]};function Q9(n){return(e,t)=>{let i=t.get(_s);jt("angularfire",Vo.full,"core"),jt("angularfire",Vo.full,"app"),jt("angular",Tb.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Qr(r)}}function xk(n,...e){return Ji([Z9,Y9,{provide:DC,useFactory:Q9(n),multi:!0,deps:[xt,Jt,Bo,...e]}])}var wk=Pt(OC,!0);var J9=new Map,X9={activated:!1,tokenObservers:[]},eH={initialized:!1,enabled:!1};function Jr(n){return J9.get(n)||Object.assign({},X9)}function Sk(){return eH}var tH="https://content-firebaseappcheck.googleapis.com/v1";var nH="exchangeDebugToken",Ck={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Gme=1440*60*1e3;var RC=class{constructor(e,t,i,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return P(this,null,function*(){this.stop();try{this.pending=new tl,this.pending.promise.catch(t=>{}),yield iH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new tl,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function iH(n){return new Promise(e=>{setTimeout(e,n)})}var rH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},La=new Zr("appCheck","AppCheck",rH);function Mk(n){if(!Jr(n).activated)throw La.create("use-before-activation",{appName:n.name})}function Pk(i,r){return P(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let S=yield a.getHeartbeatsHeader();S&&(o["X-Firebase-Client"]=S)}let l={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,l)}catch(S){throw La.create("fetch-network-error",{originalErrorMessage:S?.message})}if(u.status!==200)throw La.create("fetch-status-error",{httpStatus:u.status});let f;try{f=yield u.json()}catch(S){throw La.create("fetch-parse-error",{originalErrorMessage:S?.message})}let g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw La.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let b=Number(g[1])*1e3,E=Date.now();return{token:f.token,expireTimeMillis:E+b,issuedAtTimeMillis:E}})}function Tk(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${tH}/projects/${t}/apps/${i}:${nH}?key=${r}`,body:{debug_token:e}}}var oH="firebase-app-check-database",sH=1,NC="firebase-app-check-store";var L0=null;function aH(){return L0||(L0=new Promise((n,e)=>{try{let t=indexedDB.open(oH,sH);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(La.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(NC,{keyPath:"compositeKey"})}}}catch(t){e(La.create("storage-open",{originalErrorMessage:t?.message}))}}),L0)}function cH(n,e){return lH(uH(n),e)}function lH(n,e){return P(this,null,function*(){let i=(yield aH()).transaction(NC,"readwrite"),o=i.objectStore(NC).put({compositeKey:n,value:e});return new Promise((a,l)=>{o.onsuccess=u=>{a()},i.onerror=u=>{var f;l(La.create("storage-set",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})})}function uH(n){return`${n.options.appId}-${n.name}`}var Qf=new No("@firebase/app-check");function AC(n,e){return Kf()?cH(n,e).catch(t=>{Qf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ok(){return Sk().enabled}function Dk(){return P(this,null,function*(){let n=Sk();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var dH={error:"UNKNOWN_ERROR"};function hH(n){return M0.encodeString(JSON.stringify(n),!1)}function LC(n,e=!1,t=!1){return P(this,null,function*(){let i=n.app;Mk(i);let r=Jr(i),o=r.token,a;if(o&&!Jf(o)&&(r.token=void 0,o=void 0),!o){let f=yield r.cachedTokenPromise;f&&(Jf(f)?o=f:yield AC(i,void 0))}if(!e&&o&&Jf(o))return{token:o.token};let l=!1;if(Ok())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=Pk(Tk(i,yield Dk()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);let f=yield r.exchangeTokenPromise;return yield AC(i,f),r.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?Qf.warn(f.message):t&&Qf.error(f),kC(f)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Jr(i).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?Qf.warn(f.message):t&&Qf.error(f),a=f}let u;return o?a?Jf(o)?u={token:o.token,internalError:a}:u=kC(a):(u={token:o.token},r.token=o,yield AC(i,o)):u=kC(a),l&&mH(i,u),u})}function fH(n){return P(this,null,function*(){let e=n.app;Mk(e);let{provider:t}=Jr(e);if(Ok()){let i=yield Dk(),{token:r}=yield Pk(Tk(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function pH(n,e,t,i){let{app:r}=n,o=Jr(r),a={next:t,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&Jf(o.token)){let l=o.token;Promise.resolve().then(()=>{t({token:l.token}),Ek(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Ek(n))}function Ak(n,e){let t=Jr(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function Ek(n){let{app:e}=n,t=Jr(e),i=t.tokenRefresher;i||(i=gH(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function gH(n){let{app:e}=n;return new RC(()=>P(null,null,function*(){let t=Jr(e),i;if(t.token?i=yield LC(n,!0):i=yield LC(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=Jr(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},Ck.RETRIAL_MIN_WAIT,Ck.RETRIAL_MAX_WAIT)}function mH(n,e){let t=Jr(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Jf(n){return n.expireTimeMillis-Date.now()>0}function kC(n){return{token:hH(dH),error:n}}var FC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Jr(this.app);for(let t of e)Ak(this.app,t.next);return Promise.resolve()}};function _H(n,e){return new FC(n,e)}function vH(n){return{getToken:e=>LC(n,e),getLimitedUseToken:()=>fH(n),addTokenListener:e=>pH(n,"INTERNAL",e),removeTokenListener:e=>Ak(n.app,e)}}var yH="@firebase/app-check",bH="0.10.1";var xH="app-check",Ik="app-check-internal";function wH(){sr(new oi(xH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return _H(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ik).initialize()})),sr(new oi(Ik,n=>{let e=n.getProvider("app-check").getImmediate();return vH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),jt(yH,bH)}wH();var CH="app-check";var Fa=class{constructor(){return Na(CH)}};var EH=["localhost","0.0.0.0","127.0.0.1"],r_e=typeof window<"u"&&EH.includes(window.location.hostname);function Kk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Zk=Kk,Yk=new Zr("auth","Firebase",Kk());var z0=new No("@firebase/auth");function IH(n,...e){z0.logLevel<=at.WARN&&z0.warn(`Auth (${Fo}): ${n}`,...e)}function V0(n,...e){z0.logLevel<=at.ERROR&&z0.error(`Auth (${Fo}): ${n}`,...e)}function wr(n,...e){throw sE(n,...e)}function Xr(n,...e){return sE(n,...e)}function oE(n,e,t){let i=Object.assign(Object.assign({},Zk()),{[e]:t});return new Zr("auth","Firebase",i).create(e,{appName:n.name})}function As(n){return oE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SH(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&wr(n,"argument-error"),oE(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sE(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Yk.create(n,...e)}function Me(n,e,...t){if(!n)throw sE(e,...t)}function Os(n){let e="INTERNAL ASSERTION FAILED: "+n;throw V0(e),new Error(e)}function ks(n,e){n||Os(e)}function UC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function MH(){return kk()==="http:"||kk()==="https:"}function kk(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function PH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MH()||QA()||"connection"in navigator)?navigator.onLine:!0}function TH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ol=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ks(t>e,"Short delay should be less than long delay!"),this.isMobile=ZA()||JA()}get(){return PH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function aE(n,e){ks(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var H0=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var OH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var DH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AH=new ol(3e4,6e4);function Rs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function eo(o,a,l,u){return P(this,arguments,function*(n,e,t,i,r={}){return Qk(n,r,()=>P(null,null,function*(){let f={},g={};i&&(e==="GET"?g=i:f={body:JSON.stringify(i)});let b=Xu(Object.assign({key:n.config.apiKey},g)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let S=Object.assign({method:e,headers:E},f);return YA()||(S.referrerPolicy="no-referrer"),n.emulatorConfig&&Yr(n.emulatorConfig.host)&&(S.credentials="include"),H0.fetch()(yield Jk(n,n.config.apiHost,t,b),S)}))})}function Qk(n,e,t){return P(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},OH),e);try{let r=new jC(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw F0(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let l=o.ok?a.errorMessage:a.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw F0(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw F0(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw F0(n,"user-disabled",a);let g=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw oE(n,g,f);wr(n,g)}}catch(r){if(r instanceof Di)throw r;wr(n,"network-request-failed",{message:String(r)})}})}function cp(o,a,l,u){return P(this,arguments,function*(n,e,t,i,r={}){let f=yield eo(n,e,t,i,r);return"mfaPendingCredential"in f&&wr(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function Jk(n,e,t,i){return P(this,null,function*(){let r=`${e}${t}?${i}`,o=n,a=o.config.emulator?aE(n.config,r):`${n.config.apiScheme}://${r}`;return DH.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a})}function kH(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var jC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Xr(this.auth,"network-request-failed")),AH.get())})}};function F0(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Xr(n,e,i);return r.customData._tokenResponse=t,r}function Rk(n){return n!==void 0&&n.enterprise!==void 0}var zC=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return kH(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function RH(n,e){return P(this,null,function*(){return eo(n,"GET","/v2/recaptchaConfig",Rs(n,e))})}function NH(n,e){return P(this,null,function*(){return eo(n,"POST","/v1/accounts:delete",e)})}function $0(n,e){return P(this,null,function*(){return eo(n,"POST","/v1/accounts:lookup",e)})}function ep(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function cE(n,e=!1){return P(this,null,function*(){let t=Ot(n),i=yield t.getIdToken(e),r=lE(i);Me(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,a=o?.sign_in_provider;return{claims:r,token:i,authTime:ep(VC(r.auth_time)),issuedAtTime:ep(VC(r.iat)),expirationTime:ep(VC(r.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function VC(n){return Number(n)*1e3}function lE(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return V0("JWT malformed, contained fewer than 3 sections"),null;try{let r=P0(t);return r?JSON.parse(r):(V0("Failed to decode base64 JWT payload"),null)}catch(r){return V0("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Nk(n){let e=lE(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function sl(n,e,t=!1){return P(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Di&&LH(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function LH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var HC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>P(this,null,function*(){yield this.iteration()}),t)}iteration(){return P(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var np=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ep(this.lastLoginAt),this.creationTime=ep(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function G0(n){return P(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield sl(n,$0(t,{idToken:i}));Me(r?.users.length,t,"internal-error");let o=r.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Xk(o.providerUserInfo):[],l=FH(n.providerData,a),u=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,g=u?f:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new np(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,b)})}function uE(n){return P(this,null,function*(){let e=Ot(n);yield G0(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function FH(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Xk(n){return n.map(e=>{var{providerId:t}=e,i=Zg(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function VH(n,e){return P(this,null,function*(){let t=yield Qk(n,{},()=>P(null,null,function*(){let i=Xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,a=yield Jk(n,r,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:l,body:i};return n.emulatorConfig&&Yr(n.emulatorConfig.host)&&(u.credentials="include"),H0.fetch()(a,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function BH(n,e){return P(this,null,function*(){return eo(n,"POST","/v2/accounts:revokeToken",Rs(n,e))})}var tp=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");let t=Nk(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return P(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return P(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield VH(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,a=new n;return i&&(Me(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Me(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(Me(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Os("not implemented")}};function Va(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ba=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=Zg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new np(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return P(this,null,function*(){let t=yield sl(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return cE(this,e)}reload(){return uE(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return P(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield G0(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return P(this,null,function*(){if(si(this.auth.app))return Promise.reject(As(this.auth));let e=yield this.getIdToken();return yield sl(this,NH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,a,l,u,f,g;let b=(i=t.displayName)!==null&&i!==void 0?i:void 0,E=(r=t.email)!==null&&r!==void 0?r:void 0,S=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,R=(a=t.photoURL)!==null&&a!==void 0?a:void 0,K=(l=t.tenantId)!==null&&l!==void 0?l:void 0,q=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,ne=(f=t.createdAt)!==null&&f!==void 0?f:void 0,fe=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:we,emailVerified:Re,isAnonymous:zt,providerData:ct,stsTokenManager:V}=t;Me(we&&V,e,"internal-error");let O=tp.fromJSON(this.name,V);Me(typeof we=="string",e,"internal-error"),Va(b,e.name),Va(E,e.name),Me(typeof Re=="boolean",e,"internal-error"),Me(typeof zt=="boolean",e,"internal-error"),Va(S,e.name),Va(R,e.name),Va(K,e.name),Va(q,e.name),Va(ne,e.name),Va(fe,e.name);let D=new n({uid:we,auth:e,email:E,emailVerified:Re,displayName:b,isAnonymous:zt,photoURL:R,phoneNumber:S,tenantId:K,stsTokenManager:O,createdAt:ne,lastLoginAt:fe});return ct&&Array.isArray(ct)&&(D.providerData=ct.map(N=>Object.assign({},N))),q&&(D._redirectEventId=q),D}static _fromIdTokenResponse(e,t,i=!1){return P(this,null,function*(){let r=new tp;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield G0(o),o})}static _fromGetAccountInfoResponse(e,t,i){return P(this,null,function*(){let r=t.users[0];Me(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?Xk(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!o?.length,l=new tp;l.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new np(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(u,f),u})}};var Lk=new Map;function Ds(n){ks(n instanceof Function,"Expected a class definition");let e=Lk.get(n);return e?(ks(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Lk.set(n,e),e)}var UH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return P(this,null,function*(){return!0})}_set(t,i){return P(this,null,function*(){this.storage[t]=i})}_get(t){return P(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return P(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),$C=UH;function B0(n,e,t){return`firebase:${n}:${e}:${t}`}var q0=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=B0(this.userKey,r.apiKey,o),this.fullPersistenceKey=B0("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return P(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield $0(this.auth,{idToken:e}).catch(()=>{});return t?Ba._fromGetAccountInfoResponse(this.auth,t,e):null}return Ba._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return P(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return P(this,null,function*(){if(!t.length)return new n(Ds($C),e,i);let r=(yield Promise.all(t.map(f=>P(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=r[0]||Ds($C),a=B0(i,e.config.apiKey,e.name),l=null;for(let f of t)try{let g=yield f._get(a);if(g){let b;if(typeof g=="string"){let E=yield $0(e,{idToken:g}).catch(()=>{});if(!E)break;b=yield Ba._fromGetAccountInfoResponse(e,E,g)}else b=Ba._fromJSON(e,g);f!==o&&(l=b),o=f;break}}catch{}let u=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,i):(o=u[0],l&&(yield o._set(a,l.toJSON())),yield Promise.all(t.map(f=>P(null,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,i))})}};function Fk(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oR(e))return"Blackberry";if(sR(e))return"Webos";if(tR(e))return"Safari";if((e.includes("chrome/")||nR(e))&&!e.includes("edge/"))return"Chrome";if(rR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function eR(n=Zn()){return/firefox\//i.test(n)}function tR(n=Zn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nR(n=Zn()){return/crios\//i.test(n)}function iR(n=Zn()){return/iemobile/i.test(n)}function rR(n=Zn()){return/android/i.test(n)}function oR(n=Zn()){return/blackberry/i.test(n)}function sR(n=Zn()){return/webos/i.test(n)}function dE(n=Zn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jH(n=Zn()){var e;return dE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zH(){return XA()&&document.documentMode===10}function aR(n=Zn()){return dE(n)||rR(n)||sR(n)||oR(n)||/windows phone/i.test(n)||iR(n)}function cR(n,e=[]){let t;switch(n){case"Browser":t=Fk(Zn());break;case"Worker":t=`${Fk(Zn())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${i}`}var GC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((a,l)=>{try{let u=e(o);a(u)}catch(u){l(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return P(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function HH(t){return P(this,arguments,function*(n,e={}){return eo(n,"GET","/v2/passwordPolicy",Rs(n,e))})}var $H=6,qC=class{constructor(e){var t,i,r,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:$H,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,a,l;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var WC=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W0(this),this.idTokenSubscription=new W0(this),this.beforeStateQueue=new GC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ds(t)),this._initializationPromise=this.queue(()=>P(this,null,function*(){var i,r,o;if(!this._deleted&&(this.persistenceManager=yield q0.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return P(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return P(this,null,function*(){try{let t=yield $0(this,{idToken:e}),i=yield Ba._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return P(this,null,function*(){var t;if(si(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return P(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return P(this,null,function*(){try{yield G0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=TH()}_delete(){return P(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return P(this,null,function*(){if(si(this.app))return Promise.reject(As(this));let t=e?Ot(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return P(this,null,function*(){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>P(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return P(this,null,function*(){return si(this.app)?Promise.reject(As(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return si(this.app)?Promise.reject(As(this)):this.queue(()=>P(this,null,function*(){yield this.assertedPersistence.setPersistence(Ds(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return P(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return P(this,null,function*(){let e=yield HH(this),t=new qC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zr("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return P(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield BH(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return P(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return P(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ds(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=yield q0.create(this,[Ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return P(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>P(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return P(this,null,function*(){if(e===this.currentUser)return this.queue(()=>P(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{a=!0,u()}}else{let u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return P(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return P(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return P(this,null,function*(){var e;if(si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&IH(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ua(n){return Ot(n)}var W0=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ik(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ev={loadJS(){return P(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GH(n){ev=n}function lR(n){return ev.loadJS(n)}function qH(){return ev.recaptchaEnterpriseScript}function WH(){return ev.gapiScript}function uR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var KC=class{constructor(){this.enterprise=new ZC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},ZC=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var KH="recaptcha-enterprise",dR="NO_RECAPTCHA",YC=class{constructor(e){this.type=KH,this.auth=Ua(e)}verify(e="verify",t=!1){return P(this,null,function*(){function i(o){return P(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,l)=>P(null,null,function*(){RH(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{let f=new zC(u);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(u=>{l(u)})}))})}function r(o,a,l){let u=window.grecaptcha;Rk(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(dR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new KC().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{i(this.auth).then(l=>{if(!t&&Rk(window.grecaptcha))r(l,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=qH();u.length!==0&&(u+=l),lR(u).then(()=>{r(l,o,a)}).catch(f=>{a(f)})}}).catch(l=>{a(l)})})})}};function Xf(n,e,t,i=!1,r=!1){return P(this,null,function*(){let o=new YC(n),a;if(r)a=dR;else try{a=yield o.verify(t)}catch{a=yield o.verify(t,!0)}let l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){let u=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){let u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l})}function QC(n,e,t,i,r){return P(this,null,function*(){var o,a;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let l=yield Xf(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(l=>P(null,null,function*(){if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Xf(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(l)}));else if(r==="PHONE_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("PHONE_PROVIDER")){let l=yield Xf(n,e,t);return i(n,l).catch(u=>P(null,null,function*(){var f;if(((f=n._getRecaptchaConfig())===null||f===void 0?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let g=yield Xf(n,e,t,!1,!0);return i(n,g)}return Promise.reject(u)}))}else{let l=yield Xf(n,e,t,!1,!0);return i(n,l)}else return Promise.reject(r+" provider is not supported.")})}function hE(n,e){let t=Ra(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),o=t.getOptions();if(Ro(o,e??{}))return r;wr(r,"already-initialized")}return t.initialize({options:e})}function ZH(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ds);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function fE(n,e,t){let i=Ua(n);Me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,o=hR(e),{host:a,port:l}=YH(e),u=l===null?"":`:${l}`,f={url:`${o}//${a}${u}/`},g=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Me(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Me(Ro(f,i.config.emulator)&&Ro(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Yr(a)?(Qu(`${o}//${a}${u}`),Ju("Auth",!0)):r||QH()}function hR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function YH(n){let e=hR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:Vk(i.substr(o.length+1))}}else{let[o,a]=i.split(":");return{host:o,port:Vk(a)}}}function Vk(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function QH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var rd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Os("not implemented")}_getIdTokenResponse(e){return Os("not implemented")}_linkToIdToken(e,t){return Os("not implemented")}_getReauthenticationResolver(e){return Os("not implemented")}};function JH(n,e){return P(this,null,function*(){return eo(n,"POST","/v1/accounts:update",e)})}function XH(n,e){return P(this,null,function*(){return eo(n,"POST","/v1/accounts:signUp",e)})}function e7(n,e){return P(this,null,function*(){return cp(n,"POST","/v1/accounts:signInWithPassword",Rs(n,e))})}function t7(n,e){return P(this,null,function*(){return eo(n,"POST","/v1/accounts:sendOobCode",Rs(n,e))})}function n7(n,e){return P(this,null,function*(){return t7(n,e)})}function i7(n,e){return P(this,null,function*(){return cp(n,"POST","/v1/accounts:signInWithEmailLink",Rs(n,e))})}function r7(n,e){return P(this,null,function*(){return cp(n,"POST","/v1/accounts:signInWithEmailLink",Rs(n,e))})}var ip=class n extends rd{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return P(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return QC(e,t,"signInWithPassword",e7,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return i7(e,{email:this._email,oobCode:this._password});default:wr(e,"internal-error")}})}_linkToIdToken(e,t){return P(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return QC(e,i,"signUpPassword",XH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return r7(e,{idToken:t,email:this._email,oobCode:this._password});default:wr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function id(n,e){return P(this,null,function*(){return cp(n,"POST","/v1/accounts:signInWithIdp",Rs(n,e))})}var o7="http://localhost",rp=class n extends rd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,o=Zg(t,["providerId","signInMethod"]);if(!i||!r)return null;let a=new n(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return id(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,id(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,id(e,t)}buildRequest(){let e={requestUri:o7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xu(t)}return e}};function s7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function a7(n){let e=ed(td(n)).link,t=e?ed(td(e)).deep_link_id:null,i=ed(td(n)).deep_link_id;return(i?ed(td(i)).link:null)||i||t||e||n}var K0=class n{constructor(e){var t,i,r,o,a,l;let u=ed(td(e)),f=(t=u.apiKey)!==null&&t!==void 0?t:null,g=(i=u.oobCode)!==null&&i!==void 0?i:null,b=s7((r=u.mode)!==null&&r!==void 0?r:null);Me(f&&g&&b,"argument-error"),this.apiKey=f,this.operation=b,this.code=g,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){let t=a7(e);try{return new n(t)}catch{return null}}};var tv=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return ip._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=K0.parseLink(i);return Me(r,"argument-error"),ip._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),op=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var sp=class extends op{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var pE=(()=>{class n extends sp{constructor(){super("facebook.com")}static credential(t){return rp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}n.FACEBOOK_SIGN_IN_METHOD="facebook.com",n.PROVIDER_ID="facebook.com";return n})(),gE=(()=>{class n extends sp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return rp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function c7(n,e){return P(this,null,function*(){return cp(n,"POST","/v1/accounts:signUp",Rs(n,e))})}var od=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return P(this,null,function*(){let o=yield Ba._fromIdTokenResponse(e,i,r),a=Bk(i);return new n({user:o,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return P(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=Bk(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function Bk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var JC=class n extends Di{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function fR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?JC._fromErrorAndOperation(n,o,e,i):o})}function l7(n,e,t=!1){return P(this,null,function*(){let i=yield sl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return od._forOperation(n,"link",i)})}function pR(n,e,t=!1){return P(this,null,function*(){let{auth:i}=n;if(si(i.app))return Promise.reject(As(i));let r="reauthenticate";try{let o=yield sl(n,fR(i,r,e,n),t);Me(o.idToken,i,"internal-error");let a=lE(o.idToken);Me(a,i,"internal-error");let{sub:l}=a;return Me(n.uid===l,i,"user-mismatch"),od._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&wr(i,"user-mismatch"),o}})}function gR(n,e,t=!1){return P(this,null,function*(){if(si(n.app))return Promise.reject(As(n));let i="signIn",r=yield fR(n,i,e),o=yield od._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})}function mE(n,e){return P(this,null,function*(){return gR(Ua(n),e)})}function _E(n,e){return P(this,null,function*(){return pR(Ot(n),e)})}function u7(n,e,t){var i;Me(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),Me(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Me(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Me(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Me(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function mR(n){return P(this,null,function*(){let e=Ua(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function vE(n,e,t){return P(this,null,function*(){if(si(n.app))return Promise.reject(As(n));let i=Ua(n),a=yield QC(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c7,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&mR(n),u}),l=yield od._fromIdTokenResponse(i,"signIn",a);return yield i._updateCurrentUser(l.user),l})}function yE(n,e,t){return si(n.app)?Promise.reject(As(n)):mE(Ot(n),tv.credential(e,t)).catch(i=>P(null,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&mR(n),i}))}function bE(n,e){return P(this,null,function*(){let t=Ot(n),r={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&u7(t.auth,r,e);let{email:o}=yield n7(t.auth,r);o!==n.email&&(yield n.reload())})}function d7(n,e){return P(this,null,function*(){return eo(n,"POST","/v1/accounts:update",e)})}function xE(i,r){return P(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=Ot(n),l={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield sl(o,d7(o.auth,l));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let f=o.providerData.find(({providerId:g})=>g==="password");f&&(f.displayName=o.displayName,f.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function wE(n,e){return h7(Ot(n),null,e)}function h7(n,e,t){return P(this,null,function*(){let{auth:i}=n,o={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let a=yield sl(n,JH(i,o));yield n._updateTokensIfNecessary(a,!0)})}function lp(n,e,t,i){return Ot(n).onIdTokenChanged(e,t,i)}function CE(n,e,t){return Ot(n).beforeAuthStateChanged(e,t)}function EE(n){return Ot(n).signOut()}var Z0="__sak";var Y0=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Z0,"1"),this.storage.removeItem(Z0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var f7=1e3,p7=10,g7=(()=>{class n extends Y0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}let r=t.key;i?this.detachListener():this.stopPolling();let o=()=>{let l=this.storage.getItem(r);!i&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);zH()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,p7):o()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},f7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return P(this,null,function*(){yield ra(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return P(this,null,function*(){let i=yield ra(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return P(this,null,function*(){yield ra(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),_R=g7;var m7=(()=>{class n extends Y0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),IE=m7;function _7(n){return Promise.all(n.map(e=>P(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var v7=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return P(this,null,function*(){let i=t,{eventId:r,eventType:o,data:a}=i.data,l=this.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let u=Array.from(l).map(g=>P(this,null,function*(){return g(i.origin,a)})),f=yield _7(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function SE(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var XC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return P(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{let f=SE("",20);r.port1.start();let g=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(b){let E=b;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(E.data.response);break;default:clearTimeout(g),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Uo(){return window}function y7(n){Uo().location.href=n}function vR(){return typeof Uo().WorkerGlobalScope<"u"&&typeof Uo().importScripts=="function"}function b7(){return P(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function x7(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function w7(){return vR()?self:null}var yR="firebaseLocalStorageDb",C7=1,Q0="firebaseLocalStorage",bR="fbase_key",al=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function nv(n,e){return n.transaction([Q0],e?"readwrite":"readonly").objectStore(Q0)}function E7(){let n=indexedDB.deleteDatabase(yR);return new al(n).toPromise()}function eE(){let n=indexedDB.open(yR,C7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Q0,{keyPath:bR})}catch(r){t(r)}}),n.addEventListener("success",()=>P(null,null,function*(){let i=n.result;i.objectStoreNames.contains(Q0)?e(i):(i.close(),yield E7(),e(yield eE()))}))})}function Uk(n,e,t){return P(this,null,function*(){let i=nv(n,!0).put({[bR]:e,value:t});return new al(i).toPromise()})}function I7(n,e){return P(this,null,function*(){let t=nv(n,!1).get(e),i=yield new al(t).toPromise();return i===void 0?null:i.value})}function jk(n,e){let t=nv(n,!0).delete(e);return new al(t).toPromise()}var S7=800,M7=3,P7=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return P(this,null,function*(){return this.db?this.db:(this.db=yield eE(),this.db)})}_withRetries(t){return P(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>M7)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return P(this,null,function*(){return vR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return P(this,null,function*(){this.receiver=v7._getInstance(w7()),this.receiver._subscribe("keyChanged",(t,i)=>P(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>P(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return P(this,null,function*(){var t,i;if(this.activeServiceWorker=yield b7(),!this.activeServiceWorker)return;this.sender=new XC(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return P(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||x7()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return P(this,null,function*(){try{if(!indexedDB)return!1;let t=yield eE();return yield Uk(t,Z0,"1"),yield jk(t,Z0),!0}catch{}return!1})}_withPendingWrite(t){return P(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return P(this,null,function*(){return this._withPendingWrite(()=>P(this,null,function*(){return yield this._withRetries(r=>Uk(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return P(this,null,function*(){let i=yield this._withRetries(r=>I7(r,t));return this.localCache[t]=i,i})}_remove(t){return P(this,null,function*(){return this._withPendingWrite(()=>P(this,null,function*(){return yield this._withRetries(i=>jk(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return P(this,null,function*(){let t=yield this._withRetries(o=>{let a=nv(o,!1).getAll();return new al(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>P(this,null,function*(){return this._poll()}),S7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),xR=P7;var h_e=uR("rcb"),f_e=new ol(3e4,6e4);function wR(n,e){return e?Ds(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ap=class extends rd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return id(e,this._buildIdpRequest())}_linkToIdToken(e,t){return id(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return id(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function T7(n){return gR(n.auth,new ap(n),n.bypassAuthState)}function O7(n){let{auth:e,user:t}=n;return Me(t,e,"internal-error"),pR(t,new ap(n),n.bypassAuthState)}function D7(n){return P(this,null,function*(){let{auth:e,user:t}=n;return Me(t,e,"internal-error"),l7(t,new ap(n),n.bypassAuthState)})}var J0=class{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>P(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return P(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(u))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T7;case"linkViaPopup":case"linkViaRedirect":return D7;case"reauthViaPopup":case"reauthViaRedirect":return O7;default:wr(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var A7=new ol(2e3,1e4);function ME(n,e,t){return P(this,null,function*(){if(si(n.app))return Promise.reject(Xr(n,"operation-not-supported-in-this-environment"));let i=Ua(n);SH(n,e,op);let r=wR(i,t);return new k7(i,"signInViaPopup",e,r).executeNotNull()})}var k7=(()=>{class n extends J0{constructor(t,i,r,o,a){super(t,i,o,a),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return P(this,null,function*(){let t=yield this.execute();return Me(t,this.auth,"internal-error"),t})}onExecution(){return P(this,null,function*(){ks(this.filter.length===1,"Popup operations only handle one event");let t=SE();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,A7.get())};t()}}n.currentPopupAction=null;return n})(),R7="pendingRedirect",U0=new Map,tE=class n extends J0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return P(this,null,function*(){let e=U0.get(this.auth._key());if(!e){try{let i=(yield N7(this.resolver,this.auth))?yield ra(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}U0.set(this.auth._key(),e)}return this.bypassAuthState||U0.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return P(this,null,function*(){if(e.type==="signInViaRedirect")return ra(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ra(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return P(this,null,function*(){})}cleanUp(){}};function N7(n,e){return P(this,null,function*(){let t=V7(e),i=F7(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function L7(n,e){U0.set(n._key(),e)}function F7(n){return Ds(n._redirectPersistence)}function V7(n){return B0(R7,n.config.apiKey,n.name)}function B7(n,e,t=!1){return P(this,null,function*(){if(si(n.app))return Promise.reject(As(n));let i=Ua(n),r=wR(i,e),a=yield new tE(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var U7=600*1e3,nE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!CR(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Xr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U7&&this.cachedEventUids.clear(),this.cachedEventUids.has(zk(e))}saveEventToCache(e){this.cachedEventUids.add(zk(e)),this.lastProcessedEventTime=Date.now()}};function zk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function CR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function j7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CR(n);default:return!1}}function z7(t){return P(this,arguments,function*(n,e={}){return eo(n,"GET","/v1/projects",e)})}var H7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$7=/^https?/;function G7(n){return P(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield z7(n);for(let t of e)try{if(q7(t))return}catch{}wr(n,"unauthorized-domain")})}function q7(n){let e=UC(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!$7.test(t))return!1;if(H7.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var W7=new ol(3e4,6e4);function Hk(){let n=Uo().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function K7(n){return new Promise((e,t)=>{var i,r,o;function a(){Hk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hk(),t(Xr(n,"network-request-failed"))},timeout:W7.get()})}if(!((r=(i=Uo().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Uo().gapi)===null||o===void 0)&&o.load)a();else{let l=uR("iframefcb");return Uo()[l]=()=>{gapi.load?a():t(Xr(n,"network-request-failed"))},lR(`${WH()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw j0=null,e})}var j0=null;function Z7(n){return j0=j0||K7(n),j0}var Y7=new ol(5e3,15e3),Q7="__/auth/iframe",J7="emulator/auth/iframe",X7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t$(n){let e=n.config;Me(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?aE(e,J7):`https://${n.config.authDomain}/${Q7}`,i={apiKey:e.apiKey,appName:n.name,v:Fo},r=e$.get(n.config.apiHost);r&&(i.eid=r);let o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Xu(i).slice(1)}`}function n$(n){return P(this,null,function*(){let e=yield Z7(n),t=Uo().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:t$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:X7,dontclear:!0},i=>new Promise((r,o)=>P(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=Xr(n,"network-request-failed"),l=Uo().setTimeout(()=>{o(a)},Y7.get());function u(){Uo().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{o(a)})})))})}var i$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r$=500,o$=600,s$="_blank",a$="http://localhost",X0=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function c$(n,e,t,i=r$,r=o$){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),l="",u=Object.assign(Object.assign({},i$),{width:i.toString(),height:r.toString(),top:o,left:a}),f=Zn().toLowerCase();t&&(l=nR(f)?s$:t),eR(f)&&(e=e||a$,u.scrollbars="yes");let g=Object.entries(u).reduce((E,[S,R])=>`${E}${S}=${R},`,"");if(jH(f)&&l!=="_self")return l$(e||"",l),new X0(null);let b=window.open(e||"",l,g);Me(b,n,"popup-blocked");try{b.focus()}catch{}return new X0(b)}function l$(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var u$="__/auth/handler",d$="emulator/auth/handler",h$=encodeURIComponent("fac");function $k(n,e,t,i,r,o){return P(this,null,function*(){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Fo,eventId:r};if(e instanceof op){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",nk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[g,b]of Object.entries(o||{}))a[g]=b}if(e instanceof sp){let g=e.getScopes().filter(b=>b!=="");g.length>0&&(a.scopes=g.join(","))}n.tenantId&&(a.tid=n.tenantId);let l=a;for(let g of Object.keys(l))l[g]===void 0&&delete l[g];let u=yield n._getAppCheckToken(),f=u?`#${h$}=${encodeURIComponent(u)}`:"";return`${f$(n)}?${Xu(l).slice(1)}${f}`})}function f$({config:n}){return n.emulator?aE(n,d$):`https://${n.authDomain}/${u$}`}var BC="webStorageSupport",iE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IE,this._completeRedirectFn=B7,this._overrideRedirectResult=L7}_openPopup(e,t,i,r){return P(this,null,function*(){var o;ks((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield $k(e,t,i,UC(),r);return c$(e,a,SE())})}_openRedirect(e,t,i,r){return P(this,null,function*(){yield this._originValidation(e);let o=yield $k(e,t,i,UC(),r);return y7(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(ks(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return P(this,null,function*(){let t=yield n$(e),i=new nE(e);return t.register("authEvent",r=>(Me(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(BC,{type:BC},r=>{var o;let a=(o=r?.[0])===null||o===void 0?void 0:o[BC];a!==void 0&&t(!!a),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=G7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return aR()||tR()||dE()}},ER=iE;var Gk="@firebase/auth",qk="1.10.8";var rE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return P(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function p$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g$(n){sr(new oi("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Me(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cR(n)},f=new WC(i,r,o,u);return ZH(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),sr(new oi("auth-internal",e=>{let t=Ua(e.getProvider("auth").getImmediate());return(i=>new rE(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jt(Gk,qk,p$(n)),jt(Gk,qk,"esm2017")}var m$=300,_$=gC("authIdTokenMaxAge")||m$,Wk=null,v$=n=>e=>P(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>_$)return;let r=t?.token;Wk!==r&&(Wk=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function PE(n=Ps()){let e=Ra(n,"auth");if(e.isInitialized())return e.getImmediate();let t=hE(n,{popupRedirectResolver:ER,persistence:[xR,_R,IE]}),i=gC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let a=v$(o.toString());CE(t,a,()=>a(t.currentUser)),lp(t,l=>a(l))}}let r=fC("auth");return r&&fE(t,`http://${r}`),t}function y$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}GH({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=Xr("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",y$().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g$("Browser");function MR(n){return new Ae(function(e){var t=lp(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var PR="auth",Ns=class{constructor(e){return e}},cl=class{constructor(){return Na(PR)}};var TE=new ye("angularfire2.auth-instances");function tG(n,e){let t=rl(PR,n,e);return t&&new Ns(t)}function nG(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ns(i)}}var iG={provide:cl,deps:[[new Kn,TE]]},rG={provide:Ns,useFactory:tG,deps:[[new Kn,TE],Qr]};function TR(n,...e){return jt("angularfire",Vo.full,"auth"),Ji([rG,iG,{provide:TE,useFactory:nG(n),multi:!0,deps:[xt,Jt,Bo,Ts,[new Kn,Fa],...e]}])}var OR=Pt(MR,!0);var DR=Pt(vE,!0,2);var AR=Pt(PE,!0);var kR=Pt(_E,!0,2);var RR=Pt(bE,!0,2);var NR=Pt(yE,!0,2);var OE=Pt(ME,!0,2);var LR=Pt(EE,!0,2);var FR=Pt(wE,!0,2);var up=Pt(xE,!0,2);var VR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},BR={};var Ls,DE;(function(){var n;function e(V,O){function D(){}D.prototype=O.prototype,V.D=O.prototype,V.prototype=new D,V.prototype.constructor=V,V.C=function(N,B,H){for(var k=Array(arguments.length-2),nn=2;nn<arguments.length;nn++)k[nn-2]=arguments[nn];return O.prototype[B].apply(N,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(V,O,D){D||(D=0);var N=Array(16);if(typeof O=="string")for(var B=0;16>B;++B)N[B]=O.charCodeAt(D++)|O.charCodeAt(D++)<<8|O.charCodeAt(D++)<<16|O.charCodeAt(D++)<<24;else for(B=0;16>B;++B)N[B]=O[D++]|O[D++]<<8|O[D++]<<16|O[D++]<<24;O=V.g[0],D=V.g[1],B=V.g[2];var H=V.g[3],k=O+(H^D&(B^H))+N[0]+3614090360&4294967295;O=D+(k<<7&4294967295|k>>>25),k=H+(B^O&(D^B))+N[1]+3905402710&4294967295,H=O+(k<<12&4294967295|k>>>20),k=B+(D^H&(O^D))+N[2]+606105819&4294967295,B=H+(k<<17&4294967295|k>>>15),k=D+(O^B&(H^O))+N[3]+3250441966&4294967295,D=B+(k<<22&4294967295|k>>>10),k=O+(H^D&(B^H))+N[4]+4118548399&4294967295,O=D+(k<<7&4294967295|k>>>25),k=H+(B^O&(D^B))+N[5]+1200080426&4294967295,H=O+(k<<12&4294967295|k>>>20),k=B+(D^H&(O^D))+N[6]+2821735955&4294967295,B=H+(k<<17&4294967295|k>>>15),k=D+(O^B&(H^O))+N[7]+4249261313&4294967295,D=B+(k<<22&4294967295|k>>>10),k=O+(H^D&(B^H))+N[8]+1770035416&4294967295,O=D+(k<<7&4294967295|k>>>25),k=H+(B^O&(D^B))+N[9]+2336552879&4294967295,H=O+(k<<12&4294967295|k>>>20),k=B+(D^H&(O^D))+N[10]+4294925233&4294967295,B=H+(k<<17&4294967295|k>>>15),k=D+(O^B&(H^O))+N[11]+2304563134&4294967295,D=B+(k<<22&4294967295|k>>>10),k=O+(H^D&(B^H))+N[12]+1804603682&4294967295,O=D+(k<<7&4294967295|k>>>25),k=H+(B^O&(D^B))+N[13]+4254626195&4294967295,H=O+(k<<12&4294967295|k>>>20),k=B+(D^H&(O^D))+N[14]+2792965006&4294967295,B=H+(k<<17&4294967295|k>>>15),k=D+(O^B&(H^O))+N[15]+1236535329&4294967295,D=B+(k<<22&4294967295|k>>>10),k=O+(B^H&(D^B))+N[1]+4129170786&4294967295,O=D+(k<<5&4294967295|k>>>27),k=H+(D^B&(O^D))+N[6]+3225465664&4294967295,H=O+(k<<9&4294967295|k>>>23),k=B+(O^D&(H^O))+N[11]+643717713&4294967295,B=H+(k<<14&4294967295|k>>>18),k=D+(H^O&(B^H))+N[0]+3921069994&4294967295,D=B+(k<<20&4294967295|k>>>12),k=O+(B^H&(D^B))+N[5]+3593408605&4294967295,O=D+(k<<5&4294967295|k>>>27),k=H+(D^B&(O^D))+N[10]+38016083&4294967295,H=O+(k<<9&4294967295|k>>>23),k=B+(O^D&(H^O))+N[15]+3634488961&4294967295,B=H+(k<<14&4294967295|k>>>18),k=D+(H^O&(B^H))+N[4]+3889429448&4294967295,D=B+(k<<20&4294967295|k>>>12),k=O+(B^H&(D^B))+N[9]+568446438&4294967295,O=D+(k<<5&4294967295|k>>>27),k=H+(D^B&(O^D))+N[14]+3275163606&4294967295,H=O+(k<<9&4294967295|k>>>23),k=B+(O^D&(H^O))+N[3]+4107603335&4294967295,B=H+(k<<14&4294967295|k>>>18),k=D+(H^O&(B^H))+N[8]+1163531501&4294967295,D=B+(k<<20&4294967295|k>>>12),k=O+(B^H&(D^B))+N[13]+2850285829&4294967295,O=D+(k<<5&4294967295|k>>>27),k=H+(D^B&(O^D))+N[2]+4243563512&4294967295,H=O+(k<<9&4294967295|k>>>23),k=B+(O^D&(H^O))+N[7]+1735328473&4294967295,B=H+(k<<14&4294967295|k>>>18),k=D+(H^O&(B^H))+N[12]+2368359562&4294967295,D=B+(k<<20&4294967295|k>>>12),k=O+(D^B^H)+N[5]+4294588738&4294967295,O=D+(k<<4&4294967295|k>>>28),k=H+(O^D^B)+N[8]+2272392833&4294967295,H=O+(k<<11&4294967295|k>>>21),k=B+(H^O^D)+N[11]+1839030562&4294967295,B=H+(k<<16&4294967295|k>>>16),k=D+(B^H^O)+N[14]+4259657740&4294967295,D=B+(k<<23&4294967295|k>>>9),k=O+(D^B^H)+N[1]+2763975236&4294967295,O=D+(k<<4&4294967295|k>>>28),k=H+(O^D^B)+N[4]+1272893353&4294967295,H=O+(k<<11&4294967295|k>>>21),k=B+(H^O^D)+N[7]+4139469664&4294967295,B=H+(k<<16&4294967295|k>>>16),k=D+(B^H^O)+N[10]+3200236656&4294967295,D=B+(k<<23&4294967295|k>>>9),k=O+(D^B^H)+N[13]+681279174&4294967295,O=D+(k<<4&4294967295|k>>>28),k=H+(O^D^B)+N[0]+3936430074&4294967295,H=O+(k<<11&4294967295|k>>>21),k=B+(H^O^D)+N[3]+3572445317&4294967295,B=H+(k<<16&4294967295|k>>>16),k=D+(B^H^O)+N[6]+76029189&4294967295,D=B+(k<<23&4294967295|k>>>9),k=O+(D^B^H)+N[9]+3654602809&4294967295,O=D+(k<<4&4294967295|k>>>28),k=H+(O^D^B)+N[12]+3873151461&4294967295,H=O+(k<<11&4294967295|k>>>21),k=B+(H^O^D)+N[15]+530742520&4294967295,B=H+(k<<16&4294967295|k>>>16),k=D+(B^H^O)+N[2]+3299628645&4294967295,D=B+(k<<23&4294967295|k>>>9),k=O+(B^(D|~H))+N[0]+4096336452&4294967295,O=D+(k<<6&4294967295|k>>>26),k=H+(D^(O|~B))+N[7]+1126891415&4294967295,H=O+(k<<10&4294967295|k>>>22),k=B+(O^(H|~D))+N[14]+2878612391&4294967295,B=H+(k<<15&4294967295|k>>>17),k=D+(H^(B|~O))+N[5]+4237533241&4294967295,D=B+(k<<21&4294967295|k>>>11),k=O+(B^(D|~H))+N[12]+1700485571&4294967295,O=D+(k<<6&4294967295|k>>>26),k=H+(D^(O|~B))+N[3]+2399980690&4294967295,H=O+(k<<10&4294967295|k>>>22),k=B+(O^(H|~D))+N[10]+4293915773&4294967295,B=H+(k<<15&4294967295|k>>>17),k=D+(H^(B|~O))+N[1]+2240044497&4294967295,D=B+(k<<21&4294967295|k>>>11),k=O+(B^(D|~H))+N[8]+1873313359&4294967295,O=D+(k<<6&4294967295|k>>>26),k=H+(D^(O|~B))+N[15]+4264355552&4294967295,H=O+(k<<10&4294967295|k>>>22),k=B+(O^(H|~D))+N[6]+2734768916&4294967295,B=H+(k<<15&4294967295|k>>>17),k=D+(H^(B|~O))+N[13]+1309151649&4294967295,D=B+(k<<21&4294967295|k>>>11),k=O+(B^(D|~H))+N[4]+4149444226&4294967295,O=D+(k<<6&4294967295|k>>>26),k=H+(D^(O|~B))+N[11]+3174756917&4294967295,H=O+(k<<10&4294967295|k>>>22),k=B+(O^(H|~D))+N[2]+718787259&4294967295,B=H+(k<<15&4294967295|k>>>17),k=D+(H^(B|~O))+N[9]+3951481745&4294967295,V.g[0]=V.g[0]+O&4294967295,V.g[1]=V.g[1]+(B+(k<<21&4294967295|k>>>11))&4294967295,V.g[2]=V.g[2]+B&4294967295,V.g[3]=V.g[3]+H&4294967295}i.prototype.u=function(V,O){O===void 0&&(O=V.length);for(var D=O-this.blockSize,N=this.B,B=this.h,H=0;H<O;){if(B==0)for(;H<=D;)r(this,V,H),H+=this.blockSize;if(typeof V=="string"){for(;H<O;)if(N[B++]=V.charCodeAt(H++),B==this.blockSize){r(this,N),B=0;break}}else for(;H<O;)if(N[B++]=V[H++],B==this.blockSize){r(this,N),B=0;break}}this.h=B,this.o+=O},i.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var O=1;O<V.length-8;++O)V[O]=0;var D=8*this.o;for(O=V.length-8;O<V.length;++O)V[O]=D&255,D/=256;for(this.u(V),V=Array(16),O=D=0;4>O;++O)for(var N=0;32>N;N+=8)V[D++]=this.g[O]>>>N&255;return V};function o(V,O){var D=l;return Object.prototype.hasOwnProperty.call(D,V)?D[V]:D[V]=O(V)}function a(V,O){this.h=O;for(var D=[],N=!0,B=V.length-1;0<=B;B--){var H=V[B]|0;N&&H==O||(D[B]=H,N=!1)}this.g=D}var l={};function u(V){return-128<=V&&128>V?o(V,function(O){return new a([O|0],0>O?-1:0)}):new a([V|0],0>V?-1:0)}function f(V){if(isNaN(V)||!isFinite(V))return b;if(0>V)return q(f(-V));for(var O=[],D=1,N=0;V>=D;N++)O[N]=V/D|0,D*=4294967296;return new a(O,0)}function g(V,O){if(V.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(V.charAt(0)=="-")return q(g(V.substring(1),O));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(O,8)),N=b,B=0;B<V.length;B+=8){var H=Math.min(8,V.length-B),k=parseInt(V.substring(B,B+H),O);8>H?(H=f(Math.pow(O,H)),N=N.j(H).add(f(k))):(N=N.j(D),N=N.add(f(k)))}return N}var b=u(0),E=u(1),S=u(16777216);n=a.prototype,n.m=function(){if(K(this))return-q(this).m();for(var V=0,O=1,D=0;D<this.g.length;D++){var N=this.i(D);V+=(0<=N?N:4294967296+N)*O,O*=4294967296}return V},n.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(R(this))return"0";if(K(this))return"-"+q(this).toString(V);for(var O=f(Math.pow(V,6)),D=this,N="";;){var B=Re(D,O).g;D=ne(D,B.j(O));var H=((0<D.g.length?D.g[0]:D.h)>>>0).toString(V);if(D=B,R(D))return H+N;for(;6>H.length;)H="0"+H;N=H+N}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function R(V){if(V.h!=0)return!1;for(var O=0;O<V.g.length;O++)if(V.g[O]!=0)return!1;return!0}function K(V){return V.h==-1}n.l=function(V){return V=ne(this,V),K(V)?-1:R(V)?0:1};function q(V){for(var O=V.g.length,D=[],N=0;N<O;N++)D[N]=~V.g[N];return new a(D,~V.h).add(E)}n.abs=function(){return K(this)?q(this):this},n.add=function(V){for(var O=Math.max(this.g.length,V.g.length),D=[],N=0,B=0;B<=O;B++){var H=N+(this.i(B)&65535)+(V.i(B)&65535),k=(H>>>16)+(this.i(B)>>>16)+(V.i(B)>>>16);N=k>>>16,H&=65535,k&=65535,D[B]=k<<16|H}return new a(D,D[D.length-1]&-2147483648?-1:0)};function ne(V,O){return V.add(q(O))}n.j=function(V){if(R(this)||R(V))return b;if(K(this))return K(V)?q(this).j(q(V)):q(q(this).j(V));if(K(V))return q(this.j(q(V)));if(0>this.l(S)&&0>V.l(S))return f(this.m()*V.m());for(var O=this.g.length+V.g.length,D=[],N=0;N<2*O;N++)D[N]=0;for(N=0;N<this.g.length;N++)for(var B=0;B<V.g.length;B++){var H=this.i(N)>>>16,k=this.i(N)&65535,nn=V.i(B)>>>16,Mr=V.i(B)&65535;D[2*N+2*B]+=k*Mr,fe(D,2*N+2*B),D[2*N+2*B+1]+=H*Mr,fe(D,2*N+2*B+1),D[2*N+2*B+1]+=k*nn,fe(D,2*N+2*B+1),D[2*N+2*B+2]+=H*nn,fe(D,2*N+2*B+2)}for(N=0;N<O;N++)D[N]=D[2*N+1]<<16|D[2*N];for(N=O;N<2*O;N++)D[N]=0;return new a(D,0)};function fe(V,O){for(;(V[O]&65535)!=V[O];)V[O+1]+=V[O]>>>16,V[O]&=65535,O++}function we(V,O){this.g=V,this.h=O}function Re(V,O){if(R(O))throw Error("division by zero");if(R(V))return new we(b,b);if(K(V))return O=Re(q(V),O),new we(q(O.g),q(O.h));if(K(O))return O=Re(V,q(O)),new we(q(O.g),O.h);if(30<V.g.length){if(K(V)||K(O))throw Error("slowDivide_ only works with positive integers.");for(var D=E,N=O;0>=N.l(V);)D=zt(D),N=zt(N);var B=ct(D,1),H=ct(N,1);for(N=ct(N,2),D=ct(D,2);!R(N);){var k=H.add(N);0>=k.l(V)&&(B=B.add(D),H=k),N=ct(N,1),D=ct(D,1)}return O=ne(V,B.j(O)),new we(B,O)}for(B=b;0<=V.l(O);){for(D=Math.max(1,Math.floor(V.m()/O.m())),N=Math.ceil(Math.log(D)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),H=f(D),k=H.j(O);K(k)||0<k.l(V);)D-=N,H=f(D),k=H.j(O);R(H)&&(H=E),B=B.add(H),V=ne(V,k)}return new we(B,V)}n.A=function(V){return Re(this,V).h},n.and=function(V){for(var O=Math.max(this.g.length,V.g.length),D=[],N=0;N<O;N++)D[N]=this.i(N)&V.i(N);return new a(D,this.h&V.h)},n.or=function(V){for(var O=Math.max(this.g.length,V.g.length),D=[],N=0;N<O;N++)D[N]=this.i(N)|V.i(N);return new a(D,this.h|V.h)},n.xor=function(V){for(var O=Math.max(this.g.length,V.g.length),D=[],N=0;N<O;N++)D[N]=this.i(N)^V.i(N);return new a(D,this.h^V.h)};function zt(V){for(var O=V.g.length+1,D=[],N=0;N<O;N++)D[N]=V.i(N)<<1|V.i(N-1)>>>31;return new a(D,V.h)}function ct(V,O){var D=O>>5;O%=32;for(var N=V.g.length-D,B=[],H=0;H<N;H++)B[H]=0<O?V.i(H+D)>>>O|V.i(H+D+1)<<32-O:V.i(H+D);return new a(B,V.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,DE=BR.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Ls=BR.Integer=a}).apply(typeof VR<"u"?VR:typeof self<"u"?self:typeof window<"u"?window:{});var iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fs={};var AE,oG,sd,kE,dp,rv,RE,NE,LE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,m,x){return d==Array.prototype||d==Object.prototype||(d[m]=x.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof iv=="object"&&iv];for(var m=0;m<d.length;++m){var x=d[m];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=t(this);function r(d,m){if(m)e:{var x=i;d=d.split(".");for(var M=0;M<d.length-1;M++){var U=d[M];if(!(U in x))break e;x=x[U]}d=d[d.length-1],M=x[d],m=m(M),m!=M&&m!=null&&e(x,d,{configurable:!0,writable:!0,value:m})}}function o(d,m){d instanceof String&&(d+="");var x=0,M=!1,U={next:function(){if(!M&&x<d.length){var Y=x++;return{value:m(Y,d[Y]),done:!1}}return M=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}r("Array.prototype.values",function(d){return d||function(){return o(this,function(m,x){return x})}});var a=a||{},l=this||self;function u(d){var m=typeof d;return m=m!="object"?m:d?Array.isArray(d)?"array":m:"null",m=="array"||m=="object"&&typeof d.length=="number"}function f(d){var m=typeof d;return m=="object"&&d!=null||m=="function"}function g(d,m,x){return d.call.apply(d.bind,arguments)}function b(d,m,x){if(!d)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,M),d.apply(m,U)}}return function(){return d.apply(m,arguments)}}function E(d,m,x){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:b,E.apply(null,arguments)}function S(d,m){var x=Array.prototype.slice.call(arguments,1);return function(){var M=x.slice();return M.push.apply(M,arguments),d.apply(this,M)}}function R(d,m){function x(){}x.prototype=m.prototype,d.aa=m.prototype,d.prototype=new x,d.prototype.constructor=d,d.Qb=function(M,U,Y){for(var ce=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)ce[tt-2]=arguments[tt];return m.prototype[U].apply(M,ce)}}function K(d){let m=d.length;if(0<m){let x=Array(m);for(let M=0;M<m;M++)x[M]=d[M];return x}return[]}function q(d,m){for(let x=1;x<arguments.length;x++){let M=arguments[x];if(u(M)){let U=d.length||0,Y=M.length||0;d.length=U+Y;for(let ce=0;ce<Y;ce++)d[U+ce]=M[ce]}else d.push(M)}}class ne{constructor(m,x){this.i=m,this.j=x,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function fe(d){return/^[\s\xa0]*$/.test(d)}function we(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function Re(d){return Re[" "](d),d}Re[" "]=function(){};var zt=we().indexOf("Gecko")!=-1&&!(we().toLowerCase().indexOf("webkit")!=-1&&we().indexOf("Edge")==-1)&&!(we().indexOf("Trident")!=-1||we().indexOf("MSIE")!=-1)&&we().indexOf("Edge")==-1;function ct(d,m,x){for(let M in d)m.call(x,d[M],M,d)}function V(d,m){for(let x in d)m.call(void 0,d[x],x,d)}function O(d){let m={};for(let x in d)m[x]=d[x];return m}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(d,m){let x,M;for(let U=1;U<arguments.length;U++){M=arguments[U];for(x in M)d[x]=M[x];for(let Y=0;Y<D.length;Y++)x=D[Y],Object.prototype.hasOwnProperty.call(M,x)&&(d[x]=M[x])}}function B(d){var m=1;d=d.split(":");let x=[];for(;0<m&&d.length;)x.push(d.shift()),m--;return d.length&&x.push(d.join(":")),x}function H(d){l.setTimeout(()=>{throw d},0)}function k(){var d=Ft;let m=null;return d.g&&(m=d.g,d.g=d.g.next,d.g||(d.h=null),m.next=null),m}class nn{constructor(){this.h=this.g=null}add(m,x){let M=Mr.get();M.set(m,x),this.h?this.h.next=M:this.g=M,this.h=M}}var Mr=new ne(()=>new Ge,d=>d.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(m,x){this.h=m,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let $s,Ne=!1,Ft=new nn,Xn=()=>{let d=l.Promise.resolve(void 0);$s=()=>{d.then(ci)}};var ci=()=>{for(var d;d=k();){try{d.h.call(d.g)}catch(x){H(x)}var m=Mr;m.j(d),100>m.h&&(m.h++,d.next=m.g,m.g=d)}Ne=!1};function At(){this.s=this.s,this.C=this.C}At.prototype.s=!1,At.prototype.ma=function(){this.s||(this.s=!0,this.N())},At.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(d,m){this.type=d,this.g=this.target=m,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var lt=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,m=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let x=()=>{};l.addEventListener("test",x,m),l.removeEventListener("test",x,m)}catch{}return d})();function bi(d,m){if(je.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var x=this.type=d.type,M=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=m,m=d.relatedTarget){if(zt){e:{try{Re(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else x=="mouseover"?m=d.fromElement:x=="mouseout"&&(m=d.toElement);this.relatedTarget=m,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ro[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&bi.aa.h.call(this)}}R(bi,je);var ro={2:"touch",3:"pen",4:"mouse"};bi.prototype.h=function(){bi.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Gs="closure_listenable_"+(1e6*Math.random()|0),zd=0;function Hd(d,m,x,M,U){this.listener=d,this.proxy=null,this.src=m,this.type=x,this.capture=!!M,this.ha=U,this.key=++zd,this.da=this.fa=!1}function oo(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function qs(d){this.src=d,this.g={},this.h=0}qs.prototype.add=function(d,m,x,M,U){var Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);var ce=Pl(d,m,M,U);return-1<ce?(m=d[ce],x||(m.fa=!1)):(m=new Hd(m,this.src,Y,!!M,U),m.fa=x,d.push(m)),m};function $d(d,m){var x=m.type;if(x in d.g){var M=d.g[x],U=Array.prototype.indexOf.call(M,m,void 0),Y;(Y=0<=U)&&Array.prototype.splice.call(M,U,1),Y&&(oo(m),d.g[x].length==0&&(delete d.g[x],d.h--))}}function Pl(d,m,x,M){for(var U=0;U<d.length;++U){var Y=d[U];if(!Y.da&&Y.listener==m&&Y.capture==!!x&&Y.ha==M)return U}return-1}var Tl="closure_lm_"+(1e6*Math.random()|0),ic={};function rc(d,m,x,M,U){if(M&&M.once)return Ol(d,m,x,M,U);if(Array.isArray(m)){for(var Y=0;Y<m.length;Y++)rc(d,m[Y],x,M,U);return null}return x=kl(x),d&&d[Gs]?d.K(m,x,f(M)?!!M.capture:!!M,U):Gp(d,m,x,!1,M,U)}function Gp(d,m,x,M,U,Y){if(!m)throw Error("Invalid event type");var ce=f(U)?!!U.capture:!!U,tt=oc(d);if(tt||(d[Tl]=tt=new qs(d)),x=tt.add(m,x,M,ce,Y),x.proxy)return x;if(M=qp(),x.proxy=M,M.src=d,M.listener=x,d.addEventListener)lt||(U=ce),U===void 0&&(U=!1),d.addEventListener(m.toString(),M,U);else if(d.attachEvent)d.attachEvent(Wp(m.toString()),M);else if(d.addListener&&d.removeListener)d.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return x}function qp(){function d(x){return m.call(d.src,d.listener,x)}let m=Uy;return d}function Ol(d,m,x,M,U){if(Array.isArray(m)){for(var Y=0;Y<m.length;Y++)Ol(d,m[Y],x,M,U);return null}return x=kl(x),d&&d[Gs]?d.L(m,x,f(M)?!!M.capture:!!M,U):Gp(d,m,x,!0,M,U)}function Gd(d,m,x,M,U){if(Array.isArray(m))for(var Y=0;Y<m.length;Y++)Gd(d,m[Y],x,M,U);else M=f(M)?!!M.capture:!!M,x=kl(x),d&&d[Gs]?(d=d.i,m=String(m).toString(),m in d.g&&(Y=d.g[m],x=Pl(Y,x,M,U),-1<x&&(oo(Y[x]),Array.prototype.splice.call(Y,x,1),Y.length==0&&(delete d.g[m],d.h--)))):d&&(d=oc(d))&&(m=d.g[m.toString()],d=-1,m&&(d=Pl(m,x,M,U)),(x=-1<d?m[d]:null)&&Dl(x))}function Dl(d){if(typeof d!="number"&&d&&!d.da){var m=d.src;if(m&&m[Gs])$d(m.i,d);else{var x=d.type,M=d.proxy;m.removeEventListener?m.removeEventListener(x,M,d.capture):m.detachEvent?m.detachEvent(Wp(x),M):m.addListener&&m.removeListener&&m.removeListener(M),(x=oc(m))?($d(x,d),x.h==0&&(x.src=null,m[Tl]=null)):oo(d)}}}function Wp(d){return d in ic?ic[d]:ic[d]="on"+d}function Uy(d,m){if(d.da)d=!0;else{m=new bi(m,this);var x=d.listener,M=d.ha||d.src;d.fa&&Dl(d),d=x.call(M,m)}return d}function oc(d){return d=d[Tl],d instanceof qs?d:null}var Al="__closure_events_fn_"+(1e9*Math.random()>>>0);function kl(d){return typeof d=="function"?d:(d[Al]||(d[Al]=function(m){return d.handleEvent(m)}),d[Al])}function zn(){At.call(this),this.i=new qs(this),this.M=this,this.F=null}R(zn,At),zn.prototype[Gs]=!0,zn.prototype.removeEventListener=function(d,m,x,M){Gd(this,d,m,x,M)};function Hn(d,m){var x,M=d.F;if(M)for(x=[];M;M=M.F)x.push(M);if(d=d.M,M=m.type||m,typeof m=="string")m=new je(m,d);else if(m instanceof je)m.target=m.target||d;else{var U=m;m=new je(M,d),N(m,U)}if(U=!0,x)for(var Y=x.length-1;0<=Y;Y--){var ce=m.g=x[Y];U=sc(ce,M,!0,m)&&U}if(ce=m.g=d,U=sc(ce,M,!0,m)&&U,U=sc(ce,M,!1,m)&&U,x)for(Y=0;Y<x.length;Y++)ce=m.g=x[Y],U=sc(ce,M,!1,m)&&U}zn.prototype.N=function(){if(zn.aa.N.call(this),this.i){var d=this.i,m;for(m in d.g){for(var x=d.g[m],M=0;M<x.length;M++)oo(x[M]);delete d.g[m],d.h--}}this.F=null},zn.prototype.K=function(d,m,x,M){return this.i.add(String(d),m,!1,x,M)},zn.prototype.L=function(d,m,x,M){return this.i.add(String(d),m,!0,x,M)};function sc(d,m,x,M){if(m=d.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,Y=0;Y<m.length;++Y){var ce=m[Y];if(ce&&!ce.da&&ce.capture==x){var tt=ce.listener,Yt=ce.ha||ce.src;ce.fa&&$d(d.i,ce),U=tt.call(Yt,M)!==!1&&U}}return U&&!M.defaultPrevented}function Kp(d,m,x){if(typeof d=="function")x&&(d=E(d,x));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout(d,m||0)}function qd(d){d.g=Kp(()=>{d.g=null,d.i&&(d.i=!1,qd(d))},d.l);let m=d.h;d.h=null,d.m.apply(null,m)}class Wd extends At{constructor(m,x){super(),this.m=m,this.l=x,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:qd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ws(d){At.call(this),this.h=d,this.g={}}R(Ws,At);var Zp=[];function Ks(d){ct(d.g,function(m,x){this.g.hasOwnProperty(x)&&Dl(m)},d),d.g={}}Ws.prototype.N=function(){Ws.aa.N.call(this),Ks(this)},Ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kd=l.JSON.stringify,jy=l.JSON.parse,Yp=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Rl(){}Rl.prototype.h=null;function Zd(d){return d.h||(d.h=d.i())}function Qp(){}var ac={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yd(){je.call(this,"d")}R(Yd,je);function Qd(){je.call(this,"c")}R(Qd,je);var Qo={},Jp=null;function Zs(){return Jp=Jp||new zn}Qo.La="serverreachability";function Xp(d){je.call(this,Qo.La,d)}R(Xp,je);function cc(d){let m=Zs();Hn(m,new Xp(m))}Qo.STAT_EVENT="statevent";function eg(d,m){je.call(this,Qo.STAT_EVENT,d),this.stat=m}R(eg,je);function ei(d){let m=Zs();Hn(m,new eg(m,d))}Qo.Ma="timingevent";function qi(d,m){je.call(this,Qo.Ma,d),this.size=m}R(qi,je);function Ce(d,m){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},m)}function Ys(){this.g=!0}Ys.prototype.xa=function(){this.g=!1};function tg(d,m,x,M,U,Y){d.info(function(){if(d.g)if(Y)for(var ce="",tt=Y.split("&"),Yt=0;Yt<tt.length;Yt++){var gt=tt[Yt].split("=");if(1<gt.length){var $t=gt[0];gt=gt[1];var $n=$t.split("_");ce=2<=$n.length&&$n[1]=="type"?ce+($t+"="+gt+"&"):ce+($t+"=redacted&")}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+M+") [attempt "+U+"]: "+m+`
`+x+`
`+ce})}function ng(d,m,x,M,U,Y,ce){d.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+U+"]: "+m+`
`+x+`
`+Y+" "+ce})}function Jo(d,m,x,M){d.info(function(){return"XMLHTTP TEXT ("+m+"): "+ig(d,x)+(M?" "+M:"")})}function Jd(d,m){d.info(function(){return"TIMEOUT: "+m})}Ys.prototype.info=function(){};function ig(d,m){if(!d.g)return m;if(!m)return null;try{var x=JSON.parse(m);if(x){for(d=0;d<x.length;d++)if(Array.isArray(x[d])){var M=x[d];if(!(2>M.length)){var U=M[1];if(Array.isArray(U)&&!(1>U.length)){var Y=U[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ce=1;ce<U.length;ce++)U[ce]=""}}}}return Kd(x)}catch{return m}}var Pr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},eh;function Nl(){}R(Nl,Rl),Nl.prototype.g=function(){return new XMLHttpRequest},Nl.prototype.i=function(){return{}},eh=new Nl;function so(d,m,x,M){this.j=d,this.i=m,this.l=x,this.R=M||1,this.U=new Ws(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rg}function rg(){this.i=null,this.g="",this.h=!1}var th={},nh={};function Qs(d,m,x){d.L=1,d.v=Xs(ti(m)),d.m=x,d.P=!0,og(d,null)}function og(d,m){d.F=Date.now(),Ll(d),d.A=ti(d.v);var x=d.A,M=d.R;Array.isArray(M)||(M=[String(M)]),kt(x.i,"t",M),d.C=0,x=d.j.J,d.h=new rg,d.g=bc(d.j,x?m:null,!d.m),0<d.O&&(d.M=new Wd(E(d.Y,d,d.g),d.O)),m=d.U,x=d.g,M=d.ca;var U="readystatechange";Array.isArray(U)||(U&&(Zp[0]=U.toString()),U=Zp);for(var Y=0;Y<U.length;Y++){var ce=rc(x,U[Y],M||m.handleEvent,!1,m.h||m);if(!ce)break;m.g[ce.key]=ce}m=d.H?O(d.H):{},d.m?(d.u||(d.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,m)):(d.u="GET",d.g.ea(d.A,d.u,null,m)),cc(),tg(d.i,d.u,d.A,d.l,d.R,d.m)}so.prototype.ca=function(d){d=d.target;let m=this.M;m&&Ki(d)==3?m.j():this.Y(d)},so.prototype.Y=function(d){try{if(d==this.g)e:{let $n=Ki(this.g);var m=this.g.Ba();let Yi=this.g.Z();if(!(3>$n)&&($n!=3||this.g&&(this.h.h||this.g.oa()||hg(this.g)))){this.J||$n!=4||m==7||(m==8||0>=Yi?cc(3):cc(2)),lc(this);var x=this.g.Z();this.X=x;t:if(sg(this)){var M=hg(this.g);d="";var U=M.length,Y=Ki(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ao(this),Tr(this);var ce="";break t}this.h.i=new l.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,d+=this.h.i.decode(M[m],{stream:!(Y&&m==U-1)});M.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=x==200,ng(this.i,this.u,this.A,this.l,this.R,$n,x),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Yt=this.g;if((tt=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fe(tt)){var gt=tt;break t}}gt=null}if(x=gt)Jo(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fl(this,x);else{this.o=!1,this.s=3,ei(12),ao(this),Tr(this);break e}}if(this.P){x=!0;let Qi;for(;!this.J&&this.C<ce.length;)if(Qi=zy(this,ce),Qi==nh){$n==4&&(this.s=4,ei(14),x=!1),Jo(this.i,this.l,null,"[Incomplete Response]");break}else if(Qi==th){this.s=4,ei(15),Jo(this.i,this.l,ce,"[Invalid Chunk]"),x=!1;break}else Jo(this.i,this.l,Qi,null),Fl(this,Qi);if(sg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$n!=4||ce.length!=0||this.h.h||(this.s=1,ei(16),x=!1),this.o=this.o&&x,!x)Jo(this.i,this.l,ce,"[Invalid Chunked Response]"),ao(this),Tr(this);else if(0<ce.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Hl($t),$t.M=!0,ei(11))}}else Jo(this.i,this.l,ce,null),Fl(this,ce);$n==4&&ao(this),this.o&&!this.J&&($n==4?mg(this.j,this):(this.o=!1,Ll(this)))}else fg(this.g),x==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ei(12)):(this.s=0,ei(13)),ao(this),Tr(this)}}}catch{}finally{}};function sg(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function zy(d,m){var x=d.C,M=m.indexOf(`
`,x);return M==-1?nh:(x=Number(m.substring(x,M)),isNaN(x)?th:(M+=1,M+x>m.length?nh:(m=m.slice(M,M+x),d.C=M+x,m)))}so.prototype.cancel=function(){this.J=!0,ao(this)};function Ll(d){d.S=Date.now()+d.I,ag(d,d.I)}function ag(d,m){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ce(E(d.ba,d),m)}function lc(d){d.B&&(l.clearTimeout(d.B),d.B=null)}so.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Jd(this.i,this.A),this.L!=2&&(cc(),ei(17)),ao(this),this.s=2,Tr(this)):ag(this,this.S-d)};function Tr(d){d.j.G==0||d.J||mg(d.j,d)}function ao(d){lc(d);var m=d.M;m&&typeof m.ma=="function"&&m.ma(),d.M=null,Ks(d.U),d.g&&(m=d.g,d.g=null,m.abort(),m.ma())}function Fl(d,m){try{var x=d.j;if(x.G!=0&&(x.g==d||co(x.h,d))){if(!d.K&&co(x.h,d)&&x.G==3){try{var M=x.Da.g.parse(m)}catch{M=null}if(Array.isArray(M)&&M.length==3){var U=M;if(U[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<d.F)$l(x),Ul(x);else break e;ph(x),ei(18)}}else x.za=U[1],0<x.za-x.T&&37500>U[2]&&x.F&&x.v==0&&!x.C&&(x.C=Ce(E(x.Za,x),6e3));if(1>=dc(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else ns(x,11)}else if((d.K||x.g==d)&&$l(x),!fe(m))for(U=x.Da.g.parse(m),m=0;m<U.length;m++){let gt=U[m];if(x.T=gt[0],gt=gt[1],x.G==2)if(gt[0]=="c"){x.K=gt[1],x.ia=gt[2];let $t=gt[3];$t!=null&&(x.la=$t,x.j.info("VER="+x.la));let $n=gt[4];$n!=null&&(x.Aa=$n,x.j.info("SVER="+x.Aa));let Yi=gt[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(M=1.5*Yi,x.L=M,x.j.info("backChannelRequestTimeoutMs_="+M)),M=x;let Qi=d.g;if(Qi){let fo=Qi.g?Qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var Y=M.h;Y.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(lo(Y,Y.h),Y.h=null))}if(M.D){let Wl=Qi.g?Qi.g.getResponseHeader("X-HTTP-Session-Id"):null;Wl&&(M.ya=Wl,It(M.I,M.D,Wl))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-d.F,x.j.info("Handshake RTT: "+x.R+"ms")),M=x;var ce=d;if(M.qa=_h(M,M.J?M.ia:null,M.W),ce.K){Vl(M.h,ce);var tt=ce,Yt=M.L;Yt&&(tt.I=Yt),tt.B&&(lc(tt),Ll(tt)),M.g=ce}else zl(M);0<x.i.length&&jl(x)}else gt[0]!="stop"&&gt[0]!="close"||ns(x,7);else x.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?ns(x,7):yc(x):gt[0]!="noop"&&x.l&&x.l.ta(gt),x.v=0)}}cc(4)}catch{}}var uc=class{constructor(d,m){this.g=d,this.map=m}};function pt(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ht(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function dc(d){return d.h?1:d.g?d.g.size:0}function co(d,m){return d.h?d.h==m:d.g?d.g.has(m):!1}function lo(d,m){d.g?d.g.add(m):d.h=m}function Vl(d,m){d.h&&d.h==m?d.h=null:d.g&&d.g.has(m)&&d.g.delete(m)}pt.prototype.cancel=function(){if(this.i=Ke(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Ke(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let m=d.i;for(let x of d.g.values())m=m.concat(x.D);return m}return K(d.i)}function rn(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var m=[],x=d.length,M=0;M<x;M++)m.push(d[M]);return m}m=[],x=0;for(M in d)m[x++]=d[M];return m}function ih(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var m=[];d=d.length;for(var x=0;x<d;x++)m.push(x);return m}m=[],x=0;for(let M in d)m[x++]=M;return m}}}function hc(d,m){if(d.forEach&&typeof d.forEach=="function")d.forEach(m,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,m,void 0);else for(var x=ih(d),M=rn(d),U=M.length,Y=0;Y<U;Y++)m.call(void 0,M[Y],x&&x[Y],d)}var xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hy(d,m){if(d){d=d.split("&");for(var x=0;x<d.length;x++){var M=d[x].indexOf("="),U=null;if(0<=M){var Y=d[x].substring(0,M);U=d[x].substring(M+1)}else Y=d[x];m(Y,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function lr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof lr){this.h=d.h,Wt(this,d.j),this.o=d.o,this.g=d.g,ur(this,d.s),this.l=d.l;var m=d.i,x=new es;x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),Js(this,x),this.m=d.m}else d&&(m=String(d).match(xi))?(this.h=!1,Wt(this,m[1]||"",!0),this.o=Or(m[2]||""),this.g=Or(m[3]||"",!0),ur(this,m[4]),this.l=Or(m[5]||"",!0),Js(this,m[6]||"",!0),this.m=Or(m[7]||"")):(this.h=!1,this.i=new es(null,this.h))}lr.prototype.toString=function(){var d=[],m=this.j;m&&d.push(Xo(m,fc,!0),":");var x=this.g;return(x||m=="file")&&(d.push("//"),(m=this.o)&&d.push(Xo(m,fc,!0),"@"),d.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&d.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Xo(x,x.charAt(0)=="/"?sh:oh,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Xo(x,cg)),d.join("")};function ti(d){return new lr(d)}function Wt(d,m,x){d.j=x?Or(m,!0):m,d.j&&(d.j=d.j.replace(/:$/,""))}function ur(d,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);d.s=m}else d.s=null}function Js(d,m,x){m instanceof es?(d.i=m,ah(d.i,d.h)):(x||(m=Xo(m,Bl)),d.i=new es(m,d.h))}function It(d,m,x){d.i.set(m,x)}function Xs(d){return It(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Or(d,m){return d?m?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Xo(d,m,x){return typeof d=="string"?(d=encodeURI(d).replace(m,rh),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function rh(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var fc=/[#\/\?@]/g,oh=/[#\?:]/g,sh=/[#\?]/g,Bl=/[#\?@]/g,cg=/#/g;function es(d,m){this.h=this.g=null,this.i=d||null,this.j=!!m}function uo(d){d.g||(d.g=new Map,d.h=0,d.i&&Hy(d.i,function(m,x){d.add(decodeURIComponent(m.replace(/\+/g," ")),x)}))}n=es.prototype,n.add=function(d,m){uo(this),this.i=null,d=ts(this,d);var x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(m),this.h+=1,this};function ze(d,m){uo(d),m=ts(d,m),d.g.has(m)&&(d.i=null,d.h-=d.g.get(m).length,d.g.delete(m))}function Wi(d,m){return uo(d),m=ts(d,m),d.g.has(m)}n.forEach=function(d,m){uo(this),this.g.forEach(function(x,M){x.forEach(function(U){d.call(m,U,M,this)},this)},this)},n.na=function(){uo(this);let d=Array.from(this.g.values()),m=Array.from(this.g.keys()),x=[];for(let M=0;M<m.length;M++){let U=d[M];for(let Y=0;Y<U.length;Y++)x.push(m[M])}return x},n.V=function(d){uo(this);let m=[];if(typeof d=="string")Wi(this,d)&&(m=m.concat(this.g.get(ts(this,d))));else{d=Array.from(this.g.values());for(let x=0;x<d.length;x++)m=m.concat(d[x])}return m},n.set=function(d,m){return uo(this),this.i=null,d=ts(this,d),Wi(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[m]),this.h+=1,this},n.get=function(d,m){return d?(d=this.V(d),0<d.length?String(d[0]):m):m};function kt(d,m,x){ze(d,m),0<x.length&&(d.i=null,d.g.set(ts(d,m),K(x)),d.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],m=Array.from(this.g.keys());for(var x=0;x<m.length;x++){var M=m[x];let Y=encodeURIComponent(String(M)),ce=this.V(M);for(M=0;M<ce.length;M++){var U=Y;ce[M]!==""&&(U+="="+encodeURIComponent(String(ce[M]))),d.push(U)}}return this.i=d.join("&")};function ts(d,m){return m=String(m),d.j&&(m=m.toLowerCase()),m}function ah(d,m){m&&!d.j&&(uo(d),d.i=null,d.g.forEach(function(x,M){var U=M.toLowerCase();M!=U&&(ze(this,M),kt(this,U,x))},d)),d.j=m}function ch(d,m){let x=new Ys;if(l.Image){let M=new Image;M.onload=S(li,x,"TestLoadImage: loaded",!0,m,M),M.onerror=S(li,x,"TestLoadImage: error",!1,m,M),M.onabort=S(li,x,"TestLoadImage: abort",!1,m,M),M.ontimeout=S(li,x,"TestLoadImage: timeout",!1,m,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=d}else m(!1)}function lh(d,m){let x=new Ys,M=new AbortController,U=setTimeout(()=>{M.abort(),li(x,"TestPingServer: timeout",!1,m)},1e4);fetch(d,{signal:M.signal}).then(Y=>{clearTimeout(U),Y.ok?li(x,"TestPingServer: ok",!0,m):li(x,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),li(x,"TestPingServer: error",!1,m)})}function li(d,m,x,M,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),M(x)}catch{}}function uh(){this.g=new Yp}function pc(d,m,x){let M=x||"";try{hc(d,function(U,Y){let ce=U;f(U)&&(ce=Kd(U)),m.push(M+Y+"="+encodeURIComponent(ce))})}catch(U){throw m.push(M+"type="+encodeURIComponent("_badmap")),U}}function on(d){this.l=d.Ub||null,this.j=d.eb||!1}R(on,Rl),on.prototype.g=function(){return new dr(this.l,this.j)},on.prototype.i=(function(d){return function(){return d}})({});function dr(d,m){zn.call(this),this.D=d,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(dr,zn),n=dr.prototype,n.open=function(d,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=m,this.readyState=1,gc(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(m.body=d),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ea(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,gc(this)),this.g&&(this.readyState=3,gc(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dh(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function dh(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var m=d.value?d.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!d.done}))&&(this.response=this.responseText+=m)}d.done?ea(this):gc(this),this.readyState==3&&dh(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,ea(this))},n.Qa=function(d){this.g&&(this.response=d,ea(this))},n.ga=function(){this.g&&ea(this)};function ea(d){d.readyState=4,d.l=null,d.j=null,d.v=null,gc(d)}n.setRequestHeader=function(d,m){this.u.append(d,m)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],m=this.h.entries();for(var x=m.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=m.next();return d.join(`\r
`)};function gc(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function hh(d){let m="";return ct(d,function(x,M){m+=M,m+=":",m+=x,m+=`\r
`}),m}function mc(d,m,x){e:{for(M in x){var M=!1;break e}M=!0}M||(x=hh(x),typeof d=="string"?x!=null&&encodeURIComponent(String(x)):It(d,m,x))}function Zt(d){zn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Zt,zn);var lg=/^https?$/i,ut=["POST","PUT"];n=Zt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,m,x,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);m=m?m.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eh.g(),this.v=this.o?Zd(this.o):Zd(eh),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(d),!0),this.B=!1}catch(Y){ug(this,Y);return}if(d=x||"",x=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var U in M)x.set(U,M[U]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(let Y of M.keys())x.set(Y,M.get(Y));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(x.keys()).find(Y=>Y.toLowerCase()=="content-type"),U=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ut,m,void 0))||M||U||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[Y,ce]of x)this.g.setRequestHeader(Y,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dg(this),this.u=!0,this.g.send(d),this.u=!1}catch(Y){ug(this,Y)}};function ug(d,m){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=m,d.m=5,Ri(d),_c(d)}function Ri(d){d.A||(d.A=!0,Hn(d,"complete"),Hn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Hn(this,"complete"),Hn(this,"abort"),_c(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_c(this,!0)),Zt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ta(this):this.bb())},n.bb=function(){ta(this)};function ta(d){if(d.h&&typeof a<"u"&&(!d.v[1]||Ki(d)!=4||d.Z()!=2)){if(d.u&&Ki(d)==4)Kp(d.Ea,0,d);else if(Hn(d,"readystatechange"),Ki(d)==4){d.h=!1;try{let ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var x;if(!(x=m)){var M;if(M=ce===0){var U=String(d.D).match(xi)[1]||null;!U&&l.self&&l.self.location&&(U=l.self.location.protocol.slice(0,-1)),M=!lg.test(U?U.toLowerCase():"")}x=M}if(x)Hn(d,"complete"),Hn(d,"success");else{d.m=6;try{var Y=2<Ki(d)?d.g.statusText:""}catch{Y=""}d.l=Y+" ["+d.Z()+"]",Ri(d)}}finally{_c(d)}}}}function _c(d,m){if(d.g){dg(d);let x=d.g,M=d.v[0]?()=>{}:null;d.g=null,d.v=null,m||Hn(d,"ready");try{x.onreadystatechange=M}catch{}}}function dg(d){d.I&&(l.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Ki(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Ki(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var m=this.g.responseText;return d&&m.indexOf(d)==0&&(m=m.substring(d.length)),jy(m)}};function hg(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function fg(d){let m={};d=(d.g&&2<=Ki(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<d.length;M++){if(fe(d[M]))continue;var x=B(d[M]);let U=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();let Y=m[U]||[];m[U]=Y,Y.push(x)}V(m,function(M){return M.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vc(d,m,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||m}function pg(d){this.Aa=0,this.i=[],this.j=new Ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vc("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vc("baseRetryDelayMs",5e3,d),this.cb=vc("retryDelaySeedMs",1e4,d),this.Wa=vc("forwardChannelMaxRetries",2,d),this.wa=vc("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new pt(d&&d.concurrentRequestLimit),this.Da=new uh,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=pg.prototype,n.la=8,n.G=1,n.connect=function(d,m,x,M){ei(0),this.W=d,this.H=m||{},x&&M!==void 0&&(this.H.OSID=x,this.H.OAID=M),this.F=this.X,this.I=_h(this,null,this.W),jl(this)};function yc(d){if(Zi(d),d.G==3){var m=d.U++,x=ti(d.I);if(It(x,"SID",d.K),It(x,"RID",m),It(x,"TYPE","terminate"),na(d,x),m=new so(d,d.j,m),m.L=2,m.v=Xs(ti(x)),x=!1,l.navigator&&l.navigator.sendBeacon)try{x=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!x&&l.Image&&(new Image().src=m.v,x=!0),x||(m.g=bc(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ll(m)}mh(d)}function Ul(d){d.g&&(Hl(d),d.g.cancel(),d.g=null)}function Zi(d){Ul(d),d.u&&(l.clearTimeout(d.u),d.u=null),$l(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function jl(d){if(!Ht(d.h)&&!d.s){d.s=!0;var m=d.Ga;$s||Xn(),Ne||($s(),Ne=!0),Ft.add(m,d),d.B=0}}function gg(d,m){return dc(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=m.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ce(E(d.Ga,d,m),Gl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let U=new so(this,this.j,d),Y=this.o;if(this.S&&(Y?(Y=O(Y),N(Y,this.S)):Y=this.S),this.m!==null||this.O||(U.H=Y,Y=null),this.P)e:{for(var m=0,x=0;x<this.i.length;x++){t:{var M=this.i[x];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(m+=M,4096<m){m=x;break e}if(m===4096||x===this.i.length-1){m=x+1;break e}}m=1e3}else m=1e3;m=fh(this,U,m),x=ti(this.I),It(x,"RID",d),It(x,"CVER",22),this.D&&It(x,"X-HTTP-Session-Id",this.D),na(this,x),Y&&(this.O?m="headers="+encodeURIComponent(String(hh(Y)))+"&"+m:this.m&&mc(x,this.m,Y)),lo(this.h,U),this.Ua&&It(x,"TYPE","init"),this.P?(It(x,"$req",m),It(x,"SID","null"),U.T=!0,Qs(U,x,null)):Qs(U,x,m),this.G=2}}else this.G==3&&(d?Dr(this,d):this.i.length==0||Ht(this.h)||Dr(this))};function Dr(d,m){var x;m?x=m.l:x=d.U++;let M=ti(d.I);It(M,"SID",d.K),It(M,"RID",x),It(M,"AID",d.T),na(d,M),d.m&&d.o&&mc(M,d.m,d.o),x=new so(d,d.j,x,d.B+1),d.m===null&&(x.H=d.o),m&&(d.i=m.D.concat(d.i)),m=fh(d,x,1e3),x.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),lo(d.h,x),Qs(x,M,m)}function na(d,m){d.H&&ct(d.H,function(x,M){It(m,M,x)}),d.l&&hc({},function(x,M){It(m,M,x)})}function fh(d,m,x){x=Math.min(d.i.length,x);var M=d.l?E(d.l.Na,d.l,d):null;e:{var U=d.i;let Y=-1;for(;;){let ce=["count="+x];Y==-1?0<x?(Y=U[0].g,ce.push("ofs="+Y)):Y=0:ce.push("ofs="+Y);let tt=!0;for(let Yt=0;Yt<x;Yt++){let gt=U[Yt].g,$t=U[Yt].map;if(gt-=Y,0>gt)Y=Math.max(0,U[Yt].g-100),tt=!1;else try{pc($t,ce,"req"+gt+"_")}catch{M&&M($t)}}if(tt){M=ce.join("&");break e}}}return d=d.i.splice(0,x),m.D=d,M}function zl(d){if(!d.g&&!d.u){d.Y=1;var m=d.Fa;$s||Xn(),Ne||($s(),Ne=!0),Ft.add(m,d),d.v=0}}function ph(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ce(E(d.Fa,d),Gl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,gh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ce(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ei(10),Ul(this),gh(this))};function Hl(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function gh(d){d.g=new so(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var m=ti(d.qa);It(m,"RID","rpc"),It(m,"SID",d.K),It(m,"AID",d.T),It(m,"CI",d.F?"0":"1"),!d.F&&d.ja&&It(m,"TO",d.ja),It(m,"TYPE","xmlhttp"),na(d,m),d.m&&d.o&&mc(m,d.m,d.o),d.L&&(d.g.I=d.L);var x=d.g;d=d.ia,x.L=1,x.v=Xs(ti(m)),x.m=null,x.P=!0,og(x,d)}n.Za=function(){this.C!=null&&(this.C=null,Ul(this),ph(this),ei(19))};function $l(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function mg(d,m){var x=null;if(d.g==m){$l(d),Hl(d),d.g=null;var M=2}else if(co(d.h,m))x=m.D,Vl(d.h,m),M=1;else return;if(d.G!=0){if(m.o)if(M==1){x=m.m?m.m.length:0,m=Date.now()-m.F;var U=d.B;M=Zs(),Hn(M,new qi(M,x)),jl(d)}else zl(d);else if(U=m.s,U==3||U==0&&0<m.X||!(M==1&&gg(d,m)||M==2&&ph(d)))switch(x&&0<x.length&&(m=d.h,m.i=m.i.concat(x)),U){case 1:ns(d,5);break;case 4:ns(d,10);break;case 3:ns(d,6);break;default:ns(d,2)}}}function Gl(d,m){let x=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(x*=2),x*m}function ns(d,m){if(d.j.info("Error code "+m),m==2){var x=E(d.fb,d),M=d.Xa;let U=!M;M=new lr(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Wt(M,"https"),Xs(M),U?ch(M.toString(),x):lh(M.toString(),x)}else ei(2);d.G=0,d.l&&d.l.sa(m),mh(d),Zi(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),ei(2)):(this.j.info("Failed to ping google.com"),ei(1))};function mh(d){if(d.G=0,d.ka=[],d.l){let m=Ke(d.h);(m.length!=0||d.i.length!=0)&&(q(d.ka,m),q(d.ka,d.i),d.h.i.length=0,K(d.i),d.i.length=0),d.l.ra()}}function _h(d,m,x){var M=x instanceof lr?ti(x):new lr(x);if(M.g!="")m&&(M.g=m+"."+M.g),ur(M,M.s);else{var U=l.location;M=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var Y=new lr(null);M&&Wt(Y,M),m&&(Y.g=m),U&&ur(Y,U),x&&(Y.l=x),M=Y}return x=d.D,m=d.ya,x&&m&&It(M,x,m),It(M,"VER",d.la),na(d,M),M}function bc(d,m,x){if(m&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=d.Ca&&!d.pa?new Zt(new on({eb:x})):new Zt(d.pa),m.Ha(d.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ho(){}n=ho.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ql(){}ql.prototype.g=function(d,m){return new Vn(d,m)};function Vn(d,m){zn.call(this),this.g=new pg(m),this.l=d,this.h=m&&m.messageUrlParams||null,d=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(d?d["X-WebChannel-Content-Type"]=m.messageContentType:d={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(d?d["X-WebChannel-Client-Profile"]=m.va:d={"X-WebChannel-Client-Profile":m.va}),this.g.S=d,(d=m&&m.Sb)&&!fe(d)&&(this.g.m=d),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!fe(m)&&(this.g.D=m,d=this.h,d!==null&&m in d&&(d=this.h,m in d&&delete d[m])),this.j=new is(this)}R(Vn,zn),Vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){yc(this.g)},Vn.prototype.o=function(d){var m=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.u&&(x={},x.__data__=Kd(d),d=x);m.i.push(new uc(m.Ya++,d)),m.G==3&&jl(m)},Vn.prototype.N=function(){this.g.l=null,delete this.j,yc(this.g),delete this.g,Vn.aa.N.call(this)};function wi(d){Yd.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var m=d.__sm__;if(m){e:{for(let x in m){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,m=m!==null&&d in m?m[d]:void 0),this.data=m}else this.data=d}R(wi,Yd);function vh(){Qd.call(this),this.status=1}R(vh,Qd);function is(d){this.g=d}R(is,ho),is.prototype.ua=function(){Hn(this.g,"a")},is.prototype.ta=function(d){Hn(this.g,new wi(d))},is.prototype.sa=function(d){Hn(this.g,new vh)},is.prototype.ra=function(){Hn(this.g,"b")},ql.prototype.createWebChannel=ql.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,LE=Fs.createWebChannelTransport=function(){return new ql},NE=Fs.getStatEventTarget=function(){return Zs()},RE=Fs.Event=Qo,rv=Fs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pr.NO_ERROR=0,Pr.TIMEOUT=8,Pr.HTTP_ERROR=6,dp=Fs.ErrorCode=Pr,Xd.COMPLETE="complete",kE=Fs.EventType=Xd,Qp.EventType=ac,ac.OPEN="a",ac.CLOSE="b",ac.ERROR="c",ac.MESSAGE="d",zn.prototype.listen=zn.prototype.K,sd=Fs.WebChannel=Qp,oG=Fs.FetchXmlHttpFactory=on,Zt.prototype.listenOnce=Zt.prototype.L,Zt.prototype.getLastError=Zt.prototype.Ka,Zt.prototype.getLastErrorCode=Zt.prototype.Ba,Zt.prototype.getStatus=Zt.prototype.Z,Zt.prototype.getResponseJson=Zt.prototype.Oa,Zt.prototype.getResponseText=Zt.prototype.oa,Zt.prototype.send=Zt.prototype.ea,Zt.prototype.setWithCredentials=Zt.prototype.Ha,AE=Fs.XhrIo=Zt}).apply(typeof iv<"u"?iv:typeof self<"u"?self:typeof window<"u"?window:{});var UR="@firebase/firestore",jR="4.8.0";var Yn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");var Md="11.10.0";var fl=new No("@firebase/firestore");function ad(){return fl.logLevel}function _e(n,...e){if(fl.logLevel<=at.DEBUG){let t=e.map(MS);fl.debug(`Firestore (${Md}): ${n}`,...t)}}function Vs(n,...e){if(fl.logLevel<=at.ERROR){let t=e.map(MS);fl.error(`Firestore (${Md}): ${n}`,...t)}}function qa(n,...e){if(fl.logLevel<=at.WARN){let t=e.map(MS);fl.warn(`Firestore (${Md}): ${n}`,...t)}}function MS(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Fe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,kN(n,i,t)}function kN(n,e,t){let i=`FIRESTORE (${Md}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Vs(i),new Error(i)}function Dt(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||kN(e,r,i)}function We(n,e){return n}var ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},de=class extends Di{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var jo=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var dv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yn.UNAUTHENTICATED))}shutdown(){}},zE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},HE=class{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Dt(this.o===void 0,42304);let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),o=new jo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new jo,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>P(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},l=u=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?l(u):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new jo)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Dt(typeof i.accessToken=="string",31837,{l:i}),new dv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Dt(e===null||typeof e=="string",2055,{h:e}),new Yn(e)}},$E=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},GE=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new $E(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},hv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qE=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Dt(this.o===void 0,3512);let i=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?r(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function sG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function RN(){return new TextEncoder}var _p=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=sG(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}};function nt(n,e){return n<e?-1:n>e?1:0}function WE(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return nt(i,r);{let o=RN(),a=aG(o.encode(zR(n,t)),o.encode(zR(e,t)));return a!==0?a:nt(i,r)}}t+=i>65535?2:1}return nt(n.length,e.length)}function zR(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function aG(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return nt(n[t],e[t]);return nt(n.length,e.length)}function gd(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var HR="__name__",fv=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Fe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Fe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=n.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return nt(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):WE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ls.fromString(e.substring(4,e.length-2))}},tn=class n extends fv{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},cG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,cr=class n extends fv{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return cG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HR}static keyField(){return new n([HR])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},a=!1;for(;r<e.length;){let l=e[r];if(l==="\\"){if(r+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(o(),r++)}if(o(),a)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Te=class n{constructor(e){this.path=e}static fromPath(e){return new n(tn.fromString(e))}static fromName(e){return new n(tn.fromString(e).popFirst(5))}static empty(){return new n(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new tn(e.slice()))}};function NN(n,e,t){if(!t)throw new de(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lG(n,e,t,i){if(e===!0&&i===!0)throw new de(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $R(n){if(!Te.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GR(n){if(Te.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Kv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Fe(12329,{type:typeof n})}function zo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Kv(n);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uG(n,e){if(e<=0)throw new de(ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Nn(n,e){let t={typeString:n};return e&&(t.value=e),t}function Pp(n,e){if(!LN(n))throw new de(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let a=n[i];if(r&&typeof a!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new de(ee.INVALID_ARGUMENT,t);return!0}var qR=-62135596800,WR=1e6,Ln=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*WR);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qR)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WR}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-qR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ln._jsonSchemaVersion="firestore/timestamp/1.0",Ln._jsonSchema={type:Nn("string",Ln._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};var Ye=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ln(0,0))}static max(){return new n(new Ln(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var vp=-1,KE=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};KE.UNKNOWN_ID=-1;function dG(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ye.fromTimestamp(i===1e9?new Ln(t+1,0):new Ln(t,i));return new pl(r,Te.empty(),e)}function hG(n){return new pl(n.readTime,n.key,vp)}var pl=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Ye.min(),Te.empty(),vp)}static max(){return new n(Ye.max(),Te.empty(),vp)}};function fG(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:nt(n.largestBatchId,e.largestBatchId))}var pG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ZE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Pd(n){return P(this,null,function*(){if(n.code!==ee.FAILED_PRECONDITION||n.message!==pG)throw n;_e("LocalStore","Unexpectedly lost primary lease")})}var se=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++o,a&&o===r&&t()},u=>i(u))}),a=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,a=new Array(o),l=0;for(let u=0;u<o;u++){let f=u;t(e[f]).next(g=>{a[f]=g,++l,l===o&&i(a)},g=>r(g))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};function gG(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Td(n){return n.name==="IndexedDbTransactionError"}var PS=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this._e(r),this.ae=r=>i.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),TS=-1;function Zv(n){return n==null}function yp(n){return n===0&&1/n==-1/0}function mG(n){return typeof n=="number"&&Number.isInteger(n)&&!yp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var FN="";function _G(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KR(e)),e=vG(n.get(t),e);return KR(e)}function vG(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":t+="";break;case FN:t+="";break;default:t+=o}}return t}function KR(n){return n+FN+""}var yG="remoteDocuments",VN="owner";var BN="mutationQueues";var UN="mutations";var jN="documentMutations",bG="remoteDocumentsV14";var zN="remoteDocumentGlobal";var HN="targets";var $N="targetDocuments";var GN="targetGlobal",qN="collectionParents";var WN="clientMetadata";var KN="bundles";var ZN="namedQueries";var xG="indexConfiguration";var wG="indexState";var CG="indexEntries";var YN="documentOverlays";var EG="globals";var IG=[BN,UN,jN,yG,HN,VN,GN,$N,WN,zN,qN,KN,ZN],m0e=[...IG,YN],SG=[BN,UN,jN,bG,HN,VN,GN,$N,WN,zN,qN,KN,ZN,YN],MG=SG,PG=[...MG,xG,wG,CG];var _0e=[...PG,EG];function ZR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xa(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var fn=class n{constructor(e,t){this.comparator=e,this.root=t||Ho.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ho.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ho.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dd(this.root,e,this.comparator,!0)}},dd=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ho=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}};Ho.EMPTY=null,Ho.RED=!0,Ho.BLACK=!1;Ho.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new Ho(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qn=class n{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(e){return new pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},pv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Er=class n{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new n([])}unionWith(e){let t=new Qn(cr.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gd(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var gv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var _i=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new gv("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};_i.EMPTY_BYTE_STRING=new _i("");var TG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(n){if(Dt(!!n,39018),typeof n=="string"){let e=0,t=TG.exec(n);if(Dt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:en(n.seconds),nanos:en(n.nanos)}}function en(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Us(n){return typeof n=="string"?_i.fromBase64String(n):_i.fromUint8Array(n)}var JN="server_timestamp",XN="__type__",eL="__previous_value__",tL="__local_write_time__";function OS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[XN])===null||t===void 0?void 0:t.stringValue)===JN}function Yv(n){let e=n.mapValue.fields[eL];return OS(e)?Yv(e):e}function bp(n){let e=Bs(n.mapValue.fields[tL].timestampValue);return new Ln(e.seconds,e.nanos)}var YE=class{constructor(e,t,i,r,o,a,l,u,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=g}},mv="(default)",_v=class n{constructor(e,t){this.projectId=e,this.database=t||mv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===mv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var DS="__type__",nL="__max__",ov={mapValue:{fields:{__type__:{stringValue:nL}}}},AS="__vector__",md="value";function Wa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?OS(n)?4:rL(n)?9007199254740991:iL(n)?10:11:Fe(28295,{value:n})}function qo(n,e){if(n===e)return!0;let t=Wa(n);if(t!==Wa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bp(n).isEqual(bp(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=Bs(r.timestampValue),l=Bs(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return Us(r.bytesValue).isEqual(Us(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return en(r.geoPointValue.latitude)===en(o.geoPointValue.latitude)&&en(r.geoPointValue.longitude)===en(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return en(r.integerValue)===en(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=en(r.doubleValue),l=en(o.doubleValue);return a===l?yp(a)===yp(l):isNaN(a)&&isNaN(l)}return!1})(n,e);case 9:return gd(n.arrayValue.values||[],e.arrayValue.values||[],qo);case 10:case 11:return(function(r,o){let a=r.mapValue.fields||{},l=o.mapValue.fields||{};if(ZR(a)!==ZR(l))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!qo(a[u],l[u])))return!1;return!0})(n,e);default:return Fe(52216,{left:n})}}function xp(n,e){return(n.values||[]).find(t=>qo(t,e))!==void 0}function _d(n,e){if(n===e)return 0;let t=Wa(n),i=Wa(e);if(t!==i)return nt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return nt(n.booleanValue,e.booleanValue);case 2:return(function(o,a){let l=en(o.integerValue||o.doubleValue),u=en(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(n,e);case 3:return YR(n.timestampValue,e.timestampValue);case 4:return YR(bp(n),bp(e));case 5:return WE(n.stringValue,e.stringValue);case 6:return(function(o,a){let l=Us(o),u=Us(a);return l.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,a){let l=o.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){let g=nt(l[f],u[f]);if(g!==0)return g}return nt(l.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,a){let l=nt(en(o.latitude),en(a.latitude));return l!==0?l:nt(en(o.longitude),en(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return QR(n.arrayValue,e.arrayValue);case 10:return(function(o,a){var l,u,f,g;let b=o.fields||{},E=a.fields||{},S=(l=b[md])===null||l===void 0?void 0:l.arrayValue,R=(u=E[md])===null||u===void 0?void 0:u.arrayValue,K=nt(((f=S?.values)===null||f===void 0?void 0:f.length)||0,((g=R?.values)===null||g===void 0?void 0:g.length)||0);return K!==0?K:QR(S,R)})(n.mapValue,e.mapValue);case 11:return(function(o,a){if(o===ov.mapValue&&a===ov.mapValue)return 0;if(o===ov.mapValue)return 1;if(a===ov.mapValue)return-1;let l=o.fields||{},u=Object.keys(l),f=a.fields||{},g=Object.keys(f);u.sort(),g.sort();for(let b=0;b<u.length&&b<g.length;++b){let E=WE(u[b],g[b]);if(E!==0)return E;let S=_d(l[u[b]],f[g[b]]);if(S!==0)return S}return nt(u.length,g.length)})(n.mapValue,e.mapValue);default:throw Fe(23264,{le:t})}}function YR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return nt(n,e);let t=Bs(n),i=Bs(e),r=nt(t.seconds,i.seconds);return r!==0?r:nt(t.nanos,i.nanos)}function QR(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let o=_d(t[r],i[r]);if(o)return o}return nt(t.length,i.length)}function vd(n){return QE(n)}function QE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=Bs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Us(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=QE(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${QE(t.fields[a])}`;return r+"}"})(n.mapValue):Fe(61005,{value:n})}function cv(n){switch(Wa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Yv(n);return e?16+cv(e):16;case 5:return 2*n.stringValue.length;case 6:return Us(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,o)=>r+cv(o),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Xa(i.fields,(o,a)=>{r+=o.length+cv(a)}),r})(n.mapValue);default:throw Fe(13486,{value:n})}}function JR(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function JE(n){return!!n&&"integerValue"in n}function kS(n){return!!n&&"arrayValue"in n}function XR(n){return!!n&&"nullValue"in n}function eN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lv(n){return!!n&&"mapValue"in n}function iL(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[DS])===null||t===void 0?void 0:t.stringValue)===AS}function fp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Xa(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=fp(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nL}var y0e={mapValue:{fields:{[DS]:{stringValue:AS},[md]:{arrayValue:{}}}}};var ar=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!lv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fp(t)}setAll(e){let t=cr.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){let u=this.getFieldsMap(t);this.applyChanges(u,i,r),i={},r=[],t=l.popLast()}a?i[l.lastSegment()]=fp(a):r.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());lv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];lv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Xa(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(fp(this.value))}};function oL(n){let e=[];return Xa(n.fields,(t,i)=>{let r=new cr([t]);if(lv(i)){let o=oL(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new Er(e)}var to=class n{constructor(e,t,i,r,o,a,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new n(e,0,Ye.min(),Ye.min(),Ye.min(),ar.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Ye.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Ye.min(),Ye.min(),ar.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ye.min(),Ye.min(),ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var yd=class{constructor(e,t){this.position=e,this.inclusive=t}};function tN(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],a=n.position[r];if(o.field.isKeyField()?i=Te.comparator(Te.fromName(a.referenceValue),t.key):i=_d(a,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function nN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qo(n.position[t],e.position[t]))return!1;return!0}var gl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function OG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var vv=class{},Rn=class n extends vv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new eI(e,t,i):t==="array-contains"?new iI(e,i):t==="in"?new rI(e,i):t==="not-in"?new oI(e,i):t==="array-contains-any"?new sI(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new tI(e,i):new nI(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_d(t,this.value)):t!==null&&Wa(this.value)===Wa(t)&&this.matchesComparison(_d(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},no=class n extends vv{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return sL(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function sL(n){return n.op==="and"}function aL(n){return DG(n)&&sL(n)}function DG(n){for(let e of n.filters)if(e instanceof no)return!1;return!0}function XE(n){if(n instanceof Rn)return n.field.canonicalString()+n.op.toString()+vd(n.value);if(aL(n))return n.filters.map(e=>XE(e)).join(",");{let e=n.filters.map(t=>XE(t)).join(",");return`${n.op}(${e})`}}function cL(n,e){return n instanceof Rn?(function(i,r){return r instanceof Rn&&i.op===r.op&&i.field.isEqual(r.field)&&qo(i.value,r.value)})(n,e):n instanceof no?(function(i,r){return r instanceof no&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,l)=>o&&cL(a,r.filters[l]),!0):!1})(n,e):void Fe(19439)}function lL(n){return n instanceof Rn?(function(t){return`${t.field.canonicalString()} ${t.op} ${vd(t.value)}`})(n):n instanceof no?(function(t){return t.op.toString()+" {"+t.getFilters().map(lL).join(" ,")+"}"})(n):"Filter"}var eI=class extends Rn{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){let t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}},tI=class extends Rn{constructor(e,t){super(e,"in",t),this.keys=uL("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},nI=class extends Rn{constructor(e,t){super(e,"not-in",t),this.keys=uL("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function uL(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Te.fromName(i.referenceValue))}var iI=class extends Rn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return kS(t)&&xp(t.arrayValue,this.value)}},rI=class extends Rn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&xp(this.value.arrayValue,t)}},oI=class extends Rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(xp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xp(this.value.arrayValue,t)}},sI=class extends Rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!kS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>xp(this.value.arrayValue,i))}};var aI=class{constructor(e,t=null,i=[],r=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=l,this.Pe=null}};function iN(n,e=null,t=[],i=[],r=null,o=null,a=null){return new aI(n,e,t,i,r,o,a)}function RS(n){let e=We(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>XE(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(o){return o.field.canonicalString()+o.dir})(i)).join(","),Zv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>vd(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>vd(i)).join(",")),e.Pe=t}return e.Pe}function NS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nN(n.startAt,e.startAt)&&nN(n.endAt,e.endAt)}function cI(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ka=class{constructor(e,t=null,i=[],r=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function AG(n,e,t,i,r,o,a,l){return new Ka(n,e,t,i,r,o,a,l)}function Qv(n){return new Ka(n)}function rN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dL(n){return n.collectionGroup!==null}function pp(n){let e=We(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Qn(cr.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new gl(o,i))}),t.has(cr.keyField().canonicalString())||e.Te.push(new gl(cr.keyField(),i))}return e.Te}function $o(n){let e=We(n);return e.Ie||(e.Ie=kG(e,pp(n))),e.Ie}function kG(n,e){if(n.limitType==="F")return iN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new gl(r.field,o)});let t=n.endAt?new yd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new yd(n.startAt.position,n.startAt.inclusive):null;return iN(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function lI(n,e){let t=n.filters.concat([e]);return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yv(n,e,t){return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jv(n,e){return NS($o(n),$o(e))&&n.limitType===e.limitType}function hL(n){return`${RS($o(n))}|lt:${n.limitType}`}function cd(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>lL(r)).join(", ")}]`),Zv(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>vd(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>vd(r)).join(",")),`Target(${i})`})($o(n))}; limitType=${n.limitType})`}function Xv(n,e){return e.isFoundDocument()&&(function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Te.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(let o of pp(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(a,l,u){let f=tN(a,l,u);return a.inclusive?f<=0:f<0})(i.startAt,pp(i),r)||i.endAt&&!(function(a,l,u){let f=tN(a,l,u);return a.inclusive?f>=0:f>0})(i.endAt,pp(i),r))})(n,e)}function RG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fL(n){return(e,t)=>{let i=!1;for(let r of pp(n)){let o=NG(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function NG(n,e,t){let i=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(o,a,l){let u=a.data.field(o),f=l.data.field(o);return u!==null&&f!==null?_d(u,f):Fe(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Fe(19790,{direction:n.dir})}}var js=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xa(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return QN(this.inner)}size(){return this.innerSize}};var LG=new fn(Te.comparator);function zs(){return LG}var pL=new fn(Te.comparator);function hp(...n){let e=pL;for(let t of n)e=e.insert(t.key,t);return e}function gL(n){let e=pL;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ll(){return gp()}function mL(){return gp()}function gp(){return new js(n=>n.toString(),(n,e)=>n.isEqual(e))}var FG=new fn(Te.comparator),VG=new Qn(Te.comparator);function ft(...n){let e=VG;for(let t of n)e=e.add(t);return e}var BG=new Qn(nt);function UG(){return BG}function LS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yp(e)?"-0":e}}function _L(n){return{integerValue:""+n}}function jG(n,e){return mG(e)?_L(e):LS(n,e)}var bd=class{constructor(){this._=void 0}};function zG(n,e,t){return n instanceof ml?(function(r,o){let a={fields:{[XN]:{stringValue:JN},[tL]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&OS(o)&&(o=Yv(o)),o&&(a.fields[eL]=o),{mapValue:a}})(t,e):n instanceof _l?yL(n,e):n instanceof vl?bL(n,e):(function(r,o){let a=vL(r,o),l=oN(a)+oN(r.Ee);return JE(a)&&JE(r.Ee)?_L(l):LS(r.serializer,l)})(n,e)}function HG(n,e,t){return n instanceof _l?yL(n,e):n instanceof vl?bL(n,e):t}function vL(n,e){return n instanceof xd?(function(i){return JE(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}var ml=class extends bd{},_l=class extends bd{constructor(e){super(),this.elements=e}};function yL(n,e){let t=xL(e);for(let i of n.elements)t.some(r=>qo(r,i))||t.push(i);return{arrayValue:{values:t}}}var vl=class extends bd{constructor(e){super(),this.elements=e}};function bL(n,e){let t=xL(e);for(let i of n.elements)t=t.filter(r=>!qo(r,i));return{arrayValue:{values:t}}}var xd=class extends bd{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function oN(n){return en(n.integerValue||n.doubleValue)}function xL(n){return kS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var uI=class{constructor(e,t){this.field=e,this.transform=t}};function $G(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof _l&&r instanceof _l||i instanceof vl&&r instanceof vl?gd(i.elements,r.elements,qo):i instanceof xd&&r instanceof xd?qo(i.Ee,r.Ee):i instanceof ml&&r instanceof ml})(n.transform,e.transform)}var dI=class{constructor(e,t){this.version=e,this.transformResults=t}},ja=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function uv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var wd=class{};function wL(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new bv(n.key,ja.none()):new yl(n.key,n.data,ja.none());{let t=n.data,i=ar.empty(),r=new Qn(cr.comparator);for(let o of e.fields)if(!r.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Wo(n.key,i,new Er(r.toArray()),ja.none())}}function GG(n,e,t){n instanceof yl?(function(r,o,a){let l=r.value.clone(),u=aN(r.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):n instanceof Wo?(function(r,o,a){if(!uv(r.precondition,o))return void o.convertToUnknownDocument(a.version);let l=aN(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(CL(r)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):(function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function mp(n,e,t,i){return n instanceof yl?(function(o,a,l,u){if(!uv(o.precondition,a))return l;let f=o.value.clone(),g=cN(o.fieldTransforms,u,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof Wo?(function(o,a,l,u){if(!uv(o.precondition,a))return l;let f=cN(o.fieldTransforms,u,a),g=a.data;return g.setAll(CL(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))})(n,e,t,i):(function(o,a,l){return uv(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(n,e,t)}function qG(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),o=vL(i.transform,r||null);o!=null&&(t===null&&(t=ar.empty()),t.set(i.field,o))}return t||null}function sN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&gd(i,r,(o,a)=>$G(o,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var yl=class extends wd{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Wo=class extends wd{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function CL(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function aN(n,e,t){let i=new Map;Dt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let r=0;r<t.length;r++){let o=n[r],a=o.transform,l=e.data.field(o.field);i.set(o.field,HG(a,l,t[r]))}return i}function cN(n,e,t){let i=new Map;for(let r of n){let o=r.transform,a=t.data.field(r.field);i.set(r.field,zG(o,a,e))}return i}var bv=class extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hI=class extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fI=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&GG(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=mp(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=mp(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=mL();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,l=this.applyToLocalView(a,o.mutatedFields);l=t.has(r.key)?null:l;let u=wL(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Ye.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ft())}isEqual(e){return this.batchId===e.batchId&&gd(this.mutations,e.mutations,(t,i)=>sN(t,i))&&gd(this.baseMutations,e.baseMutations,(t,i)=>sN(t,i))}},pI=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Dt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return FG})(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new n(e,t,i,r)}};var gI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var An,mt;function WG(n){switch(n){case ee.OK:return Fe(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Fe(15467,{code:n})}}function EL(n){if(n===void 0)return Vs("GRPC error has no .code"),ee.UNKNOWN;switch(n){case An.OK:return ee.OK;case An.CANCELLED:return ee.CANCELLED;case An.UNKNOWN:return ee.UNKNOWN;case An.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case An.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case An.INTERNAL:return ee.INTERNAL;case An.UNAVAILABLE:return ee.UNAVAILABLE;case An.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case An.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case An.NOT_FOUND:return ee.NOT_FOUND;case An.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case An.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case An.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case An.ABORTED:return ee.ABORTED;case An.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case An.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case An.DATA_LOSS:return ee.DATA_LOSS;default:return Fe(39323,{code:n})}}(mt=An||(An={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";var lN=null;var KG=new Ls([4294967295,4294967295],0);function uN(n){let e=RN().encode(n),t=new DE;return t.update(e),new Uint8Array(t.digest())}function dN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ls([t,i],0),new Ls([r,o],0)]}var _I=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ul(`Invalid padding: ${t}`);if(i<0)throw new ul(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ul(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ls.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply(Ls.fromNumber(i)));return r.compare(KG)===1&&(r=new Ls([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=uN(e),[i,r]=dN(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(i,r,o);if(!this.ye(a))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,r,t);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;let t=uN(e),[i,r]=dN(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(i,r,o);this.we(a)}}we(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},ul=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xv=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,wp.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Ye.min(),r,new fn(nt),zs(),ft())}},wp=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,ft(),ft(),ft())}};var hd=class{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}},wv=class{constructor(e,t){this.targetId=e,this.De=t}},Cv=class{constructor(e,t,i=_i.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Ev=class{constructor(){this.ve=0,this.Ce=hN(),this.Fe=_i.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ft(),t=ft(),i=ft();return this.Ce.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Fe(38017,{changeType:o})}}),new wp(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=hN()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Dt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},vI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=zs(),this.je=sv(),this.Je=sv(),this.He=new fn(nt)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Fe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,r)=>{this.nt(r)&&t(r)})}it(e){let t=e.targetId,i=e.De.count,r=this.st(t);if(r){let o=r.target;if(cI(o))if(i===0){let a=new Te(o.path);this.Xe(t,a,to.newNoDocument(a,Ye.min()))}else Dt(i===1,20013,{expectedCount:i});else{let a=this.ot(t);if(a!==i){let l=this._t(e),u=l?this.ut(l,e,a):1;if(u!==0){this.rt(t);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,f)}lN?.ct((function(g,b,E,S,R){var K,q,ne,fe,we,Re;let zt={localCacheCount:g,existenceFilterCount:b.count,databaseId:E.database,projectId:E.projectId},ct=b.unchangedNames;return ct&&(zt.bloomFilter={applied:R===0,hashCount:(K=ct?.hashCount)!==null&&K!==void 0?K:0,bitmapLength:(fe=(ne=(q=ct?.bits)===null||q===void 0?void 0:q.bitmap)===null||ne===void 0?void 0:ne.length)!==null&&fe!==void 0?fe:0,padding:(Re=(we=ct?.bits)===null||we===void 0?void 0:we.padding)!==null&&Re!==void 0?Re:0,mightContain:V=>{var O;return(O=S?.mightContain(V))!==null&&O!==void 0&&O}}),zt})(a,e.De,this.We.lt(),l,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,a,l;try{a=Us(i).toUint8Array()}catch(u){if(u instanceof gv)return qa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new _I(a,r,o)}catch(u){return qa(u instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){let i=this.We.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Xe(t,o,null),r++)}),r}Pt(e){let t=new Map;this.Ge.forEach((o,a)=>{let l=this.st(a);if(l){if(o.current&&cI(l.target)){let u=new Te(l.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,to.newNoDocument(u,e))}o.Ne&&(t.set(a,o.Le()),o.ke())}});let i=ft();this.Je.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{let f=this.st(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.ze.forEach((o,a)=>a.setReadTime(e));let r=new xv(e,t,this.He,this.ze,i);return this.ze=zs(),this.je=sv(),this.Je=sv(),this.He=new fn(nt),r}Ze(e,t){if(!this.nt(e))return;let i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Ev,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Qn(nt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Qn(nt),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ev),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function sv(){return new fn(Te.comparator)}function hN(){return new fn(Te.comparator)}var ZG={asc:"ASCENDING",desc:"DESCENDING"},YG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QG={and:"AND",or:"OR"},yI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function bI(n,e){return n.useProto3Json||Zv(e)?e:{value:e}}function Iv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JG(n,e){return Iv(n,e.toTimestamp())}function Go(n){return Dt(!!n,49232),Ye.fromTimestamp((function(t){let i=Bs(t);return new Ln(i.seconds,i.nanos)})(n))}function FS(n,e){return xI(n,e).canonicalString()}function xI(n,e){let t=(function(r){return new tn(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function SL(n){let e=tn.fromString(n);return Dt(DL(e),10190,{key:e.toString()}),e}function wI(n,e){return FS(n.databaseId,e.path)}function FE(n,e){let t=SL(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(PL(t))}function ML(n,e){return FS(n.databaseId,e)}function XG(n){let e=SL(n);return e.length===4?tn.emptyPath():PL(e)}function CI(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function PL(n){return Dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fN(n,e,t){return{name:wI(n,e),fields:t.value.mapValue.fields}}function eq(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Fe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Dt(g===void 0||typeof g=="string",58123),_i.fromBase64String(g||"")):(Dt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),_i.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(f){let g=f.code===void 0?ee.UNKNOWN:EL(f.code);return new de(g,f.message||"")})(a);t=new Cv(i,r,o,l||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=FE(n,i.document.name),o=Go(i.document.updateTime),a=i.document.createTime?Go(i.document.createTime):Ye.min(),l=new ar({mapValue:{fields:i.document.fields}}),u=to.newFoundDocument(r,o,a,l),f=i.targetIds||[],g=i.removedTargetIds||[];t=new hd(f,g,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=FE(n,i.document),o=i.readTime?Go(i.readTime):Ye.min(),a=to.newNoDocument(r,o),l=i.removedTargetIds||[];t=new hd([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=FE(n,i.document),o=i.removedTargetIds||[];t=new hd([],o,r,null)}else{if(!("filter"in e))return Fe(11601,{At:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new mI(r,o),l=i.targetId;t=new wv(l,a)}}return t}function tq(n,e){let t;if(e instanceof yl)t={update:fN(n,e.key,e.value)};else if(e instanceof bv)t={delete:wI(n,e.key)};else if(e instanceof Wo)t={update:fN(n,e.key,e.data),updateMask:uq(e.fieldMask)};else{if(!(e instanceof hI))return Fe(16599,{Rt:e.type});t={verify:wI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>(function(o,a){let l=a.transform;if(l instanceof ml)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _l)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof xd)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw Fe(20930,{transform:a.transform})})(0,i))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:JG(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Fe(27497)})(n,e.precondition)),t}function nq(n,e){return n&&n.length>0?(Dt(e!==void 0,14353),n.map(t=>(function(r,o){let a=r.updateTime?Go(r.updateTime):Go(o);return a.isEqual(Ye.min())&&(a=Go(o)),new dI(a,r.transformResults||[])})(t,e))):[]}function iq(n,e){return{documents:[ML(n,e.path)]}}function rq(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=ML(n,r);let o=(function(f){if(f.length!==0)return OL(no.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let a=(function(f){if(f.length!==0)return f.map(g=>(function(E){return{field:ld(E.field),direction:aq(E.dir)}})(g))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let l=bI(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:t,parent:r}}function oq(n){let e=XG(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Dt(i===1,65062);let g=t.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(b){let E=TL(b);return E instanceof no&&aL(E)?E.getFilters():[E]})(t.where));let a=[];t.orderBy&&(a=(function(b){return b.map(E=>(function(R){return new gl(ud(R.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(E))})(t.orderBy));let l=null;t.limit&&(l=(function(b){let E;return E=typeof b=="object"?b.value:b,Zv(E)?null:E})(t.limit));let u=null;t.startAt&&(u=(function(b){let E=!!b.before,S=b.values||[];return new yd(S,E)})(t.startAt));let f=null;return t.endAt&&(f=(function(b){let E=!b.before,S=b.values||[];return new yd(S,E)})(t.endAt)),AG(e,r,a,o,l,"F",u,f)}function sq(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TL(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=ud(t.unaryFilter.field);return Rn.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ud(t.unaryFilter.field);return Rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ud(t.unaryFilter.field);return Rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=ud(t.unaryFilter.field);return Rn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Rn.create(ud(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return no.create(t.compositeFilter.filters.map(i=>TL(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(t.compositeFilter.op))})(n):Fe(30097,{filter:n})}function aq(n){return ZG[n]}function cq(n){return YG[n]}function lq(n){return QG[n]}function ld(n){return{fieldPath:n.canonicalString()}}function ud(n){return cr.fromServerFormat(n.fieldPath)}function OL(n){return n instanceof Rn?(function(t){if(t.op==="=="){if(eN(t.value))return{unaryFilter:{field:ld(t.field),op:"IS_NAN"}};if(XR(t.value))return{unaryFilter:{field:ld(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eN(t.value))return{unaryFilter:{field:ld(t.field),op:"IS_NOT_NAN"}};if(XR(t.value))return{unaryFilter:{field:ld(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ld(t.field),op:cq(t.op),value:t.value}}})(n):n instanceof no?(function(t){let i=t.getFilters().map(r=>OL(r));return i.length===1?i[0]:{compositeFilter:{op:lq(t.op),filters:i}}})(n):Fe(54877,{filter:n})}function uq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function DL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Cp=class n{constructor(e,t,i,r,o=Ye.min(),a=Ye.min(),l=_i.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var EI=class{constructor(e){this.gt=e}};function dq(n){let e=oq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yv(e,e.limit,"L"):e}var Sv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(en(e.integerValue));else if("doubleValue"in e){let i=en(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),yp(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=Bs(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Us(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?rL(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):iL(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Fe(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let r of Object.keys(i))this.xt(r,t),this.Dt(i[r],t)}Lt(e,t){var i,r;let o=e.fields||{};this.Ct(t,53);let a=md,l=((r=(i=o[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Ct(t,15),t.Ft(en(l)),this.xt(a,t),this.Dt(o[a],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let r of i)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),Te.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Sv.Ut=new Sv;var II=class{constructor(){this.Dn=new SI}addToCollectionParentIndex(e,t){return this.Dn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(pl.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(pl.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}},SI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Qn(tn.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Qn(tn.comparator)).toArray()}};var b0e=new Uint8Array(0);var pN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AL=41943040,Cr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Cr.DEFAULT_COLLECTION_PERCENTILE=10,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cr.DEFAULT=new Cr(AL,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cr.DISABLED=new Cr(-1,0,0);var Ep=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var gN="LruGarbageCollector",hq=1048576;function mN([n,e],[t,i]){let r=nt(n,t);return r===0?nt(e,i):r}var MI=class{constructor(e){this.Tr=e,this.buffer=new Qn(mN),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();mN(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},PI=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){_e(gN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>P(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Td(t)?_e(gN,"Ignoring IndexedDB error during garbage collection: ",t):yield Pd(t)}yield this.Rr(3e5)}))}},TI=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return se.resolve(PS.ue);let i=new MI(t);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(pN)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pN):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,o,a,l,u,f,g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),r=this.params.maximumSequenceNumbersToCollect):r=b,a=Date.now(),this.nthSequenceNumber(e,r))).next(b=>(i=b,l=Date.now(),this.removeTargets(e,i,t))).next(b=>(o=b,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(b=>(f=Date.now(),ad()<=at.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${b} documents in `+(f-u)+`ms
Total Duration: ${f-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:b})))}};function fq(n,e){return new TI(n,e)}var OI=class{constructor(){this.changes=new js(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,to.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var DI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var AI=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&mp(i.mutation,r,Er.empty(),Ln.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ft()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ft()){let r=ll();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let a=hp();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let i=ll();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ft()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,i,r){let o=zs(),a=gp(),l=(function(){return gp()})();return t.forEach((u,f)=>{let g=i.get(f.key);r.has(f.key)&&(g===void 0||g.mutation instanceof Wo)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),mp(g.mutation,f,g.mutation.getFieldMask(),Ln.now())):a.set(f.key,Er.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,g)=>a.set(f,g)),t.forEach((f,g)=>{var b;return l.set(f,new DI(g,(b=a.get(f))!==null&&b!==void 0?b:null))}),l))}recalculateAndSaveOverlays(e,t){let i=gp(),r=new fn((a,l)=>a-l),o=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let l of a)l.keys().forEach(u=>{let f=t.get(u);if(f===null)return;let g=i.get(u)||Er.empty();g=l.applyToLocalView(f,g),i.set(u,g);let b=(r.get(l.batchId)||ft()).add(u);r=r.insert(l.batchId,b)})}).next(()=>{let a=[],l=r.getReverseIterator();for(;l.hasNext();){let u=l.getNext(),f=u.key,g=u.value,b=mL();g.forEach(E=>{if(!o.has(E)){let S=wL(t.get(E),i.get(E));S!==null&&b.set(E,S),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,b))}return se.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(a){return Te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dL(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):se.resolve(ll()),l=vp,u=o;return a.next(f=>se.forEach(f,(g,b)=>(l<b.largestBatchId&&(l=b.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{u=u.insert(g,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,ft())).next(g=>({batchId:l,changes:gL(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(i=>{let r=hp();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,a=hp();return this.indexManager.getCollectionParents(e,o).next(l=>se.forEach(l,u=>{let f=(function(b,E){return new Ka(E,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(g=>{g.forEach((b,E)=>{a=a.insert(b,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(a=>{o.forEach((u,f)=>{let g=f.getKey();a.get(g)===null&&(a=a.insert(g,to.newInvalidDocument(g)))});let l=hp();return a.forEach((u,f)=>{let g=o.get(u);g!==void 0&&mp(g.mutation,f,Er.empty(),Ln.now()),Xv(t,f)&&(l=l.insert(u,f))}),l})}};var kI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return se.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Go(r.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:dq(r.bundledQuery),readTime:Go(r.readTime)}})(t)),se.resolve()}};var RI=class{constructor(){this.overlays=new fn(Te.comparator),this.kr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){let i=ll();return se.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.wt(e,t,o)}),se.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.kr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){let r=ll(),o=t.length+1,a=new Te(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){let u=l.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return se.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new fn((f,g)=>f-g),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=ll(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}let l=ll(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,g)=>l.set(f,g)),!(l.size()>=r)););return se.resolve(l)}wt(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new gI(t,i));let o=this.kr.get(t);o===void 0&&(o=ft(),this.kr.set(t,o)),this.kr.set(t,o.add(i.key))}};var NI=class{constructor(){this.sessionToken=_i.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}};var Ip=class{constructor(){this.qr=new Qn(kn.Qr),this.$r=new Qn(kn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let i=new kn(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new kn(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){let t=new Te(new tn([])),i=new kn(t,e),r=new kn(t,e+1),o=[];return this.$r.forEachInRange([i,r],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Te(new tn([])),i=new kn(t,e),r=new kn(t,e+1),o=ft();return this.$r.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new kn(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},kn=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Te.comparator(e.key,t.key)||nt(e.Hr,t.Hr)}static Ur(e,t){return nt(e.Hr,t.Hr)||Te.comparator(e.key,t.key)}};var LI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Qn(kn.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new fI(o,t,i,r);this.mutationQueue.push(a);for(let l of r)this.Yr=this.Yr.add(new kn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return se.resolve(a)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Xr(i),o=r<0?0:r;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?TS:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new kn(t,0),r=new kn(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],a=>{let l=this.Zr(a.Hr);o.push(l)}),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Qn(nt);return t.forEach(r=>{let o=new kn(r,0),a=new kn(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],l=>{i=i.add(l.Hr)})}),se.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;Te.isDocumentKey(o)||(o=o.child(""));let a=new kn(new Te(o),0),l=new Qn(nt);return this.Yr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(u.Hr)),!0)},a),se.resolve(this.ei(l))}ei(e){let t=[];return e.forEach(i=>{let r=this.Zr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Dt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return se.forEach(t.mutations,r=>{let o=new kn(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){let i=new kn(t,0),r=this.Yr.firstAfterOrEqual(i);return se.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var FI=class{constructor(e){this.ni=e,this.docs=(function(){return new fn(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,a=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():to.newInvalidDocument(t))}getEntries(e,t){let i=zs();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():to.newInvalidDocument(r))}),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=zs(),a=t.path,l=new Te(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){let{key:f,value:{document:g}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||fG(hG(g),i)<=0||(r.has(g.key)||Xv(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Fe(9500)}ri(e,t){return se.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new VI(this)}getSize(e){return se.resolve(this.size)}},VI=class extends OI{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),se.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var BI=class{constructor(e){this.persistence=e,this.ii=new js(t=>RS(t),NS),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.si=0,this.oi=new Ip,this.targetCount=0,this._i=Ep.ar()}forEachTarget(e,t){return this.ii.forEach((i,r)=>t(r)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),se.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Ep(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.hr(t),se.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),se.waitFor(o).next(()=>r)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){let i=this.ii.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),se.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),se.resolve()}getMatchingKeysForTargetId(e,t){let i=this.oi.Jr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.oi.containsKey(t))}};var Mv=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new PS(0),this.ci=!1,this.ci=!0,this.li=new NI,this.referenceDelegate=e(this),this.hi=new BI(this),this.indexManager=new II,this.remoteDocumentCache=(function(r){return new FI(r)})(i=>this.referenceDelegate.Pi(i)),this.serializer=new EI(t),this.Ti=new kI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new LI(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){_e("MemoryPersistence","Starting transaction:",e);let r=new UI(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(e,t){return se.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}},UI=class extends ZE{constructor(e){super(),this.currentSequenceNumber=e}},jI=class n{constructor(e){this.persistence=e,this.Ai=new Ip,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Fe(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(r=>this.mi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,i=>{let r=Te.fromPath(i);return this.fi(e,r).next(o=>{o||t.removeEntry(r,Ye.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return se.or([()=>se.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Pv=class n{constructor(e,t){this.persistence=e,this.gi=new js(i=>_G(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=fq(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return se.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(o=>o?se.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,a=>this.Sr(e,a,t).next(l=>{l||(i++,o.removeEntry(a,Ye.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cv(e.data.value)),t}Sr(e,t,i){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.gi.get(t);return se.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var zI=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=ft(),r=ft();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var HI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var $I=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return ek()?8:gG(Zn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.ps(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,t,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new HI;return this.ws(e,t,a).next(l=>{if(o.result=l,this.Rs)return this.Ss(e,t,a,l.size)})}).next(()=>o.result)}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(ad()<=at.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",cd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(ad()<=at.DEBUG&&_e("QueryEngine","Query:",cd(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(ad()<=at.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",cd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$o(t))):se.resolve())}ps(e,t){if(rN(t))return se.resolve(null);let i=$o(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=yv(t,null,"F"),i=$o(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=ft(...o);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.bs(t,l);return this.Ds(t,f,a,u.readTime)?this.ps(e,yv(t,null,"F")):this.vs(e,f,t,u)}))})))}ys(e,t,i,r){return rN(t)||r.isEqual(Ye.min())?se.resolve(null):this.gs.getDocuments(e,i).next(o=>{let a=this.bs(t,o);return this.Ds(t,a,i,r)?se.resolve(null):(ad()<=at.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cd(t)),this.vs(e,a,t,dG(r,vp)).next(l=>l))})}bs(e,t){let i=new Qn(fL(e));return t.forEach((r,o)=>{Xv(e,o)&&(i=i.add(o))}),i}Ds(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,t,i){return ad()<=at.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",cd(t)),this.gs.getDocumentsMatchingQuery(e,t,pl.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var VS="LocalStore",pq=3e8,GI=class{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new fn(nt),this.Ms=new js(o=>RS(o),NS),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function gq(n,e,t,i){return new GI(n,e,t,i)}function kL(n,e){return P(this,null,function*(){let t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],l=[],u=ft();for(let f of r){a.push(f.batchId);for(let g of f.mutations)u=u.add(g.key)}for(let f of o){l.push(f.batchId);for(let g of f.mutations)u=u.add(g.key)}return t.localDocuments.getDocuments(i,u).next(f=>({Bs:f,removedBatchIds:a,addedBatchIds:l}))})})})}function mq(n,e){let t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,g){let b=f.batch,E=b.keys(),S=se.resolve();return E.forEach(R=>{S=S.next(()=>g.getEntry(u,R)).next(K=>{let q=f.docVersions.get(R);Dt(q!==null,48541),K.version.compareTo(q)<0&&(b.applyToRemoteDocument(K,f),K.isValidDocument()&&(K.setReadTime(f.commitVersion),g.addEntry(K)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,b))})(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(l){let u=ft();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function RL(n){let e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function _q(n,e){let t=We(n),i=e.snapshotVersion,r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;let l=[];e.targetChanges.forEach((g,b)=>{let E=r.get(b);if(!E)return;l.push(t.hi.removeMatchingKeys(o,g.removedDocuments,b).next(()=>t.hi.addMatchingKeys(o,g.addedDocuments,b)));let S=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?S=S.withResumeToken(_i.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),r=r.insert(b,S),(function(K,q,ne){return K.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=pq?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(E,S,g)&&l.push(t.hi.updateTargetData(o,S))});let u=zs(),f=ft();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),l.push(vq(o,a,e.documentUpdates).next(g=>{u=g.Ls,f=g.ks})),!i.isEqual(Ye.min())){let g=t.hi.getLastRemoteSnapshotVersion(o).next(b=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(g)}return se.waitFor(l).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(t.Fs=r,o))}function vq(n,e,t){let i=ft(),r=ft();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=zs();return t.forEach((l,u)=>{let f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Ye.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):_e(VS,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{Ls:a,ks:r}})}function yq(n,e){let t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=TS),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function bq(n,e){let t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.hi.getTargetData(i,e).next(o=>o?(r=o,se.resolve(r)):t.hi.allocateTargetId(i).next(a=>(r=new Cp(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}function qI(n,e,t){return P(this,null,function*(){let i=We(n),r=i.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Td(a))throw a;_e(VS,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)})}function _N(n,e,t){let i=We(n),r=Ye.min(),o=ft();return i.persistence.runTransaction("Execute query","readwrite",a=>(function(u,f,g){let b=We(u),E=b.Ms.get(g);return E!==void 0?se.resolve(b.Fs.get(E)):b.hi.getTargetData(f,g)})(i,a,$o(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,t?r:Ye.min(),t?o:ft())).next(l=>(xq(i,RG(e),l),{documents:l,qs:o})))}function xq(n,e,t){let i=n.xs.get(e)||Ye.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.xs.set(e,i)}var Tv=class{constructor(){this.activeTargetIds=UG()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var WI=class{constructor(){this.Fo=new Tv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Tv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var KI=class{xo(e){}shutdown(){}};var vN="ConnectivityMonitor",Ov=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_e(vN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){_e(vN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var av=null;function ZI(){return av===null?av=(function(){return 268435456+Math.round(2147483648*Math.random())})():av++,"0x"+av.toString(16)}var VE="RestConnection",wq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},YI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===mv?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,o){let a=ZI(),l=this.Go(e,t.toUriEncodedString());_e(VE,`Sending RPC '${e}' ${a}:`,l,i);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,r,o);let{host:f}=new URL(l),g=Yr(f);return this.jo(e,l,u,i,g).then(b=>(_e(VE,`Received RPC '${e}' ${a}: `,b),b),b=>{throw qa(VE,`RPC '${e}' ${a} failed with error: `,b,"url: ",l,"request:",i),b})}Jo(e,t,i,r,o,a){return this.Wo(e,t,i,r,o)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Md})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}Go(e,t){let i=wq[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}};var QI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var mi="WebChannelConnection",JI=class extends YI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,o){let a=ZI();return new Promise((l,u)=>{let f=new AE;f.setWithCredentials(!0),f.listenOnce(kE.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case dp.NO_ERROR:let b=f.getResponseJson();_e(mi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),l(b);break;case dp.TIMEOUT:_e(mi,`RPC '${e}' ${a} timed out`),u(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case dp.HTTP_ERROR:let E=f.getStatus();if(_e(mi,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);let R=S?.error;if(R&&R.status&&R.message){let K=(function(ne){let fe=ne.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(fe)>=0?fe:ee.UNKNOWN})(R.status);u(new de(K,R.message))}else u(new de(ee.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new de(ee.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{c_:e,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{_e(mi,`RPC '${e}' ${a} completed.`)}});let g=JSON.stringify(r);_e(mi,`RPC '${e}' ${a} sending request:`,r),f.send(t,"POST",g,i,15)})}P_(e,t,i){let r=ZI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LE(),l=NE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;let g=o.join("");_e(mi,`Creating RPC '${e}' stream ${r}: ${g}`,u);let b=a.createWebChannel(g,u);this.T_(b);let E=!1,S=!1,R=new QI({Ho:q=>{S?_e(mi,`Not sending because RPC '${e}' stream ${r} is closed:`,q):(E||(_e(mi,`Opening RPC '${e}' stream ${r} transport.`),b.open(),E=!0),_e(mi,`RPC '${e}' stream ${r} sending:`,q),b.send(q))},Yo:()=>b.close()}),K=(q,ne,fe)=>{q.listen(ne,we=>{try{fe(we)}catch(Re){setTimeout(()=>{throw Re},0)}})};return K(b,sd.EventType.OPEN,()=>{S||(_e(mi,`RPC '${e}' stream ${r} transport opened.`),R.s_())}),K(b,sd.EventType.CLOSE,()=>{S||(S=!0,_e(mi,`RPC '${e}' stream ${r} transport closed`),R.__(),this.I_(b))}),K(b,sd.EventType.ERROR,q=>{S||(S=!0,qa(mi,`RPC '${e}' stream ${r} transport errored. Name:`,q.name,"Message:",q.message),R.__(new de(ee.UNAVAILABLE,"The operation could not be completed")))}),K(b,sd.EventType.MESSAGE,q=>{var ne;if(!S){let fe=q.data[0];Dt(!!fe,16349);let we=fe,Re=we?.error||((ne=we[0])===null||ne===void 0?void 0:ne.error);if(Re){_e(mi,`RPC '${e}' stream ${r} received error:`,Re);let zt=Re.status,ct=(function(D){let N=An[D];if(N!==void 0)return EL(N)})(zt),V=Re.message;ct===void 0&&(ct=ee.INTERNAL,V="Unknown error status: "+zt+" with message "+Re.message),S=!0,R.__(new de(ct,V)),b.close()}else _e(mi,`RPC '${e}' stream ${r} received:`,fe),R.a_(fe)}}),K(l,RE.STAT_EVENT,q=>{q.stat===rv.PROXY?_e(mi,`RPC '${e}' stream ${r} detected buffering proxy`):q.stat===rv.NOPROXY&&_e(mi,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function BE(){return typeof document<"u"?document:null}function ey(n){return new yI(n,!0)}var Dv=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&_e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var yN="PersistentStream",Av=class{constructor(e,t,i,r,o,a,l,u){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Dv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return P(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return P(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return P(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Vs(t.toString()),Vs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===t&&this.W_(i,r)},i=>{e(()=>{let r=new de(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,t){let i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(()=>P(this,null,function*(){this.state=0,this.start()}))}G_(e){return _e(yN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(_e(yN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},XI=class extends Av{constructor(e,t,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=eq(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Ye.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?Ye.min():a.readTime?Go(a.readTime):Ye.min()})(e);return this.listener.J_(t,i)}H_(e){let t={};t.database=CI(this.serializer),t.addTarget=(function(o,a){let l,u=a.target;if(l=cI(u)?{documents:iq(o,u)}:{query:rq(o,u).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=IL(o,a.resumeToken);let f=bI(o,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(Ye.min())>0){l.readTime=Iv(o,a.snapshotVersion.toTimestamp());let f=bI(o,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);let i=sq(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){let t={};t.database=CI(this.serializer),t.removeTarget=e,this.k_(t)}},eS=class extends Av{constructor(e,t,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=nq(e.writeResults,e.commitTime),i=Go(e.commitTime);return this.listener.ta(i,t)}na(){let e={};e.database=CI(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>tq(this.serializer,i))};this.k_(t)}};var tS=class{},nS=class extends tS{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,xI(t,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(ee.UNKNOWN,o.toString())})}Jo(e,t,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,xI(t,i),r,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(ee.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},iS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Vs(t),this._a=!1):_e("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var bl="RemoteStore",rS=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{i.enqueueAndForget(()=>P(this,null,function*(){xl(this)&&(_e(bl,"Restarting streams for network reachability change."),yield(function(u){return P(this,null,function*(){let f=We(u);f.Ia.add(4),yield Tp(f),f.Aa.set("Unknown"),f.Ia.delete(4),yield ty(f)})})(this))}))}),this.Aa=new iS(i,r)}};function ty(n){return P(this,null,function*(){if(xl(n))for(let e of n.da)yield e(!0)})}function Tp(n){return P(this,null,function*(){for(let e of n.da)yield e(!1)})}function NL(n,e){let t=We(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),zS(t)?jS(t):Od(t).x_()&&US(t,e))}function BS(n,e){let t=We(n),i=Od(t);t.Ta.delete(e),i.x_()&&LL(t,e),t.Ta.size===0&&(i.x_()?i.B_():xl(t)&&t.Aa.set("Unknown"))}function US(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Od(n).H_(e)}function LL(n,e){n.Ra.$e(e),Od(n).Y_(e)}function jS(n){n.Ra=new vI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Od(n).start(),n.Aa.aa()}function zS(n){return xl(n)&&!Od(n).M_()&&n.Ta.size>0}function xl(n){return We(n).Ia.size===0}function FL(n){n.Ra=void 0}function Cq(n){return P(this,null,function*(){n.Aa.set("Online")})}function Eq(n){return P(this,null,function*(){n.Ta.forEach((e,t)=>{US(n,e)})})}function Iq(n,e){return P(this,null,function*(){FL(n),zS(n)?(n.Aa.la(e),jS(n)):n.Aa.set("Unknown")})}function Sq(n,e,t){return P(this,null,function*(){if(n.Aa.set("Online"),e instanceof Cv&&e.state===2&&e.cause)try{yield(function(r,o){return P(this,null,function*(){let a=o.cause;for(let l of o.targetIds)r.Ta.has(l)&&(yield r.remoteSyncer.rejectListen(l,a),r.Ta.delete(l),r.Ra.removeTarget(l))})})(n,e)}catch(i){_e(bl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield kv(n,i)}else if(e instanceof hd?n.Ra.Ye(e):e instanceof wv?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ye.min()))try{let i=yield RL(n.localStore);t.compareTo(i)>=0&&(yield(function(o,a){let l=o.Ra.Pt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let g=o.Ta.get(f);g&&o.Ta.set(f,g.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{let g=o.Ta.get(u);if(!g)return;o.Ta.set(u,g.withResumeToken(_i.EMPTY_BYTE_STRING,g.snapshotVersion)),LL(o,u);let b=new Cp(g.target,u,f,g.sequenceNumber);US(o,b)}),o.remoteSyncer.applyRemoteEvent(l)})(n,t))}catch(i){_e(bl,"Failed to raise snapshot:",i),yield kv(n,i)}})}function kv(n,e,t){return P(this,null,function*(){if(!Td(e))throw e;n.Ia.add(1),yield Tp(n),n.Aa.set("Offline"),t||(t=()=>RL(n.localStore)),n.asyncQueue.enqueueRetryable(()=>P(null,null,function*(){_e(bl,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield ty(n)}))})}function VL(n,e){return e().catch(t=>kv(n,t,e))}function ny(n){return P(this,null,function*(){let e=We(n),t=Za(e),i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:TS;for(;Mq(e);)try{let r=yield yq(e.localStore,i);if(r===null){e.Pa.length===0&&t.B_();break}i=r.batchId,Pq(e,r)}catch(r){yield kv(e,r)}BL(e)&&UL(e)})}function Mq(n){return xl(n)&&n.Pa.length<10}function Pq(n,e){n.Pa.push(e);let t=Za(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function BL(n){return xl(n)&&!Za(n).M_()&&n.Pa.length>0}function UL(n){Za(n).start()}function Tq(n){return P(this,null,function*(){Za(n).na()})}function Oq(n){return P(this,null,function*(){let e=Za(n);for(let t of n.Pa)e.X_(t.mutations)})}function Dq(n,e,t){return P(this,null,function*(){let i=n.Pa.shift(),r=pI.from(i,e,t);yield VL(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield ny(n)})}function Aq(n,e){return P(this,null,function*(){e&&Za(n).Z_&&(yield(function(i,r){return P(this,null,function*(){if((function(a){return WG(a)&&a!==ee.ABORTED})(r.code)){let o=i.Pa.shift();Za(i).N_(),yield VL(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield ny(i)}})})(n,e)),BL(n)&&UL(n)})}function bN(n,e){return P(this,null,function*(){let t=We(n);t.asyncQueue.verifyOperationInProgress(),_e(bl,"RemoteStore received new credentials");let i=xl(t);t.Ia.add(3),yield Tp(t),i&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield ty(t)})}function kq(n,e){return P(this,null,function*(){let t=We(n);e?(t.Ia.delete(2),yield ty(t)):e||(t.Ia.add(2),yield Tp(t),t.Aa.set("Unknown"))})}function Od(n){return n.Va||(n.Va=(function(t,i,r){let o=We(t);return o.ia(),new XI(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:Cq.bind(null,n),e_:Eq.bind(null,n),n_:Iq.bind(null,n),J_:Sq.bind(null,n)}),n.da.push(e=>P(null,null,function*(){e?(n.Va.N_(),zS(n)?jS(n):n.Aa.set("Unknown")):(yield n.Va.stop(),FL(n))}))),n.Va}function Za(n){return n.ma||(n.ma=(function(t,i,r){let o=We(t);return o.ia(),new eS(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Tq.bind(null,n),n_:Aq.bind(null,n),ea:Oq.bind(null,n),ta:Dq.bind(null,n)}),n.da.push(e=>P(null,null,function*(){e?(n.ma.N_(),yield ny(n)):(yield n.ma.stop(),n.Pa.length>0&&(_e(bl,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var oS=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let a=Date.now()+i,l=new n(e,t,a,r,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function HS(n,e){if(Vs("AsyncQueue",`${e}: ${n}`),Td(n))return new de(ee.UNAVAILABLE,`${e}: ${n}`);throw n}var Rv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=hp(),this.sortedSet=new fn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Nv=class{constructor(){this.fa=new fn(Te.comparator)}track(e){let t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Fe(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}},Cd=class n{constructor(e,t,i,r,o,a,l,u,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){let a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new n(e,t,Rv.emptySet(t),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var sS=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},aS=class{constructor(){this.queries=xN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){let r=We(t),o=r.queries;r.queries=xN(),o.forEach((a,l)=>{for(let u of l.wa)u.onError(i)})})(this,new de(ee.ABORTED,"Firestore shutting down"))}};function xN(){return new js(n=>hL(n),Jv)}function jL(n,e){return P(this,null,function*(){let t=We(n),i=3,r=e.query,o=t.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new sS,i=e.ba()?0:1);try{switch(i){case 0:o.ya=yield t.onListen(r,!0);break;case 1:o.ya=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(a){let l=HS(a,`Initialization of query '${cd(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&$S(t)})}function zL(n,e){return P(this,null,function*(){let t=We(n),i=e.query,r=3,o=t.queries.get(i);if(o){let a=o.wa.indexOf(e);a>=0&&(o.wa.splice(a,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function Rq(n,e){let t=We(n),i=!1;for(let r of e){let o=r.query,a=t.queries.get(o);if(a){for(let l of a.wa)l.Ca(r)&&(i=!0);a.ya=r}}i&&$S(t)}function Nq(n,e,t){let i=We(n),r=i.queries.get(e);if(r)for(let o of r.wa)o.onError(t);i.queries.delete(e)}function $S(n){n.Da.forEach(e=>{e.next()})}var cS,wN;(wN=cS||(cS={})).Fa="default",wN.Cache="cache";var Lv=class{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Cd(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==cS.Cache}};var Fv=class{constructor(e){this.key=e}},Vv=class{constructor(e){this.key=e}},lS=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ft(),this.mutatedKeys=ft(),this.Xa=fL(e),this.eu=new Rv(this.Xa)}get tu(){return this.Ha}nu(e,t){let i=t?t.ru:new Nv,r=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,a=r,l=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,b)=>{let E=r.get(g),S=Xv(this.query,b)?b:null,R=!!E&&this.mutatedKeys.has(E.key),K=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),q=!1;E&&S?E.data.isEqual(S.data)?R!==K&&(i.track({type:3,doc:S}),q=!0):this.iu(E,S)||(i.track({type:2,doc:S}),q=!0,(u&&this.Xa(S,u)>0||f&&this.Xa(S,f)<0)&&(l=!0)):!E&&S?(i.track({type:0,doc:S}),q=!0):E&&!S&&(i.track({type:1,doc:E}),q=!0,(u||f)&&(l=!0)),q&&(S?(a=a.add(S),o=K?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{eu:a,ru:i,Ds:l,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort((g,b)=>(function(S,R){let K=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{At:q})}};return K(S)-K(R)})(g.type,b.type)||this.Xa(g.doc,b.doc)),this.su(i),r=r!=null&&r;let l=t&&!r?this.ou():[],u=this.Za.size===0&&this.current&&!r?1:0,f=u!==this.Ya;return this.Ya=u,a.length!==0||f?{snapshot:new Cd(this.query,e.eu,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Nv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ft(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});let t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new Vv(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new Fv(i))}),t}uu(e){this.Ha=e.qs,this.Za=ft();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Cd.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},GS="SyncEngine",uS=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},dS=class{constructor(e){this.key=e,this.lu=!1}},hS=class{constructor(e,t,i,r,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new js(l=>hL(l),Jv),this.Tu=new Map,this.Iu=new Set,this.du=new fn(Te.comparator),this.Eu=new Map,this.Au=new Ip,this.Ru={},this.Vu=new Map,this.mu=Ep.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Lq(n,e,t=!0){return P(this,null,function*(){let i=KL(n),r,o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=yield HL(i,e,t,!0),r})}function Fq(n,e){return P(this,null,function*(){let t=KL(n);yield HL(t,e,!0,!1)})}function HL(n,e,t,i){return P(this,null,function*(){let r=yield bq(n.localStore,$o(e)),o=r.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),l;return i&&(l=yield Vq(n,e,o,a==="current",r.resumeToken)),n.isPrimaryClient&&t&&NL(n.remoteStore,r),l})}function Vq(n,e,t,i,r){return P(this,null,function*(){n.gu=(b,E,S)=>(function(K,q,ne,fe){return P(this,null,function*(){let we=q.view.nu(ne);we.Ds&&(we=yield _N(K.localStore,q.query,!1).then(({documents:V})=>q.view.nu(V,we)));let Re=fe&&fe.targetChanges.get(q.targetId),zt=fe&&fe.targetMismatches.get(q.targetId)!=null,ct=q.view.applyChanges(we,K.isPrimaryClient,Re,zt);return EN(K,q.targetId,ct._u),ct.snapshot})})(n,b,E,S);let o=yield _N(n.localStore,e,!0),a=new lS(e,o.qs),l=a.nu(o.documents),u=wp.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=a.applyChanges(l,n.isPrimaryClient,u);EN(n,t,f._u);let g=new uS(e,t,a);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),f.snapshot})}function Bq(n,e,t){return P(this,null,function*(){let i=We(n),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter(a=>!Jv(a,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qI(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&BS(i.remoteStore,r.targetId),fS(i,r.targetId)}).catch(Pd))):(fS(i,r.targetId),yield qI(i.localStore,r.targetId,!0))})}function Uq(n,e){return P(this,null,function*(){let t=We(n),i=t.Pu.get(e),r=t.Tu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),BS(t.remoteStore,i.targetId))})}function jq(n,e,t){return P(this,null,function*(){let i=Kq(n);try{let r=yield(function(a,l){let u=We(a),f=Ln.now(),g=l.reduce((S,R)=>S.add(R.key),ft()),b,E;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let R=zs(),K=ft();return u.Os.getEntries(S,g).next(q=>{R=q,R.forEach((ne,fe)=>{fe.isValidDocument()||(K=K.add(ne))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,R)).next(q=>{b=q;let ne=[];for(let fe of l){let we=qG(fe,b.get(fe.key).overlayedDocument);we!=null&&ne.push(new Wo(fe.key,we,oL(we.value.mapValue),ja.exists(!0)))}return u.mutationQueue.addMutationBatch(S,f,ne,l)}).next(q=>{E=q;let ne=q.applyToLocalDocumentSet(b,K);return u.documentOverlayCache.saveOverlays(S,q.batchId,ne)})}).then(()=>({batchId:E.batchId,changes:gL(b)}))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(a,l,u){let f=a.Ru[a.currentUser.toKey()];f||(f=new fn(nt)),f=f.insert(l,u),a.Ru[a.currentUser.toKey()]=f})(i,r.batchId,t),yield Op(i,r.changes),yield ny(i.remoteStore)}catch(r){let o=HS(r,"Failed to persist write");t.reject(o)}})}function $L(n,e){return P(this,null,function*(){let t=We(n);try{let i=yield _q(t.localStore,e);e.targetChanges.forEach((r,o)=>{let a=t.Eu.get(o);a&&(Dt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.lu=!0:r.modifiedDocuments.size>0?Dt(a.lu,14607):r.removedDocuments.size>0&&(Dt(a.lu,42227),a.lu=!1))}),yield Op(t,i,e)}catch(i){yield Pd(i)}})}function CN(n,e,t){let i=We(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Pu.forEach((o,a)=>{let l=a.view.va(e);l.snapshot&&r.push(l.snapshot)}),(function(a,l){let u=We(a);u.onlineState=l;let f=!1;u.queries.forEach((g,b)=>{for(let E of b.wa)E.va(l)&&(f=!0)}),f&&$S(u)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function zq(n,e,t){return P(this,null,function*(){let i=We(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Eu.get(e),o=r&&r.key;if(o){let a=new fn(Te.comparator);a=a.insert(o,to.newNoDocument(o,Ye.min()));let l=ft().add(o),u=new xv(Ye.min(),new Map,new fn(nt),a,l);yield $L(i,u),i.du=i.du.remove(o),i.Eu.delete(e),qS(i)}else yield qI(i.localStore,e,!1).then(()=>fS(i,e,t)).catch(Pd)})}function Hq(n,e){return P(this,null,function*(){let t=We(n),i=e.batch.batchId;try{let r=yield mq(t.localStore,e);qL(t,i,null),GL(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Op(t,r)}catch(r){yield Pd(r)}})}function $q(n,e,t){return P(this,null,function*(){let i=We(n);try{let r=yield(function(a,l){let u=We(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return u.mutationQueue.lookupMutationBatch(f,l).next(b=>(Dt(b!==null,37113),g=b.keys(),u.mutationQueue.removeMutationBatch(f,b))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,g,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>u.localDocuments.getDocuments(f,g))})})(i.localStore,e);qL(i,e,t),GL(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Op(i,r)}catch(r){yield Pd(r)}})}function GL(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function qL(n,e,t){let i=We(n),r=i.Ru[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function fS(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||WL(n,i)})}function WL(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(BS(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),qS(n))}function EN(n,e,t){for(let i of t)i instanceof Fv?(n.Au.addReference(i.key,e),Gq(n,i)):i instanceof Vv?(_e(GS,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||WL(n,i.key)):Fe(19791,{yu:i})}function Gq(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(_e(GS,"New document in limbo: "+t),n.Iu.add(i),qS(n))}function qS(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Te(tn.fromString(e)),i=n.mu.next();n.Eu.set(i,new dS(t)),n.du=n.du.insert(t,i),NL(n.remoteStore,new Cp($o(Qv(t.path)),i,"TargetPurposeLimboResolution",PS.ue))}}function Op(n,e,t){return P(this,null,function*(){let i=We(n),r=[],o=[],a=[];i.Pu.isEmpty()||(i.Pu.forEach((l,u)=>{a.push(i.gu(u,e,t).then(f=>{var g;if((f||t)&&i.isPrimaryClient){let b=f?!f.fromCache:(g=t?.targetChanges.get(u.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(u.targetId,b?"current":"not-current")}if(f){r.push(f);let b=zI.Es(u.targetId,f);o.push(b)}}))}),yield Promise.all(a),i.hu.J_(r),yield(function(u,f){return P(this,null,function*(){let g=We(u);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>se.forEach(f,E=>se.forEach(E.Is,S=>g.persistence.referenceDelegate.addReference(b,E.targetId,S)).next(()=>se.forEach(E.ds,S=>g.persistence.referenceDelegate.removeReference(b,E.targetId,S)))))}catch(b){if(!Td(b))throw b;_e(VS,"Failed to update sequence numbers: "+b)}for(let b of f){let E=b.targetId;if(!b.fromCache){let S=g.Fs.get(E),R=S.snapshotVersion,K=S.withLastLimboFreeSnapshotVersion(R);g.Fs=g.Fs.insert(E,K)}}})})(i.localStore,o))})}function qq(n,e){return P(this,null,function*(){let t=We(n);if(!t.currentUser.isEqual(e)){_e(GS,"User change. New user:",e.toKey());let i=yield kL(t.localStore,e);t.currentUser=e,(function(o,a){o.Vu.forEach(l=>{l.forEach(u=>{u.reject(new de(ee.CANCELLED,a))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Op(t,i.Bs)}})}function Wq(n,e){let t=We(n),i=t.Eu.get(e);if(i&&i.lu)return ft().add(i.key);{let r=ft(),o=t.Tu.get(e);if(!o)return r;for(let a of o){let l=t.Pu.get(a);r=r.unionWith(l.view.tu)}return r}}function KL(n){let e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$L.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zq.bind(null,e),e.hu.J_=Rq.bind(null,e.eventManager),e.hu.pu=Nq.bind(null,e.eventManager),e}function Kq(n){let e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$q.bind(null,e),e}var ZL=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return P(this,null,function*(){this.serializer=ey(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,i){return null}Fu(t,i){return null}vu(t){return gq(this.persistence,new $I,t.initialUser,this.serializer)}Du(t){return new Mv(jI.Vi,this.serializer)}bu(t){return new WI}terminate(){return P(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),pS=class extends ZL{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Dt(this.persistence.referenceDelegate instanceof Pv,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new PI(i,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Cr.withCacheSize(this.cacheSizeBytes):Cr.DEFAULT;return new Mv(i=>Pv.Vi(i,t),this.serializer)}};var Zq=(()=>{class n{initialize(t,i){return P(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>CN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qq.bind(null,this.syncEngine),yield kq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new aS})()}createDatastore(t){let i=ey(t.databaseInfo.databaseId),r=(function(a){return new JI(a)})(t.databaseInfo);return(function(a,l,u,f){return new nS(a,l,u,f)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,o,a,l,u){return new rS(r,o,a,l,u)})(this.localStore,this.datastore,t.asyncQueue,i=>CN(this.syncEngine,i,0),(function(){return Ov.C()?new Ov:new KI})())}createSyncEngine(t,i){return(function(o,a,l,u,f,g,b){let E=new hS(o,a,l,u,f,g);return b&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return P(this,null,function*(){var t,i;yield(function(o){return P(this,null,function*(){let a=We(o);_e(bl,"RemoteStore shutting down."),a.Ia.add(5),yield Tp(a),a.Ea.shutdown(),a.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Bv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Vs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ya="FirestoreClient",gS=class{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Yn.UNAUTHENTICATED,this.clientId=_p.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,a=>P(this,null,function*(){_e(Ya,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(_e(Ya,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>P(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=HS(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function UE(n,e){return P(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),_e(Ya,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>P(null,null,function*(){i.isEqual(r)||(yield kL(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>{qa("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{_e("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{qa("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=e})}function IN(n,e){return P(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Yq(n);_e(Ya,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>bN(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>bN(e.remoteStore,r)),n._onlineComponents=e})}function Yq(n){return P(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e(Ya,"Using user provided OfflineComponentProvider");try{yield UE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ee.FAILED_PRECONDITION||r.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;qa("Error using user provided cache. Falling back to memory cache: "+t),yield UE(n,new ZL)}}else _e(Ya,"Using default OfflineComponentProvider"),yield UE(n,new pS(void 0));return n._offlineComponents})}function YL(n){return P(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e(Ya,"Using user provided OnlineComponentProvider"),yield IN(n,n._uninitializedComponentsProvider._online)):(_e(Ya,"Using default OnlineComponentProvider"),yield IN(n,new Zq))),n._onlineComponents})}function Qq(n){return YL(n).then(e=>e.syncEngine)}function mS(n){return P(this,null,function*(){let e=yield YL(n),t=e.eventManager;return t.onListen=Lq.bind(null,e.syncEngine),t.onUnlisten=Bq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Fq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Uq.bind(null,e.syncEngine),t})}function Jq(n,e,t={}){let i=new jo;return n.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return(function(o,a,l,u,f){let g=new Bv({next:E=>{g.Ou(),a.enqueueAndForget(()=>zL(o,b));let S=E.docs.has(l);!S&&E.fromCache?f.reject(new de(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&u&&u.source==="server"?f.reject(new de(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),b=new Lv(Qv(l.path),g,{includeMetadataChanges:!0,ka:!0});return jL(o,b)})(yield mS(n),n.asyncQueue,e,t,i)})),i.promise}function QL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var SN=new Map;var JL="firestore.googleapis.com",MN=!0,Uv=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JL,this.ssl=MN}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:MN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hq)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QL((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ed=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new jE;switch(i.type){case"firstParty":return new GE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return P(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=SN.get(t);i&&(_e("ComponentProvider","Removing Datastore"),SN.delete(t),i.terminate())})(this),Promise.resolve()}};function XL(n,e,t,i={}){var r;n=zo(n,Ed);let o=Yr(e),a=n._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Qu(`https://${u}`),Ju("Firestore",!0)),a.host!==JL&&a.host!==u&&qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f=Object.assign(Object.assign({},a),{host:u,ssl:o,emulatorOptions:i});if(!Ro(f,l)&&(n._setSettings(f),i.mockUserToken)){let g,b;if(typeof i.mockUserToken=="string")g=i.mockUserToken,b=Yn.MOCK_USER;else{g=D0(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Yn(E)}n._authCredentials=new zE(new dv(g,b))}}var Qa=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},jn=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Pp(t,n._jsonSchema))return new n(e,i||null,new Te(tn.fromString(t.referencePath)))}};jn._jsonSchemaVersion="firestore/documentReference/1.0",jn._jsonSchema={type:Nn("string",jn._jsonSchemaVersion),referencePath:Nn("string")};var za=class n extends Qa{constructor(e,t,i){super(e,t,Qv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function e4(n,e,...t){if(n=Ot(n),NN("collection","path",e),n instanceof Ed){let i=tn.fromString(e,...t);return GR(i),new za(n,null,i)}{if(!(n instanceof jn||n instanceof za))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(tn.fromString(e,...t));return GR(i),new za(n.firestore,null,i)}}function t4(n,e,...t){if(n=Ot(n),arguments.length===1&&(e=_p.newId()),NN("doc","path",e),n instanceof Ed){let i=tn.fromString(e,...t);return $R(i),new jn(n,null,new Te(i))}{if(!(n instanceof jn||n instanceof za))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(tn.fromString(e,...t));return $R(i),new jn(n.firestore,n instanceof za?n.converter:null,new Te(i))}}var PN="AsyncQueue",jv=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Dv(this,"async_queue_retry"),this.oc=()=>{let i=BE();i&&_e(PN,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=BE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=BE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new jo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return P(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Td(e))throw e;_e(PN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Vs("INTERNAL UNHANDLED ERROR: ",TN(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=oS.createAndSchedule(this,e,t,i,o=>this.lc(o));return this.ec.push(r),r}ac(){this.tc&&Fe(47125,{hc:TN(this.tc)})}verifyOperationInProgress(){}Pc(){return P(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function TN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function ON(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Ja=class extends Ed{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new jv,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return P(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jv(e),this._firestoreClient=void 0,yield e}})}};function n4(n,e){let t=typeof n=="object"?n:Ps(),i=typeof n=="string"?n:e||mv,r=Ra(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=O0("firestore");o&&XL(r,...o)}return r}function WS(n){if(n._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Xq(n),n._firestoreClient}function Xq(n){var e,t,i;let r=n._freezeSettings(),o=(function(l,u,f,g){return new YE(l,u,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,QL(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new gS(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(l){let u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(n._componentsProvider))}var Ha=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(_i.fromBase64String(e))}catch(t){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(_i.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ha._jsonSchemaVersion="firestore/bytes/1.0",Ha._jsonSchema={type:Nn("string",Ha._jsonSchemaVersion),bytes:Nn("string")};var Id=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Sd=class{constructor(e){this._methodName=e}};var $a=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Pp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};$a._jsonSchemaVersion="firestore/geoPoint/1.0",$a._jsonSchema={type:Nn("string",$a._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};var Ga=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new de(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ga._jsonSchemaVersion="firestore/vectorValue/1.0",Ga._jsonSchema={type:Nn("string",Ga._jsonSchemaVersion),vectorValues:Nn("object")};var eW=/^__.*__$/,_S=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Wo(e,this.data,this.fieldMask,t,this.fieldTransforms):new yl(e,this.data,t,this.fieldTransforms)}},zv=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Wo(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function i4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ec:n})}}var vS=class n{constructor(e,t,i,r,o,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return $v(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(i4(this.Ec)&&eW.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},yS=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ey(e)}Dc(e,t,i,r=!1){return new vS({Ec:e,methodName:t,bc:i,path:cr.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function KS(n){let e=n._freezeSettings(),t=ey(n._databaseId);return new yS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tW(n,e,t,i,r,o={}){let a=n.Dc(o.merge||o.mergeFields?2:0,e,t,r);ZS("Data must be an object, but it was:",a,i);let l=r4(i,a),u,f;if(o.merge)u=new Er(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let g=[];for(let b of o.mergeFields){let E=xS(e,b,t);if(!a.contains(E))throw new de(ee.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);s4(g,E)||g.push(E)}u=new Er(g),f=a.fieldTransforms.filter(b=>u.covers(b.field))}else u=null,f=a.fieldTransforms;return new _S(new ar(l),u,f)}var Hv=class n extends Sd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var bS=class n extends Sd{_toFieldTransform(e){return new uI(e.path,new ml)}isEqual(e){return e instanceof n}};function nW(n,e,t,i){let r=n.Dc(1,e,t);ZS("Data must be an object, but it was:",r,i);let o=[],a=ar.empty();Xa(i,(u,f)=>{let g=YS(e,u,t);f=Ot(f);let b=r.gc(g);if(f instanceof Hv)o.push(g);else{let E=Dp(f,b);E!=null&&(o.push(g),a.set(g,E))}});let l=new Er(o);return new zv(a,l,r.fieldTransforms)}function iW(n,e,t,i,r,o){let a=n.Dc(1,e,t),l=[xS(e,i,t)],u=[r];if(o.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)l.push(xS(e,o[E])),u.push(o[E+1]);let f=[],g=ar.empty();for(let E=l.length-1;E>=0;--E)if(!s4(f,l[E])){let S=l[E],R=u[E];R=Ot(R);let K=a.gc(S);if(R instanceof Hv)f.push(S);else{let q=Dp(R,K);q!=null&&(f.push(S),g.set(S,q))}}let b=new Er(f);return new zv(g,b,a.fieldTransforms)}function rW(n,e,t,i=!1){return Dp(t,n.Dc(i?4:3,e))}function Dp(n,e){if(o4(n=Ot(n)))return ZS("Unsupported field value:",e,n),r4(n,e);if(n instanceof Sd)return(function(i,r){if(!i4(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){let o=[],a=0;for(let l of i){let u=Dp(l,r.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=Ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return jG(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Ln.fromDate(i);return{timestampValue:Iv(r.serializer,o)}}if(i instanceof Ln){let o=new Ln(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Iv(r.serializer,o)}}if(i instanceof $a)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ha)return{bytesValue:IL(r.serializer,i._byteString)};if(i instanceof jn){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:FS(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ga)return(function(a,l){return{mapValue:{fields:{[DS]:{stringValue:AS},[md]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return LS(l.serializer,f)})}}}}}})(i,r);throw r.wc(`Unsupported field value: ${Kv(i)}`)})(n,e)}function r4(n,e){let t={};return QN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xa(n,(i,r)=>{let o=Dp(r,e.Vc(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function o4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof $a||n instanceof Ha||n instanceof jn||n instanceof Sd||n instanceof Ga)}function ZS(n,e,t){if(!o4(t)||!LN(t)){let i=Kv(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function xS(n,e,t){if((e=Ot(e))instanceof Id)return e._internalPath;if(typeof e=="string")return YS(n,e);throw $v("Field path arguments must be of type string or ",n,!1,void 0,t)}var oW=new RegExp("[~\\*/\\[\\]]");function YS(n,e,t){if(e.search(oW)>=0)throw $v(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Id(...e.split("."))._internalPath}catch{throw $v(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $v(n,e,t,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new de(ee.INVALID_ARGUMENT,l+n+u)}function s4(n,e){return n.some(t=>t.isEqual(e))}var Gv=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new wS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(iy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},wS=class extends Gv{data(){return super.data()}};function iy(n,e){return typeof e=="string"?YS(n,e):e instanceof Id?e._internalPath:e._delegate._internalPath}function sW(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sp=class{},Mp=class extends Sp{};function a4(n,e,...t){let i=[];e instanceof Sp&&i.push(e),i=i.concat(t),(function(o){let a=o.filter(u=>u instanceof CS).length,l=o.filter(u=>u instanceof qv).length;if(a>1||a>0&&l>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(let r of i)n=r._apply(n);return n}var qv=class n extends Mp{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return d4(e._query,t),new Qa(e.firestore,e.converter,lI(e._query,t))}_parse(e){let t=KS(e.firestore);return(function(o,a,l,u,f,g,b){let E;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){AN(b,g);let R=[];for(let K of b)R.push(DN(u,o,K));E={arrayValue:{values:R}}}else E=DN(u,o,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||AN(b,g),E=rW(l,a,b,g==="in"||g==="not-in");return Rn.create(f,g,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function c4(n,e,t){let i=e,r=iy("where",n);return qv._create(r,i,t)}var CS=class n extends Sp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:no.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let a=r,l=o.getFlattenedFilters();for(let u of l)d4(a,u),a=lI(a,u)})(e._query,t),new Qa(e.firestore,e.converter,lI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ES=class n extends Mp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(r,o,a){if(r.startAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gl(o,a)})(e._query,this._field,this._direction);return new Qa(e.firestore,e.converter,(function(r,o){let a=r.explicitOrderBy.concat([o]);return new Ka(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}};function l4(n,e="asc"){let t=e,i=iy("orderBy",n);return ES._create(i,t)}var IS=class n extends Mp{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new Qa(e.firestore,e.converter,yv(e._query,this._limit,this._limitType))}};function u4(n){return uG("limit",n),IS._create("limit",n,"F")}function DN(n,e,t){if(typeof(t=Ot(t))=="string"){if(t==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dL(e)&&t.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(tn.fromString(t));if(!Te.isDocumentKey(i))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return JR(n,new Te(i))}if(t instanceof jn)return JR(n,t._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kv(t)}.`)}function AN(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d4(n,e){let t=(function(r,o){for(let a of r)for(let l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var SS=class{convertValue(e,t="none"){switch(Wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return en(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Xa(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,r;let o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[md].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>en(a.doubleValue));return new Ga(o)}convertGeoPoint(e){return new $a(en(e.latitude),en(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Yv(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(bp(e));default:return null}}convertTimestamp(e){let t=Bs(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=tn.fromString(e);Dt(DL(i),9688,{name:e});let r=new _v(i.get(1),i.get(3)),o=new Te(i.popFirst(5));return r.isEqual(t)||Vs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function aW(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var dl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hl=class n extends Gv{constructor(e,t,i,r,o,a){super(e,t,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(iy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};hl._jsonSchemaVersion="firestore/documentSnapshot/1.0",hl._jsonSchema={type:Nn("string",hl._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};var fd=class extends hl{data(e={}){return super.data(e)}},pd=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new dl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new fd(this._firestore,this._userDataWriter,i.key,i,new dl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{let u=new fd(r._firestore,r._userDataWriter,l.doc.key,l.doc,new dl(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{let u=new fd(r._firestore,r._userDataWriter,l.doc.key,l.doc,new dl(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,g=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),g=a.indexOf(l.doc.key)),{type:cW(l.type),doc:u,oldIndex:f,newIndex:g}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_p.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function cW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:n})}}function h4(n){n=zo(n,jn);let e=zo(n.firestore,Ja);return Jq(WS(e),n._key).then(t=>m4(e,n,t))}pd._jsonSchemaVersion="firestore/querySnapshot/1.0",pd._jsonSchema={type:Nn("string",pd._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};var Wv=class extends SS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ha(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}};function f4(n,e,t){n=zo(n,jn);let i=zo(n.firestore,Ja),r=aW(n.converter,e,t);return g4(i,[tW(KS(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,ja.none())])}function p4(n,e,t,...i){n=zo(n,jn);let r=zo(n.firestore,Ja),o=KS(r),a;return a=typeof(e=Ot(e))=="string"||e instanceof Id?iW(o,"updateDoc",n._key,e,t,i):nW(o,"updateDoc",n._key,e),g4(r,[a.toMutation(n._key,ja.exists(!0))])}function QS(n,...e){var t,i,r;n=Ot(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||ON(e[a])||(o=e[a++]);let l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ON(e[a])){let b=e[a];e[a]=(t=b.next)===null||t===void 0?void 0:t.bind(b),e[a+1]=(i=b.error)===null||i===void 0?void 0:i.bind(b),e[a+2]=(r=b.complete)===null||r===void 0?void 0:r.bind(b)}let u,f,g;if(n instanceof jn)f=zo(n.firestore,Ja),g=Qv(n._key.path),u={next:b=>{e[a]&&e[a](m4(f,n,b))},error:e[a+1],complete:e[a+2]};else{let b=zo(n,Qa);f=zo(b.firestore,Ja),g=b._query;let E=new Wv(f);u={next:S=>{e[a]&&e[a](new pd(f,E,b,S))},error:e[a+1],complete:e[a+2]},sW(n._query)}return(function(E,S,R,K){let q=new Bv(K),ne=new Lv(S,q,R);return E.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return jL(yield mS(E),ne)})),()=>{q.Ou(),E.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return zL(yield mS(E),ne)}))}})(WS(f),g,l,u)}function g4(n,e){return(function(i,r){let o=new jo;return i.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return jq(yield Qq(i),r,o)})),o.promise})(WS(n),e)}function m4(n,e,t){let i=t.docs.get(e._key),r=new Wv(n);return new hl(n,r,e._key,i,new dl(t.hasPendingWrites,t.fromCache),e.converter)}function Ir(){return new bS("serverTimestamp")}(function(e,t=!0){(function(r){Md=r})(Fo),sr(new oi("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),l=new Ja(new HE(i.getProvider("auth-internal")),new qE(a,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _v(f.options.projectId,g)})(a,r),a);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),jt(UR,jR,e),jt(UR,jR,"esm2017")})();var ry=function(){return ry=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ry.apply(this,arguments)};var dW={includeMetadataChanges:!1};function _4(n,e){return e===void 0&&(e=dW),new Ae(function(t){var i=QS(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function v4(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:ry(ry({},i),(t={},t[e.idField]=n.id,t))}function y4(n){return _4(n,{includeMetadataChanges:!0}).pipe(ue(function(e){return e.docs}))}function b4(n,e){return e===void 0&&(e={}),y4(n).pipe(ue(function(t){return t.map(function(i){return v4(i,e)})}))}var Hs=class{constructor(e){return e}},x4="firestore",JS=class{constructor(){return Na(x4)}};var XS=new ye("angularfire2.firestore-instances");function hW(n,e){let t=rl(x4,n,e);return t&&new Hs(t)}function fW(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Hs(i)}}var pW={provide:JS,deps:[[new Kn,XS]]},gW={provide:Hs,useFactory:hW,deps:[[new Kn,XS],Qr]};function w4(n,...e){return jt("angularfire",Vo.full,"fst"),Ji([gW,pW,{provide:XS,useFactory:fW(n),multi:!0,deps:[xt,Jt,Bo,Ts,[new Kn,cl],[new Kn,Fa],...e]}])}var Dd=Pt(b4,!0);var oy=Pt(e4,!0,2);var vi=Pt(t4,!0,2);var Ap=Pt(h4,!0);var C4=Pt(n4,!0);var E4=Pt(u4,!0,2);var sy=Pt(l4,!0,2),kp=Pt(a4,!0,2);var wl=Pt(f4,!0,2);var Cl=Pt(p4,!0,2);var eM=Pt(c4,!0,2);var Ad=class n{firestore=F(Hs);incidentsCollection=oy(this.firestore,"incidents");alertsCollection=oy(this.firestore,"alerts");riskZonesCollection=oy(this.firestore,"riskZones");getSafetyFeed(e){let i=Dd(kp(this.incidentsCollection,sy("createdAt","desc")),{idField:"id"}).pipe(ue(o=>o.map(a=>ve(J({},a),{type:"incident"})))).pipe(ue(o=>e==="user"?o.filter(a=>a.recipient!=="admin"):o)),r=Dd(kp(this.alertsCollection,sy("createdAt","desc")),{idField:"id"}).pipe(ue(o=>o.map(a=>ve(J({},a),{type:"alert"}))));return Ii([i,r]).pipe(ue(([o,a])=>[...o,...a].sort((u,f)=>f.createdAt.toMillis()-u.createdAt.toMillis())))}reportIncident(e){return P(this,null,function*(){let t=vi(this.incidentsCollection).id,i=vi(this.incidentsCollection,t),r=J({id:t,type:"incident",status:"pending",createdAt:Ir(),location:e.location||{lat:0,lng:0},description:e.description||"N/A",priority:e.priority||"medium",recipient:e.recipient||"both"},e);return yield wl(i,r),t})}createUserProfile(e,t){return P(this,null,function*(){let i=vi(this.firestore,`users/${e}`),r=vi(this.firestore,"config/adminExists"),a=!(yield Ap(r)).exists(),l={uid:e,email:t.email||"",displayName:t.displayName||"",phoneNumber:t.phoneNumber||"",role:a?"admin":"citizen",createdAt:Ir(),lastActive:Ir()};return yield wl(i,l),a&&(yield wl(r,{ownerUid:e,createdAt:Ir()})),l})}issueAlert(e){return P(this,null,function*(){let t=vi(this.alertsCollection).id,i=vi(this.alertsCollection,t);return yield wl(i,ve(J({},e),{type:"alert",createdAt:Ir()})),t})}updateIncidentStatus(e,t){return P(this,null,function*(){let i=vi(this.incidentsCollection,e),r={status:t};t==="approved"&&(r.recipient="both"),yield Cl(i,r)})}updateIncident(e,t){return P(this,null,function*(){let i=vi(this.incidentsCollection,e);yield Cl(i,t)})}getRiskZones(){return Dd(this.riskZonesCollection,{idField:"id"})}getUserProfile(e){return P(this,null,function*(){let t=vi(this.firestore,`users/${e}`),i=yield Ap(t);if(i.exists()){let r=i.data();return J({uid:e,email:r.email||"",displayName:r.displayName||"",role:r.role||"user"},r)}return null})}updateUserProfile(e,t){return P(this,null,function*(){let i=vi(this.firestore,`users/${e}`);yield Cl(i,ve(J({},t),{updatedAt:Ir()}))})}getUserReportsCount(e){return P(this,null,function*(){let t=kp(this.incidentsCollection,eM("userId","==",e));return(yield Dd(t,{idField:"id"}).pipe(ue(r=>r.length)).toPromise())||0})}getUserRecentActivity(e,t=10){let i=kp(this.incidentsCollection,eM("userId","==",e),sy("createdAt","desc"),E4(t));return Dd(i,{idField:"id"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var ln=class n{auth=F(Ns);router=F(Et);data=F(Ad);currentUser$=OR(this.auth);isAdmin$=this.currentUser$.pipe(ni(e=>e?Rt(e.getIdTokenResult()).pipe(ue(t=>!!t.claims?.admin)):Se(!1)));login(e,t){return P(this,null,function*(){try{let i=yield NR(this.auth,e,t);console.log("Login successful for:",i.user.email);try{let r=this.auth.currentUser;if(r){let a=!!(yield r.getIdTokenResult()).claims?.admin;console.log("User admin status:",a),this.router.navigate([a?"/admin-dashboard":"/dashboard"])}else this.router.navigate(["/dashboard"])}catch(r){console.error("Token check error:",r),this.router.navigate(["/dashboard"])}}catch(i){console.error("Login failed:",i.code,i.message);let r="Login failed: ";switch(i.code){case"auth/user-not-found":r+="No account found with this email. Please sign up first.";break;case"auth/wrong-password":r+="Incorrect password. Please try again.";break;case"auth/invalid-email":r+="Invalid email address format.";break;case"auth/user-disabled":r+="This account has been disabled.";break;case"auth/invalid-credential":r+="Invalid credentials. Please check your email and password.";break;default:r+=i.message||"An error occurred. Please try again."}throw new Error(r)}})}logout(){return P(this,null,function*(){yield LR(this.auth),this.router.navigate(["/"])})}loginWithGoogle(){return P(this,null,function*(){try{let e=new gE;e.addScope("email"),e.addScope("profile");let i=(yield OE(this.auth,e)).user;console.log("Google login successful:",i.email);try{i&&(yield this.data.createUserProfile(i.uid,{email:i.email||"",displayName:i.displayName||"Google User",phoneNumber:i.phoneNumber||""}))}catch(r){console.warn("Failed to create/update user profile:",r)}try{let o=!!(yield i.getIdTokenResult()).claims?.admin;this.router.navigate([o?"/admin-dashboard":"/dashboard"])}catch(r){console.error("Token check error:",r),this.router.navigate(["/dashboard"])}}catch(e){console.error("Google login failed:",e);let t="Google login failed: ";switch(e.code){case"auth/account-exists-with-different-credential":t+="An account already exists with the same email. Try signing in with a different method.";break;case"auth/popup-blocked":t+="Popup was blocked. Please allow popups for this site.";break;case"auth/popup-closed-by-user":t+="Login popup was closed. Please try again.";break;case"auth/cancelled-popup-request":t+="Login was cancelled. Please try again.";break;case"auth/network-request-failed":t+="Network error. Please check your connection.";break;default:t+=e.message||"An error occurred. Please try again."}throw new Error(t)}})}loginWithFacebook(){return P(this,null,function*(){try{let e=new pE;e.addScope("email"),e.addScope("public_profile");let i=(yield OE(this.auth,e)).user;console.log("Facebook login successful:",i.email);try{i&&(yield this.data.createUserProfile(i.uid,{email:i.email||"",displayName:i.displayName||"Facebook User",phoneNumber:i.phoneNumber||""}))}catch(r){console.warn("Failed to create/update user profile:",r)}try{let o=!!(yield i.getIdTokenResult()).claims?.admin;this.router.navigate([o?"/admin-dashboard":"/dashboard"])}catch(r){console.error("Token check error:",r),this.router.navigate(["/dashboard"])}}catch(e){console.error("Facebook login failed:",e);let t="Facebook login failed: ";switch(e.code){case"auth/account-exists-with-different-credential":t+="An account already exists with the same email. Try signing in with a different method.";break;case"auth/popup-blocked":t+="Popup was blocked. Please allow popups for this site.";break;case"auth/popup-closed-by-user":t+="Login popup was closed. Please try again.";break;case"auth/cancelled-popup-request":t+="Login was cancelled. Please try again.";break;case"auth/network-request-failed":t+="Network error. Please check your connection.";break;default:t+=e.message||"An error occurred. Please try again."}throw new Error(t)}})}sendVerificationEmail(){return P(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("No authenticated user to send verification to");try{yield RR(e)}catch(t){throw console.error("Failed to send verification email:",t),t}})}register(e,t,i){return P(this,null,function*(){try{let r=yield DR(this.auth,e,t);i&&(yield up(r.user,{displayName:i}));try{r.user&&(yield this.data.createUserProfile(r.user.uid,{email:r.user.email??"",displayName:r.user.displayName??"",phoneNumber:r.user.phoneNumber??""}))}catch(o){console.warn("Failed to create user profile automatically:",o)}this.router.navigate(["/"])}catch(r){throw console.error("Registration failed:",r),new Error(r?.message||"Registration failed")}})}isLoggedIn(){return new Ae(e=>{this.currentUser$.subscribe(t=>{e.next(!!t)})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ko=class n{STORAGE_KEY="mountain_sentinel_notifications";notificationsSubject=new _t(this.loadNotificationsFromStorage());constructor(){}loadNotificationsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading notifications from storage:",e),[]}}saveNotificationsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving notifications to storage:",t)}}addSosNotification(){let e={id:this.generateId(),message:"Emergency SOS sent! Police have been notified and are on their way. Stay calm and safe.",type:"sos",createdAt:new Date().toISOString(),read:!1},t=this.notificationsSubject.value,i=[e,...t];this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}addEmergencySOSAlert(e,t,i){let r=i?` Location: ${i.lat.toFixed(6)}, ${i.lng.toFixed(6)}`:"",o={id:this.generateId(),message:`EMERGENCY SOS from ${e} (${t}).${r} Immediate assistance required!`,type:"sos",createdAt:new Date().toISOString(),read:!1,sosDetails:{userName:e,userEmail:t,location:i,timestamp:new Date().toISOString(),status:"pending"}},a=this.notificationsSubject.value,l=[o,...a];this.notificationsSubject.next(l),this.saveNotificationsToStorage(l)}markSOSAsResponded(e){let i=this.notificationsSubject.value.map(r=>r.id===e&&r.sosDetails?ve(J({},r),{read:!0,sosDetails:ve(J({},r.sosDetails),{status:"responded"})}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}markSOSAsResolved(e){let i=this.notificationsSubject.value.map(r=>r.id===e&&r.sosDetails?ve(J({},r),{sosDetails:ve(J({},r.sosDetails),{status:"resolved"})}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}notifySOSResponse(e,t,i){let r=i==="responded"?"Your emergency SOS has been received! Help is on the way. An admin/police officer is responding to your location. Stay calm and safe.":"Your emergency SOS has been resolved. The situation has been addressed by authorities. Thank you for using Mountain Sentinel.",o={id:this.generateId(),message:r,type:"action",createdAt:new Date().toISOString(),read:!1},a=this.notificationsSubject.value,l=[o,...a];this.notificationsSubject.next(l),this.saveNotificationsToStorage(l)}notifyReportAction(e,t,i,r,o){let a=r==="approved"?"Your safety report has been reviewed and approved by the admin. Authorities have been notified and appropriate action is being taken.":"Your safety report has been reviewed. The admin has determined that no further action is required at this time.",l={id:this.generateId(),message:`Report Update: "${o.substring(0,50)}${o.length>50?"...":""}" - ${a}`,type:"action",createdAt:new Date().toISOString(),read:!1,reportDetails:{reportId:i,action:r}},u=this.notificationsSubject.value,f=[l,...u];this.notificationsSubject.next(f),this.saveNotificationsToStorage(f)}addNotification(e,t="info"){let i={id:this.generateId(),message:e,type:t,createdAt:new Date().toISOString(),read:!1},r=this.notificationsSubject.value,o=[i,...r];this.notificationsSubject.next(o),this.saveNotificationsToStorage(o)}getNotifications(){return this.notificationsSubject.asObservable()}getUnreadCount(){return new Ae(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>!r.read).length;e.next(i)})})}getSOSCount(){return new Ae(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>r.type==="sos"&&!r.read).length;e.next(i)})})}getAdminNotifications(){return new Ae(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>r.type==="sos"||r.reportDetails&&r.type==="action");e.next(i)})})}getCitizenNotifications(){return new Ae(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>r.type==="alert"||r.type==="info"||r.reportDetails&&r.type==="action");e.next(i)})})}markAsRead(e){let i=this.notificationsSubject.value.map(r=>r.id===e?ve(J({},r),{read:!0}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}deleteNotification(e){let i=this.notificationsSubject.value.filter(r=>r.id!==e);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}clearAll(){this.notificationsSubject.next([]),this.saveNotificationsToStorage([])}generateId(){return`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var pn=class n{STORAGE_KEY="mountain_sentinel_reports";reportsSubject=new _t(this.loadReportsFromStorage());notificationService=F(Ko);constructor(){}loadReportsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading reports from storage:",e),[]}}saveReportsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving reports to storage:",t)}}submitReport(e){let t=new Date().toISOString(),i=ve(J({},e),{id:this.generateId(),status:"pending",createdAt:t,updatedAt:t}),o=[...this.reportsSubject.value,i];return this.reportsSubject.next(o),this.saveReportsToStorage(o),this.reportsSubject.asObservable().pipe(ue(a=>a.find(l=>l.id===i.id)))}getAllReports(){return this.reportsSubject.asObservable()}getPendingReports(){return this.reportsSubject.asObservable().pipe(ue(e=>e.filter(t=>t.status==="pending")))}getApprovedReports(){return this.reportsSubject.asObservable().pipe(ue(e=>e.filter(t=>t.status==="approved")))}approveReport(e){let t=this.reportsSubject.value,i=t.find(o=>o.id===e),r=t.map(o=>o.id===e?ve(J({},o),{status:"approved",updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r),i&&i.reporterId!=="ADMIN"&&this.notificationService.notifyReportAction(i.reporterEmail||"unknown",i.reporterName||"Reporter",e,"approved",i.description)}rejectReport(e){let t=this.reportsSubject.value,i=t.find(o=>o.id===e),r=t.map(o=>o.id===e?ve(J({},o),{status:"rejected",updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r),i&&i.reporterId!=="ADMIN"&&this.notificationService.notifyReportAction(i.reporterEmail||"unknown",i.reporterName||"Reporter",e,"rejected",i.description)}updateReport(e,t){let r=this.reportsSubject.value.map(o=>o.id===e?ve(J(J({},o),t),{updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r)}deleteReport(e){let i=this.reportsSubject.value.filter(r=>r.id!==e);this.reportsSubject.next(i),this.saveReportsToStorage(i)}sendEmergencySOS(e,t,i){this.notificationService.addEmergencySOSAlert(t,e,i),this.notificationService.addSosNotification()}generateId(){return`report_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var Sr=class n{observer=null;isBrowser;constructor(e){this.isBrowser=ND(e)}initScrollRevealObserver(){if(!this.isBrowser)return;let e={threshold:.1,rootMargin:"0px 0px -50px 0px"};this.observer=new IntersectionObserver(i=>{i.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),this.observer?.unobserve(r.target))})},e),document.querySelectorAll(".scroll-reveal").forEach(i=>this.observer?.observe(i))}destroyScrollObserver(){this.observer&&(this.observer.disconnect(),this.observer=null)}initParallaxEffect(){if(!this.isBrowser)return;let e=document.querySelectorAll("[data-parallax]");e.length!==0&&window.addEventListener("scroll",()=>{let t=window.scrollY;e.forEach(i=>{let r=parseFloat(i.dataset.parallax||"0.5"),o=t*r;i.style.transform=`translateY(${o}px)`})},{passive:!0})}addAnimationClass(e,t,i=0){return new Promise(r=>{setTimeout(()=>{e.classList.add(t),r()},i)})}triggerPulse(e){e&&(e.style.animation="none",setTimeout(()=>{e.style.animation="pulse 0.6s cubic-bezier(0.4, 0, 0.2, 1)"},10))}triggerBounce(e,t=.1){if(!e)return;let i=e.style.transform;e.style.transform=`scale(${1-t})`,setTimeout(()=>{e.style.transition="transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)",e.style.transform=i||"scale(1)"},50)}addShimmerEffect(e){if(!e)return;let t=document.createElement("div");t.className="shimmer-effect",t.style.cssText=`
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmerSlide 0.8s infinite;
    `,e.style.position==="static"&&(e.style.position="relative"),e.appendChild(t)}smoothScrollToElement(e,t=60){if(!this.isBrowser)return;let i=typeof e=="string"?document.querySelector(e):e;if(!i)return;let r=i.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:r,behavior:"smooth"})}staggerAnimation(e,t,i=100){Array.from(e).forEach((r,o)=>{setTimeout(()=>{r.classList.add(t)},o*i)})}createFloatingEffect(e,t=10){if(!e)return;e.style.animation="float 3s ease-in-out infinite";let i=document.createElement("style");i.textContent=`
      @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-${t}px); }
      }
    `,document.head.appendChild(i)}onElementVisible(e,t,i=!0){if(!this.isBrowser)return;let r={threshold:.1},o=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&(t(),i&&o.unobserve(l.target))})},r);o.observe(e)}addRippleEffect(e){e&&e.addEventListener("click",t=>{let i=document.createElement("span"),r=e.getBoundingClientRect(),o=t.clientX-r.left,a=t.clientY-r.top,l=Math.max(r.width,r.height);i.style.cssText=`
        position: absolute;
        left: ${o-l/2}px;
        top: ${a-l/2}px;
        width: ${l}px;
        height: ${l}px;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        pointer-events: none;
        animation: rippleOut 0.6s ease-out;
      `,e.style.position="relative",e.style.overflow="hidden",e.appendChild(i),setTimeout(()=>i.remove(),600)})}triggerShake(e){e&&(e.style.animation="shake 0.5s cubic-bezier(0.4, 0, 0.2, 1)",setTimeout(()=>{e.style.animation=""},500))}addSkeletonEffect(e){e&&(e.style.cssText=`
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: skeleton 1.5s infinite;
    `)}static \u0275fac=function(t){return new(t||n)(Be(_s))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})},mW=`
  @keyframes shimmerSlide {
    0% { left: -100%; }
    100% { left: 100%; }
  }

  @keyframes rippleOut {
    0% {
      opacity: 1;
      transform: scale(0);
    }
    100% {
      opacity: 0;
      transform: scale(1);
    }
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
  }

  @keyframes skeleton {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }
`;if(typeof document<"u"){let n=document.createElement("style");n.textContent=mW,document.head.appendChild(n)}var Jn=class n{toasts=Bt([]);generateId(){return`toast_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}show(e,t="info",i=4e3){let r={id:this.generateId(),message:e,type:t,duration:i};this.toasts.update(o=>[...o,r]),i>0&&setTimeout(()=>{this.dismiss(r.id)},i)}success(e,t=4e3){this.show(e,"success",t)}error(e,t=5e3){this.show(e,"error",t)}warning(e,t=4e3){this.show(e,"warning",t)}info(e,t=4e3){this.show(e,"info",t)}dismiss(e){this.toasts.update(t=>t.filter(i=>i.id!==e))}dismissAll(){this.toasts.set([])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};function _W(n,e){n&1&&(_(0,"span",43),w(1,"Location obtained"),v())}function vW(n,e){n&1&&(_(0,"span",44),w(1,"Obtaining your location..."),v())}function yW(n,e){if(n&1&&(_(0,"div",34),oe(1,"div",35)(2,"div",36)(3,"div",37),_(4,"div",38),ie(),_(5,"svg",39),oe(6,"polygon",15)(7,"line",16)(8,"line",17),v()()(),pe(),_(9,"h2",40),w(10,"SENDING EMERGENCY SOS"),v(),_(11,"p",41),w(12,"Please wait while we alert emergency services..."),v(),_(13,"div",42),Ee(14,_W,2,0,"span",43)(15,vW,2,0,"span",44),v(),_(16,"div",45),oe(17,"div",46),v(),_(18,"p",47),w(19),v()),n&2){let t=T(2);C(14),Ie(t.userLocation?14:15),C(3),Wc("width",t.sosProgress,"%"),C(2),be("",t.sosCountdown," seconds remaining")}}function bW(n,e){n&1&&(_(0,"span"),w(1,"Your location has been shared"),v())}function xW(n,e){n&1&&(_(0,"span"),w(1,"Location not available - please share your location manually"),v())}function wW(n,e){if(n&1){let t=ge();_(0,"div",33)(1,"div",48),ie(),_(2,"svg",49),oe(3,"polyline",50),v()(),pe(),_(4,"h2",51),w(5,"EMERGENCY RECEIVED"),v(),_(6,"p",52),w(7,"Admin has been notified immediately."),v(),_(8,"p",53),w(9,"Help is on the way. Stay calm and safe."),v(),_(10,"div",54)(11,"div",55),oe(12,"div",56),Ee(13,bW,2,0,"span")(14,xW,2,0,"span"),v(),_(15,"div",55),oe(16,"div",57),_(17,"span"),w(18,"Emergency services alerted"),v()(),_(19,"div",55),oe(20,"div",58),_(21,"span"),w(22,"Admin notified in real-time"),v()()(),_(23,"button",59),X("click",function(){j(t);let r=T(2);return z(r.closeSosOverlay())}),w(24,"Close"),v()()}if(n&2){let t=T(2);C(11),ke("success",t.userLocation)("warning",!t.userLocation),C(2),Ie(t.userLocation?13:14)}}function CW(n,e){if(n&1&&(_(0,"div",31)(1,"div",32),Ee(2,yW,20,4)(3,wW,25,5,"div",33),v()()),n&2){let t=T();ke("sos-success",t.sosSuccess),C(2),Ie(t.sosSuccess?3:2)}}function EW(n,e){if(n&1&&(_(0,"div",98),oe(1,"img",99),v()),n&2){let t=T().$implicit;C(),$("src",t.imageUrl,Kt)("alt",t.description)}}function IW(n,e){if(n&1){let t=ge();_(0,"article",63),X("click",function(){let r=j(t).$implicit,o=T(3);return z(o.viewReportDetail(r.id))})("keydown.enter",function(){let r=j(t).$implicit,o=T(3);return z(o.viewReportDetail(r.id))})("keydown.space",function(){let r=j(t).$implicit,o=T(3);return z(o.viewReportDetail(r.id))}),_(1,"div",64),w(2),v(),_(3,"div",65)(4,"div",66)(5,"div",67),ie(),_(6,"svg",68),oe(7,"path",69),v()(),pe(),_(8,"div",70)(9,"span",71),w(10),v(),_(11,"span",72),ie(),_(12,"svg",73),oe(13,"circle",74)(14,"polyline",75),v(),w(15," Just now "),pe(),_(16,"span",76),w(17,"\u2022"),v(),ie(),_(18,"svg",73),oe(19,"path",11)(20,"circle",12),v(),w(21),v()()()(),pe(),_(22,"div",77),te(23,EW,2,2,"div",78),_(24,"p",79),w(25),v()(),_(26,"div",80),ie(),_(27,"svg",81),oe(28,"path",11)(29,"circle",12),v(),pe(),_(30,"span"),w(31),v()(),_(32,"div",82)(33,"button",83),X("click",function(r){let o=j(t).$implicit;return T(3).viewReportDetail(o.id),z(r.stopPropagation())}),ie(),_(34,"svg",84),oe(35,"path",85)(36,"circle",86),v(),w(37," Details "),v(),pe(),_(38,"div",87)(39,"button",88),X("click",function(r){let o=j(t).$implicit,a=T(3);return z(a.shareReport(r,o))}),ie(),_(40,"svg",89),oe(41,"circle",90)(42,"circle",91)(43,"circle",92)(44,"line",93)(45,"line",94),v()(),pe(),_(46,"button",95),X("click",function(r){let o=j(t).$implicit,a=T(3);return z(a.toggleSaveReport(r,o.id))}),ie(),_(47,"svg",96),oe(48,"path",97),v()()()()()}if(n&2){let t=e.$implicit,i=e.index,r=T(3);Wc("animation-delay",i*.08+"s"),ke("priority-high",t.priority==="high")("priority-medium",t.priority==="medium")("priority-low",t.priority==="low"||!t.priority),St("aria-label","Safety report - "+(t.priority==="high"?"Urgent":t.priority==="medium"?"Alert":"Info")+" priority"),C(),ke("high",t.priority==="high")("medium",t.priority==="medium")("low",t.priority==="low"||!t.priority),C(),be(" ",t.priority==="high"?"URGENT":t.priority==="medium"?"ALERT":"INFO"," "),C(8),ae(t.reporterName||"Anonymous Citizen"),C(11),be(" ",t.barangay," "),C(2),$("ngIf",t.imageUrl),C(2),ae(t.description),C(6),bn("",t.street,", ",t.barangay),C(15),ke("saved",r.isReportSaved(t.id)),St("aria-label",r.isReportSaved(t.id)?"Remove from saved reports":"Save this report")("aria-pressed",r.isReportSaved(t.id)),C(),St("fill",r.isReportSaved(t.id)?"currentColor":"none")}}function SW(n,e){if(n&1&&(_(0,"div",61),te(1,IW,49,27,"article",62),v()),n&2){let t=T().ngIf;C(),$("ngForOf",t)}}function MW(n,e){n&1&&(_(0,"div",100)(1,"div",101),ie(),_(2,"svg",102),oe(3,"path",103)(4,"polyline",104),v()(),pe(),_(5,"h3"),w(6,"All Clear!"),v(),_(7,"p"),w(8,"No safety reports at this time."),oe(9,"br"),w(10,"The community is safe. Stay vigilant!"),v()())}function PW(n,e){if(n&1&&(_(0,"div"),te(1,SW,2,1,"div",60)(2,MW,11,0,"ng-template",null,0,Ct),v()),n&2){let t=e.ngIf,i=dt(3);C(),$("ngIf",t.length>0)("ngIfElse",i)}}var ay=class n{authService=F(ln);reportService=F(pn);notificationService=F(Ko);router=F(Et);animationService=F(Sr);toastService=F(Jn);sosSubscription;currentUser$=this.authService.currentUser$;isAdmin$=this.authService.isAdmin$;savedReports=new Set;SAVED_REPORTS_KEY="mountain_sentinel_saved_reports";citizenReports$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.status==="approved"&&!t.isAdminReport&&t.reporterId!=="ADMIN")));filter$=new _t("all");search$=new _t("");currentFilter="all";filteredReports$=Ii([this.citizenReports$,this.filter$.pipe(Vi("all")),this.search$.pipe(Oh(150),Vi(""))]).pipe(ue(([e,t,i])=>{let r=(i||"").trim().toLowerCase();return e.filter(o=>t&&t!=="all"&&(o.priority||"low")!==t?!1:r?((o.description||"")+" "+(o.reporterName||"")+" "+(o.street||"")+" "+(o.barangay||"")).toLowerCase().indexOf(r)!==-1:!0)}));adminAlerts$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.status==="approved"&&(t.isAdminReport||t.reporterId==="ADMIN"))));approvedReports$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.status==="approved")));sosActive=!1;sosSuccess=!1;sosProgress=0;sosCountdown=5;sosDuration=5;userLocation=null;locationError=null;ngOnInit(){this.loadSavedReports()}loadSavedReports(){try{let e=localStorage.getItem(this.SAVED_REPORTS_KEY);e&&(this.savedReports=new Set(JSON.parse(e)))}catch(e){console.warn("Failed to load saved reports:",e)}}persistSavedReports(){try{localStorage.setItem(this.SAVED_REPORTS_KEY,JSON.stringify([...this.savedReports]))}catch(e){console.warn("Failed to save reports:",e)}}isReportSaved(e){return this.savedReports.has(e)}toggleSaveReport(e,t){e.stopPropagation(),this.savedReports.has(t)?(this.savedReports.delete(t),this.toastService.info("Report removed from saved items")):(this.savedReports.add(t),this.toastService.success("Report saved successfully!")),this.persistSavedReports()}shareReport(e,t){return P(this,null,function*(){e.stopPropagation();let i={title:"Safety Alert - Mountain Sentinel",text:`${t.description}
\u{1F4CD} ${t.street}, ${t.barangay}`,url:`${window.location.origin}/report-detail/${t.id}`};try{navigator.share&&navigator.canShare?.(i)?(yield navigator.share(i),this.toastService.success("Shared successfully!")):(yield navigator.clipboard.writeText(i.url),this.toastService.success("Link copied to clipboard!"))}catch(r){if(r.name!=="AbortError")try{yield navigator.clipboard.writeText(i.url),this.toastService.success("Link copied to clipboard!")}catch{this.toastService.error("Unable to share. Please copy the link manually.")}}})}ngOnDestroy(){this.animationService.destroyScrollObserver(),this.sosSubscription&&this.sosSubscription.unsubscribe()}navigateToReport(){this.router.navigate(["/report"])}viewFullMap(){this.router.navigate(["/map"])}triggerSOS(){this.authService.currentUser$.pipe(qn(1)).subscribe(e=>{if(!e){this.toastService.warning("Please log in to send an emergency SOS alert."),this.router.navigate(["/login"]);return}this.router.navigate(["/emergency-call"])})}getLocationAsync(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{this.userLocation={lat:e.coords.latitude,lng:e.coords.longitude},console.log("Location obtained:",this.userLocation)},e=>{console.warn("Location error:",e.message),this.locationError=e.message,navigator.geolocation.getCurrentPosition(t=>{this.userLocation={lat:t.coords.latitude,lng:t.coords.longitude},console.log("Location obtained (low accuracy):",this.userLocation)},t=>{console.error("Location failed completely:",t.message)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4})},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}completeSOS(e){this.userLocation?this.sendSOSToAdmin(e,this.userLocation):navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{let i={lat:t.coords.latitude,lng:t.coords.longitude};this.sendSOSToAdmin(e,i)},()=>{console.warn("Could not obtain location for SOS"),this.sendSOSToAdmin(e)},{enableHighAccuracy:!1,timeout:3e3,maximumAge:6e4}):this.sendSOSToAdmin(e)}sendSOSToAdmin(e,t){this.reportService.sendEmergencySOS(e.email||"emergency-user@sos.alert",e.displayName||"Unknown User",t),this.sosSuccess=!0,navigator.vibrate&&navigator.vibrate([200,100,200])}closeSosOverlay(){this.sosActive=!1,this.sosSuccess=!1,this.sosProgress=0,this.sosCountdown=this.sosDuration,this.router.navigate(["/notification"],{queryParams:{sos:"sent"}})}viewReportDetail(e){this.router.navigate(["/report-detail",e])}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}setFilter(e){this.currentFilter=e,this.filter$.next(e)}onSearch(e){this.search$.next(e||"")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-dashboard"]],decls:46,vars:23,consts:[["noReports",""],["role","main","id","main-content",1,"dashboard-container"],["role","alertdialog","aria-modal","true","aria-labelledby","sos-title","aria-describedby","sos-desc",1,"sos-overlay",3,"sos-success"],[1,"dashboard-content"],["aria-label","Quick actions",1,"fab-stack"],["routerLink","/police-reports","aria-label","View Police Issuance Reports","role","button",1,"fab-btn","alerts-fab"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor","aria-hidden","true"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],[1,"fab-label"],["type","button","aria-label","View Incident Map",1,"fab-btn","map-fab",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["type","button","aria-label","Trigger Emergency SOS",1,"fab-btn","sos-fab",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["role","region","aria-labelledby","feed-title",1,"main-feed-layout"],["aria-label","Safety reports feed",1,"feed-column"],[1,"feed-header-bar","scroll-reveal","animate-on-load"],["id","feed-title",1,"feed-title"],["role","search",1,"feed-search"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","search","placeholder","Search...","aria-label","Search reports","id","feed-search-input",3,"input"],["aria-label","Filter reports by priority",1,"feed-nav-filters"],["type","button",1,"nav-filter-btn",3,"click"],["role","feed","aria-busy","false",1,"feed-cards-container"],[4,"ngIf"],["role","alertdialog","aria-modal","true","aria-labelledby","sos-title","aria-describedby","sos-desc",1,"sos-overlay"],[1,"sos-modal","scroll-reveal","animate-on-load"],[1,"sos-success-container"],[1,"sos-sending"],[1,"sos-pulse-ring"],[1,"sos-pulse-ring","delay-1"],[1,"sos-pulse-ring","delay-2"],[1,"sos-icon-large"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["id","sos-title",1,"sos-title"],["id","sos-desc",1,"sos-subtitle"],[1,"sos-location-status"],[1,"location-obtained"],[1,"location-pending"],[1,"sos-progress-bar"],[1,"sos-progress-fill"],[1,"sos-countdown"],[1,"sos-success-icon"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["points","20 6 9 17 4 12"],[1,"sos-title","success"],[1,"sos-subtitle"],[1,"sos-info"],[1,"sos-details"],[1,"sos-detail-item"],[1,"detail-icon","location"],[1,"detail-icon","services"],[1,"detail-icon","admin"],[1,"sos-close-btn",3,"click"],["class","feed-cards","role","list",4,"ngIf","ngIfElse"],["role","list",1,"feed-cards"],["class","feed-card scroll-reveal animate-on-load","tabindex","0","role","listitem",3,"priority-high","priority-medium","priority-low","animation-delay","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","listitem",1,"feed-card","scroll-reveal","animate-on-load",3,"click","keydown.enter","keydown.space"],[1,"priority-ribbon"],[1,"card-header"],[1,"user-info"],[1,"user-avatar"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"user-details"],[1,"user-name"],[1,"post-meta"],["xmlns","http://www.w3.org/2000/svg","width","12","height","12","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["points","12 6 12 12 16 14"],[1,"meta-dot"],[1,"card-content"],["class","card-image",4,"ngIf"],[1,"content-text"],[1,"location-badge"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"card-footer"],["type","button","aria-label","View report details",1,"footer-action","primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],[1,"footer-secondary"],["type","button","aria-label","Share this report",1,"footer-action","icon-only",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],["type","button",1,"footer-action","icon-only",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"],[1,"card-image"],["loading","lazy",3,"src","alt"],[1,"empty-feed"],[1,"empty-icon"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],["points","9 12 12 15 16 10"]],template:function(t,i){t&1&&(_(0,"div",1),Ee(1,CW,4,3,"div",2),_(2,"div",3)(3,"nav",4)(4,"a",5),ie(),_(5,"svg",6),oe(6,"path",7),v(),pe(),_(7,"span",8),w(8,"Police Reports"),v()(),_(9,"button",9),X("click",function(){return i.viewFullMap()}),ie(),_(10,"svg",10),oe(11,"path",11)(12,"circle",12),v(),pe(),_(13,"span",8),w(14,"Incident Map"),v()(),_(15,"button",13),xe(16,"async"),xe(17,"async"),X("click",function(){return i.triggerSOS()}),ie(),_(18,"svg",14),oe(19,"polygon",15)(20,"line",16)(21,"line",17),v(),pe(),_(22,"span",8),w(23,"Emergency SOS"),v()()(),_(24,"main",18)(25,"section",19)(26,"header",20)(27,"h2",21),w(28,"Community Safety Feed"),v(),_(29,"div",22),ie(),_(30,"svg",23),oe(31,"circle",24)(32,"line",25),v(),pe(),_(33,"input",26),X("input",function(o){return i.onSearch(o.target.value)}),v()(),_(34,"nav",27)(35,"button",28),X("click",function(){return i.setFilter("all")}),w(36," All "),v(),_(37,"button",28),X("click",function(){return i.setFilter("high")}),w(38," Urgent "),v(),_(39,"button",28),X("click",function(){return i.setFilter("medium")}),w(40," Alerts "),v(),_(41,"button",28),X("click",function(){return i.setFilter("low")}),w(42," Info "),v()()(),_(43,"div",29),te(44,PW,4,2,"div",30),xe(45,"async"),v()()()()()),t&2&&(C(),Ie(i.sosActive?1:-1),C(14),ke("disabled",!De(16,17,i.currentUser$)),St("aria-disabled",!De(17,19,i.currentUser$)),C(20),ke("active",i.currentFilter==="all"),St("aria-pressed",i.currentFilter==="all"),C(2),ke("active",i.currentFilter==="high"),St("aria-pressed",i.currentFilter==="high"),C(2),ke("active",i.currentFilter==="medium"),St("aria-pressed",i.currentFilter==="medium"),C(2),ke("active",i.currentFilter==="low"),St("aria-pressed",i.currentFilter==="low"),C(3),$("ngIf",De(45,21,i.filteredReports$)))},dependencies:[ht,Dn,Ut,Kr,Hi,cn],styles:['.dashboard-container[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#f5f7fa,#e9ecef);min-height:calc(100vh - 60px);padding:0;font-family:inherit}.dashboard-tabs[_ngcontent-%COMP%]{display:flex;gap:0;margin:0;padding:0 30px;border-bottom:1px solid rgba(0,0,0,.08);background:#fff;overflow-x:auto;box-shadow:0 4px 12px #00000014;-webkit-overflow-scrolling:touch}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{flex:0 0 auto;padding:16px 28px;border:none;background:transparent;color:#666;font-size:13px;font-weight:600;cursor:pointer;border-bottom:3px solid transparent;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;white-space:nowrap;text-transform:uppercase;letter-spacing:.5px;overflow:hidden}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;left:-100%;width:100%;height:3px;background:#1a2a5e;transition:left .4s cubic-bezier(.4,0,.2,1)}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{color:#333;background:#00000005}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:before{left:0}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{color:#1a2a5e;border-bottom-color:#1a2a5e;font-weight:700}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]:before{left:0}.dashboard-content[_ngcontent-%COMP%]{display:block;padding:24px;width:100%;max-width:100%;margin:0 auto;min-height:calc(100vh - 120px);box-sizing:border-box}.fab-stack[_ngcontent-%COMP%]{position:fixed;left:16px;bottom:24px;display:flex;flex-direction:column;gap:14px;z-index:1000;animation:_ngcontent-%COMP%_fabStackSlideIn .6s cubic-bezier(.34,1.56,.64,1) forwards}@keyframes _ngcontent-%COMP%_fabStackSlideIn{0%{opacity:0;transform:translate(-60px)}to{opacity:1;transform:translate(0)}}.fab-btn[_ngcontent-%COMP%]{width:auto;height:52px;border-radius:26px;display:flex;align-items:center;justify-content:flex-start;gap:10px;padding:0 18px 0 14px;cursor:pointer;transition:all .3s cubic-bezier(.175,.885,.32,1.275);border:none;text-decoration:none;position:relative;box-shadow:0 4px 20px #0000001f}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:26px;height:26px;flex-shrink:0}.fab-label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;white-space:nowrap;letter-spacing:.3px}.fab-btn.alerts-fab[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border:2px solid rgba(212,168,75,.5);box-shadow:0 6px 20px #1a2a5e80}.fab-btn.alerts-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;fill:#d4a84b}.fab-btn.alerts-fab[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{color:#fff}.fab-btn.alerts-fab[_ngcontent-%COMP%]:hover{transform:scale(1.05) translate(4px);box-shadow:0 8px 28px #1a2a5e99;border-color:#d4a84b}.fab-btn.map-fab[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#c9a227);border:2px solid rgba(255,255,255,.4);box-shadow:0 6px 20px #d4a84b80}.fab-btn.map-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;stroke:#1a2a5e}.fab-btn.map-fab[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{color:#1a2a5e}.fab-btn.map-fab[_ngcontent-%COMP%]:hover{transform:scale(1.05) translate(4px);box-shadow:0 8px 28px #d4a84b99}.fab-btn.sos-fab[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#8b0000);border:2px solid rgba(255,255,255,.4);box-shadow:0 6px 20px #c41e3a99;animation:_ngcontent-%COMP%_sosHeartbeat 1.5s ease-in-out infinite}.fab-btn.sos-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;stroke:#fff}.fab-btn.sos-fab[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{color:#fff}.fab-btn.sos-fab[_ngcontent-%COMP%]:hover{transform:scale(1.08) translate(4px);box-shadow:0 10px 32px #c41e3ab3;animation:none}.fab-btn.sos-fab.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;animation:none}@keyframes _ngcontent-%COMP%_sosHeartbeat{0%,to{transform:scale(1)}15%{transform:scale(1.08)}30%{transform:scale(1)}45%{transform:scale(1.05)}60%{transform:scale(1)}}.main-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 1fr;gap:24px;max-width:1600px;margin:0 auto}.citizen-reports-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 20px #00000014}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid rgba(26,42,94,.1)}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#1a2a5e;font-weight:700;display:flex;align-items:center;gap:10px}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";width:4px;height:22px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:2px}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:6px 0 0;font-size:13px;color:#888}.police-alerts-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:16px;padding:20px;box-shadow:0 4px 20px #1a2a5e4d;height:fit-content;position:sticky;top:24px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.1)}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#d4a84b;font-weight:700;display:flex;align-items:center;gap:8px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:4px 0 0;font-size:11px;color:#fff9}.main-feed-layout[_ngcontent-%COMP%]{display:block;width:100%;max-width:100%;margin:0 auto;padding:0 60px 0 80px}.feed-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%;max-width:100%}.feed-header-bar[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:18px 28px;box-shadow:0 2px 16px #00000014;display:flex;align-items:center;gap:24px;flex-wrap:wrap}.feed-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:800;color:#1a2a5e;white-space:nowrap;letter-spacing:-.5px}.feed-nav-filters[_ngcontent-%COMP%]{display:flex;gap:12px;flex:0 0 auto;align-items:center;margin-left:auto}.nav-filter-btn[_ngcontent-%COMP%]{width:90px!important;height:44px!important;min-width:90px!important;max-width:90px!important;min-height:44px!important;max-height:44px!important;padding:0!important;margin:0!important;border:none;background:#f0f2f5;border-radius:22px;font-size:14px;font-weight:600;color:#555;cursor:pointer;transition:all .2s ease;white-space:nowrap;text-align:center;box-shadow:0 2px 6px #0000000f;display:inline-flex;align-items:center;justify-content:center;line-height:1;box-sizing:border-box}.nav-filter-btn[_ngcontent-%COMP%]:hover{background:#e4e6e9;color:#1a2a5e;transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.nav-filter-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;box-shadow:0 4px 12px #1a2a5e4d}.feed-search[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#f5f7fa;border-radius:20px;padding:8px 14px;min-width:160px;max-width:220px}.feed-search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#999;flex-shrink:0}.feed-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:transparent;font-size:13px;width:100%;color:#333;outline:none}.feed-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa}.feed-section-header[_ngcontent-%COMP%], .feed-controls[_ngcontent-%COMP%]{display:none}.filter-tab.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-color:#1a2a5e;color:#fff}.filter-tab.urgent[_ngcontent-%COMP%]:hover, .filter-tab.urgent.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#8b0000);border-color:#c41e3a;color:#fff}.filter-tab.alert[_ngcontent-%COMP%]:hover, .filter-tab.alert.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#b8860b);border-color:#d4a84b;color:#fff}.filter-tab.info[_ngcontent-%COMP%]:hover, .filter-tab.info.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#1e7e34);border-color:#28a745;color:#fff}.search-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 16px;background:#f8f9fa;border-radius:25px;border:2px solid transparent;transition:all .25s ease;min-width:240px}.search-wrapper[_ngcontent-%COMP%]:focus-within{border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.search-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#888;flex-shrink:0}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{border:none;background:transparent;outline:none;font-size:14px;width:100%;color:#333}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.feed-cards-container[_ngcontent-%COMP%]{min-height:400px;width:100%;display:flex;flex-direction:column}.feed-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:28px;width:100%}.feed-card[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:0;box-shadow:0 4px 24px #00000014;cursor:pointer;transition:all .35s cubic-bezier(.175,.885,.32,1.275);position:relative;overflow:hidden;animation:_ngcontent-%COMP%_cardSlideIn .5s ease forwards;opacity:0;display:flex;flex-direction:column;height:100%;min-height:340px;border:1px solid rgba(0,0,0,.05)}@keyframes _ngcontent-%COMP%_cardSlideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.feed-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 50px #1a2a5e26;border-color:#d4a84b4d}.priority-ribbon[_ngcontent-%COMP%]{position:absolute;top:16px;right:-32px;padding:6px 40px;font-size:10px;font-weight:800;letter-spacing:1px;transform:rotate(45deg);z-index:2}.priority-ribbon.high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#dc3545);color:#fff;box-shadow:0 2px 8px #c41e3a66}.priority-ribbon.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#f0ad4e);color:#1a2a5e;box-shadow:0 2px 8px #d4a84b66}.priority-ribbon.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#5cb85c);color:#fff;box-shadow:0 2px 8px #28a7454d}.card-header[_ngcontent-%COMP%]{padding:28px 32px 4px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.user-avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#e9ecef,#dee2e6);display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative}.user-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px;color:#555}.user-avatar.verified[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;bottom:-2px;right:-2px;width:18px;height:18px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:50%;font-size:10px;color:#fff;display:flex;align-items:center;justify-content:center;border:2px solid white}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.user-name[_ngcontent-%COMP%]{font-weight:700;font-size:17px;color:#1a2a5e}.post-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px;color:#999}.post-meta[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.6}.meta-dot[_ngcontent-%COMP%]{opacity:.4}.card-content[_ngcontent-%COMP%]{padding:20px 32px;flex:1}.card-image[_ngcontent-%COMP%]{width:100%;max-height:240px;overflow:hidden;border-radius:16px;margin-bottom:16px;background:#f0f2f5}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.feed-card[_ngcontent-%COMP%]:hover   .card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.content-text[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:1.8;color:#333;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.location-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;margin:0 32px 20px;padding:14px 20px;background:linear-gradient(135deg,#1a2a5e14,#1a2a5e0a);border-radius:12px;border-left:4px solid #1a2a5e}.location-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;flex-shrink:0}.location-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 32px;background:linear-gradient(180deg,#f8f9fa,#f1f3f5);border-top:1px solid rgba(0,0,0,.06);margin-top:auto}.footer-action[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 18px;border:none;border-radius:12px;font-size:13px;font-weight:600;cursor:pointer;transition:all .25s ease}.footer-action.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;font-size:13px;padding:10px 18px}.footer-action.primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1a2a5e59}.footer-secondary[_ngcontent-%COMP%]{display:flex;gap:10px}.footer-action.icon-only[_ngcontent-%COMP%]{padding:10px;background:#fff;color:#999;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #00000014}.footer-action.icon-only[_ngcontent-%COMP%]:hover{background:#1a2a5e14;color:#1a2a5e;transform:scale(1.1)}.footer-action.icon-only.saved[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#c9a227);color:#fff}.footer-action.icon-only.shared[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff}.empty-feed[_ngcontent-%COMP%]{text-align:center;padding:80px 40px;background:#fff;border-radius:16px;box-shadow:0 4px 24px #0000000f;width:100%;max-width:100%;min-height:400px;display:flex;flex-direction:column;align-items:center;justify-content:center}.empty-icon[_ngcontent-%COMP%]{width:100px;height:100px;margin:0 auto 20px;background:linear-gradient(135deg,#28a7451a,#28a7450d);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#28a745}.empty-feed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.75rem;color:#1a2a5e;font-weight:700}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;line-height:1.6;font-size:1rem}@media (max-width: 768px){.empty-feed[_ngcontent-%COMP%]{padding:60px 24px;min-height:300px}.empty-icon[_ngcontent-%COMP%]{width:80px;height:80px}.empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px}.empty-feed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}}@media (max-width: 480px){.empty-feed[_ngcontent-%COMP%]{padding:40px 16px;min-height:250px}.empty-icon[_ngcontent-%COMP%]{width:64px;height:64px}.empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px}.empty-feed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem}}.alerts-sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;position:sticky;top:90px;height:fit-content}.sidebar-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:16px;overflow:hidden;box-shadow:0 8px 32px #1a2a5e4d}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 20px;border-bottom:1px solid rgba(255,255,255,.1);background:#00000026}.sidebar-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#d4a84b;font-weight:700;font-size:14px}.sidebar-title[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b}.sidebar-badge[_ngcontent-%COMP%]{padding:4px 10px;background:#d4a84b33;border:1px solid rgba(212,168,75,.4);border-radius:6px;font-size:10px;font-weight:700;color:#d4a84b;letter-spacing:1px}.sidebar-content[_ngcontent-%COMP%]{padding:16px;max-height:400px;overflow-y:auto}.official-alerts-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.official-alert-item[_ngcontent-%COMP%]{background:#ffffff0f;border-radius:12px;padding:16px;cursor:pointer;transition:all .25s ease;border:1px solid rgba(255,255,255,.05)}.official-alert-item[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translate(4px)}.alert-badge-row[_ngcontent-%COMP%]{margin-bottom:10px}.official-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;background:linear-gradient(135deg,#d4a84b40,#d4a84b26);border-radius:6px;font-size:10px;font-weight:700;color:#d4a84b;letter-spacing:.5px}.official-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b}.alert-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px;font-weight:600;color:#fff;line-height:1.5}.alert-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px;color:#fff9;margin-bottom:12px}.alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.7}.alert-priority-tag[_ngcontent-%COMP%]{display:inline-block;padding:5px 12px;border-radius:6px;font-size:10px;font-weight:700;letter-spacing:.5px}.alert-priority-tag.high[_ngcontent-%COMP%]{background:#c41e3a33;color:#ff6b6b}.alert-priority-tag.medium[_ngcontent-%COMP%]{background:#d4a84b33;color:#d4a84b}.alert-priority-tag.low[_ngcontent-%COMP%]{background:#28a74533;color:#5cb85c}.sidebar-empty[_ngcontent-%COMP%]{text-align:center;padding:30px 20px;color:#fff9}.sidebar-empty[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:12px;opacity:.5}.sidebar-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px}.stats-card[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{padding:0}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}.stat-item[_ngcontent-%COMP%]{padding:20px;text-align:center;border-right:1px solid rgba(255,255,255,.08);border-bottom:1px solid rgba(255,255,255,.08)}.stat-item[_ngcontent-%COMP%]:last-child{border-right:none}.stat-value[_ngcontent-%COMP%]{display:block;font-size:28px;font-weight:800;color:#d4a84b;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:11px;color:#fff9;text-transform:uppercase;letter-spacing:.5px}@media (max-width: 1200px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 40px 0 70px}}@media (max-width: 992px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 20px 0 70px}.alerts-sidebar[_ngcontent-%COMP%]{position:relative;top:0;flex-direction:row;flex-wrap:wrap}.sidebar-card[_ngcontent-%COMP%]{flex:1;min-width:280px}}@media (max-width: 768px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 16px 0 70px}.feed-header-bar[_ngcontent-%COMP%]{flex-wrap:wrap;gap:12px;padding:12px 16px}.feed-title[_ngcontent-%COMP%]{font-size:1.1rem;width:100%}.feed-nav-filters[_ngcontent-%COMP%]{flex:none;width:auto}.feed-search[_ngcontent-%COMP%]{flex:1;min-width:120px}.feed-section-header[_ngcontent-%COMP%]{padding:18px 20px}.section-title[_ngcontent-%COMP%]{font-size:1.25rem}.feed-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-tabs[_ngcontent-%COMP%]{justify-content:center}.search-wrapper[_ngcontent-%COMP%]{min-width:100%}.feed-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.feed-card[_ngcontent-%COMP%]{border-radius:20px;min-height:300px}.card-header[_ngcontent-%COMP%]{padding:20px 24px 0}.card-content[_ngcontent-%COMP%]{padding:16px 24px}.location-badge[_ngcontent-%COMP%]{margin:0 24px 16px}.card-footer[_ngcontent-%COMP%]{padding:16px 24px;flex-wrap:wrap;gap:12px}.priority-ribbon[_ngcontent-%COMP%]{top:12px;right:-36px;padding:4px 40px;font-size:9px}.user-avatar[_ngcontent-%COMP%]{width:42px;height:42px}.user-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}}@media (max-width: 480px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 12px 0 60px}.dashboard-content[_ngcontent-%COMP%]{padding:16px 8px}.feed-header-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px;padding:12px 14px}.feed-title[_ngcontent-%COMP%]{font-size:1.1rem}.feed-nav-filters[_ngcontent-%COMP%]{width:100%;overflow-x:auto;padding-bottom:4px;-webkit-overflow-scrolling:touch}.nav-filter-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.feed-search[_ngcontent-%COMP%]{width:100%;max-width:100%}.feed-section-header[_ngcontent-%COMP%]{padding:16px}.section-title-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.filter-tabs[_ngcontent-%COMP%]{width:100%;overflow-x:auto;padding-bottom:8px;-webkit-overflow-scrolling:touch}.filter-tab[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px;white-space:nowrap}.card-header[_ngcontent-%COMP%]{padding:16px 18px 0}.card-content[_ngcontent-%COMP%], .card-footer[_ngcontent-%COMP%]{padding:12px 18px}.location-badge[_ngcontent-%COMP%]{margin-left:18px;margin-right:18px;margin-bottom:12px}.footer-action.primary[_ngcontent-%COMP%]{flex:1;justify-content:center;font-size:12px;padding:8px 12px}.footer-action.icon-only[_ngcontent-%COMP%]{width:40px;height:40px;padding:8px}.feed-cards[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:18px}.feed-card[_ngcontent-%COMP%]{min-height:260px}.alerts-sidebar[_ngcontent-%COMP%]{flex-direction:column}.sidebar-card[_ngcontent-%COMP%]{min-width:100%}}@media (max-width: 1400px){.dashboard-content[_ngcontent-%COMP%]{padding:20px}.main-grid[_ngcontent-%COMP%]{gap:20px}}@media (max-width: 1200px){.dashboard-content[_ngcontent-%COMP%]{padding:16px}.main-grid[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr}.fab-stack[_ngcontent-%COMP%]{left:16px;bottom:20px;gap:10px}.fab-btn[_ngcontent-%COMP%]{height:44px;padding:0 14px 0 12px}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.fab-label[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 992px){.dashboard-content[_ngcontent-%COMP%]{padding:16px}.main-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.police-alerts-section[_ngcontent-%COMP%]{position:relative;top:0}}@media (max-width: 768px){.dashboard-content[_ngcontent-%COMP%]{padding:12px 12px 20px}.fab-stack[_ngcontent-%COMP%]{left:12px;bottom:16px;gap:8px}.fab-btn[_ngcontent-%COMP%]{height:42px;padding:0 12px 0 10px;gap:8px}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.fab-label[_ngcontent-%COMP%]{font-size:11px}.citizen-reports-section[_ngcontent-%COMP%], .police-alerts-section[_ngcontent-%COMP%]{padding:16px;border-radius:12px}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.dashboard-content[_ngcontent-%COMP%]{padding:10px 10px 10px 70px}.fab-stack[_ngcontent-%COMP%]{left:10px;bottom:12px;gap:6px}.fab-btn[_ngcontent-%COMP%]{height:38px;padding:0 10px 0 8px;gap:6px;border-radius:19px}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.fab-label[_ngcontent-%COMP%]{font-size:10px}.citizen-reports-section[_ngcontent-%COMP%], .police-alerts-section[_ngcontent-%COMP%]{padding:12px}}.alerts-grid[_ngcontent-%COMP%]{background:transparent;padding:0;border-radius:0;box-shadow:none;border:none;position:relative}.feed-timeline[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;position:relative}.feed-item[_ngcontent-%COMP%]{display:flex;gap:16px;cursor:pointer;padding:0 0 24px;transition:all .3s ease;animation:_ngcontent-%COMP%_feedSlideIn .4s ease forwards;opacity:0}.feed-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.05s}.feed-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.feed-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.15s}.feed-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.2s}.feed-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.25s}@keyframes _ngcontent-%COMP%_feedSlideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.timeline-node[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex-shrink:0;width:24px}.node-dot[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;background:#1a2a5e;border:3px solid white;box-shadow:0 2px 8px #1a2a5e4d;z-index:2;transition:all .3s ease}.node-dot.high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#dc3545);box-shadow:0 2px 12px #c41e3a66;animation:_ngcontent-%COMP%_nodePulse 2s ease-in-out infinite}.node-dot.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#f0ad4e);box-shadow:0 2px 8px #d4a84b66}.node-dot.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#5cb85c);box-shadow:0 2px 8px #28a7454d}@keyframes _ngcontent-%COMP%_nodePulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.node-line[_ngcontent-%COMP%]{width:2px;flex-grow:1;background:linear-gradient(to bottom,#1a2a5e33,#1a2a5e0d);margin-top:4px}.feed-item[_ngcontent-%COMP%]:last-child   .node-line[_ngcontent-%COMP%]{display:none}.feed-content[_ngcontent-%COMP%]{flex:1;background:#fff;border-radius:16px;padding:18px 20px;box-shadow:0 2px 12px #0000000f;border:1px solid rgba(26,42,94,.06);transition:all .3s cubic-bezier(.175,.885,.32,1.275);position:relative;overflow:hidden}.feed-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:#1a2a5e;opacity:0;transition:opacity .3s ease}.feed-item.priority-high[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#c41e3a,#dc3545);opacity:1}.feed-item.priority-medium[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#d4a84b,#f0ad4e);opacity:1}.feed-item.priority-low[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#28a745,#5cb85c);opacity:.6}.feed-item[_ngcontent-%COMP%]:hover   .feed-content[_ngcontent-%COMP%]{transform:translate(8px);box-shadow:0 8px 24px #0000001a;border-color:#1a2a5e26}.feed-item[_ngcontent-%COMP%]:hover   .node-dot[_ngcontent-%COMP%]{transform:scale(1.3)}.feed-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.reporter-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#e9ecef,#dee2e6);display:flex;align-items:center;justify-content:center;flex-shrink:0}.reporter-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px;color:#6c757d}.reporter-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;flex:1}.reporter-name[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#1a2a5e}.report-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#888}.report-time[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.6}.priority-tag[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.priority-tag.high[_ngcontent-%COMP%]{background:#c41e3a1a;color:#c41e3a}.priority-tag.medium[_ngcontent-%COMP%]{background:#d4a84b26;color:#b8860b}.priority-tag.low[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.feed-body[_ngcontent-%COMP%]{margin-bottom:12px}.feed-text[_ngcontent-%COMP%]{margin:0;font-size:15px;line-height:1.6;color:#333}.feed-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 12px;background:#1a2a5e0a;border-radius:8px;margin-bottom:12px}.feed-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;flex-shrink:0}.feed-location[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#555}.feed-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding-top:12px;border-top:1px solid rgba(0,0,0,.06)}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease}.action-btn.view-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff}.action-btn.view-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #1a2a5e4d}.action-btn.share-btn[_ngcontent-%COMP%]{background:transparent;color:#888;padding:8px}.action-btn.share-btn[_ngcontent-%COMP%]:hover{background:#0000000d;color:#1a2a5e}@media (max-width: 768px){.feed-item[_ngcontent-%COMP%]{gap:12px}.timeline-node[_ngcontent-%COMP%]{width:20px}.node-dot[_ngcontent-%COMP%]{width:12px;height:12px}.feed-content[_ngcontent-%COMP%]{padding:14px 16px;border-radius:12px}.reporter-avatar[_ngcontent-%COMP%]{width:36px;height:36px}.reporter-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.priority-tag[_ngcontent-%COMP%]{padding:3px 8px;font-size:10px}.feed-text[_ngcontent-%COMP%]{font-size:14px}.feed-actions[_ngcontent-%COMP%]{flex-wrap:wrap}}@media (max-width: 480px){.feed-header[_ngcontent-%COMP%]{flex-wrap:wrap}.priority-tag[_ngcontent-%COMP%]{order:-1;width:100%;text-align:center;margin-bottom:8px}.feed-content[_ngcontent-%COMP%]{padding:12px 14px}.action-btn.view-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}}.alerts-controls[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:24px;background:#fff;padding:12px 16px;border-radius:12px;box-shadow:0 2px 12px #0000000f;position:relative;z-index:1}.alerts-controls[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{padding:10px 14px;border-radius:10px;border:1px solid rgba(26,42,94,.15);background:#fff;font-weight:600;color:#1a2a5e;cursor:pointer;transition:all .3s ease}.alerts-controls[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:hover{border-color:#1a2a5e}.alerts-controls[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1 1 auto;padding:10px 16px;border-radius:10px;border:1px solid rgba(26,42,94,.15);background:#fafafa;font-size:14px;transition:all .3s ease}.alerts-controls[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.alerts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;position:relative;z-index:1}@media (max-width: 768px){.alerts-container[_ngcontent-%COMP%]{gap:0}}.alert-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;background:#fff;border-radius:12px;overflow:visible;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 12px #0000000f;border:1px solid rgba(26,42,94,.08);position:relative;animation:_ngcontent-%COMP%_feedSlideIn .5s cubic-bezier(.4,0,.2,1) backwards;min-height:auto;margin-left:40px;margin-bottom:20px;padding:0}.alert-card[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-28px;top:20px;width:12px;height:12px;border-radius:50%;background:#d4a84b;border:3px solid #fff;box-shadow:0 2px 8px #d4a84b66;z-index:2}.alert-card.priority-high[_ngcontent-%COMP%]:before{background:#dc3545;box-shadow:0 2px 8px #dc354566}.alert-card.priority-medium[_ngcontent-%COMP%]:before{background:#fd7e14;box-shadow:0 2px 8px #fd7e1466}.alert-card.priority-low[_ngcontent-%COMP%]:before{background:#28a745;box-shadow:0 2px 8px #28a74566}@media (max-width: 768px){.alert-card[_ngcontent-%COMP%]{margin-left:32px}.alert-card[_ngcontent-%COMP%]:before{left:-24px;width:10px;height:10px}}.alert-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.05s}.alert-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.alert-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.15s}.alert-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.2s}.alert-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.25s}.alert-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.3s}.alert-card[_ngcontent-%COMP%]:nth-child(n+7){animation-delay:.35s}@keyframes _ngcontent-%COMP%_feedSlideIn{0%{opacity:0;transform:translate(-30px)}to{opacity:1;transform:translate(0)}}.alert-card[_ngcontent-%COMP%]:hover{transform:translate(8px);box-shadow:0 8px 24px #1a2a5e1f;border-color:#1a2a5e26}.alert-card.priority-high[_ngcontent-%COMP%]{border-left:4px solid #dc3545;border-top:none}.alert-card.priority-medium[_ngcontent-%COMP%]{border-left:4px solid #fd7e14;border-top:none}.alert-card.priority-low[_ngcontent-%COMP%]{border-left:4px solid #28a745;border-top:none}.priority-badge[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:16px;font-size:.6rem;font-weight:700;letter-spacing:.4px;text-transform:uppercase;z-index:2}.priority-badge.high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;box-shadow:0 2px 8px #dc354559}.priority-badge.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fd7e14,#e76f00);color:#fff;box-shadow:0 2px 8px #fd7e1459}.priority-badge.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;box-shadow:0 2px 8px #28a74559}.priority-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.card-body[_ngcontent-%COMP%]{flex:1;padding:16px 18px;display:flex;flex-direction:column;gap:8px}.alert-title[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:700;color:#1a2a5e;line-height:1.4;padding-right:70px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.alert-location[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:5px;color:#777;font-size:.8rem;line-height:1.4}.alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;flex-shrink:0;margin-top:2px;width:14px;height:14px}.alert-location[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.alert-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:4px;padding-top:10px;border-top:1px solid rgba(0,0,0,.05);flex-wrap:wrap}.alert-meta[_ngcontent-%COMP%]   .reporter[_ngcontent-%COMP%], .alert-meta[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.75rem;color:#999}.alert-meta[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#bbb;width:11px;height:11px}.card-arrow[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;padding:10px 16px;background:transparent;color:#d4a84b;transition:all .3s ease;font-size:.75rem;font-weight:700;gap:4px;border-top:1px solid rgba(0,0,0,.05)}.card-arrow[_ngcontent-%COMP%]:before{content:"Read More"}.alert-card[_ngcontent-%COMP%]:hover   .card-arrow[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e0f,#1a2a5e1a);color:#1a2a5e}.alert-card[_ngcontent-%COMP%]:hover   .card-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:translate(4px)}.card-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform .3s ease;width:16px;height:16px}.no-alerts[_ngcontent-%COMP%]{text-align:center;padding:80px 40px;color:#666;background:#fff;border-radius:16px;box-shadow:0 4px 16px #00000014;grid-column:1 / -1}.no-alerts-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 20px;background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-radius:50%;display:flex;align-items:center;justify-content:center}.no-alerts-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#4caf50}.no-alerts[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.3rem;color:#333;font-weight:600}.no-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:#777}@media (max-width: 768px){.alerts-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.alerts-controls[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%], .alerts-controls[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%}.alert-card[_ngcontent-%COMP%]{min-height:160px}.priority-badge[_ngcontent-%COMP%]{top:12px;right:12px;padding:4px 10px;font-size:.6rem}.card-body[_ngcontent-%COMP%]{padding:14px 16px}.alert-title[_ngcontent-%COMP%]{font-size:.95rem;padding-right:70px}.alert-location[_ngcontent-%COMP%]{font-size:.8rem}.card-arrow[_ngcontent-%COMP%]{padding:10px 16px;font-size:.75rem}}.map-preview[_ngcontent-%COMP%]{display:none;position:relative;width:100%;border-radius:12px;overflow:hidden;cursor:pointer;transition:all .3s ease}.map-preview[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.map-preview[_ngcontent-%COMP%]:hover   .map-overlay[_ngcontent-%COMP%]{opacity:1}.map-illustration[_ngcontent-%COMP%]{width:100%;height:180px;background:linear-gradient(135deg,#e3f2fd,#bbdefb);display:flex;align-items:center;justify-content:center}.map-illustration[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.map-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#1a3a52b3;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;opacity:0;transition:opacity .3s ease;color:#fff}.map-overlay[_ngcontent-%COMP%]   .map-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center}.map-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.map-legend[_ngcontent-%COMP%]{display:none;justify-content:center;gap:20px;padding:10px 0;border-top:1px solid rgba(0,0,0,.06);border-bottom:1px solid rgba(0,0,0,.06)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.8rem;color:#666}.legend-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.legend-dot.high[_ngcontent-%COMP%]{background:#dc3545;box-shadow:0 0 0 3px #dc354533}.legend-dot.medium[_ngcontent-%COMP%]{background:#fd7e14;box-shadow:0 0 0 3px #fd7e1433}.legend-dot.low[_ngcontent-%COMP%]{background:#28a745;box-shadow:0 0 0 3px #28a74533}.sos-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#1a3a52f7,#142d41fa);display:flex;align-items:center;justify-content:center;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .3s ease;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.sos-overlay.sos-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a3a52f7,#142d41fa)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sos-modal[_ngcontent-%COMP%]{text-align:center;padding:50px 40px;max-width:480px;width:90%;background:#ffffff0d;border-radius:20px;border:1px solid rgba(255,255,255,.1);box-shadow:0 25px 50px #0000004d}.sos-sending[_ngcontent-%COMP%]{position:relative;width:140px;height:140px;margin:0 auto 35px}.sos-pulse-ring[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;border:3px solid rgba(220,53,69,.6);animation:_ngcontent-%COMP%_pulseRing 1.5s ease-out infinite}.sos-pulse-ring.delay-1[_ngcontent-%COMP%]{animation-delay:.5s}.sos-pulse-ring.delay-2[_ngcontent-%COMP%]{animation-delay:1s}@keyframes _ngcontent-%COMP%_pulseRing{0%{transform:scale(.5);opacity:1}to{transform:scale(1.8);opacity:0}}.sos-icon-large[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:linear-gradient(135deg,#dc3545,#c82333);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 0 40px #dc354580;animation:_ngcontent-%COMP%_iconGlow 1s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_iconGlow{0%{box-shadow:0 0 30px #dc354566}to{box-shadow:0 0 50px #dc3545b3}}.sos-title[_ngcontent-%COMP%]{font-size:26px;color:#fff;margin:0 0 12px;font-weight:700;letter-spacing:2px;text-transform:uppercase}.sos-title.success[_ngcontent-%COMP%]{color:#2ecc71}.sos-subtitle[_ngcontent-%COMP%]{font-size:15px;color:#ffffffb3;margin:0 0 25px;font-weight:400}.sos-info[_ngcontent-%COMP%]{font-size:14px;color:#fff9;margin:0 0 30px}.sos-countdown[_ngcontent-%COMP%]{font-size:14px;color:#fff9;margin:20px 0 0;font-weight:500}.sos-location-status[_ngcontent-%COMP%]{margin-bottom:20px;padding:8px 16px;border-radius:20px;font-size:13px;font-weight:500;display:inline-block}.sos-location-status[_ngcontent-%COMP%]   .location-pending[_ngcontent-%COMP%]{color:#ffffffb3;animation:_ngcontent-%COMP%_blink 1.5s ease-in-out infinite}.sos-location-status[_ngcontent-%COMP%]   .location-obtained[_ngcontent-%COMP%]{color:#2ecc71;font-weight:600}.sos-location-status[_ngcontent-%COMP%]   .location-obtained[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:8px;height:8px;background:#2ecc71;border-radius:50%;margin-right:8px;animation:pulse 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.5}}.sos-modal[_ngcontent-%COMP%]   .sos-progress-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:#ffffff26;border-radius:3px;overflow:hidden;margin:0}.sos-modal[_ngcontent-%COMP%]   .sos-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#dc3545,#e74c3c);border-radius:3px;transition:width .1s linear}.sos-success-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease}.sos-success-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#27ae60,#2ecc71);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 25px;color:#fff;box-shadow:0 10px 30px #27ae604d;animation:_ngcontent-%COMP%_successPop .5s ease}@keyframes _ngcontent-%COMP%_successPop{0%{transform:scale(0);opacity:0}50%{transform:scale(1.1)}to{transform:scale(1);opacity:1}}.sos-details[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:12px;padding:20px;margin:25px 0;border:1px solid rgba(255,255,255,.08)}.sos-detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 0;color:#ffffffd9;font-size:14px;font-weight:500}.sos-detail-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(255,255,255,.08)}.sos-detail-item.success[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#2ecc71f2}.sos-detail-item.warning[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e74c3ce6}.detail-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.detail-icon.location[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)}.detail-icon.location[_ngcontent-%COMP%]:before{content:"";width:12px;height:12px;background:#fff;border-radius:50%;box-shadow:0 0 0 3px #ffffff4d}.detail-icon.services[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e67e22,#d35400)}.detail-icon.services[_ngcontent-%COMP%]:before{content:"";width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:10px solid white}.detail-icon.admin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6,#8e44ad)}.detail-icon.admin[_ngcontent-%COMP%]:before{content:"";width:10px;height:10px;background:#fff;border-radius:50%;position:relative}.detail-icon.admin[_ngcontent-%COMP%]:after{content:"";position:absolute;width:16px;height:8px;background:#fff;border-radius:0 0 8px 8px;margin-top:6px;margin-left:-3px}.sos-close-btn[_ngcontent-%COMP%]{margin-top:10px;padding:14px 50px;font-size:14px;background:linear-gradient(135deg,#1a3a52,#2a5a7a);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;text-transform:uppercase;font-weight:600;letter-spacing:1px}.sos-close-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #1a3a5266}@media (max-width: 768px){.sos-modal[_ngcontent-%COMP%]{padding:40px 25px}.sos-sending[_ngcontent-%COMP%]{width:120px;height:120px}.sos-icon-large[_ngcontent-%COMP%]{width:65px;height:65px}.sos-icon-large[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.sos-title[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1px}.sos-close-btn[_ngcontent-%COMP%]{padding:12px 40px}}@media (max-width: 480px){.sos-modal[_ngcontent-%COMP%]{padding:30px 20px;margin:15px;width:calc(100% - 30px)}.sos-sending[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:25px}.sos-icon-large[_ngcontent-%COMP%]{width:55px;height:55px}.sos-icon-large[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.sos-title[_ngcontent-%COMP%]{font-size:18px}.sos-subtitle[_ngcontent-%COMP%]{font-size:14px}.sos-success-icon[_ngcontent-%COMP%]{width:65px;height:65px}.sos-success-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px}.sos-details[_ngcontent-%COMP%]{padding:15px}.sos-detail-item[_ngcontent-%COMP%]{font-size:13px}}.police-alerts-wrapper[_ngcontent-%COMP%]{margin-top:30px}.police-alerts-section[_ngcontent-%COMP%]{margin-top:0}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#1a2a5e;font-weight:700;display:flex;align-items:center;gap:10px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:4px 0 0;font-size:12px;color:#666;font-weight:400}.police-alerts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-height:calc(100vh - 250px);overflow-y:auto;padding-right:4px}.police-alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.police-alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}.police-alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d4a84b80;border-radius:4px}@media (max-width: 992px){.police-alerts-container[_ngcontent-%COMP%]{max-height:400px}}.police-alert-card[_ngcontent-%COMP%]{background:#ffffff14;border-radius:12px;padding:14px;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;border:1px solid rgba(255,255,255,.1)}.police-alert-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:3px;height:100%;background:#d4a84b;transition:width .3s ease}.police-alert-card[_ngcontent-%COMP%]:hover{background:#ffffff1f;transform:translate(4px)}.police-alert-card[_ngcontent-%COMP%]:hover:before{width:5px}.police-alert-card.priority-high[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#dc3545,#c41e3a)}.police-alert-card.priority-medium[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#fd7e14,#e67e22)}.police-alert-card.priority-low[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#28a745,#20c997)}.police-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:#d4a84b33;padding:3px 8px;border-radius:10px;margin-bottom:8px}.police-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;width:12px;height:12px}.police-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:9px;font-weight:700;color:#d4a84b;letter-spacing:.8px}.police-alert-title[_ngcontent-%COMP%]{margin:0 0 6px;font-size:13px;font-weight:600;color:#fff;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.police-alert-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;color:#ffffffa6;font-size:11px;margin-bottom:8px}.police-alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;opacity:.7;width:12px;height:12px}.police-alert-priority[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:8px;font-size:9px;font-weight:700;letter-spacing:.4px}.police-alert-priority.high[_ngcontent-%COMP%]{background:#dc354540;color:#ff8a8a}.police-alert-priority.medium[_ngcontent-%COMP%]{background:#fd7e1440;color:#ffb366}.police-alert-priority.low[_ngcontent-%COMP%]{background:#28a74540;color:#7ce08a}.no-police-alerts[_ngcontent-%COMP%]{text-align:center;padding:24px 16px;background:#ffffff0d;border-radius:12px;color:#fff9}.no-police-alerts[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b80;margin-bottom:8px}.no-police-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px}.no-police-alerts[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#28a745;margin-bottom:10px}.no-police-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#777}@media (max-width: 768px){.police-alerts-section[_ngcontent-%COMP%]{margin-top:20px}.police-alert-card[_ngcontent-%COMP%]{padding:14px}.police-alert-title[_ngcontent-%COMP%]{font-size:.9rem}.police-alert-location[_ngcontent-%COMP%]{font-size:.75rem}}.fab-btn[_ngcontent-%COMP%]:focus-visible, .nav-filter-btn[_ngcontent-%COMP%]:focus-visible, .footer-action[_ngcontent-%COMP%]:focus-visible, .feed-card[_ngcontent-%COMP%]:focus-visible{outline:3px solid var(--wcag-focus-color, #4a90d9);outline-offset:2px}.fab-btn[_ngcontent-%COMP%]{min-width:44px;min-height:44px}.nav-filter-btn[_ngcontent-%COMP%]{min-height:44px;padding:12px 16px}.footer-action[_ngcontent-%COMP%]{min-width:44px;min-height:44px}@media (prefers-contrast: high){.feed-card[_ngcontent-%COMP%]{border:2px solid #000}.priority-ribbon[_ngcontent-%COMP%]{border:1px solid currentColor}.nav-filter-btn.active[_ngcontent-%COMP%]{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){.fab-stack[_ngcontent-%COMP%], .feed-card[_ngcontent-%COMP%], .scroll-reveal[_ngcontent-%COMP%], .animate-on-load[_ngcontent-%COMP%], .sos-pulse-ring[_ngcontent-%COMP%]{animation:none!important;transition-duration:.01ms!important}}@media print{.fab-stack[_ngcontent-%COMP%], .sos-overlay[_ngcontent-%COMP%]{display:none!important}.feed-card[_ngcontent-%COMP%]{break-inside:avoid;page-break-inside:avoid;border:1px solid #000;box-shadow:none}.dashboard-container[_ngcontent-%COMP%]{background:#fff}}']})};var R4=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(Oe(yr),Oe(hi))};static \u0275dir=Gt({type:n})}return n})(),iM=(()=>{class n extends R4{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Io(n)))(r||n)}})();static \u0275dir=Gt({type:n,features:[nr]})}return n})(),my=new ye("");var TW={provide:my,useExisting:fr(()=>yi),multi:!0};function OW(){let n=br()?br().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var DW=new ye(""),yi=(()=>{class n extends R4{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!OW())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(Oe(yr),Oe(hi),Oe(DW,8))};static \u0275dir=Gt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&X("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[ws([TW]),nr]})}return n})();function AW(n){return n==null||N4(n)===0}function N4(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var _y=new ye(""),L4=new ye("");function kW(n){return AW(n.value)?{required:!0}:null}function RW(n){return e=>{let t=e.value?.length??N4(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function I4(n){return null}function F4(n){return n!=null}function V4(n){return bs(n)?Rt(n):n}function B4(n){let e={};return n.forEach(t=>{e=t!=null?J(J({},e),t):e}),Object.keys(e).length===0?null:e}function U4(n,e){return e.map(t=>t(n))}function NW(n){return!n.validate}function j4(n){return n.map(e=>NW(e)?e:t=>e.validate(t))}function LW(n){if(!n)return null;let e=n.filter(F4);return e.length==0?null:function(t){return B4(U4(t,e))}}function rM(n){return n!=null?LW(j4(n)):null}function FW(n){if(!n)return null;let e=n.filter(F4);return e.length==0?null:function(t){let i=U4(t,e).map(V4);return gb(i).pipe(ue(B4))}}function oM(n){return n!=null?FW(j4(n)):null}function S4(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VW(n){return n._rawValidators}function BW(n){return n._rawAsyncValidators}function tM(n){return n?Array.isArray(n)?n:[n]:[]}function ly(n,e){return Array.isArray(n)?n.includes(e):n===e}function M4(n,e){let t=tM(e);return tM(n).forEach(r=>{ly(t,r)||t.push(r)}),t}function P4(n,e){return tM(e).filter(t=>!ly(n,t))}var uy=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Nd=class extends uy{name;get formDirective(){return null}get path(){return null}},Bp=class extends uy{_parent=null;name=null;valueAccessor=null},dy=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},UW={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ibe=ve(J({},UW),{"[class.ng-submitted]":"isSubmitted"}),$i=(()=>{class n extends dy{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Oe(Bp,2))};static \u0275dir=Gt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&ke("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[nr]})}return n})(),Ld=(()=>{class n extends dy{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Oe(Nd,10))};static \u0275dir=Gt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&ke("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[nr]})}return n})();var Rp="VALID",cy="INVALID",kd="PENDING",Np="DISABLED",ec=class{},hy=class extends ec{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Fp=class extends ec{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Vp=class extends ec{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Rd=class extends ec{status;source;constructor(e,t){super(),this.status=e,this.source=t}},nM=class extends ec{source;constructor(e){super(),this.source=e}},fy=class extends ec{source;constructor(e){super(),this.source=e}};function z4(n){return(vy(n)?n.validators:n)||null}function jW(n){return Array.isArray(n)?rM(n):n||null}function H4(n,e){return(vy(e)?e.asyncValidators:n)||null}function zW(n){return Array.isArray(n)?oM(n):n||null}function vy(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function HW(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new le(1e3,"");if(!i[t])throw new le(1001,"")}function $W(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new le(1002,"")})}var py=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Tn(this.statusReactive)}set status(e){Tn(()=>this.statusReactive.set(e))}_status=Ia(()=>this.statusReactive());statusReactive=Bt(void 0);get valid(){return this.status===Rp}get invalid(){return this.status===cy}get pending(){return this.status==kd}get disabled(){return this.status===Np}get enabled(){return this.status!==Np}errors;get pristine(){return Tn(this.pristineReactive)}set pristine(e){Tn(()=>this.pristineReactive.set(e))}_pristine=Ia(()=>this.pristineReactive());pristineReactive=Bt(!0);get dirty(){return!this.pristine}get touched(){return Tn(this.touchedReactive)}set touched(e){Tn(()=>this.touchedReactive.set(e))}_touched=Ia(()=>this.touchedReactive());touchedReactive=Bt(!1);get untouched(){return!this.touched}_events=new Qt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(M4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(M4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(P4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(P4(e,this._rawAsyncValidators))}hasValidator(e){return ly(this._rawValidators,e)}hasAsyncValidator(e){return ly(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ve(J({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Vp(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Vp(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ve(J({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Fp(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Fp(!0,i))}markAsPending(e={}){this.status=kd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ve(J({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Np,this.errors=null,this._forEachChild(r=>{r.disable(ve(J({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hy(this.value,i)),this._events.next(new Rd(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ve(J({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rp,this._forEachChild(i=>{i.enable(ve(J({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ve(J({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rp||this.status===kd)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hy(this.value,t)),this._events.next(new Rd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ve(J({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Np:Rp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=kd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=V4(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Rd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new an,this.statusChanges=new an}_calculateStatus(){return this._allControlsDisabled()?Np:this.errors?cy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kd)?kd:this._anyControlsHaveStatus(cy)?cy:Rp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Fp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Vp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vy(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=jW(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=zW(this._rawAsyncValidators)}},gy=class extends py{constructor(e,t,i){super(z4(t),H4(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){$W(this,!0,e),Object.keys(e).forEach(i=>{HW(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new fy(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var sM=new ye("",{providedIn:"root",factory:()=>aM}),aM="always";function GW(n,e){return[...e.path,n]}function $4(n,e,t=aM){G4(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),WW(n,e),ZW(n,e),KW(n,e),qW(n,e)}function T4(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function qW(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function G4(n,e){let t=VW(n);e.validator!==null?n.setValidators(S4(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=BW(n);e.asyncValidator!==null?n.setAsyncValidators(S4(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();T4(e._rawValidators,r),T4(e._rawAsyncValidators,r)}function WW(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&q4(n,e)})}function KW(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&q4(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function q4(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ZW(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function YW(n,e){n==null,G4(n,e)}function QW(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function JW(n){return Object.getPrototypeOf(n.constructor)===iM}function XW(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function eK(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===yi?t=o:JW(o)?i=o:r=o}),r||i||t||null}var tK={provide:Nd,useExisting:fr(()=>El)},Lp=Promise.resolve(),El=(()=>{class n extends Nd{callSetDisabledState;get submitted(){return Tn(this.submittedReactive)}_submitted=Ia(()=>this.submittedReactive());submittedReactive=Bt(!1);_directives=new Set;form;ngSubmit=new an;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new gy({},rM(t),oM(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Lp.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),$4(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Lp.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Lp.then(()=>{let i=this._findContainer(t.path),r=new gy({});YW(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Lp.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Lp.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),XW(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new nM(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(Oe(_y,10),Oe(L4,10),Oe(sM,8))};static \u0275dir=Gt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&X("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ws([tK]),nr]})}return n})();function O4(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function D4(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var nK=class extends py{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(z4(t),H4(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(D4(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new fy(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){O4(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){O4(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){D4(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var iK={provide:Bp,useExisting:fr(()=>Ai)},A4=Promise.resolve(),Ai=(()=>{class n extends Bp{_changeDetectorRef;callSetDisabledState;control=new nK;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new an;constructor(t,i,r,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=eK(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),QW(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){$4(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){A4.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Sa(i);A4.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?GW(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(Oe(Nd,9),Oe(_y,10),Oe(L4,10),Oe(my,10),Oe(Po,8),Oe(sM,8))};static \u0275dir=Gt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ws([iK]),nr,Eo]})}return n})();var Fd=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Gt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var rK={provide:my,useExisting:fr(()=>Zo),multi:!0};function W4(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function oK(n){return n.split(":")[0]}var Zo=(()=>{class n extends iM{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=F(xs).injector;destroyRef=F(Ur);cdr=F(Po);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,sf({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=W4(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=oK(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Io(n)))(r||n)}})();static \u0275dir=Gt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&X("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ws([rK]),nr]})}return n})(),tc=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(W4(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(Oe(hi),Oe(yr),Oe(Zo,9))};static \u0275dir=Gt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),sK={provide:my,useExisting:fr(()=>K4),multi:!0};function k4(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function aK(n){return n.split(":")[0]}var K4=(()=>{class n extends iM{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let l=0;l<a.length;l++){let u=a[l],f=this._getOptionValue(u.value);r.push(f)}}else{let a=i.options;for(let l=0;l<a.length;l++){let u=a[l];if(u.selected){let f=this._getOptionValue(u.value);r.push(f)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=aK(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Io(n)))(r||n)}})();static \u0275dir=Gt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&X("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ws([sK]),nr]})}return n})(),nc=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(k4(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(k4(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Oe(hi),Oe(yr),Oe(K4,9))};static \u0275dir=Gt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function cK(n){return typeof n=="number"?n:parseInt(n,10)}var Z4=(()=>{class n{_validator=I4;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):I4,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Gt({type:n,features:[Eo]})}return n})();var lK={provide:_y,useExisting:fr(()=>Il),multi:!0};var Il=(()=>{class n extends Z4{required;inputName="required";normalizeInput=Sa;createValidator=t=>kW;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Io(n)))(r||n)}})();static \u0275dir=Gt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&St("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ws([lK]),nr]})}return n})();var uK={provide:_y,useExisting:fr(()=>cM),multi:!0},cM=(()=>{class n extends Z4{minlength;inputName="minlength";normalizeInput=t=>cK(t);createValidator=t=>RW(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Io(n)))(r||n)}})();static \u0275dir=Gt({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&St("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[ws([uK]),nr]})}return n})();var dK=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Lr({})}return n})();var gn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sM,useValue:t.callSetDisabledState??aM}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Lr({imports:[dK]})}return n})();var Fn=KM(lM());var Gi={"A. Bonifacio-Caguioa-Rimando (ABCR)":[16.4142,120.5947],"Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)":[16.4153,120.5934],"Alfonso Tabora":[16.4234,120.5969],Ambiong:[16.4288,120.6081],"Andres Bonifacio (Lower Bokawkan)":[16.4174,120.5856],"Apugan-Loakan":[16.3828,120.6175],"Asin Road":[16.4046,120.5636],"Atok Trail":[16.3792,120.6307],"Aurora Hill Proper (Malvar-Sgt. Floresca)":[16.4245,120.603],"Aurora Hill, North Central":[16.4278,120.6042],"Aurora Hill, South Central":[16.4254,120.6069],"Bagong Lipunan (Market Area)":[16.4153,120.596],"Baguio Dairy Farm":[16.382,120.5694],"Bakakeng Central":[16.3908,120.5839],"Bakakeng North":[16.3969,120.5878],"Bal-Marcoville (Marcoville)":[16.4089,120.6017],Balsigan:[16.4047,120.5889],"Bayan Park East":[16.4278,120.6125],"Bayan Park Village":[16.4264,120.6108],"Bayan Park West (Bayan Park)":[16.4267,120.6083],"BGH Compound":[16.4008,120.5922],Brookside:[16.4225,120.6058],Brookspoint:[16.4258,120.6153],"Cabinet Hill-Teacher's Camp":[16.4158,120.6067],"Camdas Subdivision":[16.4272,120.5975],"Camp 7":[16.3769,120.5939],"Camp 8":[16.3917,120.5967],"Camp Allen":[16.4147,120.5892],"Campo Filipino":[16.4169,120.5861],"City Camp Central":[16.4117,120.5869],"City Camp Proper":[16.4108,120.5858],"Country Club Village":[16.41,120.6189],"Cresencia Village":[16.4142,120.5867],Dagisitan:[16.4269,120.5986],"Dagsian, Lower":[16.3986,120.6028],"Dagsian, Upper":[16.4011,120.6025],"Dizon Subdivision":[16.4286,120.5989],"Dominican Hill-Mirador":[16.4097,120.5794],Dontogan:[16.3758,120.5736],"DPS Area":[16.4039,120.5986],"Engineers' Hill":[16.4111,120.6011],"Fairview Village":[16.4128,120.5819],"Ferdinand (Happy Homes-Campo Sioco)":[16.4061,120.5869],"Fort del Pilar":[16.3886,120.6192],"Gabriel Silang":[16.4006,120.6053],"General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)":[16.4239,120.5919],"General Luna, Lower":[16.4136,120.5997],"General Luna, Upper":[16.415,120.6014],Gibraltar:[16.4183,120.6278],"Greenwater Village":[16.4056,120.6083],"Guisad Central":[16.4217,120.5839],"Guisad Sorong":[16.425,120.5819],"Happy Hollow":[16.4036,120.6306],"Happy Homes (Happy Homes-Lucban)":[16.4239,120.5936],"Harrison-Claudio Carantes":[16.4131,120.5956],Hillside:[16.3981,120.605],"Holy Ghost Extension":[16.4189,120.5994],"Holy Ghost Proper":[16.4172,120.5969],"Honeymoon (Honeymoon-Holy Ghost)":[16.4206,120.5947],"Imelda R. Marcos (La Salle)":[16.4083,120.6014],"Imelda Village":[16.4167,120.6056],Irisan:[16.4083,120.5606],Kabayanihan:[16.4144,120.5931],Kagitingan:[16.4156,120.5908],"Kayang Extension":[16.4167,120.5925],"Kayang-Hilltop":[16.4161,120.5942],Kias:[16.3667,120.6233],"Legarda-Burnham-Kisad":[16.4111,120.5917],"Liwanag-Loakan":[16.3889,120.6125],"Loakan Proper":[16.3833,120.6167],"Lopez Jaena":[16.4183,120.6011],"Lourdes Subdivision Extension":[16.4089,120.585],"Lourdes Subdivision, Lower":[16.4097,120.5883],"Lourdes Subdivision, Proper":[16.4086,120.5869],Lualhati:[16.4136,120.615],Lucnab:[16.4133,120.6308],"Magsaysay Private Road":[16.4192,120.5964],"Magsaysay, Lower":[16.4208,120.5947],"Magsaysay, Upper":[16.4222,120.5958],"Malcolm Square-Perfecto (Jose Abad Santos)":[16.415,120.5958],"Manuel A. Roxas":[16.4183,120.6031],"Market Subdivision, Upper":[16.4164,120.5975],"Middle Quezon Hill Subdivision (Quezon Hill Middle)":[16.42,120.58],"Military Cut-off":[16.4067,120.5983],"Mines View Park":[16.4244,120.6331],"Modern Site, East":[16.425,120.6042],"Modern Site, West":[16.425,120.6028],"MRR-Queen of Peace":[16.4111,120.5844],"New Lucban":[16.4214,120.5925],"Outlook Drive":[16.4139,120.6225],Pacdal:[16.425,120.6194],"Padre Burgos":[16.4161,120.59],"Padre Zamora":[16.4194,120.5939],"Palma-Urbano (Cari\xF1o-Palma)":[16.405,120.595],"Phil-Am":[16.42,120.605],Pinget:[16.435,120.58],"Pinsao Pilot Project":[16.4294,120.575],"Pinsao Proper":[16.4333,120.5722],Poliwes:[16.3983,120.5933],Pucsusan:[16.4214,120.6264],"Quezon Hill Proper":[16.4233,120.5783],"Quezon Hill, Upper":[16.425,120.5767],"Quirino Hill, East":[16.43,120.5883],"Quirino Hill, Lower":[16.4283,120.59],"Quirino Hill, Middle":[16.43,120.59],"Quirino Hill, West":[16.43,120.5867],"Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)":[16.4225,120.5933],"Rizal Monument Area":[16.4131,120.5931],"Rock Quarry, Lower":[16.4083,120.5883],"Rock Quarry, Middle":[16.4094,120.5867],"Rock Quarry, Upper":[16.4106,120.585],"Salud Mitra":[16.4167,120.5983],"San Antonio Village":[16.4167,120.6083],"San Luis Village":[16.3917,120.5833],"San Roque Village":[16.395,120.575],"San Vicente":[16.3917,120.5917],"Sanitary Camp, North":[16.4367,120.6028],"Sanitary Camp, South":[16.435,120.6028],"Santa Escolastica":[16.4044,120.6017],"Santo Rosario":[16.4161,120.5833],"Santo Tomas Proper":[16.37,120.56],"Santo Tomas School Area":[16.375,120.565],"Scout Barrio":[16.3992,120.6133],"Session Road Area":[16.4125,120.5964],"Slaughter House Area (Santo Ni\xF1o Slaughter)":[16.4267,120.5942],"SLU-SVP Housing Village":[16.4022,120.59],"South Drive":[16.4139,120.6139],"Teodora Alonzo":[16.4117,120.59],Trancoville:[16.4222,120.6028],"Upper General Luna":[16.415,120.6014],"Victoria Village":[16.4172,120.5811],"Websters Subdivision":[16.4178,120.585]};var by=class n{suggestions$=new _t([]);STREETS_AND_LANDMARKS=[{name:"Session Road",barangay:"Session Road Area",coordinates:[16.4125,120.5964],type:"street",matchScore:0},{name:"Burnham Road",barangay:"Legarda-Burnham-Kisad",coordinates:[16.4111,120.5917],type:"street",matchScore:0},{name:"Bokawkan Road",barangay:"Andres Bonifacio (Lower Bokawkan)",coordinates:[16.4174,120.5856],type:"street",matchScore:0},{name:"Marcos Highway",barangay:"Magsaysay, Upper",coordinates:[16.4222,120.5958],type:"street",matchScore:0},{name:"Governor Pack Road",barangay:"New Lucban",coordinates:[16.4214,120.5925],type:"street",matchScore:0},{name:"Loakan Road",barangay:"Loakan Proper",coordinates:[16.3833,120.6167],type:"street",matchScore:0},{name:"Mines View Road",barangay:"Mines View Park",coordinates:[16.4244,120.6331],type:"street",matchScore:0},{name:"Outlook Drive",barangay:"Outlook Drive",coordinates:[16.4139,120.6225],type:"street",matchScore:0},{name:"South Drive",barangay:"South Drive",coordinates:[16.4139,120.6139],type:"street",matchScore:0},{name:"Santo Tomas Road",barangay:"Santo Tomas Proper",coordinates:[16.37,120.56],type:"street",matchScore:0},{name:"Mines View Park",barangay:"Mines View Park",coordinates:[16.4244,120.6331],type:"street",matchScore:0},{name:"Rizal Monument",barangay:"Rizal Monument Area",coordinates:[16.4131,120.5931],type:"street",matchScore:0},{name:"Baguio Cathedral",barangay:"Session Road Area",coordinates:[16.4125,120.5964],type:"street",matchScore:0},{name:"SM City Baguio",barangay:"Holy Ghost Extension",coordinates:[16.4189,120.5994],type:"street",matchScore:0},{name:"Ayala Technohub",barangay:"New Lucban",coordinates:[16.4214,120.5925],type:"street",matchScore:0},{name:"PNP Camp",barangay:"Camp 7",coordinates:[16.3769,120.5939],type:"street",matchScore:0}];constructor(){}searchLocations(e){if(!e||e.trim().length===0)return this.suggestions$.next([]),this.suggestions$.asObservable();let t=e.toLowerCase().trim(),i=[];Object.entries(Gi).forEach(([o,a])=>{let l=this.calculateMatchScore(t,o.toLowerCase());l>0&&i.push({name:o,barangay:o,coordinates:a,type:"barangay",matchScore:l})}),this.STREETS_AND_LANDMARKS.forEach(o=>{let a=this.calculateMatchScore(t,o.name.toLowerCase());a>0&&i.push(ve(J({},o),{matchScore:a}))});let r=i.sort((o,a)=>a.matchScore-o.matchScore).slice(0,12);return this.suggestions$.next(r),this.suggestions$.asObservable()}calculateMatchScore(e,t){if(t===e)return 100;if(t.startsWith(e))return 80;if(t.includes(e))return 60;let i=e.split(/\s+/),r=t.split(/\s+/),o=i.filter(a=>r.some(l=>l.startsWith(a)));return o.length>0?40+o.length*10:0}getAllBarangays(){return Object.entries(Gi).map(([e,t])=>({name:e,barangay:e,coordinates:t,type:"barangay",matchScore:0}))}getLocationCoordinates(e){if(Gi[e])return Gi[e];let t=this.STREETS_AND_LANDMARKS.find(i=>i.name.toLowerCase()===e.toLowerCase());return t?t.coordinates:null}getNearbyLocations(e,t,i=1){let r=[];return Object.entries(Gi).forEach(([o,[a,l]])=>{let u=this.calculateDistance(e,t,a,l);u<=i&&r.push({name:o,barangay:o,coordinates:[a,l],type:"barangay",matchScore:100-u/i*100})}),r.sort((o,a)=>a.matchScore-o.matchScore)}calculateDistance(e,t,i,r){let a=(i-e)*Math.PI/180,l=(r-t)*Math.PI/180,u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};function hK(n,e){if(n&1){let t=ge();_(0,"div",11)(1,"span",12),w(2),v(),_(3,"button",13),X("click",function(){j(t);let r=T();return z(r.notificationMessage="")}),w(4,"Close"),v()()}if(n&2){let t=T();ke("notification-error",t.notificationType==="error")("notification-success",t.notificationType==="success")("notification-warning",t.notificationType==="warning"),C(2),ae(t.notificationMessage)}}var xy=class n{data=F(Ad);auth=F(ln);reportService=F(pn);router=F(Et);animationService=F(Sr);locationSearchService=F(by);map;BAGUIO_COORDS=[16.4167,120.5933];BAGUIO_BOUNDS=[[16.35,120.52],[16.48,120.66]];searchQuery="";locationSuggestions=[];showSuggestions=!1;selectedSearchLocation=null;searchMarker=null;notificationMessage="";notificationType="error";notificationTimeout;BARANGAY_CENTROIDS={"A. Bonifacio-Caguioa-Rimando (ABCR)":[16.4142,120.5947],"Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)":[16.4153,120.5934],"Alfonso Tabora":[16.4234,120.5969],Ambiong:[16.4288,120.6081],"Andres Bonifacio (Lower Bokawkan)":[16.4174,120.5856],"Apugan-Loakan":[16.3828,120.6175],"Asin Road":[16.4046,120.5636],"Atok Trail":[16.3792,120.6307],"Aurora Hill Proper (Malvar-Sgt. Floresca)":[16.4245,120.603],"Aurora Hill, North Central":[16.4278,120.6042],"Aurora Hill, South Central":[16.4254,120.6069],"Bagong Lipunan (Market Area)":[16.4153,120.596],"Baguio Dairy Farm":[16.382,120.5694],"Bakakeng Central":[16.3908,120.5839],"Bakakeng North":[16.3969,120.5878],"Bal-Marcoville (Marcoville)":[16.4089,120.6017],Balsigan:[16.4047,120.5889],"Bayan Park East":[16.4278,120.6125],"Bayan Park Village":[16.4264,120.6108],"Bayan Park West (Bayan Park)":[16.4267,120.6083],"BGH Compound":[16.4008,120.5922],Brookside:[16.4225,120.6058],Brookspoint:[16.4258,120.6153],"Cabinet Hill-Teacher's Camp":[16.4158,120.6067],"Camdas Subdivision":[16.4272,120.5975],"Camp 7":[16.3769,120.5939],"Camp 8":[16.3917,120.5967],"Camp Allen":[16.4147,120.5892],"Campo Filipino":[16.4169,120.5861],"City Camp Central":[16.4117,120.5869],"City Camp Proper":[16.4108,120.5858],"Country Club Village":[16.41,120.6189],"Cresencia Village":[16.4142,120.5867],Dagisitan:[16.4269,120.5986],"Dagsian, Lower":[16.3986,120.6028],"Dagsian, Upper":[16.4011,120.6025],"Dizon Subdivision":[16.4286,120.5989],"Dominican Hill-Mirador":[16.4097,120.5794],Dontogan:[16.3758,120.5736],"DPS Area":[16.4039,120.5986],"Engineers' Hill":[16.4111,120.6011],"Fairview Village":[16.4128,120.5819],"Ferdinand (Happy Homes-Campo Sioco)":[16.4061,120.5869],"Fort del Pilar":[16.3886,120.6192],"Gabriel Silang":[16.4006,120.6053],"General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)":[16.4239,120.5919],"General Luna, Lower":[16.4136,120.5997],"General Luna, Upper":[16.415,120.6014],Gibraltar:[16.4183,120.6278],"Greenwater Village":[16.4056,120.6083],"Guisad Central":[16.4217,120.5839],"Guisad Sorong":[16.425,120.5819],"Happy Hollow":[16.4036,120.6306],"Happy Homes (Happy Homes-Lucban)":[16.4239,120.5936],"Harrison-Claudio Carantes":[16.4131,120.5956],Hillside:[16.3981,120.605],"Holy Ghost Extension":[16.4189,120.5994],"Holy Ghost Proper":[16.4172,120.5969],"Honeymoon (Honeymoon-Holy Ghost)":[16.4206,120.5947],"Imelda R. Marcos (La Salle)":[16.4083,120.6014],"Imelda Village":[16.4167,120.6056],Irisan:[16.4083,120.5606],Kabayanihan:[16.4144,120.5931],Kagitingan:[16.4156,120.5908],"Kayang Extension":[16.4167,120.5925],"Kayang-Hilltop":[16.4161,120.5942],Kias:[16.3667,120.6233],"Legarda-Burnham-Kisad":[16.4111,120.5917],"Liwanag-Loakan":[16.3889,120.6125],"Loakan Proper":[16.3833,120.6167],"Lopez Jaena":[16.4183,120.6011],"Lourdes Subdivision Extension":[16.4089,120.585],"Lourdes Subdivision, Lower":[16.4097,120.5883],"Lourdes Subdivision, Proper":[16.4086,120.5869],Lualhati:[16.4136,120.615],Lucnab:[16.4133,120.6308],"Magsaysay Private Road":[16.4192,120.5964],"Magsaysay, Lower":[16.4208,120.5947],"Magsaysay, Upper":[16.4222,120.5958],"Malcolm Square-Perfecto (Jose Abad Santos)":[16.415,120.5958],"Manuel A. Roxas":[16.4183,120.6031],"Market Subdivision, Upper":[16.4164,120.5975],"Middle Quezon Hill Subdivision (Quezon Hill Middle)":[16.42,120.58],"Military Cut-off":[16.4067,120.5983],"Mines View Park":[16.4244,120.6331],"Modern Site, East":[16.425,120.6042],"Modern Site, West":[16.425,120.6028],"MRR-Queen of Peace":[16.4111,120.5844],"New Lucban":[16.4214,120.5925],"Outlook Drive":[16.4139,120.6225],Pacdal:[16.425,120.6194],"Padre Burgos":[16.4161,120.59],"Padre Zamora":[16.4194,120.5939],"Palma-Urbano (Cari\xF1o-Palma)":[16.405,120.595],"Phil-Am":[16.42,120.605],Pinget:[16.435,120.58],"Pinsao Pilot Project":[16.4294,120.575],"Pinsao Proper":[16.4333,120.5722],Poliwes:[16.3983,120.5933],Pucsusan:[16.4214,120.6264],"Quezon Hill Proper":[16.4233,120.5783],"Quezon Hill, Upper":[16.425,120.5767],"Quirino Hill, East":[16.43,120.5883],"Quirino Hill, Lower":[16.4283,120.59],"Quirino Hill, Middle":[16.43,120.59],"Quirino Hill, West":[16.43,120.5867],"Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)":[16.4225,120.5933],"Rizal Monument Area":[16.4131,120.5931],"Rock Quarry, Lower":[16.4083,120.5883],"Rock Quarry, Middle":[16.4094,120.5867],"Rock Quarry, Upper":[16.4106,120.585],"Salud Mitra":[16.4167,120.5983],"San Antonio Village":[16.4167,120.6083],"San Luis Village":[16.3917,120.5833],"San Roque Village":[16.395,120.575],"San Vicente":[16.3917,120.5917],"Sanitary Camp, North":[16.4367,120.6028],"Sanitary Camp, South":[16.435,120.6028],"Santa Escolastica":[16.4044,120.6017],"Santo Rosario":[16.4161,120.5833],"Santo Tomas Proper":[16.37,120.56],"Santo Tomas School Area":[16.375,120.565],"Scout Barrio":[16.3992,120.6133],"Session Road Area":[16.4125,120.5964],"Slaughter House Area (Santo Ni\xF1o Slaughter)":[16.4267,120.5942],"SLU-SVP Housing Village":[16.4022,120.59],"South Drive":[16.4139,120.6139],"Teodora Alonzo":[16.4117,120.59],Trancoville:[16.4222,120.6028],"Upper General Luna":[16.415,120.6014],"Victoria Village":[16.4172,120.5811],"Websters Subdivision":[16.4178,120.585]};incidentsLayer=Fn.layerGroup();eventListenerBound=!1;allReports=[];reportsSubscription;activeFilter="all";ngOnInit(){setTimeout(()=>{this.initMap(),this.loadApprovedReports()},100),this.eventListenerBound||(window.addEventListener("viewIncidentDetail",(e=>{this.viewReportDetail(e.detail)})),this.eventListenerBound=!0)}setFilter(e){this.activeFilter=e,this.displayFilteredMarkers(),setTimeout(()=>{this.zoomToFilteredMarkers()},100)}onSearchInput(e){if(this.searchQuery=e,e.trim().length===0){this.locationSuggestions=[],this.showSuggestions=!1;return}this.locationSearchService.searchLocations(e).subscribe(t=>{this.locationSuggestions=t,this.showSuggestions=t.length>0})}selectLocation(e){if(!this.isLocationInBaguio(e.coordinates)){this.showNotification("\u26A0\uFE0F Location is outside Baguio City bounds. Please select a location within Baguio.","error");return}this.selectedSearchLocation=e,this.searchQuery=e.name,this.showSuggestions=!1,this.searchMarker&&this.map.removeLayer(this.searchMarker);let t=Fn.divIcon({className:"search-marker-icon",html:`<div style="
        width: 32px; 
        height: 32px; 
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%; 
        border: 3px solid white;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.6);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
      ">
        \u{1F4CD}
      </div>`,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});this.searchMarker=Fn.marker(e.coordinates,{icon:t});let i=`
      <div style="padding: 10px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
        <h4 style="margin: 0 0 8px 0; color: #333;">${e.name}</h4>
        <p style="margin: 0; font-size: 12px; color: #666;">
          <strong>Type:</strong> ${e.type==="barangay"?"Barangay":"Street/Landmark"}
        </p>
        <p style="margin: 8px 0 0 0; font-size: 11px; color: #888;">
          Lat: ${e.coordinates[0].toFixed(4)}, Lng: ${e.coordinates[1].toFixed(4)}
        </p>
      </div>
    `;this.searchMarker.bindPopup(i).openPopup(),this.map.addLayer(this.searchMarker),this.map.setView(e.coordinates,15,{animate:!0,duration:.5})}saveSelectedLocation(){if(!this.selectedSearchLocation){this.showNotification("No location selected","error");return}if(!this.isLocationInBaguio(this.selectedSearchLocation.coordinates)){this.showNotification("\u26A0\uFE0F Cannot save: Location is outside Baguio City. Please select a location within Baguio.","error");return}let e={barangay:this.selectedSearchLocation.barangay,street:this.selectedSearchLocation.name,latitude:this.selectedSearchLocation.coordinates[0],longitude:this.selectedSearchLocation.coordinates[1],type:this.selectedSearchLocation.type},t=new CustomEvent("locationSelected",{detail:e});window.dispatchEvent(t),this.showNotification(`\u2713 Location "${this.selectedSearchLocation.name}" saved successfully!`,"success")}isLocationInBaguio(e){let[t,i]=e,r=this.BAGUIO_BOUNDS,[o,a]=r[0],[l,u]=r[1];return t>=o&&t<=l&&i>=a&&i<=u}showNotification(e,t="error"){this.notificationMessage=e,this.notificationType=t,this.notificationTimeout&&clearTimeout(this.notificationTimeout),this.notificationTimeout=setTimeout(()=>{this.notificationMessage=""},5e3)}clearSearch(){this.searchQuery="",this.locationSuggestions=[],this.showSuggestions=!1,this.selectedSearchLocation=null,this.searchMarker&&(this.map.removeLayer(this.searchMarker),this.searchMarker=null)}searchLocation(){this.locationSuggestions.length>0?this.selectLocation(this.locationSuggestions[0]):this.searchQuery.trim().length===0?this.showNotification("Please enter a location to search","warning"):this.showNotification("No locations found. Try searching by barangay or street name.","warning")}ngOnDestroy(){this.animationService.destroyScrollObserver(),this.map&&this.map.remove(),this.reportsSubscription&&this.reportsSubscription.unsubscribe()}initMap(){this.map||(this.map=Fn.map("mountainSentinelMap",{center:this.BAGUIO_COORDS,zoom:13,maxBounds:this.BAGUIO_BOUNDS,maxBoundsViscosity:.5}),Fn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:12,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.incidentsLayer.addTo(this.map),this.map.fitBounds(this.BAGUIO_BOUNDS))}loadApprovedReports(){this.reportsSubscription=this.reportService.getAllReports().pipe(ue(e=>{console.log("All reports:",e);let t=e.filter(i=>i.status==="approved");return console.log("Approved reports with location:",t.filter(i=>i.location)),t})).subscribe(e=>{this.allReports=e,this.displayFilteredMarkers(),this.activeFilter==="all"&&setTimeout(()=>this.zoomToFilteredMarkers(),300)})}displayFilteredMarkers(){this.incidentsLayer.clearLayers();let e=this.activeFilter==="all"?this.allReports:this.allReports.filter(r=>r.priority===this.activeFilter),t=e.filter(r=>r.location&&r.location.lat&&r.location.lng),i=e.filter(r=>!r.location||!r.location.lat||!r.location.lng);if(!(t.length===0&&i.length===0)&&(t.length>0&&this.createClusters(t).forEach(o=>{if(o.reports.length===1){let a=o.reports[0],l=a.priority||"low",u=[a.location.lat,a.location.lng],f=Fn.divIcon({className:"custom-marker-icon",html:`<div class="marker-pin marker-${l}" style="
              width: 35px; 
              height: 35px; 
              background-color: ${this.getPriorityColor(l)}; 
              border-radius: 50% 50% 50% 0; 
              transform: rotate(-45deg); 
              border: 3px solid white;
              box-shadow: 0 3px 8px rgba(0,0,0,0.4);
              position: relative;
              cursor: pointer;
            ">
              <div style="
                position: absolute;
                width: 16px;
                height: 16px;
                background-color: white;
                border-radius: 50%;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
              "></div>
            </div>`,iconSize:[35,35],iconAnchor:[17.5,35],popupAnchor:[0,-35]}),g=Fn.marker(u,{icon:f});this.addMarkerPopup(g,a),this.incidentsLayer.addLayer(g)}else{let a=o.center,l=Fn.divIcon({className:"cluster-icon",html:`<div class="cluster-pin" style="
              width: 45px; 
              height: 45px; 
              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
              border-radius: 50%; 
              border: 3px solid white;
              box-shadow: 0 4px 12px rgba(255, 107, 107, 0.5);
              position: relative;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              color: white;
              font-size: 18px;
              text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            ">
              ${o.reports.length}
            </div>`,iconSize:[45,45],iconAnchor:[22.5,45],popupAnchor:[0,-45]}),u=Fn.marker(a,{icon:l}),f=this.createClusterPopup(o);u.bindPopup(f,{maxWidth:380,className:"cluster-popup"}),u.on("click",()=>{u.openPopup()}),this.incidentsLayer.addLayer(u)}}),i.length>0)){let r={};i.forEach(o=>{let a=o.barangay||"Unknown Location";r[a]||(r[a]=[]),r[a].push(o)}),Object.entries(r).forEach(([o,a])=>{let l=this.getBarangayCentroid(o);if(!l){console.warn(`No coordinates found for barangay: ${o}`);return}let u=a[0]?.priority||"low";if(a.length===1){let f=a[0],g=Fn.divIcon({className:"fallback-marker-icon",html:`<div class="marker-pin marker-fallback" style="
              width: 35px; 
              height: 35px; 
              background-color: #999; 
              border-radius: 50% 50% 50% 0; 
              transform: rotate(-45deg); 
              border: 3px solid white;
              box-shadow: 0 3px 8px rgba(0,0,0,0.2);
              position: relative;
              cursor: pointer;
              opacity: 0.7;
            ">
              <div style="
                position: absolute;
                width: 16px;
                height: 16px;
                background-color: white;
                border-radius: 50%;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
              "></div>
            </div>`,iconSize:[35,35],iconAnchor:[17.5,35],popupAnchor:[0,-35]}),b=Fn.marker(l,{icon:g});this.addMarkerPopup(b,f),this.incidentsLayer.addLayer(b)}else{let f=Fn.divIcon({className:"barangay-cluster-icon",html:`<div class="barangay-cluster-pin" style="
              width: 45px; 
              height: 45px; 
              background: linear-gradient(135deg, #9370DB 0%, #6A5ACD 100%);
              border-radius: 50%; 
              border: 3px solid white;
              box-shadow: 0 4px 12px rgba(147, 112, 219, 0.5);
              position: relative;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              color: white;
              font-size: 18px;
              text-shadow: 0 1px 2px rgba(0,0,0,0.3);
              opacity: 0.8;
            ">
              ${a.length}+
            </div>`,iconSize:[45,45],iconAnchor:[22.5,45],popupAnchor:[0,-45]}),g=Fn.marker(l,{icon:f}),b=`
            <div style="padding: 12px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
              <h3 style="margin: 0 0 12px 0; color: #333; font-size: 14px; border-bottom: 2px solid #9370DB; padding-bottom: 8px;">
                ${o} (${a.length} reports without GPS)
              </h3>
              <div style="max-height: 200px; overflow-y: auto; margin-bottom: 12px;">
                ${a.map(E=>`
                  <div style="padding: 8px; border-bottom: 1px solid #eee; cursor: pointer; font-size: 12px;"
                       onclick="window.dispatchEvent(new CustomEvent('viewIncidentDetail', { detail: '${E.id}' }))"
                       onmouseover="this.style.backgroundColor='#f5f5f5';" 
                       onmouseout="this.style.backgroundColor='transparent';">
                    <div style="font-weight: 600; color: ${this.getPriorityColor(E.priority||"low")};">
                      ${this.getPriorityIcon(E.priority||"low")} ${E.description.substring(0,40)}...
                    </div>
                  </div>
                `).join("")}
              </div>
              <small style="color: #666;">Note: These reports use barangay-based mapping (no GPS available)</small>
            </div>
          `;g.bindPopup(b,{maxWidth:380,className:"cluster-popup"}),g.on("click",()=>{g.openPopup()}),this.incidentsLayer.addLayer(g)}})}}createClusters(e){let t=[],i=new Set,r=this.map?this.map.getZoom():13,o=1;return r>=15?o=.25:r>=13?o=.5:o=1.5,o=Math.min(o,.05),e.forEach(l=>{if(i.has(l.id))return;let u={center:[l.location.lat,l.location.lng],reports:[l]};if(i.add(l.id),e.forEach(f=>{if(i.has(f.id)||f.id===l.id)return;this.haversineDistance(l.location.lat,l.location.lng,f.location.lat,f.location.lng)<=o&&(u.reports.push(f),i.add(f.id))}),u.reports.length>1){let f=u.reports.reduce((b,E)=>b+E.location.lat,0)/u.reports.length,g=u.reports.reduce((b,E)=>b+E.location.lng,0)/u.reports.length;u.center=[f,g]}t.push(u)}),t}getBarangayCentroid(e){if(!e)return null;let t=e.trim();if(this.BARANGAY_CENTROIDS[t])return this.BARANGAY_CENTROIDS[t];let i=Object.entries(this.BARANGAY_CENTROIDS).find(([o])=>o.toLowerCase()===t.toLowerCase());if(i)return i[1];let r=Object.entries(this.BARANGAY_CENTROIDS).find(([o])=>o.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(o.toLowerCase()));return r?r[1]:null}haversineDistance(e,t,i,r){let a=(i-e)*Math.PI/180,l=(r-t)*Math.PI/180,u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}createClusterPopup(e){let t=e.reports.map((i,r)=>{let o=i.priority||"low",a=this.getPriorityColor(o),l=(i.description||"No description").substring(0,45),u=l.length>=45?"...":"";return`
      <div style="padding: 10px; border-bottom: 1px solid #eee; cursor: pointer;" 
           onclick="window.dispatchEvent(new CustomEvent('viewIncidentDetail', { detail: '${i.id}' }))"
           onmouseover="this.style.backgroundColor='#f5f5f5';" 
           onmouseout="this.style.backgroundColor='transparent';">
        <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 4px;">
          <div style="width: 8px; height: 8px; background: ${a}; border-radius: 50%; flex-shrink: 0;"></div>
          <strong style="font-size: 12px; color: #333; flex: 1; word-break: break-word;">${l}${u}</strong>
        </div>
        <small style="color: #666; font-size: 11px;">Location: ${i.barangay}</small>
      </div>
    `}).join("");return`
      <div style="padding: 12px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #fff; border-radius: 8px;">
        <h3 style="margin: 0 0 12px 0; color: #333; font-size: 14px; border-bottom: 2px solid #ff6b6b; padding-bottom: 8px; font-weight: 700;">
          Multiple Incidents (${e.reports.length})
        </h3>
        <div style="max-height: 300px; overflow-y: auto; margin-bottom: 10px;">
          ${t}
        </div>
        <button 
          onclick="console.log('View all incidents in cluster')"
          style="
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 700;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(255, 107, 107, 0.2);
          "
          onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(255, 107, 107, 0.3)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(255, 107, 107, 0.2)'"
        >
          View All Incidents
        </button>
      </div>
    `}addMarkerPopup(e,t){let i=t.priority||"low",r=this.getPriorityColor(i),o=i.charAt(0).toUpperCase()+i.slice(1),a=(t.description||"No description").substring(0,60),l=a.length>=60?"...":"",u=`
      <div style="padding: 12px; min-width: 280px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #fff; border-radius: 8px;">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px; padding-bottom: 10px; border-bottom: 2px solid ${r};">
          <div style="width: 12px; height: 12px; background: ${r}; border-radius: 50%;"></div>
          <h3 style="margin: 0; color: #333; font-size: 14px; font-weight: 700; flex: 1; word-break: break-word;">
            ${a}${l}
          </h3>
        </div>
        
        <div style="margin-bottom: 10px;">
          <div style="font-size: 12px; color: #555; margin-bottom: 8px; line-height: 1.5;">
            <strong>Location:</strong><br>
            <span style="color: #666; font-size: 11px;">
              ${t.street?t.street+"<br>":""}
              ${t.barangay||"N/A"}, ${t.city||"Baguio City"}
            </span>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px; padding: 8px; background: #f8f9fa; border-radius: 6px;">
          <div style="font-size: 11px;">
            <div style="color: #999; font-weight: 600; text-transform: uppercase; margin-bottom: 4px;">Status</div>
            <div style="color: #28a745; font-weight: 700;">Approved</div>
          </div>
          <div style="font-size: 11px;">
            <div style="color: #999; font-weight: 600; text-transform: uppercase; margin-bottom: 4px;">Priority</div>
            <div style="color: ${r}; font-weight: 700; text-transform: uppercase;">${o}</div>
          </div>
        </div>

        ${t.reporterName?`
          <div style="font-size: 11px; color: #666; margin-bottom: 8px; padding: 6px; background: #f0f0f0; border-radius: 4px;">
            <strong>Reported by:</strong> ${t.reporterName}
          </div>
        `:""}

        ${t.timestamp||t.createdAt?`
          <div style="font-size: 10px; color: #999; margin-bottom: 10px;">
            ${new Date(t.timestamp||t.createdAt).toLocaleDateString()} at ${new Date(t.timestamp||t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}
          </div>
        `:""}

        <button 
          onclick="window.dispatchEvent(new CustomEvent('viewIncidentDetail', { detail: '${t.id}' }))"
          style="
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,123,255,0.2);
          "
          onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,123,255,0.3)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,123,255,0.2)'"
        >
          View Full Report Details
        </button>
      </div>
    `;e.bindPopup(u,{maxWidth:350,className:"custom-popup"}),e.on("click",()=>{e.openPopup()})}zoomToFilteredMarkers(){let t=(this.activeFilter==="all"?this.allReports:this.allReports.filter(i=>i.priority===this.activeFilter)).filter(i=>i.location&&i.location.lat&&i.location.lng);if(t.length>0){let i=Fn.latLngBounds(t.map(r=>[r.location.lat,r.location.lng]));this.map.fitBounds(i,{padding:[80,80],maxZoom:16})}else this.map.fitBounds(this.BAGUIO_BOUNDS)}viewReportDetail(e){this.router.navigate(["/report-detail",e])}getPriorityColor(e){switch(e){case"high":return"#dc3545";case"medium":return"#ffc107";case"low":return"#28a745";default:return"#6c757d"}}getPriorityIcon(e){switch(e){case"high":return"[HIGH]";case"medium":return"[MED]";case"low":return"[LOW]";default:return"[--]"}}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-map"]],decls:16,vars:9,consts:[[1,"full-map-container","scroll-reveal","animate-on-load"],["class","location-notification",3,"notification-error","notification-success","notification-warning",4,"ngIf"],[1,"map-controls"],[1,"map-title"],[1,"filter-controls"],[1,"filter-btn",3,"click"],[1,"filter-btn","filter-high",3,"click"],[1,"filter-btn","filter-medium",3,"click"],[1,"filter-btn","filter-low",3,"click"],[1,"map-wrapper-fullscreen"],["id","mountainSentinelMap",1,"map-container"],[1,"location-notification"],[1,"notification-text"],[1,"notification-close",3,"click"]],template:function(t,i){t&1&&(_(0,"div",0),te(1,hK,5,7,"div",1),_(2,"div",2)(3,"h2",3),w(4,"Incident Map View"),v(),_(5,"div",4)(6,"button",5),X("click",function(){return i.setFilter("all")}),w(7," ALL INCIDENTS "),v(),_(8,"button",6),X("click",function(){return i.setFilter("high")}),w(9," HIGH PRIORITY "),v(),_(10,"button",7),X("click",function(){return i.setFilter("medium")}),w(11," MEDIUM PRIORITY "),v(),_(12,"button",8),X("click",function(){return i.setFilter("low")}),w(13," LOW PRIORITY "),v()()(),_(14,"div",9),oe(15,"div",10),v()()),t&2&&(C(),$("ngIf",i.notificationMessage),C(5),ke("active",i.activeFilter==="all"),C(2),ke("active",i.activeFilter==="high"),C(2),ke("active",i.activeFilter==="medium"),C(2),ke("active",i.activeFilter==="low"))},dependencies:[ht,Ut,gn],styles:['[_ngcontent-%COMP%]:root{--primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--accent-green: #51cf66;--sos-red: #ff6b6b;--light-gray: #f5f7fa;--shadow: 0 8px 24px rgba(0, 0, 0, .12);--soft-shadow: 0 4px 12px rgba(0, 0, 0, .08)}.location-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;padding:16px 20px;border-radius:8px;display:flex;align-items:center;gap:12px;background:#fff;border-left:4px solid #667eea;box-shadow:0 8px 24px #00000026;z-index:10000;max-width:400px;animation:_ngcontent-%COMP%_slideInRight .3s ease-out}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(400px)}to{opacity:1;transform:translate(0)}}.notification-error[_ngcontent-%COMP%]{border-left-color:#ff6b6b;background:#fff5f5}.notification-success[_ngcontent-%COMP%]{border-left-color:#51cf66;background:#f1fdf4}.notification-warning[_ngcontent-%COMP%]{border-left-color:#ffc107;background:#fffbf0}.notification-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.notification-text[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500;flex:1;line-height:1.4}.notification-close[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;color:#999;padding:0;margin-left:8px;transition:color .2s ease}.notification-close[_ngcontent-%COMP%]:hover{color:#333}@media (max-width: 600px){.location-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}}.selected-location-panel[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 8px);left:0;right:0;background:#fff;border:2px solid #667eea;border-radius:12px;padding:16px;box-shadow:0 8px 32px #667eea33;z-index:999;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.location-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.location-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding-bottom:12px;border-bottom:1px solid #f0f0f0}.location-pin[_ngcontent-%COMP%]{font-size:28px;flex-shrink:0}.location-info[_ngcontent-%COMP%]{flex:1;min-width:0}.location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333;margin-bottom:4px;word-break:break-word}.location-meta[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:capitalize}.location-coordinates[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:12px;background:#f8f9fa;border-radius:8px}.coord-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;font-size:13px}.coord-label[_ngcontent-%COMP%]{font-weight:600;color:#666;flex-shrink:0}.coord-value[_ngcontent-%COMP%]{font-family:Monaco,Courier New,monospace;color:#333;font-weight:500;word-break:break-all}.location-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:4px}.save-location-btn[_ngcontent-%COMP%], .cancel-location-btn[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;min-height:40px}.save-location-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea4d}.save-location-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #667eea66}.cancel-location-btn[_ngcontent-%COMP%]{background:#f0f0f0;color:#333}.cancel-location-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}.search-container[_ngcontent-%COMP%]{position:relative;min-width:300px;max-width:500px;order:-1;flex:1 1 auto;margin-right:30px}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]{max-width:400px;margin-right:20px}}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]{order:2;margin-right:0;width:100%;max-width:100%}}.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:8px 12px;gap:8px;transition:all .3s ease;min-height:44px}.search-bar[_ngcontent-%COMP%]:focus-within{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;background:#fafbfc}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;font-size:14px;padding:8px 4px;font-family:inherit;background:transparent;color:#333;min-width:0}.search-input[_ngcontent-%COMP%]::placeholder{color:#999}.search-button[_ngcontent-%COMP%], .clear-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:6px;padding:8px 14px;cursor:pointer;font-size:16px;font-weight:600;min-width:44px;min-height:28px;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.search-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.clear-button[_ngcontent-%COMP%]{background:#ccc;padding:6px 10px}.clear-button[_ngcontent-%COMP%]:hover{background:#999}.suggestions-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 4px);left:0;right:0;background:#fff;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 8px 24px #0000001f;max-height:400px;overflow-y:auto;z-index:1000;animation:_ngcontent-%COMP%_slideDown .2s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.suggestion-item[_ngcontent-%COMP%]{padding:12px 16px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid #f0f0f0}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-item[_ngcontent-%COMP%]:hover{background:#f8f9fa;padding-left:20px}.suggestion-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.suggestion-content[_ngcontent-%COMP%]{flex:1;min-width:0}.suggestion-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:4px}.suggestion-type[_ngcontent-%COMP%]{font-size:12px;color:#999;text-transform:capitalize}.suggestion-match-score[_ngcontent-%COMP%]{flex-shrink:0;color:#51cf66;font-weight:700;font-size:16px}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;border-radius:3px}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#999}.full-map-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 60px);width:100%;background:#f5f5f5}.map-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 30px;background:#fff;border-bottom:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014;flex-shrink:0;gap:20px;flex-wrap:wrap}@media (max-width: 1024px){.map-controls[_ngcontent-%COMP%]{flex-wrap:wrap;gap:15px}}@media (max-width: 768px){.map-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch;padding:15px 20px}}@media (max-width: 480px){.map-controls[_ngcontent-%COMP%]{padding:12px 15px;gap:12px}}.map-title[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:800;color:#1a1a1a;letter-spacing:-.5px;flex-shrink:0}@media (max-width: 768px){.map-title[_ngcontent-%COMP%]{font-size:20px;text-align:center;order:1;width:100%}}@media (max-width: 480px){.map-title[_ngcontent-%COMP%]{font-size:18px}}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}@media (max-width: 768px){.filter-controls[_ngcontent-%COMP%]{justify-content:center;gap:8px}}@media (max-width: 480px){.filter-controls[_ngcontent-%COMP%]{gap:6px}}.filter-btn[_ngcontent-%COMP%]{padding:12px 20px;border:2px solid #e0e0e0;background:#fff;border-radius:8px;font-size:13px;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);color:#666;min-height:44px;text-transform:uppercase;position:relative;overflow:hidden;animation:_ngcontent-%COMP%_popIn .4s cubic-bezier(.175,.885,.32,1.275) backwards}.filter-btn[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.filter-btn[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.filter-btn[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.filter-btn[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}@keyframes _ngcontent-%COMP%_popIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.filter-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,rgba(102,126,234,.2) 0%,transparent 70%);border-radius:50%;transform:translate(-50%,-50%);pointer-events:none}.filter-btn[_ngcontent-%COMP%]:hover:before{animation:_ngcontent-%COMP%_ripple .6s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_ripple{0%{width:0;height:0}to{width:300px;height:300px}}.filter-btn[_ngcontent-%COMP%]:hover{border-color:#667eea;color:#667eea;transform:translateY(-2px);box-shadow:0 8px 16px #667eea33}@media (max-width: 480px){.filter-btn[_ngcontent-%COMP%]{padding:8px 14px;font-size:12px;flex:1 1 calc(50% - 6px);min-width:0}}.filter-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 20px #0000001f;border-color:#667eea}.filter-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-color:#667eea;box-shadow:0 8px 20px #667eea4d}.filter-btn.filter-high.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);border-color:#ff6b6b;box-shadow:0 8px 20px #ff6b6b4d}.filter-btn.filter-medium.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa94d,#fd7e14);border-color:#ffa94d;color:#fff;box-shadow:0 8px 20px #ffa04d4d}.filter-btn.filter-low.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);border-color:#51cf66;box-shadow:0 8px 20px #51cf664d}@media (max-width: 768px){.map-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}.filter-controls[_ngcontent-%COMP%]{width:100%}.filter-btn[_ngcontent-%COMP%]{flex:1;min-width:calc(50% - 5px)}}.map-wrapper-fullscreen[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;overflow:hidden}.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{width:100%;height:100%;min-height:600px}@media (max-width: 768px){.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{min-height:400px}}@media (max-width: 480px){.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{min-height:350px}}.map-container[_ngcontent-%COMP%]{width:100%;height:100%;min-height:600px}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{min-height:400px}}.map-layout-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1.2fr;gap:30px;padding:30px;background:linear-gradient(135deg,#f5f7fa,#e9ecef);min-height:calc(100vh - 60px);max-width:1400px;margin:0 auto}@media (max-width: 1200px){.map-layout-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr;gap:20px;padding:20px}}@media (max-width: 992px){.map-layout-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}}@media (max-width: 768px){.map-layout-container[_ngcontent-%COMP%]{padding:15px;gap:15px}}@media (max-width: 480px){.map-layout-container[_ngcontent-%COMP%]{padding:10px;gap:12px}}.left-section[_ngcontent-%COMP%]   .emergency-sos[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f,#c92a2a);color:#fff;padding:40px 30px;border-radius:16px;text-align:center;box-shadow:0 16px 40px #ff6b6b4d,0 0 1px #fff3 inset;border:1px solid rgba(255,255,255,.15);display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;min-height:280px}.emergency-sos[_ngcontent-%COMP%]   .sos-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:15px;animation:_ngcontent-%COMP%_pulse 2s infinite}.emergency-sos[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;margin:0 0 8px;font-weight:800;letter-spacing:-.5px;line-height:1.2}.emergency-sos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin:0 0 20px;opacity:.95;font-weight:500}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]{background:#fff;color:#ff6b6b;border:none;padding:12px 32px;border-radius:8px;font-size:15px;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 8px 20px #00000040;text-transform:uppercase;letter-spacing:.3px}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 30px #0000004d;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px)}.middle-section[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;min-height:500px}.map-wrapper[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:12px;box-shadow:0 8px 24px #0000001f;z-index:1}.custom-marker-icon[_ngcontent-%COMP%]{background:none;border:none}.marker-pin[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s}.marker-pin[_ngcontent-%COMP%]:hover{transform:rotate(-45deg) scale(1.1)}.marker-high[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:rotate(-45deg) translateY(0)}50%{transform:rotate(-45deg) translateY(-5px)}}.leaflet-popup-content-wrapper[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 8px 24px #0003;border:1px solid rgba(0,0,0,.05)}.leaflet-popup-content[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.leaflet-popup-tip[_ngcontent-%COMP%]{box-shadow:0 8px 24px #0003}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#1a1a1a;font-weight:800;letter-spacing:-.3px}.right-section[_ngcontent-%COMP%]   .updates-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px;background:#fff;padding:20px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014;max-height:400px;overflow-y:auto}.updates-list[_ngcontent-%COMP%]   .update-item[_ngcontent-%COMP%]{display:flex;gap:14px;padding:14px;background-color:#f8f9fa;border-radius:8px;transition:all .3s cubic-bezier(.4,0,.2,1);align-items:flex-start;cursor:pointer;border:1px solid #e0e0e0}.updates-list[_ngcontent-%COMP%]   .update-item[_ngcontent-%COMP%]:hover{background-color:linear-gradient(135deg,rgba(102,126,234,.05) 0%,rgba(118,75,162,.05) 100%);transform:translateY(-2px);box-shadow:0 8px 20px #667eea26;border-color:#667eea}.update-item[_ngcontent-%COMP%]   .update-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0;margin-top:2px}.update-item[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]{flex:1}.update-content[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#222;margin-bottom:4px}.update-content[_ngcontent-%COMP%]   .update-description[_ngcontent-%COMP%]{margin:0 0 4px;font-size:12px;color:#666;line-height:1.4}.update-content[_ngcontent-%COMP%]   .update-reporter[_ngcontent-%COMP%]{margin:0 0 8px;font-size:11px;color:#888;font-style:italic}.update-content[_ngcontent-%COMP%]   .update-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;color:#fff;white-space:nowrap}.updates-list[_ngcontent-%COMP%]   .no-updates[_ngcontent-%COMP%]{padding:40px 20px;text-align:center;color:#999}.no-updates[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}']})};var ki=KM(lM());var fK=["mapContainer"];function pK(n,e){n&1&&oe(0,"div",22)}function gK(n,e){if(n&1){let t=ge();_(0,"div",27),X("click",function(){let r=j(t).$implicit,o=T(2);return z(o.selectSuggestion(r))}),ie(),_(1,"svg",28),oe(2,"path",29),v(),pe(),_(3,"div",30)(4,"strong"),w(5),v(),_(6,"small"),w(7),v()()()}if(n&2){let t=e.$implicit;C(5),ae(t.name),C(2),ae(t.address)}}function mK(n,e){if(n&1){let t=ge();_(0,"div",23)(1,"div",24)(2,"span"),w(3,"Locations in Baguio City"),v(),_(4,"button",25),X("click",function(){j(t);let r=T();return z(r.closeSuggestions())}),w(5," \u2715 "),v()(),te(6,gK,8,2,"div",26),v()}if(n&2){let t=T();C(6),$("ngForOf",t.searchSuggestions)}}function _K(n,e){n&1&&(_(0,"div",31),ie(),_(1,"svg",32),oe(2,"path",33),v(),pe(),_(3,"span"),w(4,"This location is outside Baguio City. Please select a location within Baguio City only."),v()())}function vK(n,e){if(n&1&&(_(0,"div",34),ie(),_(1,"svg",35),oe(2,"path",36)(3,"circle",37),v(),pe(),_(4,"span"),w(5),v()()),n&2){let t=T();C(5),ae(t.currentLocation.address)}}function yK(n,e){n&1&&(_(0,"div",38),ie(),_(1,"svg",15),oe(2,"path",16),v(),pe(),_(3,"span"),w(4,"Location saved!"),v()())}var Vd=class n{locationSelected=new an;defaultLocation={lat:16.4023,lng:120.5961};set barangayInput(e){e&&e!==this._lastBarangay&&(this._lastBarangay=e,this.geocodeBarangayToMap(e))}set streetInput(e){e&&(this._lastStreet=e)}_lastBarangay="";_lastStreet="";mapContainer;currentLocation=J({},this.defaultLocation);searchQuery="";searchSuggestions=[];showSuggestions=!1;isLoading=!1;outsideBaguioWarning=!1;locationConfirmed=!1;map;marker;destroy$=new Qt;searchSubject$=new Qt;baguioBounds=ki.latLngBounds(ki.latLng(16.35,120.52),ki.latLng(16.48,120.66));markerIcon=ki.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});nominatimUrl="https://nominatim.openstreetmap.org";ngOnInit(){this.initializeMap(),this.setupSearch()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.map&&this.map.remove()}initializeMap(){this.map=ki.map(this.mapContainer.nativeElement,{maxBounds:this.baguioBounds,maxBoundsViscosity:1,minZoom:12,maxZoom:19}).setView([this.currentLocation.lat,this.currentLocation.lng],14),ki.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors",maxZoom:19}).addTo(this.map),this.marker=ki.marker([this.currentLocation.lat,this.currentLocation.lng],{draggable:!0,icon:this.markerIcon}).addTo(this.map),this.marker.bindPopup("Drag me or click on the map").openPopup(),this.map.on("click",e=>{this.baguioBounds.contains(e.latlng)?(this.outsideBaguioWarning=!1,this.updateMarkerPosition(e.latlng.lat,e.latlng.lng)):(this.outsideBaguioWarning=!0,setTimeout(()=>{this.outsideBaguioWarning=!1},4e3))}),this.marker.on("dragend",()=>{let e=this.marker.getLatLng();this.baguioBounds.contains(e)?(this.outsideBaguioWarning=!1,this.updateMarkerPosition(e.lat,e.lng)):(this.marker.setLatLng([this.currentLocation.lat,this.currentLocation.lng]),this.outsideBaguioWarning=!0,setTimeout(()=>{this.outsideBaguioWarning=!1},4e3))})}updateMarkerPosition(e,t){this.currentLocation.lat=e,this.currentLocation.lng=t,this.marker.setLatLng([e,t]),this.marker.setPopupContent("Location selected"),this.reverseGeocode(e,t),this.locationSelected.emit(J({},this.currentLocation))}setupSearch(){this.searchSubject$.pipe(Oh(500),lm(),mu(this.destroy$)).subscribe(e=>{e.length>2?this.performSearch(e):this.searchSuggestions=[]})}onSearchInput(){this.searchSubject$.next(this.searchQuery),this.searchQuery.length>0?this.showSuggestions=!0:(this.showSuggestions=!1,this.searchSuggestions=[])}onSearchFocus(){this.searchSuggestions.length>0&&(this.showSuggestions=!0)}closeSuggestions(){this.showSuggestions=!1}performSearch(e){this.isLoading=!0;let t=e.toLowerCase().trim(),r=Object.entries(Gi).filter(([a])=>a.toLowerCase().includes(t)).slice(0,5).map(([a,l])=>({name:a,address:`${a}, Baguio City, Benguet, Philippines`,lat:l[0],lng:l[1]}));if(r.length>0){this.searchSuggestions=r,this.showSuggestions=!0,this.isLoading=!1;return}let o=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e+", Baguio City")}&limit=5&viewbox=120.52,16.48,120.66,16.35&bounded=1`;fetch(o).then(a=>a.json()).then(a=>{a&&a.length>0?(this.searchSuggestions=a.map(l=>({name:l.display_name.split(",")[0],address:l.display_name,lat:parseFloat(l.lat),lng:parseFloat(l.lon)})),this.showSuggestions=!0,this.isLoading=!1):this.performGlobalSearch(e)}).catch(()=>{this.isLoading=!1,this.searchSuggestions=[]})}performGlobalSearch(e){let t=`${this.nominatimUrl}/search?format=json&q=${encodeURIComponent(e)}&limit=3&addressdetails=1`;fetch(t).then(i=>i.json()).then(i=>{this.searchSuggestions=i.slice(0,3).map(r=>({name:r.display_name.split(",")[0],address:r.display_name,lat:parseFloat(r.lat),lng:parseFloat(r.lon)})),this.showSuggestions=!0,this.isLoading=!1}).catch(()=>{this.isLoading=!1,this.searchSuggestions=[]})}searchLocation(){this.searchQuery.length>0&&this.performSearch(this.searchQuery)}selectSuggestion(e){let t=ki.latLng(e.lat,e.lng);if(!this.baguioBounds.contains(t)){this.outsideBaguioWarning=!0,this.showSuggestions=!1,this.searchQuery="",setTimeout(()=>{this.outsideBaguioWarning=!1},4e3);return}this.currentLocation={lat:e.lat,lng:e.lng,address:e.address},this.showSuggestions=!1,this.searchQuery="",this.outsideBaguioWarning=!1,this.marker.setLatLng([e.lat,e.lng]),this.map.flyTo([e.lat,e.lng],16,{duration:.8,easeLinearity:.25}),this.locationSelected.emit(J({},this.currentLocation))}reverseGeocode(e,t){let i=`${this.nominatimUrl}/reverse?format=json&lat=${e}&lon=${t}`;fetch(i).then(r=>r.json()).then(r=>{this.currentLocation.address=r.address?r.display_name:void 0,this.locationSelected.emit(J({},this.currentLocation))}).catch(()=>{this.locationSelected.emit(J({},this.currentLocation))})}onCoordinateChange(){this.isLocationValid()&&this.updateMarkerPosition(this.currentLocation.lat,this.currentLocation.lng)}isLocationValid(){return this.currentLocation.lat>=-90&&this.currentLocation.lat<=90&&this.currentLocation.lng>=-180&&this.currentLocation.lng<=180}confirmLocation(){if(!this.isLocationValid())return;let e=ki.latLng(this.currentLocation.lat,this.currentLocation.lng);if(!this.baguioBounds.contains(e)){this.outsideBaguioWarning=!0,this.locationConfirmed=!1,setTimeout(()=>{this.outsideBaguioWarning=!1},4e3);return}this.locationConfirmed=!0,this.marker.setPopupContent("Location saved"),this.marker.openPopup(),this.locationSelected.emit(J({},this.currentLocation)),setTimeout(()=>{this.marker.setPopupContent("Location selected")},3e3)}geocodeBarangayToMap(e){if(!this.map||!this.marker)return;let t=Gi,i=e.trim().toLowerCase(),r=Object.entries(t).find(([o])=>o.toLowerCase()===i||o.toLowerCase().includes(i)||i.includes(o.toLowerCase().split("(")[0].trim()));if(r){let[o,a]=r,l=a[0],u=a[1];this.currentLocation.lat=l,this.currentLocation.lng=u,this.currentLocation.address=`${o}, Baguio City, Philippines`,this.marker.setLatLng([l,u]),this.map.flyTo([l,u],15,{duration:.8})}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-interactive-location-picker"]],viewQuery:function(t,i){if(t&1&&Jx(fK,7),t&2){let r;hf(r=ff())&&(i.mapContainer=r.first)}},inputs:{defaultLocation:"defaultLocation",barangayInput:"barangayInput",streetInput:"streetInput"},outputs:{locationSelected:"locationSelected"},decls:26,vars:12,consts:[["mapContainer",""],[1,"location-picker-container"],[1,"search-bar-wrapper"],["type","text","placeholder","Search for streets, barangays, or landmarks in Baguio City...",1,"location-search-input",3,"ngModelChange","input","focus","ngModel","disabled"],["title","Search location in Baguio City",1,"search-btn",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["class","spinner",4,"ngIf"],[1,"search-help-text"],["class","search-suggestions",4,"ngIf"],[1,"map-wrapper"],["class","outside-baguio-warning",4,"ngIf"],[1,"map-container"],[1,"pin-instruction"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"],[1,"address-section"],["class","address-display",4,"ngIf"],["class","location-confirmed-message",4,"ngIf"],["type","button","title","Save this location to the form fields",1,"confirm-location-btn",3,"click","disabled"],["points","20 6 9 17 4 12"],[1,"spinner"],[1,"search-suggestions"],[1,"suggestions-header"],["title","Close suggestions",1,"close-suggestions",3,"click"],["class","suggestion-item",3,"click",4,"ngFor","ngForOf"],[1,"suggestion-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"],[1,"suggestion-content"],[1,"outside-baguio-warning"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],[1,"address-display"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"location-confirmed-message"]],template:function(t,i){if(t&1){let r=ge();_(0,"div",1)(1,"div",2)(2,"input",3),yt("ngModelChange",function(a){return j(r),wt(i.searchQuery,a)||(i.searchQuery=a),z(a)}),X("input",function(){return j(r),z(i.onSearchInput())})("focus",function(){return j(r),z(i.onSearchFocus())}),v(),_(3,"button",4),X("click",function(){return j(r),z(i.searchLocation())}),ie(),_(4,"svg",5),oe(5,"circle",6)(6,"path",7),v()(),te(7,pK,1,0,"div",8),v(),pe(),_(8,"p",9),w(9," Type to search and select from suggestions below, or click on the map "),v(),te(10,mK,7,1,"div",10),_(11,"div",11),te(12,_K,5,0,"div",12),oe(13,"div",13,0),_(15,"div",14),ie(),_(16,"svg",15),oe(17,"path",16),v(),w(18," Click to drop pin \u2022 Drag to move "),v()(),pe(),_(19,"div",17),te(20,vK,6,1,"div",18)(21,yK,5,0,"div",19),_(22,"button",20),X("click",function(){return j(r),z(i.confirmLocation())}),ie(),_(23,"svg",5),oe(24,"polyline",21),v(),w(25),v()()()}t&2&&(C(2),vt("ngModel",i.searchQuery),$("disabled",i.isLoading),C(),$("disabled",!i.searchQuery||i.isLoading),C(4),$("ngIf",i.isLoading),C(3),$("ngIf",i.searchSuggestions.length>0&&i.showSuggestions),C(2),$("ngIf",i.outsideBaguioWarning),C(8),$("ngIf",i.currentLocation.address),C(),$("ngIf",i.locationConfirmed),C(),ke("confirmed",i.locationConfirmed),$("disabled",!i.isLocationValid()),C(3),be(" ",i.locationConfirmed?"Location Saved":"Save Location to Form"," "))},dependencies:[ht,Dn,Ut,gn,yi,$i,Ai],styles:[".location-picker-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;background:#fff;padding:20px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 2px 8px #0000001a}.search-bar-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;gap:8px;align-items:center;flex-wrap:wrap}.location-search-input[_ngcontent-%COMP%]{flex:1;min-width:200px;padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;font-size:.95rem;background:#f8f9fa;color:#1a1a1a;transition:all .3s ease;font-family:inherit}.location-search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 3px #667eea1a}.location-search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.search-btn[_ngcontent-%COMP%]{padding:10px 14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:transform .2s ease;display:flex;align-items:center;justify-content:center}.search-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.search-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.search-help-text[_ngcontent-%COMP%]{font-size:.85rem;color:#666;margin:-8px 0 0;padding:0 4px}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #e0e0e0;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.search-suggestions[_ngcontent-%COMP%]{position:relative;width:100%;max-height:250px;overflow-y:auto;background:#fff;border:2px solid #667eea;border-radius:10px;box-shadow:0 8px 24px #0003;z-index:1000;margin-bottom:8px}.suggestions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-weight:600;font-size:.9rem;border-radius:8px 8px 0 0;position:sticky;top:0;z-index:10}.close-suggestions[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;cursor:pointer;padding:4px 8px;border-radius:4px;font-size:1rem;line-height:1;transition:background .2s ease}.close-suggestions[_ngcontent-%COMP%]:hover{background:#ffffff4d}.suggestion-item[_ngcontent-%COMP%]{padding:12px 14px;cursor:pointer;border-bottom:1px solid #f0f0f0;transition:background .2s ease;display:flex;align-items:flex-start;gap:10px}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-item[_ngcontent-%COMP%]:hover{background:#f5f7ff}.suggestion-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#667eea;flex-shrink:0;margin-top:2px}.suggestion-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.suggestion-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.95rem;color:#1a1a1a}.suggestion-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;color:#999}.map-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:8px}.outside-baguio-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 16px;background:linear-gradient(135deg,#fff3cd,#ffeeba);border:2px solid #ffc107;border-radius:10px;color:#856404;font-size:.9rem;font-weight:500;animation:_ngcontent-%COMP%_warningSlideIn .3s ease-out;box-shadow:0 4px 12px #ffc1074d}.outside-baguio-warning[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#e67e22;flex-shrink:0}@keyframes _ngcontent-%COMP%_warningSlideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.map-container[_ngcontent-%COMP%]{width:100%;height:320px;border-radius:8px;border:2px solid #1a2a5e;overflow:hidden;background:#f0f0f0;cursor:crosshair}.map-container[_ngcontent-%COMP%]   .leaflet-marker-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.map-container[_ngcontent-%COMP%]   .leaflet-popup-content-wrapper[_ngcontent-%COMP%]{background:#1a2a5e;color:#fff;border-radius:8px;font-weight:600}.map-container[_ngcontent-%COMP%]   .leaflet-popup-tip[_ngcontent-%COMP%]{background:#1a2a5e}.pin-instruction[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.85rem;color:#28a745;padding:10px 14px;background:#28a7451a;border-radius:8px;border:1px solid rgba(40,167,69,.2);font-weight:500}.address-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.address-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 14px;background:linear-gradient(135deg,#f0f8ff,#e8f4fd);border:1px solid #d0e8ff;border-radius:8px;font-size:.95rem;color:#1a2a5e;font-weight:500}.address-display[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;flex-shrink:0}.location-confirmed-message[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;background:#d4edda;border:1px solid #28a745;border-radius:6px;color:#155724;font-size:.85rem;font-weight:600;animation:_ngcontent-%COMP%_confirmSlideIn .3s ease-out}.location-confirmed-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#28a745;flex-shrink:0;width:16px;height:16px}@keyframes _ngcontent-%COMP%_confirmSlideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.confirm-location-btn[_ngcontent-%COMP%]{padding:14px 24px;background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 2px 8px #28a74533}.confirm-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #28a74566}.confirm-location-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.confirm-location-btn.confirmed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#155724,#28a745);box-shadow:0 2px 8px #1557244d}.confirm-location-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}@media (max-width: 768px){.location-picker-container[_ngcontent-%COMP%]{padding:16px;gap:14px}.search-bar-wrapper[_ngcontent-%COMP%]{flex-direction:row}.location-search-input[_ngcontent-%COMP%]{min-width:0;padding:10px 12px;font-size:.9rem}.search-btn[_ngcontent-%COMP%]{padding:10px 12px}.search-suggestions[_ngcontent-%COMP%]{max-height:200px}.suggestion-item[_ngcontent-%COMP%]{padding:10px}.map-container[_ngcontent-%COMP%]{height:280px}}@media (max-width: 480px){.location-picker-container[_ngcontent-%COMP%]{padding:12px;gap:12px}.location-search-input[_ngcontent-%COMP%]{padding:10px;font-size:.85rem}.search-btn[_ngcontent-%COMP%]{padding:8px 10px}.map-container[_ngcontent-%COMP%]{height:220px}.suggestion-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.85rem}.suggestion-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}.pin-instruction[_ngcontent-%COMP%]{font-size:.8rem;padding:8px 12px}.address-display[_ngcontent-%COMP%]{font-size:.85rem;padding:10px 12px}}"]})};var bK=()=>({lat:16.4023,lng:120.5961});function xK(n,e){if(n&1&&(_(0,"div",53),w(1),v()),n&2){let t=T(2);C(),be(" ",t.successMessage," ")}}function wK(n,e){if(n&1&&(_(0,"div",54),w(1),v()),n&2){let t=T(2);C(),be(" ",t.errorMessage," ")}}function CK(n,e){if(n&1&&(_(0,"span",55),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.fullName," ")}}function EK(n,e){if(n&1&&(_(0,"span",56),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.email," ")}}function IK(n,e){if(n&1&&(_(0,"span",57),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.description," ")}}function SK(n,e){if(n&1){let t=ge();_(0,"div",58)(1,"app-interactive-location-picker",59),X("locationSelected",function(r){j(t);let o=T(2);return z(o.onMapLocationSelected(r))}),v()()}if(n&2){let t=T(2);C(),$("defaultLocation",t.location||Lu(3,bK))("barangayInput",t.barangay)("streetInput",t.street)}}function MK(n,e){if(n&1&&(_(0,"span",60),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.location," ")}}function PK(n,e){if(n&1){let t=ge();_(0,"li",64),X("click",function(){let r=j(t).$implicit,o=T(3);return z(o.selectBarangay(r))}),w(1),v()}if(n&2){let t=e.$implicit;C(),be(" ",t," ")}}function TK(n,e){if(n&1&&(_(0,"li",65),w(1),v()),n&2){let t=T(3);C(),be(" + ",t.filteredBarangays.length-8," more results ")}}function OK(n,e){if(n&1){let t=ge();_(0,"ul",61),X("mousedown",function(r){return j(t),z(r.preventDefault())}),te(1,PK,2,1,"li",62)(2,TK,2,1,"li",63),v()}if(n&2){let t=T(2);C(),$("ngForOf",t.filteredBarangays.slice(0,8)),C(),$("ngIf",t.filteredBarangays.length>8)}}function DK(n,e){if(n&1&&(_(0,"span",66),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.barangay," ")}}function AK(n,e){if(n&1&&(_(0,"span",67),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.street," ")}}function kK(n,e){if(n&1&&(_(0,"div",71),oe(1,"img",72),v()),n&2){let t=T(3);C(),$("src",t.proofImageUrl,Kt)}}function RK(n,e){if(n&1&&(_(0,"div",68)(1,"p",69),w(2," Selected file: "),_(3,"strong"),w(4),v()(),te(5,kK,2,1,"div",70),v()),n&2){let t=T(2);C(4),ae(t.proofImageFileName),C(),$("ngIf",t.proofImageUrl)}}function NK(n,e){if(n&1){let t=ge();Xe(0),_(1,"form",6,1),X("ngSubmit",function(){j(t);let r=T();return z(r.onSubmit())}),te(3,xK,2,1,"div",7)(4,wK,2,1,"div",8),_(5,"fieldset",9)(6,"legend",10),w(7,"Reporter Information"),v(),_(8,"div",11)(9,"label",12),w(10,"Full Name *"),v(),_(11,"input",13),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.fullName,r)||(o.fullName=r),z(r)}),v(),te(12,CK,2,1,"span",14),v(),_(13,"div",11)(14,"label",15),w(15,"Email Address *"),v(),_(16,"input",16),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.email,r)||(o.email=r),z(r)}),v(),te(17,EK,2,1,"span",17),v()(),_(18,"fieldset",9)(19,"legend",10),w(20,"Safety Alert Details"),v(),_(21,"div",11)(22,"label",18),w(23,"Describe the Safety Concern *"),v(),_(24,"textarea",19),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.description,r)||(o.description=r),z(r)}),X("blur",function(){j(t);let r=T();return z(r.saveFormProgress())}),v(),te(25,IK,2,1,"span",20),v(),_(26,"div",11)(27,"label",21),w(28,"Priority Level *"),v(),_(29,"select",22),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.priority,r)||(o.priority=r),z(r)}),X("blur",function(){j(t);let r=T();return z(r.saveFormProgress())}),_(30,"option",23),w(31,"Info - General information, no immediate concern"),v(),_(32,"option",24),w(33,"Alert - Moderate concern, needs attention"),v(),_(34,"option",25),w(35,"Urgent - Requires immediate action"),v()()()(),_(36,"fieldset",9)(37,"legend",10),w(38,"Location Information"),v(),_(39,"p",26),w(40,"Baguio City, Philippines"),v(),_(41,"div",27)(42,"label",28),w(43,"Pin Location on Map"),v(),_(44,"p",29),w(45," Click on the map to mark the exact incident location. The address fields below will update automatically. "),v(),_(46,"button",30),X("click",function(){j(t);let r=T();return z(r.toggleInteractiveMap())}),ie(),_(47,"svg",31),oe(48,"path",32)(49,"circle",33),v(),w(50),v(),te(51,SK,2,4,"div",34)(52,MK,2,1,"span",35),v(),pe(),_(53,"div",11)(54,"label",36),w(55,"City"),v(),_(56,"input",37),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.city,r)||(o.city=r),z(r)}),v()(),_(57,"div",38)(58,"label",39),w(59,"Barangay *"),v(),_(60,"input",40),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.barangay,r)||(o.barangay=r),z(r)}),X("input",function(r){j(t);let o=T();return z(o.filterBarangays(r))})("focus",function(){j(t);let r=T();return z(r.showBarangaySuggestions=!0)})("blur",function(){j(t);let r=T();return r.onBarangayBlur(),z(r.hideBarangaySuggestions())}),v(),te(61,OK,3,2,"ul",41)(62,DK,2,1,"span",42),v(),_(63,"div",11)(64,"label",43),w(65,"Street / Purok *"),v(),_(66,"input",44),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.street,r)||(o.street=r),z(r)}),X("blur",function(){j(t);let r=T();return z(r.saveFormProgress())})("input",function(){j(t);let r=T();return z(r.onStreetChange())}),v(),te(67,AK,2,1,"span",45),v(),_(68,"div",11)(69,"label",46),w(70,"Landmark or Nearby Location (Optional)"),v(),_(71,"input",47),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.landmark,r)||(o.landmark=r),z(r)}),X("blur",function(){j(t);let r=T();return z(r.saveFormProgress())}),v()()(),_(72,"fieldset",9)(73,"legend",10),w(74,"Evidence"),v(),_(75,"div",11)(76,"label",48),w(77,"Photo of Incident (Optional)"),v(),_(78,"input",49),X("change",function(r){j(t);let o=T();return z(o.onProofImageSelected(r))}),v(),_(79,"p",50),w(80," Upload a clear photo of the incident. Maximum 5MB. This helps with verification. "),v(),te(81,RK,6,2,"div",51),v()(),_(82,"button",52),w(83),v()(),et()}if(n&2){let t=T();C(3),$("ngIf",t.successMessage),C(),$("ngIf",t.errorMessage),C(7),vt("ngModel",t.fullName),St("aria-invalid",t.validationErrors.fullName?"true":null)("aria-describedby",t.validationErrors.fullName?"fullName-error":null),C(),$("ngIf",t.validationErrors.fullName),C(4),vt("ngModel",t.email),St("aria-invalid",t.validationErrors.email?"true":null)("aria-describedby",t.validationErrors.email?"email-error":null),C(),$("ngIf",t.validationErrors.email),C(7),vt("ngModel",t.description),St("aria-invalid",t.validationErrors.description?"true":null)("aria-describedby",t.validationErrors.description?"description-error":null),C(),$("ngIf",t.validationErrors.description),C(4),vt("ngModel",t.priority),C(21),be(" ",t.showInteractiveMap?"Hide Location Map":"Select Location on Map"," "),C(),$("ngIf",t.showInteractiveMap),C(),$("ngIf",t.validationErrors.location),C(4),vt("ngModel",t.city),C(4),vt("ngModel",t.barangay),St("aria-controls",t.showBarangaySuggestions&&t.filteredBarangays.length>0?"barangay-suggestions":null)("aria-invalid",t.validationErrors.barangay?"true":null)("aria-describedby",t.validationErrors.barangay?"barangay-error":null),C(),$("ngIf",t.showBarangaySuggestions&&t.filteredBarangays.length>0),C(),$("ngIf",t.validationErrors.barangay),C(4),vt("ngModel",t.street),St("aria-invalid",t.validationErrors.street?"true":null)("aria-describedby",t.validationErrors.street?"street-error":null),C(),$("ngIf",t.validationErrors.street),C(4),vt("ngModel",t.landmark),C(10),$("ngIf",t.proofImageFileName),C(),$("disabled",t.isLoading),St("aria-busy",t.isLoading),C(),be(" ",t.isLoading?"Submitting Alert...":"Submit Safety Alert"," ")}}function LK(n,e){n&1&&(_(0,"div",73)(1,"div",74)(2,"h3"),w(3,"Authentication Required"),v(),_(4,"p",75),w(5," You need to create an account or sign in before you can submit a safety alert. "),v(),_(6,"p",76),w(7," Creating an account helps us verify reports and keep the community safe. "),v(),_(8,"div",77)(9,"a",78),w(10,"Sign In"),v(),_(11,"span",79),w(12,"or"),v(),_(13,"a",80),w(14,"Sign Up"),v()()()())}var wy=class n{reportService=F(pn);authService=F(ln);router=F(Et);animationService=F(Sr);toastService=F(Jn);description="";street="";barangay="";landmark="";city="Baguio City";priority="medium";fullName="";email="";idImageUrl=null;idImageFile=null;idImageFileName=null;proofImageUrl=null;proofImageFile=null;proofImageFileName=null;location=null;showInteractiveMap=!1;errorMessage=null;successMessage=null;isLoading=!1;validationErrors={};baguioBarangays=["A. Bonifacio-Caguioa-Rimando (ABCR)","Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)","Alfonso Tabora","Ambiong","Andres Bonifacio (Lower Bokawkan)","Apugan-Loakan","Asin Road","Atok Trail","Aurora Hill Proper (Malvar-Sgt. Floresca)","Aurora Hill, North Central","Aurora Hill, South Central","Bagong Lipunan (Market Area)","Baguio Dairy Farm","Bakakeng Central","Bakakeng North","Bal-Marcoville (Marcoville)","Balsigan","Bayan Park East","Bayan Park Village","Bayan Park West (Bayan Park)","BGH Compound","Brookside","Brookspoint","Cabinet Hill-Teacher's Camp","Camdas Subdivision","Camp 7","Camp 8","Camp Allen","Campo Filipino","City Camp Central","City Camp Proper","Country Club Village","Cresencia Village","Dagisitan","Dagsian, Lower","Dagsian, Upper","Dizon Subdivision","Dominican Hill-Mirador","Dontogan","DPS Area","Engineers' Hill","Fairview Village","Ferdinand (Happy Homes-Campo Sioco)","Fort del Pilar","Gabriel Silang","General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)","General Luna, Lower","General Luna, Upper","Gibraltar","Greenwater Village","Guisad Central","Guisad Sorong","Happy Hollow","Happy Homes (Happy Homes-Lucban)","Harrison-Claudio Carantes","Hillside","Holy Ghost Extension","Holy Ghost Proper","Honeymoon (Honeymoon-Holy Ghost)","Imelda R. Marcos (La Salle)","Imelda Village","Irisan","Kabayanihan","Kagitingan","Kayang Extension","Kayang-Hilltop","Kias","Legarda-Burnham-Kisad","Liwanag-Loakan","Loakan Proper","Lopez Jaena","Lourdes Subdivision Extension","Lourdes Subdivision, Lower","Lourdes Subdivision, Proper","Lualhati","Lucnab","Magsaysay Private Road","Magsaysay, Lower","Magsaysay, Upper","Malcolm Square-Perfecto (Jose Abad Santos)","Manuel A. Roxas","Market Subdivision, Upper","Middle Quezon Hill Subdivision (Quezon Hill Middle)","Military Cut-off","Mines View Park","Modern Site, East","Modern Site, West","MRR-Queen of Peace","New Lucban","Outlook Drive","Pacdal","Padre Burgos","Padre Zamora","Palma-Urbano (Cari\xF1o-Palma)","Phil-Am","Pinget","Pinsao Pilot Project","Pinsao Proper","Poliwes","Pucsusan","Quezon Hill Proper","Quezon Hill, Upper","Quirino Hill, East","Quirino Hill, Lower","Quirino Hill, Middle","Quirino Hill, West","Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)","Rizal Monument Area","Rock Quarry, Lower","Rock Quarry, Middle","Rock Quarry, Upper","Salud Mitra","San Antonio Village","San Luis Village","San Roque Village","San Vicente","Sanitary Camp, North","Sanitary Camp, South","Santa Escolastica","Santo Rosario","Santo Tomas Proper","Santo Tomas School Area","Scout Barrio","Session Road Area","Slaughter House Area (Santo Ni\xF1o Slaughter)","SLU-SVP Housing Village","South Drive","Teodora Alonzo","Trancoville","Upper General Luna","Victoria Village","Websters Subdivision"];filteredBarangays=[...this.baguioBarangays];showBarangaySuggestions=!1;ngOnInit(){this.authService.currentUser$.subscribe(t=>{t&&(this.email=t.email||"",this.fullName=t.displayName||"")});let e=sessionStorage.getItem("reportFormData");if(e){let t=JSON.parse(e);this.description=t.description||"",this.street=t.street||"",this.barangay=t.barangay||"",this.landmark=t.landmark||"",this.priority=t.priority||"medium"}}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.showBarangaySuggestions=!0,!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.barangay=e,this.showBarangaySuggestions=!1,this.filteredBarangays=[...this.baguioBarangays],this.saveFormProgress()}onStreetChange(){this.saveFormProgress()}hideBarangaySuggestions(){setTimeout(()=>{this.showBarangaySuggestions=!1,this.saveFormProgress()},150)}onBarangayBlur(){return P(this,null,function*(){let e=(this.barangay||"").trim();if(e&&!this.location)try{let t=yield this.geocodeBarangay(e);t&&(this.location=t,this.saveFormProgress())}catch(t){console.warn("Failed to geocode barangay on blur: - report.ts",t)}})}onMapLocationSelected(e){this.location={lat:e.lat,lng:e.lng},this.getAddressFromCoordinates(e.lat,e.lng),this.saveFormProgress(),console.log("Location updated from map:",this.location)}toggleInteractiveMap(){this.showInteractiveMap=!this.showInteractiveMap}getAddressFromCoordinates(e,t){return P(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,a=o.road||o.street||o.neighbourhood||"",l=o.suburb||o.neighbourhood||o.quarter||o.village||"",u=o.city_district||o.district||"";a&&(this.street=a),(o.amenity||o.building||o.shop)&&(this.landmark=o.amenity||o.building||o.shop);let f=[l,u,o.neighbourhood,o.quarter].filter(Boolean);for(let g of f){if(!g)continue;let b=g.toLowerCase(),E=this.baguioBarangays.find(S=>{let R=S.toLowerCase(),K=R.split("(")[0].trim();return R.includes(b)||b.includes(K)||K.includes(b)||b.split(" ").some(q=>q.length>3&&K.includes(q))});if(E){this.barangay=E;break}}if(!this.barangay){let g=this.findNearestBarangay(e,t);g&&(this.barangay=g)}}}catch(i){console.warn("Could not fetch address details: - report.ts:279",i)}})}findNearestBarangay(e,t){let i=Gi,r=null,o=1/0;for(let[a,l]of Object.entries(i)){let[u,f]=l,g=Math.sqrt(Math.pow(e-u,2)+Math.pow(t-f,2));g<o&&(o=g,r=a)}return o<.02?this.baguioBarangays.find(l=>l.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes(l.toLowerCase().split("(")[0].trim()))||r:null}geocodeBarangay(e){return P(this,null,function*(){let t=Gi,i=e.trim(),r=t[i];if(r)return{lat:r[0],lng:r[1]};let o=Object.entries(t).find(([a])=>a.toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes(a.toLowerCase()));if(o){let a=o[1];return{lat:a[0],lng:a[1]}}return null})}onProofImageSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.errorMessage="Proof image must be less than 5MB.",this.toastService.error("Proof image must be less than 5MB.");return}this.proofImageFile=t,this.proofImageFileName=t.name;let i=new FileReader;i.onload=r=>{this.proofImageUrl=r.target?.result,this.successMessage="Proof image uploaded successfully!",this.toastService.success("Proof image uploaded successfully!"),setTimeout(()=>{this.successMessage==="Proof image uploaded successfully!"&&(this.successMessage=null)},3e3)},i.readAsDataURL(t)}}onIdImageSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.errorMessage="ID image must be less than 5MB.",this.toastService.error("ID image must be less than 5MB.");return}this.idImageFile=t,this.idImageFileName=t.name;let i=new FileReader;i.onload=r=>{this.idImageUrl=r.target?.result,this.successMessage="ID image uploaded successfully!",this.toastService.success("ID image uploaded successfully!"),setTimeout(()=>{this.successMessage==="ID image uploaded successfully!"&&(this.successMessage=null)},3e3)},i.readAsDataURL(t)}}validateForm(){return this.validationErrors={},this.description.trim()||(this.validationErrors.description="Incident description is required."),this.fullName.trim()||(this.validationErrors.fullName="Full name is required."),(!this.email.trim()||!this.isValidEmail(this.email))&&(this.validationErrors.email="Valid email address is required."),this.street.trim()||(this.validationErrors.street="Street address is required."),this.barangay.trim()||(this.validationErrors.barangay="Barangay is required."),Object.keys(this.validationErrors).length===0}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}onSubmit(){return P(this,null,function*(){if(this.errorMessage=null,this.successMessage=null,!this.validateForm()){this.toastService.warning("Please fill in all required fields.");return}this.isLoading=!0;try{let e=yield la(this.authService.currentUser$);if(!e){this.errorMessage="You must be logged in to submit a report. Redirecting to login...",this.toastService.error("You must be logged in to submit a report."),setTimeout(()=>this.router.navigate(["/login"]),900),this.isLoading=!1;return}let t={reporterId:e.uid||e.email||"unknown",reporterName:this.fullName.trim(),reporterEmail:this.email.trim(),description:this.description.trim(),street:this.street.trim(),barangay:this.barangay.trim(),landmark:this.landmark.trim()||void 0,city:this.city,priority:this.priority,location:this.location||void 0,timestamp:new Date().toISOString(),imageUrl:this.proofImageUrl||void 0,idImageUrl:this.idImageUrl||void 0};yield la(this.reportService.submitReport(t)),this.successMessage="Report submitted successfully and is awaiting admin approval.",this.toastService.success("Safety report submitted successfully! Awaiting admin approval."),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{this.clearForm(),sessionStorage.removeItem("reportFormData")},800)},100)}catch(e){console.error("Report submission failed: - report.ts:616",e),this.errorMessage="Submission failed. Please try again.",this.toastService.error("Submission failed. Please try again.")}finally{this.isLoading=!1}})}clearForm(){this.description="",this.street="",this.barangay="",this.landmark="",this.priority="medium",this.proofImageUrl=null,this.proofImageFile=null,this.proofImageFileName=null,this.idImageUrl=null,this.idImageFile=null,this.idImageFileName=null,this.location=null}saveFormProgress(){let e={description:this.description,street:this.street,barangay:this.barangay,landmark:this.landmark,priority:this.priority};sessionStorage.setItem("reportFormData",JSON.stringify(e))}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}ngOnDestroy(){this.animationService.destroyScrollObserver()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-report"]],decls:10,vars:4,consts:[["notLogged",""],["reportForm","ngForm"],["role","main",1,"report-page","scroll-reveal","animate-on-load"],["role","region","aria-labelledby","report-title",1,"report-container"],["id","report-title"],[4,"ngIf","ngIfElse"],["aria-describedby","form-status",3,"ngSubmit"],["class","message success","role","status","aria-live","polite","id","form-status",4,"ngIf"],["class","message error","role","alert","aria-live","assertive","id","form-status",4,"ngIf"],[1,"form-section","scroll-reveal","animate-on-load"],[1,"section-title"],[1,"form-group"],["for","fullName"],["id","fullName","type","text","name","fullName","required","","placeholder","Enter your full name","aria-required","true","autocomplete","name",3,"ngModelChange","ngModel"],["class","error-text","id","fullName-error","role","alert",4,"ngIf"],["for","email"],["id","email","type","email","name","email","required","","placeholder","your.email@example.com","aria-required","true","autocomplete","email",3,"ngModelChange","ngModel"],["class","error-text","id","email-error","role","alert",4,"ngIf"],["for","description"],["id","description","name","description","rows","5","required","","placeholder","Describe what happened in detail...","aria-required","true",3,"ngModelChange","blur","ngModel"],["class","error-text","id","description-error","role","alert",4,"ngIf"],["for","priority"],["id","priority","name","priority","required","","aria-required","true",3,"ngModelChange","blur","ngModel"],["value","low"],["value","medium"],["value","high"],[1,"hierarchy-note"],[1,"form-group","location-info"],["id","map-label"],["id","map-help",1,"help-text"],["type","button","aria-describedby","map-help",1,"map-picker-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["class","interactive-map-wrapper","role","application","aria-label","Interactive location picker map",4,"ngIf"],["class","error-text","role","alert",4,"ngIf"],["for","city"],["id","city","type","text","name","city","readonly","","aria-readonly","true",1,"readonly-field",3,"ngModelChange","ngModel"],[1,"form-group","barangay-group"],["for","barangay"],["id","barangay","type","text","name","barangay","required","","placeholder","Start typing to search from 128 barangays...","autocomplete","off","aria-required","true","role","combobox","aria-expanded","false","aria-autocomplete","list",3,"ngModelChange","input","focus","blur","ngModel"],["class","barangay-suggestions","id","barangay-suggestions","role","listbox","aria-label","Barangay suggestions",3,"mousedown",4,"ngIf"],["class","error-text","id","barangay-error","role","alert",4,"ngIf"],["for","street"],["id","street","type","text","name","street","required","","placeholder","e.g., Purok 3, Session Road","aria-required","true",3,"ngModelChange","blur","input","ngModel"],["class","error-text","id","street-error","role","alert",4,"ngIf"],["for","landmark"],["id","landmark","type","text","name","landmark","placeholder","e.g., Near Burnham Park, In front of SM Baguio",3,"ngModelChange","blur","ngModel"],["for","proofImage"],["id","proofImage","type","file","name","proofImage","accept","image/*","aria-describedby","proofImage-help",3,"change"],["id","proofImage-help",1,"help-text"],["class","image-preview-container",4,"ngIf"],["type","submit",1,"submit-btn",3,"disabled"],["role","status","aria-live","polite","id","form-status",1,"message","success"],["role","alert","aria-live","assertive","id","form-status",1,"message","error"],["id","fullName-error","role","alert",1,"error-text"],["id","email-error","role","alert",1,"error-text"],["id","description-error","role","alert",1,"error-text"],["role","application","aria-label","Interactive location picker map",1,"interactive-map-wrapper"],[3,"locationSelected","defaultLocation","barangayInput","streetInput"],["role","alert",1,"error-text"],["id","barangay-suggestions","role","listbox","aria-label","Barangay suggestions",1,"barangay-suggestions",3,"mousedown"],["class","suggestion-item","role","option",3,"click",4,"ngFor","ngForOf"],["class","suggestion-more","role","status",4,"ngIf"],["role","option",1,"suggestion-item",3,"click"],["role","status",1,"suggestion-more"],["id","barangay-error","role","alert",1,"error-text"],["id","street-error","role","alert",1,"error-text"],[1,"image-preview-container"],[1,"file-name"],["class","image-preview",4,"ngIf"],[1,"image-preview"],["alt","Preview of uploaded incident photo",3,"src"],["role","alert",1,"not-logged"],[1,"auth-prompt-box"],[1,"login-warning"],[1,"help-text"],["role","group","aria-label","Authentication options",1,"action-row"],["routerLink","/login",1,"btn","login-btn"],["aria-hidden","true",1,"or-text"],["routerLink","/login",1,"btn","signup-btn"]],template:function(t,i){if(t&1&&(_(0,"main",2)(1,"div",3)(2,"h2",4),w(3,"Submit a Safety Alert"),v(),_(4,"p"),w(5,"Report safety concerns in your neighborhood. All fields marked with * are required."),v(),te(6,NK,84,34,"ng-container",5),xe(7,"async"),te(8,LK,15,0,"ng-template",null,0,Ct),v()()),t&2){let r=dt(9);C(6),$("ngIf",De(7,2,i.authService.currentUser$))("ngIfElse",r)}},dependencies:[ht,Dn,Ut,gn,Fd,tc,nc,yi,Zo,$i,Ld,Il,Ai,El,Kr,Hi,Vd,cn],styles:[".report-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#1a2a5e,#2d4a8e,#d4a84b);background-size:cover;background-position:center;background-attachment:fixed;display:flex;align-items:flex-start;justify-content:center;padding:40px 20px}@media (max-width: 768px){.report-page[_ngcontent-%COMP%]{padding:20px 15px}}@media (max-width: 480px){.report-page[_ngcontent-%COMP%]{padding:15px 10px}}.report-container[_ngcontent-%COMP%]{max-width:1200px;width:95%;margin:0 auto;padding:40px 48px;background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d,0 0 1px #ffffff80 inset;border:1px solid rgba(255,255,255,.6);color:#1a1a1a;animation:_ngcontent-%COMP%_containerFadeUp .7s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_containerFadeUp{0%{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 1280px){.report-container[_ngcontent-%COMP%]{max-width:1000px;width:92%;padding:36px 40px}}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]{max-width:100%;width:95%;padding:28px 20px;border-radius:12px}}@media (max-width: 480px){.report-container[_ngcontent-%COMP%]{width:98%;padding:20px 15px;border-radius:10px}}.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:2rem;font-weight:800;margin-bottom:10px;text-align:center;letter-spacing:-.5px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}}@media (max-width: 480px){.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}}.report-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px;font-size:.9rem;line-height:1.5;text-align:center;font-weight:400}@media (max-width: 480px){.report-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:20px;font-size:.85rem}}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}@media (max-width: 480px){form[_ngcontent-%COMP%]{gap:18px}}.form-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:25px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #0000000f;animation:_ngcontent-%COMP%_slideInUp .6s cubic-bezier(.4,0,.2,1) backwards}.form-section[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.form-section[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.form-section[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.form-section[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.form-section[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.form-section[_ngcontent-%COMP%]{padding:18px 15px}}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0 0 20px;padding-bottom:12px;border-bottom:2px solid #1a2a5e;letter-spacing:-.5px}@media (max-width: 480px){.section-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:15px}}.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:.9rem;letter-spacing:0px}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;box-sizing:border-box;font-size:16px;font-family:inherit;transition:all .3s cubic-bezier(.4,0,.2,1);background:#f8f9fa;color:#333;min-height:44px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px 14px}}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#aaa}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:120px}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding:12px;border:2px solid #e0e0e0;border-radius:8px;width:100%;box-sizing:border-box;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);background:#f8f9fa;color:#666;font-size:.95rem}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.help-text[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin-top:8px;font-style:normal}.error-text[_ngcontent-%COMP%]{display:block;color:#ff6b6b;font-size:.85rem;margin-top:6px;font-weight:600}.form-group[_ngcontent-%COMP%]{position:relative}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;background:#fff;border:2px solid #1a2a5e;border-top:none;border-radius:0 0 8px 8px;max-height:350px;overflow-y:auto;overflow-x:hidden;width:100%;box-shadow:0 8px 24px #1a2a5e26;z-index:1000;color:#333;top:100%;left:0;right:0}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1a2a5e;border-radius:4px}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#2a3f7a}.suggestion-item[_ngcontent-%COMP%]{padding:12px 15px;cursor:pointer;transition:all .15s ease;border-bottom:1px solid #e0e0e0;font-size:.95rem;line-height:1.4;white-space:normal;word-wrap:break-word;-webkit-user-select:none;user-select:none}.suggestion-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#1a2a5e;padding-left:18px}.suggestion-item[_ngcontent-%COMP%]:active{background-color:#e8ebf7;color:#1a2a5e}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-more[_ngcontent-%COMP%]{padding:10px 15px;background:#f0f4f8;color:#6c757d;font-style:italic;font-size:.85rem;text-align:center;border-top:1px solid #e0e0e0}.readonly-field[_ngcontent-%COMP%]{background-color:#e9ecef!important;color:#6c757d!important;cursor:not-allowed}.hierarchy-note[_ngcontent-%COMP%]{color:#1a2a5e;font-size:.9rem;font-weight:600;margin-bottom:16px;padding:10px 14px;background:linear-gradient(135deg,#d4a84b1f,#d4a84b0d);border-left:3px solid #d4a84b;border-radius:4px}.barangay-group[_ngcontent-%COMP%]{margin-bottom:16px}.location-info[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 2px 8px #0000000f}.get-location-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);margin-bottom:15px;box-shadow:0 8px 20px #1a2a5e4d;text-transform:uppercase;letter-spacing:.3px}.get-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px);box-shadow:0 12px 30px #1a2a5e66}.get-location-btn[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed;opacity:.6;transform:none;box-shadow:none}.map-picker-btn[_ngcontent-%COMP%]{width:100%;padding:12px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:.95rem;font-weight:600;transition:all .3s cubic-bezier(.4,0,.2,1);margin-top:15px;margin-bottom:15px;box-shadow:0 4px 12px #1a2a5e4d;display:flex;align-items:center;justify-content:center;gap:8px}.map-picker-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1a2a5e66}.map-picker-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.map-picker-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.interactive-map-wrapper[_ngcontent-%COMP%]{width:100%;margin:15px 0;animation:_ngcontent-%COMP%_slideDown .3s cubic-bezier(.4,0,.2,1)}.location-display[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:15px;border-radius:8px;margin-bottom:10px;border:2px solid #e0e0e0}.location-coords[_ngcontent-%COMP%]{margin:10px 0;color:#1a1a1a;font-size:1rem;font-weight:600;font-family:Monaco,Courier New,monospace;color:#1a2a5e}.location-accuracy[_ngcontent-%COMP%]{margin:10px 0;color:#666;font-size:.9rem}.location-error[_ngcontent-%COMP%]{background-color:#ffebee;color:#ff6b6b;padding:12px;border-radius:8px;border-left:4px solid #ff6b6b;margin-bottom:10px;font-size:.9rem}.image-preview-container[_ngcontent-%COMP%]{margin-top:15px;padding:20px;background-color:#f8f9fa;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 2px 8px #0000000f}.file-name[_ngcontent-%COMP%]{margin:0 0 15px;color:#666;font-size:.95rem;font-weight:600}.image-preview[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:12px}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:350px;width:auto;height:auto;border-radius:8px;border:1px solid #e0e0e0;box-shadow:0 8px 24px #0000001f;transition:all .3s cubic-bezier(.4,0,.2,1)}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.03);box-shadow:0 12px 32px #1a2a5e33}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);margin-top:10px;box-shadow:0 8px 20px #1a2a5e4d;text-transform:uppercase;letter-spacing:.3px}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px);box-shadow:0 12px 30px #1a2a5e66}.submit-btn[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed;opacity:.6;transform:none;box-shadow:none}.message[_ngcontent-%COMP%]{padding:15px 20px;margin-bottom:20px;border-radius:8px;font-weight:600;text-align:center;font-size:.95rem;animation:_ngcontent-%COMP%_slideDown .4s cubic-bezier(.4,0,.2,1)}.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf661a,#40c0571a);color:#40c057;border:2px solid #51cf66;box-shadow:0 4px 12px #40c05733}.error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b1a,#ee5a6f1a);color:#ff6b6b;border:2px solid #ff6b6b;box-shadow:0 4px 12px #ff6b6b33}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.not-logged[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;margin-top:20px}.auth-prompt-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e1a,#d4a84b1a);border:2px solid #1a2a5e;border-radius:12px;padding:40px;max-width:600px;margin:0 auto;box-shadow:0 8px 24px #1a2a5e26}.auth-prompt-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;color:#1a2a5e;margin-bottom:15px;font-weight:800}.login-warning[_ngcontent-%COMP%]{font-size:1.15rem;color:#333;margin-bottom:10px;font-weight:600;line-height:1.5}.auth-prompt-box[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-bottom:25px;opacity:.9;line-height:1.6}.not-logged[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;align-items:center;margin-top:20px}.or-text[_ngcontent-%COMP%]{font-size:1rem;color:#856404;font-weight:600}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%], .not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]{padding:14px 30px;color:#fff;border-radius:6px;text-decoration:none;font-weight:700;border:none;cursor:pointer;transition:all .2s;font-size:1rem;display:inline-block}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{background-color:#2c5282}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background-color:#1e3a5f;transform:translateY(-2px);box-shadow:0 4px 12px #2c52824d}.not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]{background-color:#28a745}.not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]:hover{background-color:#218838;transform:translateY(-2px);box-shadow:0 4px 12px #28a7454d}.name-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.name-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:0}}@media (max-width: 768px){.report-page[_ngcontent-%COMP%]{padding:20px 15px}.report-container[_ngcontent-%COMP%]{padding:30px 20px}.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.1rem}.form-section[_ngcontent-%COMP%]{padding:20px 15px}.name-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}fieldset.form-section[_ngcontent-%COMP%]{border:none;margin:0 0 24px;padding:28px;background:#fafbfc;border-radius:14px;border:1px solid rgba(0,0,0,.06)}fieldset.form-section[_ngcontent-%COMP%]   legend.section-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:700;color:#1a2a5e;margin-bottom:20px;padding:0 8px;width:auto}.report-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible, .report-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible, .report-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .report-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible, .suggestion-item[_ngcontent-%COMP%]:focus-visible{outline:3px solid var(--wcag-focus-color, #4a90d9);outline-offset:2px}.submit-btn[_ngcontent-%COMP%], .map-picker-btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.suggestion-item[_ngcontent-%COMP%]{min-height:44px;display:flex;align-items:center}@media (prefers-contrast: high){.report-container[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:2px solid #000}.submit-btn[_ngcontent-%COMP%]{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){.report-container[_ngcontent-%COMP%], .scroll-reveal[_ngcontent-%COMP%], .animate-on-load[_ngcontent-%COMP%]{animation:none!important;transition-duration:.01ms!important}}@media print{.report-page[_ngcontent-%COMP%]{background:#fff;min-height:auto}.report-container[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #000}.map-picker-btn[_ngcontent-%COMP%], .interactive-map-wrapper[_ngcontent-%COMP%]{display:none!important}}"]})};function FK(n,e){if(n&1&&(_(0,"div",8)(1,"h3"),w(2,"Incident Photo"),v(),oe(3,"img",13),v()),n&2){let t=T().ngIf;C(3),$("src",t.imageUrl,Kt)}}function VK(n,e){if(n&1){let t=ge();_(0,"div",3)(1,"button",4),X("click",function(){j(t);let r=T();return z(r.goBack())}),w(2,"\u2190 Back"),v(),_(3,"div",5)(4,"h1"),w(5),v(),_(6,"div",6),w(7),xe(8,"uppercase"),v()(),_(9,"div",7)(10,"div",8)(11,"h3"),w(12,"Location Information"),v(),_(13,"div",9)(14,"div",10)(15,"label"),w(16,"Street:"),v(),_(17,"p"),w(18),v()(),_(19,"div",10)(20,"label"),w(21,"Barangay:"),v(),_(22,"p"),w(23),v()()()(),_(24,"div",8)(25,"h3"),w(26,"Reporter Information"),v(),_(27,"div",9)(28,"div",10)(29,"label"),w(30,"Name:"),v(),_(31,"p"),w(32),v()(),_(33,"div",10)(34,"label"),w(35,"ID:"),v(),_(36,"p"),w(37),v()()()(),_(38,"div",8)(39,"h3"),w(40,"Description"),v(),_(41,"p",11),w(42),v()(),te(43,FK,4,1,"div",12),_(44,"div",8)(45,"h3"),w(46,"Timeline"),v(),_(47,"div",9)(48,"div",10)(49,"label"),w(50,"Reported:"),v(),_(51,"p"),w(52),xe(53,"date"),v()(),_(54,"div",10)(55,"label"),w(56,"Last Updated:"),v(),_(57,"p"),w(58),xe(59,"date"),v()()()()()()}if(n&2){let t=e.ngIf,i=T();C(5),ae(t.description),C(),Wc("background-color",i.getStatusBadgeColor(t.status)),C(),be(" ",De(8,12,t.status)," "),C(11),ae(t.street),C(5),ae(t.barangay),C(9),ae(t.reporterName||"Anonymous"),C(5),ae(t.reporterId),C(5),ae(t.description),C(),$("ngIf",t.imageUrl),C(9),ae(Pn(53,14,t.createdAt,"medium")),C(6),ae(Pn(59,17,t.updatedAt,"medium"))}}function BK(n,e){n&1&&(_(0,"div",14)(1,"p"),w(2,"Loading report details..."),v()())}var Cy=class n{route=F(gi);router=F(Et);reportService=F(pn);reportId=this.route.snapshot.paramMap.get("id");report$=this.reportService.getAllReports().pipe(ue(e=>e.find(t=>t.id===this.reportId)));ngOnInit(){}goBack(){this.router.navigate(["/"])}getStatusBadgeColor(e){switch(e){case"approved":return"#4caf50";case"pending":return"#ff9800";case"rejected":return"#f44336";default:return"#999"}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-report-detail"]],decls:5,vars:4,consts:[["loading",""],[1,"report-detail-container"],["class","report-detail-content",4,"ngIf","ngIfElse"],[1,"report-detail-content"],[1,"back-btn",3,"click"],[1,"report-header"],[1,"status-badge"],[1,"report-body"],[1,"report-section"],[1,"info-grid"],[1,"info-item"],[1,"description-text"],["class","report-section",4,"ngIf"],["alt","Report photo",1,"report-image",3,"src"],[1,"loading"]],template:function(t,i){if(t&1&&(_(0,"div",1),te(1,VK,60,20,"div",2),xe(2,"async"),te(3,BK,3,0,"ng-template",null,0,Ct),v()),t&2){let r=dt(4);C(),$("ngIf",De(2,2,i.report$))("ngIfElse",r)}},dependencies:[ht,Ut,cn,Is,qr],styles:[".report-detail-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:30px;background:#fff;min-height:calc(100vh - 60px)}.report-detail-container[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f0f0f0;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:14px;font-weight:600;color:#333;margin-bottom:20px;transition:all .2s ease}.report-detail-container[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;transform:translate(-4px)}.report-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #e0e0e0}.report-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;color:#333;flex:1}.report-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;color:#fff;font-weight:600;font-size:12px;white-space:nowrap;margin-left:20px}.report-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.report-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;color:#333;font-weight:600;border-bottom:2px solid #f0f0f0;padding-bottom:8px}.report-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.report-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#888;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333;line-height:1.5;word-wrap:break-word}.report-section[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#555;line-height:1.6;background:#f9f9f9;padding:16px;border-radius:4px}.report-section[_ngcontent-%COMP%]   .report-image[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px;box-shadow:0 4px 12px #0000001a;margin-top:12px}.report-detail-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}"]})};function UK(n,e){if(n&1&&(Xe(0),_(1,"small"),w(2),v(),et()),n&2){let t=T().$implicit;C(2),ae(t.city)}}function jK(n,e){if(n&1&&(Xe(0),oe(1,"img",21),et()),n&2){let t=T().$implicit;C(),$("src",t.imageUrl,Kt)}}function zK(n,e){n&1&&(_(0,"span",22),w(1,"No image"),v())}function HK(n,e){if(n&1){let t=ge();_(0,"tr")(1,"td")(2,"div",14)(3,"div"),w(4),xe(5,"date"),v(),_(6,"small"),w(7),xe(8,"date"),v()()(),_(9,"td")(10,"strong"),w(11),v()(),_(12,"td")(13,"span",15),w(14),xe(15,"uppercase"),v()(),_(16,"td")(17,"div",16)(18,"div"),w(19),v(),_(20,"small"),w(21),v(),te(22,UK,3,1,"ng-container",8),v()(),_(23,"td")(24,"div",17)(25,"p")(26,"strong"),w(27),v()(),_(28,"small"),w(29),v()()(),_(30,"td"),te(31,jK,2,1,"ng-container",11)(32,zK,2,0,"ng-template",null,2,Ct),v(),_(34,"td",18)(35,"button",19),X("click",function(){let r=j(t).$implicit,o=T(4);return z(o.approveReport(r.id))}),w(36," Accept "),v(),_(37,"button",20),X("click",function(){let r=j(t).$implicit,o=T(4);return z(o.deleteReport(r.id))}),w(38,"Delete"),v()()()}if(n&2){let t=e.$implicit,i=dt(33);St("data-id",t.id),C(4),ae(Pn(5,13,t.createdAt,"MMM d, y")),C(3),ae(Pn(8,16,t.createdAt,"h:mm a")),C(4),ae(t.description),C(2),$("ngClass","priority-"+(t.priority||"medium")),C(),be(" ",De(15,19,t.priority||"medium")," "),C(5),ae(t.street),C(2),ae(t.barangay),C(),$("ngIf",t.city),C(5),ae(t.reporterName||"N/A"),C(2),ae(t.reporterId),C(2),$("ngIf",t.imageUrl)("ngIfElse",i)}}function $K(n,e){if(n&1&&(Xe(0),_(1,"div",12)(2,"table")(3,"thead")(4,"tr")(5,"th"),w(6,"Submitted"),v(),_(7,"th"),w(8,"Description"),v(),_(9,"th"),w(10,"Priority"),v(),_(11,"th"),w(12,"Location"),v(),_(13,"th"),w(14,"Reporter"),v(),_(15,"th"),w(16,"Image"),v(),_(17,"th"),w(18,"Actions"),v()()(),_(19,"tbody"),te(20,HK,39,21,"tr",13),v()()(),et()),n&2){let t=T().ngIf,i=T(2);C(20),$("ngForOf",t)("ngForTrackBy",i.trackById)}}function GK(n,e){n&1&&(_(0,"div",23)(1,"p"),w(2,"No pending reports. All reports have been reviewed!"),v()())}function qK(n,e){if(n&1&&(Xe(0),te(1,$K,21,2,"ng-container",11)(2,GK,3,0,"ng-template",null,1,Ct),et()),n&2){let t=e.ngIf,i=dt(3);C(),$("ngIf",t.length>0)("ngIfElse",i)}}function WK(n,e){n&1&&(_(0,"div",24),w(1,"Loading reports..."),v())}function KK(n,e){if(n&1&&(Xe(0),_(1,"div",9)(2,"h3",10),w(3,"Pending Safety Alerts - Awaiting Review"),v(),te(4,qK,4,2,"ng-container",11),xe(5,"async"),te(6,WK,2,0,"ng-template",null,0,Ct),v(),et()),n&2){let t=dt(7),i=T();C(4),$("ngIf",De(5,2,i.pendingReports$))("ngIfElse",t)}}function ZK(n,e){if(n&1&&(Xe(0),_(1,"div",36),w(2),v(),et()),n&2){let t=T().ngIf,i=T().ngIf;C(2),bn(" Showing ",t.length," of ",i.length," approved reports ")}}function YK(n,e){if(n&1&&(Xe(0),_(1,"span",48),w(2),v(),et()),n&2){let t=T().$implicit;C(2),ae(t.city)}}function QK(n,e){if(n&1&&(Xe(0),_(1,"div",45)(2,"strong"),w(3,"Coordinates:"),v(),_(4,"span",49),w(5),xe(6,"number"),xe(7,"number"),v()(),et()),n&2){let t=T().$implicit;C(5),bn(" ",Pn(6,2,t.location.lat,"1.6-6"),", ",Pn(7,5,t.location.lng,"1.6-6")," ")}}function JK(n,e){if(n&1&&(Xe(0),_(1,"div",45)(2,"strong"),w(3,"Email:"),v(),_(4,"span"),w(5),v()(),et()),n&2){let t=T().$implicit;C(5),ae(t.reporterEmail)}}function XK(n,e){if(n&1&&(Xe(0),_(1,"div",50),oe(2,"img",51),v(),et()),n&2){let t=T().$implicit;C(2),$("src",t.imageUrl,Kt)}}function eZ(n,e){if(n&1){let t=ge();_(0,"div",39)(1,"div",40)(2,"span",15),w(3),xe(4,"uppercase"),v(),_(5,"span",41),w(6),xe(7,"date"),v()(),_(8,"div",42)(9,"h4",43),w(10),v(),_(11,"div",44)(12,"div",45)(13,"strong"),w(14,"Location:"),v(),_(15,"span"),w(16),v(),te(17,YK,3,1,"ng-container",8),v(),te(18,QK,8,8,"ng-container",8),_(19,"div",45)(20,"strong"),w(21,"Reporter:"),v(),_(22,"span"),w(23),v()(),te(24,JK,6,1,"ng-container",8),v(),te(25,XK,3,1,"ng-container",8),v(),_(26,"div",46)(27,"button",47),X("click",function(){let r=j(t).$implicit,o=T(5);return z(o.deleteApprovedReport(r.id))}),w(28," Delete Report "),v()()()}if(n&2){let t=e.$implicit;C(2),$("ngClass","priority-"+(t.priority||"medium")),C(),be(" ",De(4,11,t.priority||"medium")," "),C(3),be(" ",t.timestamp?t.timestamp:Pn(7,13,t.createdAt,"MMM d, y h:mm a")," "),C(4),ae(t.description),C(6),bn("",t.street,", ",t.barangay),C(),$("ngIf",t.city),C(),$("ngIf",t.location),C(5),ae(t.reporterName||"N/A"),C(),$("ngIf",t.reporterEmail),C(),$("ngIf",t.imageUrl)}}function tZ(n,e){if(n&1&&(Xe(0),_(1,"div",37),te(2,eZ,29,16,"div",38),v(),et()),n&2){let t=T().ngIf,i=T(3);C(2),$("ngForOf",t)("ngForTrackBy",i.trackById)}}function nZ(n,e){n&1&&(Xe(0),_(1,"p"),w(2,"No approved reports match your filters."),v(),et())}function iZ(n,e){n&1&&(Xe(0),_(1,"p"),w(2,"No approved reports yet."),v(),et())}function rZ(n,e){if(n&1&&(_(0,"div",23),te(1,nZ,3,0,"ng-container",8)(2,iZ,3,0,"ng-container",8),v()),n&2){let t=T(2).ngIf,i=T(2);C(),$("ngIf",i.approvedFilterPriority!=="all"||i.approvedFilterSearch),C(),$("ngIf",i.approvedFilterPriority==="all"&&!i.approvedFilterSearch&&t.length===0)}}function oZ(n,e){if(n&1&&(Xe(0),te(1,ZK,3,2,"ng-container",8)(2,tZ,3,2,"ng-container",11)(3,rZ,3,2,"ng-template",null,4,Ct),et()),n&2){let t=e.ngIf,i=dt(4),r=T().ngIf;C(),$("ngIf",r.length>0),C(),$("ngIf",t.length>0)("ngIfElse",i)}}function sZ(n,e){if(n&1&&(Xe(0),te(1,oZ,5,3,"ng-container",8),et()),n&2){let t=e.ngIf,i=T(2);C(),$("ngIf",i.getFilteredApprovedReports(t))}}function aZ(n,e){n&1&&(_(0,"div",24),w(1,"Loading approved reports..."),v())}function cZ(n,e){if(n&1){let t=ge();Xe(0),_(1,"div",9)(2,"h3",10),w(3,"Published Safety Alerts - Visible to Residents"),v(),_(4,"div",25)(5,"div",26)(6,"label",27),w(7,"Filter by Priority:"),v(),_(8,"select",28),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.approvedFilterPriority,r)||(o.approvedFilterPriority=r),z(r)}),_(9,"option",29),w(10,"All Priorities"),v(),_(11,"option",30),w(12,"High Priority"),v(),_(13,"option",31),w(14,"Medium Priority"),v(),_(15,"option",32),w(16,"Low Priority"),v()()(),_(17,"div",26)(18,"label",33),w(19,"Search:"),v(),_(20,"input",34),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.approvedFilterSearch,r)||(o.approvedFilterSearch=r),z(r)}),v()(),_(21,"button",35),X("click",function(){j(t);let r=T();return z(r.resetFilters())}),w(22,"Reset Filters"),v()(),te(23,sZ,2,1,"ng-container",11),xe(24,"async"),te(25,aZ,2,0,"ng-template",null,3,Ct),v(),et()}if(n&2){let t=dt(26),i=T();C(8),vt("ngModel",i.approvedFilterPriority),C(12),vt("ngModel",i.approvedFilterSearch),C(3),$("ngIf",De(24,4,i.approvedReports$))("ngIfElse",t)}}var Ey=class n{reportService=F(pn);toastService=F(Jn);activeView="pending";pendingReports$=this.reportService.getPendingReports();approvedReports$=this.reportService.getApprovedReports();approvedFilterPriority="all";approvedFilterSearch="";ngOnInit(){}switchView(e){this.activeView=e}filterByPriority(e){return this.approvedFilterPriority==="all"?e:e.filter(t=>t.priority===this.approvedFilterPriority)}filterBySearch(e){if(!this.approvedFilterSearch.trim())return e;let t=this.approvedFilterSearch.toLowerCase();return e.filter(i=>i.description?.toLowerCase().includes(t)||i.barangay?.toLowerCase().includes(t)||i.street?.toLowerCase().includes(t)||i.reporterName?.toLowerCase().includes(t))}getFilteredApprovedReports(e){let t=this.filterByPriority(e);return t=this.filterBySearch(t),t}resetFilters(){this.approvedFilterPriority="all",this.approvedFilterSearch=""}approveReport(e){confirm("Are you sure you want to accept this report for publication?")&&(this.reportService.approveReport(e),this.toastService.success("Report accepted and published to user dashboard"))}deleteReport(e){confirm("Are you sure you want to delete this report permanently?")&&(this.reportService.deleteReport(e),this.toastService.success("Report deleted successfully"))}deleteApprovedReport(e){confirm("This will permanently delete this approved report and remove it from the user dashboard and map. Continue?")&&(this.reportService.deleteReport(e),this.toastService.success("Approved report deleted successfully"))}trackById(e,t){return t?.id??e.toString()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-admin-dashboard"]],decls:12,vars:6,consts:[["pendingLoading",""],["noPendingReports",""],["noImage",""],["approvedLoading",""],["noApprovedMatches",""],[1,"admin-dashboard-container"],[1,"dashboard-tabs"],[1,"tab-btn",3,"click"],[4,"ngIf"],[1,"reports-management"],[1,"section-subtitle"],[4,"ngIf","ngIfElse"],[1,"reports-table"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"date-display"],[1,"priority-badge",3,"ngClass"],[1,"location-display"],[1,"reporter-info"],[1,"actions"],[1,"btn-approve",3,"click"],[1,"btn-delete",3,"click"],["alt","Report image",1,"thumbnail",3,"src"],[1,"no-image"],[1,"no-reports-message"],[1,"loading"],[1,"filters-bar"],[1,"filter-group"],["for","priorityFilter"],["id","priorityFilter",1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","high"],["value","medium"],["value","low"],["for","searchFilter"],["type","text","id","searchFilter","placeholder","Search by description, location, or reporter...",1,"filter-input",3,"ngModelChange","ngModel"],[1,"btn-reset-filters",3,"click"],[1,"results-count"],[1,"reports-grid"],["class","report-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"report-card"],[1,"card-header"],[1,"report-date"],[1,"card-body"],[1,"report-title"],[1,"report-details"],[1,"detail-item"],[1,"card-footer"],[1,"btn-delete-approved",3,"click"],[1,"text-muted"],[1,"coords"],[1,"report-image"],["alt","Report evidence",3,"src"]],template:function(t,i){t&1&&(_(0,"div",5)(1,"h2"),w(2,"Admin Dashboard"),v(),_(3,"p"),w(4,"Manage incident reports submitted by users."),v(),_(5,"div",6)(6,"button",7),X("click",function(){return i.switchView("pending")}),w(7," Pending Alerts "),v(),_(8,"button",7),X("click",function(){return i.switchView("approved")}),w(9," Published Alerts "),v()(),te(10,KK,8,4,"ng-container",8)(11,cZ,27,6,"ng-container",8),v()),t&2&&(C(6),ke("active",i.activeView==="pending"),C(2),ke("active",i.activeView==="approved"),C(2),$("ngIf",i.activeView==="pending"),C(),$("ngIf",i.activeView==="approved"))},dependencies:[ht,Es,Dn,Ut,gn,tc,nc,yi,Zo,$i,Ai,cn,Is,xf,qr],styles:[".admin-dashboard-container[_ngcontent-%COMP%]{padding:30px;max-width:1400px;margin:0 auto;background:linear-gradient(135deg,#f5f7fa,#e9ecef);min-height:100vh}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:2rem;font-weight:800;margin-bottom:10px;letter-spacing:-.5px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.admin-dashboard-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.dashboard-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:30px;border-bottom:1px solid rgba(0,0,0,.08);background:#fff;padding:0;border-radius:12px 12px 0 0;box-shadow:0 2px 8px #0000000f}.tab-btn[_ngcontent-%COMP%]{padding:16px 28px;background:transparent;border:none;border-bottom:3px solid transparent;font-size:.95rem;font-weight:700;color:#666;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);margin-bottom:0;text-transform:uppercase;letter-spacing:.3px}.tab-btn[_ngcontent-%COMP%]:hover{color:#1a2a5e;background:#1a2a5e0d}.tab-btn.active[_ngcontent-%COMP%]{color:#1a2a5e;border-bottom-color:#1a2a5e;background:transparent}.section-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:#1a1a1a;margin-bottom:20px;font-weight:800;letter-spacing:-.3px}.filters-bar[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end;padding:24px;background:#fff;border-radius:12px;margin-bottom:20px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014}.filter-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333;font-size:.9rem;letter-spacing:0px}.filter-select[_ngcontent-%COMP%], .filter-input[_ngcontent-%COMP%]{padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;background:#f8f9fa;font-size:.95rem;transition:all .3s cubic-bezier(.4,0,.2,1)}.filter-select[_ngcontent-%COMP%]:hover, .filter-input[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.filter-select[_ngcontent-%COMP%]:focus, .filter-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.btn-reset-filters[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#333;border:2px solid #e0e0e0;border-radius:8px;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;text-transform:uppercase;letter-spacing:.3px;font-size:.85rem}.btn-reset-filters[_ngcontent-%COMP%]:hover{background:#f8f9fa;border-color:#1a2a5e;color:#1a2a5e;transform:translateY(-2px);box-shadow:0 8px 20px #1a2a5e26}.results-count[_ngcontent-%COMP%]{margin-bottom:15px;color:#666;font-weight:500}.reports-table[_ngcontent-%COMP%]{overflow-x:auto;background:#fff;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;padding:16px;text-align:left;font-weight:700;font-size:.85rem;text-transform:uppercase;letter-spacing:.3px}td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e0e0e0;vertical-align:top;color:#333}tr[_ngcontent-%COMP%]:hover{background:#1a2a5e08}.date-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.date-display[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;border-radius:6px;font-size:.7rem;font-weight:800;text-transform:uppercase;letter-spacing:.2px}.priority-high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b33,#ee5a6f33);color:#ff6b6b;border:1px solid #ff6b6b}.priority-medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa04d33,#fd7e1433);color:#fd7e14;border:1px solid #ffa94d}.priority-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf6633,#40c05733);color:#51cf66;border:1px solid #51cf66}.location-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.location-display[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.reporter-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.reporter-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.reporter-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.8rem}.thumbnail[_ngcontent-%COMP%]{max-width:100px;max-height:100px;width:auto;height:auto;border-radius:8px;border:1px solid #e0e0e0;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px #0000000f}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 8px 20px #667eea26;border-color:#667eea}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.08);z-index:10;position:relative}.no-image[_ngcontent-%COMP%]{color:#999;font-style:italic}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-approve[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:8px;font-size:.8rem;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;text-transform:uppercase;letter-spacing:.2px;min-height:36px}.btn-edit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea33}.btn-edit[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#764ba2,#667eea);transform:translateY(-2px);box-shadow:0 8px 20px #667eea4d}.btn-save[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff;box-shadow:0 4px 12px #51cf6633}.btn-save[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40c057,#51cf66);transform:translateY(-2px);box-shadow:0 8px 20px #51cf664d}.btn-cancel[_ngcontent-%COMP%]{background:#e0e0e0;color:#333;border:1px solid #d0d0d0}.btn-cancel[_ngcontent-%COMP%]:hover{background:#d0d0d0;transform:translateY(-2px)}.btn-approve[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff;box-shadow:0 4px 12px #51cf6633}.btn-approve[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40c057,#51cf66);transform:translateY(-2px);box-shadow:0 8px 20px #51cf664d}.btn-delete[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff;box-shadow:0 4px 12px #ff6b6b33}.btn-delete[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ee5a6f,#ff6b6b);transform:translateY(-2px);box-shadow:0 8px 20px #ff6b6b4d}.reports-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.report-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:all .3s}.report-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 16px #00000026}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;background:#f5f7ff;border-bottom:2px solid #9fa8da}.report-date[_ngcontent-%COMP%]{font-size:.85rem;color:#666;font-weight:500}.card-body[_ngcontent-%COMP%]{padding:20px}.report-title[_ngcontent-%COMP%]{font-size:1.1rem;color:#1a237e;margin-bottom:15px;font-weight:700}.report-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a237e;font-size:.9rem}.detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-size:.95rem}.text-muted[_ngcontent-%COMP%]{color:#666!important;font-size:.85rem!important}.coords[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem!important;background:#f5f7ff;padding:4px 8px;border-radius:4px}.report-image[_ngcontent-%COMP%]{margin-top:15px}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:6px;border:2px solid #e0e0e0}.card-footer[_ngcontent-%COMP%]{padding:15px;background:#f9f9f9;border-top:1px solid #e0e0e0}.btn-delete-approved[_ngcontent-%COMP%]{width:100%;padding:10px;background:#f44336;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s}.btn-delete-approved[_ngcontent-%COMP%]:hover{background:#d32f2f;transform:translateY(-2px);box-shadow:0 4px 8px #f443364d}.edit-location[_ngcontent-%COMP%], .edit-reporter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.edit-location[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-reporter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:8px;border:2px solid #9fa8da;border-radius:4px;font-size:.9rem}.edit-location[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .edit-reporter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a237e}.no-reports-message[_ngcontent-%COMP%]{padding:40px;text-align:center;background:#f5f7ff;border-radius:8px;color:#1a237e;font-size:1.1rem;font-weight:500}.loading[_ngcontent-%COMP%]{padding:40px;text-align:center;color:#666;font-size:1.1rem}@media (max-width: 992px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:20px}.dashboard-tabs[_ngcontent-%COMP%]{flex-wrap:wrap;gap:5px}.tab-btn[_ngcontent-%COMP%]{padding:10px 18px;font-size:.9rem}}@media (max-width: 768px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:15px}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.filters-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:15px;padding:15px}.filter-group[_ngcontent-%COMP%]{width:100%}.reports-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.reports-table[_ngcontent-%COMP%]{font-size:.85rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:6px}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-approve[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem;flex:1;min-width:70px}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.dashboard-tabs[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:5px}.tab-btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:.85rem;white-space:nowrap}.section-subtitle[_ngcontent-%COMP%]{font-size:1.3rem}}@media (max-width: 480px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:10px}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.admin-dashboard-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:.85rem}.tab-btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem}.filters-bar[_ngcontent-%COMP%]{padding:12px;gap:12px}.filter-select[_ngcontent-%COMP%], .filter-input[_ngcontent-%COMP%]{padding:10px;font-size:16px}.btn-reset-filters[_ngcontent-%COMP%]{padding:12px 16px;font-size:.9rem}.reports-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block}.reports-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.reports-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid #e0e0e0;border-radius:8px;padding:10px}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;text-align:left;position:relative;padding:8px 10px 8px 40%}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:10px;font-weight:600;color:#1a237e;font-size:.8rem}.report-card[_ngcontent-%COMP%]{border-radius:10px}.card-header[_ngcontent-%COMP%]{padding:12px}.card-body[_ngcontent-%COMP%]{padding:15px}.card-footer[_ngcontent-%COMP%]{padding:12px}.report-title[_ngcontent-%COMP%]{font-size:1rem}}"]})};function lZ(n,e){if(n&1&&(_(0,"div",47),w(1),v()),n&2){let t=T(2);C(),ae(t.successMessage)}}function uZ(n,e){if(n&1&&(_(0,"div",48),w(1),v()),n&2){let t=T(2);C(),ae(t.errorMessage)}}function dZ(n,e){if(n&1&&(_(0,"span",49),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.description," ")}}function hZ(n,e){if(n&1&&(_(0,"div",50),ie(),_(1,"svg",30),oe(2,"path",51)(3,"polyline",52),v(),pe(),_(4,"span"),w(5),v()()),n&2){let t=T(2);C(5),bn("Location saved: ",t.location.lat.toFixed(5),", ",t.location.lng.toFixed(5))}}function fZ(n,e){if(n&1&&(_(0,"span",49),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.location," ")}}function pZ(n,e){if(n&1){let t=ge();_(0,"div",56),X("click",function(){let r=j(t).$implicit,o=T(3);return z(o.selectBarangay(r))}),w(1),v()}if(n&2){let t=e.$implicit;C(),be(" ",t," ")}}function gZ(n,e){if(n&1&&(_(0,"div",57),w(1),v()),n&2){let t=T(3);C(),be(" + ",t.filteredBarangays.length-8," more results ")}}function mZ(n,e){if(n&1){let t=ge();_(0,"div",53),X("mousedown",function(r){return j(t),z(r.preventDefault())}),te(1,pZ,2,1,"div",54)(2,gZ,2,1,"div",55),v()}if(n&2){let t=T(2);C(),$("ngForOf",t.filteredBarangays.slice(0,8)),C(),$("ngIf",t.filteredBarangays.length>8)}}function _Z(n,e){if(n&1&&(_(0,"span",49),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.barangay," ")}}function vZ(n,e){if(n&1&&(_(0,"span",49),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.street," ")}}function yZ(n,e){if(n&1){let t=ge();_(0,"div",58),oe(1,"img",59),_(2,"button",60),X("click",function(){j(t);let r=T(2);return z(r.removePhoto())}),w(3," Remove Photo "),v()()}if(n&2){let t=T(2);C(),$("src",t.imagePreview,Kt)}}function bZ(n,e){if(n&1){let t=ge();Xe(0),_(1,"form",5,1),X("ngSubmit",function(){j(t);let r=T();return z(r.onSubmit())}),te(3,lZ,2,1,"div",6)(4,uZ,2,1,"div",7),_(5,"div",8)(6,"div",9),ie(),_(7,"svg",10),oe(8,"path",11),v()(),pe(),_(9,"div",12)(10,"strong"),w(11,"Police Admin Report"),v(),_(12,"span"),w(13,"Submitted by: Police Admin"),v()()(),_(14,"div",13)(15,"h3",14),w(16,"Alert Details"),v(),_(17,"div",15)(18,"label",16),w(19,"Description *"),v(),_(20,"textarea",17),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.description,r)||(o.description=r),z(r)}),v(),te(21,dZ,2,1,"span",18),v(),_(22,"div",15)(23,"label",19),w(24,"Priority *"),v(),_(25,"select",20),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.priority,r)||(o.priority=r),z(r)}),_(26,"option",21),w(27,"Urgent"),v(),_(28,"option",22),w(29,"Important"),v(),_(30,"option",23),w(31,"Advisory"),v()()()(),_(32,"div",13)(33,"h3",14),w(34,"Location"),v(),_(35,"div",24)(36,"label"),w(37,"Pin Location *"),v(),_(38,"p",25),w(39,"Click on the map or search to select location."),v(),_(40,"app-interactive-location-picker",26),X("locationSelected",function(r){j(t);let o=T();return z(o.onMapLocationSelected(r))}),v(),te(41,hZ,6,2,"div",27)(42,fZ,2,1,"span",18),v(),_(43,"div",28)(44,"div",29),ie(),_(45,"svg",30),oe(46,"path",31)(47,"circle",32),v(),pe(),_(48,"span"),w(49,"Philippines > Benguet > Baguio City"),v()()(),_(50,"div",33)(51,"label",34),w(52,"Barangay *"),v(),_(53,"input",35),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.barangay,r)||(o.barangay=r),z(r)}),X("input",function(r){j(t);let o=T();return z(o.filterBarangays(r))})("focus",function(){j(t);let r=T();return z(r.showBarangaySuggestions=!0)})("blur",function(){j(t);let r=T();return z(r.showBarangaySuggestions=!1)}),v(),te(54,mZ,3,2,"div",36)(55,_Z,2,1,"span",18),v(),_(56,"div",15)(57,"label",37),w(58,"Street *"),v(),_(59,"input",38),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.street,r)||(o.street=r),z(r)}),v(),te(60,vZ,2,1,"span",18),v(),_(61,"div",15)(62,"label",39),w(63,"Landmark (Optional)"),v(),_(64,"input",40),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.landmark,r)||(o.landmark=r),z(r)}),v()(),_(65,"div",15)(66,"label",41),w(67,"Attach Photo (Optional)"),v(),_(68,"input",42),X("change",function(r){j(t);let o=T();return z(o.onFileSelected(r))}),v(),te(69,yZ,4,1,"div",43),v()(),_(70,"div",44)(71,"button",45),w(72),v(),_(73,"a",46),w(74," Cancel "),v()()(),et()}if(n&2){let t=T();C(3),$("ngIf",t.successMessage),C(),$("ngIf",t.errorMessage),C(16),vt("ngModel",t.description),C(),$("ngIf",t.validationErrors.description),C(4),vt("ngModel",t.priority),C(15),$("barangayInput",t.barangay)("streetInput",t.street),C(),$("ngIf",t.location),C(),$("ngIf",t.validationErrors.location),C(11),vt("ngModel",t.barangay),C(),$("ngIf",t.showBarangaySuggestions&&t.filteredBarangays.length>0),C(),$("ngIf",t.validationErrors.barangay),C(4),vt("ngModel",t.street),C(),$("ngIf",t.validationErrors.street),C(4),vt("ngModel",t.landmark),C(5),$("ngIf",t.imagePreview),C(2),$("disabled",t.isLoading),C(),be(" ",t.isLoading?"Issuing Alert...":"Issue Safety Alert"," ")}}function xZ(n,e){n&1&&(_(0,"div",61)(1,"p",62),w(2,"You must be signed in as admin to create reports."),v(),_(3,"div",63)(4,"a",64),w(5,"Sign In"),v()()())}var Iy=class n{reportService=F(pn);authService=F(ln);router=F(Et);toastService=F(Jn);description="";street="";barangay="";landmark="";city="Baguio City";priority="high";location=null;locationAccuracy=null;isGettingLocation=!1;locationError=null;selectedFile=null;imagePreview=null;imageUrl=null;isUploadingImage=!1;errorMessage=null;successMessage=null;isLoading=!1;validationErrors={};baguioBarangays=["A. Bonifacio-Caguioa-Rimando (ABCR)","Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)","Alfonso Tabora","Ambiong","Andres Bonifacio (Lower Bokawkan)","Apugan-Loakan","Asin Road","Atok Trail","Aurora Hill Proper (Malvar-Sgt. Floresca)","Aurora Hill, North Central","Aurora Hill, South Central","Bagong Lipunan (Market Area)","Baguio Dairy Farm","Bakakeng Central","Bakakeng North","Bal-Marcoville (Marcoville)","Balsigan","Bayan Park East","Bayan Park Village","Bayan Park West (Bayan Park)","BGH Compound","Brookside","Brookspoint","Cabinet Hill-Teacher's Camp","Camdas Subdivision","Camp 7","Camp 8","Camp Allen","Campo Filipino","City Camp Central","City Camp Proper","Country Club Village","Cresencia Village","Dagisitan","Dagsian, Lower","Dagsian, Upper","Dizon Subdivision","Dominican Hill-Mirador","Dontogan","DPS Area","Engineers' Hill","Fairview Village","Ferdinand (Happy Homes-Campo Sioco)","Fort del Pilar","Gabriel Silang","General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)","General Luna, Lower","General Luna, Upper","Gibraltar","Greenwater Village","Guisad Central","Guisad Sorong","Happy Hollow","Happy Homes (Happy Homes-Lucban)","Harrison-Claudio Carantes","Hillside","Holy Ghost Extension","Holy Ghost Proper","Honeymoon (Honeymoon-Holy Ghost)","Imelda R. Marcos (La Salle)","Imelda Village","Irisan","Kabayanihan","Kagitingan","Kayang Extension","Kayang-Hilltop","Kias","Legarda-Burnham-Kisad","Liwanag-Loakan","Loakan Proper","Lopez Jaena","Lourdes Subdivision Extension","Lourdes Subdivision, Lower","Lourdes Subdivision, Proper","Lualhati","Lucnab","Magsaysay Private Road","Magsaysay, Lower","Magsaysay, Upper","Malcolm Square-Perfecto (Jose Abad Santos)","Manuel A. Roxas","Market Subdivision, Upper","Middle Quezon Hill Subdivision (Quezon Hill Middle)","Military Cut-off","Mines View Park","Modern Site, East","Modern Site, West","MRR-Queen of Peace","New Lucban","Outlook Drive","Pacdal","Padre Burgos","Padre Zamora","Palma-Urbano (Cari\xF1o-Palma)","Phil-Am","Pinget","Pinsao Pilot Project","Pinsao Proper","Poliwes","Pucsusan","Quezon Hill Proper","Quezon Hill, Upper","Quirino Hill, East","Quirino Hill, Lower","Quirino Hill, Middle","Quirino Hill, West","Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)","Rizal Monument Area","Rock Quarry, Lower","Rock Quarry, Middle","Rock Quarry, Upper","Salud Mitra","San Antonio Village","San Luis Village","San Roque Village","San Vicente","Sanitary Camp, North","Sanitary Camp, South","Santa Escolastica","Santo Rosario","Santo Tomas Proper","Santo Tomas School Area","Scout Barrio","Session Road Area","Slaughter House Area (Santo Ni\xF1o Slaughter)","SLU-SVP Housing Village","South Drive","Teodora Alonzo","Trancoville","Upper General Luna","Victoria Village","Websters Subdivision"];filteredBarangays=[...this.baguioBarangays];showBarangaySuggestions=!1;recentReports=[];ngOnInit(){this.reportService.getAllReports().subscribe(e=>{this.recentReports=(e||[]).slice(-30).reverse()})}onSelectLocation(e){if(e){if(e.startsWith("brgy:")){let t=e.replace("brgy:","");this.barangay=t;let i=this.recentReports.find(r=>(r.barangay||"").toLowerCase()===t.toLowerCase());i&&i.location?(this.location=i.location,this.street=this.street||i.street||"",this.locationAccuracy=i.locationAccuracy||null,this.locationError=null):(this.location=null,this.locationAccuracy=null,this.locationError="No coordinates found for selected barangay from recent reports. You may use Get Current Location.")}else if(e.startsWith("rpt:")){let t=e.replace("rpt:",""),i=this.recentReports.find(r=>r.id===t);i&&(this.location=i.location||null,this.locationAccuracy=i.locationAccuracy||null,this.barangay=i.barangay||this.barangay,this.street=i.street||this.street,this.locationError=null)}}}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.showBarangaySuggestions=!0,!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.barangay=e,this.showBarangaySuggestions=!1,this.filteredBarangays=[...this.baguioBarangays]}getAddressFromCoordinates(e,t){return P(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,a=o.road||o.street||o.neighbourhood||"",l=o.suburb||o.neighbourhood||o.quarter||"";if(a&&!this.street&&(this.street=a),l){let u=this.baguioBarangays.find(f=>f.toLowerCase().includes(l.toLowerCase())||l.toLowerCase().includes(f.toLowerCase().split("(")[0].trim().toLowerCase()));u&&!this.barangay&&(this.barangay=u)}}}catch(i){console.warn("Could not fetch address details:",i)}})}getCurrentLocation(){if(!navigator.geolocation){this.locationError="Geolocation is not supported by your browser.";return}this.isGettingLocation=!0,this.locationError=null,navigator.geolocation.getCurrentPosition(e=>P(this,null,function*(){let t=e.coords.latitude,i=e.coords.longitude;t>=16.35&&t<=16.48&&i>=120.52&&i<=120.66?(this.location={lat:t,lng:i},this.locationAccuracy=e.coords.accuracy,this.locationError=null,yield this.getAddressFromCoordinates(t,i)):(this.locationError="Your location is outside Baguio City. Please ensure you are within Baguio City to report an incident.",this.location=null),this.isGettingLocation=!1}),e=>{switch(this.isGettingLocation=!1,e.code){case e.PERMISSION_DENIED:this.locationError="Location access denied. Please enable location access to submit a report.";break;case e.POSITION_UNAVAILABLE:this.locationError="Location information unavailable. Please check your GPS settings.";break;case e.TIMEOUT:this.locationError="Location request timed out. Please try again.";break;default:this.locationError="Unable to get your location. Please try again."}this.location=null},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}validateForm(){this.validationErrors={};let e=[];return this.description.trim()||(this.validationErrors.description="Description is required.",e.push("Description")),this.location||(this.validationErrors.location="Please select a location on the map.",e.push("Location")),this.barangay.trim()||(this.validationErrors.barangay="Barangay is required.",e.push("Barangay")),this.street.trim()||(this.validationErrors.street="Street is required.",e.push("Street")),e.length>0&&this.toastService.warning(`Please fill in: ${e.join(", ")}`),Object.keys(this.validationErrors).length===0}onSubmit(){return P(this,null,function*(){if(this.errorMessage=null,this.successMessage=null,!!this.validateForm()){this.isLoading=!0;try{let e=yield la(this.authService.currentUser$);if(!e){this.toastService.error("You must be logged in as admin to create reports."),this.errorMessage="You must be logged in as admin to create reports.",setTimeout(()=>this.router.navigate(["/login"]),900),this.isLoading=!1;return}if(!this.location){this.toastService.warning("Location is required. Please enable location access and try again."),this.errorMessage="Location is required. Please enable location access and try again.",this.isLoading=!1;return}let t={reporterId:"ADMIN",reporterName:"Police Admin",reporterEmail:e.email||"admin@mountainsentinel.com",description:this.description.trim(),street:this.street.trim(),barangay:this.barangay.trim(),landmark:this.landmark.trim()||void 0,city:this.city,priority:this.priority,location:this.location,locationAccuracy:this.locationAccuracy??void 0,timestamp:new Date().toISOString(),isAdminReport:!0,imageUrl:this.imageUrl||void 0};yield la(this.reportService.submitReport(t));let i=yield la(this.reportService.getAllReports()),r=i[i.length-1];r&&this.reportService.approveReport(r.id),this.toastService.success("Safety alert issued and published successfully!"),this.successMessage="Safety alert issued and published successfully!",this.clearForm(),setTimeout(()=>{this.router.navigate(["/admin-dashboard"])},1500)}catch(e){console.error("Report creation failed:",e),this.toastService.error("Submission failed. Please try again."),this.errorMessage="Submission failed. Please try again."}finally{this.isLoading=!1}}})}clearForm(){this.description="",this.street="",this.barangay="",this.landmark="",this.priority="high",this.location=null,this.locationAccuracy=null}onMapLocationSelected(e){this.location={lat:e.lat,lng:e.lng},this.locationAccuracy=10,this.locationError=null,this.validationErrors.location&&delete this.validationErrors.location,e.address?this.parseAddressToFields(e.address):this.reverseGeocodeAndFill(e.lat,e.lng)}parseAddressToFields(e){let t=e.split(",").map(i=>i.trim());for(let i of t){let r=this.baguioBarangays.find(o=>o.toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes(o.toLowerCase().split("(")[0].trim().toLowerCase()));if(r){this.barangay=r;break}}if(t.length>0&&!this.street){let i=t[0];this.baguioBarangays.some(r=>r.toLowerCase().includes(i.toLowerCase()))||(this.street=i)}}reverseGeocodeAndFill(e,t){return P(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,a=o.road||o.street||o.neighbourhood||o.hamlet||"";a&&!this.street&&(this.street=a);let l=o.suburb||o.neighbourhood||o.quarter||o.village||"";if(l){let u=this.baguioBarangays.find(f=>f.toLowerCase().includes(l.toLowerCase())||l.toLowerCase().includes(f.toLowerCase().split("(")[0].trim().toLowerCase()));u&&!this.barangay&&(this.barangay=u)}}}catch(i){console.warn("Could not reverse geocode for auto-fill:",i)}})}saveFormProgress(){}onFileSelected(e){let t=e.target;if(t.files&&t.files[0]){let i=t.files[0];if(!i.type.startsWith("image/")){this.toastService.error("Please select an image file.");return}if(i.size>5*1024*1024){this.toastService.error("Image size must be less than 5MB.");return}this.selectedFile=i;let r=new FileReader;r.onload=o=>{this.imagePreview=o.target?.result,this.imageUrl=this.imagePreview},r.readAsDataURL(i)}}removePhoto(){this.selectedFile=null,this.imagePreview=null,this.imageUrl=null}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-admin-report"]],decls:9,vars:4,consts:[["notLogged",""],["reportForm","ngForm"],[1,"admin-report-container"],[1,"subtitle"],[4,"ngIf","ngIfElse"],[3,"ngSubmit"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],[1,"admin-info-banner"],[1,"badge-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6.3 1 .9 1 1.5v3c0 1-.8 1.8-1.8 1.8h-4c-1 0-1.8-.8-1.8-1.8v-3c0-.6.4-1.2 1-1.5V9.5C9.2 8.1 10.6 7 12 7zm0 1.2c-.8 0-1.5.5-1.5 1.3v1.5h3V9.5c0-.8-.7-1.3-1.5-1.3z"],[1,"badge-text"],[1,"form-section"],[1,"section-title"],[1,"form-group"],["for","description"],["id","description","name","description","rows","5","required","","placeholder","Provide a detailed description of the incident...",3,"ngModelChange","ngModel"],["class","error-text",4,"ngIf"],["for","priority"],["id","priority","name","priority","required","",3,"ngModelChange","ngModel"],["value","high"],["value","medium"],["value","low"],[1,"form-group","map-picker-group"],[1,"help-text"],[3,"locationSelected","barangayInput","streetInput"],["class","location-confirmed-badge",4,"ngIf"],[1,"location-hierarchy"],[1,"hierarchy-label"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"form-group","barangay-group"],["for","barangay"],["id","barangay","type","text","name","barangay","required","","placeholder","Type to search barangay...","autocomplete","off",3,"ngModelChange","input","focus","blur","ngModel"],["class","barangay-suggestions",3,"mousedown",4,"ngIf"],["for","street"],["id","street","type","text","name","street","required","","placeholder","Enter street or purok...",3,"ngModelChange","ngModel"],["for","landmark"],["id","landmark","type","text","name","landmark","placeholder","e.g., Near Burnham Park, SM Baguio",3,"ngModelChange","ngModel"],["for","photo"],["id","photo","type","file","accept","image/*",3,"change"],["class","photo-preview",4,"ngIf"],[1,"button-group"],["type","submit",1,"submit-btn",3,"disabled"],["routerLink","/admin-dashboard",1,"cancel-btn"],[1,"message","success"],[1,"message","error"],[1,"error-text"],[1,"location-confirmed-badge"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"barangay-suggestions",3,"mousedown"],["class","suggestion-item",3,"click",4,"ngFor","ngForOf"],["class","suggestion-more",4,"ngIf"],[1,"suggestion-item",3,"click"],[1,"suggestion-more"],[1,"photo-preview"],["alt","Photo preview",3,"src"],["type","button",1,"remove-photo-btn",3,"click"],[1,"not-logged"],[1,"login-warning"],[1,"action-row"],["href","/login",1,"btn","login-btn"]],template:function(t,i){if(t&1&&(_(0,"div",2)(1,"h2"),w(2,"Issue Police Alert"),v(),_(3,"p",3),w(4,"This alert will be published immediately."),v(),te(5,bZ,75,18,"ng-container",4),xe(6,"async"),te(7,xZ,6,0,"ng-template",null,0,Ct),v()),t&2){let r=dt(8);C(5),$("ngIf",De(6,2,i.authService.currentUser$))("ngIfElse",r)}},dependencies:[ht,Dn,Ut,gn,Fd,tc,nc,yi,Zo,$i,Ld,Il,Ai,El,Kr,Hi,Vd,cn],styles:[".admin-report-container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;padding:50px 60px;background:linear-gradient(135deg,#e8eef5,#f0f4f8);border-radius:12px;box-shadow:0 4px 12px #00000026}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#1a2a5e;font-size:2.5rem;margin-bottom:10px;font-weight:700;letter-spacing:1px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:30px;font-size:1rem}.admin-info-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:20px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:8px;margin-bottom:30px;color:#fff;box-shadow:0 3px 8px #1a2a5e4d}.badge-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;height:50px;background:#ffffff26;border-radius:50%;flex-shrink:0}.badge-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px;color:#fff}.badge-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.badge-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.2rem}.badge-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.form-section[_ngcontent-%COMP%]{background:#f0f4f8;padding:25px;border-radius:8px;margin-bottom:25px;box-shadow:0 2px 4px #0000000d}.section-title[_ngcontent-%COMP%]{color:#1a2a5e;font-size:1.4rem;font-weight:700;margin-bottom:20px;padding-bottom:10px;border-bottom:3px solid #d4a84b}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700;color:#1a2a5e;font-size:1rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:14px;border:2px solid #c5cdd8;border-radius:6px;font-size:1rem;background:#f8fafc;transition:all .3s;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.photo-preview[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;align-items:flex-start;gap:8px}.photo-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:220px;max-height:180px;border-radius:8px;border:1px solid #c5cdd8;box-shadow:0 2px 8px #00000014}.remove-photo-btn[_ngcontent-%COMP%]{background:#d32f2f;color:#fff;border:none;border-radius:6px;padding:6px 14px;font-size:.95rem;cursor:pointer;margin-top:4px;transition:background .2s}.remove-photo-btn[_ngcontent-%COMP%]:hover{background:#b71c1c}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;z-index:1000;background:#fff;border:2px solid #1a2a5e;border-radius:8px;max-height:280px;overflow-y:auto;box-shadow:0 8px 24px #0003;margin-top:4px;width:100%;left:0;right:0}.suggestion-item[_ngcontent-%COMP%]{padding:14px 16px;cursor:pointer;transition:all .15s ease;border-bottom:1px solid #eef2f7;font-size:.95rem;color:#1a2a5e}.suggestion-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e8eef5,#f0f4f8);padding-left:20px}.suggestion-more[_ngcontent-%COMP%]{padding:10px 16px;text-align:center;color:#666;font-size:.85rem;background:#f8fafc;border-top:1px solid #eef2f7}.location-info[_ngcontent-%COMP%]{position:relative}.get-location-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:#1a2a5e;color:#fff;border:none;border-radius:6px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s;text-transform:uppercase;letter-spacing:1px;margin-bottom:15px}.get-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2a3f7a;transform:translateY(-2px);box-shadow:0 4px 12px #1a2a5e4d}.get-location-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.location-display[_ngcontent-%COMP%]{padding:15px;background:#fff;border:2px solid #c5cdd8;border-radius:6px;margin-bottom:15px}.location-coords[_ngcontent-%COMP%]{margin:8px 0;font-size:.95rem;color:#333}.location-accuracy[_ngcontent-%COMP%]{margin:8px 0;font-size:.9rem;color:#666;font-style:italic}.location-error[_ngcontent-%COMP%]{padding:12px;background:#ffebee;color:#c62828;border-radius:6px;border:2px solid #ef5350;margin-bottom:15px;font-weight:500}.help-text[_ngcontent-%COMP%]{font-size:.85rem;color:#666;margin:8px 0 0;font-style:italic}.hierarchy-note[_ngcontent-%COMP%]{color:#1a2a5e;font-size:.9rem;font-weight:600;margin-bottom:16px;padding:10px 14px;background:linear-gradient(135deg,#d4a84b1f,#d4a84b0d);border-left:3px solid #d4a84b;border-radius:4px}.readonly-field[_ngcontent-%COMP%]{background-color:#e9ecef!important;color:#6c757d!important;cursor:not-allowed}.barangay-group[_ngcontent-%COMP%]{position:relative}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;background:#fff;border:2px solid #1a2a5e;border-top:none;border-radius:0 0 8px 8px;max-height:280px;overflow-y:auto;width:100%;box-shadow:0 8px 24px #1a2a5e26;z-index:1000;color:#333;top:100%;left:0;right:0}.suggestion-item[_ngcontent-%COMP%]{padding:12px 15px;cursor:pointer;transition:all .15s ease;border-bottom:1px solid #e0e0e0;font-size:.95rem}.suggestion-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#1a2a5e;padding-left:18px}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-more[_ngcontent-%COMP%]{padding:10px 15px;background:#f0f4f8;color:#6c757d;font-style:italic;font-size:.85rem;text-align:center;border-top:1px solid #e0e0e0}.message[_ngcontent-%COMP%]{padding:15px;border-radius:6px;margin-bottom:20px;font-weight:600;text-align:center}.message.success[_ngcontent-%COMP%]{background:#c8e6c9;color:#2e7d32;border:2px solid #66bb6a}.message.error[_ngcontent-%COMP%]{background:#ffcdd2;color:#c62828;border:2px solid #ef5350}.error-text[_ngcontent-%COMP%]{display:block;color:#c62828;font-size:.85rem;margin-top:6px;font-weight:600}.button-group[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:30px}.submit-btn[_ngcontent-%COMP%]{flex:1;padding:16px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .3s;text-transform:uppercase;letter-spacing:1px;box-shadow:0 4px 12px #1a2a5e4d}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-2px);box-shadow:0 6px 16px #1a2a5e66}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.cancel-btn[_ngcontent-%COMP%]{flex:0 0 auto;padding:16px 30px;background:#9e9e9e;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s;text-decoration:none;text-align:center;display:flex;align-items:center;justify-content:center}.cancel-btn[_ngcontent-%COMP%]:hover{background:#757575;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.not-logged[_ngcontent-%COMP%]{text-align:center;padding:60px 40px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a}.login-warning[_ngcontent-%COMP%]{font-size:1.2rem;color:#666;margin-bottom:30px}.action-row[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}.login-btn[_ngcontent-%COMP%]{padding:14px 30px;background:#1a237e;color:#fff;text-decoration:none;border-radius:6px;font-weight:600;transition:all .3s}.login-btn[_ngcontent-%COMP%]:hover{background:#0d1654;transform:translateY(-2px);box-shadow:0 4px 12px #1a237e4d}.map-picker-group[_ngcontent-%COMP%]{margin-bottom:25px}.map-picker-group[_ngcontent-%COMP%]   app-interactive-location-picker[_ngcontent-%COMP%]{display:block;margin-top:10px;border-radius:12px;overflow:hidden;box-shadow:0 4px 16px #00000026}.location-confirmed-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:12px;padding:12px 16px;background:linear-gradient(135deg,#2ecc71,#27ae60);color:#fff;border-radius:8px;font-size:.9rem;font-weight:600;box-shadow:0 3px 10px #2ecc714d}.location-confirmed-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.location-hierarchy[_ngcontent-%COMP%]{margin:16px 0;padding:12px 16px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:8px;border-left:4px solid #d4a84b}.hierarchy-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#fff;font-size:.95rem;font-weight:500}.hierarchy-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;flex-shrink:0}@media (max-width: 768px){.admin-report-container[_ngcontent-%COMP%]{padding:30px 20px;margin:20px}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.button-group[_ngcontent-%COMP%]{flex-direction:column}.cancel-btn[_ngcontent-%COMP%]{flex:1}.barangay-suggestions[_ngcontent-%COMP%]{width:100%;max-height:220px}.suggestion-item[_ngcontent-%COMP%]{padding:12px 14px;font-size:.9rem}.map-picker-group[_ngcontent-%COMP%]   app-interactive-location-picker[_ngcontent-%COMP%]{border-radius:8px}.location-hierarchy[_ngcontent-%COMP%]{padding:10px 14px}.hierarchy-label[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 480px){.admin-report-container[_ngcontent-%COMP%]{padding:20px 16px;margin:10px}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.form-section[_ngcontent-%COMP%]{padding:18px}.section-title[_ngcontent-%COMP%]{font-size:1.2rem}.barangay-suggestions[_ngcontent-%COMP%]{max-height:180px}.suggestion-item[_ngcontent-%COMP%]{padding:10px 12px;font-size:.85rem}}"]})};function wZ(n,e){if(n&1){let t=ge();_(0,"button",11),X("click",function(){j(t);let r=T();return z(r.clearSearch())}),ie(),_(1,"svg",12),oe(2,"line",13)(3,"line",14),v()()}}function CZ(n,e){if(n&1&&(_(0,"div",24),oe(1,"img",25),v()),n&2){let t=T().$implicit;C(),$("src",t.imageUrl,Kt)}}function EZ(n,e){if(n&1&&(_(0,"div",19)(1,"div",20)(2,"h3"),w(3),v(),_(4,"span",21),w(5),v()(),_(6,"div",22)(7,"p")(8,"strong"),w(9,"Location:"),v(),w(10),v(),_(11,"p")(12,"strong"),w(13,"Reporter:"),v(),w(14),v(),_(15,"p")(16,"strong"),w(17,"Reported:"),v(),w(18),xe(19,"date"),v()(),te(20,CZ,2,1,"div",23),v()),n&2){let t=e.$implicit;C(3),ae(t.description),C(2),ae(t.status),C(5),bn(" ",t.street,", ",t.barangay),C(4),be(" ",t.reporterName||t.reporterId),C(4),be(" ",Pn(19,7,t.createdAt,"short")),C(2),$("ngIf",t.imageUrl)}}function IZ(n,e){if(n&1&&(Xe(0),te(1,EZ,21,10,"div",18),et()),n&2){let t=T().ngIf;C(),$("ngForOf",t)}}function SZ(n,e){n&1&&(_(0,"p"),w(1,"No incidents match your search. Try different keywords."),v())}function MZ(n,e){n&1&&(_(0,"p"),w(1,"No incidents reported at this time. Stay safe!"),v())}function PZ(n,e){if(n&1&&(_(0,"div",26),te(1,SZ,2,0,"p",27)(2,MZ,2,0,"p",27),v()),n&2){let t=T(2);C(),$("ngIf",t.searchQuery.value),C(),$("ngIf",!t.searchQuery.value)}}function TZ(n,e){if(n&1&&(_(0,"div",15)(1,"div",16),te(2,IZ,2,1,"ng-container",17)(3,PZ,3,2,"ng-template",null,1,Ct),v()()),n&2){let t=e.ngIf,i=dt(4);C(2),$("ngIf",t.length>0)("ngIfElse",i)}}function OZ(n,e){n&1&&(_(0,"div",28),w(1,"Loading safety feed..."),v())}var Sy=class n{reportService=F(pn);searchQuery=new _t("");allApprovedReports$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.status==="approved")));filteredReports$=Ii([this.allApprovedReports$,this.searchQuery.pipe(Vi(""))]).pipe(ue(([e,t])=>{if(!t.trim())return e;let i=t.toLowerCase();return e.filter(r=>{let o=(r.description||"").toLowerCase(),a=(r.street||"").toLowerCase(),l=(r.barangay||"").toLowerCase(),u=(r.landmark||"").toLowerCase(),f=(r.reporterName||"").toLowerCase(),g=(r.createdAt||"").toString().toLowerCase();return o.includes(i)||a.includes(i)||l.includes(i)||u.includes(i)||f.includes(i)||g.includes(i)})}));ngOnInit(){}onSearchChange(e){this.searchQuery.next(e)}clearSearch(){this.searchQuery.next("")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-safety-feed"]],decls:16,vars:6,consts:[["loading",""],["emptyFeed",""],[1,"safety-feed-container"],[1,"search-container"],[1,"search-wrapper"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Search by location, keyword, or date...","aria-label","Search incident reports",1,"report-search-input",3,"input","value"],["class","clear-search-btn","title","Clear search","aria-label","Clear search",3,"click",4,"ngIf"],["class","feed-wrapper",4,"ngIf","ngIfElse"],["title","Clear search","aria-label","Clear search",1,"clear-search-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"feed-wrapper"],[1,"feed-list"],[4,"ngIf","ngIfElse"],["class","feed-item approved",4,"ngFor","ngForOf"],[1,"feed-item","approved"],[1,"item-header"],[1,"status-badge"],[1,"item-details"],["class","item-image",4,"ngIf"],[1,"item-image"],["alt","Incident",3,"src"],[1,"empty-feed"],[4,"ngIf"],[1,"loading"]],template:function(t,i){if(t&1){let r=ge();_(0,"div",2)(1,"h2"),w(2,"Real-Time Safety Feed"),v(),_(3,"p"),w(4,"View approved incident reports in real-time."),v(),_(5,"div",3)(6,"div",4),ie(),_(7,"svg",5),oe(8,"circle",6)(9,"path",7),v(),pe(),_(10,"input",8),X("input",function(a){return j(r),z(i.onSearchChange(a.target.value))}),v(),te(11,wZ,4,0,"button",9),v()(),te(12,TZ,5,2,"div",10),xe(13,"async"),te(14,OZ,2,0,"ng-template",null,0,Ct),v()}if(t&2){let r=dt(15);C(10),$("value",i.searchQuery.value),C(),$("ngIf",i.searchQuery.value),C(),$("ngIf",De(13,4,i.filteredReports$))("ngIfElse",r)}},dependencies:[ht,Dn,Ut,gn,cn,qr],styles:[".safety-feed-container[_ngcontent-%COMP%]{padding:30px;max-width:1200px;margin:0 auto;display:flex;flex-direction:column;height:100vh}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%]{padding:20px 15px}}@media (max-width: 480px){.safety-feed-container[_ngcontent-%COMP%]{padding:15px 10px}}.safety-feed-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#1a3a52;margin-bottom:10px;text-align:center;flex-shrink:0}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.safety-feed-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:20px;flex-shrink:0}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:15px;font-size:.9rem}}.search-container[_ngcontent-%COMP%]{flex-shrink:0;margin-bottom:20px}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-icon[_ngcontent-%COMP%]{position:absolute;left:14px;color:#1a2a5e;pointer-events:none;z-index:1}.report-search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px;border:2px solid #e0e0e0;border-radius:8px;font-size:.95rem;background:#f8f9fa;color:#1a1a1a;transition:all .3s cubic-bezier(.4,0,.2,1);font-family:inherit}.report-search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.report-search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:12px;background:transparent;border:none;cursor:pointer;color:#999;padding:6px;display:flex;align-items:center;justify-content:center;transition:color .2s ease}.clear-search-btn[_ngcontent-%COMP%]:hover{color:#1a2a5e}.feed-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;border:1px solid #e0e0e0;border-radius:8px;background:#f5f5f5;padding:4px}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1a2a5e;border-radius:4px;transition:background .2s ease}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#2a3f7a}.feed-wrapper[_ngcontent-%COMP%]{scrollbar-color:#1a2a5e #f1f1f1;scrollbar-width:thin}.feed-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:8px}@media (max-width: 768px){.feed-list[_ngcontent-%COMP%]{gap:10px}}@media (max-width: 480px){.feed-list[_ngcontent-%COMP%]{gap:8px;padding:6px}}.feed-item[_ngcontent-%COMP%]{border-left:5px solid #ccc;padding:20px;margin-bottom:0;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;transition:box-shadow .2s ease}.feed-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001f}@media (max-width: 768px){.feed-item[_ngcontent-%COMP%]{padding:16px;border-radius:6px}}@media (max-width: 480px){.feed-item[_ngcontent-%COMP%]{padding:14px 12px}}.feed-item.approved[_ngcontent-%COMP%]{border-left-color:#4caf50}.feed-item.feed-item-high[_ngcontent-%COMP%]{border-left-color:#d32f2f;background-color:#fdeaea}.feed-item.feed-item-medium[_ngcontent-%COMP%]{border-left-color:#ffb300;background-color:#fff9e6}.feed-item.feed-item-low[_ngcontent-%COMP%]{border-left-color:#43a047;background-color:#edf7ed}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;font-weight:700;gap:12px}@media (max-width: 480px){.item-header[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:#333;flex:1}@media (max-width: 768px){.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:.75rem;font-weight:700;background:#4caf50;color:#fff;text-transform:uppercase;white-space:nowrap}.item-details[_ngcontent-%COMP%]{margin-bottom:12px}.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:.95rem;color:#555}@media (max-width: 768px){.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}}.type-tag[_ngcontent-%COMP%], .priority-tag[_ngcontent-%COMP%]{padding:2px 6px;border-radius:3px;font-size:.75rem;color:#fff}.type-tag[_ngcontent-%COMP%]{background-color:#3f51b5}.priority-tag.priority-high[_ngcontent-%COMP%]{background-color:#d32f2f}.priority-tag.priority-medium[_ngcontent-%COMP%]{background-color:#ffb300}.priority-tag.priority-low[_ngcontent-%COMP%]{background-color:#43a047}.item-description[_ngcontent-%COMP%]{margin:0 0 5px;font-size:.9rem}.item-footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.7rem}.empty-feed[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;border:2px dashed #ccc;color:#888;border-radius:8px;background:#fafafa}@media (max-width: 768px){.empty-feed[_ngcontent-%COMP%]{padding:30px 15px}}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;font-size:1rem}.item-image[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:center}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:250px;width:auto;height:auto;border-radius:8px;border:1px solid #ddd;box-shadow:0 2px 8px #0000001a}@media (max-width: 768px){.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}}@media (max-width: 480px){.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:180px}}"]})};var DZ=n=>({"no-image":n}),AZ=n=>["/report-detail",n],kZ=(n,e)=>e.id;function RZ(n,e){if(n&1){let t=ge();_(0,"button",24),X("click",function(){j(t);let r=T();return z(r.clearSearch())}),ie(),_(1,"svg",25),oe(2,"line",26)(3,"line",27),v()()}}function NZ(n,e){n&1&&(_(0,"div",28)(1,"div",29),ie(),_(2,"svg",30),oe(3,"path",9)(4,"line",31)(5,"line",32),v()(),pe(),_(6,"h3"),w(7,"No Police Reports Found"),v(),_(8,"p"),w(9,"There are no official alerts matching your criteria at this time."),v()())}function LZ(n,e){if(n&1&&(_(0,"span",51),ie(),_(1,"svg",52),oe(2,"path",53),v(),pe(),_(3,"span"),w(4),v()()),n&2){let t=T().$implicit;C(4),ae(t.landmark)}}function FZ(n,e){if(n&1&&(_(0,"div",54),oe(1,"img",55),v()),n&2){let t=T().$implicit;C(),$("src",t.imageUrl,Kt)}}function VZ(n,e){if(n&1&&(_(0,"div",34)(1,"div",35)(2,"span",36),w(3),v()(),_(4,"div",37)(5,"div",38),w(6),v(),_(7,"div",39)(8,"span",40),ie(),_(9,"svg",41),oe(10,"path",42)(11,"circle",43),v(),pe(),_(12,"span"),w(13),v()(),te(14,LZ,5,1,"span",44),_(15,"span",45),w(16),v()()(),te(17,FZ,2,1,"div",46),_(18,"div",47)(19,"a",48),ie(),_(20,"svg",25),oe(21,"line",49)(22,"polyline",50),v()()()()),n&2){let t=e.$implicit,i=T(3);Kc(ew("feed-item approved ",i.getPriorityClass(t.priority))),$("ngClass",A_(12,DZ,!t.imageUrl)),C(3),ae(i.getPriorityLabel(t.priority)),C(3),ae(t.description),C(7),bn("",t.street,"",t.barangay?", "+t.barangay:""),C(),$("ngIf",t.landmark),C(2),ae(i.formatDate(t.createdAt)),C(),$("ngIf",t.imageUrl),C(2),$("routerLink",A_(14,AZ,t.id))}}function BZ(n,e){if(n&1&&Gc(0,VZ,23,16,"div",33,kZ),n&2){let t=T();qc(t)}}function UZ(n,e){n&1&&Ee(0,NZ,10,0,"div",28)(1,BZ,2,0),n&2&&Ie(e.length===0?0:1)}var My=class n{reportService=F(pn);searchQuery=new _t("");selectedPriority=new _t("all");allPoliceReports$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.isAdminReport&&t.status==="approved")));filteredReports$=Ii([this.allPoliceReports$,this.searchQuery.pipe(Vi("")),this.selectedPriority.pipe(Vi("all"))]).pipe(ue(([e,t,i])=>{let r=e;if(i!=="all"&&(r=r.filter(o=>o.priority===i)),t.trim()){let o=t.toLowerCase();r=r.filter(a=>{let l=(a.description||"").toLowerCase(),u=(a.street||"").toLowerCase(),f=(a.barangay||"").toLowerCase(),g=(a.landmark||"").toLowerCase();return l.includes(o)||u.includes(o)||f.includes(o)||g.includes(o)})}return r.sort((o,a)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}));ngOnInit(){}onSearchChange(e){this.searchQuery.next(e)}clearSearch(){this.searchQuery.next("")}onPriorityChange(e){this.selectedPriority.next(e)}getPriorityClass(e){switch(e){case"high":return"priority-high";case"medium":return"priority-medium";case"low":return"priority-low";default:return"priority-medium"}}getPriorityLabel(e){switch(e){case"high":return"Urgent";case"medium":return"Important";case"low":return"Advisory";default:return"Alert"}}formatDate(e){let t=new Date(e),i=new Date,r=i.getTime()-t.getTime(),o=Math.floor(r/6e4),a=Math.floor(r/36e5),l=Math.floor(r/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:l<7?`${l}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==i.getFullYear()?"numeric":void 0})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-police-issuance-reports"]],decls:40,vars:25,consts:[[1,"police-reports-page"],[1,"page-header"],["routerLink","/","aria-label","Go back to dashboard",1,"back-button"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M19 12H5"],["points","12 19 5 12 12 5"],[1,"header-content"],[1,"header-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],[1,"header-text"],[1,"controls-section"],[1,"search-container"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","placeholder","Search alerts...",1,"search-input",3,"ngModelChange","ngModel"],["aria-label","Clear search",1,"clear-search"],[1,"filter-tabs"],[1,"filter-tab",3,"click"],[1,"filter-tab","priority-high",3,"click"],[1,"filter-tab","priority-medium",3,"click"],[1,"filter-tab","priority-low",3,"click"],[1,"reports-list"],["aria-label","Clear search",1,"clear-search",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"empty-state"],[1,"empty-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[3,"class","ngClass"],[3,"ngClass"],[1,"item-header"],[1,"status-badge"],[1,"item-details"],[1,"report-desc"],[1,"meta-row"],[1,"location-row"],["width","16","height","16","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["class","landmark-row",4,"ngIf"],[1,"date-row"],["class","item-image",4,"ngIf"],[1,"item-footer"],[1,"view-details-btn",3,"routerLink"],["x1","5","y1","12","x2","19","y2","12"],["points","12 5 19 12 12 19"],[1,"landmark-row"],["width","14","height","14","fill","none","stroke","currentColor","stroke-width","2"],["d","M3 21h18M9 8h1M9 12h1M9 16h1M14 8h1M14 12h1M14 16h1M5 21V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16"],[1,"item-image"],["alt","Incident",3,"src"]],template:function(t,i){if(t&1&&(_(0,"div",0)(1,"header",1)(2,"a",2),ie(),_(3,"svg",3),oe(4,"path",4)(5,"polyline",5),v()(),pe(),_(6,"div",6)(7,"div",7),ie(),_(8,"svg",8),oe(9,"path",9),v()(),pe(),_(10,"div",10)(11,"h1"),w(12,"Police Issuance Reports"),v(),_(13,"p"),w(14,"Official alerts issued by Baguio City authorities"),v()()()(),_(15,"section",11)(16,"div",12),ie(),_(17,"svg",13),oe(18,"circle",14)(19,"line",15),v(),pe(),_(20,"input",16),xe(21,"async"),X("ngModelChange",function(o){return i.onSearchChange(o)}),v(),Ee(22,RZ,4,0,"button",17),xe(23,"async"),v(),_(24,"div",18)(25,"button",19),xe(26,"async"),X("click",function(){return i.onPriorityChange("all")}),w(27," All "),v(),_(28,"button",20),xe(29,"async"),X("click",function(){return i.onPriorityChange("high")}),w(30," Urgent "),v(),_(31,"button",21),xe(32,"async"),X("click",function(){return i.onPriorityChange("medium")}),w(33," Important "),v(),_(34,"button",22),xe(35,"async"),X("click",function(){return i.onPriorityChange("low")}),w(36," Advisory "),v()()(),_(37,"main",23),Ee(38,UZ,2,1),xe(39,"async"),v()()),t&2){let r;C(20),$("ngModel",De(21,11,i.searchQuery)),C(2),Ie(De(23,13,i.searchQuery)!==""?22:-1),C(3),ke("active",De(26,15,i.selectedPriority)==="all"),C(3),ke("active",De(29,17,i.selectedPriority)==="high"),C(3),ke("active",De(32,19,i.selectedPriority)==="medium"),C(3),ke("active",De(35,21,i.selectedPriority)==="low"),C(4),Ie((r=De(39,23,i.filteredReports$))?38:-1,r)}},dependencies:[ht,Es,Ut,gn,yi,$i,Ai,Kr,Hi,cn],styles:[".police-reports-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#0d1a3d,#1a2a5e,#0d1a3d);padding:12px 12px 32px}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);padding:10px 16px;display:flex;align-items:center;gap:12px;border-bottom:1px solid rgba(212,168,75,.2);position:sticky;top:0;z-index:10;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}.back-button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#ffffff1a;border:1px solid rgba(255,255,255,.15);color:#fff;text-decoration:none}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;background:#ffffff14;display:flex;align-items:center;justify-content:center;color:#d4a84b}.header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;color:#fff}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0 0;color:#ffffffbf;font-size:.95rem}.controls-section[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:12px auto 0;display:flex;flex-direction:column;gap:10px;align-items:center}.search-container[_ngcontent-%COMP%]{width:100%;max-width:720px;display:flex;align-items:center;position:relative;background:#fff;border:1px solid #dcdfe6;border-radius:12px;padding:10px 12px;box-shadow:0 4px 16px #00000014}.search-icon[_ngcontent-%COMP%]{width:18px;height:18px;color:#888;margin-right:10px}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;font-size:1rem;color:#333}.clear-search[_ngcontent-%COMP%]{border:none;background:transparent;cursor:pointer;padding:4px;color:#888}.filter-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}.filter-tab[_ngcontent-%COMP%]{padding:10px 16px;border-radius:24px;border:1px solid rgba(255,255,255,.2);background:#ffffff14;color:#fff;cursor:pointer;transition:all .2s ease}.filter-tab.active[_ngcontent-%COMP%]{background:#d4a84b33;border-color:#d4a84b;color:#d4a84b}.filter-tab.priority-high.active[_ngcontent-%COMP%]{background:#c41e3a2e;border-color:#c41e3a;color:#ff6b6b}.filter-tab.priority-medium.active[_ngcontent-%COMP%]{background:#d4a84b33;border-color:#d4a84b;color:#d4a84b}.filter-tab.priority-low.active[_ngcontent-%COMP%]{background:#2ecc7133;border-color:#2ecc71;color:#2ecc71}.reports-list[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:16px auto 24px;padding:0 12px;display:flex;flex-direction:column;gap:16px;align-items:center}.feed-item[_ngcontent-%COMP%]{border-left:5px solid #ccc;padding:24px 20px 16px;margin-bottom:12px;background-color:#fff;border-radius:12px;box-shadow:0 4px 16px #0000001a;transition:box-shadow .2s ease;width:100%;max-width:720px;word-break:break-word;display:flex;flex-direction:column;gap:12px}.feed-item[_ngcontent-%COMP%]:hover{box-shadow:0 6px 18px #00000024}.feed-item.approved[_ngcontent-%COMP%]{border-left-color:#4caf50}.feed-item.priority-high[_ngcontent-%COMP%]{border-left-color:#c41e3a}.feed-item.priority-medium[_ngcontent-%COMP%]{border-left-color:#d4a84b}.feed-item.priority-low[_ngcontent-%COMP%]{border-left-color:#2ecc71}.feed-item.no-image[_ngcontent-%COMP%]{padding-bottom:8px}.feed-item.no-image[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{display:none}.item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:10px;font-size:.8rem;font-weight:600;text-transform:capitalize;background:#0000000f;color:#333}.item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.report-desc[_ngcontent-%COMP%]{font-size:1.08rem;color:#222;font-weight:600;margin:0}.meta-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:14px;align-items:center;font-size:.98rem;color:#444}.meta-row[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%], .meta-row[_ngcontent-%COMP%]   .landmark-row[_ngcontent-%COMP%], .meta-row[_ngcontent-%COMP%]   .date-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.meta-row[_ngcontent-%COMP%]   .date-row[_ngcontent-%COMP%]{color:#888;font-size:.95rem}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:220px;width:auto;height:auto;border-radius:8px;border:1px solid #ddd;box-shadow:0 2px 8px #00000014;margin:0 auto;display:block}.item-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:6px}.view-details-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:10px;background:linear-gradient(135deg,#d4a84b,#c9a227);color:#1a2a5e;text-decoration:none;font-weight:600;transition:all .2s ease}.view-details-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #d4a84b59;transform:translateY(-1px)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 24px;color:#fff}.empty-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 18px;border-radius:50%;background:#ffffff0d;display:flex;align-items:center;justify-content:center;color:#fff9}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#ffffffb3}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{padding:10px 12px}.header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem}.controls-section[_ngcontent-%COMP%]{padding:0 8px}.feed-item[_ngcontent-%COMP%]{padding:18px 14px 12px}.report-desc[_ngcontent-%COMP%]{font-size:1rem}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:180px}}@media (max-width: 480px){.filter-tab[_ngcontent-%COMP%]{padding:8px 12px}.meta-row[_ngcontent-%COMP%]{gap:10px}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:150px}}"]})};function jZ(n,e){if(n&1&&(_(0,"option",19),w(1),v()),n&2){let t=e.$implicit;$("value",t),C(),be(" ",t," ")}}function zZ(n,e){if(n&1){let t=ge();_(0,"div",7)(1,"select",8),yt("ngModelChange",function(r){j(t);let o=T(2);return wt(o.filterBarangay,r)||(o.filterBarangay=r),z(r)}),_(2,"option",17),w(3,"All Barangays"),v(),te(4,jZ,2,2,"option",18),v()()}if(n&2){let t=T(2);C(),vt("ngModel",t.filterBarangay),C(3),$("ngForOf",t.barangayList)}}function HZ(n,e){if(n&1&&(_(0,"p"),w(1," Showing "),_(2,"strong"),w(3),v(),w(4," of "),_(5,"strong"),w(6),v(),w(7," reports "),v()),n&2){let t=T().ngIf,i=T().ngIf;C(3),ae(t.length),C(3),ae(i.length)}}function $Z(n,e){if(n&1&&(_(0,"div",20),te(1,HZ,8,2,"p",21),v()),n&2){let t=T().ngIf;C(),$("ngIf",t.length>0)}}function GZ(n,e){if(n&1&&(_(0,"p")(1,"strong"),w(2,"City:"),v(),w(3),v()),n&2){let t=T().$implicit;C(3),be(" ",t.city)}}function qZ(n,e){if(n&1&&(_(0,"p",28)(1,"strong"),w(2,"GPS:"),v(),_(3,"span",30),w(4),xe(5,"number"),xe(6,"number"),v()()),n&2){let t=T().$implicit;C(4),bn("",Pn(5,2,t.location.lat,"1.4-4"),", ",Pn(6,5,t.location.lng,"1.4-4"))}}function WZ(n,e){if(n&1&&(_(0,"div",31),oe(1,"img",32),v()),n&2){let t=T().$implicit;C(),$("src",t.imageUrl,Kt)}}function KZ(n,e){if(n&1&&(_(0,"div",24)(1,"div",25)(2,"h3"),w(3),v(),_(4,"span",26),w(5),xe(6,"uppercase"),v()(),_(7,"div",27)(8,"p")(9,"strong"),w(10,"Location:"),v(),w(11),v(),_(12,"p")(13,"strong"),w(14,"Reporter:"),v(),w(15),v(),_(16,"p")(17,"strong"),w(18,"Submitted:"),v(),w(19),xe(20,"date"),v(),Ee(21,GZ,4,1,"p"),Ee(22,qZ,7,8,"p",28),v(),te(23,WZ,2,1,"div",29),v()),n&2){let t=e.$implicit;C(3),ae(t.description),C(),Kc("priority-"+(t.priority||"medium")),C(),be(" ",De(6,11,t.priority||"medium")," "),C(6),bn(" ",t.street,", ",t.barangay),C(4),be(" ",t.reporterName||"N/A"),C(4),be(" ",Pn(20,13,t.createdAt,"short")," "),C(2),Ie(t.city?21:-1),C(),Ie(t.location?22:-1),C(),$("ngIf",t.imageUrl)}}function ZZ(n,e){if(n&1&&(Xe(0),te(1,KZ,24,16,"div",23),et()),n&2){let t=T().ngIf;C(),$("ngForOf",t)}}function YZ(n,e){n&1&&(_(0,"p"),w(1,"No approved reports available at this time."),v())}function QZ(n,e){n&1&&(_(0,"p"),w(1," No reports match your search criteria. "),v())}function JZ(n,e){if(n&1&&(_(0,"div",33),te(1,YZ,2,0,"p",21)(2,QZ,2,0,"p",21),v()),n&2){let t=T(2).ngIf,i=T();C(),$("ngIf",t.length===0),C(),$("ngIf",t.length>0&&i.getFilteredReports(t).length===0)}}function XZ(n,e){if(n&1&&(_(0,"div",22),te(1,ZZ,2,1,"ng-container",3)(2,JZ,3,2,"ng-template",null,1,Ct),v()),n&2){let t=e.ngIf,i=dt(3);C(),$("ngIf",t.length>0)("ngIfElse",i)}}function eY(n,e){if(n&1){let t=ge();_(0,"div")(1,"div",4)(2,"div",5)(3,"input",6),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.searchTerm,r)||(o.searchTerm=r),z(r)}),v()(),_(4,"div",7)(5,"select",8),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.filterPriority,r)||(o.filterPriority=r),z(r)}),_(6,"option",9),w(7,"All Priorities"),v(),_(8,"option",10),w(9,"High Priority"),v(),_(10,"option",11),w(11,"Medium Priority"),v(),_(12,"option",12),w(13,"Low Priority"),v()()(),te(14,zZ,5,2,"div",13),_(15,"button",14),X("click",function(){j(t);let r=T();return z(r.resetFilters())}),w(16,"Reset Filters"),v()(),te(17,$Z,2,1,"div",15)(18,XZ,4,2,"div",16),v()}if(n&2){let t=e.ngIf,i=T();C(3),vt("ngModel",i.searchTerm),C(2),vt("ngModel",i.filterPriority),C(9),$("ngIf",i.uniqueBarangays.size>0),C(3),$("ngIf",i.getFilteredReports(t)),C(),$("ngIf",i.getFilteredReports(t))}}function tY(n,e){n&1&&(_(0,"div",34),w(1,"Loading reports..."),v())}var Py=class n{reportService=F(pn);searchTerm="";filterPriority="all";filterBarangay="";uniqueBarangays=new Set;approvedReports$=this.reportService.getAllReports().pipe(ue(e=>{let t=e.filter(i=>i.status==="approved");return this.uniqueBarangays=new Set(t.map(i=>i.barangay).filter(i=>i)),t}));get barangayList(){return Array.from(this.uniqueBarangays)}getFilteredReports(e){let t=e;if(this.searchTerm.trim()){let i=this.searchTerm.toLowerCase();t=t.filter(r=>r.description.toLowerCase().includes(i)||r.street?.toLowerCase().includes(i)||r.barangay?.toLowerCase().includes(i)||r.reporterName?.toLowerCase().includes(i))}return this.filterPriority!=="all"&&(t=t.filter(i=>i.priority===this.filterPriority)),this.filterBarangay&&(t=t.filter(i=>i.barangay===this.filterBarangay)),t}resetFilters(){this.searchTerm="",this.filterPriority="all",this.filterBarangay=""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-user-dashboard"]],decls:9,vars:4,consts:[["loading",""],["noReports",""],[1,"user-dashboard-container"],[4,"ngIf","ngIfElse"],[1,"filters-bar"],[1,"filter-group","search-group"],["type","text","placeholder","Search by description, location, or reporter name...",1,"search-input",3,"ngModelChange","ngModel"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","high"],["value","medium"],["value","low"],["class","filter-group",4,"ngIf"],[1,"btn-reset",3,"click"],["class","results-info",4,"ngIf"],["class","reports-scroll-container",4,"ngIf"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"results-info"],[4,"ngIf"],[1,"reports-scroll-container"],["class","report-card",4,"ngFor","ngForOf"],[1,"report-card"],[1,"report-header"],[1,"status-badge","approved"],[1,"report-details"],[1,"gps-info"],["class","report-image",4,"ngIf"],[1,"coords"],[1,"report-image"],["alt","Incident image",3,"src"],[1,"no-reports"],[1,"loading"]],template:function(t,i){if(t&1&&(_(0,"div",2)(1,"h2"),w(2,"Report Management"),v(),_(3,"p"),w(4,"View all approved incident reports in Baguio City."),v(),te(5,eY,19,5,"div",3),xe(6,"async"),te(7,tY,2,0,"ng-template",null,0,Ct),v()),t&2){let r=dt(8);C(5),$("ngIf",De(6,2,i.approvedReports$))("ngIfElse",r)}},dependencies:[ht,Dn,Ut,gn,tc,nc,yi,Zo,$i,Ai,cn,Is,xf,qr],styles:[".user-dashboard-container[_ngcontent-%COMP%]{max-width:900px;margin:30px auto;padding:20px}.user-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:2rem;font-weight:800;letter-spacing:-.5px;border-bottom:2px solid #1a2a5e;padding-bottom:15px;margin-bottom:10px}.user-dashboard-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:20px;font-size:.95rem}.filters-bar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:20px;padding:20px;background-color:#fff;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014}.filter-group[_ngcontent-%COMP%]{flex:1;min-width:150px}.filter-group.search-group[_ngcontent-%COMP%]{flex:1 1 100%;min-width:100%}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%]{width:100%;padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;font-size:.95rem;font-family:inherit;background-color:#f8f9fa;color:#333;transition:all .3s cubic-bezier(.4,0,.2,1)}.search-input[_ngcontent-%COMP%]:hover, .filter-select[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background-color:#fff}.search-input[_ngcontent-%COMP%]:focus, .filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background-color:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.btn-reset[_ngcontent-%COMP%]{padding:12px 24px;background-color:#fff;border:2px solid #e0e0e0;border-radius:8px;font-size:.9rem;font-weight:600;color:#333;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:44px}.btn-reset[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#1a2a5e;color:#1a2a5e;transform:translateY(-2px);box-shadow:0 8px 24px #1a2a5e26}@media (max-width: 768px){.filters-bar[_ngcontent-%COMP%]{gap:10px;padding:12px}.filter-group[_ngcontent-%COMP%]{min-width:120px}.btn-reset[_ngcontent-%COMP%]{padding:8px 12px;font-size:.85rem}}@media (max-width: 480px){.filters-bar[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%], .filter-group.search-group[_ngcontent-%COMP%]{flex:1 1 100%;min-width:100%}}.results-info[_ngcontent-%COMP%]{margin-bottom:12px;padding:8px 0;font-size:.9rem;color:#666}.results-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.reports-scroll-container[_ngcontent-%COMP%]{height:600px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:12px;padding:16px;background-color:#fff;display:flex;flex-direction:column;gap:16px;box-shadow:0 4px 12px #0000000f}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f5f5;border-radius:10px}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:10px}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#764ba2,#667eea);box-shadow:0 0 6px #667eea4d}.reports-scroll-container[_ngcontent-%COMP%]{scrollbar-color:#667eea #f5f5f5;scrollbar-width:thin}@media (max-width: 768px){.reports-scroll-container[_ngcontent-%COMP%]{height:500px}}@media (max-width: 480px){.reports-scroll-container[_ngcontent-%COMP%]{height:400px}}.report-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:12px;padding:20px;background-color:#fff;box-shadow:0 2px 8px #0000000f;transition:all .3s cubic-bezier(.4,0,.2,1);flex-shrink:0}.report-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #667eea26;border-color:#667eea;transform:translateY(-4px)}.report-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;gap:10px}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#1a1a1a;font-size:1.05rem;font-weight:700;flex:1;word-break:break-word}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;border-radius:20px;font-size:.75rem;font-weight:700;white-space:nowrap;text-transform:uppercase;letter-spacing:.5px}.status-badge.priority-high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff;box-shadow:0 4px 12px #ff6b6b33}.status-badge.priority-medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa94d,#fd7e14);color:#fff;box-shadow:0 4px 12px #ffa04d33}.status-badge.priority-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff;box-shadow:0 4px 12px #51cf6633}.report-details[_ngcontent-%COMP%]{margin-bottom:12px;line-height:1.6;font-size:.9rem}.report-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#555}.report-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a1a1a;font-weight:600}.coords[_ngcontent-%COMP%]{font-family:Monaco,Courier New,monospace;background-color:#f8f9fa;padding:4px 8px;border-radius:4px;font-size:.85rem;color:#667eea}.gps-info[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.report-image[_ngcontent-%COMP%]{margin-top:12px;display:flex;justify-content:center}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;max-height:150px;width:auto;height:auto;border-radius:8px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014;transition:all .3s cubic-bezier(.4,0,.2,1)}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 24px #667eea33}.no-reports[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999;font-size:.95rem;display:flex;align-items:center;justify-content:center;min-height:200px}.no-reports[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999;font-style:italic}@media (max-width: 480px){.report-card[_ngcontent-%COMP%]{padding:12px}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.95rem}.report-details[_ngcontent-%COMP%]{font-size:.85rem}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:100px}}"]})};function nY(n,e){if(n&1){let t=ge();_(0,"div",6)(1,"div",7)(2,"strong"),w(3),v(),_(4,"button",8),X("click",function(){j(t);let r=T();return z(r.closeAlert())}),w(5,"\xD7"),v()()()}if(n&2){let t=T();C(3),ae(t.sosMessage)}}function iY(n,e){if(n&1&&(_(0,"div",18)(1,"span",19),w(2,"GPS Location:"),v(),_(3,"span",24),w(4),v()()),n&2){let t=T(4);C(4),bn(" ",t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null||t.selectedSOS.sosDetails.location.lat==null?null:t.selectedSOS.sosDetails.location.lat.toFixed(6),", ",t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null||t.selectedSOS.sosDetails.location.lng==null?null:t.selectedSOS.sosDetails.location.lng.toFixed(6)," ")}}function rY(n,e){if(n&1&&(_(0,"div",18)(1,"span",19),w(2,"Map Link:"),v(),_(3,"a",25),w(4," Open in Google Maps "),v()()),n&2){let t=T(4);C(3),$("href","https://www.google.com/maps?q="+(t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null?null:t.selectedSOS.sosDetails.location.lat)+","+(t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null?null:t.selectedSOS.sosDetails.location.lng),Kt)}}function oY(n,e){if(n&1){let t=ge();_(0,"div",26)(1,"button",27),X("click",function(){j(t);let r=T(4);return z(r.respondToSOS(r.selectedSOS.id))}),w(2," Mark as Responded "),v()()}}function sY(n,e){if(n&1){let t=ge();_(0,"div",26)(1,"button",28),X("click",function(){j(t);let r=T(4);return z(r.resolveSOS(r.selectedSOS.id))}),w(2," Mark as Resolved "),v()()}}function aY(n,e){n&1&&(_(0,"div",29),w(1," This emergency has been resolved. "),v())}function cY(n,e){if(n&1){let t=ge();_(0,"div",12),X("click",function(){j(t);let r=T(3);return z(r.closeSOSDetail())}),_(1,"div",13),X("click",function(r){return j(t),z(r.stopPropagation())}),_(2,"div",14)(3,"h3"),w(4,"Emergency SOS Details"),v(),_(5,"button",15),X("click",function(){j(t);let r=T(3);return z(r.closeSOSDetail())}),w(6,"\xD7"),v()(),_(7,"div",16)(8,"div",17),w(9),xe(10,"uppercase"),v(),_(11,"div",18)(12,"span",19),w(13,"Reporter Name:"),v(),_(14,"span",20),w(15),v()(),_(16,"div",18)(17,"span",19),w(18,"Email:"),v(),_(19,"span",20),w(20),v()(),_(21,"div",18)(22,"span",19),w(23,"Time Reported:"),v(),_(24,"span",20),w(25),xe(26,"date"),v()(),te(27,iY,5,2,"div",21)(28,rY,5,1,"div",21),v(),te(29,oY,3,0,"div",22)(30,sY,3,0,"div",22)(31,aY,2,0,"div",23),v()()}if(n&2){let t=T(3);C(8),$("ngClass","status-"+(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)),C(),be(" ",De(10,10,t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)," "),C(6),ae(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.userName),C(5),ae(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.userEmail),C(5),ae(Pn(26,12,t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.timestamp,"medium")),C(2),$("ngIf",t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.location),C(),$("ngIf",t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.location),C(),$("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="pending"),C(),$("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="responded"),C(),$("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="resolved")}}function lY(n,e){if(n&1){let t=ge();_(0,"div",49)(1,"span",50),w(2),xe(3,"uppercase"),v(),_(4,"button",51),X("click",function(r){j(t);let o=T().$implicit;return T(5).onNotificationClick(o),z(r.stopPropagation())}),w(5," View Details "),v()()}if(n&2){let t=T().$implicit;C(),$("ngClass","status-"+t.sosDetails.status),C(),be(" ",De(3,2,t.sosDetails.status)," ")}}function uY(n,e){if(n&1){let t=ge();_(0,"button",52),X("click",function(r){j(t);let o=T().$implicit;return T(5).quickRespondToSOS(o),z(r.stopPropagation())}),ie(),_(1,"svg",46),oe(2,"path",53),v(),w(3," Respond "),v()}}function dY(n,e){if(n&1){let t=ge();_(0,"button",54),X("click",function(r){j(t);let o=T().$implicit;return T(5).markAsRead(o.id),z(r.stopPropagation())}),ie(),_(1,"svg",55),oe(2,"polyline",56),v()()}}function hY(n,e){if(n&1){let t=ge();_(0,"div",36),xe(1,"async"),oe(2,"div",37),_(3,"div",38),X("click",function(){let r=j(t).$implicit,o=T(5);return z(o.onNotificationClick(r))}),_(4,"p",39),w(5),v(),_(6,"small",40),w(7),xe(8,"date"),v(),te(9,lY,6,4,"div",41),v(),_(10,"div",42),te(11,uY,4,0,"button",43)(12,dY,3,0,"button",44),_(13,"button",45),X("click",function(r){let o=j(t).$implicit;return T(5).deleteNotification(o.id),z(r.stopPropagation())}),ie(),_(14,"svg",46),oe(15,"polyline",47)(16,"path",48),v()()()()}if(n&2){let t=e.$implicit,i=T(5);ke("clickable",t.sosDetails&&De(1,9,i.isAdmin$)),$("ngClass",i.getNotificationClass(t)),C(2),$("innerHTML",i.getNotificationIcon(t.type),y_),C(3),ae(t.message),C(2),be(" ",Pn(8,11,t.createdAt,"short")," "),C(2),$("ngIf",t.sosDetails),C(2),$("ngIf",t.sosDetails&&t.sosDetails.status==="pending"),C(),$("ngIf",!t.read)}}function fY(n,e){if(n&1){let t=ge();Xe(0),_(1,"div",31)(2,"p",32)(3,"strong"),w(4,"Emergency SOS Alerts"),v(),w(5," - You have "),_(6,"strong"),w(7),v(),w(8," alert(s) "),v(),_(9,"button",33),X("click",function(){j(t);let r=T(4);return z(r.clearAll())}),w(10,"Clear All"),v()(),_(11,"div",34),te(12,hY,17,14,"div",35),v(),et()}if(n&2){let t=T().ngIf;C(7),ae(t.length),C(5),$("ngForOf",t)}}function pY(n,e){n&1&&(_(0,"div",57)(1,"p"),w(2,"No emergency SOS alerts at this time."),v()())}function gY(n,e){if(n&1&&(_(0,"div",30),te(1,fY,13,2,"ng-container",5)(2,pY,3,0,"ng-template",null,2,Ct),v()),n&2){let t=e.ngIf,i=dt(3);C(),$("ngIf",t.length>0)("ngIfElse",i)}}function mY(n,e){if(n&1&&(Xe(0),te(1,cY,32,15,"div",10)(2,gY,4,2,"div",11),xe(3,"async"),et()),n&2){let t=T(2),i=dt(9);C(),$("ngIf",t.selectedSOS),C(),$("ngIf",De(3,3,t.adminNotifications$))("ngIfElse",i)}}function _Y(n,e){if(n&1&&(_(0,"p",66),w(1),v()),n&2){let t=T(2).$implicit;C(),be(" Admin Note: ",t.reportDetails.adminNote," ")}}function vY(n,e){if(n&1&&(_(0,"div",63)(1,"span",64),w(2),xe(3,"uppercase"),v(),te(4,_Y,2,1,"p",65),v()),n&2){let t=T().$implicit;C(),$("ngClass","status-"+t.reportDetails.action),C(),be(" Report ",De(3,3,t.reportDetails.action)," "),C(2),$("ngIf",t.reportDetails.adminNote)}}function yY(n,e){if(n&1){let t=ge();_(0,"button",54),X("click",function(r){j(t);let o=T().$implicit;return T(5).markAsRead(o.id),z(r.stopPropagation())}),ie(),_(1,"svg",55),oe(2,"polyline",56),v()()}}function bY(n,e){if(n&1){let t=ge();_(0,"div",60),oe(1,"div",37),_(2,"div",61)(3,"p",39),w(4),v(),_(5,"small",40),w(6),xe(7,"date"),v(),te(8,vY,5,5,"div",62),v(),_(9,"div",42),te(10,yY,3,0,"button",44),_(11,"button",45),X("click",function(r){let o=j(t).$implicit;return T(5).deleteNotification(o.id),z(r.stopPropagation())}),ie(),_(12,"svg",46),oe(13,"polyline",47)(14,"path",48),v()()()()}if(n&2){let t=e.$implicit,i=T(5);$("ngClass",i.getNotificationClass(t)),C(),$("innerHTML",i.getNotificationIcon(t.type),y_),C(3),ae(t.message),C(2),be(" ",Pn(7,6,t.createdAt,"short")," "),C(2),$("ngIf",t.reportDetails),C(2),$("ngIf",!t.read)}}function xY(n,e){if(n&1){let t=ge();Xe(0),_(1,"div",31)(2,"p",32)(3,"strong"),w(4,"Your Updates"),v(),w(5," - You have "),_(6,"strong"),w(7),v(),w(8," notification(s) "),v(),_(9,"button",33),X("click",function(){j(t);let r=T(4);return z(r.clearAll())}),w(10,"Clear All"),v()(),_(11,"div",58),te(12,bY,15,9,"div",59),v(),et()}if(n&2){let t=T().ngIf;C(7),ae(t.length),C(5),$("ngForOf",t)}}function wY(n,e){n&1&&(_(0,"div",57)(1,"p"),w(2,"No notifications yet. Stay safe!"),v()())}function CY(n,e){if(n&1&&(_(0,"div",30),te(1,xY,13,2,"ng-container",5)(2,wY,3,0,"ng-template",null,2,Ct),v()),n&2){let t=e.ngIf,i=dt(3);C(),$("ngIf",t.length>0)("ngIfElse",i)}}function EY(n,e){if(n&1&&(Xe(0),te(1,CY,4,2,"div",11),xe(2,"async"),et()),n&2){let t=T(2),i=dt(9);C(),$("ngIf",De(2,2,t.citizenNotifications$))("ngIfElse",i)}}function IY(n,e){if(n&1&&(Xe(0),te(1,mY,4,5,"ng-container",9),xe(2,"async"),te(3,EY,3,4,"ng-container",9),xe(4,"async"),et()),n&2){let t=T();C(),$("ngIf",De(2,2,t.isAdmin$)),C(2),$("ngIf",!De(4,4,t.isAdmin$))}}function SY(n,e){n&1&&(_(0,"div",67),ie(),_(1,"svg",68),oe(2,"path",69)(3,"circle",70),v(),pe(),_(4,"h3"),w(5,"Please Log In"),v(),_(6,"p"),w(7,"You need to be logged in to view notifications and safety alerts."),v(),_(8,"p"),w(9,"Log in to receive important updates about your reports and emergency alerts."),v()())}function MY(n,e){n&1&&(_(0,"div",71),w(1,"Loading notifications..."),v())}var Ty=class n{route=F(gi);notificationService=F(Ko);authService=F(ln);toastService=F(Jn);showSosAlert=!1;sosMessage="";selectedSOS=null;notifications$=this.notificationService.getNotifications();isAdmin$=this.authService.isAdmin$;currentUser$=this.authService.currentUser$;adminNotifications$=this.notificationService.getAdminNotifications();citizenNotifications$=this.notificationService.getCitizenNotifications();ngOnInit(){this.route.snapshot.queryParamMap.get("sos")==="sent"&&this.triggerSosAlert()}triggerSosAlert(){this.sosMessage="EMERGENCY SOS SENT - Police/Admin have been notified and will respond immediately. Stay safe!",this.showSosAlert=!0,setTimeout(()=>{this.showSosAlert=!1},1e4)}closeAlert(){this.showSosAlert=!1}onNotificationClick(e){e.sosDetails&&this.authService.isAdmin$.pipe(qn(1)).subscribe(t=>{t&&(this.selectedSOS=e)})}closeSOSDetail(){this.selectedSOS=null}respondToSOS(e){this.selectedSOS&&this.selectedSOS.sosDetails&&(this.notificationService.markSOSAsResponded(e),this.notificationService.notifySOSResponse(this.selectedSOS.sosDetails.userName,this.selectedSOS.sosDetails.userEmail,"responded"),this.selectedSOS=ve(J({},this.selectedSOS),{sosDetails:ve(J({},this.selectedSOS.sosDetails),{status:"responded"})}),this.toastService.success("SOS marked as responded. User has been notified."))}resolveSOS(e){this.selectedSOS&&this.selectedSOS.sosDetails&&(this.notificationService.markSOSAsResolved(e),this.notificationService.notifySOSResponse(this.selectedSOS.sosDetails.userName,this.selectedSOS.sosDetails.userEmail,"resolved"),this.selectedSOS=ve(J({},this.selectedSOS),{sosDetails:ve(J({},this.selectedSOS.sosDetails),{status:"resolved"})}),this.toastService.success("SOS has been resolved. User has been notified."))}quickRespondToSOS(e){e.sosDetails&&(this.notificationService.markSOSAsResponded(e.id),this.notificationService.notifySOSResponse(e.sosDetails.userName,e.sosDetails.userEmail,"responded"),this.toastService.success("Quick response sent. User has been notified."))}deleteNotification(e){this.notificationService.deleteNotification(e),this.selectedSOS&&this.selectedSOS.id===e&&(this.selectedSOS=null),this.toastService.info("Notification deleted")}markAsRead(e){this.notificationService.markAsRead(e)}clearAll(){confirm("Clear all notifications?")&&(this.notificationService.clearAll(),this.selectedSOS=null,this.toastService.info("All notifications cleared"))}getNotificationIcon(e){switch(e){case"sos":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc3545" stroke-width="2"><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>';case"alert":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>';case"action":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>';default:return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>'}}getNotificationClass(e){return{[`notification-${e.type}`]:!0,unread:!e.read}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-notification"]],decls:10,vars:5,consts:[["notLoggedIn",""],["loading",""],["noNotifications",""],[1,"notification-container"],["class","sos-alert",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"sos-alert"],[1,"alert-content"],[1,"close-btn",3,"click"],[4,"ngIf"],["class","sos-detail-modal",3,"click",4,"ngIf"],["class","notifications-panel",4,"ngIf","ngIfElse"],[1,"sos-detail-modal",3,"click"],[1,"sos-detail-content",3,"click"],[1,"sos-detail-header"],[1,"modal-close-btn",3,"click"],[1,"sos-detail-body"],[1,"sos-status-badge",3,"ngClass"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-row",4,"ngIf"],["class","sos-detail-actions",4,"ngIf"],["class","sos-resolved-notice",4,"ngIf"],[1,"detail-value","coordinates"],["target","_blank",1,"map-link",3,"href"],[1,"sos-detail-actions"],[1,"action-btn","respond-btn",3,"click"],[1,"action-btn","resolve-btn",3,"click"],[1,"sos-resolved-notice"],[1,"notifications-panel"],[1,"notifications-header"],[1,"header-title"],[1,"clear-btn",3,"click"],[1,"notifications-list","admin-list"],["class","notification-item admin-notification",3,"ngClass","clickable",4,"ngFor","ngForOf"],[1,"notification-item","admin-notification",3,"ngClass"],[1,"notification-icon",3,"innerHTML"],[1,"notification-content",3,"click"],[1,"notification-message"],[1,"notification-time"],["class","sos-quick-info",4,"ngIf"],[1,"notification-actions"],["class","quick-respond-btn","title","Respond to Emergency",3,"click",4,"ngIf"],["class","mark-read-btn","title","Mark as read",3,"click",4,"ngIf"],["title","Delete",1,"delete-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"sos-quick-info"],[1,"sos-status",3,"ngClass"],[1,"view-details-btn",3,"click"],["title","Respond to Emergency",1,"quick-respond-btn",3,"click"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],["title","Mark as read",1,"mark-read-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["points","20 6 9 17 4 12"],[1,"no-notifications"],[1,"notifications-list","citizen-list"],["class","notification-item citizen-notification",3,"ngClass",4,"ngFor","ngForOf"],[1,"notification-item","citizen-notification",3,"ngClass"],[1,"notification-content"],["class","report-update-info",4,"ngIf"],[1,"report-update-info"],[1,"report-status",3,"ngClass"],["class","admin-note",4,"ngIf"],[1,"admin-note"],[1,"not-logged-in-message"],["width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"loading"]],template:function(t,i){if(t&1&&(_(0,"div",3)(1,"h2"),w(2,"Safety Alerts & Notifications"),v(),te(3,nY,6,1,"div",4)(4,IY,5,6,"ng-container",5),xe(5,"async"),te(6,SY,10,0,"ng-template",null,0,Ct)(8,MY,2,0,"ng-template",null,1,Ct),v()),t&2){let r=dt(7);C(3),$("ngIf",i.showSosAlert),C(),$("ngIf",De(5,3,i.currentUser$))("ngIfElse",r)}},dependencies:[ht,Es,Dn,Ut,cn,Is,qr],styles:[".notification-container[_ngcontent-%COMP%]{max-width:700px;margin:30px auto;padding:20px}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]{margin:20px auto;padding:15px}}@media (max-width: 480px){.notification-container[_ngcontent-%COMP%]{margin:15px auto;padding:10px}}.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:2rem;font-weight:800;letter-spacing:-.5px;border-bottom:2px solid #1a2a5e;padding-bottom:12px;margin-bottom:24px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.not-logged-in-message[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:linear-gradient(135deg,#f0f4f8,#e8ecf1);border-radius:8px;border-left:4px solid #1a2a5e}.not-logged-in-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:#1a2a5e;margin-bottom:20px;opacity:.7}.not-logged-in-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1a2a5e;font-size:1.5rem;margin-bottom:12px}.not-logged-in-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:.95rem;margin:8px 0;line-height:1.6}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}}@media (max-width: 480px){.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:15px}}.sos-alert[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b1a,#ee5a6f1a);border:2px solid #ff6b6b;border-radius:12px;margin-bottom:20px;animation:_ngcontent-%COMP%_slideDown .4s cubic-bezier(.34,1.56,.64,1);box-shadow:0 8px 24px #ff6b6b26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.alert-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;color:#ff6b6b;font-weight:700;font-size:1rem;letter-spacing:.3px}@media (max-width: 480px){.alert-content[_ngcontent-%COMP%]{padding:12px;font-size:.9rem}}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#ff6b6b;padding:0;width:40px;height:40px;min-width:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .3s cubic-bezier(.4,0,.2,1)}.close-btn[_ngcontent-%COMP%]:hover{background-color:#ff6b6b26;transform:rotate(90deg)}.sos-detail-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sos-detail-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;max-width:500px;width:100%;box-shadow:0 20px 50px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.sos-detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0;background:linear-gradient(135deg,#1a2a5e,#2a3f7a);border-radius:12px 12px 0 0}.sos-detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.2rem;font-weight:600}.modal-close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;font-size:1.5rem;width:36px;height:36px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}.modal-close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.sos-detail-body[_ngcontent-%COMP%]{padding:24px}.sos-status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 16px;border-radius:20px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;margin-bottom:20px}.sos-status-badge.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.sos-status-badge.status-responded[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.sos-status-badge.status-resolved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.detail-row[_ngcontent-%COMP%]{display:flex;padding:12px 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-label[_ngcontent-%COMP%]{font-weight:600;color:#666;min-width:130px;font-size:.9rem}.detail-value[_ngcontent-%COMP%]{color:#333;font-size:.95rem;word-break:break-word}.detail-value.coordinates[_ngcontent-%COMP%]{font-family:Courier New,monospace;background:#f5f5f5;padding:4px 8px;border-radius:4px;font-size:.85rem}.map-link[_ngcontent-%COMP%]{color:#1a2a5e;text-decoration:none;font-weight:600;display:inline-flex;align-items:center;gap:6px}.map-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#2a3f7a}.sos-detail-actions[_ngcontent-%COMP%]{padding:20px 24px;border-top:1px solid #e0e0e0;display:flex;gap:12px;justify-content:flex-end}.action-btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.respond-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1565c0,#1976d2);color:#fff}.respond-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #1565c04d}.resolve-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2e7d32,#43a047);color:#fff}.resolve-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #2e7d324d}.sos-resolved-notice[_ngcontent-%COMP%]{padding:16px 24px;background:#e8f5e9;color:#2e7d32;text-align:center;font-weight:500;border-radius:0 0 12px 12px}@media (max-width: 480px){.sos-detail-content[_ngcontent-%COMP%]{margin:10px}.sos-detail-header[_ngcontent-%COMP%]{padding:16px 20px}.sos-detail-body[_ngcontent-%COMP%]{padding:20px}.detail-row[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.detail-label[_ngcontent-%COMP%]{min-width:auto}.sos-detail-actions[_ngcontent-%COMP%]{padding:16px 20px;flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%}}.notifications-panel[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;padding:20px}@media (max-width: 480px){.notifications-panel[_ngcontent-%COMP%]{padding:15px;border-radius:6px}}.notifications-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #f0f0f0;gap:12px}.notifications-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#1a2a5e;font-weight:500}.notifications-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a2a5e;font-weight:700}@media (max-width: 480px){.notifications-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:10px}.notifications-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:.9rem}}.notifications-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333;font-size:.95rem}.clear-btn[_ngcontent-%COMP%]{padding:10px 16px;background-color:#f5f5f5;color:#666;border:1px solid #ddd;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .2s;min-height:44px;white-space:nowrap}@media (max-width: 480px){.clear-btn[_ngcontent-%COMP%]{width:100%;text-align:center}}.clear-btn[_ngcontent-%COMP%]:hover{background-color:#eee;border-color:#ccc}.notifications-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.notification-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:15px;border-radius:6px;background-color:#f9f9f9;border-left:4px solid #ccc;transition:all .2s}.notification-item.clickable[_ngcontent-%COMP%]{cursor:pointer}.notification-item.clickable[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;transform:translate(4px)}@media (max-width: 480px){.notification-item[_ngcontent-%COMP%]{padding:12px;gap:10px;flex-wrap:wrap}}.notification-item.unread[_ngcontent-%COMP%]{background-color:#f0f7ff;border-left-color:var(--sentinel-blue, #0b57a4)}.notification-item.notification-sos[_ngcontent-%COMP%]{background-color:#ffebee;border-left-color:#d32f2f}.notification-item.notification-alert[_ngcontent-%COMP%]{background-color:#fff3e0;border-left-color:#ffb300}.notification-item.notification-info[_ngcontent-%COMP%]{background-color:#e3f2fd;border-left-color:#1976d2}.notification-item.notification-action[_ngcontent-%COMP%]{background-color:#e8f5e9;border-left-color:#43a047}.notification-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 6px #0000001a}.notification-icon[_ngcontent-%COMP%]{min-width:40px;display:flex;align-items:flex-start;justify-content:center;padding-top:2px}@media (max-width: 480px){.notification-icon[_ngcontent-%COMP%]{min-width:35px}.notification-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}}.notification-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px;min-width:0}.notification-message[_ngcontent-%COMP%]{margin:0;color:#333;font-weight:500;font-size:.95rem;word-break:break-word}@media (max-width: 480px){.notification-message[_ngcontent-%COMP%]{font-size:.9rem}}.notification-time[_ngcontent-%COMP%]{color:#999;font-size:.85rem}.sos-quick-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:8px;flex-wrap:wrap}.sos-status[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase;padding:3px 8px;border-radius:10px;letter-spacing:.3px}.sos-status.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.sos-status.status-responded[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.sos-status.status-resolved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.view-details-btn[_ngcontent-%COMP%]{font-size:.75rem;padding:4px 12px;background:linear-gradient(135deg,#1a3a52,#2a5a7a);color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:all .2s}.view-details-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #1a3a524d}.quick-respond-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:.8rem;font-weight:600;transition:all .2s;white-space:nowrap}.quick-respond-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #27ae6066}.quick-respond-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.click-hint[_ngcontent-%COMP%]{font-size:.75rem;color:#999;font-style:italic}.notification-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap}@media (max-width: 480px){.notification-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end;padding-top:8px;border-top:1px solid #eee;margin-top:8px}.quick-respond-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}}.mark-read-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{padding:8px 12px;border:none;background-color:transparent;cursor:pointer;transition:all .2s;border-radius:4px;min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center}.mark-read-btn[_ngcontent-%COMP%]:hover, .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mark-read-btn[_ngcontent-%COMP%]{color:#4caf50}.mark-read-btn[_ngcontent-%COMP%]:hover{background-color:#4caf501a}.delete-btn[_ngcontent-%COMP%]{color:#999}.delete-btn[_ngcontent-%COMP%]:hover{color:#d32f2f;background-color:#d32f2f1a}.no-notifications[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999}.notifications-list.admin-list[_ngcontent-%COMP%]   .admin-notification[_ngcontent-%COMP%]{border-left:4px solid #dc3545;background:linear-gradient(90deg,rgba(220,53,69,.03) 0%,transparent 100%)}.admin-notification[_ngcontent-%COMP%]   .sos-quick-info[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-top:8px;padding-top:8px;border-top:1px solid #f0f0f0}.sos-status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:4px;font-size:.75rem;font-weight:700;letter-spacing:.5px}.sos-status.status-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.sos-status.status-responded[_ngcontent-%COMP%]{background:#cfe2ff;color:#084298}.sos-status.status-resolved[_ngcontent-%COMP%]{background:#d1e7dd;color:#0f5132}.view-details-btn[_ngcontent-%COMP%]{padding:4px 12px;background:linear-gradient(135deg,#1a2a5e,#2a3f7a);color:#fff;border:none;border-radius:4px;font-size:.75rem;font-weight:600;cursor:pointer;transition:all .2s}.view-details-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #1a2a5e4d}.notifications-list.citizen-list[_ngcontent-%COMP%]   .citizen-notification[_ngcontent-%COMP%]{border-left:4px solid #4caf50;background:linear-gradient(90deg,rgba(76,175,80,.03) 0%,transparent 100%)}.citizen-notification[_ngcontent-%COMP%]   .report-update-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:8px;padding-top:8px;border-top:1px solid #f0f0f0}.report-status[_ngcontent-%COMP%]{padding:6px 12px;border-radius:4px;font-size:.8rem;font-weight:700;letter-spacing:.5px;width:fit-content}.report-status.status-approved[_ngcontent-%COMP%]{background:#d1e7dd;color:#0f5132}.report-status.status-rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.admin-note[_ngcontent-%COMP%]{font-size:.85rem;color:#555;font-style:italic;margin:0;line-height:1.4}.notification-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 8px;background:#f0f0f0;color:#666;border-radius:3px;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#1a2a5e;font-weight:500}@media (max-width: 480px){.no-notifications[_ngcontent-%COMP%]{padding:30px 15px}}.no-notifications[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:30px;color:#999;font-style:italic}"]})};function PY(n,e){if(n&1&&(_(0,"div",18),w(1),v()),n&2){let t=T(2);C(),be(" ",t.errorMessage," ")}}function TY(n,e){if(n&1){let t=ge();_(0,"section",6)(1,"h2",8),w(2,"Sign In"),v(),_(3,"form",9,0),X("ngSubmit",function(){j(t);let r=T();return z(r.onSubmitLogin())}),_(5,"div",10)(6,"label",11),w(7,"Email Address"),v(),_(8,"input",12),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.email,r)||(o.email=r),z(r)}),v()(),_(9,"div",10)(10,"label",13),w(11,"Password"),v(),_(12,"div",14)(13,"div",15)(14,"input",16),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.password,r)||(o.password=r),z(r)}),v()(),_(15,"button",17),X("click",function(){j(t);let r=T();return z(r.togglePasswordVisibility("login"))}),w(16),v()()(),Ee(17,PY,2,1,"div",18),_(18,"button",19),w(19),v()(),_(20,"div",20)(21,"span"),w(22,"or"),v()(),_(23,"div",21)(24,"button",22),X("click",function(){j(t);let r=T();return z(r.loginWithGoogle())}),ie(),_(25,"svg",23),oe(26,"path",24)(27,"path",25)(28,"path",26)(29,"path",27),v(),w(30," Continue with Google "),v()(),pe(),_(31,"div",28)(32,"p"),w(33," Don't have an account? "),_(34,"button",29),X("click",function(){j(t);let r=T();return z(r.setTab("signup"))}),w(35,"Create one"),v()()()()}if(n&2){let t=dt(4),i=T();C(8),vt("ngModel",i.email),C(5),ke("show-password",i.showLoginPassword)("hide-password",!i.showLoginPassword),C(),$("type",i.showLoginPassword?"text":"password"),vt("ngModel",i.password),C(),St("aria-pressed",i.showLoginPassword)("aria-label",i.showLoginPassword?"Hide password":"Show password"),C(),be(" ",i.showLoginPassword?"Hide":"Show"," "),C(),Ie(i.errorMessage?17:-1),C(),$("disabled",t.invalid||i.isLoading),St("aria-busy",i.isLoading),C(),be(" ",i.isLoading?"Signing in...":"Sign In"," "),C(5),$("disabled",i.isLoading)}}function OY(n,e){if(n&1&&(_(0,"div",42),w(1),v()),n&2){let t=T(2);C(),be(" ",t.errorMessage," ")}}function DY(n,e){if(n&1&&(_(0,"div",43),w(1),v()),n&2){let t=T(2);C(),ae(t.successMessage)}}function AY(n,e){if(n&1){let t=ge();_(0,"section",7)(1,"h2",30),w(2,"Create Account"),v(),_(3,"p",31),w(4,"Join Mountain Sentinel community"),v(),_(5,"form",32,1),X("ngSubmit",function(){j(t);let r=T();return z(r.onSubmitSignup())}),_(7,"div",10)(8,"label",33),w(9,"Email Address"),v(),_(10,"input",34),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.email,r)||(o.email=r),z(r)}),v()(),_(11,"div",10)(12,"label",35),w(13,"Full Name (Optional)"),v(),_(14,"input",36),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.displayName,r)||(o.displayName=r),z(r)}),v()(),_(15,"div",10)(16,"label",37),w(17,"Password"),v(),_(18,"div",14)(19,"div",15)(20,"input",38),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.password,r)||(o.password=r),z(r)}),v()(),_(21,"button",17),X("click",function(){j(t);let r=T();return z(r.togglePasswordVisibility("signup"))}),w(22),v()(),_(23,"small",39),w(24,"Minimum 6 characters"),v()(),_(25,"div",10)(26,"label",40),w(27,"Confirm Password"),v(),_(28,"div",14)(29,"div",15)(30,"input",41),yt("ngModelChange",function(r){j(t);let o=T();return wt(o.confirmPassword,r)||(o.confirmPassword=r),z(r)}),v()(),_(31,"button",17),X("click",function(){j(t);let r=T();return z(r.togglePasswordVisibility("confirm"))}),w(32),v()()(),Ee(33,OY,2,1,"div",42),Ee(34,DY,2,1,"div",43),_(35,"button",44),w(36),v()(),_(37,"div",28)(38,"p"),w(39," Already have an account? "),_(40,"button",29),X("click",function(){j(t);let r=T();return z(r.setTab("unified"))}),w(41,"Sign in"),v()()()()}if(n&2){let t=dt(6),i=T();C(10),vt("ngModel",i.email),C(4),vt("ngModel",i.displayName),C(5),ke("show-password",i.showSignupPassword)("hide-password",!i.showSignupPassword),C(),$("type",i.showSignupPassword?"text":"password"),vt("ngModel",i.password),C(),St("aria-pressed",i.showSignupPassword)("aria-label",i.showSignupPassword?"Hide password":"Show password"),C(),be(" ",i.showSignupPassword?"Hide":"Show"," "),C(7),ke("show-password",i.showConfirmPassword)("hide-password",!i.showConfirmPassword),C(),$("type",i.showConfirmPassword?"text":"password"),vt("ngModel",i.confirmPassword),C(),St("aria-pressed",i.showConfirmPassword)("aria-label",i.showConfirmPassword?"Hide password":"Show password"),C(),be(" ",i.showConfirmPassword?"Hide":"Show"," "),C(),Ie(i.errorMessage?33:-1),C(),Ie(i.successMessage?34:-1),C(),$("disabled",t.invalid||i.isLoading),St("aria-busy",i.isLoading),C(),be(" ",i.isLoading?"Creating account...":"Create Account"," ")}}var Oy=class n{authService=F(ln);animationService=F(Sr);toastService=F(Jn);tab="unified";email="";password="";displayName="";confirmPassword="";errorMessage=null;successMessage=null;isLoading=!1;showLoginPassword=!1;showSignupPassword=!1;showConfirmPassword=!1;ngOnInit(){this.tab="unified"}setTab(e){this.tab=e,this.errorMessage=null,this.successMessage=null}onSubmitLogin(){return P(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{yield this.authService.login(this.email,this.password),this.toastService.success("Login successful! Welcome back.")}catch(e){this.errorMessage=e.message||"Login failed. Please check your credentials.",this.toastService.error(this.errorMessage||"Login failed")}finally{this.isLoading=!1}})}onSubmitSignup(){return P(this,null,function*(){this.errorMessage=null,this.successMessage=null,this.isLoading=!0;try{if(this.password!==this.confirmPassword){this.errorMessage="Passwords do not match.",this.toastService.error("Passwords do not match."),this.isLoading=!1;return}if(this.password.length<6){this.errorMessage="Password must be at least 6 characters.",this.toastService.error("Password must be at least 6 characters."),this.isLoading=!1;return}yield this.authService.register(this.email,this.password,this.displayName||void 0),this.successMessage="Account created successfully! Redirecting...",this.toastService.success("Account created successfully! Welcome to Baguio Finest."),this.clearForm()}catch(e){this.errorMessage=e.message||"Signup failed.",this.toastService.error(this.errorMessage||"Signup failed")}finally{this.isLoading=!1}})}clearForm(){this.email="",this.password="",this.displayName="",this.confirmPassword=""}loginWithGoogle(){return P(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{yield this.authService.loginWithGoogle(),this.toastService.success("Google login successful! Welcome.")}catch(e){this.errorMessage=e.message||"Google login failed. Please try again.",this.toastService.error(this.errorMessage||"Google login failed")}finally{this.isLoading=!1}})}loginWithFacebook(){return P(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{yield this.authService.loginWithFacebook(),this.toastService.success("Facebook login successful! Welcome.")}catch(e){this.errorMessage=e.message||"Facebook login failed. Please try again.",this.toastService.error(this.errorMessage||"Facebook login failed")}finally{this.isLoading=!1}})}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}togglePasswordVisibility(e){e==="login"?this.showLoginPassword=!this.showLoginPassword:e==="signup"?this.showSignupPassword=!this.showSignupPassword:e==="confirm"&&(this.showConfirmPassword=!this.showConfirmPassword)}ngOnDestroy(){this.animationService.destroyScrollObserver()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-login"]],decls:9,vars:2,consts:[["loginForm","ngForm"],["signupFormRef","ngForm"],["role","main",1,"login-bg"],["role","region","aria-labelledby","login-title",1,"login-card","scroll-reveal","animate-on-load"],[1,"login-header"],["id","login-title"],["aria-labelledby","signin-heading",1,"unified-login-section","scroll-reveal","animate-on-load"],["aria-labelledby","signup-heading",1,"signup-section"],["id","signin-heading"],["aria-describedby","login-error",1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["id","email","type","email","name","email","required","","placeholder","your@email.com","autocomplete","email","aria-required","true",3,"ngModelChange","ngModel"],["for","password"],[1,"password-field"],[1,"password-input-wrapper"],["id","password","name","password","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","current-password","aria-required","true",1,"password-input",3,"ngModelChange","type","ngModel"],["type","button",1,"password-toggle-btn",3,"click"],["id","login-error","role","alert","aria-live","polite",1,"error-message"],["type","submit",1,"login-btn","primary-btn",3,"disabled"],[1,"social-divider"],["role","group","aria-label","Social sign in options",1,"social-login-buttons"],["type","button","aria-label","Sign in with Google",1,"btn-social","google-btn","full-width",3,"click","disabled"],["viewBox","0 0 24 24","width","20","height","20","aria-hidden","true",1,"social-icon"],["fill","#4285F4","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","#34A853","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","#FBBC05","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","#EA4335","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],[1,"auth-switch"],["type","button",1,"link-btn",3,"click"],["id","signup-heading"],[1,"subtitle"],["aria-describedby","signup-error",1,"signup-form",3,"ngSubmit"],["for","signupEmail"],["id","signupEmail","type","email","name","email","required","","placeholder","your@email.com","autocomplete","email","aria-required","true",3,"ngModelChange","ngModel"],["for","displayName"],["id","displayName","type","text","name","displayName","placeholder","Your Full Name","autocomplete","name",3,"ngModelChange","ngModel"],["for","signupPassword"],["id","signupPassword","name","password","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","minlength","6","autocomplete","new-password","aria-required","true","aria-describedby","password-hint",1,"password-input",3,"ngModelChange","type","ngModel"],["id","password-hint"],["for","confirm"],["id","confirm","name","confirm","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","new-password","aria-required","true",1,"password-input",3,"ngModelChange","type","ngModel"],["id","signup-error","role","alert","aria-live","polite",1,"error-message"],["role","status","aria-live","polite",1,"success-message"],["type","submit",1,"signup-btn",3,"disabled"]],template:function(t,i){t&1&&(_(0,"main",2)(1,"div",3)(2,"header",4)(3,"h1",5),w(4,"Baguio Safety Alert"),v(),_(5,"p"),w(6,"Community Emergency Response System"),v()(),Ee(7,TY,36,15,"section",6),Ee(8,AY,42,25,"section",7),v()()),t&2&&(C(7),Ie(i.tab==="unified"?7:-1),C(),Ie(i.tab==="signup"?8:-1))},dependencies:[ht,gn,Fd,yi,$i,Ld,Il,cM,Ai,El],styles:['.login-bg[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#1a2a5ef2,#0d1a3dfa,#2a3f7af2);background-size:cover;background-position:center;background-attachment:fixed;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;position:relative;overflow:hidden}.login-bg[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.05) 1px,transparent 1px);background-size:50px 50px;animation:_ngcontent-%COMP%_float 20s linear infinite}@keyframes _ngcontent-%COMP%_float{0%{transform:translate(0)}to{transform:translate(50px,50px)}}@media (max-width: 768px){.login-bg[_ngcontent-%COMP%]{padding:50px 15px 30px;justify-content:flex-start;background-attachment:scroll}}@media (max-width: 480px){.login-bg[_ngcontent-%COMP%]{padding:30px 10px 20px}}.login-card[_ngcontent-%COMP%]{background:#fffffffa;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);color:#1a1a1a;max-width:480px;width:100%;padding:50px 45px;border-radius:24px;box-shadow:0 25px 80px #00000059,0 0 1px #ffffff80 inset;position:relative;border:1px solid rgba(255,255,255,.6);animation:_ngcontent-%COMP%_slideUp .6s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:35px 25px;border-radius:16px;max-width:100%}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;border-bottom:none;padding-bottom:0}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;margin:0 0 8px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#666;margin:0;letter-spacing:.3px;font-weight:500}@media (max-width: 480px){.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}.unified-login-section[_ngcontent-%COMP%], .signup-section[_ngcontent-%COMP%]{margin-top:0;padding:0}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:1.6rem;font-weight:700;margin-bottom:12px;text-align:center;letter-spacing:-.5px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#888;font-size:.95rem;margin-bottom:32px;font-weight:400;line-height:1.5}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:8px}.subtitle[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:24px}}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:600;color:#333;font-size:.9rem;letter-spacing:.2px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #e0e0e0;border-radius:10px;box-sizing:border-box;font-size:1rem;background:#f8f9fa;color:#1a1a1a;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:50px;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa;font-weight:400}.password-field[_ngcontent-%COMP%]{display:flex;align-items:center}.password-input-wrapper[_ngcontent-%COMP%]{flex:1;position:relative}.password-input-wrapper.show-password[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTEgMTJzNC04IDExLTggMTEgOCAxMSA4LTQgOC0xMSA4LTExLTgtMTEtOHoiPjwvcGF0aD48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIj48L2NpcmNsZT48L3N2Zz4=);background-repeat:no-repeat;background-position:right 10px center}.password-input-wrapper.hide-password[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTE3Ljk0IDE3Ljk0QTEwLjA3IDEwLjA3IDAgMCAxIDEyIDIwYy03IDAtMTEtOC0xMS04YTE4LjQ1IDE4LjQ1IDAgMCAxIDUuMDYtNS45NE05LjkgNC4yNEE5LjEyIDkuMTIgMCAwIDEgMTIgNGM3IDAgMTEgOCAxMSA4YTE4LjUgMTguNSAwIDAgMS0yLjE2IDMuMTltLTYuNzItMS4wN2EzIDMgMCAxIDEtNC4yNC00LjI0Ij48L3BhdGg+PGxpbmUgeDE9IjEiIHkxPSIxIiB4Mj0iMjMiIHkyPSIyMyI+PC9saW5lPjwvc3ZnPg==);background-repeat:no-repeat;background-position:right 10px center}.password-input[_ngcontent-%COMP%]{padding-right:42px}.password-toggle-btn[_ngcontent-%COMP%]{margin-left:10px;background:transparent;border:none;cursor:pointer;color:#1a2a5e;padding:8px 12px;transition:all .2s ease;font-size:.9rem;font-weight:600;border-radius:6px}.password-toggle-btn[_ngcontent-%COMP%]:hover{color:#d4a84b;background:#1a2a5e1a}.password-toggle-btn[_ngcontent-%COMP%]:focus{outline:2px solid #1a2a5e;outline-offset:2px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 14px;font-size:16px}}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:#7f8c8d;font-size:.8rem;margin-top:4px}.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%]{width:100%;padding:16px 24px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:2px solid rgba(212,168,75,.4);border-radius:10px;cursor:pointer;font-size:1.05rem;font-weight:800;transition:all .35s cubic-bezier(.175,.885,.32,1.275);margin-top:12px;box-shadow:0 12px 28px #1a2a5e59,inset 0 1px 2px #fff3;min-height:52px;letter-spacing:.4px;text-transform:uppercase;position:relative;overflow:hidden}.login-btn[_ngcontent-%COMP%]:before, .signup-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);animation:_ngcontent-%COMP%_shimmer 3s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}to{left:100%}}.login-btn[_ngcontent-%COMP%]:hover, .signup-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px) scale(1.02);box-shadow:0 16px 40px #1a2a5e73,inset 0 1px 2px #ffffff4d}.login-btn[_ngcontent-%COMP%]:active, .signup-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px) scale(.98)}.login-btn[_ngcontent-%COMP%]:disabled, .signup-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.login-btn[_ngcontent-%COMP%]:hover:not([disabled]), .signup-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px);box-shadow:0 16px 40px #1a2a5e73,inset 0 1px 2px #ffffff4d}.login-btn[_ngcontent-%COMP%]:active:not([disabled]), .signup-btn[_ngcontent-%COMP%]:active:not([disabled]){transform:translateY(-2px);box-shadow:0 8px 20px #1a2a5e59,inset 0 1px 2px #fff3}.login-btn[_ngcontent-%COMP%]:disabled, .signup-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;box-shadow:0 4px 12px #0000001a}.social-divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:28px 0;gap:16px}.social-divider[_ngcontent-%COMP%]:before, .social-divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:linear-gradient(90deg,transparent,#ddd,transparent)}.social-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#999;font-size:.85rem;font-weight:600;text-transform:uppercase;letter-spacing:1px}.social-login-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}.social-login-buttons[_ngcontent-%COMP%]   .btn-social[_ngcontent-%COMP%]{flex:1;padding:14px 20px;border:2px solid #e8e8e8;border-radius:12px;color:#333;font-weight:600;font-size:.95rem;cursor:pointer;transition:all .3s ease;min-height:52px;display:flex;align-items:center;justify-content:center;gap:10px;background:#fff}.social-login-buttons[_ngcontent-%COMP%]   .btn-social[_ngcontent-%COMP%]   .social-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.social-login-buttons[_ngcontent-%COMP%]   .google-btn[_ngcontent-%COMP%]{background:#fff;border-color:#e0e0e0;color:#333}.social-login-buttons[_ngcontent-%COMP%]   .google-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#f8f9fa;border-color:#1a2a5e;box-shadow:0 6px 16px #1a2a5e26;transform:translateY(-2px)}.social-login-buttons[_ngcontent-%COMP%]   .google-btn.full-width[_ngcontent-%COMP%]{width:100%;flex:none}.social-login-buttons[_ngcontent-%COMP%]   .facebook-btn[_ngcontent-%COMP%]{background:#1877f2;border-color:#1877f2;color:#fff}.social-login-buttons[_ngcontent-%COMP%]   .facebook-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#0a66c2;border-color:#0a66c2;box-shadow:0 6px 16px #1877f259;transform:translateY(-2px)}.social-login-buttons[_ngcontent-%COMP%]   .btn-social[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.primary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d)!important}.quick-login[_ngcontent-%COMP%]{margin:32px 0 0;padding:24px 0 0;border-top:1px solid rgba(26,42,94,.2)}.quick-login-label[_ngcontent-%COMP%]{text-align:center;color:#999;font-size:.85rem;margin:0 0 18px;letter-spacing:.5px;font-weight:600;text-transform:uppercase}.quick-login-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%}.btn-social[_ngcontent-%COMP%]{width:100%;padding:13px 18px;border:2px solid #e0e0e0;border-radius:10px;color:#333;font-weight:700;font-size:.95rem;cursor:pointer;transition:all .35s cubic-bezier(.4,0,.2,1);min-height:50px;display:flex;align-items:center;justify-content:center;gap:12px;background:#fff;position:relative;overflow:hidden;letter-spacing:.2px}.btn-social[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:_ngcontent-%COMP%_shimmerSocial 3s infinite}@keyframes _ngcontent-%COMP%_shimmerSocial{0%{left:-100%}50%,to{left:100%}}.social-icon[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;min-width:24px;text-align:center;position:relative;z-index:1}.btn-social.google-btn[_ngcontent-%COMP%]{background:#fff;border-color:#e0e0e0;color:#333}.btn-social.google-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#f8f9fa;border-color:#1a2a5e;box-shadow:0 8px 20px #1a2a5e33;transform:translateY(-3px)}.btn-social.facebook-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1877f2,#0a66c2);border-color:transparent;color:#fff;box-shadow:0 4px 12px #1877f24d}.btn-social.facebook-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:linear-gradient(135deg,#0a66c2,#001f54);box-shadow:0 12px 28px #1877f266;transform:translateY(-3px)}.btn-social[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;box-shadow:none}@media (max-width: 480px){.btn-quick[_ngcontent-%COMP%]{min-width:80px;padding:10px 12px;font-size:.85rem}.quick-login[_ngcontent-%COMP%]{margin:24px 0;padding:16px 0}}.auth-switch[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.auth-switch[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#95a5b8;font-size:.9rem}.link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#5dade2;cursor:pointer;font-weight:600;font-size:.9rem;text-decoration:underline;transition:color .2s;padding:0}.link-btn[_ngcontent-%COMP%]:hover{color:#3498db}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{margin:15px 0;padding:12px;border-radius:6px;font-size:.9rem;text-align:center}.error-message[_ngcontent-%COMP%]{background-color:#fdeaea;color:#d32f2f;border:1px solid #d32f2f}.success-message[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32;border:1px solid #2e7d32}@media (max-width: 480px){.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{font-size:.85rem;padding:10px}}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible, .login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible, .link-btn[_ngcontent-%COMP%]:focus-visible, .password-toggle-btn[_ngcontent-%COMP%]:focus-visible{outline:3px solid var(--wcag-focus-color, #4a90d9);outline-offset:2px}.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%], .btn-social[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.password-toggle-btn[_ngcontent-%COMP%]{min-width:44px;min-height:44px}@media (prefers-contrast: high){.login-card[_ngcontent-%COMP%], .login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:2px solid #fff}.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%]{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){.login-bg[_ngcontent-%COMP%]:before, .login-card[_ngcontent-%COMP%], .scroll-reveal[_ngcontent-%COMP%], .animate-on-load[_ngcontent-%COMP%]{animation:none!important;transition-duration:.01ms!important}}@media print{.login-bg[_ngcontent-%COMP%]{background:#fff;min-height:auto}.login-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #000}}']})};function kY(n,e){n&1&&(ie(),W(0,"svg",3),Ue(1,"path",47)(2,"path",48)(3,"line",49)(4,"line",50),Q())}function RY(n,e){n&1&&(ie(),W(0,"svg",3),Ue(1,"line",51)(2,"path",52),Q())}function NY(n,e){n&1&&(ie(),W(0,"svg",3),Ue(1,"polygon",53)(2,"path",54),Q())}function LY(n,e){n&1&&(ie(),W(0,"svg",3),Ue(1,"polygon",53)(2,"line",55)(3,"line",56),Q())}function FY(n,e){if(n&1){let t=ge();W(0,"div",0)(1,"div",1)(2,"button",2),ot("click",function(){j(t);let r=T();return z(r.endCall())}),ie(),W(3,"svg",3),Ue(4,"polyline",4),Q()(),pe(),W(5,"div",5)(6,"h3",6),w(7),Q(),W(8,"p",7),w(9),Q(),W(10,"div",8)(11,"span",9),w(12),Q()()(),Ue(13,"div",10),Q(),W(14,"div",11)(15,"div",12),Ue(16,"img",13)(17,"div",14)(18,"div",15)(19,"div",16),Q()(),W(20,"div",17)(21,"div",18)(22,"button",19),ot("click",function(){j(t);let r=T();return z(r.toggleMute())}),Ee(23,kY,5,0,":svg:svg",3)(24,RY,3,0,":svg:svg",3),W(25,"span",20),w(26,"Mute"),Q()(),W(27,"button",21),ot("click",function(){j(t);let r=T();return z(r.viewContacts())}),ie(),W(28,"svg",3),Ue(29,"rect",22)(30,"line",23)(31,"line",24)(32,"line",25)(33,"line",26),Q(),pe(),W(34,"span",20),w(35,"Keypad"),Q()(),W(36,"button",27),ot("click",function(){j(t);let r=T();return z(r.toggleSpeaker())}),Ee(37,NY,3,0,":svg:svg",3)(38,LY,4,0,":svg:svg",3),W(39,"span",20),w(40,"Speaker"),Q()()(),W(41,"div",28)(42,"button",29),ot("click",function(){j(t);let r=T();return z(r.addCall())}),ie(),W(43,"svg",30),Ue(44,"circle",31)(45,"path",32),Q(),pe(),W(46,"span"),w(47,"+"),Q()(),W(48,"button",33),ot("click",function(){j(t);let r=T();return z(r.holdCall())}),ie(),W(49,"svg",30),Ue(50,"circle",34)(51,"circle",35)(52,"circle",36)(53,"circle",37),Q(),pe(),W(54,"span"),w(55,"\u2261"),Q()(),W(56,"button",38),ot("click",function(){j(t);let r=T();return z(r.viewContacts())}),ie(),W(57,"svg",30),Ue(58,"path",39)(59,"circle",40),Q(),pe(),W(60,"span"),w(61,"\u2261"),Q()()()(),W(62,"div",41)(63,"button",42),ot("click",function(){j(t);let r=T();return z(r.endCall())}),ie(),W(64,"svg",43),Ue(65,"path",44)(66,"path",45),Q()(),pe(),W(67,"p",46),w(68,"End Call"),Q()()()}if(n&2){let t=T();C(7),ae(t.callerName),C(2),ae(t.callerStatus),C(3),ae(t.callDisplayTime),C(4),Mn("alt",Xx(t.callerName))("src",t.callerImage,Kt),C(6),ke("active",t.isMuted),C(),Ie(t.isMuted?24:23),C(13),ke("active",t.isSpeakerOn),C(),Ie(t.isSpeakerOn?37:38)}}var Dy=class n{authService=F(ln);router=F(Et);isCallActive=!1;isMuted=!1;isSpeakerOn=!0;callDuration=0;callDisplayTime="0:00";callerImage="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop";callerName="911 Emergency Services";callerStatus="Calling 911\u2026";callTimerSubscription=null;callTimer;ngOnInit(){this.authService.currentUser$.pipe(qn(1)).subscribe(e=>{if(!e){this.router.navigate(["/login"]);return}this.initializeCall()})}ngOnDestroy(){this.endCall()}initializeCall(){this.isCallActive=!0,this.callDuration=0,this.updateCallTime(),this.callTimer=setInterval(()=>{this.callDuration++,this.updateCallTime()},1e3)}updateCallTime(){let e=Math.floor(this.callDuration/60),t=this.callDuration%60;this.callDisplayTime=`${e}:${t.toString().padStart(2,"0")}`}toggleMute(){this.isMuted=!this.isMuted}toggleSpeaker(){this.isSpeakerOn=!this.isSpeakerOn}volumeUp(){console.log("Volume increased")}volumeDown(){console.log("Volume decreased")}addCall(){console.log("Add call action")}holdCall(){console.log("Hold call toggled")}viewContacts(){console.log("View contacts")}endCall(){this.callTimer&&clearInterval(this.callTimer),this.isCallActive=!1,this.callDuration=0,this.isMuted=!1,this.isSpeakerOn=!0,this.callDisplayTime="0:00",this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-emergency-call"]],decls:1,vars:1,consts:[[1,"call-interface"],[1,"call-header"],["title","End Call",1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["points","15 18 9 12 15 6"],[1,"call-status-info"],[1,"caller-name"],[1,"caller-status"],[1,"call-timer"],[1,"timer-value"],[1,"header-spacer"],[1,"caller-profile"],[1,"caller-image-wrapper"],[1,"caller-image",3,"src","alt"],[1,"pulse-ring","pulse-ring-1"],[1,"pulse-ring","pulse-ring-2"],[1,"pulse-ring","pulse-ring-3"],[1,"call-controls"],[1,"controls-grid"],["title","Toggle Mute",1,"control-btn",3,"click"],[1,"btn-label"],["title","Keypad",1,"control-btn",3,"click"],["x","5","y","2","width","14","height","20","rx","2","ry","2"],["x1","9","y1","6","x2","15","y2","6"],["x1","9","y1","10","x2","15","y2","10"],["x1","9","y1","14","x2","15","y2","14"],["x1","9","y1","18","x2","15","y2","18"],["title","Toggle Speaker",1,"control-btn",3,"click"],[1,"secondary-controls"],["title","Add Call",1,"secondary-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["cx","12","cy","12","r","1"],["d","M12 1v6m8-2l-4.24 4.24M1 12h6m-2 8l4.24-4.24M23 12v0m0 0l-6-6m6 6l-6 6M12 19v4"],["title","Hold",1,"secondary-btn",3,"click"],["cx","12","cy","12","r","10"],["cx","8","cy","12","r","2","fill","currentColor"],["cx","12","cy","12","r","2","fill","currentColor"],["cx","16","cy","12","r","2","fill","currentColor"],["title","Contacts",1,"secondary-btn",3,"click"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"end-call-section"],["title","End Call",1,"end-call-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24","fill","currentColor"],["d","M23.5 12a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"],["d","M20 17.5c-2.5 0-4.5-2-5.5-3.5-1 1.5-3 3.5-5.5 3.5-3 0-5.5-2.5-5.5-5.5v-6c0-3 2.5-5.5 5.5-5.5 2.5 0 4.5 2 5.5 3.5 1-1.5 3-3.5 5.5-3.5 3 0 5.5 2.5 5.5 5.5v6c0 3-2.5 5.5-5.5 5.5z"],[1,"end-call-text"],["d","M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"],["d","M19 10v2a7 7 0 0 1-14 0v-2"],["x1","12","y1","19","x2","12","y2","23"],["x1","8","y1","23","x2","16","y2","23"],["x1","1","y1","1","x2","23","y2","23"],["d","M9 9v3a3 3 0 0 0 5.12 2.12M15.5 1.67A7 7 0 0 1 19 19M9 17H5a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h4"],["points","11 5 6 9 2 9 2 15 6 15 11 19 11 5"],["d","M15.54 8.46a7 7 0 0 1 0 9.9M20.54 3.46a11 11 0 0 1 0 15.56"],["x1","23","y1","9","x2","17","y2","15"],["x1","17","y1","9","x2","23","y2","15"]],template:function(t,i){t&1&&Ee(0,FY,69,12,"div",0),t&2&&Ie(i.isCallActive?0:-1)},dependencies:[ht],styles:[".call-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px;animation:_ngcontent-%COMP%_fadeInCall .4s ease-out}@keyframes _ngcontent-%COMP%_fadeInCall{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.call-interface[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:420px;height:100vh;max-height:900px;background:linear-gradient(180deg,#1a1a2e,#16213e,#0f3460);border-radius:20px;box-shadow:0 20px 60px #0009,0 0 80px #10c3d333;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .5s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100px);opacity:0}to{transform:translateY(0);opacity:1}}.call-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background:linear-gradient(180deg,#ffffff14,#0003);border-bottom:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.back-btn[_ngcontent-%COMP%]{background:#ffffff1f;border:none;width:44px;height:44px;border-radius:50%;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.34,1.56,.64,1);flex-shrink:0}.back-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.08)}.back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.call-status-info[_ngcontent-%COMP%]{flex:1;text-align:center;color:#fff;margin:0 16px;animation:_ngcontent-%COMP%_fadeIn .6s ease-out .2s both}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.caller-name[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;letter-spacing:.3px;text-shadow:0 2px 4px rgba(0,0,0,.3)}.caller-status[_ngcontent-%COMP%]{margin:4px 0 8px;font-size:13px;opacity:.85;font-weight:500;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.85}50%{opacity:.6}}.call-timer[_ngcontent-%COMP%]{display:inline-block;background:#10c3d326;border:1px solid rgba(16,195,211,.4);border-radius:6px;padding:4px 12px;margin-top:4px}.timer-value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#10c3d3;letter-spacing:1px;font-family:Courier New,monospace}.header-spacer[_ngcontent-%COMP%]{width:44px;flex-shrink:0}.caller-profile[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:40px 20px;animation:_ngcontent-%COMP%_fadeIn .6s ease-out .3s both}.caller-image-wrapper[_ngcontent-%COMP%]{position:relative;width:180px;height:180px}.caller-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;box-shadow:0 10px 40px #00000080,0 0 40px #10c3d34d;border:3px solid rgba(16,195,211,.4);animation:_ngcontent-%COMP%_profileZoom .6s ease-out .4s both}@keyframes _ngcontent-%COMP%_profileZoom{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}.pulse-ring[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border:2px solid rgba(16,195,211,.4);border-radius:50%;animation:_ngcontent-%COMP%_expandPulse 2s ease-out infinite}.pulse-ring-1[_ngcontent-%COMP%]{width:200px;height:200px;animation-delay:0s}.pulse-ring-2[_ngcontent-%COMP%]{width:220px;height:220px;animation-delay:.3s;opacity:.8}.pulse-ring-3[_ngcontent-%COMP%]{width:240px;height:240px;animation-delay:.6s;opacity:.6}@keyframes _ngcontent-%COMP%_expandPulse{0%{opacity:.8}to{opacity:0;transform:translate(-50%,-50%) scale(1.4)}}.call-controls[_ngcontent-%COMP%]{padding:30px 20px;background:#0000004d;border-top:1px solid rgba(255,255,255,.1);animation:_ngcontent-%COMP%_slideUp .5s cubic-bezier(.34,1.56,.64,1) .2s backwards}.controls-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:20px}.control-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;background:linear-gradient(135deg,#ffffff1f,#ffffff14);border:1px solid rgba(255,255,255,.15);color:#ffffffe6;width:100%;aspect-ratio:1;border-radius:12px;cursor:pointer;transition:all .3s cubic-bezier(.34,1.56,.64,1);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;transition:transform .3s ease}.control-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fff3,#ffffff26);border-color:#ffffff4d;transform:translateY(-2px);box-shadow:0 8px 20px #0000004d}.control-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 4px 10px #0003}.control-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10c3d34d,#10c3d326);border-color:#10c3d399;color:#10c3d3;box-shadow:0 0 20px #10c3d34d}.control-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(16,195,211,.6))}.btn-label[_ngcontent-%COMP%]{display:block}.secondary-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.secondary-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;background:#ffffff14;border:1px solid rgba(255,255,255,.12);color:#ffffffb3;height:44px;border-radius:10px;cursor:pointer;transition:all .3s cubic-bezier(.34,1.56,.64,1);font-weight:600;font-size:18px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.secondary-btn[_ngcontent-%COMP%]:hover{background:#ffffff26;border-color:#ffffff40;transform:translateY(-2px);box-shadow:0 6px 16px #0000004d}.secondary-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.end-call-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;gap:12px;animation:_ngcontent-%COMP%_slideUp .5s cubic-bezier(.34,1.56,.64,1) .3s backwards}.end-call-btn[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#d32f2f,#e53935,#f44336);border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.34,1.56,.64,1);box-shadow:0 8px 24px #d32f2f66;animation:_ngcontent-%COMP%_pulseEndCall 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulseEndCall{0%,to{box-shadow:0 8px 24px #d32f2f66}50%{box-shadow:0 12px 32px #d32f2f99}}.end-call-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 12px 36px #d32f2f99}.end-call-btn[_ngcontent-%COMP%]:active{transform:scale(.95);box-shadow:0 4px 16px #d32f2f66}.end-call-text[_ngcontent-%COMP%]{color:#fffc;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin:0}@media (max-width: 480px){.call-interface[_ngcontent-%COMP%]{max-width:100%;border-radius:0;height:100vh}.caller-image-wrapper[_ngcontent-%COMP%]{width:140px;height:140px}.caller-image[_ngcontent-%COMP%]{width:100%;height:100%}.pulse-ring-1[_ngcontent-%COMP%]{width:160px;height:160px}.pulse-ring-2[_ngcontent-%COMP%]{width:180px;height:180px}.pulse-ring-3[_ngcontent-%COMP%]{width:200px;height:200px}.controls-grid[_ngcontent-%COMP%]{gap:12px}.control-btn[_ngcontent-%COMP%]{font-size:10px}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.end-call-btn[_ngcontent-%COMP%]{width:70px;height:70px}.end-call-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.caller-profile[_ngcontent-%COMP%]{padding:30px 20px}}@media (min-width: 481px) and (max-width: 768px){.call-interface[_ngcontent-%COMP%]{max-width:450px}.caller-image-wrapper[_ngcontent-%COMP%]{width:160px;height:160px}.controls-grid[_ngcontent-%COMP%]{gap:14px}.control-btn[_ngcontent-%COMP%]{font-size:11px}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}}@media (min-width: 769px){.call-interface[_ngcontent-%COMP%]{max-width:400px}.control-btn[_ngcontent-%COMP%]:hover{box-shadow:0 12px 28px #0006}.secondary-btn[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #00000059}.end-call-btn[_ngcontent-%COMP%]:hover{box-shadow:0 16px 40px #d32f2f80}}.control-btn[_ngcontent-%COMP%]:focus, .secondary-btn[_ngcontent-%COMP%]:focus, .end-call-btn[_ngcontent-%COMP%]:focus, .back-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(16,195,211,.6);outline-offset:2px}*[_ngcontent-%COMP%]{transition:background-color .3s ease,border-color .3s ease,box-shadow .3s ease}button[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.34,1.56,.64,1)}"]})};function VY(n,e){if(n&1&&(_(0,"div",8),oe(1,"div",9),_(2,"div",10)(3,"div",11)(4,"h3",12),w(5),v(),_(6,"span",13),w(7),v()(),_(8,"div",14)(9,"div",15),ie(),_(10,"svg",16),oe(11,"path",17)(12,"circle",18),v(),pe(),_(13,"span",19),w(14),v()(),_(15,"div",15),ie(),_(16,"svg",16),oe(17,"path",20)(18,"circle",21),v(),pe(),_(19,"span"),w(20),v()(),_(21,"div",15)(22,"span",22),w(23,"Recent"),v()()(),_(24,"div",23)(25,"button",24),ie(),_(26,"svg",25),oe(27,"polyline",26),v()()()()()),n&2){let t=e.$implicit,i=T(3);$("ngClass",i.getPriorityClass(t.priority)),C(5),ae(t.description),C(),$("ngClass",i.getPriorityClass(t.priority)),C(),be(" ",i.getPriorityLabel(t.priority)," "),C(7),bn("",t.street,", ",t.barangay),C(6),ae(t.reporterName||t.reporterId)}}function BY(n,e){if(n&1&&(Xe(0),te(1,VY,28,7,"div",7),et()),n&2){let t=T().ngIf,i=T();C(),$("ngForOf",t)("ngForTrackBy",i.trackById)}}function UY(n,e){if(n&1&&(Xe(0),te(1,BY,2,2,"ng-container",6),et()),n&2){let t=e.ngIf;T();let i=dt(8);C(),$("ngIf",t.length>0)("ngIfElse",i)}}function jY(n,e){n&1&&(_(0,"p"),w(1,"No incidents match your search. Try different keywords."),v())}function zY(n,e){n&1&&(_(0,"p"),w(1,"No incidents reported at this time. Stay safe!"),v())}function HY(n,e){if(n&1&&(_(0,"div",27),ie(),_(1,"svg",28),oe(2,"path",29)(3,"line",30)(4,"line",31),v(),te(5,jY,2,0,"p",6)(6,zY,2,0,"ng-template",null,2,Ct),v()),n&2){let t=dt(7),i=T();C(5),$("ngIf",i.searchQuery.value)("ngIfElse",t)}}function $Y(n,e){n&1&&(_(0,"div",32),oe(1,"div",33),_(2,"p"),w(3,"Loading community reports..."),v()())}var Ay=class n{reportService=F(pn);searchQuery=new _t("");allApprovedReports$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.status==="approved")));filteredReports$=Ii([this.allApprovedReports$,this.searchQuery.pipe(Vi(""))]).pipe(ue(([e,t])=>{if(!t.trim())return e;let i=t.toLowerCase();return e.filter(r=>{let o=(r.description||"").toLowerCase(),a=(r.street||"").toLowerCase(),l=(r.barangay||"").toLowerCase(),u=(r.landmark||"").toLowerCase(),f=(r.reporterName||"").toLowerCase(),g=(r.createdAt||"").toString().toLowerCase();return o.includes(i)||a.includes(i)||l.includes(i)||u.includes(i)||f.includes(i)||g.includes(i)})}));ngOnInit(){}trackById(e,t){return t?.id??e}onSearchChange(e){this.searchQuery.next(e)}clearSearch(){this.searchQuery.next("")}getPriorityClass(e){switch(e){case"high":return"priority-high";case"medium":return"priority-medium";case"low":return"priority-low";default:return"priority-low"}}getPriorityLabel(e){return(e||"low").toUpperCase()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-citizen-reports"]],decls:11,vars:4,consts:[["empty",""],["loading",""],["noSearchMatch",""],[1,"citizen-reports-container"],[1,"reports-header"],[1,"reports-wrapper"],[4,"ngIf","ngIfElse"],["class","report-card",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"report-card",3,"ngClass"],[1,"card-border"],[1,"card-content"],[1,"card-header"],[1,"report-title"],[1,"priority-badge",3,"ngClass"],[1,"card-meta"],[1,"meta-item"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"icon"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"location-text"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"recent-label"],[1,"card-footer"],["aria-label","View full report",1,"expand-btn"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","9 18 15 12 9 6"],[1,"empty-state"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"],["x1","12","y1","6","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"loading-state"],[1,"spinner"]],template:function(t,i){if(t&1&&(_(0,"div",3)(1,"div",4)(2,"h2"),w(3,"Citizen Reports"),v()(),_(4,"div",5),te(5,UY,2,2,"ng-container",6),xe(6,"async"),te(7,HY,8,2,"ng-template",null,0,Ct)(9,$Y,4,0,"ng-template",null,1,Ct),v()()),t&2){let r=dt(10);C(5),$("ngIf",De(6,2,i.filteredReports$))("ngIfElse",r)}},dependencies:[ht,Es,Dn,Ut,gn,cn],styles:[".citizen-reports-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:16px;height:100vh}.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.8rem;color:#1a3a52}.search-section[_ngcontent-%COMP%]{width:100%}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:none;border-radius:8px;font-size:1rem;box-shadow:0 2px 8px #0000001a}.search-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 2px 12px #1a2a5e4d}.reports-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:12px;padding:8px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1a2a5e;border-radius:4px}.report-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;box-shadow:0 1px 4px #00000014;border-left:4px solid #1a2a5e;flex-shrink:0}.report-card.priority-high[_ngcontent-%COMP%]{border-left-color:#ff5252}.report-card.priority-medium[_ngcontent-%COMP%]{border-left-color:#ffa726}.report-card.priority-low[_ngcontent-%COMP%]{border-left-color:#66bb6a}.report-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1rem;color:#1a3a52}.card-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:.9rem;color:#666}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:16px;font-size:.75rem;font-weight:700;color:#fff;background:#1a2a5e;margin-top:8px}.priority-badge.priority-high[_ngcontent-%COMP%]{background:#ff5252}.priority-badge.priority-medium[_ngcontent-%COMP%]{background:#ffa726}.priority-badge.priority-low[_ngcontent-%COMP%]{background:#66bb6a}@media (max-width: 768px){.citizen-reports-container[_ngcontent-%COMP%]{padding:20px 16px;gap:20px}}@media (max-width: 480px){.citizen-reports-container[_ngcontent-%COMP%]{padding:16px 12px;gap:16px}}.reports-header[_ngcontent-%COMP%]{flex-shrink:0;text-align:center}.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1a3a52;margin:0 0 8px;letter-spacing:-.5px}@media (max-width: 768px){.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem}}@media (max-width: 480px){.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#666;margin:0;font-weight:400}@media (max-width: 768px){.subtitle[_ngcontent-%COMP%]{font-size:.9rem}}.search-section[_ngcontent-%COMP%]{flex-shrink:0;width:100%;margin-bottom:16px}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;box-shadow:0 2px 12px #00000014;border-radius:10px;overflow:hidden;background:#fff}.search-icon[_ngcontent-%COMP%]{position:absolute;left:14px;color:#667eea;pointer-events:none;z-index:2;flex-shrink:0}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 44px;border:none;border-radius:10px;font-size:.95rem;background:#fff;color:#1a1a1a;transition:all .3s cubic-bezier(.4,0,.2,1);font-family:inherit}.search-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #667eea26}.search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.clear-btn[_ngcontent-%COMP%]{position:absolute;right:12px;background:transparent;border:none;cursor:pointer;color:#999;padding:6px;display:flex;align-items:center;justify-content:center;transition:color .2s ease;z-index:2;flex-shrink:0}.clear-btn[_ngcontent-%COMP%]:hover{color:#667eea}.reports-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column;gap:12px;padding:4px}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:10px}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:10px;transition:background .2s ease}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#764ba2,#667eea)}.reports-list[_ngcontent-%COMP%]{scrollbar-color:#667eea rgba(255,255,255,.1);scrollbar-width:thin}@media (max-width: 1024px){.reports-list[_ngcontent-%COMP%]{gap:10px}}@media (max-width: 768px){.reports-list[_ngcontent-%COMP%]{gap:8px}}.reports-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:600px;max-height:600px;overflow:hidden;padding:8px;border-radius:12px;background:#ffffff4d}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:10px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:10px;transition:background .2s ease}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#764ba2,#667eea)}.reports-wrapper[_ngcontent-%COMP%]{scrollbar-color:#667eea rgba(255,255,255,.1);scrollbar-width:thin}@media (max-width: 1024px){.reports-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}}@media (max-width: 768px){.reports-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:14px}}@media (max-width: 480px){.reports-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.report-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #00000014;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column;position:relative;flex-shrink:0}.report-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #0000001f;transform:translateY(-2px)}.card-border[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2)}.report-card.priority-high[_ngcontent-%COMP%]   .card-border[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff5252,#ff1744)}.report-card.priority-medium[_ngcontent-%COMP%]   .card-border[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ffa726,#ffb300)}.report-card.priority-low[_ngcontent-%COMP%]   .card-border[_ngcontent-%COMP%]{background:linear-gradient(90deg,#66bb6a,#43a047)}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px;flex:1}@media (max-width: 480px){.card-content[_ngcontent-%COMP%]{padding:16px;gap:14px}}.card-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}.report-title[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#1a3a52;margin:0;flex:1;line-height:1.3}.priority-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:6px 12px;border-radius:20px;font-size:.7rem;font-weight:800;color:#fff;text-transform:uppercase;white-space:nowrap;letter-spacing:.5px;background:linear-gradient(135deg,#667eea,#764ba2)}.priority-badge.priority-high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff5252,#ff1744)}.priority-badge.priority-medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa726,#ffb300)}.priority-badge.priority-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#66bb6a,#43a047)}.card-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:.85rem}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#555}.icon[_ngcontent-%COMP%]{color:#667eea;flex-shrink:0}.location-text[_ngcontent-%COMP%]{font-weight:500;color:#333}.recent-label[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:8px;border-top:1px solid #f0f0f0}.expand-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;flex-shrink:0}.expand-btn[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px #667eea66}.expand-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center;color:#888;background:#ffffff80;border-radius:12px;border:2px dashed #ddd;min-height:200px;flex-shrink:0}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]{padding:40px 30px;min-height:250px}}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ccc;margin-bottom:16px;opacity:.6}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;gap:16px;min-height:200px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid rgba(102,126,234,.2);border-top:3px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:.95rem;margin:0}@media (max-width: 480px){.reports-wrapper[_ngcontent-%COMP%]{max-height:calc(100vh - 280px)}.card-meta[_ngcontent-%COMP%]{font-size:.85rem}.report-title[_ngcontent-%COMP%]{font-size:.95rem}}"]})};var i3="firebasestorage.googleapis.com",r3="storageBucket",GY=120*1e3,qY=600*1e3;var mn=class n extends Di{constructor(e,t,i=0){super(uM(e),`Firebase Storage: ${t} (${uM(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},xn=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(xn||{});function uM(n){return"storage/"+n}function mM(){let n="An unknown error occurred, please check the error payload for server response.";return new mn(xn.UNKNOWN,n)}function WY(n){return new mn(xn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function KY(n){return new mn(xn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ZY(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mn(xn.UNAUTHENTICATED,n)}function YY(){return new mn(xn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function QY(n){return new mn(xn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function JY(){return new mn(xn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XY(){return new mn(xn.CANCELED,"User canceled the upload/download.")}function eQ(n){return new mn(xn.INVALID_URL,"Invalid URL '"+n+"'.")}function tQ(n){return new mn(xn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function nQ(){return new mn(xn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+r3+"' property when initializing the app?")}function iQ(){return new mn(xn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rQ(){return new mn(xn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oQ(n){return new mn(xn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dM(n){return new mn(xn.INVALID_ARGUMENT,n)}function o3(){return new mn(xn.APP_DELETED,"The Firebase app was deleted.")}function sQ(n){return new mn(xn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jp(n,e){return new mn(xn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Up(n){throw new mn(xn.INTERNAL_ERROR,"Internal error: "+n)}var io=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(i.path==="")return i;throw tQ(e)}static makeFromUrl(e,t){let i=null,r="([A-Za-z0-9.\\-_]+)";function o(Re){Re.path.charAt(Re.path.length-1)==="/"&&(Re.path_=Re.path_.slice(0,-1))}let a="(/(.*))?$",l=new RegExp("^gs://"+r+a,"i"),u={bucket:1,path:3};function f(Re){Re.path_=decodeURIComponent(Re.path)}let g="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",S=new RegExp(`^https?://${b}/${g}/b/${r}/o${E}`,"i"),R={bucket:1,path:3},K=t===i3?"(?:storage.googleapis.com|storage.cloud.google.com)":t,q="([^?#]*)",ne=new RegExp(`^https?://${K}/${r}/${q}`,"i"),we=[{regex:l,indices:u,postModify:o},{regex:S,indices:R,postModify:f},{regex:ne,indices:{bucket:1,path:2},postModify:f}];for(let Re=0;Re<we.length;Re++){let zt=we[Re],ct=zt.regex.exec(e);if(ct){let V=ct[zt.indices.bucket],O=ct[zt.indices.path];O||(O=""),i=new n(V,O),zt.postModify(i);break}}if(i==null)throw eQ(e);return i}},hM=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function aQ(n,e,t){let i=1,r=null,o=null,a=!1,l=0;function u(){return l===2}let f=!1;function g(...q){f||(f=!0,e.apply(null,q))}function b(q){r=setTimeout(()=>{r=null,n(S,u())},q)}function E(){o&&clearTimeout(o)}function S(q,...ne){if(f){E();return}if(q){E(),g.call(null,q,...ne);return}if(u()||a){E(),g.call(null,q,...ne);return}i<64&&(i*=2);let we;l===1?(l=2,we=0):we=(i+Math.random())*1e3,b(we)}let R=!1;function K(q){R||(R=!0,E(),!f&&(r!==null?(q||(l=2),clearTimeout(r),b(0)):q||(l=1)))}return b(0),o=setTimeout(()=>{a=!0,K(!0)},t),K}function cQ(n){n(!1)}function lQ(n){return n!==void 0}function uQ(n){return typeof n=="object"&&!Array.isArray(n)}function _M(n){return typeof n=="string"||n instanceof String}function Q4(n){return vM()&&n instanceof Blob}function vM(){return typeof Blob<"u"}function J4(n,e,t,i){if(i<e)throw dM(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw dM(`Invalid value for '${n}'. Expected ${t} or less.`)}function yM(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function s3(n){let e=encodeURIComponent,t="?";for(let i in n)if(n.hasOwnProperty(i)){let r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}var Ud=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(Ud||{});function dQ(n,e){let t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||r||o}var fM=class{constructor(e,t,i,r,o,a,l,u,f,g,b,E=!0,S=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=u,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=b,this.retry=E,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,K)=>{this.resolve_=R,this.reject_=K,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new Bd(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let a=l=>{let u=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;let l=o.getErrorCode()===Ud.NO_ERROR,u=o.getStatus();if(!l||dQ(u,this.additionalRetryCodes_)&&this.retry){let g=o.getErrorCode()===Ud.ABORT;i(!1,new Bd(!1,null,g));return}let f=this.successCodes_.indexOf(u)!==-1;i(!0,new Bd(f,o))})},t=(i,r)=>{let o=this.resolve_,a=this.reject_,l=r.connection;if(r.wasSuccessCode)try{let u=this.callback_(l,l.getResponse());lQ(u)?o(u):o()}catch(u){a(u)}else if(l!==null){let u=mM();u.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,u)):a(u)}else if(r.canceled){let u=this.appDelete_?o3():XY();a(u)}else{let u=JY();a(u)}};this.canceled_?t(!1,new Bd(!1,null,!0)):this.backoffId_=aQ(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&cQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Bd=class{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}};function hQ(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function fQ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pQ(n,e){e&&(n["X-Firebase-GMPID"]=e)}function gQ(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function mQ(n,e,t,i,r,o,a=!0,l=!1){let u=s3(n.urlParams),f=n.url+u,g=Object.assign({},n.headers);return pQ(g,e),hQ(g,t),fQ(g,o),gQ(g,i),new fM(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,a,l)}function _Q(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vQ(...n){let e=_Q();if(e!==void 0){let t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(vM())return new Blob(n);throw new mn(xn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function yQ(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function bQ(n){if(typeof atob>"u")throw oQ("base-64");return atob(n)}var Yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},zp=class{constructor(e,t){this.data=e,this.contentType=t||null}};function xQ(n,e){switch(n){case Yo.RAW:return new zp(a3(e));case Yo.BASE64:case Yo.BASE64URL:return new zp(c3(n,e));case Yo.DATA_URL:return new zp(CQ(e),EQ(e))}throw mM()}function a3(n){let e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=i,a=n.charCodeAt(++t);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function wQ(n){let e;try{e=decodeURIComponent(n)}catch{throw jp(Yo.DATA_URL,"Malformed data URL.")}return a3(e)}function c3(n,e){switch(n){case Yo.BASE64:{let r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw jp(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Yo.BASE64URL:{let r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw jp(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=bQ(e)}catch(r){throw r.message.includes("polyfill")?r:jp(n,"Invalid character found")}let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}var Ry=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw jp(Yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=t[1]||null;i!=null&&(this.base64=IQ(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}};function CQ(n){let e=new Ry(n);return e.base64?c3(Yo.BASE64,e.rest):wQ(e.rest)}function EQ(n){return new Ry(n).contentType}function IQ(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Ny=class n{constructor(e,t){let i=0,r="";Q4(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Q4(this.data_)){let i=this.data_,r=yQ(i,e,t);return r===null?null:new n(r)}else{let i=new Uint8Array(this.data_.buffer,e,t-e);return new n(i,!0)}}static getBlob(...e){if(vM()){let t=e.map(i=>i instanceof n?i.data_:i);return new n(vQ.apply(null,t))}else{let t=e.map(a=>_M(a)?xQ(Yo.RAW,a).data:a.data_),i=0;t.forEach(a=>{i+=a.byteLength});let r=new Uint8Array(i),o=0;return t.forEach(a=>{for(let l=0;l<a.length;l++)r[o++]=a[l]}),new n(r,!0)}}uploadData(){return this.data_}};function l3(n){let e;try{e=JSON.parse(n)}catch{return null}return uQ(e)?e:null}function SQ(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function MQ(n,e){let t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function u3(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function PQ(n,e){return e}var ai=class{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||PQ}},ky=null;function TQ(n){return!_M(n)||n.length<2?n:u3(n)}function d3(){if(ky)return ky;let n=[];n.push(new ai("bucket")),n.push(new ai("generation")),n.push(new ai("metageneration")),n.push(new ai("name","fullPath",!0));function e(o,a){return TQ(a)}let t=new ai("name");t.xform=e,n.push(t);function i(o,a){return a!==void 0?Number(a):a}let r=new ai("size");return r.xform=i,n.push(r),n.push(new ai("timeCreated")),n.push(new ai("updated")),n.push(new ai("md5Hash",null,!0)),n.push(new ai("cacheControl",null,!0)),n.push(new ai("contentDisposition",null,!0)),n.push(new ai("contentEncoding",null,!0)),n.push(new ai("contentLanguage",null,!0)),n.push(new ai("contentType",null,!0)),n.push(new ai("metadata","customMetadata",!0)),ky=n,ky}function OQ(n,e){function t(){let i=n.bucket,r=n.fullPath,o=new io(i,r);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function DQ(n,e,t){let i={};i.type="file";let r=t.length;for(let o=0;o<r;o++){let a=t[o];i[a.local]=a.xform(i,e[a.server])}return OQ(i,n),i}function h3(n,e,t){let i=l3(e);return i===null?null:DQ(n,i,t)}function AQ(n,e,t,i){let r=l3(e);if(r===null||!_M(r.downloadTokens))return null;let o=r.downloadTokens;if(o.length===0)return null;let a=encodeURIComponent;return o.split(",").map(f=>{let g=n.bucket,b=n.fullPath,E="/b/"+a(g)+"/o/"+a(b),S=yM(E,t,i),R=s3({alt:"media",token:f});return S+R})[0]}function kQ(n,e){let t={},i=e.length;for(let r=0;r<i;r++){let o=e[r];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var Ly=class{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function f3(n){if(!n)throw mM()}function RQ(n,e){function t(i,r){let o=h3(n,r,e);return f3(o!==null),o}return t}function NQ(n,e){function t(i,r){let o=h3(n,r,e);return f3(o!==null),AQ(o,r,n.host,n._protocol)}return t}function p3(n){function e(t,i){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=YY():r=ZY():t.getStatus()===402?r=KY(n.bucket):t.getStatus()===403?r=QY(n.path):r=i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}return e}function LQ(n){let e=p3(n);function t(i,r){let o=e(i,r);return i.getStatus()===404&&(o=WY(n.path)),o.serverResponse=r.serverResponse,o}return t}function FQ(n,e,t){let i=e.fullServerUrl(),r=yM(i,n.host,n._protocol),o="GET",a=n.maxOperationRetryTime,l=new Ly(r,o,NQ(n,t),a);return l.errorHandler=LQ(e),l}function VQ(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function BQ(n,e,t){let i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=VQ(null,e)),i}function UQ(n,e,t,i,r){let o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let we="";for(let Re=0;Re<2;Re++)we=we+Math.random().toString().slice(2);return we}let u=l();a["Content-Type"]="multipart/related; boundary="+u;let f=BQ(e,i,r),g=kQ(f,t),b="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+u+`\r
Content-Type: `+f.contentType+`\r
\r
`,E=`\r
--`+u+"--",S=Ny.getBlob(b,i,E);if(S===null)throw iQ();let R={name:f.fullPath},K=yM(o,n.host,n._protocol),q="POST",ne=n.maxUploadRetryTime,fe=new Ly(K,q,RQ(n,t),ne);return fe.urlParams=R,fe.headers=a,fe.body=S.uploadData(),fe.errorHandler=p3(e),fe}var wwe=256*1024;var X4=null,pM=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ud.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ud.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ud.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r,o){if(this.sent_)throw Up("cannot .send() more than once");if(Yr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Up("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Up("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Up("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Up("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},gM=class extends pM{initXhr(){this.xhr_.responseType="text"}};function g3(){return X4?X4():new gM}var jd=class n{constructor(e,t){this._service=e,t instanceof io?this._location=t:this._location=io.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new io(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return u3(this._location.path)}get storage(){return this._service}get parent(){let e=SQ(this._location.path);if(e===null)return null;let t=new io(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw sQ(e)}};function jQ(n,e,t){n._throwIfRoot("uploadBytes");let i=UQ(n.storage,n._location,d3(),new Ny(e,!0),t);return n.storage.makeRequestWithTokens(i,g3).then(r=>({metadata:r,ref:n}))}function zQ(n){n._throwIfRoot("getDownloadURL");let e=FQ(n.storage,n._location,d3());return n.storage.makeRequestWithTokens(e,g3).then(t=>{if(t===null)throw rQ();return t})}function HQ(n,e){let t=MQ(n._location.path,e),i=new io(n._location.bucket,t);return new jd(n.storage,i)}function $Q(n){return/^[A-Za-z]+:\/\//.test(n)}function GQ(n,e){return new jd(n,e)}function m3(n,e){if(n instanceof Hp){let t=n;if(t._bucket==null)throw nQ();let i=new jd(t,t._bucket);return e!=null?m3(i,e):i}else return e!==void 0?HQ(n,e):n}function qQ(n,e){if(e&&$Q(e)){if(n instanceof Hp)return GQ(n,e);throw dM("To use ref(service, url), the first argument must be a Storage instance.")}else return m3(n,e)}function e3(n,e){let t=e?.[r3];return t==null?null:io.makeFromBucketSpec(t,n)}function WQ(n,e,t,i={}){n.host=`${e}:${t}`;let r=Yr(e);r&&(Qu(`https://${n.host}/b`),Ju("Storage",!0)),n._isUsingEmulator=!0,n._protocol=r?"https":"http";let{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:D0(o,n.app.options.projectId))}var Hp=class{constructor(e,t,i,r,o,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=i3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=GY,this._maxUploadRetryTime=qY,this._requests=new Set,r!=null?this._bucket=io.makeFromBucketSpec(r,this._host):this._bucket=e3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=io.makeFromBucketSpec(this._url,e):this._bucket=e3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){J4("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){J4("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return P(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return P(this,null,function*(){if(si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jd(this,e)}_makeRequest(e,t,i,r,o=!0){if(this._deleted)return new hM(o3());{let a=mQ(e,this._appId,i,r,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){return P(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()})}},t3="@firebase/storage",n3="0.13.14";var _3="storage";function v3(n,e,t){return n=Ot(n),jQ(n,e,t)}function y3(n){return n=Ot(n),zQ(n)}function b3(n,e){return n=Ot(n),qQ(n,e)}function x3(n=Ps(),e){n=Ot(n);let i=Ra(n,_3).getImmediate({identifier:e}),r=O0("storage");return r&&w3(i,...r),i}function w3(n,e,t,i={}){WQ(n,e,t,i)}function KQ(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Hp(t,i,r,e,Fo)}function ZQ(){sr(new oi(_3,KQ,"PUBLIC").setMultipleInstances(!0)),jt(t3,n3,""),jt(t3,n3,"esm2017")}ZQ();var Ml=class{constructor(e){return e}},C3="storage",bM=class{constructor(){return Na(C3)}};var xM=new ye("angularfire2.storage-instances");function YQ(n,e){let t=rl(C3,n,e);return t&&new Ml(t)}function QQ(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ml(i)}}var JQ={provide:bM,deps:[[new Kn,xM]]},XQ={provide:Ml,useFactory:YQ,deps:[[new Kn,xM],Qr]};function E3(n,...e){return jt("angularfire",Vo.full,"gcs"),Ji([XQ,JQ,{provide:xM,useFactory:QQ(n),multi:!0,deps:[xt,Jt,Bo,Ts,[new Kn,cl],[new Kn,Fa],...e]}])}var I3=Pt(y3,!0);var S3=Pt(x3,!0);var M3=Pt(b3,!0,2);var P3=Pt(v3,!0);function eJ(n,e){n&1&&(W(0,"div",6),Ue(1,"div",11),W(2,"p"),w(3,"Loading profile..."),Q()())}function tJ(n,e){if(n&1&&(W(0,"div",7),ie(),W(1,"svg",12),Ue(2,"circle",13)(3,"line",14)(4,"line",15),Q(),w(5),Q()),n&2){let t=T();C(5),be(" ",t.errorMessage()," ")}}function nJ(n,e){if(n&1&&(W(0,"div",8),ie(),W(1,"svg",12),Ue(2,"path",16)(3,"polyline",17),Q(),w(4),Q()),n&2){let t=T();C(4),be(" ",t.successMessage()," ")}}function iJ(n,e){if(n&1&&Ue(0,"img",23),n&2){let t,i=T(2);Mn("src",(t=i.profile())==null?null:t.photoURL,Kt)}}function rJ(n,e){if(n&1&&(W(0,"div",24),w(1),Q()),n&2){let t=T(2);C(),be(" ",t.avatarInitials()," ")}}function oJ(n,e){if(n&1){let t=ge();W(0,"label",25)(1,"input",43),ot("change",function(r){j(t);let o=T(2);return z(o.uploadPhoto(r))}),Q(),ie(),W(2,"svg",44),Ue(3,"path",45)(4,"circle",46),Q()()}}function sJ(n,e){n&1&&(ie(),W(0,"svg",47),Ue(1,"path",48),Q(),w(2," BCPO Admin "))}function aJ(n,e){n&1&&(ie(),W(0,"svg",47),Ue(1,"path",49),Q(),w(2," Citizen "))}function cJ(n,e){if(n&1&&(W(0,"p",51),w(1),Q()),n&2){let t,i=T(3);C(),ae((t=i.profile())==null?null:t.bio)}}function lJ(n,e){n&1&&(W(0,"div",52),ie(),W(1,"svg",53),Ue(2,"path",54),Q(),w(3," Verified Account "),Q())}function uJ(n,e){if(n&1&&(W(0,"h2",50),w(1),Q(),Ee(2,cJ,2,1,"p",51),Ee(3,lJ,4,0,"div",52)),n&2){let t,i,r,o=T(2);C(),ae((t=o.profile())==null?null:t.displayName),C(),Ie((i=o.profile())!=null&&i.bio?2:-1),C(),Ie((r=o.profile())!=null&&r.isVerified?3:-1)}}function dJ(n,e){if(n&1){let t=ge();W(0,"div",33)(1,"label"),w(2,"Display Name"),Q(),W(3,"input",55),ot("input",function(r){j(t);let o=T(2);return z(o.updateFormField("displayName",r.target.value))}),Q()(),W(4,"div",33)(5,"label"),w(6,"Bio"),Q(),W(7,"textarea",56),ot("input",function(r){j(t);let o=T(2);return z(o.updateFormField("bio",r.target.value))}),Q()()}if(n&2){let t=T(2);C(3),Mn("value",t.editForm().displayName),C(4),Mn("value",t.editForm().bio)}}function hJ(n,e){if(n&1){let t=ge();W(0,"button",57),ot("click",function(){j(t);let r=T(3);return z(r.toggleEditMode())}),ie(),W(1,"svg",44),Ue(2,"path",58)(3,"path",59),Q(),w(4," Edit Profile "),Q(),pe(),W(5,"button",60),ot("click",function(){j(t);let r=T(3);return z(r.openPasswordModal())}),ie(),W(6,"svg",44),Ue(7,"rect",61)(8,"path",62),Q(),w(9," Change Password "),Q()}}function fJ(n,e){n&1&&(Ue(0,"div",64),w(1," Saving... "))}function pJ(n,e){n&1&&(ie(),W(0,"svg",44),Ue(1,"polyline",65),Q(),w(2," Save Changes "))}function gJ(n,e){if(n&1){let t=ge();W(0,"button",63),ot("click",function(){j(t);let r=T(3);return z(r.saveProfile())}),Ee(1,fJ,2,0)(2,pJ,3,0),Q(),W(3,"button",60),ot("click",function(){j(t);let r=T(3);return z(r.toggleEditMode())}),w(4,"Cancel"),Q()}if(n&2){let t=T(3);Mn("disabled",t.isSaving()),C(),Ie(t.isSaving()?1:2)}}function mJ(n,e){if(n&1&&(W(0,"div",28),Ee(1,hJ,10,0)(2,gJ,5,2),Q()),n&2){let t=T(2);C(),Ie(t.isEditMode()?2:1)}}function _J(n,e){n&1&&(W(0,"span",69),w(1,"Private"),Q())}function vJ(n,e){if(n&1&&(W(0,"div",66)(1,"span",67),w(2,"Email"),Q(),W(3,"span",68),w(4),Q(),Ee(5,_J,2,0,"span",69),Q()),n&2){let t,i,r=T(3);C(4),ae((t=r.profile())==null?null:t.email),C(),Ie(!(!((i=r.profile())==null||i.privacy==null)&&i.privacy.showEmail)&&r.isOwnProfile()?5:-1)}}function yJ(n,e){n&1&&(W(0,"span",69),w(1,"Private"),Q())}function bJ(n,e){if(n&1&&(W(0,"div",66)(1,"span",67),w(2,"Phone"),Q(),W(3,"span",68),w(4),Q(),Ee(5,yJ,2,0,"span",69),Q()),n&2){let t,i,r=T(3);C(4),ae(((t=r.profile())==null?null:t.phoneNumber)||"Not set"),C(),Ie(!(!((i=r.profile())==null||i.privacy==null)&&i.privacy.showPhone)&&r.isOwnProfile()?5:-1)}}function xJ(n,e){if(n&1&&(W(0,"div",32),Ee(1,vJ,6,2,"div",66),Ee(2,bJ,6,2,"div",66),Q()),n&2){let t,i,r=T(2);C(),Ie(!((t=r.profile())==null||t.privacy==null)&&t.privacy.showEmail||r.isOwnProfile()?1:-1),C(),Ie((i=r.profile())!=null&&i.phoneNumber&&(!((i=r.profile())==null||i.privacy==null)&&i.privacy.showPhone)||r.isOwnProfile()?2:-1)}}function wJ(n,e){if(n&1){let t=ge();W(0,"div",33)(1,"label"),w(2,"Phone Number"),Q(),W(3,"input",70),ot("input",function(r){j(t);let o=T(2);return z(o.updateFormField("phoneNumber",r.target.value))}),Q()()}if(n&2){let t=T(2);C(3),Mn("value",t.editForm().phoneNumber)}}function CJ(n,e){n&1&&(W(0,"span",69),w(1,"Address is private"),Q())}function EJ(n,e){if(n&1&&(W(0,"div",66)(1,"span",67),w(2,"Street"),Q(),W(3,"span",68),w(4),Q()(),W(5,"div",66)(6,"span",67),w(7,"Barangay"),Q(),W(8,"span",68),w(9),Q()(),W(10,"div",66)(11,"span",67),w(12,"City"),Q(),W(13,"span",68),w(14),Q()(),Ee(15,CJ,2,0,"span",69)),n&2){let t,i,r,o,a=T(3);C(4),ae(((t=a.profile())==null||t.address==null?null:t.address.street)||"Not set"),C(5),ae(((i=a.profile())==null||i.address==null?null:i.address.barangay)||"Not set"),C(5),ae(((r=a.profile())==null||r.address==null?null:r.address.city)||"Baguio City"),C(),Ie(!(!((o=a.profile())==null||o.privacy==null)&&o.privacy.showAddress)&&a.isOwnProfile()?15:-1)}}function IJ(n,e){n&1&&(W(0,"p",71),w(1,"Address is private"),Q())}function SJ(n,e){if(n&1&&(W(0,"div",32),Ee(1,EJ,16,4)(2,IJ,2,0,"p",71),Q()),n&2){let t,i=T(2);C(),Ie(!((t=i.profile())==null||t.address==null)&&t.address.street&&(!((t=i.profile())==null||t.privacy==null)&&t.privacy.showAddress)||i.isOwnProfile()?1:2)}}function MJ(n,e){if(n&1){let t=ge();W(0,"li",82),ot("mousedown",function(){let r=j(t).$implicit,o=T(4);return z(o.selectBarangay(r))}),w(1),Q()}if(n&2){let t=e.$implicit;C(),ae(t)}}function PJ(n,e){if(n&1&&(W(0,"li",81),w(1),Q()),n&2){let t=T(4);C(),be(" + ",t.filteredBarangays.length-8," more results ")}}function TJ(n,e){if(n&1&&(W(0,"ul",78),Gc(1,MJ,2,1,"li",null,Yx),Ee(3,PJ,2,1,"li",81),Q()),n&2){let t=T(3);C(),qc(t.filteredBarangays.slice(0,8)),C(2),Ie(t.filteredBarangays.length>8?3:-1)}}function OJ(n,e){if(n&1){let t=ge();W(0,"p",72),w(1,"Baguio City, Philippines"),Q(),W(2,"div",33)(3,"label"),w(4,"City"),Q(),Ue(5,"input",73),Q(),W(6,"div",74)(7,"label"),w(8,"Barangay "),W(9,"span",75),w(10,"*"),Q()(),W(11,"div",76)(12,"input",77),ot("input",function(r){j(t);let o=T(2);return z(o.filterBarangays(r))})("focus",function(r){j(t);let o=T(2);return z(o.filterBarangays(r))})("blur",function(){j(t);let r=T(2);return z(r.hideBarangaySuggestions())}),Q(),Ee(13,TJ,4,1,"ul",78),Q(),W(14,"small",79),w(15,"Select from 128 Baguio City barangays"),Q()(),W(16,"div",33)(17,"label"),w(18,"Street / Purok"),Q(),W(19,"input",80),ot("input",function(r){j(t);let o=T(2);return z(o.updateFormField("street",r.target.value))}),Q()()}if(n&2){let t=T(2);C(5),Mn("value","Baguio City"),C(7),Mn("value",t.editForm().barangay),C(),Ie(t.showBarangaySuggestions()&&t.filteredBarangays.length>0?13:-1),C(6),Mn("value",t.editForm().street)}}function DJ(n,e){if(n&1){let t=ge();W(0,"div",36)(1,"h3"),ie(),W(2,"svg",12),Ue(3,"path",83),Q(),w(4," Privacy Settings "),Q(),pe(),W(5,"p",84),w(6,"Choose what others can see on your profile"),Q(),W(7,"div",85)(8,"label",86)(9,"input",87),ot("change",function(r){j(t);let o=T(2);return z(o.updateFormField("showEmail",r.target.checked))}),Q(),Ue(10,"span",88),W(11,"span",89),w(12,"Show email address"),Q()(),W(13,"label",86)(14,"input",87),ot("change",function(r){j(t);let o=T(2);return z(o.updateFormField("showPhone",r.target.checked))}),Q(),Ue(15,"span",88),W(16,"span",89),w(17,"Show phone number"),Q()(),W(18,"label",86)(19,"input",87),ot("change",function(r){j(t);let o=T(2);return z(o.updateFormField("showAddress",r.target.checked))}),Q(),Ue(20,"span",88),W(21,"span",89),w(22,"Show address"),Q()()()()}if(n&2){let t=T(2);C(9),Mn("checked",t.editForm().showEmail),C(5),Mn("checked",t.editForm().showPhone),C(5),Mn("checked",t.editForm().showAddress)}}function AJ(n,e){if(n&1&&(W(0,"div",9)(1,"div",18)(2,"div",19),Ue(3,"div",20),Q(),W(4,"div",21)(5,"div",22),Ee(6,iJ,1,1,"img",23)(7,rJ,2,1,"div",24),Ee(8,oJ,5,0,"label",25),Q(),W(9,"div",26),Ee(10,sJ,3,0)(11,aJ,3,0),Q()(),W(12,"div",27),Ee(13,uJ,4,3)(14,dJ,8,2),Q(),Ee(15,mJ,3,1,"div",28),Q(),W(16,"div",29)(17,"div",30)(18,"h3"),ie(),W(19,"svg",12),Ue(20,"path",31),Q(),w(21," Contact Information "),Q(),Ee(22,xJ,3,2,"div",32)(23,wJ,4,1,"div",33),Q(),pe(),W(24,"div",30)(25,"h3"),ie(),W(26,"svg",12),Ue(27,"path",34)(28,"circle",35),Q(),w(29," Address "),Q(),Ee(30,SJ,3,1,"div",32)(31,OJ,20,4),Q(),Ee(32,DJ,23,3,"div",36),pe(),W(33,"div",37)(34,"h3"),ie(),W(35,"svg",12),Ue(36,"polyline",38),Q(),w(37," Activity "),Q(),pe(),W(38,"div",39)(39,"div",40)(40,"span",41),w(41),Q(),W(42,"span",42),w(43,"Reports"),Q()(),W(44,"div",40)(45,"span",41),w(46),Q(),W(47,"span",42),w(48,"Alerts"),Q()(),W(49,"div",40)(50,"span",41),w(51),Q(),W(52,"span",42),w(53,"SOS"),Q()()()()()()),n&2){let t,i,r,o,a,l,u=T();C(6),Ie((t=u.profile())!=null&&t.photoURL?6:7),C(2),Ie(u.isOwnProfile()?8:-1),C(),ke("admin",((i=u.profile())==null?null:i.role)==="admin"),C(),Ie(((r=u.profile())==null?null:r.role)==="admin"?10:11),C(3),Ie(u.isEditMode()?14:13),C(2),Ie(u.isOwnProfile()?15:-1),C(7),Ie(u.isEditMode()?23:22),C(8),Ie(u.isEditMode()?31:30),C(2),Ie(u.isOwnProfile()&&u.isEditMode()?32:-1),C(9),ae(((o=u.profile())==null||o.stats==null?null:o.stats.reportsSubmitted)||0),C(5),ae(((a=u.profile())==null||a.stats==null?null:a.stats.alertsReceived)||0),C(5),ae(((l=u.profile())==null||l.stats==null?null:l.stats.sosTriggered)||0)}}function kJ(n,e){if(n&1&&(W(0,"div",97),w(1),Q()),n&2){let t=T(2);C(),ae(t.errorMessage())}}function RJ(n,e){n&1&&(Ue(0,"div",64),w(1," Changing... "))}function NJ(n,e){n&1&&w(0," Change Password ")}function LJ(n,e){if(n&1){let t=ge();W(0,"div",90),ot("click",function(){j(t);let r=T();return z(r.closePasswordModal())}),W(1,"div",91),ot("click",function(r){return j(t),z(r.stopPropagation())}),W(2,"div",92)(3,"h3"),w(4,"Change Password"),Q(),W(5,"button",93),ot("click",function(){j(t);let r=T();return z(r.closePasswordModal())}),ie(),W(6,"svg",3),Ue(7,"line",94)(8,"line",95),Q()()(),pe(),W(9,"div",96),Ee(10,kJ,2,1,"div",97),W(11,"div",98)(12,"label"),w(13,"Current Password"),Q(),W(14,"input",99),ot("input",function(r){j(t);let o=T();return z(o.updatePasswordField("currentPassword",r.target.value))}),Q()(),W(15,"div",98)(16,"label"),w(17,"New Password"),Q(),W(18,"input",100),ot("input",function(r){j(t);let o=T();return z(o.updatePasswordField("newPassword",r.target.value))}),Q()(),W(19,"div",98)(20,"label"),w(21,"Confirm New Password"),Q(),W(22,"input",101),ot("input",function(r){j(t);let o=T();return z(o.updatePasswordField("confirmPassword",r.target.value))}),Q()()(),W(23,"div",102)(24,"button",60),ot("click",function(){j(t);let r=T();return z(r.closePasswordModal())}),w(25,"Cancel"),Q(),W(26,"button",63),ot("click",function(){j(t);let r=T();return z(r.changePassword())}),Ee(27,RJ,2,0)(28,NJ,1,0),Q()()()()}if(n&2){let t=T();C(10),Ie(t.errorMessage()?10:-1),C(4),Mn("value",t.passwordForm().currentPassword),C(4),Mn("value",t.passwordForm().newPassword),C(4),Mn("value",t.passwordForm().confirmPassword),C(4),Mn("disabled",t.isSaving()),C(),Ie(t.isSaving()?27:28)}}var Fy=class n{auth=F(Ns);firestore=F(Hs);storage=F(Ml);router=F(Et);route=F(gi);authService=F(ln);toastService=F(Jn);isLoading=Bt(!0);isSaving=Bt(!1);isOwnProfile=Bt(!0);isEditMode=Bt(!1);showPasswordModal=Bt(!1);errorMessage=Bt("");successMessage=Bt("");profile=Bt(null);profileId=Bt(null);editForm=Bt({displayName:"",phoneNumber:"",bio:"",barangay:"",street:"",city:"",showEmail:!0,showPhone:!1,showAddress:!1});passwordForm=Bt({currentPassword:"",newPassword:"",confirmPassword:""});baguioBarangays=Object.keys(Gi).sort();filteredBarangays=[];showBarangaySuggestions=Bt(!1);currentUser$=this.authService.currentUser$;isAdmin$=this.authService.isAdmin$;avatarInitials=Ia(()=>{let e=this.profile()?.displayName||"U",t=e.split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e.substring(0,2).toUpperCase()});ngOnInit(){this.route.params.subscribe(e=>P(this,null,function*(){let t=e.id;if(t){this.profileId.set(t),yield this.loadProfile(t);let i=this.auth.currentUser;this.isOwnProfile.set(i?.uid===t)}else{let i=this.auth.currentUser;i?(this.profileId.set(i.uid),this.isOwnProfile.set(!0),yield this.loadProfile(i.uid)):this.router.navigate(["/login"])}}))}loadProfile(e){return P(this,null,function*(){this.isLoading.set(!0),this.errorMessage.set("");try{let t=vi(this.firestore,"users",e),i=yield Ap(t);if(i.exists()){let r=i.data();this.profile.set(ve(J({},r),{uid:e})),this.populateEditForm(r)}else{let r=this.auth.currentUser;if(r&&r.uid===e){let o=yield this.createDefaultProfile(r);this.profile.set(o),this.populateEditForm(o)}else this.errorMessage.set("Profile not found")}}catch(t){console.error("Error loading profile:",t),this.errorMessage.set("Failed to load profile")}finally{this.isLoading.set(!1)}})}createDefaultProfile(e){return P(this,null,function*(){let i=!!(yield e.getIdTokenResult()).claims?.admin,r={uid:e.uid,email:e.email||"",displayName:e.displayName||e.email?.split("@")[0]||"User",photoURL:e.photoURL||"",phoneNumber:e.phoneNumber||"",bio:"",role:i?"admin":"user",isVerified:e.emailVerified,createdAt:Ir(),updatedAt:Ir(),privacy:{showEmail:!0,showPhone:!1,showAddress:!1},stats:{reportsSubmitted:0,alertsReceived:0,sosTriggered:0}},o=vi(this.firestore,"users",e.uid);return yield wl(o,r,{merge:!0}),r})}populateEditForm(e){this.editForm.set({displayName:e.displayName||"",phoneNumber:e.phoneNumber||"",bio:e.bio||"",barangay:e.address?.barangay||"",street:e.address?.street||"",city:e.address?.city||"Baguio City",showEmail:e.privacy?.showEmail??!0,showPhone:e.privacy?.showPhone??!1,showAddress:e.privacy?.showAddress??!1})}toggleEditMode(){if(this.isEditMode()){let e=this.profile();e&&this.populateEditForm(e)}this.isEditMode.set(!this.isEditMode()),this.successMessage.set(""),this.errorMessage.set("")}updateFormField(e,t){this.editForm.update(i=>ve(J({},i),{[e]:t}))}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.updateFormField("barangay",e.target.value),this.showBarangaySuggestions.set(!0),!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.updateFormField("barangay",e),this.showBarangaySuggestions.set(!1),this.filteredBarangays=[...this.baguioBarangays]}hideBarangaySuggestions(){setTimeout(()=>{this.showBarangaySuggestions.set(!1)},200)}saveProfile(){return P(this,null,function*(){if(this.isOwnProfile()){this.isSaving.set(!0),this.errorMessage.set(""),this.successMessage.set("");try{let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let t=this.editForm();yield up(e,{displayName:t.displayName});let i=vi(this.firestore,"users",e.uid);yield Cl(i,{displayName:t.displayName,phoneNumber:t.phoneNumber,bio:t.bio,address:{barangay:t.barangay,street:t.street,city:t.city},privacy:{showEmail:t.showEmail,showPhone:t.showPhone,showAddress:t.showAddress},updatedAt:Ir()}),yield this.loadProfile(e.uid),this.successMessage.set("Profile updated successfully!"),this.toastService.success("Profile updated successfully!"),this.isEditMode.set(!1)}catch(e){console.error("Error saving profile:",e),this.errorMessage.set(e.message||"Failed to save profile"),this.toastService.error(e.message||"Failed to save profile")}finally{this.isSaving.set(!1)}}})}uploadPhoto(e){return P(this,null,function*(){let t=e.target;if(!t.files||!t.files[0])return;let i=t.files[0];if(!i.type.startsWith("image/")){this.errorMessage.set("Please select an image file"),this.toastService.error("Please select an image file");return}if(i.size>5*1024*1024){this.errorMessage.set("Image must be less than 5MB"),this.toastService.error("Image must be less than 5MB");return}this.isSaving.set(!0),this.errorMessage.set("");try{let r=this.auth.currentUser;if(!r)throw new Error("Not authenticated");let o=M3(this.storage,`profile-photos/${r.uid}`);yield P3(o,i);let a=yield I3(o);yield up(r,{photoURL:a});let l=vi(this.firestore,"users",r.uid);yield Cl(l,{photoURL:a,updatedAt:Ir()}),yield this.loadProfile(r.uid),this.successMessage.set("Photo updated successfully!"),this.toastService.success("Profile photo updated successfully!")}catch(r){console.error("Error uploading photo:",r),this.errorMessage.set(r.message||"Failed to upload photo"),this.toastService.error(r.message||"Failed to upload photo")}finally{this.isSaving.set(!1)}})}openPasswordModal(){this.passwordForm.set({currentPassword:"",newPassword:"",confirmPassword:""}),this.showPasswordModal.set(!0),this.errorMessage.set("")}closePasswordModal(){this.showPasswordModal.set(!1)}updatePasswordField(e,t){this.passwordForm.update(i=>ve(J({},i),{[e]:t}))}changePassword(){return P(this,null,function*(){let e=this.passwordForm();if(e.newPassword!==e.confirmPassword){this.errorMessage.set("Passwords do not match"),this.toastService.error("Passwords do not match");return}if(e.newPassword.length<6){this.errorMessage.set("Password must be at least 6 characters"),this.toastService.error("Password must be at least 6 characters");return}this.isSaving.set(!0),this.errorMessage.set("");try{let t=this.auth.currentUser;if(!t||!t.email)throw new Error("Not authenticated");let i=tv.credential(t.email,e.currentPassword);yield kR(t,i),yield FR(t,e.newPassword),this.successMessage.set("Password changed successfully!"),this.toastService.success("Password changed successfully!"),this.closePasswordModal()}catch(t){console.error("Error changing password:",t),t.code==="auth/wrong-password"?(this.errorMessage.set("Current password is incorrect"),this.toastService.error("Current password is incorrect")):(this.errorMessage.set(t.message||"Failed to change password"),this.toastService.error(t.message||"Failed to change password"))}finally{this.isSaving.set(!1)}})}goBack(){this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-profile"]],decls:14,vars:6,consts:[[1,"profile-container"],[1,"profile-header"],[1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","15 18 9 12 15 6"],[1,"header-spacer"],[1,"loading-state"],[1,"error-banner"],[1,"success-banner"],[1,"profile-content"],[1,"modal-overlay"],[1,"spinner"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"profile-card"],[1,"cover-photo"],[1,"cover-gradient"],[1,"avatar-section"],[1,"avatar-wrapper"],["alt","Profile Photo",1,"avatar-image",3,"src"],[1,"avatar-placeholder"],["title","Change photo",1,"avatar-upload-btn"],[1,"role-badge"],[1,"user-info"],[1,"action-buttons"],[1,"details-grid"],[1,"details-card"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"info-list"],[1,"edit-field"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"details-card","privacy-card"],[1,"details-card","stats-card"],["points","22 12 18 12 15 21 9 3 6 12 2 12"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],["type","file","accept","image/*","hidden","",3,"change"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"],["cx","12","cy","13","r","4"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"user-name"],[1,"user-bio"],[1,"verified-badge"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L9.19 4.69 4.69 4.69 4.69 9.19 1 12l3.69 2.81 0 4.5h4.5L12 23l2.81-3.69h4.5l0-4.5L23 12l-3.69-2.81 0-4.5h-4.5L12 1zm-1.41 14.59L6 11l1.41-1.41 3.18 3.18 6-6L18 8.18l-7.41 7.41z"],["type","text","placeholder","Your name",3,"input","value"],["placeholder","Tell us about yourself...","rows","3",3,"input","value"],[1,"btn-primary",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"btn-secondary",3,"click"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"btn-primary",3,"click","disabled"],[1,"btn-spinner"],["points","20 6 9 17 4 12"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"privacy-indicator"],["type","tel","placeholder","+63 9XX XXX XXXX",3,"input","value"],[1,"private-message"],[1,"address-hierarchy-note"],["type","text","readonly","",1,"readonly-field",3,"value"],[1,"edit-field","barangay-field"],[1,"required"],[1,"autocomplete-wrapper"],["type","text","placeholder","Start typing to search barangay...","autocomplete","off",3,"input","focus","blur","value"],[1,"barangay-suggestions"],[1,"field-hint"],["type","text","placeholder","e.g., Purok 5, Main Street",3,"input","value"],[1,"more-results"],[3,"mousedown"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],[1,"privacy-note"],[1,"toggle-list"],[1,"toggle-item"],["type","checkbox",3,"change","checked"],[1,"toggle-slider"],[1,"toggle-label"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"modal-body"],[1,"error-message"],[1,"form-group"],["type","password","placeholder","Enter current password",3,"input","value"],["type","password","placeholder","Enter new password",3,"input","value"],["type","password","placeholder","Confirm new password",3,"input","value"],[1,"modal-footer"]],template:function(t,i){t&1&&(W(0,"div",0)(1,"header",1)(2,"button",2),ot("click",function(){return i.goBack()}),ie(),W(3,"svg",3),Ue(4,"polyline",4),Q(),w(5," Back "),Q(),pe(),W(6,"h1"),w(7),Q(),Ue(8,"div",5),Q(),Ee(9,eJ,4,0,"div",6),Ee(10,tJ,6,1,"div",7),Ee(11,nJ,5,1,"div",8),Ee(12,AJ,54,13,"div",9),Ee(13,LJ,29,6,"div",10),Q()),t&2&&(C(7),ae(i.isOwnProfile()?"My Profile":"User Profile"),C(2),Ie(i.isLoading()?9:-1),C(),Ie(i.errorMessage()&&!i.isLoading()?10:-1),C(),Ie(i.successMessage()?11:-1),C(),Ie(i.profile()&&!i.isLoading()?12:-1),C(),Ie(i.showPasswordModal()?13:-1))},dependencies:[ht,gn],styles:[`[_nghost-%COMP%]{--navy-primary: #1a2a5e;--navy-dark: #0d1a3d;--navy-light: #2a3a6e;--gold-primary: #d4a84b;--gold-light: #e5c896;--gold-dark: #c9a227;--red-accent: #c41e3a;--red-light: #ff6b6b;--white: #ffffff;--gray-50: #f8f9fa;--gray-100: #f1f3f5;--gray-200: #e9ecef;--gray-300: #dee2e6;--gray-400: #ced4da;--gray-500: #adb5bd;--gray-600: #868e96;--gray-700: #495057;--gray-800: #343a40;--gray-900: #212529;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06);--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);--shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, .15), 0 10px 10px -5px rgba(0, 0, 0, .04);--shadow-gold: 0 4px 14px rgba(212, 168, 75, .3);--shadow-navy: 0 4px 14px rgba(26, 42, 94, .25);--transition-fast: .15s cubic-bezier(.4, 0, .2, 1);--transition-normal: .3s cubic-bezier(.4, 0, .2, 1);--transition-slow: .5s cubic-bezier(.4, 0, .2, 1);--radius-sm: 6px;--radius-md: 10px;--radius-lg: 14px;--radius-xl: 20px;--radius-2xl: 28px;--radius-full: 50%;display:block;min-height:100vh;background:linear-gradient(165deg,#f8f9fb,#eef1f5,#e8edf3)}.profile-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding-bottom:80px;position:relative}.profile-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:100;display:flex;align-items:center;justify-content:space-between;padding:14px 24px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);box-shadow:var(--shadow-navy);border-bottom:2px solid rgba(212,168,75,.3)}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--white);font-size:1.1rem;font-weight:600;letter-spacing:.5px;text-transform:uppercase}.profile-header[_ngcontent-%COMP%]   .header-spacer[_ngcontent-%COMP%]{width:80px}.back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 18px;background:#ffffff1a;border:1px solid rgba(212,168,75,.4);border-radius:var(--radius-lg);color:var(--gold-light);font-size:.9rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}.back-btn[_ngcontent-%COMP%]:hover{background:#d4a84b33;border-color:var(--gold-primary);transform:translate(-3px)}.back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform var(--transition-fast)}.back-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-3px)}.edit-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 22px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--navy-dark);font-size:.9rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold);text-transform:uppercase;letter-spacing:.5px}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 6px 20px #d4a84b66}.edit-button.cancel[_ngcontent-%COMP%]{background:#ffffff1a;color:var(--white);border:1px solid rgba(255,255,255,.3);box-shadow:none}.edit-button.cancel[_ngcontent-%COMP%]:hover{background:#fff3;border-color:var(--white)}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;padding-top:80px}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:56px;height:56px;border:4px solid rgba(26,42,94,.15);border-top-color:var(--gold-primary);border-radius:var(--radius-full);animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;color:var(--navy-primary);font-size:1rem;font-weight:500}.error-banner[_ngcontent-%COMP%], .success-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:76px 20px 16px;padding:16px 20px;border-radius:var(--radius-lg);font-size:.95rem;font-weight:500;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.error-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a1a,#ff6b6b1a);border:1px solid rgba(196,30,58,.3);color:var(--red-accent)}.success-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b9811a,#34d3991a);border:1px solid rgba(16,185,129,.3);color:#059669}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.profile-content[_ngcontent-%COMP%]{padding-top:76px}.profile-card[_ngcontent-%COMP%]{margin:20px;background:var(--white);border-radius:var(--radius-2xl);box-shadow:var(--shadow-xl);overflow:hidden;border:1px solid rgba(26,42,94,.08)}.cover-section[_ngcontent-%COMP%]{position:relative;margin-top:60px}.cover-photo[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 40%,var(--navy-light) 100%);overflow:hidden}.cover-photo[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 50%,rgba(212,168,75,.15) 0%,transparent 50%),radial-gradient(circle at 80% 30%,rgba(212,168,75,.1) 0%,transparent 40%),url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4a84b' fill-opacity='0.06'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}.cover-gradient[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 0%,rgba(255,255,255,.1) 100%)}.cover-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.cover-photo[_ngcontent-%COMP%]   .default-cover[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 50%,var(--navy-light) 100%);display:flex;align-items:center;justify-content:center}.cover-photo[_ngcontent-%COMP%]   .default-cover[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4a84b' fill-opacity='0.08'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}.cover-photo[_ngcontent-%COMP%]   .default-cover[_ngcontent-%COMP%]   .police-badge[_ngcontent-%COMP%]{font-size:4rem;opacity:.3;z-index:1}.cover-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.4) 0%,transparent 60%);pointer-events:none}.change-cover-btn[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;display:flex;align-items:center;gap:8px;padding:10px 16px;background:#0009;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:var(--radius-md);color:var(--white);font-size:.85rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}.change-cover-btn[_ngcontent-%COMP%]:hover{background:#000c;transform:scale(1.02)}.change-cover-btn[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.avatar-section[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;margin-top:-70px;padding:0 20px;z-index:10}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:140px;height:140px}.avatar-container[_ngcontent-%COMP%]{position:relative;width:160px;height:160px}.avatar[_ngcontent-%COMP%], .avatar-image[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:var(--radius-full);border:5px solid var(--white);box-shadow:0 8px 32px #1a2a5e40,0 0 0 4px #d4a84b4d;overflow:hidden;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%)}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar[_ngcontent-%COMP%]   .default-avatar[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);color:var(--gold-primary);font-size:3.5rem;font-weight:700;text-transform:uppercase;letter-spacing:2px}.verified-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;margin-top:12px;padding:8px 16px;background:linear-gradient(135deg,#10b9811a,#34d39926);border:1px solid rgba(16,185,129,.3);border-radius:var(--radius-lg);color:#059669;font-size:.85rem;font-weight:600}.verified-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#10b981}.avatar-upload-btn[_ngcontent-%COMP%], .change-avatar-btn[_ngcontent-%COMP%]{position:absolute;bottom:4px;right:4px;width:40px;height:40px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:3px solid var(--white);border-radius:var(--radius-full);display:flex;align-items:center;justify-content:center;color:var(--navy-dark);font-size:1rem;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold)}.avatar-upload-btn[_ngcontent-%COMP%]:hover, .change-avatar-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 20px #d4a84b66}.role-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;margin-top:16px;padding:10px 20px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-xl);color:var(--gold-primary);font-size:.85rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;box-shadow:var(--shadow-navy);border:2px solid rgba(212,168,75,.3)}.role-badge.admin[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);color:var(--navy-dark);border-color:var(--gold-dark)}.role-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.9}.change-avatar-btn[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.user-info[_ngcontent-%COMP%]{padding:24px 30px 30px;text-align:center}.user-name[_ngcontent-%COMP%]{font-size:1.85rem;font-weight:800;color:var(--navy-dark);letter-spacing:-.5px;margin:0}.user-role[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;margin-top:10px;padding:8px 16px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-lg);color:var(--gold-primary);font-size:.85rem;font-weight:600;text-transform:capitalize}.user-role[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{font-size:.9rem}.user-bio[_ngcontent-%COMP%]{margin-top:16px;font-size:1rem;color:var(--gray-600);line-height:1.6;max-width:500px;margin-left:auto;margin-right:auto}.edit-field[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.edit-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.85rem;font-weight:600;color:var(--navy-primary);text-transform:uppercase;letter-spacing:.5px}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:14px 18px;background:var(--gray-50);border:2px solid var(--gray-200);border-radius:var(--radius-lg);font-size:1rem;color:var(--gray-800);transition:all var(--transition-fast)}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .edit-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gold-primary);background:var(--white);box-shadow:0 0 0 4px #d4a84b26}.edit-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical;font-family:inherit}.readonly-field[_ngcontent-%COMP%]{background:var(--gray-100)!important;color:var(--gray-600)!important;cursor:not-allowed}.address-hierarchy-note[_ngcontent-%COMP%]{color:var(--navy-primary);font-size:.85rem;font-weight:600;margin-bottom:16px;padding:10px 14px;background:linear-gradient(135deg,#d4a84b1a,#d4a84b0d);border-left:3px solid var(--gold-primary);border-radius:var(--radius-sm)}.edit-field[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--red-accent);font-weight:700}.field-hint[_ngcontent-%COMP%]{display:block;margin-top:6px;color:var(--gray-500);font-size:.75rem}.barangay-field[_ngcontent-%COMP%]   .autocomplete-wrapper[_ngcontent-%COMP%]{position:relative}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;max-height:280px;margin:0;padding:0;list-style:none;background:var(--white);border:2px solid var(--gold-primary);border-top:none;border-radius:0 0 var(--radius-lg) var(--radius-lg);box-shadow:var(--shadow-lg);overflow-y:auto;z-index:100}.barangay-suggestions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:12px 18px;cursor:pointer;font-size:.9rem;color:var(--gray-700);border-bottom:1px solid var(--gray-100);transition:all var(--transition-fast)}.barangay-suggestions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.barangay-suggestions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d4a84b26,#d4a84b0d);color:var(--navy-primary)}.barangay-suggestions[_ngcontent-%COMP%]   li.more-results[_ngcontent-%COMP%]{background:var(--gray-50);color:var(--gray-500);font-style:italic;font-size:.8rem;cursor:default;text-align:center}.barangay-suggestions[_ngcontent-%COMP%]   li.more-results[_ngcontent-%COMP%]:hover{background:var(--gray-50)}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;padding:0 30px 30px}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px 28px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--navy-dark);font-size:.95rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold)}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #d4a84b66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-secondary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px 28px;background:var(--gray-100);border:2px solid var(--gray-300);border-radius:var(--radius-lg);color:var(--gray-700);font-size:.95rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--gray-200);border-color:var(--gray-400)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;margin:0 20px 20px;background:var(--gray-200);border-radius:var(--radius-xl);overflow:hidden;box-shadow:var(--shadow-md)}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px 16px;background:var(--white);transition:all var(--transition-fast)}.stat-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1a2a5e08,#d4a84b0d)}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:var(--navy-primary);line-height:1}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{margin-top:6px;font-size:.8rem;color:var(--gray-500);font-weight:600;text-transform:uppercase;letter-spacing:.5px}.stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.5rem;color:var(--gold-primary)}.tabs[_ngcontent-%COMP%]{display:flex;gap:4px;margin:0 20px 20px;padding:6px;background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);border:1px solid var(--gray-200)}.tab-btn[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:10px;padding:14px 20px;background:transparent;border:none;border-radius:var(--radius-lg);color:var(--gray-500);font-size:.9rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.tab-btn[_ngcontent-%COMP%]:hover{background:var(--gray-100);color:var(--navy-primary)}.tab-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);color:var(--white);box-shadow:var(--shadow-navy)}.tab-btn.active[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--navy-light) 0%,var(--navy-primary) 100%)}.tab-btn[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{font-size:1.1rem}.tab-content[_ngcontent-%COMP%]{margin:0 20px 20px}.info-section[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;margin-bottom:20px;border:1px solid rgba(26,42,94,.06)}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 24px;padding-bottom:16px;border-bottom:2px solid var(--gray-100);font-size:1.1rem;font-weight:700;color:var(--navy-primary)}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--gold-primary)}.about-panel[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;border:1px solid rgba(26,42,94,.06)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--gray-100);font-size:1.1rem;font-weight:700;color:var(--navy-primary)}.section-title[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{color:var(--gold-primary)}.info-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding:16px;background:linear-gradient(135deg,var(--gray-50) 0%,rgba(212,168,75,.03) 100%);border-radius:var(--radius-lg);border:1px solid var(--gray-200);transition:all var(--transition-fast)}.info-item[_ngcontent-%COMP%]:hover{border-color:#d4a84b4d;transform:translate(4px)}.info-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{flex-shrink:0;width:44px;height:44px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-md);color:var(--gold-primary);font-size:1.1rem}.info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{flex:1}.info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--gray-500);font-weight:700;text-transform:uppercase;letter-spacing:.75px}.info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{margin-top:4px;font-size:1rem;color:var(--gray-800);font-weight:600}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:.85rem;font-weight:700;color:var(--navy-primary);text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:14px 18px;background:var(--gray-50);border:2px solid var(--gray-200);border-radius:var(--radius-lg);font-size:1rem;color:var(--gray-800);transition:all var(--transition-fast)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gold-primary);background:var(--white);box-shadow:0 0 0 4px #d4a84b26}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:120px;resize:vertical;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--gray-400)}.save-button[_ngcontent-%COMP%]{width:100%;padding:16px 28px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--navy-dark);font-size:1rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold);text-transform:uppercase;letter-spacing:.5px}.save-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #d4a84b66}.save-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.activity-panel[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;border:1px solid rgba(26,42,94,.06)}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.activity-item[_ngcontent-%COMP%]{display:flex;gap:16px;padding:18px;background:linear-gradient(135deg,var(--gray-50) 0%,rgba(212,168,75,.03) 100%);border-radius:var(--radius-lg);border:1px solid var(--gray-200);transition:all var(--transition-fast)}.activity-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1a2a5e08,#d4a84b14);border-color:#d4a84b4d;transform:translate(6px)}.activity-icon[_ngcontent-%COMP%]{flex-shrink:0;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-lg);color:var(--gold-primary);font-size:1.2rem;box-shadow:var(--shadow-navy)}.activity-content[_ngcontent-%COMP%]{flex:1}.activity-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:var(--gray-800)}.activity-description[_ngcontent-%COMP%]{margin-top:4px;font-size:.9rem;color:var(--gray-500);line-height:1.4}.activity-time[_ngcontent-%COMP%]{margin-top:8px;font-size:.75rem;color:var(--gray-400);font-weight:600;text-transform:uppercase;letter-spacing:.5px}.empty-activity[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;color:var(--gray-500)}.empty-activity[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:16px;opacity:.4}.empty-activity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}.settings-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.settings-section[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;border:1px solid rgba(26,42,94,.06)}.settings-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--gray-100);font-size:1.1rem;font-weight:700;color:var(--navy-primary)}.settings-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .settings-icon[_ngcontent-%COMP%]{color:var(--gold-primary)}.password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.change-password-btn[_ngcontent-%COMP%]{width:100%;padding:14px 28px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--white);font-size:.95rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-navy);text-transform:uppercase;letter-spacing:.5px}.change-password-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #1a2a5e4d;background:linear-gradient(135deg,var(--navy-light) 0%,var(--navy-primary) 100%)}.change-password-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.danger-zone[_ngcontent-%COMP%]{border:2px solid rgba(196,30,58,.3);background:linear-gradient(135deg,#c41e3a05,#ff6b6b08)}.danger-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .danger-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .settings-icon[_ngcontent-%COMP%]{color:var(--red-accent)}.danger-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;width:100%;padding:14px 28px;background:transparent;border:2px solid var(--red-accent);border-radius:var(--radius-lg);color:var(--red-accent);font-size:.95rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);text-transform:uppercase;letter-spacing:.5px}.danger-btn[_ngcontent-%COMP%]:hover{background:var(--red-accent);color:var(--white);box-shadow:0 4px 16px #c41e3a4d}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1000;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#0d1a3df2,#1a2a5ef2);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.spinner[_ngcontent-%COMP%]{width:56px;height:56px;border:4px solid rgba(212,168,75,.2);border-top-color:var(--gold-primary);border-radius:var(--radius-full);animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;color:var(--white);font-size:1rem;font-weight:500;letter-spacing:.5px}@media (max-width: 768px){.profile-header[_ngcontent-%COMP%]{padding:12px 16px}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:.95rem}.back-btn[_ngcontent-%COMP%]{padding:8px 14px;font-size:.85rem}.edit-button[_ngcontent-%COMP%]{padding:8px 16px;font-size:.85rem}.cover-photo[_ngcontent-%COMP%]{height:160px}.avatar-wrapper[_ngcontent-%COMP%]{width:110px;height:110px}.avatar-placeholder[_ngcontent-%COMP%]{font-size:2.5rem}.avatar-section[_ngcontent-%COMP%]{margin-top:-55px}.role-badge[_ngcontent-%COMP%]{padding:8px 16px;font-size:.75rem}.user-info[_ngcontent-%COMP%]{padding:20px}.user-name[_ngcontent-%COMP%]{font-size:1.5rem}.profile-card[_ngcontent-%COMP%]{margin:16px}.stats-grid[_ngcontent-%COMP%]{margin:0 16px 16px}.stat-item[_ngcontent-%COMP%]{padding:16px 8px}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.7rem}.tabs[_ngcontent-%COMP%]{margin:0 16px 16px;padding:4px}.tab-btn[_ngcontent-%COMP%]{padding:12px 10px;font-size:.85rem;gap:6px}.tab-content[_ngcontent-%COMP%]{margin:0 16px 16px}.about-panel[_ngcontent-%COMP%], .activity-panel[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%], .info-section[_ngcontent-%COMP%]{padding:20px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;padding:0 20px 20px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.profile-header[_ngcontent-%COMP%]{padding:10px 12px}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:.85rem}.back-btn[_ngcontent-%COMP%]{padding:8px 12px}.cover-photo[_ngcontent-%COMP%]{height:120px}.avatar-wrapper[_ngcontent-%COMP%]{width:90px;height:90px}.avatar-placeholder[_ngcontent-%COMP%]{font-size:2rem}.avatar-section[_ngcontent-%COMP%]{margin-top:-45px}.avatar-upload-btn[_ngcontent-%COMP%]{width:32px;height:32px}.user-name[_ngcontent-%COMP%]{font-size:1.3rem}.role-badge[_ngcontent-%COMP%]{padding:6px 14px;font-size:.7rem}.stats-grid[_ngcontent-%COMP%]{margin:0 12px 12px}.stat-item[_ngcontent-%COMP%]{padding:12px 6px}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.3rem}.tabs[_ngcontent-%COMP%]{margin:0 12px 12px}.tab-btn[_ngcontent-%COMP%]{padding:10px 8px;font-size:.75rem}.tab-content[_ngcontent-%COMP%]{margin:0 12px 12px}.info-item[_ngcontent-%COMP%]{padding:12px;gap:12px}.info-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{width:36px;height:36px;font-size:.9rem}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.92)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.profile-card[_ngcontent-%COMP%], .cover-section[_ngcontent-%COMP%], .cover-photo[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s cubic-bezier(.4,0,.2,1)}.avatar-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn .5s cubic-bezier(.4,0,.2,1) .15s both}.role-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1) .25s both}.user-info[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1) .2s both}.stats-grid[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s cubic-bezier(.4,0,.2,1) .3s both}.tabs[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s cubic-bezier(.4,0,.2,1) .35s both}.tab-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1)}.info-section[_ngcontent-%COMP%], .about-panel[_ngcontent-%COMP%], .activity-panel[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1)}.profile-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-xl),0 0 0 1px #d4a84b1a}.info-item[_ngcontent-%COMP%], .activity-item[_ngcontent-%COMP%]{position:relative;overflow:hidden}.info-item[_ngcontent-%COMP%]:before, .activity-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(212,168,75,.05),transparent);transition:left .5s ease}.info-item[_ngcontent-%COMP%]:hover:before, .activity-item[_ngcontent-%COMP%]:hover:before{left:100%}`]})};var wM=(n,e)=>{let t=F(ln),i=F(Et);return t.isAdmin$.pipe(ue(r=>r?!0:i.createUrlTree(["/login"])))},$p=(n,e)=>{let t=F(ln),i=F(Et);return t.currentUser$.pipe(ue(r=>r?!0:i.createUrlTree(["/login"])))};var T3=[{path:"",component:ay,title:"Mountain Sentinel Home"},{path:"map",component:xy,title:"Safety Alert Map"},{path:"login",component:Oy,title:"Login / Sign Up"},{path:"report",component:wy,title:"Submit Safety Alert",canActivate:[$p]},{path:"report-detail/:id",component:Cy,title:"Alert Details"},{path:"admin-dashboard",component:Ey,title:"Admin Dashboard",canActivate:[wM]},{path:"admin-report",component:Iy,title:"Issue Safety Alert",canActivate:[wM]},{path:"safety-feed",component:Sy,title:"Safety Feed"},{path:"police-reports",component:My,title:"Police Issuance Reports"},{path:"citizen-reports",component:Ay,title:"Citizen Reports"},{path:"user-dashboard",component:Py,title:"User Dashboard",canActivate:[$p]},{path:"notification",component:Ty,title:"Notifications"},{path:"emergency-call",component:Dy,title:"Emergency Call",canActivate:[$p]},{path:"profile",component:Fy,title:"My Profile",canActivate:[$p]},{path:"**",redirectTo:""}];var FJ={apiKey:"AIzaSyC5tdlJxwcSqbHwGAjOjUbd7XVU54ePawk",authDomain:"mountain-sentinel.firebaseapp.com",projectId:"mountain-sentinel",storageBucket:"mountain-sentinel.firebasestorage.app",messagingSenderId:"635510430186",appId:"1:635510430186:web:e333c2a926d64d44383a93",measurementId:"G-5G9M3TM3NW"},O3={providers:[xk(()=>wk(FJ)),w4(()=>C4()),TR(()=>AR()),E3(()=>S3()),aC(T3)]};var VJ=(n,e)=>e.id;function BJ(n,e){n&1&&(ie(),W(0,"svg",4),Ue(1,"path",10)(2,"polyline",11),Q())}function UJ(n,e){n&1&&(ie(),W(0,"svg",4),Ue(1,"circle",12)(2,"line",13)(3,"line",14),Q())}function jJ(n,e){n&1&&(ie(),W(0,"svg",4),Ue(1,"path",15)(2,"line",16)(3,"line",17),Q())}function zJ(n,e){n&1&&(ie(),W(0,"svg",4),Ue(1,"circle",12)(2,"line",18)(3,"line",19),Q())}function HJ(n,e){if(n&1){let t=ge();W(0,"div",2),ot("click",function(){let r=j(t).$implicit,o=T();return z(o.dismiss(r.id))}),W(1,"div",3),Ee(2,BJ,3,0,":svg:svg",4)(3,UJ,4,0,":svg:svg",4)(4,jJ,4,0,":svg:svg",4)(5,zJ,4,0,":svg:svg",4),Q(),W(6,"span",5),w(7),Q(),W(8,"button",6),ot("click",function(r){let o=j(t).$implicit;return T().dismiss(o.id),z(r.stopPropagation())}),ie(),W(9,"svg",7),Ue(10,"line",8)(11,"line",9),Q()()()}if(n&2){let t,i=e.$implicit;Kc("toast-"+i.type),C(2),Ie((t=i.type)==="success"?2:t==="error"?3:t==="warning"?4:t==="info"?5:-1),C(5),ae(i.message)}}var Vy=class n{toastService=F(Jn);dismiss(e){this.toastService.dismiss(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-toast"]],decls:3,vars:0,consts:[[1,"toast-container"],[1,"toast",3,"class"],[1,"toast",3,"click"],[1,"toast-icon"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"toast-message"],[1,"toast-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"]],template:function(t,i){t&1&&(W(0,"div",0),Gc(1,HJ,12,4,"div",1,VJ),Q()),t&2&&(C(),qc(i.toastService.toasts()))},dependencies:[ht],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:80px;right:20px;z-index:10000;display:flex;flex-direction:column;gap:12px;max-width:400px}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 18px;border-radius:12px;box-shadow:0 8px 32px #00000026,0 4px 12px #0000001a;cursor:pointer;animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}.toast-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#059669,#10b981);color:#fff}.toast-error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#ef4444);color:#fff}.toast-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d97706,#f59e0b);color:#fff}.toast-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#2563eb);color:#fff}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center}.toast-message[_ngcontent-%COMP%]{flex:1;font-size:.95rem;font-weight:500;line-height:1.4}.toast-close[_ngcontent-%COMP%]{flex-shrink:0;background:#fff3;border:none;border-radius:6px;padding:4px;cursor:pointer;color:inherit;display:flex;align-items:center;justify-content:center;transition:background .2s}.toast-close[_ngcontent-%COMP%]:hover{background:#ffffff4d}@media (max-width: 480px){.toast-container[_ngcontent-%COMP%]{left:12px;right:12px;max-width:none}}"]})};var D3=()=>({exact:!0});function $J(n,e){if(n&1&&(_(0,"span",29),w(1),v()),n&2){let t=e.ngIf;ke("hidden",t===0),C(),ae(t)}}function GJ(n,e){if(n&1){let t=ge();Xe(0),_(1,"a",17),X("click",function(){j(t);let r=T();return z(r.closeNavMenu())}),ie(),_(2,"svg",18),oe(3,"path",19),v(),w(4," Home "),v(),pe(),_(5,"a",20),X("click",function(){j(t);let r=T();return z(r.closeNavMenu())}),ie(),_(6,"svg",18),oe(7,"path",21),v(),w(8," Admin Dashboard "),v(),pe(),_(9,"a",22),X("click",function(){j(t);let r=T();return z(r.closeNavMenu())}),ie(),_(10,"svg",18),oe(11,"path",23),v(),w(12," Issue Alert "),v(),pe(),_(13,"a",24),X("click",function(){j(t);let r=T();return z(r.closeNavMenu())}),ie(),_(14,"svg",18),oe(15,"path",25),v(),w(16," SOS Notifications "),te(17,$J,2,3,"span",26),xe(18,"async"),v(),pe(),_(19,"a",27),X("click",function(){j(t);let r=T();return z(r.closeNavMenu())}),ie(),_(20,"svg",18),oe(21,"path",28),v(),w(22," Incident Map "),v(),et()}if(n&2){let t=T();C(),$("routerLinkActiveOptions",Lu(4,D3)),C(16),$("ngIf",De(18,2,t.sosCount$))}}function qJ(n,e){if(n&1&&(_(0,"span",37),w(1),v()),n&2){let t=e.ngIf;ke("hidden",t===0),C(),ae(t)}}function WJ(n,e){if(n&1){let t=ge();Xe(0),_(1,"a",17),X("click",function(){j(t);let r=T();return z(r.closeNavMenu())}),ie(),_(2,"svg",18),oe(3,"path",19),v(),w(4," Home "),v(),pe(),_(5,"a",30),X("click",function(){j(t);let r=T();return z(r.closeNavMenu())}),ie(),_(6,"svg",18),oe(7,"path",31),v(),w(8," Police Alerts "),v(),pe(),_(9,"a",32),X("click",function(){j(t);let r=T();return z(r.closeNavMenu())}),ie(),_(10,"svg",18),oe(11,"path",33),v(),w(12," Notifications "),te(13,qJ,2,3,"span",34),xe(14,"async"),v(),pe(),_(15,"a",35),X("click",function(r){j(t);let o=T();return z(o.handleNavReportClick(r))}),ie(),_(16,"svg",18),oe(17,"path",36),v(),w(18," Submit Report "),v(),et()}if(n&2){let t=T();C(),$("routerLinkActiveOptions",Lu(4,D3)),C(12),$("ngIf",De(14,2,t.unreadCount$))}}function KJ(n,e){if(n&1){let t=ge();Xe(0),_(1,"div",38),xe(2,"async"),_(3,"span",39),w(4),xe(5,"async"),v()(),_(6,"div",40),X("click",function(){j(t);let r=T();return z(r.toggleProfileMenu())}),_(7,"div",41),ie(),_(8,"svg",18),oe(9,"path",42),v()(),pe(),_(10,"div",43)(11,"a",44),X("click",function(){j(t);let r=T();return z(r.closeProfileMenu())}),ie(),_(12,"svg",45),oe(13,"path",42),v(),w(14," My Profile "),v(),pe(),_(15,"button",46),X("click",function(){j(t);let r=T();return r.logout(),z(r.closeProfileMenu())}),ie(),_(16,"svg",47),oe(17,"path",48)(18,"polyline",49)(19,"line",50),v(),w(20," Logout "),v()()(),et()}if(n&2){let t=T();C(),ke("admin-indicator",De(2,5,t.authService.isAdmin$)),C(3),ae(De(5,7,t.authService.isAdmin$)?"ADMIN":"CITIZEN"),C(6),ke("open",t.profileMenuOpen)}}function ZJ(n,e){if(n&1){let t=ge();_(0,"a",51),X("click",function(){j(t);let r=T();return z(r.closeMenu())}),ie(),_(1,"svg",52),oe(2,"path",42),v(),w(3," Login "),v()}}function YJ(n,e){if(n&1){let t=ge();_(0,"div",53),X("click",function(){j(t);let r=T();return z(r.closeAuthPrompt())}),_(1,"div",54),X("click",function(r){return j(t),z(r.stopPropagation())}),_(2,"button",55),X("click",function(){j(t);let r=T();return z(r.closeAuthPrompt())}),w(3,"\xD7"),v(),_(4,"div",56),ie(),_(5,"svg",57),oe(6,"rect",58)(7,"path",59),v()(),pe(),_(8,"h2"),w(9,"Authentication Required"),v(),_(10,"p",60),w(11," You need to create an account or sign in before you can submit a safety alert. "),v(),_(12,"p",61),w(13," Creating an account helps us verify reports and keep the community safe. "),v(),_(14,"div",62)(15,"button",63),X("click",function(){j(t);let r=T();return z(r.navigateToLogin())}),w(16," Sign In / Sign Up "),v(),_(17,"button",64),X("click",function(){j(t);let r=T();return z(r.closeAuthPrompt())}),w(18,"Cancel"),v()()()()}}var By=class n{title="Mountain Sentinel";authService=F(ln);notificationService=F(Ko);animationService=F(Sr);router=F(Et);unreadCount$;sosCount$;showAuthPrompt=!1;menuOpen=!1;profileMenuOpen=!1;navMenuOpen=!1;constructor(){this.unreadCount$=this.notificationService.getUnreadCount(),this.sosCount$=this.notificationService.getSOSCount()}ngOnInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect()}ngAfterViewInit(){document.querySelectorAll("button:not(.hamburger-btn)").forEach(t=>{this.animationService.addRippleEffect(t)})}ngOnDestroy(){this.animationService.destroyScrollObserver()}toggleMenu(){this.menuOpen=!this.menuOpen,this.profileMenuOpen=!1,this.navMenuOpen=!1}closeMenu(){this.menuOpen=!1}toggleNavMenu(){this.navMenuOpen=!this.navMenuOpen,this.menuOpen=!1,this.profileMenuOpen=!1}closeNavMenu(){this.navMenuOpen=!1}handleNavReportClick(e){this.closeNavMenu(),this.handleReportClick(e)}toggleProfileMenu(){this.profileMenuOpen=!this.profileMenuOpen}closeProfileMenu(){this.profileMenuOpen=!1}handleReportClick(e){this.authService.currentUser$.pipe(qn(1)).subscribe(t=>{t||(e.preventDefault(),this.showAuthPrompt=!0)})}closeAuthPrompt(){this.showAuthPrompt=!1}navigateToLogin(){this.showAuthPrompt=!1,this.router.navigate(["/login"])}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-root"]],decls:33,vars:24,consts:[["loginBtn",""],[1,"app-header"],[1,"header-brand-group"],["aria-label","Navigation menu",1,"nav-hamburger-btn",3,"click"],[1,"nav-hamburger-line"],[1,"logo-area"],[1,"logo-badge"],[1,"app-title"],[1,"nav-slide-menu"],[1,"nav-slide-header"],[1,"nav-close-btn",3,"click"],[4,"ngIf"],[1,"nav-menu-overlay",3,"click"],[1,"header-right"],[4,"ngIf","ngIfElse"],[1,"app-main"],[1,"modal-overlay"],["routerLink","/","routerLinkActive","active",1,"nav-slide-item",3,"click","routerLinkActiveOptions"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","currentColor"],["d","M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"],["routerLink","/admin-dashboard","routerLinkActive","active",1,"nav-slide-item","admin-item",3,"click"],["d","M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"],["routerLink","/admin-report","routerLinkActive","active",1,"nav-slide-item","admin-item",3,"click"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"],["routerLink","/notification","routerLinkActive","active",1,"nav-slide-item","admin-item","sos-item",3,"click"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],["class","nav-badge sos-badge",3,"hidden",4,"ngIf"],["routerLink","/map","routerLinkActive","active",1,"nav-slide-item","admin-item",3,"click"],["d","M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"],[1,"nav-badge","sos-badge"],["routerLink","/safety-feed","routerLinkActive","active",1,"nav-slide-item","police-alerts-item",3,"click"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],["routerLink","/notification","routerLinkActive","active",1,"nav-slide-item",3,"click"],["d","M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"],["class","nav-badge",3,"hidden",4,"ngIf"],["routerLink","/report","routerLinkActive","active",1,"nav-slide-item",3,"click"],["d","M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"],[1,"nav-badge"],[1,"user-role-indicator"],[1,"role-text"],[1,"profile-dropdown",3,"click"],[1,"profile-avatar"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"profile-menu"],["routerLink","/profile",1,"profile-menu-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],[1,"profile-menu-item","logout-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],["routerLink","/login","routerLinkActive","active",1,"login-link",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","currentColor"],[1,"modal-overlay",3,"click"],[1,"auth-prompt-modal",3,"click"],["aria-label","Close",1,"close-btn",3,"click"],[1,"modal-icon"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"modal-message"],[1,"modal-submessage"],[1,"modal-actions"],[1,"modal-btn","primary-btn",3,"click"],[1,"modal-btn","secondary-btn",3,"click"]],template:function(t,i){if(t&1){let r=ge();oe(0,"app-toast"),_(1,"header",1)(2,"div",2)(3,"button",3),X("click",function(){return j(r),z(i.toggleNavMenu())}),oe(4,"span",4)(5,"span",4)(6,"span",4),v(),_(7,"div",5)(8,"div",6),w(9,"BCPO"),v()(),_(10,"h1",7),w(11,"BAGUIO FINEST"),v()(),_(12,"div",8),xe(13,"async"),_(14,"div",9)(15,"span"),w(16),xe(17,"async"),v(),_(18,"button",10),X("click",function(){return j(r),z(i.closeNavMenu())}),w(19,"\xD7"),v()(),te(20,GJ,23,5,"ng-container",11),xe(21,"async"),te(22,WJ,19,5,"ng-container",11),xe(23,"async"),v(),_(24,"div",12),X("click",function(){return j(r),z(i.closeNavMenu())}),v(),_(25,"div",13),te(26,KJ,21,9,"ng-container",14),xe(27,"async"),te(28,ZJ,4,0,"ng-template",null,0,Ct),v()(),_(30,"main",15),oe(31,"router-outlet"),v(),Ee(32,YJ,19,0,"div",16)}if(t&2){let r=dt(29);C(3),ke("active",i.navMenuOpen),C(9),ke("open",i.navMenuOpen)("admin-menu",De(13,14,i.authService.isAdmin$)),C(4),ae(De(17,16,i.authService.isAdmin$)?"Admin Panel":"Navigation"),C(4),$("ngIf",De(21,18,i.authService.isAdmin$)),C(2),$("ngIf",!De(23,20,i.authService.isAdmin$)),C(2),ke("open",i.navMenuOpen),C(2),$("ngIf",De(27,22,i.authService.currentUser$))("ngIfElse",r),C(6),Ie(i.showAuthPrompt?32:-1)}},dependencies:[ht,Ut,Uf,Hi,Kr,sC,Vy,cn],styles:['.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;padding:12px 30px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 8px 32px #0d1a3d80;height:70px;position:relative;z-index:1000;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:2px solid #d4a84b;animation:_ngcontent-%COMP%_slideDown .6s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.header-brand-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0;flex-shrink:0}.header-brand-group[_ngcontent-%COMP%]   .nav-hamburger-btn[_ngcontent-%COMP%]{margin-right:10px}.header-brand-group[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:46px;height:46px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid rgba(255,255,255,.8);flex-shrink:0;box-shadow:0 4px 16px #d4a84b80,inset 0 1px 2px #ffffff80;transition:all .3s cubic-bezier(.4,0,.2,1);margin-right:10px}.header-brand-group[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 8px 24px #d4a84b99}.header-brand-group[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:11px;font-weight:800;color:#1a3a52;text-align:center;line-height:1}.header-brand-group[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:800;letter-spacing:1px;line-height:1.2;white-space:nowrap;background:linear-gradient(135deg,#fff,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.app-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-shrink:0}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:46px;height:46px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid rgba(255,255,255,.8);flex-shrink:0;box-shadow:0 4px 16px #d4a84b80,inset 0 1px 2px #ffffff80;transition:all .3s cubic-bezier(.4,0,.2,1)}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 8px 24px #d4a84b99}.header-left[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:11px;font-weight:800;color:#1a3a52;text-align:center;line-height:1}.header-left[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:800;letter-spacing:1px;line-height:1.2;white-space:nowrap;background:linear-gradient(135deg,#fff,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.app-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-shrink:0}.user-role-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;padding:6px 14px;background:linear-gradient(135deg,#50c878,#3ba55c);border-radius:20px;font-size:.7rem;font-weight:700;letter-spacing:.5px;color:#fff;box-shadow:0 2px 6px #50c87859;border:1px solid rgba(255,255,255,.3)}.user-role-indicator[_ngcontent-%COMP%]   .role-text[_ngcontent-%COMP%]{line-height:1}.user-role-indicator.admin-indicator[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#f0c800);color:#1a3a52;box-shadow:0 2px 8px #ffd70073;border:1px solid rgba(255,215,0,.5);animation:_ngcontent-%COMP%_adminGlow 3s ease-in-out infinite}.profile-dropdown[_ngcontent-%COMP%]{position:relative;cursor:pointer}.profile-avatar[_ngcontent-%COMP%]{width:42px;height:42px;background:linear-gradient(135deg,#fff,#e0e0e0);border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid #d4a84b;box-shadow:0 4px 12px #0003;transition:all .3s ease}.profile-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e}.profile-avatar[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 6px 16px #d4a84b66;border-color:#e5c896}.profile-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);right:0;min-width:180px;background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s cubic-bezier(.4,0,.2,1);overflow:hidden;z-index:1001}.profile-menu.open[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.profile-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:14px 18px;border:none;background:transparent;color:#333;font-size:.9rem;font-weight:500;text-decoration:none;cursor:pointer;transition:all .2s ease}.profile-menu-item[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:#1a2a5e}.profile-menu-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.profile-menu-item.logout-item[_ngcontent-%COMP%]{border-top:1px solid #eee;color:#c41e3a}.profile-menu-item.logout-item[_ngcontent-%COMP%]:hover{background:#fff5f5;color:#a01830}.header-right[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:10px 20px;background:linear-gradient(135deg,#d4a84b,#c9a227);color:#1a2a5e;font-weight:700;font-size:.9rem;border-radius:25px;text-decoration:none;box-shadow:0 4px 12px #d4a84b66;transition:all .3s ease}.header-right[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.header-right[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #d4a84b80}.user-role-indicator.admin-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a3a52}@keyframes _ngcontent-%COMP%_adminGlow{0%,to{box-shadow:0 2px 10px #ffd70080}50%{box-shadow:0 4px 18px #ffd700b3}}.nav-hamburger-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:4px;width:42px;height:42px;background:#ffffff1a;border:2px solid rgba(212,168,75,.5);border-radius:10px;cursor:pointer;padding:8px;transition:all .3s cubic-bezier(.4,0,.2,1);z-index:1002;flex-shrink:0;margin-right:8px}.nav-hamburger-btn[_ngcontent-%COMP%]:hover{background:#d4a84b33;border-color:#d4a84b;transform:scale(1.05)}.nav-hamburger-line[_ngcontent-%COMP%]{width:20px;height:2.5px;background:#d4a84b;border-radius:2px;transition:all .3s ease}.nav-hamburger-btn.active[_ngcontent-%COMP%]{background:#d4a84b4d;border-color:#d4a84b}.nav-hamburger-btn.active[_ngcontent-%COMP%]   .nav-hamburger-line[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(4px,5px)}.nav-hamburger-btn.active[_ngcontent-%COMP%]   .nav-hamburger-line[_ngcontent-%COMP%]:nth-child(2){opacity:0;transform:translate(-10px)}.nav-hamburger-btn.active[_ngcontent-%COMP%]   .nav-hamburger-line[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(4px,-5px)}.nav-slide-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:-280px;width:280px;height:100vh;background:linear-gradient(180deg,#1a2a5e,#0d1a3d);box-shadow:4px 0 30px #0000004d;z-index:1100;transition:left .35s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column;overflow-y:auto}.nav-slide-menu.open[_ngcontent-%COMP%]{left:0}.nav-slide-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 20px 16px;border-bottom:2px solid rgba(212,168,75,.3);background:#0003}.nav-slide-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d4a84b;font-size:1.1rem;font-weight:700;letter-spacing:1px;text-transform:uppercase}.nav-close-btn[_ngcontent-%COMP%]{width:36px;height:36px;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:50%;color:#fff;font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.nav-close-btn[_ngcontent-%COMP%]:hover{background:#c41e3a99;border-color:#c41e3a}.nav-slide-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:18px 24px;color:#ffffffe6;text-decoration:none;font-size:1rem;font-weight:500;border-bottom:1px solid rgba(255,255,255,.08);transition:all .25s ease;position:relative}.nav-slide-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;opacity:.8}.nav-slide-item[_ngcontent-%COMP%]:hover{background:#d4a84b26;color:#d4a84b;padding-left:30px}.nav-slide-item[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{opacity:1;color:#d4a84b}.nav-slide-item.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(212,168,75,.25) 0%,transparent 100%);color:#d4a84b;border-left:4px solid #d4a84b}.nav-badge[_ngcontent-%COMP%]{margin-left:auto;background:linear-gradient(135deg,#c41e3a,#a01830);color:#fff;font-size:.7rem;font-weight:700;padding:3px 8px;border-radius:12px;min-width:20px;text-align:center}.nav-badge.hidden[_ngcontent-%COMP%]{display:none}.nav-menu-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;z-index:1099;opacity:0;visibility:hidden;transition:all .3s ease}.nav-menu-overlay.open[_ngcontent-%COMP%]{opacity:1;visibility:visible}.nav-slide-menu.admin-menu[_ngcontent-%COMP%]{background:linear-gradient(180deg,#0d1a3d,#1a2a5e,#0d1a3d);border-right:3px solid rgba(212,168,75,.4)}.nav-slide-menu.admin-menu[_ngcontent-%COMP%]   .nav-slide-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b26,#0000004d);border-bottom:2px solid rgba(212,168,75,.5)}.nav-slide-menu.admin-menu[_ngcontent-%COMP%]   .nav-slide-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d4a84b;font-weight:800;letter-spacing:2px}.nav-slide-item.admin-item[_ngcontent-%COMP%]{border-left:3px solid transparent;transition:all .3s ease}.nav-slide-item.admin-item[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,rgba(212,168,75,.2) 0%,transparent 100%);border-left-color:#d4a84b;padding-left:28px}.nav-slide-item.admin-item.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(212,168,75,.3) 0%,transparent 100%);border-left:4px solid #d4a84b;color:#d4a84b}.nav-slide-item.sos-item[_ngcontent-%COMP%]{background:#c41e3a1a;border-left:3px solid rgba(196,30,58,.5)}.nav-slide-item.sos-item[_ngcontent-%COMP%]:hover{background:#c41e3a40;border-left-color:#c41e3a}.nav-slide-item.sos-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b6b}.nav-badge.sos-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#8b0000);animation:_ngcontent-%COMP%_sosPulse 2s infinite}@keyframes _ngcontent-%COMP%_sosPulse{0%,to{transform:scale(1);box-shadow:0 0 #c41e3a80}50%{transform:scale(1.1);box-shadow:0 0 10px 3px #c41e3a66}}.hamburger-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:center;align-items:center;gap:5px;width:44px;height:44px;background:#ffffff1a;border:2px solid rgba(255,255,255,.2);border-radius:8px;cursor:pointer;padding:10px;transition:all .3s ease;z-index:1002}.hamburger-btn[_ngcontent-%COMP%]:hover{background:#fff3}.hamburger-line[_ngcontent-%COMP%]{width:22px;height:3px;background:#fff;border-radius:2px;transition:all .3s ease}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(5px,6px)}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(2){opacity:0;transform:translate(-10px)}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(5px,-6px)}.menu-overlay[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;background:#00000080;z-index:999;opacity:0;transition:opacity .3s ease}.menu-overlay.open[_ngcontent-%COMP%]{opacity:1}.app-header[_ngcontent-%COMP%]   .header-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:12px 24px;border-radius:8px;transition:all .25s ease;font-size:14px;font-weight:600;border:none;background:transparent;cursor:pointer;display:flex;align-items:center;gap:6px;white-space:nowrap;position:relative;overflow:hidden}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:#ffffff1a;transition:left .4s cubic-bezier(.4,0,.2,1);z-index:-1}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{left:100%}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffffff26;transform:translateY(-2px)}.header-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:inset 0 -2px #ffffff80;animation:_ngcontent-%COMP%_activeLink .5s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_activeLink{0%{transform:scale(.95)}50%{transform:scale(1.05)}to{transform:scale(1)}}.header-nav[_ngcontent-%COMP%]   .report-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);font-weight:700;box-shadow:0 8px 20px #51cf6659;border:1px solid rgba(255,255,255,.2)}.header-nav[_ngcontent-%COMP%]   .report-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40c057,#2da043);transform:translateY(-3px);box-shadow:0 12px 28px #51cf6673}.header-nav[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);font-weight:700;box-shadow:0 8px 20px #1a2a5e59;border:1px solid rgba(255,255,255,.2)}.header-nav[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-3px);box-shadow:0 12px 28px #1a2a5e73}.header-nav[_ngcontent-%COMP%]   .profile-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,#d4a84b,#c9a227);color:#1a2a5e;font-weight:700;box-shadow:0 8px 20px #d4a84b59;border:1px solid rgba(255,255,255,.3)}.header-nav[_ngcontent-%COMP%]   .profile-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e5c896,#d4a84b);transform:translateY(-3px);box-shadow:0 12px 28px #d4a84b80;color:#0d1a3d}.header-nav[_ngcontent-%COMP%]   .profile-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{background:#ffffff26;font-size:14px;border:1px solid rgba(255,255,255,.2)}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff40}.header-nav[_ngcontent-%COMP%]   .notification-link[_ngcontent-%COMP%]{position:relative;padding:12px 18px}.header-nav[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background-color:#d32f2f;color:#fff;border-radius:50%;min-width:20px;height:20px;font-size:.75rem;font-weight:700;padding:0 4px;animation:_ngcontent-%COMP%_pulse 2s infinite}.header-nav[_ngcontent-%COMP%]   .unread-badge.hidden[_ngcontent-%COMP%]{display:none}.header-nav[_ngcontent-%COMP%]   .sos-emergency-link[_ngcontent-%COMP%]{background:#d32f2f33;border:2px solid rgba(211,47,47,.5);font-weight:700}.header-nav[_ngcontent-%COMP%]   .sos-emergency-link[_ngcontent-%COMP%]:hover{background:#d32f2f59;transform:translateY(-1px)}.header-nav[_ngcontent-%COMP%]   .sos-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background-color:#d32f2f;color:#fff;border-radius:50%;min-width:22px;height:22px;font-size:.8rem;font-weight:700;padding:0 5px;animation:_ngcontent-%COMP%_urgentPulse 1s infinite;box-shadow:0 0 12px #d32f2fcc}.header-nav[_ngcontent-%COMP%]   .sos-badge.hidden[_ngcontent-%COMP%]{display:none}@keyframes _ngcontent-%COMP%_urgentPulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.8}}.header-nav[_ngcontent-%COMP%]   .admin-link[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   .admin-report-link[_ngcontent-%COMP%]{background:#ffd70026;border:2px solid rgba(255,215,0,.35)}.header-nav[_ngcontent-%COMP%]   .admin-link[_ngcontent-%COMP%]:hover, .header-nav[_ngcontent-%COMP%]   .admin-report-link[_ngcontent-%COMP%]:hover{background:#ffd7004d;transform:translateY(-1px)}.app-main[_ngcontent-%COMP%]{padding:0;min-height:calc(100vh - 70px)}.global-sos[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:120px;width:220px;z-index:1200}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}@media (max-width: 1200px){.app-header[_ngcontent-%COMP%]{padding:12px 40px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 18px;font-size:13px}}@media (max-width: 992px){.app-header[_ngcontent-%COMP%]{padding:10px 25px}.hamburger-btn[_ngcontent-%COMP%]{display:flex}.menu-overlay[_ngcontent-%COMP%], .menu-overlay.open[_ngcontent-%COMP%]{display:block}.header-nav[_ngcontent-%COMP%]{position:fixed;top:0;right:-320px;width:300px;height:100vh;background:linear-gradient(180deg,#1a2a5e,#0d1a3d);flex-direction:column;align-items:stretch;padding:90px 20px 30px;gap:8px;transition:right .3s ease;z-index:1001;box-shadow:-5px 0 30px #0000004d;overflow-y:auto}.header-nav.open[_ngcontent-%COMP%]{right:0}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:15px 20px;font-size:15px;border-radius:10px;justify-content:flex-start;width:100%}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{margin-top:auto;background:#dc354533;border:1px solid rgba(220,53,69,.4)}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#dc35454d}}@media (max-width: 600px){.app-header[_ngcontent-%COMP%]{padding:10px 15px;height:auto;min-height:65px}.header-left[_ngcontent-%COMP%]   .brand-section[_ngcontent-%COMP%]{gap:3px}.user-role-indicator[_ngcontent-%COMP%]{padding:3px 8px 3px 5px;font-size:.6rem;gap:4px}.user-role-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{width:16px;height:16px}.user-role-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:9px;height:9px}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:42px;height:42px}.logo-area[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:11px}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}.hamburger-btn[_ngcontent-%COMP%]{width:40px;height:40px}.hamburger-line[_ngcontent-%COMP%]{width:20px}.header-nav[_ngcontent-%COMP%]{width:280px;right:-290px;padding:80px 15px 25px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 16px;font-size:14px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#0009;display:flex;align-items:center;justify-content:center;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.auth-prompt-modal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);border:3px solid #ffc107;border-radius:16px;padding:40px;max-width:500px;width:90%;box-shadow:0 10px 40px #0000004d;position:relative;text-align:center;animation:_ngcontent-%COMP%_slideIn .3s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-30px);opacity:0}to{transform:translateY(0);opacity:1}}.auth-prompt-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:transparent;border:none;font-size:32px;color:#856404;cursor:pointer;line-height:1;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;transition:all .2s}.auth-prompt-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#d32f2f;transform:scale(1.1)}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:20px}.auth-prompt-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#856404;margin:0 0 15px;font-weight:700}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-message[_ngcontent-%COMP%]{font-size:1.1rem;color:#856404;margin:0 0 10px;font-weight:600;line-height:1.5}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-submessage[_ngcontent-%COMP%]{font-size:.95rem;color:#856404;margin:0 0 30px;opacity:.9;line-height:1.6}.modal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.modal-btn[_ngcontent-%COMP%]{padding:14px 30px;font-size:1rem;font-weight:700;border-radius:8px;border:none;cursor:pointer;transition:all .2s;width:100%}.modal-btn.primary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c5282,#1e3a5f);color:#fff;box-shadow:0 4px 12px #2c52824d}.modal-btn.primary-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #2c528266}.modal-btn.secondary-btn[_ngcontent-%COMP%]{background:#fff;color:#856404;border:2px solid #ffc107}.modal-btn.secondary-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;transform:translateY(-1px)}@media (max-width: 600px){.auth-prompt-modal[_ngcontent-%COMP%]{padding:30px 20px;max-width:95%}.auth-prompt-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-message[_ngcontent-%COMP%]{font-size:1rem}}']})};Aw(By,O3).catch(n=>console.error(n));
