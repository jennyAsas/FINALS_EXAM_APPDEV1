var P5=Object.create;var eb=Object.defineProperty,S5=Object.defineProperties,T5=Object.getOwnPropertyDescriptor,O5=Object.getOwnPropertyDescriptors,D5=Object.getOwnPropertyNames,tS=Object.getOwnPropertySymbols,iS=Object.getPrototypeOf,rS=Object.prototype.hasOwnProperty,A5=Object.prototype.propertyIsEnumerable,k5=Reflect.get;var nS=(n,e,t)=>e in n?eb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,X=(n,e)=>{for(var t in e||={})rS.call(e,t)&&nS(n,t,e[t]);if(tS)for(var t of tS(e))A5.call(e,t)&&nS(n,t,e[t]);return n},ye=(n,e)=>S5(n,O5(e));var R5=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var N5=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of D5(e))!rS.call(n,r)&&r!==t&&eb(n,r,{get:()=>e[r],enumerable:!(i=T5(e,r))||i.enumerable});return n};var oS=(n,e,t)=>(t=n!=null?P5(iS(n)):{},N5(e||!n||!n.__esModule?eb(t,"default",{value:n,enumerable:!0}):t,n));var ua=(n,e,t)=>k5(iS(n),t,e);var S=(n,e,t)=>new Promise((i,r)=>{var o=u=>{try{l(t.next(u))}catch(f){r(f)}},a=u=>{try{l(t.throw(u))}catch(f){r(f)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(o,a);l((t=t.apply(n,e)).next())});var bP=R5((Ey,y3)=>{"use strict";(function(n,e){typeof Ey=="object"&&typeof y3<"u"?e(Ey):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(Ey,function(n){"use strict";var e="1.9.4";function t(s){var c,h,p,y;for(h=1,p=arguments.length;h<p;h++){y=arguments[h];for(c in y)s[c]=y[c]}return s}var i=Object.create||(function(){function s(){}return function(c){return s.prototype=c,new s}})();function r(s,c){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function l(s,c,h){var p,y,M,A;return A=function(){p=!1,y&&(M.apply(h,y),y=!1)},M=function(){p?y=arguments:(s.apply(h,arguments),setTimeout(A,c),p=!0)},M}function u(s,c,h){var p=c[1],y=c[0],M=p-y;return s===p&&h?s:((s-y)%M+M)%M+y}function f(){return!1}function g(s,c){if(c===!1)return s;var h=Math.pow(10,c===void 0?6:c);return Math.round(s*h)/h}function b(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return b(s).split(/\s+/)}function I(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in c)s.options[h]=c[h];return s.options}function R(s,c,h){var p=[];for(var y in s)p.push(encodeURIComponent(h?y.toUpperCase():y)+"="+encodeURIComponent(s[y]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var W=/\{ *([\w_ -]+) *\}/g;function q(s,c){return s.replace(W,function(h,p){var y=c[p];if(y===void 0)throw new Error("No value provided for variable "+h);return typeof y=="function"&&(y=y(c)),y})}var ie=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function ge(s,c){for(var h=0;h<s.length;h++)if(s[h]===c)return h;return-1}var we="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Re(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var jt=0;function ct(s){var c=+new Date,h=Math.max(0,16-(c-jt));return jt=c+h,window.setTimeout(s,h)}var V=window.requestAnimationFrame||Re("RequestAnimationFrame")||ct,O=window.cancelAnimationFrame||Re("CancelAnimationFrame")||Re("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,c,h){if(h&&V===ct)s.call(c);else return V.call(window,r(s,c))}function N(s){s&&O.call(window,s)}var B={__proto__:null,extend:t,create:i,bind:r,get lastId(){return o},stamp:a,throttle:l,wrapNum:u,falseFn:f,formatNum:g,trim:b,splitWords:E,setOptions:I,getParamString:R,template:q,isArray:ie,indexOf:ge,emptyImageUrl:we,requestFn:V,cancelFn:O,requestAnimFrame:D,cancelAnimFrame:N};function $(){}$.extend=function(s){var c=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=i(h);p.constructor=c,c.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(c[y]=this[y]);return s.statics&&t(c,s.statics),s.includes&&(k(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?i(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,A=p._initHooks.length;M<A;M++)p._initHooks[M].call(this)}},c},$.include=function(s){var c=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},$.mergeOptions=function(s){return t(this.prototype.options,s),this},$.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function k(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=ie(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var nn={on:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c);else{s=E(s);for(var y=0,M=s.length;y<M;y++)this._on(s[y],c,h)}return this},off:function(s,c,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],c);else{s=E(s);for(var y=arguments.length===1,M=0,A=s.length;M<A;M++)y?this._off(s[M]):this._off(s[M],c,h)}return this},_on:function(s,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,h)===!1){h===this&&(h=void 0);var y={fn:c,ctx:h};p&&(y.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(y)}},_off:function(s,c,h){var p,y,M;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,M=p.length;y<M;y++)p[y].fn=f;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var A=this._listens(s,c,h);if(A!==!1){var G=p[A];this._firingCount&&(G.fn=f,this._events[s]=p=p.slice()),p.splice(A,1)}}},fire:function(s,c,h){if(!this.listens(s,h))return this;var p=t({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var y=this._events[s];if(y){this._firingCount=this._firingCount+1||1;for(var M=0,A=y.length;M<A;M++){var G=y[M],Z=G.fn;G.once&&this.off(s,Z,G.ctx),Z.call(G.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,c,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var y=c;typeof c!="function"&&(p=!!c,y=void 0,h=void 0);var M=this._events&&this._events[s];if(M&&M.length&&this._listens(s,y,h)!==!1)return!0;if(p){for(var A in this._eventParents)if(this._eventParents[A].listens(s,c,h,p))return!0}return!1},_listens:function(s,c,h){if(!this._events)return!1;var p=this._events[s]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var y=0,M=p.length;y<M;y++)if(p[y].fn===c&&p[y].ctx===h)return y;return!1},once:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c,!0);else{s=E(s);for(var y=0,M=s.length;y<M;y++)this._on(s[y],c,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};nn.addEventListener=nn.on,nn.removeEventListener=nn.clearAllEventListeners=nn.off,nn.addOneTimeEventListener=nn.once,nn.fireEvent=nn.fire,nn.hasEventListeners=nn.listens;var Ar=$.extend(nn);function Ge(s,c,h){this.x=h?Math.round(s):s,this.y=h?Math.round(c):c}var Ys=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Ge.prototype={clone:function(){return new Ge(this.x,this.y)},add:function(s){return this.clone()._add(Ne(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Ne(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Ge(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Ge(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ys(this.x),this.y=Ys(this.y),this},distanceTo:function(s){s=Ne(s);var c=s.x-this.x,h=s.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(s){return s=Ne(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Ne(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function Ne(s,c,h){return s instanceof Ge?s:ie(s)?new Ge(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Ge(s.x,s.y):new Ge(s,c,h)}function Vt(s,c){if(s)for(var h=c?[s,c]:s,p=0,y=h.length;p<y;p++)this.extend(h[p])}Vt.prototype={extend:function(s){var c,h;if(!s)return this;if(s instanceof Ge||typeof s[0]=="number"||"x"in s)c=h=Ne(s);else if(s=ti(s),c=s.min,h=s.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return Ne((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Ne(this.min.x,this.max.y)},getTopRight:function(){return Ne(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,h;return typeof s[0]=="number"||s instanceof Ge?s=Ne(s):s=ti(s),s instanceof Vt?(c=s.min,h=s.max):c=h=s,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=ti(s);var c=this.min,h=this.max,p=s.min,y=s.max,M=y.x>=c.x&&p.x<=h.x,A=y.y>=c.y&&p.y<=h.y;return M&&A},overlaps:function(s){s=ti(s);var c=this.min,h=this.max,p=s.min,y=s.max,M=y.x>c.x&&p.x<h.x,A=y.y>c.y&&p.y<h.y;return M&&A},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*s,y=Math.abs(c.y-h.y)*s;return ti(Ne(c.x-p,c.y-y),Ne(h.x+p,h.y+y))},equals:function(s){return s?(s=ti(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function ti(s,c){return!s||s instanceof Vt?s:new Vt(s,c)}function li(s,c){if(s)for(var h=c?[s,c]:s,p=0,y=h.length;p<y;p++)this.extend(h[p])}li.prototype={extend:function(s){var c=this._southWest,h=this._northEast,p,y;if(s instanceof ze)p=s,y=s;else if(s instanceof li){if(p=s._southWest,y=s._northEast,!p||!y)return this}else return s?this.extend(lt(s)||kt(s)):this;return!c&&!h?(this._southWest=new ze(p.lat,p.lng),this._northEast=new ze(y.lat,y.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(y.lat,h.lat),h.lng=Math.max(y.lng,h.lng)),this},pad:function(s){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*s,y=Math.abs(c.lng-h.lng)*s;return new li(new ze(c.lat-p,c.lng-y),new ze(h.lat+p,h.lng+y))},getCenter:function(){return new ze((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ze(this.getNorth(),this.getWest())},getSouthEast:function(){return new ze(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ze||"lat"in s?s=lt(s):s=kt(s);var c=this._southWest,h=this._northEast,p,y;return s instanceof li?(p=s.getSouthWest(),y=s.getNorthEast()):p=y=s,p.lat>=c.lat&&y.lat<=h.lat&&p.lng>=c.lng&&y.lng<=h.lng},intersects:function(s){s=kt(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),M=y.lat>=c.lat&&p.lat<=h.lat,A=y.lng>=c.lng&&p.lng<=h.lng;return M&&A},overlaps:function(s){s=kt(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),M=y.lat>c.lat&&p.lat<h.lat,A=y.lng>c.lng&&p.lng<h.lng;return M&&A},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=kt(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function kt(s,c){return s instanceof li?s:new li(s,c)}function ze(s,c,h){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,h!==void 0&&(this.alt=+h)}ze.prototype={equals:function(s,c){if(!s)return!1;s=lt(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+g(this.lat,s)+", "+g(this.lng,s)+")"},distanceTo:function(s){return lo.distance(this,lt(s))},wrap:function(){return lo.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return kt([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new ze(this.lat,this.lng,this.alt)}};function lt(s,c,h){return s instanceof ze?s:ie(s)&&typeof s[0]!="object"?s.length===3?new ze(s[0],s[1],s[2]):s.length===2?new ze(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ze(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new ze(s,c,h)}var xi={latLngToPoint:function(s,c){var h=this.projection.project(s),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(s,c){var h=this.scale(c),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(c.min,h),y=this.transformation.transform(c.max,h);return new Vt(p,y)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ze(h,c,p)},wrapLatLngBounds:function(s){var c=s.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,y=c.lng-h.lng;if(p===0&&y===0)return s;var M=s.getSouthWest(),A=s.getNorthEast(),G=new ze(M.lat-p,M.lng-y),Z=new ze(A.lat-p,A.lng-y);return new li(G,Z)}},lo=t({},xi,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var h=Math.PI/180,p=s.lat*h,y=c.lat*h,M=Math.sin((c.lat-s.lat)*h/2),A=Math.sin((c.lng-s.lng)*h/2),G=M*M+Math.cos(p)*Math.cos(y)*A*A,Z=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*Z}}),Qs=6378137,qd={R:Qs,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),y=Math.sin(p*c);return new Ge(this.R*s.lng*c,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(s){var c=180/Math.PI;return new ze((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:(function(){var s=Qs*Math.PI;return new Vt([-s,-s],[s,s])})()};function Wd(s,c,h,p){if(ie(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=h,this._d=p}Wd.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new Ge((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function uo(s,c,h,p){return new Wd(s,c,h,p)}var Js=t({},lo,{code:"EPSG:3857",projection:qd,transformation:(function(){var s=.5/(Math.PI*qd.R);return uo(s,.5,-s,.5)})()}),Kd=t({},Js,{code:"EPSG:900913"});function Al(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function kl(s,c){var h="",p,y,M,A,G,Z;for(p=0,M=s.length;p<M;p++){for(G=s[p],y=0,A=G.length;y<A;y++)Z=G[y],h+=(y?"L":"M")+Z.x+" "+Z.y;h+=c?Ce.svg?"z":"x":""}return h||"M0 0"}var cc=document.documentElement.style,lc="ActiveXObject"in window,Zp=lc&&!document.addEventListener,Yp="msLaunchUri"in navigator&&!("documentMode"in document),Rl=Zi("webkit"),Zd=Zi("android"),Nl=Zi("android 2")||Zi("android 3"),Qp=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Gy=Zd&&Zi("Google")&&Qp<537&&!("AudioNode"in window),uc=!!window.opera,Ll=!Yp&&Zi("chrome"),Fl=Zi("gecko")&&!Rl&&!uc&&!lc,Gn=!Ll&&Zi("safari"),qn=Zi("phantom"),dc="OTransition"in cc,Jp=navigator.platform.indexOf("Win")===0,Yd=lc&&"transition"in cc,Qd="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Nl,Xs="MozPerspective"in cc,Xp=!window.L_DISABLE_3D&&(Yd||Qd||Xs)&&!dc&&!qn,ea=typeof orientation<"u"||Zi("mobile"),Jd=ea&&Rl,qy=ea&&Qd,eg=!window.PointerEvent&&window.MSPointerEvent,Vl=!!(window.PointerEvent||eg),Xd="ontouchstart"in window||!!window.TouchEvent,tg=!window.L_NO_TOUCH&&(Xd||Vl),hc=ea&&uc,eh=ea&&Fl,th=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,is=(function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return s})(),ng=(function(){return!!document.createElement("canvas").getContext})(),ta=!!(document.createElementNS&&Al("svg").createSVGRect),ig=!!ta&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),fc=!ta&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),rg=navigator.platform.indexOf("Mac")===0,ni=navigator.platform.indexOf("Linux")===0;function Zi(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Ce={ie:lc,ielt9:Zp,edge:Yp,webkit:Rl,android:Zd,android23:Nl,androidStock:Gy,opera:uc,chrome:Ll,gecko:Fl,safari:Gn,phantom:qn,opera12:dc,win:Jp,ie3d:Yd,webkit3d:Qd,gecko3d:Xs,any3d:Xp,mobile:ea,mobileWebkit:Jd,mobileWebkit3d:qy,msPointer:eg,pointer:Vl,touch:tg,touchNative:Xd,mobileOpera:hc,mobileGecko:eh,retina:th,passiveEvents:is,canvas:ng,svg:ta,vml:fc,inlineSvg:ig,mac:rg,linux:ni},na=Ce.msPointer?"MSPointerDown":"pointerdown",og=Ce.msPointer?"MSPointerMove":"pointermove",sg=Ce.msPointer?"MSPointerUp":"pointerup",rs=Ce.msPointer?"MSPointerCancel":"pointercancel",nh={touchstart:na,touchmove:og,touchend:sg,touchcancel:rs},ag={touchstart:lg,touchmove:ia,touchend:ia,touchcancel:ia},kr={},ih=!1;function rh(s,c,h){return c==="touchstart"&&sh(),ag[c]?(h=ag[c].bind(this,h),s.addEventListener(nh[c],h,!1),h):(console.warn("wrong event specified:",c),f)}function Bl(s,c,h){if(!nh[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(nh[c],h,!1)}function ho(s){kr[s.pointerId]=s}function cg(s){kr[s.pointerId]&&(kr[s.pointerId]=s)}function oh(s){delete kr[s.pointerId]}function sh(){ih||(document.addEventListener(na,ho,!0),document.addEventListener(og,cg,!0),document.addEventListener(sg,oh,!0),document.addEventListener(rs,oh,!0),ih=!0)}function ia(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in kr)c.touches.push(kr[h]);c.changedTouches=[c],s(c)}}function lg(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&on(c),ia(s,c)}function ug(s){var c={},h,p;for(p in s)h=s[p],c[p]=h&&h.bind?h.bind(s):h;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Wy=200;function Ul(s,c){s.addEventListener("dblclick",c);var h=0,p;function y(M){if(M.detail!==1){p=M.detail;return}if(!(M.pointerType==="mouse"||M.sourceCapabilities&&!M.sourceCapabilities.firesTouchEvents)){var A=gh(M);if(!(A.some(function(Z){return Z instanceof HTMLLabelElement&&Z.attributes.for})&&!A.some(function(Z){return Z instanceof HTMLInputElement||Z instanceof HTMLSelectElement}))){var G=Date.now();G-h<=Wy?(p++,p===2&&c(ug(M))):p=1,h=G}}}return s.addEventListener("click",y),{dblclick:c,simDblclick:y}}function dg(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var pc=hr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Rr=hr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),fo=Rr==="webkitTransition"||Rr==="OTransition"?Rr+"End":"transitionend";function zl(s){return typeof s=="string"?document.getElementById(s):s}function gc(s,c){var h=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[c]:null}return h==="auto"?null:h}function pt(s,c,h){var p=document.createElement(s);return p.className=c||"",h&&h.appendChild(p),p}function Ht(s){var c=s.parentNode;c&&c.removeChild(s)}function mc(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function po(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function go(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function jl(s,c){if(s.classList!==void 0)return s.classList.contains(c);var h=_c(s);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function Ke(s,c){if(s.classList!==void 0)for(var h=E(c),p=0,y=h.length;p<y;p++)s.classList.add(h[p]);else if(!jl(s,c)){var M=_c(s);ah(s,(M?M+" ":"")+c)}}function rn(s,c){s.classList!==void 0?s.classList.remove(c):ah(s,b((" "+_c(s)+" ").replace(" "+c+" "," ")))}function ah(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function _c(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function wi(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&Ky(s,c)}function Ky(s,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):s.style.filter+=" progid:"+p+"(opacity="+c+")"}function hr(s){for(var c=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in c)return s[h];return!1}function ii(s,c,h){var p=c||new Ge(0,0);s.style[pc]=(Ce.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function Kt(s,c){s._leaflet_pos=c,Ce.any3d?ii(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function fr(s){return s._leaflet_pos||new Ge(0,0)}var ra,St,oa;if("onselectstart"in document)ra=function(){je(window,"selectstart",on)},St=function(){Rt(window,"selectstart",on)};else{var Nr=hr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ra=function(){if(Nr){var s=document.documentElement.style;oa=s[Nr],s[Nr]="none"}},St=function(){Nr&&(document.documentElement.style[Nr]=oa,oa=void 0)}}function os(){je(window,"dragstart",on)}function ch(){Rt(window,"dragstart",on)}var vc,lh;function uh(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Hl(),vc=s,lh=s.style.outlineStyle,s.style.outlineStyle="none",je(window,"keydown",Hl))}function Hl(){vc&&(vc.style.outlineStyle=lh,vc=void 0,lh=void 0,Rt(window,"keydown",Hl))}function hg(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function ss(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var mo={__proto__:null,TRANSFORM:pc,TRANSITION:Rr,TRANSITION_END:fo,get:zl,getStyle:gc,create:pt,remove:Ht,empty:mc,toFront:po,toBack:go,hasClass:jl,addClass:Ke,removeClass:rn,setClass:ah,getClass:_c,setOpacity:wi,testProp:hr,setTransform:ii,setPosition:Kt,getPosition:fr,get disableTextSelection(){return ra},get enableTextSelection(){return St},disableImageDrag:os,enableImageDrag:ch,preventOutline:uh,restoreOutline:Hl,getSizedParentNode:hg,getScale:ss};function je(s,c,h,p){if(c&&typeof c=="object")for(var y in c)hh(s,y,c[y],h);else{c=E(c);for(var M=0,A=c.length;M<A;M++)hh(s,c[M],h,p)}return this}var Yi="_leaflet_events";function Rt(s,c,h,p){if(arguments.length===1)as(s),delete s[Yi];else if(c&&typeof c=="object")for(var y in c)fh(s,y,c[y],h);else if(c=E(c),arguments.length===2)as(s,function(G){return ge(c,G)!==-1});else for(var M=0,A=c.length;M<A;M++)fh(s,c[M],h,p);return this}function as(s,c){for(var h in s[Yi]){var p=h.split(/\d/)[0];(!c||c(p))&&fh(s,p,null,null,h)}}var dh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hh(s,c,h,p){var y=c+a(h)+(p?"_"+a(p):"");if(s[Yi]&&s[Yi][y])return this;var M=function(G){return h.call(p||s,G||window.event)},A=M;!Ce.touchNative&&Ce.pointer&&c.indexOf("touch")===0?M=rh(s,c,M):Ce.touch&&c==="dblclick"?M=Ul(s,M):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(dh[c]||c,M,Ce.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(M=function(G){G=G||window.event,xc(s,G)&&A(G)},s.addEventListener(dh[c],M,!1)):s.addEventListener(c,A,!1):s.attachEvent("on"+c,M),s[Yi]=s[Yi]||{},s[Yi][y]=M}function fh(s,c,h,p,y){y=y||c+a(h)+(p?"_"+a(p):"");var M=s[Yi]&&s[Yi][y];if(!M)return this;!Ce.touchNative&&Ce.pointer&&c.indexOf("touch")===0?Bl(s,c,M):Ce.touch&&c==="dblclick"?dg(s,M):"removeEventListener"in s?s.removeEventListener(dh[c]||c,M,!1):s.detachEvent("on"+c,M),s[Yi][y]=null}function ui(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function ph(s){return hh(s,"wheel",ui),this}function yc(s){return je(s,"mousedown touchstart dblclick contextmenu",ui),s._leaflet_disable_click=!0,this}function on(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function pr(s){return on(s),ui(s),this}function gh(s){if(s.composedPath)return s.composedPath();for(var c=[],h=s.target;h;)c.push(h),h=h.parentNode;return c}function sa(s,c){if(!c)return new Ge(s.clientX,s.clientY);var h=ss(c),p=h.boundingClientRect;return new Ge((s.clientX-p.left)/h.x-c.clientLeft,(s.clientY-p.top)/h.y-c.clientTop)}var bc=Ce.linux&&Ce.chrome?window.devicePixelRatio:Ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function mh(s){return Ce.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/bc:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function xc(s,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var Yt={__proto__:null,on:je,off:Rt,stopPropagation:ui,disableScrollPropagation:ph,disableClickPropagation:yc,preventDefault:on,stop:pr,getPropagationPath:gh,getMousePosition:sa,getWheelDelta:mh,isExternalTarget:xc,addListener:je,removeListener:Rt},fg=Ar.extend({run:function(s,c,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=fr(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var h=this._startPos.add(this._offset.multiplyBy(s));c&&h._round(),Kt(this._el,h),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),ut=Ar.extend({options:{crs:Js,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=I(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(lt(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Rr&&Ce.any3d&&!Ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),je(this._proxy,fo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(lt(s),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,h){var p=this.getZoomScale(c),y=this.getSize().divideBy(2),M=s instanceof Ge?s:this.latLngToContainerPoint(s),A=M.subtract(y).multiplyBy(1-1/p),G=this.containerPointToLatLng(y.add(A));return this.setView(G,c,{zoom:h})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():kt(s);var h=Ne(c.paddingTopLeft||c.padding||[0,0]),p=Ne(c.paddingBottomRight||c.padding||[0,0]),y=this.getBoundsZoom(s,!1,h.add(p));if(y=typeof c.maxZoom=="number"?Math.min(c.maxZoom,y):y,y===1/0)return{center:s.getCenter(),zoom:y};var M=p.subtract(h).divideBy(2),A=this.project(s.getSouthWest(),y),G=this.project(s.getNorthEast(),y),Z=this.unproject(A.add(G).divideBy(2).add(M),y);return{center:Z,zoom:y}},fitBounds:function(s,c){if(s=kt(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=Ne(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new fg,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ke(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,h){if(h=h||{},h.animate===!1||!Ce.any3d)return this.setView(s,c,h);this._stop();var p=this.project(this.getCenter()),y=this.project(s),M=this.getSize(),A=this._zoom;s=lt(s),c=c===void 0?A:c;var G=Math.max(M.x,M.y),Z=G*this.getZoomScale(A,c),oe=y.distanceTo(p)||1,me=1.42,Ve=me*me;function it(Cn){var Dg=Cn?-1:1,C5=Cn?Z:G,E5=Z*Z-G*G+Dg*Ve*Ve*oe*oe,I5=2*C5*Ve*oe,Xy=E5/I5,eS=Math.sqrt(Xy*Xy+1)-Xy,M5=eS<1e-9?-18:Math.log(eS);return M5}function Ei(Cn){return(Math.exp(Cn)-Math.exp(-Cn))/2}function Kn(Cn){return(Math.exp(Cn)+Math.exp(-Cn))/2}function gr(Cn){return Ei(Cn)/Kn(Cn)}var Fi=it(0);function tu(Cn){return G*(Kn(Fi)/Kn(Fi+me*Cn))}function y5(Cn){return G*(Kn(Fi)*gr(Fi+me*Cn)-Ei(Fi))/Ve}function b5(Cn){return 1-Math.pow(1-Cn,1.5)}var x5=Date.now(),JP=(it(1)-Fi)/me,w5=h.duration?1e3*h.duration:1e3*JP*.8;function XP(){var Cn=(Date.now()-x5)/w5,Dg=b5(Cn)*JP;Cn<=1?(this._flyToFrame=D(XP,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(y5(Dg)/oe)),A),this.getScaleZoom(G/tu(Dg),A),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),XP.call(this),this},flyToBounds:function(s,c){var h=this._getBoundsCenterZoom(s,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(s){return s=kt(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,kt(s));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var h=Ne(c.paddingTopLeft||c.padding||[0,0]),p=Ne(c.paddingBottomRight||c.padding||[0,0]),y=this.project(this.getCenter()),M=this.project(s),A=this.getPixelBounds(),G=ti([A.min.add(h),A.max.subtract(p)]),Z=G.getSize();if(!G.contains(M)){this._enforcingBounds=!0;var oe=M.subtract(G.getCenter()),me=G.extend(M).getSize().subtract(Z);y.x+=oe.x<0?-me.x:me.x,y.y+=oe.y<0?-me.y:me.y,this.panTo(this.unproject(y),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),y=h.divideBy(2).round(),M=p.subtract(y);return!M.x&&!M.y?this:(s.animate&&s.pan?this.panBy(M):(s.pan&&this._rawPanBy(M),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,s):navigator.geolocation.getCurrentPosition(c,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,h=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,h=s.coords.longitude,p=new ze(c,h),y=p.toBounds(s.coords.accuracy*2),M=this._locateOptions;if(M.setView){var A=this.getBoundsZoom(y);this.setView(p,M.maxZoom?Math.min(A,M.maxZoom):A)}var G={latlng:p,bounds:y,timestamp:s.timestamp};for(var Z in s.coords)typeof s.coords[Z]=="number"&&(G[Z]=s.coords[Z]);this.fire("locationfound",G)}},addHandler:function(s,c){if(!c)return this;var h=this[s]=new c(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ht(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ht(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=pt("div",h,c||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new li(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,h){s=kt(s),h=Ne(h||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),M=this.getMaxZoom(),A=s.getNorthWest(),G=s.getSouthEast(),Z=this.getSize().subtract(h),oe=ti(this.project(G,p),this.project(A,p)).getSize(),me=Ce.any3d?this.options.zoomSnap:1,Ve=Z.x/oe.x,it=Z.y/oe.y,Ei=c?Math.max(Ve,it):Math.min(Ve,it);return p=this.getScaleZoom(Ei,p),me&&(p=Math.round(p/(me/100))*(me/100),p=c?Math.ceil(p/me)*me:Math.floor(p/me)*me),Math.max(y,Math.min(M,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ge(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var h=this._getTopLeftPoint(s,c);return new Vt(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(s)/h.scale(c)},getScaleZoom:function(s,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(s*h.scale(c));return isNaN(p)?1/0:p},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(lt(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Ne(s),c)},layerPointToLatLng:function(s){var c=Ne(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(lt(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(lt(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(kt(s))},distance:function(s,c){return this.options.crs.distance(lt(s),lt(c))},containerPointToLayerPoint:function(s){return Ne(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Ne(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(Ne(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(lt(s)))},mouseEventToContainerPoint:function(s){return sa(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=zl(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");je(c,"scroll",this._onScroll,this),this._containerId=a(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ce.any3d,Ke(s,"leaflet-container"+(Ce.touch?" leaflet-touch":"")+(Ce.retina?" leaflet-retina":"")+(Ce.ielt9?" leaflet-oldie":"")+(Ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=gc(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Kt(this._mapPane,new Ge(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ke(s.markerPane,"leaflet-zoom-hide"),Ke(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,h){Kt(this._mapPane,new Ge(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var y=this._zoom!==c;this._moveStart(y,h)._move(s,c)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,h,p){c===void 0&&(c=this._zoom);var y=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((y||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Kt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var c=s?Rt:je;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ce.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var h=[],p,y=c==="mouseout"||c==="mouseover",M=s.target||s.srcElement,A=!1;M;){if(p=this._targets[a(M)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){A=!0;break}if(p&&p.listens(c,!0)&&(y&&!xc(M,s)||(h.push(p),y))||M===this._container)break;M=M.parentNode}return!h.length&&!A&&!y&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var h=s.type;h==="mousedown"&&uh(c),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var y=this._findEventTargets(s,c);if(h){for(var M=[],A=0;A<h.length;A++)h[A].listens(c,!0)&&M.push(h[A]);y=M.concat(y)}if(y.length){c==="contextmenu"&&on(s);var G=y[0],Z={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var oe=G.getLatLng&&(!G._radius||G._radius<=10);Z.containerPoint=oe?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(s),Z.layerPoint=this.containerPointToLayerPoint(Z.containerPoint),Z.latlng=oe?G.getLatLng():this.layerPointToLatLng(Z.layerPoint)}for(A=0;A<y.length;A++)if(y[A].fire(c,Z,!0),Z.originalEvent._stopped||y[A].options.bubblingMouseEvents===!1&&ge(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return fr(this._mapPane)||new Ge(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var h=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var h=this.getSize()._divideBy(2);return this.project(s,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(s,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return ti([this.project(s.getSouthWest(),c)._subtract(p),this.project(s.getNorthWest(),c)._subtract(p),this.project(s.getSouthEast(),c)._subtract(p),this.project(s.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,h){if(!h)return s;var p=this.project(s,c),y=this.getSize().divideBy(2),M=new Vt(p.subtract(y),p.add(y)),A=this._getBoundsOffset(M,h,c);return Math.abs(A.x)<=1&&Math.abs(A.y)<=1?s:this.unproject(p.add(A),c)},_limitOffset:function(s,c){if(!c)return s;var h=this.getPixelBounds(),p=new Vt(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(s,c,h){var p=ti(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),y=p.min.subtract(s.min),M=p.max.subtract(s.max),A=this._rebound(y.x,-M.x),G=this._rebound(y.y,-M.y);return new Ge(A,G)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),h=this.getMaxZoom(),p=Ce.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(c,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){rn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var h=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var s=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var h=pc,p=this._proxy.style[h];ii(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ht(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();ii(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),y=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(y)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Ke(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&rn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function pg(s,c){return new ut(s,c)}var Li=$.extend({options:{position:"topright"},initialize:function(s){I(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Ke(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ht(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),aa=function(s){return new Li(s)};ut.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",h=this._controlContainer=pt("div",c+"control-container",this._container);function p(y,M){var A=c+y+" "+c+M;s[y+M]=pt("div",A,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ht(this._controlCorners[s]);Ht(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wc=Li.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,c,h){I(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Li.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(a(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ke(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Ke(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):rn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return rn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=pt("div",s),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),yc(c),ph(c);var p=this._section=pt("section",s+"-list");h&&(this._map.on("click",this.collapse,this),je(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=pt("a",s+"-toggle",c);y.href="#",y.title="Layers",y.setAttribute("role","button"),je(y,{keydown:function(M){M.keyCode===13&&this._expandSafely()},click:function(M){on(M),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=pt("div",s+"-base",p),this._separator=pt("div",s+"-separator",p),this._overlaysList=pt("div",s+"-overlays",p),c.appendChild(p)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&a(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mc(this._baseLayersList),mc(this._overlaysList),this._layerControlInputs=[];var s,c,h,p,y=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,s=s||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&y>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(a(s.target)),h=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(s,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var c=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),je(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+s.name;var M=document.createElement("span");c.appendChild(M),M.appendChild(p),M.appendChild(y);var A=s.overlay?this._overlaysList:this._baseLayersList;return A.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,h,p=[],y=[];this._handlingClick=!0;for(var M=s.length-1;M>=0;M--)c=s[M],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||y.push(h);for(M=0;M<y.length;M++)this._map.hasLayer(y[M])&&this._map.removeLayer(y[M]);for(M=0;M<p.length;M++)this._map.hasLayer(p[M])||this._map.addLayer(p[M]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,h,p=this._map.getZoom(),y=s.length-1;y>=0;y--)c=s[y],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,je(s,"click",on),this.expand();var c=this;setTimeout(function(){Rt(s,"click",on),c._preventClick=!1})}}),gg=function(s,c,h){return new wc(s,c,h)},Qi=Li.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",h=pt("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,h,p,y){var M=pt("a",h,p);return M.innerHTML=s,M.href="#",M.title=c,M.setAttribute("role","button"),M.setAttribute("aria-label",c),yc(M),je(M,"click",pr),je(M,"click",y,this),je(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";rn(this._zoomInButton,c),rn(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Ke(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Ke(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});ut.mergeOptions({zoomControl:!0}),ut.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qi,this.addControl(this.zoomControl))});var mg=function(s){return new Qi(s)},_g=Li.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",h=pt("div",c),p=this.options;return this._addScales(p,c+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,h){s.metric&&(this._mScale=pt("div",c,h)),s.imperial&&(this._iScale=pt("div",c,h))},_update:function(){var s=this._map,c=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/s)},_updateImperial:function(s){var c=s*3.2808399,h,p,y;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(y=this._getRoundNum(c),this._updateScale(this._iScale,y+" ft",y/c))},_updateScale:function(s,c,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),h=s/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),Cc=function(s){return new _g(s)},vg='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ec=Li.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ce.inlineSvg?vg+" ":"")+"Leaflet</a>"},initialize:function(s){I(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),yc(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});ut.mergeOptions({attributionControl:!0}),ut.addInitHook(function(){this.options.attributionControl&&new Ec().addTo(this)});var $l=function(s){return new Ec(s)};Li.Layers=wc,Li.Zoom=Qi,Li.Scale=_g,Li.Attribution=Ec,aa.layers=gg,aa.zoom=mg,aa.scale=Cc,aa.attribution=$l;var Ji=$.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ji.addTo=function(s,c){return s.addHandler(c,this),this};var Gl={Events:nn},yg=Ce.touch?"touchstart mousedown":"mousedown",Lr=Ar.extend({options:{clickTolerance:3},initialize:function(s,c,h,p){I(this,p),this._element=s,this._dragStartTarget=c||s,this._preventOutline=h},enable:function(){this._enabled||(je(this._dragStartTarget,yg,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Lr._dragging===this&&this.finishDrag(!0),Rt(this._dragStartTarget,yg,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!jl(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Lr._dragging===this&&this.finishDrag();return}if(!(Lr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Lr._dragging=this,this._preventOutline&&uh(this._element),os(),ra(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,h=hg(this._element);this._startPoint=new Ge(c.clientX,c.clientY),this._startPos=fr(this._element),this._parentScale=ss(h);var p=s.type==="mousedown";je(document,p?"mousemove":"touchmove",this._onMove,this),je(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Ge(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,on(s),this._moved||(this.fire("dragstart"),this._moved=!0,Ke(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ke(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Kt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){rn(document.body,"leaflet-dragging"),this._lastTarget&&(rn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Rt(document,"mousemove touchmove",this._onMove,this),Rt(document,"mouseup touchend touchcancel",this._onUp,this),ch(),St();var c=this._moved&&this._moving;this._moving=!1,Lr._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function ca(s,c,h){var p,y=[1,4,2,8],M,A,G,Z,oe,me,Ve,it;for(M=0,me=s.length;M<me;M++)s[M]._code=_o(s[M],c);for(G=0;G<4;G++){for(Ve=y[G],p=[],M=0,me=s.length,A=me-1;M<me;A=M++)Z=s[M],oe=s[A],Z._code&Ve?oe._code&Ve||(it=Ic(oe,Z,Ve,c,h),it._code=_o(it,c),p.push(it)):(oe._code&Ve&&(it=Ic(oe,Z,Ve,c,h),it._code=_o(it,c),p.push(it)),p.push(Z));s=p}return s}function _h(s,c){var h,p,y,M,A,G,Z,oe,me;if(!s||s.length===0)throw new Error("latlngs not passed");Ci(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ve=lt([0,0]),it=kt(s),Ei=it.getNorthWest().distanceTo(it.getSouthWest())*it.getNorthEast().distanceTo(it.getNorthWest());Ei<1700&&(Ve=ql(s));var Kn=s.length,gr=[];for(h=0;h<Kn;h++){var Fi=lt(s[h]);gr.push(c.project(lt([Fi.lat-Ve.lat,Fi.lng-Ve.lng])))}for(G=Z=oe=0,h=0,p=Kn-1;h<Kn;p=h++)y=gr[h],M=gr[p],A=y.y*M.x-M.y*y.x,Z+=(y.x+M.x)*A,oe+=(y.y+M.y)*A,G+=A*3;G===0?me=gr[0]:me=[Z/G,oe/G];var tu=c.unproject(Ne(me));return lt([tu.lat+Ve.lat,tu.lng+Ve.lng])}function ql(s){for(var c=0,h=0,p=0,y=0;y<s.length;y++){var M=lt(s[y]);c+=M.lat,h+=M.lng,p++}return lt([c/p,h/p])}var vh={__proto__:null,clipPolygon:ca,polygonCenter:_h,centroid:ql};function Wl(s,c){if(!c||!s.length)return s.slice();var h=c*c;return s=cs(s,h),s=bg(s,h),s}function yh(s,c,h){return Math.sqrt(Bn(s,c,h,!0))}function Kl(s,c,h){return Bn(s,c,h)}function bg(s,c){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,y=new p(h);y[0]=y[h-1]=1,Zl(s,y,c,0,h-1);var M,A=[];for(M=0;M<h;M++)y[M]&&A.push(s[M]);return A}function Zl(s,c,h,p,y){var M=0,A,G,Z;for(G=p+1;G<=y-1;G++)Z=Bn(s[G],s[p],s[y],!0),Z>M&&(A=G,M=Z);M>h&&(c[A]=1,Zl(s,c,h,p,A),Zl(s,c,h,A,y))}function cs(s,c){for(var h=[s[0]],p=1,y=0,M=s.length;p<M;p++)Yl(s[p],s[y])>c&&(h.push(s[p]),y=p);return y<M-1&&h.push(s[M-1]),h}var bh;function xh(s,c,h,p,y){var M=p?bh:_o(s,h),A=_o(c,h),G,Z,oe;for(bh=A;;){if(!(M|A))return[s,c];if(M&A)return!1;G=M||A,Z=Ic(s,c,G,h,y),oe=_o(Z,h),G===M?(s=Z,M=oe):(c=Z,A=oe)}}function Ic(s,c,h,p,y){var M=c.x-s.x,A=c.y-s.y,G=p.min,Z=p.max,oe,me;return h&8?(oe=s.x+M*(Z.y-s.y)/A,me=Z.y):h&4?(oe=s.x+M*(G.y-s.y)/A,me=G.y):h&2?(oe=Z.x,me=s.y+A*(Z.x-s.x)/M):h&1&&(oe=G.x,me=s.y+A*(G.x-s.x)/M),new Ge(oe,me,y)}function _o(s,c){var h=0;return s.x<c.min.x?h|=1:s.x>c.max.x&&(h|=2),s.y<c.min.y?h|=4:s.y>c.max.y&&(h|=8),h}function Yl(s,c){var h=c.x-s.x,p=c.y-s.y;return h*h+p*p}function Bn(s,c,h,p){var y=c.x,M=c.y,A=h.x-y,G=h.y-M,Z=A*A+G*G,oe;return Z>0&&(oe=((s.x-y)*A+(s.y-M)*G)/Z,oe>1?(y=h.x,M=h.y):oe>0&&(y+=A*oe,M+=G*oe)),A=s.x-y,G=s.y-M,p?A*A+G*G:new Ge(y,M)}function Ci(s){return!ie(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function wh(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ci(s)}function ls(s,c){var h,p,y,M,A,G,Z,oe;if(!s||s.length===0)throw new Error("latlngs not passed");Ci(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var me=lt([0,0]),Ve=kt(s),it=Ve.getNorthWest().distanceTo(Ve.getSouthWest())*Ve.getNorthEast().distanceTo(Ve.getNorthWest());it<1700&&(me=ql(s));var Ei=s.length,Kn=[];for(h=0;h<Ei;h++){var gr=lt(s[h]);Kn.push(c.project(lt([gr.lat-me.lat,gr.lng-me.lng])))}for(h=0,p=0;h<Ei-1;h++)p+=Kn[h].distanceTo(Kn[h+1])/2;if(p===0)oe=Kn[0];else for(h=0,M=0;h<Ei-1;h++)if(A=Kn[h],G=Kn[h+1],y=A.distanceTo(G),M+=y,M>p){Z=(M-p)/y,oe=[G.x-Z*(G.x-A.x),G.y-Z*(G.y-A.y)];break}var Fi=c.unproject(Ne(oe));return lt([Fi.lat+me.lat,Fi.lng+me.lng])}var d={__proto__:null,simplify:Wl,pointToSegmentDistance:yh,closestPointOnSegment:Kl,clipSegment:xh,_getEdgeIntersection:Ic,_getBitCode:_o,_sqClosestPointOnSegment:Bn,isFlat:Ci,_flat:wh,polylineCenter:ls},m={project:function(s){return new Ge(s.lng,s.lat)},unproject:function(s){return new ze(s.y,s.x)},bounds:new Vt([-180,-90],[180,90])},x={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Vt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,h=this.R,p=s.lat*c,y=this.R_MINOR/h,M=Math.sqrt(1-y*y),A=M*Math.sin(p),G=Math.tan(Math.PI/4-p/2)/Math.pow((1-A)/(1+A),M/2);return p=-h*Math.log(Math.max(G,1e-10)),new Ge(s.lng*c*h,p)},unproject:function(s){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,y=Math.sqrt(1-p*p),M=Math.exp(-s.y/h),A=Math.PI/2-2*Math.atan(M),G=0,Z=.1,oe;G<15&&Math.abs(Z)>1e-7;G++)oe=y*Math.sin(A),oe=Math.pow((1-oe)/(1+oe),y/2),Z=Math.PI/2-2*Math.atan(M*oe)-A,A+=Z;return new ze(A*c,s.x*c/h)}},P={__proto__:null,LonLat:m,Mercator:x,SphericalMercator:qd},U=t({},lo,{code:"EPSG:3395",projection:x,transformation:(function(){var s=.5/(Math.PI*x.R);return uo(s,.5,-s,.5)})()}),Y=t({},lo,{code:"EPSG:4326",projection:m,transformation:uo(1/180,1,-1/180,.5)}),ce=t({},xi,{projection:m,transformation:uo(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var h=c.lng-s.lng,p=c.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});xi.Earth=lo,xi.EPSG3395=U,xi.EPSG3857=Js,xi.EPSG900913=Kd,xi.EPSG4326=Y,xi.Simple=ce;var tt=Ar.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});ut.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=a(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=a(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},_addLayers:function(s){s=s?ie(s)?s:[s]:[];for(var c=0,h=s.length;c<h;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=a(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;s=y.minZoom===void 0?s:Math.min(s,y.minZoom),c=y.maxZoom===void 0?c:Math.max(c,y.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Qt=tt.extend({initialize:function(s,c){I(this,c),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),gt=function(s,c){return new Qt(s,c)},$t=Qt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Qt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Qt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new li;for(var c in this._layers){var h=this._layers[c];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),Wn=function(s,c){return new $t(s,c)},Xi=$.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){I(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var y=Ne(p),M=Ne(c==="shadow"&&h.shadowAnchor||h.iconAnchor||y&&y.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(h.className||""),M&&(s.style.marginLeft=-M.x+"px",s.style.marginTop=-M.y+"px"),y&&(s.style.width=y.x+"px",s.style.height=y.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return Ce.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function er(s){return new Xi(s)}var vo=Xi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof vo.imagePath!="string"&&(vo.imagePath=this._detectIconPath()),(this.options.imagePath||vo.imagePath)+Xi.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(h,p,y){var M=p.exec(h);return M&&M[y]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=pt("div","leaflet-default-icon-path",document.body),c=gc(s,"background-image")||gc(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Ql=Ji.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Lr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ke(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&rn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,M=fr(c._icon),A=h.getPixelBounds(),G=h.getPixelOrigin(),Z=ti(A.min._subtract(G).add(y),A.max._subtract(G).subtract(y));if(!Z.contains(M)){var oe=Ne((Math.max(Z.max.x,M.x)-Z.max.x)/(A.max.x-Z.max.x)-(Math.min(Z.min.x,M.x)-Z.min.x)/(A.min.x-Z.min.x),(Math.max(Z.max.y,M.y)-Z.max.y)/(A.max.y-Z.max.y)-(Math.min(Z.min.y,M.y)-Z.min.y)/(A.min.y-Z.min.y)).multiplyBy(p);h.panBy(oe,{animate:!1}),this._draggable._newPos._add(oe),this._draggable._startPos._add(oe),Kt(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,h=c._shadow,p=fr(c._icon),y=c._map.layerPointToLatLng(p);h&&Kt(h,p),c._latlng=y,s.latlng=y,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),xg=tt.extend({options:{icon:new vo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){I(this,c),this._latlng=lt(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=lt(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Ke(h,c),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(h,"focus",this._panOnFocus,this);var y=s.icon.createShadow(this._shadow),M=!1;y!==this._shadow&&(this._removeShadow(),M=!0),y&&(Ke(y,c),y.alt=""),this._shadow=y,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&M&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Rt(this._icon,"focus",this._panOnFocus,this),Ht(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ht(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Kt(this._icon,s),this._shadow&&Kt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ke(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ql)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ql(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&wi(this._icon,s),this._shadow&&wi(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,h=c.iconSize?Ne(c.iconSize):Ne(0,0),p=c.iconAnchor?Ne(c.iconAnchor):Ne(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function t5(s,c){return new xg(s,c)}var la=tt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return I(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wg=la.extend({options:{fill:!0,radius:10},initialize:function(s,c){I(this,c),this._latlng=lt(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=lt(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return la.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,h=this._clickTolerance(),p=[s+h,c+h];this._pxBounds=new Vt(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function n5(s,c){return new wg(s,c)}var Zy=wg.extend({initialize:function(s,c,h){if(typeof c=="number"&&(c=t({},h,{radius:c})),I(this,c),this._latlng=lt(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new li(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:la.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===lo.distance){var y=Math.PI/180,M=this._mRadius/lo.R/y,A=h.project([c+M,s]),G=h.project([c-M,s]),Z=A.add(G).divideBy(2),oe=h.unproject(Z).lat,me=Math.acos((Math.cos(M*y)-Math.sin(c*y)*Math.sin(oe*y))/(Math.cos(c*y)*Math.cos(oe*y)))/y;(isNaN(me)||me===0)&&(me=M/Math.cos(Math.PI/180*c)),this._point=Z.subtract(h.getPixelOrigin()),this._radius=isNaN(me)?0:Z.x-h.project([oe,s-me]).x,this._radiusY=Z.y-A.y}else{var Ve=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Ve).x}this._updateBounds()}});function i5(s,c,h){return new Zy(s,c,h)}var us=la.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){I(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,h=null,p=Bn,y,M,A=0,G=this._parts.length;A<G;A++)for(var Z=this._parts[A],oe=1,me=Z.length;oe<me;oe++){y=Z[oe-1],M=Z[oe];var Ve=p(s,y,M,!0);Ve<c&&(c=Ve,h=p(s,y,M))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ls(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=lt(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new li,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ci(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],h=Ci(s),p=0,y=s.length;p<y;p++)h?(c[p]=lt(s[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(s[p]);return c},_project:function(){var s=new Vt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new Ge(s,s);this._rawPxBounds&&(this._pxBounds=new Vt([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,h){var p=s[0]instanceof ze,y=s.length,M,A;if(p){for(A=[],M=0;M<y;M++)A[M]=this._map.latLngToLayerPoint(s[M]),h.extend(A[M]);c.push(A)}else for(M=0;M<y;M++)this._projectLatlngs(s[M],c,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,y,M,A,G,Z;for(h=0,y=0,M=this._rings.length;h<M;h++)for(Z=this._rings[h],p=0,A=Z.length;p<A-1;p++)G=xh(Z[p],Z[p+1],s,p,!0),G&&(c[y]=c[y]||[],c[y].push(G[0]),(G[1]!==Z[p+1]||p===A-2)&&(c[y].push(G[1]),y++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=Wl(s[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var h,p,y,M,A,G,Z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,M=this._parts.length;h<M;h++)for(G=this._parts[h],p=0,A=G.length,y=A-1;p<A;y=p++)if(!(!c&&p===0)&&yh(s,G[y],G[p])<=Z)return!0;return!1}});function r5(s,c){return new us(s,c)}us._flat=wh;var Jl=us.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _h(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=us.prototype._convertLatLngs.call(this,s),h=c.length;return h>=2&&c[0]instanceof ze&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(s){us.prototype._setLatLngs.call(this,s),Ci(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ci(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,h=new Ge(c,c);if(s=new Vt(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,M;p<y;p++)M=ca(this._rings[p],s,!0),M.length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,h,p,y,M,A,G,Z,oe;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(M=0,Z=this._parts.length;M<Z;M++)for(h=this._parts[M],A=0,oe=h.length,G=oe-1;A<oe;G=A++)p=h[A],y=h[G],p.y>s.y!=y.y>s.y&&s.x<(y.x-p.x)*(s.y-p.y)/(y.y-p.y)+p.x&&(c=!c);return c||us.prototype._containsPoint.call(this,s,!0)}});function o5(s,c){return new Jl(s,c)}var ds=$t.extend({initialize:function(s,c){I(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=ie(s)?s:s.features,h,p,y;if(c){for(h=0,p=c.length;h<p;h++)y=c[h],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var M=this.options;if(M.filter&&!M.filter(s))return this;var A=Cg(s,M);return A?(A.feature=Mg(s),A.defaultOptions=A.options,this.resetStyle(A),M.onEachFeature&&M.onEachFeature(s,A),this.addLayer(A)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function Cg(s,c){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,y=[],M=c&&c.pointToLayer,A=c&&c.coordsToLatLng||Yy,G,Z,oe,me;if(!p&&!h)return null;switch(h.type){case"Point":return G=A(p),RP(M,s,G,c);case"MultiPoint":for(oe=0,me=p.length;oe<me;oe++)G=A(p[oe]),y.push(RP(M,s,G,c));return new $t(y);case"LineString":case"MultiLineString":return Z=Eg(p,h.type==="LineString"?0:1,A),new us(Z,c);case"Polygon":case"MultiPolygon":return Z=Eg(p,h.type==="Polygon"?1:2,A),new Jl(Z,c);case"GeometryCollection":for(oe=0,me=h.geometries.length;oe<me;oe++){var Ve=Cg({geometry:h.geometries[oe],type:"Feature",properties:s.properties},c);Ve&&y.push(Ve)}return new $t(y);case"FeatureCollection":for(oe=0,me=h.features.length;oe<me;oe++){var it=Cg(h.features[oe],c);it&&y.push(it)}return new $t(y);default:throw new Error("Invalid GeoJSON object.")}}function RP(s,c,h,p){return s?s(c,h):new xg(h,p&&p.markersInheritOptions&&p)}function Yy(s){return new ze(s[1],s[0],s[2])}function Eg(s,c,h){for(var p=[],y=0,M=s.length,A;y<M;y++)A=c?Eg(s[y],c-1,h):(h||Yy)(s[y]),p.push(A);return p}function Qy(s,c){return s=lt(s),s.alt!==void 0?[g(s.lng,c),g(s.lat,c),g(s.alt,c)]:[g(s.lng,c),g(s.lat,c)]}function Ig(s,c,h,p){for(var y=[],M=0,A=s.length;M<A;M++)y.push(c?Ig(s[M],Ci(s[M])?0:c-1,h,p):Qy(s[M],p));return!c&&h&&y.length>0&&y.push(y[0].slice()),y}function Xl(s,c){return s.feature?t({},s.feature,{geometry:c}):Mg(c)}function Mg(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Jy={toGeoJSON:function(s){return Xl(this,{type:"Point",coordinates:Qy(this.getLatLng(),s)})}};xg.include(Jy),Zy.include(Jy),wg.include(Jy),us.include({toGeoJSON:function(s){var c=!Ci(this._latlngs),h=Ig(this._latlngs,c?1:0,!1,s);return Xl(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),Jl.include({toGeoJSON:function(s){var c=!Ci(this._latlngs),h=c&&!Ci(this._latlngs[0]),p=Ig(this._latlngs,h?2:c?1:0,!0,s);return c||(p=[p]),Xl(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),Qt.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(s).geometry.coordinates)}),Xl(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var M=y.toGeoJSON(s);if(h)p.push(M.geometry);else{var A=Mg(M);A.type==="FeatureCollection"?p.push.apply(p,A.features):p.push(A)}}}),h?Xl(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function NP(s,c){return new ds(s,c)}var s5=NP,Pg=tt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,h){this._url=s,this._bounds=kt(c),I(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ke(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ht(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&po(this._image),this},bringToBack:function(){return this._map&&go(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=kt(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:pt("img");if(Ke(c,"leaflet-image-layer"),this._zoomAnimated&&Ke(c,"leaflet-zoom-animated"),this.options.className&&Ke(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=r(this.fire,this,"load"),c.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ii(this._image,h,c)},_reset:function(){var s=this._image,c=new Vt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();Kt(s,c.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){wi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),a5=function(s,c,h){return new Pg(s,c,h)},LP=Pg.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:pt("video");if(Ke(c,"leaflet-image-layer"),this._zoomAnimated&&Ke(c,"leaflet-zoom-animated"),this.options.className&&Ke(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=r(this.fire,this,"load"),s){for(var h=c.getElementsByTagName("source"),p=[],y=0;y<h.length;y++)p.push(h[y].src);this._url=h.length>0?p:[c.src];return}ie(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var M=0;M<this._url.length;M++){var A=pt("source");A.src=this._url[M],c.appendChild(A)}}});function c5(s,c,h){return new LP(s,c,h)}var FP=Pg.extend({_initImage:function(){var s=this._image=this._url;Ke(s,"leaflet-image-layer"),this._zoomAnimated&&Ke(s,"leaflet-zoom-animated"),this.options.className&&Ke(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function l5(s,c,h){return new FP(s,c,h)}var yo=tt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof ze||ie(s))?(this._latlng=lt(s),I(this,c)):(I(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&wi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&wi(this._container,1),this.bringToFront(),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(wi(this._container,0),this._removeTimeout=setTimeout(r(Ht,void 0,this._container),200)):Ht(this._container),this.options.interactive&&(rn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=lt(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&po(this._container),this},bringToBack:function(){return this._map&&go(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof $t){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=Ne(this.options.offset),h=this._getAnchor();this._zoomAnimated?Kt(this._container,s.add(h)):c=c.add(s).add(h);var p=this._containerBottom=-c.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});ut.include({_initOverlay:function(s,c,h,p){var y=c;return y instanceof s||(y=new s(p).setContent(c)),h&&y.setLatLng(h),y}}),tt.include({_initOverlay:function(s,c,h,p){var y=h;return y instanceof s?(I(y,p),y._source=this):(y=c&&!p?c:new s(p,this),y.setContent(h)),y}});var Sg=yo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,yo.prototype.openOn.call(this,s)},onAdd:function(s){yo.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof la||this._source.on("preclick",ui))},onRemove:function(s){yo.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof la||this._source.off("preclick",ui))},getEvents:function(){var s=yo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=pt("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=pt("div",s+"-content-wrapper",c);if(this._contentNode=pt("div",s+"-content",h),yc(c),ph(this._contentNode),je(c,"contextmenu",ui),this._tipContainer=pt("div",s+"-tip-container",c),this._tip=pt("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=pt("a",s+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',je(p,"click",function(y){on(y),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=s.offsetHeight,y=this.options.maxHeight,M="leaflet-popup-scrolled";y&&p>y?(c.height=y+"px",Ke(s,M)):rn(s,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();Kt(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(gc(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,y=new Ge(this._containerLeft,-h-this._containerBottom);y._add(fr(this._container));var M=s.layerPointToContainerPoint(y),A=Ne(this.options.autoPanPadding),G=Ne(this.options.autoPanPaddingTopLeft||A),Z=Ne(this.options.autoPanPaddingBottomRight||A),oe=s.getSize(),me=0,Ve=0;M.x+p+Z.x>oe.x&&(me=M.x+p-oe.x+Z.x),M.x-me-G.x<0&&(me=M.x-G.x),M.y+h+Z.y>oe.y&&(Ve=M.y+h-oe.y+Z.y),M.y-Ve-G.y<0&&(Ve=M.y-G.y),(me||Ve)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([me,Ve]))}},_getAnchor:function(){return Ne(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),u5=function(s,c){return new Sg(s,c)};ut.mergeOptions({closePopupOnClick:!0}),ut.include({openPopup:function(s,c,h){return this._initOverlay(Sg,s,c,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),tt.include({bindPopup:function(s,c){return this._popup=this._initOverlay(Sg,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof $t||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){pr(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof la)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Tg=yo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){yo.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){yo.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=yo.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,h,p=this._map,y=this._container,M=p.latLngToContainerPoint(p.getCenter()),A=p.layerPointToContainerPoint(s),G=this.options.direction,Z=y.offsetWidth,oe=y.offsetHeight,me=Ne(this.options.offset),Ve=this._getAnchor();G==="top"?(c=Z/2,h=oe):G==="bottom"?(c=Z/2,h=0):G==="center"?(c=Z/2,h=oe/2):G==="right"?(c=0,h=oe/2):G==="left"?(c=Z,h=oe/2):A.x<M.x?(G="right",c=0,h=oe/2):(G="left",c=Z+(me.x+Ve.x)*2,h=oe/2),s=s.subtract(Ne(c,h,!0)).add(me).add(Ve),rn(y,"leaflet-tooltip-right"),rn(y,"leaflet-tooltip-left"),rn(y,"leaflet-tooltip-top"),rn(y,"leaflet-tooltip-bottom"),Ke(y,"leaflet-tooltip-"+G),Kt(y,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&wi(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return Ne(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),d5=function(s,c){return new Tg(s,c)};ut.include({openTooltip:function(s,c,h){return this._initOverlay(Tg,s,c,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),tt.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Tg,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof $t||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(je(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),je(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var VP=Xi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(mc(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=Ne(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function h5(s){return new VP(s)}Xi.Default=vo;var Ch=tt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){I(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ht(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(po(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(go(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Ge?s:new Ge(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,h=-s(-1/0,1/0),p=0,y=c.length,M;p<y;p++)M=c[p].style.zIndex,c[p]!==this._container&&M&&(h=s(h,+M));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ce.ielt9){wi(this._container,this.options.opacity);var s=+new Date,c=!1,h=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var M=Math.min(1,(s-y.loaded)/200);wi(y.el,M),M<1?c=!0:(y.active?h=!0:this._onOpaqueTile(y),y.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(N(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=c-Math.abs(s-h),this._onUpdateLevel(h)):(Ht(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],y=this._map;return p||(p=this._levels[s]={},p.el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=y.project(y.unproject(y.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,y.getCenter(),y.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ht(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,h,p){var y=Math.floor(s/2),M=Math.floor(c/2),A=h-1,G=new Ge(+y,+M);G.z=+A;var Z=this._tileCoordsToKey(G),oe=this._tiles[Z];return oe&&oe.active?(oe.retain=!0,!0):(oe&&oe.loaded&&(oe.retain=!0),A>p?this._retainParent(y,M,A,p):!1)},_retainChildren:function(s,c,h,p){for(var y=2*s;y<2*s+2;y++)for(var M=2*c;M<2*c+2;M++){var A=new Ge(y,M);A.z=h+1;var G=this._tileCoordsToKey(A),Z=this._tiles[G];if(Z&&Z.active){Z.retain=!0;continue}else Z&&Z.loaded&&(Z.retain=!0);h+1<p&&this._retainChildren(y,M,h+1,p)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,h,p){var y=Math.round(c);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var M=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||M)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,c)},_setZoomTransform:function(s,c,h){var p=this._map.getZoomScale(h,s.zoom),y=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();Ce.any3d?ii(s.el,y,p):Kt(s.el,y)},_resetGrid:function(){var s=this._map,c=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),y=c.project(s,this._tileZoom).floor(),M=c.getSize().divideBy(p*2);return new Vt(y.subtract(M),y.add(M))},_update:function(s){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),y=this._pxBoundsToTileRange(p),M=y.getCenter(),A=[],G=this.options.keepBuffer,Z=new Vt(y.getBottomLeft().subtract([G,-G]),y.getTopRight().add([G,-G]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var oe in this._tiles){var me=this._tiles[oe].coords;(me.z!==this._tileZoom||!Z.contains(new Ge(me.x,me.y)))&&(this._tiles[oe].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var Ve=y.min.y;Ve<=y.max.y;Ve++)for(var it=y.min.x;it<=y.max.x;it++){var Ei=new Ge(it,Ve);if(Ei.z=this._tileZoom,!!this._isValidTile(Ei)){var Kn=this._tiles[this._tileCoordsToKey(Ei)];Kn?Kn.current=!0:A.push(Ei)}}if(A.sort(function(Fi,tu){return Fi.distanceTo(M)-tu.distanceTo(M)}),A.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gr=document.createDocumentFragment();for(it=0;it<A.length;it++)this._addTile(A[it],gr);this._level.el.appendChild(gr)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!c.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return kt(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,h=this.getTileSize(),p=s.scaleBy(h),y=p.add(h),M=c.unproject(p,s.z),A=c.unproject(y,s.z);return[M,A]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),h=new li(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),h=new Ge(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(s){var c=this._tiles[s];c&&(Ht(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Ke(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=f,s.onmousemove=f,Ce.ielt9&&this.options.opacity<1&&wi(s,this.options.opacity)},_addTile:function(s,c){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),y=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(y),this.createTile.length<2&&D(r(this._tileReady,this,s,null,y)),Kt(y,h),this._tiles[p]={el:y,coords:s,current:!0},c.appendChild(y),this.fire("tileloadstart",{tile:y,coords:s})},_tileReady:function(s,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(wi(h.el,0),N(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(Ke(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ce.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new Ge(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new Vt(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function f5(s){return new Ch(s)}var eu=Ch.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=I(this,c),c.detectRetina&&Ce.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var h=document.createElement("img");return je(h,"load",r(this._tileOnLoad,this,c,h)),je(h,"error",r(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var c={r:Ce.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=h),c["-y"]=h}return q(this._url,t(c,this.options))},_tileOnLoad:function(s,c){Ce.ielt9?setTimeout(r(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),s(h,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=c-s),s+p},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=f,c.onerror=f,!c.complete)){c.src=we;var h=this._tiles[s].coords;Ht(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",we),Ch.prototype._removeTile.call(this,s)},_tileReady:function(s,c,h){if(!(!this._map||h&&h.getAttribute("src")===we))return Ch.prototype._tileReady.call(this,s,c,h)}});function BP(s,c){return new eu(s,c)}var UP=eu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var h=t({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=I(this,c);var y=c.detectRetina&&Ce.retina?2:1,M=this.getTileSize();h.width=M.x*y,h.height=M.y*y,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,eu.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),h=this._crs,p=ti(h.project(c[0]),h.project(c[1])),y=p.min,M=p.max,A=(this._wmsVersion>=1.3&&this._crs===Y?[y.y,y.x,M.y,M.x]:[y.x,y.y,M.x,M.y]).join(","),G=eu.prototype.getTileUrl.call(this,s);return G+R(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+A},setParams:function(s,c){return t(this.wmsParams,s),c||this.redraw(),this}});function p5(s,c){return new UP(s,c)}eu.WMS=UP,BP.wms=p5;var hs=tt.extend({options:{padding:.1},initialize:function(s){I(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ke(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,c),M=p.multiplyBy(-h).add(y).subtract(this._map._getNewPixelOrigin(s,c));Ce.any3d?ii(this._container,M,h):Kt(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new Vt(h,h.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zP=hs.extend({options:{tolerance:0},getEvents:function(){var s=hs.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){hs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");je(s,"mousemove",this._onMouseMove,this),je(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),je(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,Ht(this._container),Rt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hs.prototype._update.call(this);var s=this._bounds,c=this._container,h=s.getSize(),p=Ce.retina?2:1;Kt(c,s.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",Ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){hs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),h=[],p,y;for(y=0;y<c.length;y++){if(p=Number(c[y]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Vt,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var h,p,y,M,A=s._parts,G=A.length,Z=this._ctx;if(G){for(Z.beginPath(),h=0;h<G;h++){for(p=0,y=A[h].length;p<y;p++)M=A[h][p],Z[p?"lineTo":"moveTo"](M.x,M.y);c&&Z.closePath()}this._fillStroke(Z,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),y=(Math.max(Math.round(s._radiusY),1)||p)/p;y!==1&&(h.save(),h.scale(1,y)),h.beginPath(),h.arc(c.x,c.y/y,p,0,Math.PI*2,!1),y!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,c){var h=c.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),h,p,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(rn(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var h,p,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,h){this._map._fireDOMEvent(c,h||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function jP(s){return Ce.canvas?new zP(s):null}var Eh=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),g5={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(hs.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=Eh("shape");Ke(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=Eh("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;Ht(c),s.removeInteractiveTarget(c),delete this._layers[a(s)]},_updateStyle:function(s){var c=s._stroke,h=s._fill,p=s.options,y=s._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(c||(c=s._stroke=Eh("stroke")),y.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=ie(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(y.removeChild(c),s._stroke=null),p.fill?(h||(h=s._fill=Eh("fill")),y.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(y.removeChild(h),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){po(s._container)},_bringToBack:function(s){go(s._container)}},Og=Ce.vml?Eh:Al,Ih=hs.extend({_initContainer:function(){this._container=Og("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Og("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ht(this._container),Rt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hs.prototype._update.call(this);var s=this._bounds,c=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),Kt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=Og("path");s.options.className&&Ke(c,s.options.className),s.options.interactive&&Ke(c,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ht(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,h=s.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,kl(s._parts,c))},_updateCircle:function(s){var c=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,y="a"+h+","+p+" 0 1,0 ",M=s._empty()?"M0 0":"M"+(c.x-h)+","+c.y+y+h*2+",0 "+y+-h*2+",0 ";this._setPath(s,M)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){po(s._path)},_bringToBack:function(s){go(s._path)}});Ce.vml&&Ih.include(g5);function HP(s){return Ce.svg||Ce.vml?new Ih(s):null}ut.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&jP(s)||HP(s)}});var $P=Jl.extend({initialize:function(s,c){Jl.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=kt(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function m5(s,c){return new $P(s,c)}Ih.create=Og,Ih.pointsToPath=kl,ds.geometryToLayer=Cg,ds.coordsToLatLng=Yy,ds.coordsToLatLngs=Eg,ds.latLngToCoords=Qy,ds.latLngsToCoords=Ig,ds.getFeature=Xl,ds.asFeature=Mg,ut.mergeOptions({boxZoom:!0});var GP=Ji.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Rt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ht(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ra(),os(),this._startPoint=this._map.mouseEventToContainerPoint(s),je(document,{contextmenu:pr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),Ke(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new Vt(this._point,this._startPoint),h=c.getSize();Kt(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Ht(this._box),rn(this._container,"leaflet-crosshair")),St(),ch(),Rt(document,{contextmenu:pr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var c=new li(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ut.addInitHook("addHandler","boxZoom",GP),ut.mergeOptions({doubleClickZoom:!0});var qP=Ji.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,y=s.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(y):c.setZoomAround(s.containerPoint,y)}});ut.addInitHook("addHandler","doubleClickZoom",qP),ut.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var WP=Ji.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Lr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Ke(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){rn(this._map._container,"leaflet-grab"),rn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=kt(this._map.options.maxBounds);this._offsetLimit=ti(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-c+h)%s+c-h,M=(p+c+h)%s-c-h,A=Math.abs(y+h)<Math.abs(M+h)?y:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=A},_onDragEnd:function(s){var c=this._map,h=c.options,p=!h.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),p)c.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),M=(this._lastTime-this._times[0])/1e3,A=h.easeLinearity,G=y.multiplyBy(A/M),Z=G.distanceTo([0,0]),oe=Math.min(h.inertiaMaxSpeed,Z),me=G.multiplyBy(oe/Z),Ve=oe/(h.inertiaDeceleration*A),it=me.multiplyBy(-Ve/2).round();!it.x&&!it.y?c.fire("moveend"):(it=c._limitOffset(it,c.options.maxBounds),D(function(){c.panBy(it,{duration:Ve,easeLinearity:A,noMoveStart:!0,animate:!0})}))}}});ut.addInitHook("addHandler","dragging",WP),ut.mergeOptions({keyboard:!0,keyboardPanDelta:80});var KP=Ji.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),je(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Rt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,h=s.scrollTop||c.scrollTop,p=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},h=this.keyCodes,p,y;for(p=0,y=h.left.length;p<y;p++)c[h.left[p]]=[-1*s,0];for(p=0,y=h.right.length;p<y;p++)c[h.right[p]]=[s,0];for(p=0,y=h.down.length;p<y;p++)c[h.down[p]]=[0,s];for(p=0,y=h.up.length;p<y;p++)c[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},h=this.keyCodes,p,y;for(p=0,y=h.zoomIn.length;p<y;p++)c[h.zoomIn[p]]=s;for(p=0,y=h.zoomOut.length;p<y;p++)c[h.zoomOut[p]]=-s},_addHooks:function(){je(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Rt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],s.shiftKey&&(p=Ne(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(Ne(p),h.options.maxBounds)),h.options.worldCopyJump){var y=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(y)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;pr(s)}}});ut.addInitHook("addHandler","keyboard",KP),ut.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ZP=Ji.extend({addHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Rt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=mh(s),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),p),pr(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,M=h?Math.ceil(y/h)*h:y,A=s._limitZoom(c+(this._delta>0?M:-M))-c;this._delta=0,this._startTime=null,A&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+A):s.setZoomAround(this._lastMousePos,c+A))}});ut.addInitHook("addHandler","scrollWheelZoom",ZP);var _5=600;ut.mergeOptions({tapHold:Ce.touchNative&&Ce.safari&&Ce.mobile,tapTolerance:15});var YP=Ji.extend({addHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Rt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new Ge(c.clientX,c.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(je(document,"touchend",on),je(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),_5),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Rt(document,"touchend",on),Rt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Rt(document,"touchend touchcancel contextmenu",this._cancel,this),Rt(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new Ge(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});ut.addInitHook("addHandler","tapHold",YP),ut.mergeOptions({touchZoom:Ce.touch,bounceAtZoomLimits:!0});var QP=Ji.extend({addHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){rn(this._map._container,"leaflet-touch-zoom"),Rt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),on(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]),y=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(y,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&y<1||this._zoom>c.getMaxZoom()&&y>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var M=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&M.x===0&&M.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var A=r(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(A,this,!0),on(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,N(this._animRequest),Rt(document,"touchmove",this._onTouchMove,this),Rt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ut.addInitHook("addHandler","touchZoom",QP),ut.BoxZoom=GP,ut.DoubleClickZoom=qP,ut.Drag=WP,ut.Keyboard=KP,ut.ScrollWheelZoom=ZP,ut.TapHold=YP,ut.TouchZoom=QP,n.Bounds=Vt,n.Browser=Ce,n.CRS=xi,n.Canvas=zP,n.Circle=Zy,n.CircleMarker=wg,n.Class=$,n.Control=Li,n.DivIcon=VP,n.DivOverlay=yo,n.DomEvent=Yt,n.DomUtil=mo,n.Draggable=Lr,n.Evented=Ar,n.FeatureGroup=$t,n.GeoJSON=ds,n.GridLayer=Ch,n.Handler=Ji,n.Icon=Xi,n.ImageOverlay=Pg,n.LatLng=ze,n.LatLngBounds=li,n.Layer=tt,n.LayerGroup=Qt,n.LineUtil=d,n.Map=ut,n.Marker=xg,n.Mixin=Gl,n.Path=la,n.Point=Ge,n.PolyUtil=vh,n.Polygon=Jl,n.Polyline=us,n.Popup=Sg,n.PosAnimation=fg,n.Projection=P,n.Rectangle=$P,n.Renderer=hs,n.SVG=Ih,n.SVGOverlay=FP,n.TileLayer=eu,n.Tooltip=Tg,n.Transformation=Wd,n.Util=B,n.VideoOverlay=LP,n.bind=r,n.bounds=ti,n.canvas=jP,n.circle=i5,n.circleMarker=n5,n.control=aa,n.divIcon=h5,n.extend=t,n.featureGroup=Wn,n.geoJSON=NP,n.geoJson=s5,n.gridLayer=f5,n.icon=er,n.imageOverlay=a5,n.latLng=lt,n.latLngBounds=kt,n.layerGroup=gt,n.map=pg,n.marker=t5,n.point=Ne,n.polygon=o5,n.polyline=r5,n.popup=u5,n.rectangle=m5,n.setOptions=I,n.stamp=a,n.svg=HP,n.svgOverlay=l5,n.tileLayer=BP,n.tooltip=d5,n.transformation=uo,n.version=e,n.videoOverlay=c5;var v5=window.L;n.noConflict=function(){return window.L=v5,this},window.L=n})});var tb;function Ag(){return tb}function bo(n){let e=tb;return tb=n,e}var sS=Symbol("NotFound");function nu(n){return n===sS||n?.name==="\u0275NotFound"}var di=null,kg=!1,nb=1,L5=null,hi=Symbol("SIGNAL");function He(n){let e=di;return di=n,e}function Fg(){return di}var iu={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ru(n){if(kg)throw new Error("");if(di===null)return;di.consumerOnSignalRead(n);let e=di.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=di.recomputing;if(i&&(t=e!==void 0?e.nextProducer:di.producers,t!==void 0&&t.producer===n)){di.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===di&&(!i||V5(r,di)))return;let o=su(di),a={producer:n,consumer:di,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};di.producersTail=a,e!==void 0?e.nextProducer=a:di.producers=a,o&&uS(n,a)}function aS(){nb++}function Vg(n){if(!(su(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===nb)){if(!n.producerMustRecompute(n)&&!Sh(n)){Lg(n);return}n.producerRecomputeValue(n),Lg(n)}}function ib(n){if(n.consumers===void 0)return;let e=kg;kg=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||F5(i)}}finally{kg=e}}function rb(){return di?.consumerAllowSignalWrites!==!1}function F5(n){n.dirty=!0,ib(n),n.consumerMarkedDirty?.(n)}function Lg(n){n.dirty=!1,n.lastCleanEpoch=nb}function ou(n){return n&&cS(n),He(n)}function cS(n){n.producersTail=void 0,n.recomputing=!0}function Ph(n,e){He(e),n&&lS(n)}function lS(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(su(n))do t=ob(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Sh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(Vg(t),i!==t.version))return!0}return!1}function Th(n){if(su(n)){let e=n.producers;for(;e!==void 0;)e=ob(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function uS(n,e){let t=n.consumersTail,i=su(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)uS(r.producer,r)}function ob(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!su(e)){let o=e.producers;for(;o!==void 0;)o=ob(o)}return t}function su(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Bg(n){L5?.(n)}function V5(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function Ug(n,e){return Object.is(n,e)}function zg(n,e){let t=Object.create(B5);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(Vg(t),ru(t),t.value===Mh)throw t.error;return t.value};return i[hi]=t,Bg(t),i}var Rg=Symbol("UNSET"),Ng=Symbol("COMPUTING"),Mh=Symbol("ERRORED"),B5=ye(X({},iu),{value:Rg,dirty:!0,error:null,equal:Ug,kind:"computed",producerMustRecompute(n){return n.value===Rg||n.value===Ng},producerRecomputeValue(n){if(n.value===Ng)throw new Error("");let e=n.value;n.value=Ng;let t=ou(n),i,r=!1;try{i=n.computation(),He(null),r=e!==Rg&&e!==Mh&&i!==Mh&&n.equal(e,i)}catch(o){i=Mh,n.error=o}finally{Ph(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function U5(){throw new Error}var dS=U5;function hS(n){dS(n)}function sb(n){dS=n}var z5=null;function ab(n,e){let t=Object.create(jg);t.value=n,e!==void 0&&(t.equal=e);let i=()=>fS(t);return i[hi]=t,Bg(t),[i,a=>au(t,a),a=>cb(t,a)]}function fS(n){return ru(n),n.value}function au(n,e){rb()||hS(n),n.equal(n.value,e)||(n.value=e,j5(n))}function cb(n,e){rb()||hS(n),au(n,e(n.value))}var jg=ye(X({},iu),{equal:Ug,value:void 0,kind:"signal"});function j5(n){n.version++,aS(),ib(n),z5?.(n)}function Ze(n){return typeof n=="function"}function cu(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Hg=cu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Mc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var dn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Ze(i))try{i()}catch(o){e=o instanceof Hg?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{pS(o)}catch(a){e=e??[],a instanceof Hg?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Hg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Mc(t,e)}remove(e){let{_finalizers:t}=this;t&&Mc(t,e),e instanceof n&&e._removeParent(this)}};dn.EMPTY=(()=>{let n=new dn;return n.closed=!0,n})();var lb=dn.EMPTY;function $g(n){return n instanceof dn||n&&"closed"in n&&Ze(n.remove)&&Ze(n.add)&&Ze(n.unsubscribe)}function pS(n){Ze(n)?n():n.unsubscribe()}var Fr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var lu={setTimeout(n,e,...t){let{delegate:i}=lu;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=lu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Gg(n){lu.setTimeout(()=>{let{onUnhandledError:e}=Fr;if(e)e(n);else throw n})}function Oh(){}var gS=ub("C",void 0,void 0);function mS(n){return ub("E",void 0,n)}function _S(n){return ub("N",n,void 0)}function ub(n,e,t){return{kind:n,value:e,error:t}}var Pc=null;function uu(n){if(Fr.useDeprecatedSynchronousErrorHandling){let e=!Pc;if(e&&(Pc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Pc;if(Pc=null,t)throw i}}else n()}function vS(n){Fr.useDeprecatedSynchronousErrorHandling&&Pc&&(Pc.errorThrown=!0,Pc.error=n)}var Sc=class extends dn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$g(e)&&e.add(this)):this.destination=G5}static create(e,t,i){return new da(e,t,i)}next(e){this.isStopped?hb(_S(e),this):this._next(e)}error(e){this.isStopped?hb(mS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hb(gS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},H5=Function.prototype.bind;function db(n,e){return H5.call(n,e)}var fb=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){qg(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){qg(i)}else qg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){qg(t)}}},da=class extends Sc{constructor(e,t,i){super();let r;if(Ze(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Fr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&db(e.next,o),error:e.error&&db(e.error,o),complete:e.complete&&db(e.complete,o)}):r=e}this.destination=new fb(r)}};function qg(n){Fr.useDeprecatedSynchronousErrorHandling?vS(n):Gg(n)}function $5(n){throw n}function hb(n,e){let{onStoppedNotification:t}=Fr;t&&lu.setTimeout(()=>t(n,e))}var G5={closed:!0,next:Oh,error:$5,complete:Oh};var du=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ii(n){return n}function Wg(...n){return pb(n)}function pb(n){return n.length===0?Ii:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=W5(t)?t:new da(t,i,r);return uu(()=>{let{operator:a,source:l}=this;o.add(a?a.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=yS(i),new i((r,o)=>{let a=new da({next:l=>{try{t(l)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[du](){return this}pipe(...t){return pb(t)(this)}toPromise(t){return t=yS(t),new t((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return n.create=e=>new n(e),n})();function yS(n){var e;return(e=n??Fr.Promise)!==null&&e!==void 0?e:Promise}function q5(n){return n&&Ze(n.next)&&Ze(n.error)&&Ze(n.complete)}function W5(n){return n&&n instanceof Sc||q5(n)&&$g(n)}function gb(n){return Ze(n?.lift)}function rt(n){return e=>{if(gb(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function et(n,e,t,i,r){return new mb(n,e,t,i,r)}var mb=class extends Sc{constructor(e,t,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(l){try{t(l)}catch(u){e.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function hu(){return rt((n,e)=>{let t=null;n._refCount++;let i=et(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var fu=class extends Ae{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,gb(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dn;let t=this.getSubject();e.add(this.source.subscribe(et(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dn.EMPTY)}return e}refCount(){return hu()(this)}};var bS=cu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Jt=(()=>{class n extends Ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Kg(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new bS}next(t){uu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){uu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){uu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?lb:(this.currentObservers=null,o.push(t),new dn(()=>{this.currentObservers=null,Mc(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Ae;return t.source=this,t}}return n.create=(e,t)=>new Kg(e,t),n})(),Kg=class extends Jt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:lb}};var bt=class extends Jt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var _b={now(){return(_b.delegate||Date).now()},delegate:void 0};var Zg=class extends dn{constructor(e,t){super()}schedule(e,t=0){return this}};var Dh={setInterval(n,e,...t){let{delegate:i}=Dh;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Dh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var pu=class extends Zg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return Dh.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Dh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Mc(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var gu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};gu.now=_b.now;var mu=class extends gu{constructor(e,t=gu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Ah=new mu(pu);var Yg=class extends pu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var Qg=class extends mu{};var vb=new Qg(Yg);var Vi=new Ae(n=>n.complete());function xS(n){return n&&Ze(n.schedule)}function wS(n){return n[n.length-1]}function Jg(n){return Ze(wS(n))?n.pop():void 0}function ha(n){return xS(wS(n))?n.pop():void 0}function Xg(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function ES(n,e,t,i){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function l(g){try{f(i.next(g))}catch(b){a(b)}}function u(g){try{f(i.throw(g))}catch(b){a(b)}}function f(g){g.done?o(g.value):r(g.value).then(l,u)}f((i=i.apply(n,e||[])).next())})}function CS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tc(n){return this instanceof Tc?(this.v=n,this):new Tc(n)}function IS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(I){return function(R){return Promise.resolve(R).then(I,b)}}function l(I,R){i[I]&&(r[I]=function(W){return new Promise(function(q,ie){o.push([I,W,q,ie])>1||u(I,W)})},R&&(r[I]=R(r[I])))}function u(I,R){try{f(i[I](R))}catch(W){E(o[0][3],W)}}function f(I){I.value instanceof Tc?Promise.resolve(I.value.v).then(g,b):E(o[0][2],I)}function g(I){u("next",I)}function b(I){u("throw",I)}function E(I,R){I(R),o.shift(),o.length&&u(o[0][0],o[0][1])}}function MS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof CS=="function"?CS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(a){return new Promise(function(l,u){a=n[o](a),r(l,u,a.done,a.value)})}}function r(o,a,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},a)}}var em=n=>n&&typeof n.length=="number"&&typeof n!="function";function tm(n){return Ze(n?.then)}function nm(n){return Ze(n[du])}function im(n){return Symbol.asyncIterator&&Ze(n?.[Symbol.asyncIterator])}function rm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function K5(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var om=K5();function sm(n){return Ze(n?.[om])}function am(n){return IS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Tc(t.read());if(r)return yield Tc(void 0);yield yield Tc(i)}}finally{t.releaseLock()}})}function cm(n){return Ze(n?.getReader)}function En(n){if(n instanceof Ae)return n;if(n!=null){if(nm(n))return Z5(n);if(em(n))return Y5(n);if(tm(n))return Q5(n);if(im(n))return PS(n);if(sm(n))return J5(n);if(cm(n))return X5(n)}throw rm(n)}function Z5(n){return new Ae(e=>{let t=n[du]();if(Ze(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Y5(n){return new Ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Q5(n){return new Ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Gg)})}function J5(n){return new Ae(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function PS(n){return new Ae(e=>{eF(n,e).catch(t=>e.error(t))})}function X5(n){return PS(am(n))}function eF(n,e){var t,i,r,o;return ES(this,void 0,void 0,function*(){try{for(t=MS(n);i=yield t.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function Bi(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function fa(n,e=0){return rt((t,i)=>{t.subscribe(et(i,r=>Bi(i,n,()=>i.next(r),e),()=>Bi(i,n,()=>i.complete(),e),r=>Bi(i,n,()=>i.error(r),e)))})}function pa(n,e=0){return rt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function SS(n,e){return En(n).pipe(pa(e),fa(e))}function TS(n,e){return En(n).pipe(pa(e),fa(e))}function OS(n,e){return new Ae(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function DS(n,e){return new Ae(t=>{let i;return Bi(t,e,()=>{i=n[om](),Bi(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){t.error(a);return}o?t.complete():t.next(r)},0,!0)}),()=>Ze(i?.return)&&i.return()})}function lm(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ae(t=>{Bi(t,e,()=>{let i=n[Symbol.asyncIterator]();Bi(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function AS(n,e){return lm(am(n),e)}function kS(n,e){if(n!=null){if(nm(n))return SS(n,e);if(em(n))return OS(n,e);if(tm(n))return TS(n,e);if(im(n))return lm(n,e);if(sm(n))return DS(n,e);if(cm(n))return AS(n,e)}throw rm(n)}function Nt(n,e){return e?kS(n,e):En(n)}function Me(...n){let e=ha(n);return Nt(n,e)}function _u(n,e){let t=Ze(n)?n:()=>n,i=r=>r.error(t());return new Ae(e?r=>e.schedule(i,0,r):i)}function yb(n){return!!n&&(n instanceof Ae||Ze(n.lift)&&Ze(n.subscribe))}var Vr=cu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ga(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new da({next:a=>{i(a),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new Vr)}});n.subscribe(o)})}function ue(n,e){return rt((t,i)=>{let r=0;t.subscribe(et(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:tF}=Array;function nF(n,e){return tF(e)?n(...e):n(e)}function um(n){return ue(e=>nF(n,e))}var{isArray:iF}=Array,{getPrototypeOf:rF,prototype:oF,keys:sF}=Object;function dm(n){if(n.length===1){let e=n[0];if(iF(e))return{args:e,keys:null};if(aF(e)){let t=sF(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function aF(n){return n&&typeof n=="object"&&rF(n)===oF}function hm(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Mi(...n){let e=ha(n),t=Jg(n),{args:i,keys:r}=dm(n);if(i.length===0)return Nt([],e);let o=new Ae(cF(i,e,r?a=>hm(r,a):Ii));return t?o.pipe(um(t)):o}function cF(n,e,t=Ii){return i=>{RS(e,()=>{let{length:r}=n,o=new Array(r),a=r,l=r;for(let u=0;u<r;u++)RS(e,()=>{let f=Nt(n[u],e),g=!1;f.subscribe(et(i,b=>{o[u]=b,g||(g=!0,l--),l||i.next(t(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function RS(n,e,t){n?Bi(t,n,e):e()}function NS(n,e,t,i,r,o,a,l){let u=[],f=0,g=0,b=!1,E=()=>{b&&!u.length&&!f&&e.complete()},I=W=>f<i?R(W):u.push(W),R=W=>{o&&e.next(W),f++;let q=!1;En(t(W,g++)).subscribe(et(e,ie=>{r?.(ie),o?I(ie):e.next(ie)},()=>{q=!0},void 0,()=>{if(q)try{for(f--;u.length&&f<i;){let ie=u.shift();a?Bi(e,a,()=>R(ie)):R(ie)}E()}catch(ie){e.error(ie)}}))};return n.subscribe(et(e,I,()=>{b=!0,E()})),()=>{l?.()}}function vn(n,e,t=1/0){return Ze(e)?vn((i,r)=>ue((o,a)=>e(i,o,r,a))(En(n(i,r))),t):(typeof e=="number"&&(t=e),rt((i,r)=>NS(i,r,n,t)))}function ma(n=1/0){return vn(Ii,n)}function LS(){return ma(1)}function vu(...n){return LS()(Nt(n,ha(n)))}function kh(n){return new Ae(e=>{En(n()).subscribe(e)})}function bb(...n){let e=Jg(n),{args:t,keys:i}=dm(n),r=new Ae(o=>{let{length:a}=t;if(!a){o.complete();return}let l=new Array(a),u=a,f=a;for(let g=0;g<a;g++){let b=!1;En(t[g]).subscribe(et(o,E=>{b||(b=!0,f--),l[g]=E},()=>u--,void 0,()=>{(!u||!b)&&(f||o.next(i?hm(i,l):l),o.complete())}))}});return e?r.pipe(um(e)):r}function Pi(n,e){return rt((t,i)=>{let r=0;t.subscribe(et(i,o=>n.call(e,o,r++)&&i.next(o)))})}function fs(n){return rt((e,t)=>{let i=null,r=!1,o;i=e.subscribe(et(t,void 0,void 0,a=>{o=En(n(a,fs(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function FS(n,e,t,i,r){return(o,a)=>{let l=t,u=e,f=0;o.subscribe(et(a,g=>{let b=f++;u=l?n(u,g,b):(l=!0,g),i&&a.next(u)},r&&(()=>{l&&a.next(u),a.complete()})))}}function _a(n,e){return Ze(e)?vn(n,e,1):vn(n,1)}function Rh(n,e=Ah){return rt((t,i)=>{let r=null,o=null,a=null,l=()=>{if(r){r.unsubscribe(),r=null;let f=o;o=null,i.next(f)}};function u(){let f=a+n,g=e.now();if(g<f){r=this.schedule(void 0,f-g),i.add(r);return}l()}t.subscribe(et(i,f=>{o=f,a=e.now(),r||(r=e.schedule(u,n),i.add(r))},()=>{l(),i.complete()},void 0,()=>{o=r=null}))})}function va(n){return rt((e,t)=>{let i=!1;e.subscribe(et(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Zn(n){return n<=0?()=>Vi:rt((e,t)=>{let i=0;e.subscribe(et(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function fm(n,e=Ii){return n=n??lF,rt((t,i)=>{let r,o=!0;t.subscribe(et(i,a=>{let l=e(a);(o||!n(r,l))&&(o=!1,r=l,i.next(a))}))})}function lF(n,e){return n===e}function pm(n=uF){return rt((e,t)=>{let i=!1;e.subscribe(et(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function uF(){return new Vr}function Nh(n){return rt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ps(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Pi((r,o)=>n(r,o,i)):Ii,Zn(1),t?va(e):pm(()=>new Vr))}function yu(n){return n<=0?()=>Vi:rt((e,t)=>{let i=[];e.subscribe(et(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function xb(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Pi((r,o)=>n(r,o,i)):Ii,yu(1),t?va(e):pm(()=>new Vr))}function gm(n,e){return rt(FS(n,e,arguments.length>=2,!0))}function Ui(...n){let e=ha(n);return rt((t,i)=>{(e?vu(n,t,e):vu(n,t)).subscribe(i)})}function ri(n,e){return rt((t,i)=>{let r=null,o=0,a=!1,l=()=>a&&!r&&i.complete();t.subscribe(et(i,u=>{r?.unsubscribe();let f=0,g=o++;En(n(u,g)).subscribe(r=et(i,b=>i.next(e?e(u,b,g,f++):b),()=>{r=null,l()}))},()=>{a=!0,l()}))})}function bu(n){return rt((e,t)=>{En(n).subscribe(et(t,()=>t.complete(),Oh)),!t.closed&&e.subscribe(t)})}function Yn(n,e,t){let i=Ze(n)||e||t?{next:n,error:e,complete:t}:n;return i?rt((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let l=!0;r.subscribe(et(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;l=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;l=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;l&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Ii}function VS(n){let e=He(null);try{return n()}finally{He(e)}}var ya=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Rb=new ya("20.3.14");var ym="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",le=class extends Error{code;constructor(e,t){super(wa(e,t)),this.code=e}};function dF(n){return`NG0${Math.abs(n)}`}function wa(n,e){return`${dF(n)}${e?": "+e:""}`}var Ur=globalThis;function Dt(n){for(let e in n)if(n[e]===Dt)return e;throw Error("")}function zS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ms(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ms).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function bm(n,e){return n?e?`${n} ${e}`:n:e||""}var hF=Dt({__forward_ref__:Dt});function mr(n){return n.__forward_ref__=mr,n.toString=function(){return ms(this())},n}function oi(n){return Nb(n)?n():n}function Nb(n){return typeof n=="function"&&n.hasOwnProperty(hF)&&n.__forward_ref__===mr}function he(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Bh(n){return fF(n,xm)}function Lb(n){return Bh(n)!==null}function fF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function pF(n){let e=n?.[xm]??null;return e||null}function Cb(n){return n&&n.hasOwnProperty(_m)?n[_m]:null}var xm=Dt({\u0275prov:Dt}),_m=Dt({\u0275inj:Dt}),_e=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=he({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fb(n){return n&&!!n.\u0275providers}var Vb=Dt({\u0275cmp:Dt}),Bb=Dt({\u0275dir:Dt}),Ub=Dt({\u0275pipe:Dt}),zb=Dt({\u0275mod:Dt}),Fh=Dt({\u0275fac:Dt}),Rc=Dt({__NG_ELEMENT_ID__:Dt}),BS=Dt({__NG_ENV_ID__:Dt});function vs(n){return typeof n=="string"?n:n==null?"":String(n)}function jS(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():vs(n)}var HS=Dt({ngErrorCode:Dt}),gF=Dt({ngErrorMessage:Dt}),mF=Dt({ngTokenPath:Dt});function jb(n,e){return $S("",-200,e)}function wm(n,e){throw new le(-201,!1)}function $S(n,e,t){let i=new le(e,n);return i[HS]=e,i[gF]=n,t&&(i[mF]=t),i}function _F(n){return n[HS]}var Eb;function GS(){return Eb}function Si(n){let e=Eb;return Eb=n,e}function Hb(n,e,t){let i=Bh(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;wm(n,"Injector")}var vF={},Oc=vF,Ib="__NG_DI_FLAG__",Mb=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=Dc(t)||0;try{return this.injector.get(e,i&8?null:Oc,i)}catch(r){if(nu(r))return r;throw r}}};function yF(n,e=0){let t=Ag();if(t===void 0)throw new le(-203,!1);if(t===null)return Hb(n,void 0,e);{let i=bF(e),r=t.retrieve(n,i);if(nu(r)){if(i.optional)return null;throw r}return r}}function Be(n,e=0){return(GS()||yF)(oi(n),e)}function F(n,e){return Be(n,Dc(e))}function Dc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Pb(n){let e=[];for(let t=0;t<n.length;t++){let i=oi(n[t]);if(Array.isArray(i)){if(i.length===0)throw new le(900,!1);let r,o=0;for(let a=0;a<i.length;a++){let l=i[a],u=xF(l);typeof u=="number"?u===-1?r=l.token:o|=u:r=l}e.push(Be(r,o))}else e.push(Be(i))}return e}function qS(n,e){return n[Ib]=e,n.prototype[Ib]=e,n}function xF(n){return n[Ib]}function ba(n,e){let t=n.hasOwnProperty(Fh);return t?n[Fh]:null}function WS(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function KS(n){return n.flat(Number.POSITIVE_INFINITY)}function Cm(n,e){n.forEach(t=>Array.isArray(t)?Cm(t,e):e(t))}function $b(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Uh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ZS(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Em(n,e,t){let i=wu(n,e);return i>=0?n[i|1]=t:(i=~i,ZS(n,i,e,t)),i}function Im(n,e){let t=wu(n,e);if(t>=0)return n[t|1]}function wu(n,e){return wF(n,e,1)}function wF(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),a=n[o<<t];if(e===a)return o<<t;a>e?r=o:i=o+1}return~(r<<t)}var Ca={},Ti=[],Ea=new _e(""),Gb=new _e("",-1),qb=new _e(""),Vh=class{get(e,t=Oc){if(t===Oc){let r=$S("",-201);throw r.name="\u0275NotFound",r}return t}};function Wb(n){return n[zb]||null}function ys(n){return n[Vb]||null}function Kb(n){return n[Bb]||null}function YS(n){return n[Ub]||null}function Oi(n){return{\u0275providers:n}}function QS(...n){return{\u0275providers:Zb(!0,n),\u0275fromNgModule:!0}}function Zb(n,...e){let t=[],i=new Set,r,o=a=>{t.push(a)};return Cm(e,a=>{let l=a;vm(l,o,[],i)&&(r||=[],r.push(l))}),r!==void 0&&JS(r,o),t}function JS(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];Yb(r,o=>{e(o,i)})}}function vm(n,e,t,i){if(n=oi(n),!n)return!1;let r=null,o=Cb(n),a=!o&&ys(n);if(!o&&!a){let u=n.ngModule;if(o=Cb(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=n}let l=i.has(r);if(a){if(l)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)vm(f,e,t,i)}}else if(o){if(o.imports!=null&&!l){i.add(r);let f;try{Cm(o.imports,g=>{vm(g,e,t,i)&&(f||=[],f.push(g))})}finally{}f!==void 0&&JS(f,e)}if(!l){let f=ba(r)||(()=>new r);e({provide:r,useFactory:f,deps:Ti},r),e({provide:qb,useValue:r,multi:!0},r),e({provide:Ea,useValue:()=>Be(r),multi:!0},r)}let u=o.providers;if(u!=null&&!l){let f=n;Yb(u,g=>{e(g,f)})}}else return!1;return r!==n&&n.providers!==void 0}function Yb(n,e){for(let t of n)Fb(t)&&(t=t.\u0275providers),Array.isArray(t)?Yb(t,e):e(t)}var CF=Dt({provide:String,useValue:Dt});function XS(n){return n!==null&&typeof n=="object"&&CF in n}function EF(n){return!!(n&&n.useExisting)}function IF(n){return!!(n&&n.useFactory)}function Ac(n){return typeof n=="function"}function eT(n){return!!n.useClass}var zh=new _e(""),mm={},US={},wb;function jh(){return wb===void 0&&(wb=new Vh),wb}var yn=class{},kc=class extends yn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,Tb(e,a=>this.processProvider(a)),this.records.set(Gb,xu(void 0,this)),r.has("environment")&&this.records.set(yn,xu(void 0,this));let o=this.records.get(zh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(qb,Ti,{self:!0}))}retrieve(e,t){let i=Dc(t)||0;try{return this.get(e,Oc,i)}catch(r){if(nu(r))return r;throw r}}destroy(){Lh(this),this._destroyed=!0;let e=He(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(e)}}onDestroy(e){return Lh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Lh(this);let t=bo(this),i=Si(void 0),r;try{return e()}finally{bo(t),Si(i)}}get(e,t=Oc,i){if(Lh(this),e.hasOwnProperty(BS))return e[BS](this);let r=Dc(i),o,a=bo(this),l=Si(void 0);try{if(!(r&4)){let f=this.records.get(e);if(f===void 0){let g=OF(e)&&Bh(e);g&&this.injectableDefInScope(g)?f=xu(Sb(e),mm):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f,r)}let u=r&2?jh():this.parent;return t=r&8&&t===Oc?null:t,u.get(e,t)}catch(u){let f=_F(u);throw f===-200||f===-201?new le(f,null):u}finally{Si(l),bo(a)}}resolveInjectorInitializers(){let e=He(null),t=bo(this),i=Si(void 0),r;try{let o=this.get(Ea,Ti,{self:!0});for(let a of o)a()}finally{bo(t),Si(i),He(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(ms(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=oi(e);let t=Ac(e)?e:oi(e&&e.provide),i=PF(e);if(!Ac(e)&&e.multi===!0){let r=this.records.get(t);r||(r=xu(void 0,mm,!0),r.factory=()=>Pb(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=He(null);try{if(t.value===US)throw jb(ms(e));return t.value===mm&&(t.value=US,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&TF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{He(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=oi(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Sb(n){let e=Bh(n),t=e!==null?e.factory:ba(n);if(t!==null)return t;if(n instanceof _e)throw new le(204,!1);if(n instanceof Function)return MF(n);throw new le(204,!1)}function MF(n){if(n.length>0)throw new le(204,!1);let t=pF(n);return t!==null?()=>t.factory(n):()=>new n}function PF(n){if(XS(n))return xu(void 0,n.useValue);{let e=Qb(n);return xu(e,mm)}}function Qb(n,e,t){let i;if(Ac(n)){let r=oi(n);return ba(r)||Sb(r)}else if(XS(n))i=()=>oi(n.useValue);else if(IF(n))i=()=>n.useFactory(...Pb(n.deps||[]));else if(EF(n))i=(r,o)=>Be(oi(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=oi(n&&(n.useClass||n.provide));if(SF(n))i=()=>new r(...Pb(n.deps));else return ba(r)||Sb(r)}return i}function Lh(n){if(n.destroyed)throw new le(205,!1)}function xu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function SF(n){return!!n.deps}function TF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function OF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Tb(n,e){for(let t of n)Array.isArray(t)?Tb(t,e):t&&Fb(t)?Tb(t.\u0275providers,e):e(t)}function In(n,e){let t;n instanceof kc?(Lh(n),t=n):t=new Mb(n);let i,r=bo(t),o=Si(void 0);try{return e()}finally{bo(r),Si(o)}}function tT(){return GS()!==void 0||Ag()!=null}var jr=0,Se=1,$e=2,Un=3,_r=4,vr=5,Cu=6,Eu=7,bn=8,bs=9,xo=10,Bt=11,Iu=12,Jb=13,Nc=14,tr=15,Ia=16,Lc=17,wo=18,Hh=19,Xb=20,gs=21,Mm=22,$h=23,nr=24,Fc=25,Vc=26,sn=27,nT=1,e1=6,Ma=7,Gh=8,Bc=9,hn=10;function Co(n){return Array.isArray(n)&&typeof n[nT]=="object"}function Hr(n){return Array.isArray(n)&&n[nT]===!0}function t1(n){return(n.flags&4)!==0}function Pa(n){return n.componentOffset>-1}function Mu(n){return(n.flags&1)===1}function Eo(n){return!!n.template}function Pu(n){return(n[$e]&512)!==0}function Uc(n){return(n[$e]&256)===256}var n1="svg",iT="math";function yr(n){for(;Array.isArray(n);)n=n[jr];return n}function i1(n,e){return yr(e[n])}function $r(n,e){return yr(e[n.index])}function qh(n,e){return n.data[e]}function Pm(n,e){return n[e]}function r1(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function br(n,e){let t=e[n];return Co(t)?t:t[jr]}function rT(n){return(n[$e]&4)===4}function Sm(n){return(n[$e]&128)===128}function oT(n){return Hr(n[Un])}function xr(n,e){return e==null?null:n[e]}function o1(n){n[Lc]=0}function s1(n){n[$e]&1024||(n[$e]|=1024,Sm(n)&&Su(n))}function sT(n,e){for(;n>0;)e=e[Nc],n--;return e}function Wh(n){return!!(n[$e]&9216||n[nr]?.dirty)}function Tm(n){n[xo].changeDetectionScheduler?.notify(8),n[$e]&64&&(n[$e]|=1024),Wh(n)&&Su(n)}function Su(n){n[xo].changeDetectionScheduler?.notify(0);let e=xa(n);for(;e!==null&&!(e[$e]&8192||(e[$e]|=8192,!Sm(e)));)e=xa(e)}function a1(n,e){if(Uc(n))throw new le(911,!1);n[gs]===null&&(n[gs]=[]),n[gs].push(e)}function aT(n,e){if(n[gs]===null)return;let t=n[gs].indexOf(e);t!==-1&&n[gs].splice(t,1)}function xa(n){let e=n[Un];return Hr(e)?e[Un]:e}function c1(n){return n[Eu]??=[]}function l1(n){return n.cleanup??=[]}function cT(n,e,t,i){let r=c1(e);r.push(t),n.firstCreatePass&&l1(n).push(i,r.length-1)}var Qe={lFrame:wT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ob=!1;function lT(){return Qe.lFrame.elementDepthCount}function uT(){Qe.lFrame.elementDepthCount++}function u1(){Qe.lFrame.elementDepthCount--}function Om(){return Qe.bindingsEnabled}function dT(){return Qe.skipHydrationRootTNode!==null}function d1(n){return Qe.skipHydrationRootTNode===n}function h1(){Qe.skipHydrationRootTNode=null}function Le(){return Qe.lFrame.lView}function Xt(){return Qe.lFrame.tView}function z(n){return Qe.lFrame.contextLView=n,n[bn]}function j(n){return Qe.lFrame.contextLView=null,n}function Mn(){let n=f1();for(;n!==null&&n.type===64;)n=n.parent;return n}function f1(){return Qe.lFrame.currentTNode}function hT(){let n=Qe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Tu(n,e){let t=Qe.lFrame;t.currentTNode=n,t.isParent=e}function p1(){return Qe.lFrame.isParent}function fT(){Qe.lFrame.isParent=!1}function pT(){return Qe.lFrame.contextLView}function g1(){return Ob}function m1(n){let e=Ob;return Ob=n,e}function Kh(){let n=Qe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function gT(){return Qe.lFrame.bindingIndex}function mT(n){return Qe.lFrame.bindingIndex=n}function xs(){return Qe.lFrame.bindingIndex++}function Dm(n){let e=Qe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function _T(){return Qe.lFrame.inI18n}function vT(n,e){let t=Qe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Am(e)}function yT(){return Qe.lFrame.currentDirectiveIndex}function Am(n){Qe.lFrame.currentDirectiveIndex=n}function bT(n){let e=Qe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function _1(){return Qe.lFrame.currentQueryIndex}function km(n){Qe.lFrame.currentQueryIndex=n}function DF(n){let e=n[Se];return e.type===2?e.declTNode:e.type===1?n[vr]:null}function v1(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=DF(o),r===null||(o=o[Nc],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Qe.lFrame=xT();return i.currentTNode=e,i.lView=n,!0}function Rm(n){let e=xT(),t=n[Se];Qe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function xT(){let n=Qe.lFrame,e=n===null?null:n.child;return e===null?wT(n):e}function wT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function CT(){let n=Qe.lFrame;return Qe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var y1=CT;function Nm(){let n=CT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ET(n){return(Qe.lFrame.contextLView=sT(n,Qe.lFrame.contextLView))[bn]}function Io(){return Qe.lFrame.selectedIndex}function Sa(n){Qe.lFrame.selectedIndex=n}function Zh(){let n=Qe.lFrame;return qh(n.tView,n.selectedIndex)}function ne(){Qe.lFrame.currentNamespace=n1}function fe(){AF()}function AF(){Qe.lFrame.currentNamespace=null}function IT(){return Qe.lFrame.currentNamespace}var MT=!0;function Lm(){return MT}function Yh(n){MT=n}function Db(n,e=null,t=null,i){let r=b1(n,e,t,i);return r.resolveInjectorInitializers(),r}function b1(n,e=null,t=null,i,r=new Set){let o=[t||Ti,QS(n)];return i=i||(typeof n=="object"?void 0:ms(n)),new kc(o,e||jh(),i||null,r)}var Gt=class n{static THROW_IF_NOT_FOUND=Oc;static NULL=new Vh;static create(e,t){if(Array.isArray(e))return Db({name:""},t,e,"");{let i=e.name??"";return Db({name:i},e.parent,e.providers,i)}}static \u0275prov=he({token:n,providedIn:"any",factory:()=>Be(Gb)});static __NG_ELEMENT_ID__=-1},Pn=new _e(""),Gr=(()=>{class n{static __NG_ELEMENT_ID__=kF;static __NG_ENV_ID__=t=>t}return n})(),Ab=class extends Gr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Uc(this._lView)}onDestroy(e){let t=this._lView;return a1(t,e),()=>aT(t,e)}};function kF(){return new Ab(Le())}var Br=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Di=new _e("",{providedIn:"root",factory:()=>{let n=F(yn),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Br),e.handleError(t))}}}),PT={provide:Ea,useValue:()=>void F(Br),multi:!0};function x1(n){return typeof n=="function"&&n[hi]!==void 0}function Ut(n,e){let[t,i,r]=ab(n,e?.equal),o=t,a=o[hi];return o.set=i,o.update=r,o.asReadonly=ST.bind(o),o}function ST(){let n=this[hi];if(n.readonlyFn===void 0){let e=()=>this();e[hi]=n,n.readonlyFn=e}return n.readonlyFn}function w1(n){return x1(n)&&typeof n.set=="function"}var Fm=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=RF}return n})();function RF(){return new Fm(Le(),Mn())}var _s=class{},Vm=new _e("",{providedIn:"root",factory:()=>!1});var C1=new _e(""),E1=new _e(""),Mo=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new bt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ae(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ou=(()=>{class n{internalPendingTasks=F(Mo);scheduler=F(_s);errorHandler=F(Di);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})();function Qh(...n){}var I1=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>new kb})}return n})(),kb=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function Lu(n){return{toString:n}.toString()}var Bm="__parameters__";function UF(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function zF(n,e,t){return Lu(()=>{let i=UF(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return l.annotation=a,l;function l(u,f,g){let b=u.hasOwnProperty(Bm)?u[Bm]:Object.defineProperty(u,Bm,{value:[]})[Bm];for(;b.length<=g;)b.push(null);return(b[g]=b[g]||[]).push(a),u}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var cn=qS(zF("Optional"),8);function jF(n){return typeof n=="function"}var Ym=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function uO(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var To=(()=>{let n=()=>dO;return n.ngInherit=!0,n})();function dO(n){return n.type.prototype.ngOnChanges&&(n.setInput=$F),HF}function HF(){let n=fO(this),e=n?.current;if(e){let t=n.previous;if(t===Ca)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function $F(n,e,t,i,r){let o=this.declaredInputs[i],a=fO(n)||GF(n,{previous:Ca,current:null}),l=a.current||(a.current={}),u=a.previous,f=u[o];l[o]=new Ym(f&&f.currentValue,t,u===Ca),uO(n,e,r,t)}var hO="__ngSimpleChanges__";function fO(n){return n[hO]||null}function GF(n,e){return n[hO]=e}var TT=[];var Lt=function(n,e=null,t){for(let i=0;i<TT.length;i++){let r=TT[i];r(n,e,t)}};function qF(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=dO(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function pO(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:g}=o;a&&(n.contentHooks??=[]).push(-t,a),l&&((n.contentHooks??=[]).push(t,l),(n.contentCheckHooks??=[]).push(t,l)),u&&(n.viewHooks??=[]).push(-t,u),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),g!=null&&(n.destroyHooks??=[]).push(t,g)}}function Gm(n,e,t){gO(n,e,3,t)}function qm(n,e,t,i){(n[$e]&3)===t&&gO(n,e,t,i)}function M1(n,e){let t=n[$e];(t&3)===e&&(t&=16383,t+=1,n[$e]=t)}function gO(n,e,t,i){let r=i!==void 0?n[Lc]&65535:0,o=i??-1,a=e.length-1,l=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(l=e[u],i!=null&&l>=i)break}else e[u]<0&&(n[Lc]+=65536),(l<o||o==-1)&&(WF(n,t,e,u),n[Lc]=(n[Lc]&4294901760)+u+2),u++}function OT(n,e){Lt(4,n,e);let t=He(null);try{e.call(n)}finally{He(t),Lt(5,n,e)}}function WF(n,e,t,i){let r=t[i]<0,o=t[i+1],a=r?-t[i]:t[i],l=n[a];r?n[$e]>>14<n[Lc]>>16&&(n[$e]&3)===e&&(n[$e]+=16384,OT(l,o)):OT(l,o)}var Au=-1,jc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function KF(n){return(n.flags&8)!==0}function ZF(n){return(n.flags&16)!==0}function YF(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],a=t[i++],l=t[i++];n.setAttribute(e,a,l,o)}else{let o=r,a=t[++i];QF(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),i++}}return i}function mO(n){return n===3||n===4||n===6}function QF(n){return n.charCodeAt(0)===64}function ku(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?DT(n,t,r,null,e[++i]):DT(n,t,r,null,null))}}return n}function DT(n,e,t,i,r){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let l=n[o++];if(typeof l=="number"){if(l===e){a=-1;break}else if(l>e){a=o-1;break}}}for(;o<n.length;){let l=n[o];if(typeof l=="number")break;if(l===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function _O(n){return n!==Au}function Qm(n){return n&32767}function JF(n){return n>>16}function Jm(n,e){let t=JF(n),i=e;for(;t>0;)i=i[Nc],t--;return i}var F1=!0;function Xm(n){let e=F1;return F1=n,e}var XF=256,vO=XF-1,yO=5,e6=0,Po={};function t6(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Rc)&&(i=t[Rc]),i==null&&(i=t[Rc]=e6++);let r=i&vO,o=1<<r;e.data[n+(r>>yO)]|=o}function e_(n,e){let t=bO(n,e);if(t!==-1)return t;let i=e[Se];i.firstCreatePass&&(n.injectorIndex=e.length,P1(i.data,n),P1(e,null),P1(i.blueprint,null));let r=_x(n,e),o=n.injectorIndex;if(_O(r)){let a=Qm(r),l=Jm(r,e),u=l[Se].data;for(let f=0;f<8;f++)e[o+f]=l[a+f]|u[a+f]}return e[o+8]=r,o}function P1(n,e){n.push(0,0,0,0,0,0,0,0,e)}function bO(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function _x(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=IO(r),i===null)return Au;if(t++,r=r[Nc],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Au}function V1(n,e,t){t6(n,e,t)}function n6(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(mO(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function xO(n,e,t){if(t&8||n!==void 0)return n;wm(e,"NodeInjector")}function wO(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[bs],o=Si(void 0);try{return r?r.get(e,i,t&8):Hb(e,i,t&8)}finally{Si(o)}}return xO(i,e,t)}function CO(n,e,t,i=0,r){if(n!==null){if(e[$e]&2048&&!(i&2)){let a=s6(n,e,t,i,Po);if(a!==Po)return a}let o=EO(n,e,t,i,Po);if(o!==Po)return o}return wO(e,t,i,r)}function EO(n,e,t,i,r){let o=r6(t);if(typeof o=="function"){if(!v1(e,n,i))return i&1?xO(r,t,i):wO(e,t,i,r);try{let a;if(a=o(i),a==null&&!(i&8))wm(t);else return a}finally{y1()}}else if(typeof o=="number"){let a=null,l=bO(n,e),u=Au,f=i&1?e[tr][vr]:null;for((l===-1||i&4)&&(u=l===-1?_x(n,e):e[l+8],u===Au||!kT(i,!1)?l=-1:(a=e[Se],l=Qm(u),e=Jm(u,e)));l!==-1;){let g=e[Se];if(AT(o,l,g.data)){let b=i6(l,e,t,a,i,f);if(b!==Po)return b}u=e[l+8],u!==Au&&kT(i,e[Se].data[l+8]===f)&&AT(o,l,e)?(a=g,l=Qm(u),e=Jm(u,e)):l=-1}}return r}function i6(n,e,t,i,r,o){let a=e[Se],l=a.data[n+8],u=i==null?Pa(l)&&F1:i!=a&&(l.type&3)!==0,f=r&1&&o===l,g=Wm(l,a,t,u,f);return g!==null?ef(e,a,g,l,r):Po}function Wm(n,e,t,i,r){let o=n.providerIndexes,a=e.data,l=o&1048575,u=n.directiveStart,f=n.directiveEnd,g=o>>20,b=i?l:l+g,E=r?l+g:f;for(let I=b;I<E;I++){let R=a[I];if(I<u&&t===R||I>=u&&R.type===t)return I}if(r){let I=a[u];if(I&&Eo(I)&&I.type===t)return u}return null}function ef(n,e,t,i,r){let o=n[t],a=e.data;if(o instanceof jc){let l=o;if(l.resolving){let I=jS(a[t]);throw jb(I)}let u=Xm(l.canSeeViewProviders);l.resolving=!0;let f=a[t].type||a[t],g,b=l.injectImpl?Si(l.injectImpl):null,E=v1(n,i,0);try{o=n[t]=l.factory(void 0,r,a,n,i),e.firstCreatePass&&t>=i.directiveStart&&qF(t,a[t],e)}finally{b!==null&&Si(b),Xm(u),l.resolving=!1,y1()}}return o}function r6(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Rc)?n[Rc]:void 0;return typeof e=="number"?e>=0?e&vO:o6:e}function AT(n,e,t){let i=1<<n;return!!(t[e+(n>>yO)]&i)}function kT(n,e){return!(n&2)&&!(n&1&&e)}var zc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return CO(this._tNode,this._lView,e,Dc(i),t)}};function o6(){return new zc(Mn(),Le())}function Oo(n){return Lu(()=>{let e=n.prototype.constructor,t=e[Fh]||B1(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Fh]||B1(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function B1(n){return Nb(n)?()=>{let e=B1(oi(n));return e&&e()}:ba(n)}function s6(n,e,t,i,r){let o=n,a=e;for(;o!==null&&a!==null&&a[$e]&2048&&!Pu(a);){let l=EO(o,a,t,i|2,Po);if(l!==Po)return l;let u=o.parent;if(!u){let f=a[Xb];if(f){let g=f.get(t,Po,i);if(g!==Po)return g}u=IO(a),a=a[Nc]}o=u}return r}function IO(n){let e=n[Se],t=e.type;return t===2?e.declTNode:t===1?n[vr]:null}function af(n){return n6(Mn(),n)}function a6(){return Fu(Mn(),Le())}function Fu(n,e){return new fi($r(n,e))}var fi=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=a6}return n})();function c6(n){return n instanceof fi?n.nativeElement:n}function l6(){return this._results[Symbol.iterator]()}var t_=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Jt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=KS(e);(this._changesDetected=!WS(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=l6};function MO(n){return(n.flags&128)===128}var vx=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(vx||{}),PO=new Map,u6=0;function d6(){return u6++}function h6(n){PO.set(n[Hh],n)}function U1(n){PO.delete(n[Hh])}var RT="__ngContext__";function Ru(n,e){Co(e)?(n[RT]=e[Hh],h6(e)):n[RT]=e}function SO(n){return OO(n[Iu])}function TO(n){return OO(n[_r])}function OO(n){for(;n!==null&&!Hr(n);)n=n[_r];return n}var z1;function yx(n){z1=n}function bx(){if(z1!==void 0)return z1;if(typeof document<"u")return document;throw new le(210,!1)}var v_=new _e("",{providedIn:"root",factory:()=>f6}),f6="ng",y_=new _e(""),Cs=new _e("",{providedIn:"platform",factory:()=>"unknown"});var b_=new _e("",{providedIn:"root",factory:()=>bx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var p6="h",g6="b";var DO="r";var AO="di";var kO=!1,RO=new _e("",{providedIn:"root",factory:()=>kO});var xx=new _e("");var m6=(n,e,t,i)=>{};function _6(n,e,t,i){m6(n,e,t,i)}function wx(n){return(n.flags&32)===32}var v6=()=>null;function NO(n,e,t=!1){return v6(n,e,t)}function LO(n,e){let t=n.contentQueries;if(t!==null){let i=He(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],a=t[r+1];if(a!==-1){let l=n.data[a];km(o),l.contentQueries(2,e[a],a)}}}finally{He(i)}}}function j1(n,e,t){km(0);let i=He(null);try{e(n,t)}finally{He(i)}}function Cx(n,e,t){if(t1(e)){let i=He(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let l=n.data[a];if(l.contentQueries){let u=t[a];l.contentQueries(1,u,a)}}}finally{He(i)}}}var ws=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(ws||{}),Um;function y6(){if(Um===void 0&&(Um=null,Ur.trustedTypes))try{Um=Ur.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Um}function x_(n){return y6()?.createHTML(n)||n}var zm;function FO(){if(zm===void 0&&(zm=null,Ur.trustedTypes))try{zm=Ur.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zm}function NT(n){return FO()?.createHTML(n)||n}function LT(n){return FO()?.createScriptURL(n)||n}var n_=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ym})`}};function Kc(n){return n instanceof n_?n.changingThisBreaksApplicationSecurity:n}function w_(n,e){let t=VO(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ym})`)}return t===e}function VO(n){return n instanceof n_&&n.getTypeName()||null}function b6(n){let e=new $1(n);return x6()?new H1(e):e}var H1=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(x_(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},$1=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=x_(e),t}};function x6(){try{return!!new window.DOMParser().parseFromString(x_(""),"text/html")}catch{return!1}}var w6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ex(n){return n=String(n),n.match(w6)?n:"unsafe:"+n}function Es(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function cf(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var BO=Es("area,br,col,hr,img,wbr"),UO=Es("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zO=Es("rp,rt"),C6=cf(zO,UO),E6=cf(UO,Es("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),I6=cf(zO,Es("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),FT=cf(BO,E6,I6,C6),jO=Es("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),M6=Es("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),P6=Es("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),S6=cf(jO,M6,P6),T6=Es("script,style,template"),G1=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=A6(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=D6(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=VT(e).toLowerCase();if(!FT.hasOwnProperty(t))return this.sanitizedSomething=!0,!T6.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),a=o.name,l=a.toLowerCase();if(!S6.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let u=o.value;jO[l]&&(u=Ex(u)),this.buf.push(" ",a,'="',BT(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=VT(e).toLowerCase();FT.hasOwnProperty(t)&&!BO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(BT(e))}};function O6(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function D6(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw HO(e);return e}function A6(n){let e=n.firstChild;if(e&&O6(n,e))throw HO(e);return e}function VT(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function HO(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var k6=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,R6=/([^\#-~ |!])/g;function BT(n){return n.replace(/&/g,"&amp;").replace(k6,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(R6,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var jm;function $O(n,e){let t=null;try{jm=jm||b6(n);let i=e?String(e):"";t=jm.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=jm.getInertBodyElement(i)}while(i!==o);let l=new G1().sanitizeChildren(UT(t)||t);return x_(l)}finally{if(t){let i=UT(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function UT(n){return"content"in n&&N6(n)?n.content:null}function N6(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var lf=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(lf||{});function C_(n){let e=Mx();return e?NT(e.sanitize(lf.HTML,n)||""):w_(n,"HTML")?NT(Kc(n)):$O(bx(),vs(n))}function Zt(n){let e=Mx();return e?e.sanitize(lf.URL,n)||"":w_(n,"URL")?Kc(n):Ex(vs(n))}function GO(n){let e=Mx();if(e)return LT(e.sanitize(lf.RESOURCE_URL,n)||"");if(w_(n,"ResourceURL"))return LT(Kc(n));throw new le(904,!1)}function L6(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?GO:Zt}function Ix(n,e,t){return L6(e,t)(n)}function Mx(){let n=Le();return n&&n[xo].sanitizer}var F6=/^>|^->|<!--|-->|--!>|<!-$/g,V6=/(<|>)/g,B6="\u200B$1\u200B";function U6(n){return n.replace(F6,e=>e.replace(V6,B6))}function qO(n){return n instanceof Function?n():n}function z6(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var WO="ng-template";function j6(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&z6(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(Px(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Px(n){return n.type===4&&n.value!==WO}function H6(n,e,t){let i=n.type===4&&!t?WO:n.value;return e===i}function $6(n,e,t){let i=4,r=n.attrs,o=r!==null?W6(r):0,a=!1;for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="number"){if(!a&&!qr(i)&&!qr(u))return!1;if(a&&qr(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!H6(n,u,t)||u===""&&e.length===1){if(qr(i))return!1;a=!0}}else if(i&8){if(r===null||!j6(n,r,u,t)){if(qr(i))return!1;a=!0}}else{let f=e[++l],g=G6(u,r,Px(n),t);if(g===-1){if(qr(i))return!1;a=!0;continue}if(f!==""){let b;if(g>o?b="":b=r[g+1].toLowerCase(),i&2&&f!==b){if(qr(i))return!1;a=!0}}}}return qr(i)||a}function qr(n){return(n&1)===0}function G6(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let a=e[r];if(a===n)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return K6(e,n)}function q6(n,e,t=!1){for(let i=0;i<e.length;i++)if($6(n,e[i],t))return!0;return!1}function W6(n){for(let e=0;e<n.length;e++){let t=n[e];if(mO(t))return e}return n.length}function K6(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function zT(n,e){return n?":not("+e.trim()+")":e}function Z6(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(i&2){let l=n[++t];r+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!qr(a)&&(e+=zT(o,r),r=""),i=a,o=o||!qr(i);t++}return r!==""&&(e+=zT(o,r)),e}function Y6(n){return n.map(Z6).join(",")}function Q6(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!qr(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var pi={};function J6(n,e){return n.createText(e)}function X6(n,e,t){n.setValue(e,t)}function eV(n,e){return n.createComment(U6(e))}function KO(n,e,t){return n.createElement(e,t)}function i_(n,e,t,i,r){n.insertBefore(e,t,i,r)}function ZO(n,e,t){n.appendChild(e,t)}function jT(n,e,t,i,r){i!==null?i_(n,e,t,i,r):ZO(n,e,t)}function YO(n,e,t,i){n.removeChild(null,e,t,i)}function tV(n,e,t){n.setAttribute(e,"style",t)}function nV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function QO(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&YF(n,e,i),r!==null&&nV(n,e,r),o!==null&&tV(n,e,o)}function Sx(n,e,t,i,r,o,a,l,u,f,g){let b=sn+i,E=b+r,I=iV(b,E),R=typeof f=="function"?f():f;return I[Se]={type:n,blueprint:I,template:t,queries:null,viewQuery:l,declTNode:e,data:I.slice().fill(null,b),bindingStartIndex:b,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:R,incompleteFirstPass:!1,ssrId:g}}function iV(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:pi);return t}function rV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Sx(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Tx(n,e,t,i,r,o,a,l,u,f,g){let b=e.blueprint.slice();return b[jr]=r,b[$e]=i|4|128|8|64|1024,(f!==null||n&&n[$e]&2048)&&(b[$e]|=2048),o1(b),b[Un]=b[Nc]=n,b[bn]=t,b[xo]=a||n&&n[xo],b[Bt]=l||n&&n[Bt],b[bs]=u||n&&n[bs]||null,b[vr]=o,b[Hh]=d6(),b[Cu]=g,b[Xb]=f,b[tr]=e.type==2?n[tr]:b,b}function oV(n,e,t){let i=$r(e,n),r=rV(t),o=n[xo].rendererFactory,a=Ox(n,Tx(n,r,null,JO(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=a}function JO(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function XO(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Ox(n,e){return n[Iu]?n[Jb][_r]=e:n[Iu]=e,n[Jb]=e,e}function C(n=1){e2(Xt(),Le(),Io()+n,!1)}function e2(n,e,t,i){if(!i)if((e[$e]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Gm(e,o,t)}else{let o=n.preOrderHooks;o!==null&&qm(e,o,0,t)}Sa(t)}var E_=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(E_||{});function q1(n,e,t,i){let r=He(null);try{let[o,a,l]=n.inputs[t],u=null;(a&E_.SignalBased)!==0&&(u=e[o][hi]),u!==null&&u.transformFn!==void 0?i=u.transformFn(i):l!==null&&(i=l.call(e,i)),n.setInput!==null?n.setInput(e,u,i,t,o):uO(e,u,o,i)}finally{He(r)}}var So=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(So||{}),sV;function Dx(n,e){return sV(n,e)}var Hc=new Set,I_=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(I_||{}),Zc=new _e(""),HT=new Set;function Do(n){HT.has(n)||(HT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var t2=!1,W1=class extends Jt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,tT()&&(this.destroyRef=F(Gr,{optional:!0})??void 0,this.pendingTasks=F(Mo,{optional:!0})??void 0)}emit(e){let t=He(null);try{super.next(e)}finally{He(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let l=super.subscribe({next:r,error:o,complete:a});return e instanceof dn&&e.add(l),l}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},an=W1;function n2(n){let e,t;function i(){n=Qh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function $T(n){return queueMicrotask(()=>n()),()=>{n=Qh}}var Ax="isAngularZone",r_=Ax+"_ID",aV=0,mt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new an(!1);onMicrotaskEmpty=new an(!1);onStable=new an(!1);onError=new an(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=t2}=e;if(typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=o,uV(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ax)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new le(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,cV,Qh,Qh);try{return o.runTask(a,t,i)}finally{o.cancelTask(a)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},cV={};function kx(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){n2(()=>{n.callbackScheduled=!1,K1(n),n.isCheckStableRunning=!0,kx(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),K1(n)}function uV(n){let e=()=>{lV(n)},t=aV++;n._inner=n._inner.fork({name:"angular",properties:{[Ax]:!0,[r_]:t,[r_+t]:!0},onInvokeTask:(i,r,o,a,l,u)=>{if(dV(u))return i.invokeTask(o,a,l,u);try{return GT(n),i.invokeTask(o,a,l,u)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),qT(n)}},onInvoke:(i,r,o,a,l,u,f)=>{try{return GT(n),i.invoke(o,a,l,u,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!hV(u)&&e(),qT(n)}},onHasTask:(i,r,o,a)=>{i.hasTask(o,a),r===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,K1(n),kx(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,o,a)=>(i.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function K1(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function GT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function qT(n){n._nesting--,kx(n)}var o_=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new an;onMicrotaskEmpty=new an;onStable=new an;onError=new an;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function dV(n){return i2(n,"__ignore_ng_zone__")}function hV(n){return i2(n,"__scheduler_tick__")}function i2(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Rx=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),r2=[0,1,2,3],o2=(()=>{class n{ngZone=F(mt);scheduler=F(_s);errorHandler=F(Br,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F(Zc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Lt(16),this.executing=!0;for(let i of r2)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Lt(17)}register(t){let{view:i}=t;i!==void 0?((i[Fc]??=[]).push(t),Su(i),i[$e]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(I_.AFTER_NEXT_RENDER,t):t()}static \u0275prov=he({token:n,providedIn:"root",factory:()=>new n})}return n})(),s_=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,a=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Fc];e&&(this.view[Fc]=e.filter(t=>t!==this))}};function uf(n,e){let t=e?.injector??F(Gt);return Do("NgAfterNextRender"),pV(n,t,e,!0)}function fV(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function pV(n,e,t,i){let r=e.get(Rx);r.impl??=e.get(o2);let o=e.get(Zc,null,{optional:!0}),a=t?.manualCleanup!==!0?e.get(Gr):null,l=e.get(Fm,null,{optional:!0}),u=new s_(r.impl,fV(n),l?.view,i,a,o?.snapshot(null));return r.impl.register(u),u}var s2=new _e("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function a2(n,e,t){let i=n.get(s2);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function gV(n,e){let t=n.get(s2);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)t.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function mV(n,e){for(let[t,i]of e)a2(n,i.animateFns)}function WT(n,e,t,i){let r=n?.[Vc]?.enter;e!==null&&r&&r.has(t.index)&&mV(i,r)}function Du(n,e,t,i,r,o,a,l){if(r!=null){let u,f=!1;Hr(r)?u=r:Co(r)&&(f=!0,r=r[jr]);let g=yr(r);n===0&&i!==null?(WT(l,i,o,t),a==null?ZO(e,i,g):i_(e,i,g,a||null,!0)):n===1&&i!==null?(WT(l,i,o,t),i_(e,i,g,a||null,!0)):n===2?KT(l,o,t,b=>{YO(e,g,f,b)}):n===3&&KT(l,o,t,()=>{e.destroyNode(g)}),u!=null&&TV(e,n,t,u,o,i,a)}}function _V(n,e){c2(n,e),e[jr]=null,e[vr]=null}function vV(n,e,t,i,r,o){i[jr]=r,i[vr]=e,P_(n,i,t,1,r,o)}function c2(n,e){e[xo].changeDetectionScheduler?.notify(9),P_(n,e,e[Bt],2,null,null)}function yV(n){let e=n[Iu];if(!e)return S1(n[Se],n);for(;e;){let t=null;if(Co(e))t=e[Iu];else{let i=e[hn];i&&(t=i)}if(!t){for(;e&&!e[_r]&&e!==n;)Co(e)&&S1(e[Se],e),e=e[Un];e===null&&(e=n),Co(e)&&S1(e[Se],e),t=e&&e[_r]}e=t}}function Nx(n,e){let t=n[Bc],i=t.indexOf(e);t.splice(i,1)}function M_(n,e){if(Uc(e))return;let t=e[Bt];t.destroyNode&&P_(n,e,t,3,null,null),yV(e)}function S1(n,e){if(Uc(e))return;let t=He(null);try{e[$e]&=-129,e[$e]|=256,e[nr]&&Th(e[nr]),wV(n,e),xV(n,e),e[Se].type===1&&e[Bt].destroy();let i=e[Ia];if(i!==null&&Hr(e[Un])){i!==e[Un]&&Nx(i,e);let r=e[wo];r!==null&&r.detachView(n)}U1(e)}finally{He(t)}}function KT(n,e,t,i){let r=n?.[Vc];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&Hc.add(n),a2(t,()=>{if(r.leave&&r.leave.has(e.index)){let a=r.leave.get(e.index),l=[];if(a){for(let u=0;u<a.animateFns.length;u++){let f=a.animateFns[u],{promise:g}=f();l.push(g)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(l),bV(n,i)}else n&&Hc.delete(n),i(!1)},r)}function bV(n,e){let t=n[Vc]?.running;if(t){t.then(()=>{n[Vc].running=void 0,Hc.delete(n),e(!0)});return}e(!1)}function xV(n,e){let t=n.cleanup,i=e[Eu];if(t!==null)for(let a=0;a<t.length-1;a+=2)if(typeof t[a]=="string"){let l=t[a+3];l>=0?i[l]():i[-l].unsubscribe(),a+=2}else{let l=i[t[a+1]];t[a].call(l)}i!==null&&(e[Eu]=null);let r=e[gs];if(r!==null){e[gs]=null;for(let a=0;a<r.length;a++){let l=r[a];l()}}let o=e[$h];if(o!==null){e[$h]=null;for(let a of o)a.destroy()}}function wV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof jc)){let o=t[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let l=r[o[a]],u=o[a+1];Lt(4,l,u);try{u.call(l)}finally{Lt(5,l,u)}}else{Lt(4,r,o);try{o.call(r)}finally{Lt(5,r,o)}}}}}function CV(n,e,t){return EV(n,e.parent,t)}function EV(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[jr];if(Pa(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===ws.None||r===ws.Emulated)return null}return $r(i,t)}function IV(n,e,t){return PV(n,e,t)}function MV(n,e,t){return n.type&40?$r(n,t):null}var PV=MV,ZT;function Lx(n,e,t,i){let r=CV(n,i,e),o=e[Bt],a=i.parent||e[vr],l=IV(a,i,e);if(r!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)jT(o,r,t[u],l,!1);else jT(o,r,t,l,!1);ZT!==void 0&&ZT(o,i,e,t,r)}function Jh(n,e){if(e!==null){let t=e.type;if(t&3)return $r(e,n);if(t&4)return Z1(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Jh(n,i);{let r=n[e.index];return Hr(r)?Z1(-1,r):yr(r)}}else{if(t&128)return Jh(n,e.next);if(t&32)return Dx(e,n)()||yr(n[e.index]);{let i=l2(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=xa(n[tr]);return Jh(r,i)}else return Jh(n,e.next)}}}return null}function l2(n,e){if(e!==null){let i=n[tr][vr],r=e.projection;return i.projection[r]}return null}function Z1(n,e){let t=hn+n+1;if(t<e.length){let i=e[t],r=i[Se].firstChild;if(r!==null)return Jh(i,r)}return e[Ma]}function Fx(n,e,t,i,r,o,a){for(;t!=null;){let l=i[bs];if(t.type===128){t=t.next;continue}let u=i[t.index],f=t.type;if(a&&e===0&&(u&&Ru(yr(u),i),t.flags|=2),!wx(t))if(f&8)Fx(n,e,t.child,i,r,o,!1),Du(e,n,l,r,u,t,o,i);else if(f&32){let g=Dx(t,i),b;for(;b=g();)Du(e,n,l,r,b,t,o,i);Du(e,n,l,r,u,t,o,i)}else f&16?SV(n,e,i,t,r,o):Du(e,n,l,r,u,t,o,i);t=a?t.projectionNext:t.next}}function P_(n,e,t,i,r,o){Fx(t,i,n.firstChild,e,r,o,!1)}function SV(n,e,t,i,r,o){let a=t[tr],u=a[vr].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let g=u[f];Du(e,n,t[bs],r,g,i,o,t)}else{let f=u,g=a[Un];MO(i)&&(f.flags|=128),Fx(n,e,f,g,r,o,!0)}}function TV(n,e,t,i,r,o,a){let l=i[Ma],u=yr(i);l!==u&&Du(e,n,t,o,l,r,a);for(let f=hn;f<i.length;f++){let g=i[f];P_(g[Se],g,n,e,o,l)}}function OV(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:So.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=So.Important),n.setStyle(t,i,r,o))}}function u2(n,e,t,i,r){let o=Io(),a=i&2;try{Sa(-1),a&&e.length>sn&&e2(n,e,sn,!1),Lt(a?2:0,r,t),t(i,r)}finally{Sa(o),Lt(a?3:1,r,t)}}function S_(n,e,t){LV(n,e,t),(t.flags&64)===64&&FV(n,e,t)}function df(n,e,t=$r){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],l=a===-1?t(e,n):n[a];n[r++]=l}}}function DV(n,e,t,i){let o=i.get(RO,kO)||t===ws.ShadowDom,a=n.selectRootElement(e,o);return AV(a),a}function AV(n){kV(n)}var kV=()=>null;function RV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function d2(n,e,t,i,r,o){let a=e[Se];if(zx(n,a,e,t,i)){Pa(n)&&NV(e,n.index);return}n.type&3&&(t=RV(t)),h2(n,e,t,i,r,o)}function h2(n,e,t,i,r,o){if(n.type&3){let a=$r(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(a,t,i)}else n.type&12}function NV(n,e){let t=br(e,n);t[$e]&16||(t[$e]|=64)}function LV(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Pa(t)&&oV(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||e_(t,e);let o=t.initialInputs;for(let a=i;a<r;a++){let l=n.data[a],u=ef(e,n,a,t);if(Ru(u,e),o!==null&&zV(e,a-i,u,l,t,o),Eo(l)){let f=br(t.index,e);f[bn]=ef(e,n,a,t)}}}function FV(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,a=yT();try{Sa(o);for(let l=i;l<r;l++){let u=n.data[l],f=e[l];Am(l),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&VV(u,f)}}finally{Sa(-1),Am(a)}}function VV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Vx(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];q6(e,o.selectors,!1)&&(i??=[],Eo(o)?i.unshift(o):i.push(o))}return i}function BV(n,e,t,i,r,o){let a=$r(n,e);UV(e[Bt],a,o,n.value,t,i,r)}function UV(n,e,t,i,r,o,a){if(o==null)n.removeAttribute(e,r,t);else{let l=a==null?vs(o):a(o,i||"",r);n.setAttribute(e,r,l,t)}}function zV(n,e,t,i,r,o){let a=o[e];if(a!==null)for(let l=0;l<a.length;l+=2){let u=a[l],f=a[l+1];q1(i,t,u,f)}}function Bx(n,e,t,i,r){let o=sn+t,a=e[Se],l=r(a,e,n,i,t);e[o]=l,Tu(n,!0);let u=n.type===2;return u?(QO(e[Bt],l,n),(lT()===0||Mu(n))&&Ru(l,e),uT()):Ru(l,e),Lm()&&(!u||!wx(n))&&Lx(a,e,l,n),n}function Ux(n){let e=n;return p1()?fT():(e=e.parent,Tu(e,!1)),e}function jV(n,e){let t=n[bs];if(!t)return;let i;try{i=t.get(Di,null)}catch{i=null}i?.(e)}function zx(n,e,t,i,r){let o=n.inputs?.[i],a=n.hostDirectiveInputs?.[i],l=!1;if(a)for(let u=0;u<a.length;u+=2){let f=a[u],g=a[u+1],b=e.data[f];q1(b,t[f],g,r),l=!0}if(o)for(let u of o){let f=t[u],g=e.data[u];q1(g,f,i,r),l=!0}return l}function HV(n,e){let t=br(e,n),i=t[Se];$V(i,t);let r=t[jr];r!==null&&t[Cu]===null&&(t[Cu]=NO(r,t[bs])),Lt(18),jx(i,t,t[bn]),Lt(19,t[bn])}function $V(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function jx(n,e,t){Rm(e);try{let i=n.viewQuery;i!==null&&j1(1,i,t);let r=n.template;r!==null&&u2(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[wo]?.finishViewCreation(n),n.staticContentQueries&&LO(n,e),n.staticViewQueries&&j1(2,n.viewQuery,t);let o=n.components;o!==null&&GV(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[$e]&=-5,Nm()}}function GV(n,e){for(let t=0;t<e.length;t++)HV(n,e[t])}function T_(n,e,t,i){let r=He(null);try{let o=e.tView,l=n[$e]&4096?4096:16,u=Tx(n,o,t,l,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[e.index];u[Ia]=f;let g=n[wo];return g!==null&&(u[wo]=g.createEmbeddedView(o)),jx(o,u,t),u}finally{He(r)}}function tf(n,e){return!e||e.firstChild===null||MO(n)}function nf(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(yr(o)),Hr(o)&&f2(o,i);let a=t.type;if(a&8)nf(n,e,t.child,i);else if(a&32){let l=Dx(t,e),u;for(;u=l();)i.push(u)}else if(a&16){let l=l2(e,t);if(Array.isArray(l))i.push(...l);else{let u=xa(e[tr]);nf(u[Se],u,l,i,!0)}}t=r?t.projectionNext:t.next}return i}function f2(n,e){for(let t=hn;t<n.length;t++){let i=n[t],r=i[Se].firstChild;r!==null&&nf(i[Se],i,r,e)}n[Ma]!==n[jr]&&e.push(n[Ma])}function p2(n){if(n[Fc]!==null){for(let e of n[Fc])e.impl.addSequence(e);n[Fc].length=0}}var g2=[];function qV(n){return n[nr]??WV(n)}function WV(n){let e=g2.pop()??Object.create(ZV);return e.lView=n,e}function KV(n){n.lView[nr]!==n&&(n.lView=null,g2.push(n))}var ZV=ye(X({},iu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Su(n.lView)},consumerOnSignalRead(){this.lView[nr]=this}});function YV(n){let e=n[nr]??Object.create(QV);return e.lView=n,e}var QV=ye(X({},iu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=xa(n.lView);for(;e&&!m2(e[Se]);)e=xa(e);e&&s1(e)},consumerOnSignalRead(){this.lView[nr]=this}});function m2(n){return n.type!==2}function _2(n){if(n[$h]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[$h])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[$e]&8192)}}var JV=100;function v2(n,e=0){let i=n[xo].rendererFactory,r=!1;r||i.begin?.();try{XV(n,e)}finally{r||i.end?.()}}function XV(n,e){let t=g1();try{m1(!0),Y1(n,e);let i=0;for(;Wh(n);){if(i===JV)throw new le(103,!1);i++,Y1(n,1)}}finally{m1(t)}}function e8(n,e,t,i){if(Uc(e))return;let r=e[$e],o=!1,a=!1;Rm(e);let l=!0,u=null,f=null;o||(m2(n)?(f=qV(e),u=ou(f)):Fg()===null?(l=!1,f=YV(e),u=ou(f)):e[nr]&&(Th(e[nr]),e[nr]=null));try{o1(e),mT(n.bindingStartIndex),t!==null&&u2(n,e,t,2,i);let g=(r&3)===3;if(!o)if(g){let I=n.preOrderCheckHooks;I!==null&&Gm(e,I,null)}else{let I=n.preOrderHooks;I!==null&&qm(e,I,0,null),M1(e,0)}if(a||t8(e),_2(e),y2(e,0),n.contentQueries!==null&&LO(n,e),!o)if(g){let I=n.contentCheckHooks;I!==null&&Gm(e,I)}else{let I=n.contentHooks;I!==null&&qm(e,I,1),M1(e,1)}i8(n,e);let b=n.components;b!==null&&x2(e,b,0);let E=n.viewQuery;if(E!==null&&j1(2,E,i),!o)if(g){let I=n.viewCheckHooks;I!==null&&Gm(e,I)}else{let I=n.viewHooks;I!==null&&qm(e,I,2),M1(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Mm]){for(let I of e[Mm])I();e[Mm]=null}o||(p2(e),e[$e]&=-73)}catch(g){throw o||Su(e),g}finally{f!==null&&(Ph(f,u),l&&KV(f)),Nm()}}function y2(n,e){for(let t=SO(n);t!==null;t=TO(t))for(let i=hn;i<t.length;i++){let r=t[i];b2(r,e)}}function t8(n){for(let e=SO(n);e!==null;e=TO(e)){if(!(e[$e]&2))continue;let t=e[Bc];for(let i=0;i<t.length;i++){let r=t[i];s1(r)}}}function n8(n,e,t){Lt(18);let i=br(e,n);b2(i,t),Lt(19,i[bn])}function b2(n,e){Sm(n)&&Y1(n,e)}function Y1(n,e){let i=n[Se],r=n[$e],o=n[nr],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&Sh(o)),a||=!1,o&&(o.dirty=!1),n[$e]&=-9217,a)e8(i,n,i.template,n[bn]);else if(r&8192){let l=He(null);try{_2(n),y2(n,1);let u=i.components;u!==null&&x2(n,u,1),p2(n)}finally{He(l)}}}function x2(n,e,t){for(let i=0;i<e.length;i++)n8(n,e[i],t)}function i8(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Sa(~r);else{let o=r,a=t[++i],l=t[++i];vT(a,o);let u=e[o];Lt(24,u),l(2,u),Lt(25,u)}}}finally{Sa(-1)}}function Hx(n,e){let t=g1()?64:1088;for(n[xo].changeDetectionScheduler?.notify(e);n;){n[$e]|=t;let i=xa(n);if(Pu(n)&&!i)return n;n=i}return null}function w2(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function C2(n,e){let t=hn+e;if(t<n.length)return n[t]}function O_(n,e,t,i=!0){let r=e[Se];if(r8(r,e,n,t),i){let a=Z1(t,n),l=e[Bt],u=l.parentNode(n[Ma]);u!==null&&vV(r,n[vr],l,e,u,a)}let o=e[Cu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function E2(n,e){let t=rf(n,e);return t!==void 0&&M_(t[Se],t),t}function rf(n,e){if(n.length<=hn)return;let t=hn+e,i=n[t];if(i){let r=i[Ia];r!==null&&r!==n&&Nx(r,i),e>0&&(n[t-1][_r]=i[_r]);let o=Uh(n,hn+e);_V(i[Se],i);let a=o[wo];a!==null&&a.detachView(o[Se]),i[Un]=null,i[_r]=null,i[$e]&=-129}return i}function r8(n,e,t,i){let r=hn+i,o=t.length;i>0&&(t[r-1][_r]=e),i<o-hn?(e[_r]=t[r],$b(t,hn+i,e)):(t.push(e),e[_r]=null),e[Un]=t;let a=e[Ia];a!==null&&t!==a&&I2(a,e);let l=e[wo];l!==null&&l.insertView(n),Tm(e),e[$e]|=128}function I2(n,e){let t=n[Bc],i=e[Un];if(Co(i))n[$e]|=2;else{let r=i[Un][tr];e[tr]!==r&&(n[$e]|=2)}t===null?n[Bc]=[e]:t.push(e)}var Ta=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Se];return nf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[bn]}set context(e){this._lView[bn]=e}get destroyed(){return Uc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Un];if(Hr(e)){let t=e[Gh],i=t?t.indexOf(this):-1;i>-1&&(rf(e,i),Uh(t,i))}this._attachedToViewContainer=!1}M_(this._lView[Se],this._lView)}onDestroy(e){a1(this._lView,e)}markForCheck(){Hx(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$e]&=-129}reattach(){Tm(this._lView),this._lView[$e]|=128}detectChanges(){this._lView[$e]|=1024,v2(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Pu(this._lView),t=this._lView[Ia];t!==null&&!e&&Nx(t,this._lView),c2(this._lView[Se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=e;let t=Pu(this._lView),i=this._lView[Ia];i!==null&&!t&&I2(i,this._lView),Tm(this._lView)}};var Oa=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=o8;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=T_(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new Ta(o)}}return n})();function o8(){return D_(Mn(),Le())}function D_(n,e){return n.type&4?new Oa(e,n,Fu(n,e)):null}function hf(n,e,t,i,r){let o=n.data[e];if(o===null)o=s8(n,e,t,i,r),_T()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let a=hT();o.injectorIndex=a===null?-1:a.injectorIndex}return Tu(o,!0),o}function s8(n,e,t,i,r){let o=f1(),a=p1(),l=a?o:o&&o.parent,u=n.data[e]=c8(n,l,t,e,i,r);return a8(n,u,o,a),u}function a8(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function c8(n,e,t,i,r,o){let a=e?e.injectorIndex:-1,l=0;return dT()&&(l|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Wae=new RegExp(`^(\\d+)*(${g6}|${p6})*(.*)`);function l8(n){let e=n[e1]??[],i=n[Un][Bt],r=[];for(let o of e)o.data[AO]!==void 0?r.push(o):u8(o,i);n[e1]=r}function u8(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[DO];for(;t<r;){let o=i.nextSibling;YO(e,i,!1),i=o,t++}}}var d8=()=>null,h8=()=>null;function Q1(n,e){return d8(n,e)}function M2(n,e,t){return h8(n,e,t)}var P2=class{},A_=class{},J1=class{resolveComponentFactory(e){throw new le(917,!1)}},ff=class{static NULL=new J1},$c=class{},wr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>f8()}return n})();function f8(){let n=Le(),e=Mn(),t=br(e.index,n);return(Co(t)?t:n)[Bt]}var S2=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>null})}return n})();var Km={},X1=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,Km,i);return r!==Km||t===Km?r:this.parentInjector.get(e,t,i)}};function a_(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number")o=l;else if(o==1)r=bm(r,l);else if(o==2){let u=l,f=e[++a];i=bm(i,u+": "+f+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function De(n,e=0){let t=Le();if(t===null)return Be(n,e);let i=Mn();return CO(i,t,oi(n),e)}function $x(){let n="invalid";throw new Error(n)}function T2(n,e,t,i,r){let o=i===null?null:{"":-1},a=r(n,t);if(a!==null){let l=a,u=null,f=null;for(let g of a)if(g.resolveHostDirectives!==null){[l,u,f]=g.resolveHostDirectives(a);break}m8(n,e,t,l,o,u,f)}o!==null&&i!==null&&p8(t,i,o)}function p8(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new le(-301,!1);i.push(e[r],o)}}function g8(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function m8(n,e,t,i,r,o,a){let l=i.length,u=!1;for(let E=0;E<l;E++){let I=i[E];!u&&Eo(I)&&(u=!0,g8(n,t,E)),V1(e_(t,e),n,I.type)}w8(t,n.data.length,l);for(let E=0;E<l;E++){let I=i[E];I.providersResolver&&I.providersResolver(I)}let f=!1,g=!1,b=XO(n,e,l,null);l>0&&(t.directiveToIndex=new Map);for(let E=0;E<l;E++){let I=i[E];if(t.mergedAttrs=ku(t.mergedAttrs,I.hostAttrs),v8(n,t,e,b,I),x8(b,I,r),a!==null&&a.has(I)){let[W,q]=a.get(I);t.directiveToIndex.set(I.type,[b,W+t.directiveStart,q+t.directiveStart])}else(o===null||!o.has(I))&&t.directiveToIndex.set(I.type,b);I.contentQueries!==null&&(t.flags|=4),(I.hostBindings!==null||I.hostAttrs!==null||I.hostVars!==0)&&(t.flags|=64);let R=I.type.prototype;!f&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),f=!0),!g&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),g=!0),b++}_8(n,t,o)}function _8(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))YT(0,e,r,i),YT(1,e,r,i),JT(e,i,!1);else{let o=t.get(r);QT(0,e,o,i),QT(1,e,o,i),JT(e,i,!0)}}}function YT(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a;n===0?a=e.inputs??={}:a=e.outputs??={},a[o]??=[],a[o].push(i),O2(e,o)}}function QT(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a=r[o],l;n===0?l=e.hostDirectiveInputs??={}:l=e.hostDirectiveOutputs??={},l[a]??=[],l[a].push(i,o),O2(e,a)}}function O2(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function JT(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||Px(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let a=null,l=0;for(;l<i.length;){let u=i[l];if(u===0){l+=4;continue}else if(u===5){l+=2;continue}else if(typeof u=="number")break;if(!t&&r.hasOwnProperty(u)){let f=r[u];for(let g of f)if(g===e){a??=[],a.push(u,i[l+1]);break}}else if(t&&o.hasOwnProperty(u)){let f=o[u];for(let g=0;g<f.length;g+=2)if(f[g]===e){a??=[],a.push(f[g+1],i[l+1]);break}}l+=2}n.initialInputs??=[],n.initialInputs.push(a)}function v8(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=ba(r.type,!0)),a=new jc(o,Eo(r),De,null);n.blueprint[i]=a,t[i]=a,y8(n,e,i,XO(n,t,r.hostVars,pi),r)}function y8(n,e,t,i,r){let o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let l=~e.index;b8(a)!=l&&a.push(l),a.push(t,i,o)}}function b8(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function x8(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Eo(e)&&(t[""]=n)}}function w8(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Gx(n,e,t,i,r,o,a,l){let u=e[Se],f=u.consts,g=xr(f,a),b=hf(u,n,t,i,g);return o&&T2(u,e,b,xr(f,l),r),b.mergedAttrs=ku(b.mergedAttrs,b.attrs),b.attrs!==null&&a_(b,b.attrs,!1),b.mergedAttrs!==null&&a_(b,b.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,b),b}function qx(n,e){pO(n,e),t1(e)&&n.queries.elementEnd(e)}function C8(n,e,t,i,r,o){let a=e.consts,l=xr(a,r),u=hf(e,n,t,i,l);if(u.mergedAttrs=ku(u.mergedAttrs,u.attrs),o!=null){let f=xr(a,o);u.localNames=[];for(let g=0;g<f.length;g+=2)u.localNames.push(f[g],-1)}return u.attrs!==null&&a_(u,u.attrs,!1),u.mergedAttrs!==null&&a_(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Wx(n){return A2(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function D2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function A2(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Kx(n,e,t){return n[e]=t}function E8(n,e){return n[e]}function ir(n,e,t){if(t===pi)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function k2(n,e,t,i){let r=ir(n,e,t);return ir(n,e+1,i)||r}function Zm(n,e,t){return function i(r){let o=Pa(n)?br(n.index,e):e;Hx(o,5);let a=e[bn],l=XT(e,a,t,r),u=i.__ngNextListenerFn__;for(;u;)l=XT(e,a,u,r)&&l,u=u.__ngNextListenerFn__;return l}}function XT(n,e,t,i){let r=He(null);try{return Lt(6,e,t),t(i)!==!1}catch(o){return jV(n,o),!1}finally{Lt(7,e,t),He(r)}}function R2(n,e,t,i,r,o,a,l){let u=Mu(n),f=!1,g=null;if(!i&&u&&(g=M8(e,t,o,n.index)),g!==null){let b=g.__ngLastListenerFn__||g;b.__ngNextListenerFn__=a,g.__ngLastListenerFn__=a,f=!0}else{let b=$r(n,t),E=i?i(b):b;_6(t,E,o,l);let I=r.listen(E,o,l);if(!I8(o)){let R=i?W=>i(yr(W[n.index])):n.index;N2(R,e,t,o,l,I,!1)}}return f}function I8(n){return n.startsWith("animation")||n.startsWith("transition")}function M8(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===t&&r[o+1]===i){let l=e[Eu],u=r[o+2];return l&&l.length>u?l[u]:null}typeof a=="string"&&(o+=2)}return null}function N2(n,e,t,i,r,o,a){let l=e.firstCreatePass?l1(e):null,u=c1(t),f=u.length;u.push(r,o),l&&l.push(i,n,f,(f+1)*(a?-1:1))}function eO(n,e,t,i,r,o){let a=e[t],l=e[Se],f=l.data[t].outputs[i],b=a[f].subscribe(o);N2(n.index,l,e,r,o,b,!0)}var ex=Symbol("BINDING");var c_=class extends ff{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ys(e);return new Gc(t,this.ngModule)}};function P8(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&E_.SignalBased)!==0};return r&&(o.transform=r),o})}function S8(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function T8(n,e,t){let i=e instanceof yn?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new X1(t,i):t}function O8(n){let e=n.get($c,null);if(e===null)throw new le(407,!1);let t=n.get(S2,null),i=n.get(_s,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function D8(n,e){let t=L2(n);return KO(e,t,t==="svg"?n1:t==="math"?iT:null)}function L2(n){return(n.selectors[0][0]||"div").toLowerCase()}var Gc=class extends A_{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=P8(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=S8(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Y6(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,a){Lt(22);let l=He(null);try{let u=this.componentDef,f=A8(i,u,a,o),g=T8(u,r||this.ngModule,e),b=O8(g),E=b.rendererFactory.createRenderer(null,u),I=i?DV(E,i,u.encapsulation,g):D8(u,E),R=a?.some(tO)||o?.some(ie=>typeof ie!="function"&&ie.bindings.some(tO)),W=Tx(null,f,null,512|JO(u),null,null,b,E,g,null,NO(I,g,!0));W[sn]=I,Rm(W);let q=null;try{let ie=Gx(sn,W,2,"#host",()=>f.directiveRegistry,!0,0);QO(E,I,ie),Ru(I,W),S_(f,W,ie),Cx(f,ie,W),qx(f,ie),t!==void 0&&R8(ie,this.ngContentSelectors,t),q=br(ie.index,W),W[bn]=q[bn],jx(f,W,null)}catch(ie){throw q!==null&&U1(q),U1(W),ie}finally{Lt(23),Nm()}return new l_(this.componentType,W,!!R)}finally{He(l)}}};function A8(n,e,t,i){let r=n?["ng-version","20.3.14"]:Q6(e.selectors[0]),o=null,a=null,l=0;if(t)for(let g of t)l+=g[ex].requiredVars,g.create&&(g.targetIdx=0,(o??=[]).push(g)),g.update&&(g.targetIdx=0,(a??=[]).push(g));if(i)for(let g=0;g<i.length;g++){let b=i[g];if(typeof b!="function")for(let E of b.bindings){l+=E[ex].requiredVars;let I=g+1;E.create&&(E.targetIdx=I,(o??=[]).push(E)),E.update&&(E.targetIdx=I,(a??=[]).push(E))}}let u=[e];if(i)for(let g of i){let b=typeof g=="function"?g:g.type,E=Kb(b);u.push(E)}return Sx(0,null,k8(o,a),1,l,u,null,null,null,[r],null)}function k8(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function tO(n){let e=n[ex].kind;return e==="input"||e==="twoWay"}var l_=class extends P2{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=qh(t[Se],sn),this.location=Fu(this._tNode,t),this.instance=br(this._tNode.index,t)[bn],this.hostView=this.changeDetectorRef=new Ta(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=zx(i,r[Se],r,e,t);this.previousInputValues.set(e,t);let a=br(i.index,r);Hx(a,1)}get injector(){return new zc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function R8(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var Is=(()=>{class n{static __NG_ELEMENT_ID__=N8}return n})();function N8(){let n=Mn();return V2(n,Le())}var L8=Is,F2=class extends L8{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Fu(this._hostTNode,this._hostLView)}get injector(){return new zc(this._hostTNode,this._hostLView)}get parentInjector(){let e=_x(this._hostTNode,this._hostLView);if(_O(e)){let t=Jm(e,this._hostLView),i=Qm(e),r=t[Se].data[i+8];return new zc(r,t)}else return new zc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=nO(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-hn}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=Q1(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(l,r,tf(this._hostTNode,a)),l}createComponent(e,t,i,r,o,a,l){let u=e&&!jF(e),f;if(u)f=t;else{let q=t||{};f=q.index,i=q.injector,r=q.projectableNodes,o=q.environmentInjector||q.ngModuleRef,a=q.directives,l=q.bindings}let g=u?e:new Gc(ys(e)),b=i||this.parentInjector;if(!o&&g.ngModule==null){let ie=(u?b:this.parentInjector).get(yn,null);ie&&(o=ie)}let E=ys(g.componentType??{}),I=Q1(this._lContainer,E?.id??null),R=I?.firstChild??null,W=g.create(b,r,R,o,a,l);return this.insertImpl(W.hostView,f,tf(this._hostTNode,I)),W}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(oT(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let u=r[Un],f=new F2(u,u[vr],u[Un]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return O_(a,r,o,i),e.attachToViewContainerRef(),$b(T1(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=nO(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=rf(this._lContainer,t);i&&(Uh(T1(this._lContainer),t),M_(i[Se],i))}detach(e){let t=this._adjustIndex(e,-1),i=rf(this._lContainer,t);return i&&Uh(T1(this._lContainer),t)!=null?new Ta(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function nO(n){return n[Gh]}function T1(n){return n[Gh]||(n[Gh]=[])}function V2(n,e){let t,i=e[n.index];return Hr(i)?t=i:(t=w2(i,e,null,n),e[n.index]=t,Ox(e,t)),V8(t,e,n,i),new F2(t,n,e)}function F8(n,e){let t=n[Bt],i=t.createComment(""),r=$r(e,n),o=t.parentNode(r);return i_(t,o,i,t.nextSibling(r),!1),i}var V8=z8,B8=()=>!1;function U8(n,e,t){return B8(n,e,t)}function z8(n,e,t,i){if(n[Ma])return;let r;t.type&8?r=yr(i):r=F8(e,t),n[Ma]=r}var tx=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},nx=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let a=t.getByIndex(o),l=this.queries[a.indexInDeclarationView];r.push(l.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Zx(e,t).matches!==null&&this.queries[t].setDirty()}},u_=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=Z8(e):this.predicate=e}},ix=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},rx=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,j8(t,o)),this.matchTNodeWithReadOption(e,t,Wm(t,e,o,!1,!1))}else i===Oa?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Wm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===fi||r===Is||r===Oa&&t.type&4)this.addMatch(t.index,-2);else{let o=Wm(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function j8(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function H8(n,e){return n.type&11?Fu(n,e):n.type&4?D_(n,e):null}function $8(n,e,t,i){return t===-1?H8(e,n):t===-2?G8(n,e,i):ef(n,n[Se],t,e)}function G8(n,e,t){if(t===fi)return Fu(e,n);if(t===Oa)return D_(e,n);if(t===Is)return V2(e,n)}function B2(n,e,t,i){let r=e[wo].queries[i];if(r.matches===null){let o=n.data,a=t.matches,l=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)l.push(null);else{let g=o[f];l.push($8(e,g,a[u+1],t.metadata.read))}}r.matches=l}return r.matches}function ox(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let a=B2(n,e,r,t);for(let l=0;l<o.length;l+=2){let u=o[l];if(u>0)i.push(a[l/2]);else{let f=o[l+1],g=e[-u];for(let b=hn;b<g.length;b++){let E=g[b];E[Ia]===E[Un]&&ox(E[Se],E,f,i)}if(g[Bc]!==null){let b=g[Bc];for(let E=0;E<b.length;E++){let I=b[E];ox(I[Se],I,f,i)}}}}}return i}function q8(n,e){return n[wo].queries[e].queryList}function U2(n,e,t){let i=new t_((t&4)===4);return cT(n,e,i,i.destroy),(e[wo]??=new nx).queries.push(new tx(i))-1}function W8(n,e,t){let i=Xt();return i.firstCreatePass&&(z2(i,new u_(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),U2(i,Le(),e)}function K8(n,e,t,i){let r=Xt();if(r.firstCreatePass){let o=Mn();z2(r,new u_(e,t,i),o.index),Y8(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return U2(r,Le(),t)}function Z8(n){return n.split(",").map(e=>e.trim())}function z2(n,e,t){n.queries===null&&(n.queries=new ix),n.queries.track(new rx(e,t))}function Y8(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function Zx(n,e){return n.queries.getByIndex(e)}function Q8(n,e){let t=n[Se],i=Zx(t,e);return i.crossesNgTemplate?ox(t,n,e,[]):B2(t,n,i,e)}var qc=class{},k_=class{};var d_=class extends qc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new c_(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=Wb(e);this._bootstrapComponents=qO(o.bootstrap),this._r3Injector=b1(e,t,[{provide:qc,useValue:this},{provide:ff,useValue:this.componentFactoryResolver},...i],ms(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},h_=class extends k_{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new d_(this.moduleType,e,[])}};var of=class extends qc{injector;componentFactoryResolver=new c_(this);instance=null;constructor(e){super();let t=new kc([...e.providers,{provide:qc,useValue:this},{provide:ff,useValue:this.componentFactoryResolver}],e.parent||jh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Vu(n,e,t=null){return new of({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var J8=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=Zb(!1,t.type),r=i.length>0?Vu([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=he({token:n,providedIn:"environment",factory:()=>new n(Be(yn))})}return n})();function st(n){return Lu(()=>{let e=j2(n),t=ye(X({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(J8).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ws.Emulated,styles:n.styles||Ti,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Do("NgStandalone"),H2(t);let i=n.dependencies;return t.directiveDefs=iO(i,X8),t.pipeDefs=iO(i,YS),t.id=nB(t),t})}function X8(n){return ys(n)||Kb(n)}function Ao(n){return Lu(()=>({type:n.type,bootstrap:n.bootstrap||Ti,declarations:n.declarations||Ti,imports:n.imports||Ti,exports:n.exports||Ti,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function eB(n,e){if(n==null)return Ca;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,a,l,u;Array.isArray(r)?(l=r[0],o=r[1],a=r[2]??o,u=r[3]||null):(o=r,a=r,l=E_.None,u=null),t[o]=[i,l,u],e[o]=a}return t}function tB(n){if(n==null)return Ca;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function qt(n){return Lu(()=>{let e=j2(n);return H2(e),e})}function Bu(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function j2(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ca,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ti,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:eB(n.inputs,e),outputs:tB(n.outputs),debugInfo:null}}function H2(n){n.features?.forEach(e=>e(n))}function iO(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function nB(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function iB(n){return Object.getPrototypeOf(n.prototype).constructor}function rr(n){let e=iB(n.type),t=!0,i=[n];for(;e;){let r;if(Eo(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new le(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let a=n;a.inputs=O1(n.inputs),a.declaredInputs=O1(n.declaredInputs),a.outputs=O1(n.outputs);let l=r.hostBindings;l&&cB(n,l);let u=r.viewQuery,f=r.contentQueries;if(u&&sB(n,u),f&&aB(n,f),rB(n,r),zS(n.outputs,r.outputs),Eo(r)&&r.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let l=o[a];l&&l.ngInherit&&l(n),l===rr&&(t=!1)}}e=Object.getPrototypeOf(e)}oB(i)}function rB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function oB(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ku(r.hostAttrs,t=ku(t,r.hostAttrs))}}function O1(n){return n===Ca?{}:n===Ti?[]:n}function sB(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function aB(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function cB(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function $2(n,e,t,i,r,o,a,l){if(t.firstCreatePass){n.mergedAttrs=ku(n.mergedAttrs,n.attrs);let g=n.tView=Sx(2,n,r,o,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),g.queries=t.queries.embeddedTView(n))}l&&(n.flags|=l),Tu(n,!1);let u=uB(t,e,n,i);Lm()&&Lx(t,e,u,n),Ru(u,e);let f=w2(u,e,u,n);e[i+sn]=f,Ox(e,f),U8(f,n,e)}function lB(n,e,t,i,r,o,a,l,u,f,g){let b=t+sn,E;return e.firstCreatePass?(E=hf(e,b,4,a||null,l||null),Om()&&T2(e,n,E,xr(e.consts,f),Vx),pO(e,E)):E=e.data[b],$2(E,n,e,t,i,r,o,u),Mu(E)&&S_(e,n,E),f!=null&&df(n,E,g),E}function f_(n,e,t,i,r,o,a,l,u,f,g){let b=t+sn,E;if(e.firstCreatePass){if(E=hf(e,b,4,a||null,l||null),f!=null){let I=xr(e.consts,f);E.localNames=[];for(let R=0;R<I.length;R+=2)E.localNames.push(I[R],-1)}}else E=e.data[b];return $2(E,n,e,t,i,r,o,u),f!=null&&df(n,E,g),E}function te(n,e,t,i,r,o,a,l){let u=Le(),f=Xt(),g=xr(f.consts,o);return lB(u,f,n,e,t,i,r,g,void 0,a,l),te}var uB=dB;function dB(n,e,t,i){return Yh(!0),e[Bt].createComment("")}var Yx=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Qx=new _e("");function Ms(n){return!!n&&typeof n.then=="function"}function R_(n){return!!n&&typeof n.subscribe=="function"}var Jx=new _e("");function N_(n){return Oi([{provide:Jx,multi:!0,useValue:n}])}var Xx=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=F(Jx,{optional:!0})??[];injector=F(Gt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=In(this.injector,r);if(Ms(o))t.push(o);else if(R_(o)){let a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});t.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pf=new _e("");function G2(){sb(()=>{let n="";throw new le(600,n)})}function q2(n){return n.isBoundToModule}var hB=10;var Ps=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(Di);afterRenderManager=F(Rx);zonelessEnabled=F(Vm);rootEffectScheduler=F(I1);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Jt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=F(Mo);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ue(t=>!t))}constructor(){F(Zc,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=F(yn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Gt.NULL){return this._injector.get(mt).run(()=>{Lt(10);let a=t instanceof A_;if(!this._injector.get(Xx).done){let R="";throw new le(405,R)}let u;a?u=t:u=this._injector.get(ff).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let f=q2(u)?void 0:this._injector.get(qc),g=i||u.selector,b=u.create(r,[],g,f),E=b.location.nativeElement,I=b.injector.get(Qx,null);return I?.registerApplication(E),b.onDestroy(()=>{this.detachView(b.hostView),Xh(this.components,b),I?.unregisterApplication(E)}),this._loadComponent(b),Lt(11,b),b})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Lt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(I_.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new le(101,!1);let t=He(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,He(t),this.afterTick.next(),Lt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get($c,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<hB;)Lt(14),this.synchronizeOnce(),Lt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!Wh(r))continue;let o=i&&!this.zonelessEnabled?0:1;v2(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Wh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Xh(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(pf,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Xh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new le(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Tt(n,e,t,i){let r=Le(),o=xs();if(ir(r,o,e)){let a=Xt(),l=Zh();BV(l,r,n,e,t,i)}return Tt}var ece=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var sx=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let a=this.detach(i);this.attach(i,o),this.attach(r,a)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function D1(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function fB(n,e,t){let i,r,o=0,a=n.length-1,l=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=a&&o<=u;){let f=n.at(o),g=e[o],b=D1(o,f,o,g,t);if(b!==0){b<0&&n.updateValue(o,g),o++;continue}let E=n.at(a),I=e[u],R=D1(a,E,u,I,t);if(R!==0){R<0&&n.updateValue(a,I),a--,u--;continue}let W=t(o,f),q=t(a,E),ie=t(o,g);if(Object.is(ie,q)){let ge=t(u,I);Object.is(ge,W)?(n.swap(o,a),n.updateValue(a,I),u--,a--):n.move(a,o),n.updateValue(o,g),o++;continue}if(i??=new p_,r??=oO(n,o,a,t),ax(n,i,o,ie))n.updateValue(o,g),o++,a++;else if(r.has(ie))i.set(W,n.detach(o)),a--;else{let ge=n.create(o,e[o]);n.attach(o,ge),o++,a++}}for(;o<=u;)rO(n,i,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),f=u.next();for(;!f.done&&o<=a;){let g=n.at(o),b=f.value,E=D1(o,g,o,b,t);if(E!==0)E<0&&n.updateValue(o,b),o++,f=u.next();else{i??=new p_,r??=oO(n,o,a,t);let I=t(o,b);if(ax(n,i,o,I))n.updateValue(o,b),o++,a++,f=u.next();else if(!r.has(I))n.attach(o,n.create(o,b)),o++,a++,f=u.next();else{let R=t(o,g);i.set(R,n.detach(o)),a--}}}for(;!f.done;)rO(n,i,t,n.length,f.value),f=u.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(u=>{n.destroy(u)})}function ax(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function rO(n,e,t,i,r){if(ax(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function oO(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var p_=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function Ee(n,e,t,i,r,o,a,l){Do("NgControlFlow");let u=Le(),f=Xt(),g=xr(f.consts,o);return f_(u,f,n,e,t,i,r,g,256,a,l),ew}function ew(n,e,t,i,r,o,a,l){Do("NgControlFlow");let u=Le(),f=Xt(),g=xr(f.consts,o);return f_(u,f,n,e,t,i,r,g,512,a,l),ew}function Ie(n,e){Do("NgControlFlow");let t=Le(),i=xs(),r=t[i]!==pi?t[i]:-1,o=r!==-1?g_(t,sn+r):void 0,a=0;if(ir(t,i,n)){let l=He(null);try{if(o!==void 0&&E2(o,a),n!==-1){let u=sn+n,f=g_(t,u),g=dx(t[Se],u),b=M2(f,g,t),E=T_(t,g,e,{dehydratedView:b});O_(f,E,a,tf(g,b))}}finally{He(l)}}else if(o!==void 0){let l=C2(o,a);l!==void 0&&(l[bn]=e)}}var cx=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-hn}};function tw(n,e){return e}var lx=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function Yc(n,e,t,i,r,o,a,l,u,f,g,b,E){Do("NgControlFlow");let I=Le(),R=Xt(),W=u!==void 0,q=Le(),ie=l?a.bind(q[tr][bn]):a,ge=new lx(W,ie);q[sn+n]=ge,f_(I,R,n+1,e,t,i,r,xr(R.consts,o),256),W&&f_(I,R,n+2,u,f,g,b,xr(R.consts,E),512)}var ux=class extends sx{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-hn}at(e){return this.getLView(e)[bn].$implicit}attach(e,t){let i=t[Cu];this.needsIndexUpdate||=e!==this.length,O_(this.lContainer,t,e,tf(this.templateTNode,i)),pB(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,gB(this.lContainer,e),mB(this.lContainer,e)}create(e,t){let i=Q1(this.lContainer,this.templateTNode.tView.ssrId),r=T_(this.hostLView,this.templateTNode,new cx(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){M_(e[Se],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[bn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[bn].$index=e}getLView(e){return _B(this.lContainer,e)}};function Qc(n){let e=He(null),t=Io();try{let i=Le(),r=i[Se],o=i[t],a=t+1,l=g_(i,a);if(o.liveCollection===void 0){let f=dx(r,a);o.liveCollection=new ux(l,i,f)}else o.liveCollection.reset();let u=o.liveCollection;if(fB(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let f=xs(),g=u.length===0;if(ir(i,f,g)){let b=t+2,E=g_(i,b);if(g){let I=dx(r,b),R=M2(E,I,i),W=T_(i,I,void 0,{dehydratedView:R});O_(E,W,0,tf(I,R))}else r.firstUpdatePass&&l8(E),E2(E,0)}}}finally{He(e)}}function g_(n,e){return n[e]}function pB(n,e){if(n.length<=hn)return;let t=hn+e,i=n[t],r=i?i[Vc]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[bs];gV(o,r),Hc.delete(i),r.detachedLeaveAnimationFns=void 0}}function gB(n,e){if(n.length<=hn)return;let t=hn+e,i=n[t],r=i?i[Vc]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function mB(n,e){return rf(n,e)}function _B(n,e){return C2(n,e)}function dx(n,e){return qh(n,e)}function H(n,e,t){let i=Le(),r=xs();if(ir(i,r,e)){let o=Xt(),a=Zh();d2(a,i,n,e,i[Bt],t)}return H}function hx(n,e,t,i,r){zx(e,n,t,r?"class":"style",i)}function _(n,e,t,i){let r=Le(),o=r[Se],a=n+sn,l=o.firstCreatePass?Gx(a,r,2,e,Vx,Om(),t,i):o.data[a];if(Bx(l,r,n,e,W2),Mu(l)){let u=r[Se];S_(u,r,l),Cx(u,l,r)}return i!=null&&df(r,l),_}function v(){let n=Xt(),e=Mn(),t=Ux(e);return n.firstCreatePass&&qx(n,t),d1(t)&&h1(),u1(),t.classesWithoutHost!=null&&KF(t)&&hx(n,t,Le(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&ZF(t)&&hx(n,t,Le(),t.stylesWithoutHost,!1),v}function re(n,e,t,i){return _(n,e,t,i),v(),re}function K(n,e,t,i){let r=Le(),o=r[Se],a=n+sn,l=o.firstCreatePass?C8(a,o,2,e,t,i):o.data[a];return Bx(l,r,n,e,W2),i!=null&&df(r,l),K}function Q(){let n=Mn(),e=Ux(n);return d1(e)&&h1(),u1(),Q}function Ue(n,e,t,i){return K(n,e,t,i),Q(),Ue}var W2=(n,e,t,i,r)=>(Yh(!0),KO(e[Bt],i,IT()));function Je(n,e,t){let i=Le(),r=i[Se],o=n+sn,a=r.firstCreatePass?Gx(o,i,8,"ng-container",Vx,Om(),e,t):r.data[o];if(Bx(a,i,n,"ng-container",vB),Mu(a)){let l=i[Se];S_(l,i,a),Cx(l,a,i)}return t!=null&&df(i,a),Je}function Xe(){let n=Xt(),e=Mn(),t=Ux(e);return n.firstCreatePass&&qx(n,t),Xe}var vB=(n,e,t,i,r)=>(Yh(!0),eV(e[Bt],""));function pe(){return Le()}function Sn(n,e,t){let i=Le(),r=xs();if(ir(i,r,e)){let o=Xt(),a=Zh();h2(a,i,n,e,i[Bt],t)}return Sn}var Hm=void 0;function yB(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var bB=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hm,"{1} 'at' {0}",Hm],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",yB],A1={};function zi(n){let e=xB(n),t=sO(e);if(t)return t;let i=e.split("-")[0];if(t=sO(i),t)return t;if(i==="en")return bB;throw new le(701,!1)}function sO(n){return n in A1||(A1[n]=Ur.ng&&Ur.ng.common&&Ur.ng.common.locales&&Ur.ng.common.locales[n]),A1[n]}var fn=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(fn||{});function xB(n){return n.toLowerCase().replace(/_/g,"-")}var gf="en-US";var wB=gf;function K2(n){typeof n=="string"&&(wB=n.toLowerCase().replace(/_/g,"-"))}function J(n,e,t){let i=Le(),r=Xt(),o=Mn();return Z2(r,i,i[Bt],o,n,e,t),J}function ot(n,e,t){let i=Le(),r=Xt(),o=Mn();return(o.type&3||t)&&R2(o,r,i,t,i[Bt],n,e,Zm(o,i,e)),ot}function Z2(n,e,t,i,r,o,a){let l=!0,u=null;if((i.type&3||a)&&(u??=Zm(i,e,o),R2(i,n,e,a,t,r,o,u)&&(l=!1)),l){let f=i.outputs?.[r],g=i.hostDirectiveOutputs?.[r];if(g&&g.length)for(let b=0;b<g.length;b+=2){let E=g[b],I=g[b+1];u??=Zm(i,e,o),eO(i,e,E,I,r,u)}if(f&&f.length)for(let b of f)u??=Zm(i,e,o),eO(i,e,b,r,r,u)}}function T(n=1){return ET(n)}function nw(n,e,t,i){K8(n,e,t,i)}function iw(n,e,t){W8(n,e,t)}function mf(n){let e=Le(),t=Xt(),i=_1();km(i+1);let r=Zx(t,i);if(n.dirty&&rT(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=Q8(e,i);n.reset(o,c6),n.notifyOnChanges()}return!0}return!1}function _f(){return q8(Le(),_1())}function dt(n){let e=pT();return Pm(e,sn+n)}function $m(n,e){return n<<17|e<<2}function Wc(n){return n>>17&32767}function CB(n){return(n&2)==2}function EB(n,e){return n&131071|e<<17}function fx(n){return n|2}function Nu(n){return(n&131068)>>2}function k1(n,e){return n&-131069|e<<2}function IB(n){return(n&1)===1}function px(n){return n|1}function MB(n,e,t,i,r,o){let a=o?e.classBindings:e.styleBindings,l=Wc(a),u=Nu(a);n[i]=t;let f=!1,g;if(Array.isArray(t)){let b=t;g=b[1],(g===null||wu(b,g)>0)&&(f=!0)}else g=t;if(r)if(u!==0){let E=Wc(n[l+1]);n[i+1]=$m(E,l),E!==0&&(n[E+1]=k1(n[E+1],i)),n[l+1]=EB(n[l+1],i)}else n[i+1]=$m(l,0),l!==0&&(n[l+1]=k1(n[l+1],i)),l=i;else n[i+1]=$m(u,0),l===0?l=i:n[u+1]=k1(n[u+1],i),u=i;f&&(n[i+1]=fx(n[i+1])),aO(n,g,i,!0),aO(n,g,i,!1),PB(e,g,n,i,o),a=$m(l,u),o?e.classBindings=a:e.styleBindings=a}function PB(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&wu(o,e)>=0&&(t[i+1]=px(t[i+1]))}function aO(n,e,t,i){let r=n[t+1],o=e===null,a=i?Wc(r):Nu(r),l=!1;for(;a!==0&&(l===!1||o);){let u=n[a],f=n[a+1];SB(u,e)&&(l=!0,n[a+1]=i?px(f):fx(f)),a=i?Wc(f):Nu(f)}l&&(n[t+1]=i?fx(r):px(r))}function SB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?wu(n,e)>=0:!1}var Wr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function TB(n){return n.substring(Wr.key,Wr.keyEnd)}function OB(n){return DB(n),Y2(n,Q2(n,0,Wr.textEnd))}function Y2(n,e){let t=Wr.textEnd;return t===e?-1:(e=Wr.keyEnd=AB(n,Wr.key=e,t),Q2(n,e,t))}function DB(n){Wr.key=0,Wr.keyEnd=0,Wr.value=0,Wr.valueEnd=0,Wr.textEnd=n.length}function Q2(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function AB(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Jc(n,e,t){return J2(n,e,t,!1),Jc}function ke(n,e){return J2(n,e,null,!0),ke}function Xc(n){RB(UB,kB,n,!0)}function kB(n,e){for(let t=OB(e);t>=0;t=Y2(e,t))Em(n,TB(e),!0)}function J2(n,e,t,i){let r=Le(),o=Xt(),a=Dm(2);if(o.firstUpdatePass&&eD(o,n,a,i),e!==pi&&ir(r,a,e)){let l=o.data[Io()];tD(o,l,r,r[Bt],n,r[a+1]=jB(e,t),i,a)}}function RB(n,e,t,i){let r=Xt(),o=Dm(2);r.firstUpdatePass&&eD(r,null,o,i);let a=Le();if(t!==pi&&ir(a,o,t)){let l=r.data[Io()];if(nD(l,i)&&!X2(r,o)){let u=i?l.classesWithoutHost:l.stylesWithoutHost;u!==null&&(t=bm(u,t||"")),hx(r,l,a,t,i)}else zB(r,l,a,a[Bt],a[o+1],a[o+1]=BB(n,e,t),i,o)}}function X2(n,e){return e>=n.expandoStartIndex}function eD(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[Io()],a=X2(n,t);nD(o,i)&&e===null&&!a&&(e=!1),e=NB(r,o,e,i),MB(r,o,e,t,a,i)}}function NB(n,e,t,i){let r=bT(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=R1(null,n,e,t,i),t=sf(t,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==r)if(t=R1(r,n,e,t,i),o===null){let u=LB(n,e,i);u!==void 0&&Array.isArray(u)&&(u=R1(null,n,e,u[1],i),u=sf(u,e.attrs,i),FB(n,e,i,u))}else o=VB(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function LB(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Nu(i)!==0)return n[Wc(i)]}function FB(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Wc(r)]=i}function VB(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=n[o].hostAttrs;i=sf(i,a,t)}return sf(i,e.attrs,t)}function R1(n,e,t,i,r){let o=null,a=t.directiveEnd,l=t.directiveStylingLast;for(l===-1?l=t.directiveStart:l++;l<a&&(o=e[l],i=sf(i,o.hostAttrs,r),o!==n);)l++;return n!==null&&(t.directiveStylingLast=l),i}function sf(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Em(n,a,t?!0:e[++o]))}return n===void 0?null:n}function BB(n,e,t){if(t==null||t==="")return Ti;let i=[],r=Kc(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function UB(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Em(n,i,t)}function zB(n,e,t,i,r,o,a,l){r===pi&&(r=Ti);let u=0,f=0,g=0<r.length?r[0]:null,b=0<o.length?o[0]:null;for(;g!==null||b!==null;){let E=u<r.length?r[u+1]:void 0,I=f<o.length?o[f+1]:void 0,R=null,W;g===b?(u+=2,f+=2,E!==I&&(R=b,W=I)):b===null||g!==null&&g<b?(u+=2,R=g):(f+=2,R=b,W=I),R!==null&&tD(n,e,t,i,R,W,a,l),g=u<r.length?r[u]:null,b=f<o.length?o[f]:null}}function tD(n,e,t,i,r,o,a,l){if(!(e.type&3))return;let u=n.data,f=u[l+1],g=IB(f)?cO(u,e,t,r,Nu(f),a):void 0;if(!m_(g)){m_(o)||CB(f)&&(o=cO(u,null,t,r,l,a));let b=i1(Io(),t);OV(i,a,b,r,o)}}function cO(n,e,t,i,r,o){let a=e===null,l;for(;r>0;){let u=n[r],f=Array.isArray(u),g=f?u[1]:u,b=g===null,E=t[r+1];E===pi&&(E=b?Ti:void 0);let I=b?Im(E,i):g===i?E:void 0;if(f&&!m_(I)&&(I=Im(u,i)),m_(I)&&(l=I,a))return l;let R=n[r+1];r=a?Wc(R):Nu(R)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(l=Im(u,i))}return l}function m_(n){return n!==void 0}function jB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ms(Kc(n)))),n}function nD(n,e){return(n.flags&(e?8:16))!==0}function w(n,e=""){let t=Le(),i=Xt(),r=n+sn,o=i.firstCreatePass?hf(i,r,1,e,null):i.data[r],a=HB(i,t,o,e,n);t[r]=a,Lm()&&Lx(i,t,a,o),Tu(o,!1)}var HB=(n,e,t,i,r)=>(Yh(!0),J6(e[Bt],i));function iD(n,e,t,i=""){return ir(n,xs(),t)?e+vs(t)+i:pi}function $B(n,e,t,i,r,o=""){let a=gT(),l=k2(n,a,t,r);return Dm(2),l?e+vs(t)+i+vs(r)+o:pi}function ae(n){return be("",n),ae}function be(n,e,t){let i=Le(),r=iD(i,n,e,t);return r!==pi&&rD(i,Io(),r),be}function xn(n,e,t,i,r){let o=Le(),a=$B(o,n,e,t,i,r);return a!==pi&&rD(o,Io(),a),xn}function rD(n,e,t){let i=i1(e,n);X6(n[Bt],i,t)}function xt(n,e,t){w1(e)&&(e=e());let i=Le(),r=xs();if(ir(i,r,e)){let o=Xt(),a=Zh();d2(a,i,n,e,i[Bt],t)}return xt}function Et(n,e){let t=w1(n);return t&&n.set(e),t}function wt(n,e){let t=Le(),i=Xt(),r=Mn();return Z2(i,t,t[Bt],r,n,e),wt}function rw(n){return ir(Le(),xs(),n)?vs(n):pi}function ow(n,e,t=""){return iD(Le(),n,e,t)}function GB(n,e,t){let i=Xt();if(i.firstCreatePass){let r=Eo(n);gx(t,i.data,i.blueprint,r,!0),gx(e,i.data,i.blueprint,r,!1)}}function gx(n,e,t,i,r){if(n=oi(n),Array.isArray(n))for(let o=0;o<n.length;o++)gx(n[o],e,t,i,r);else{let o=Xt(),a=Le(),l=Mn(),u=Ac(n)?n:oi(n.provide),f=Qb(n),g=l.providerIndexes&1048575,b=l.directiveStart,E=l.providerIndexes>>20;if(Ac(n)||!n.multi){let I=new jc(f,r,De,null),R=L1(u,e,r?g:g+E,b);R===-1?(V1(e_(l,a),o,u),N1(o,n,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(I),a.push(I)):(t[R]=I,a[R]=I)}else{let I=L1(u,e,g+E,b),R=L1(u,e,g,g+E),W=I>=0&&t[I],q=R>=0&&t[R];if(r&&!q||!r&&!W){V1(e_(l,a),o,u);let ie=KB(r?WB:qB,t.length,r,i,f,n);!r&&q&&(t[R].providerFactory=ie),N1(o,n,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(ie),a.push(ie)}else{let ie=oD(t[r?R:I],f,!r&&i);N1(o,n,I>-1?I:R,ie)}!r&&i&&q&&t[R].componentProviders++}}}function N1(n,e,t,i){let r=Ac(e),o=eT(e);if(r||o){let u=(o?oi(e.useClass):e).prototype.ngOnDestroy;if(u){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let g=f.indexOf(t);g===-1?f.push(t,[i,u]):f[g+1].push(i,u)}else f.push(t,u)}}}function oD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function L1(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function qB(n,e,t,i,r){return mx(this.multi,[])}function WB(n,e,t,i,r){let o=this.multi,a;if(this.providerFactory){let l=this.providerFactory.componentProviders,u=ef(i,i[Se],this.providerFactory.index,r);a=u.slice(0,l),mx(o,a);for(let f=l;f<u.length;f++)a.push(u[f])}else a=[],mx(o,a);return a}function mx(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function KB(n,e,t,i,r,o){let a=new jc(n,t,De,null);return a.multi=[],a.index=e,a.componentProviders=0,oD(a,r,i&&!t),a}function Ss(n,e=[]){return t=>{t.providersResolver=(i,r)=>GB(i,r?r(n):n,e)}}function Uu(n,e,t){let i=Kh()+n,r=Le();return r[i]===pi?Kx(r,i,t?e.call(t):e()):E8(r,i)}function L_(n,e,t,i){return aD(Le(),Kh(),n,e,t,i)}function sD(n,e){let t=n[e];return t===pi?void 0:t}function aD(n,e,t,i,r,o){let a=e+t;return ir(n,a,r)?Kx(n,a+1,o?i.call(o,r):i(r)):sD(n,a+1)}function ZB(n,e,t,i,r,o,a){let l=e+t;return k2(n,l,r,o)?Kx(n,l+2,a?i.call(a,r,o):i(r,o)):sD(n,l+2)}function xe(n,e){let t=Xt(),i,r=n+sn;t.firstCreatePass?(i=YB(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=ba(i.type,!0)),a,l=Si(De);try{let u=Xm(!1),f=o();return Xm(u),r1(t,Le(),r,f),f}finally{Si(l)}}function YB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Te(n,e,t){let i=n+sn,r=Le(),o=Pm(r,i);return cD(r,i)?aD(r,Kh(),e,o.transform,t,o):o.transform(t)}function Tn(n,e,t,i){let r=n+sn,o=Le(),a=Pm(o,r);return cD(o,r)?ZB(o,Kh(),e,a.transform,t,i,a):a.transform(t,i)}function cD(n,e){return n[Se].data[e].pure}function It(n,e){return D_(n,e)}var __=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},sw=(()=>{class n{compileModuleSync(t){return new h_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=Wb(t),o=qO(r.declarations).reduce((a,l)=>{let u=ys(l);return u&&a.push(new Gc(u)),a},[]);return new __(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var QB=(()=>{class n{zone=F(mt);changeDetectionScheduler=F(_s);applicationRef=F(Ps);applicationErrorHandler=F(Di);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lD({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new mt(ye(X({},uD()),{scheduleInRootZone:t})),[{provide:mt,useFactory:n},{provide:Ea,multi:!0,useFactory:()=>{let i=F(QB,{optional:!0});return()=>i.initialize()}},{provide:Ea,multi:!0,useFactory:()=>{let i=F(JB);return()=>{i.initialize()}}},e===!0?{provide:C1,useValue:!0}:[],{provide:E1,useValue:t??t2},{provide:Di,useFactory:()=>{let i=F(mt),r=F(yn),o;return a=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw a}):(o??=r.get(Br),o.handleError(a))})}}}]}function uD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var JB=(()=>{class n{subscription=new dn;initialized=!1;zone=F(mt);pendingTasks=F(Mo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{mt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{mt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dD=(()=>{class n{applicationErrorHandler=F(Di);appRef=F(Ps);taskService=F(Mo);ngZone=F(mt);zonelessEnabled=F(Vm);tracing=F(Zc,{optional:!0});disableScheduling=F(C1,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new dn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(r_):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(E1,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof o_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?$T:n2;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(r_+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,$T(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XB(){return typeof $localize<"u"&&$localize.locale||gf}var zu=new _e("",{providedIn:"root",factory:()=>F(zu,{optional:!0,skipSelf:!0})||XB()});function On(n){return VS(n)}function Da(n,e){return zg(n,e?.equal)}var hD=class{[hi];constructor(e){this[hi]=e}destroy(){this[hi].destroy()}};var _D=Symbol("InputSignalNode#UNSET"),dU=ye(X({},jg),{transformFn:void 0,applyValueToInputSignal(n,e){au(n,e)}});function vD(n,e){let t=Object.create(dU);t.value=n,t.transformFn=e?.transform;function i(){if(ru(t),t.value===_D){let r=null;throw new le(-950,r)}return t.value}return i[hi]=t,i}var V_=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>af(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},hU=new _e("");hU.__NG_ELEMENT_ID__=n=>{let e=Mn();if(e===null)throw new le(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new le(204,!1)};function fD(n,e){return vD(n,e)}function fU(n){return vD(_D,n)}var yD=(fD.required=fU,fD);var aw=new _e(""),pU=new _e("");function vf(n){return!n.moduleRef}function gU(n){let e=vf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(mt);return t.run(()=>{vf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Di),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),vf(n)){let o=()=>e.destroy(),a=n.platformInjector.get(aw);a.add(o),e.onDestroy(()=>{r.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(aw);a.add(o),n.moduleRef.onDestroy(()=>{Xh(n.allPlatformModules,n.moduleRef),r.unsubscribe(),a.delete(o)})}return _U(i,t,()=>{let o=e.get(Mo),a=o.add(),l=e.get(Xx);return l.runInitializers(),l.donePromise.then(()=>{let u=e.get(zu,gf);if(K2(u||gf),!e.get(pU,!0))return vf(n)?e.get(Ps):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(vf(n)){let g=e.get(Ps);return n.rootComponent!==void 0&&g.bootstrap(n.rootComponent),g}else return mU?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(a))})})}var mU;function _U(n,e,t){try{let i=t();return Ms(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var F_=null;function vU(n=[],e){return Gt.create({name:e,providers:[{provide:zh,useValue:"platform"},{provide:aw,useValue:new Set([()=>F_=null])},...n]})}function yU(n=[]){if(F_)return F_;let e=vU(n);return F_=e,G2(),bU(e),e}function bU(n){let e=n.get(y_,null);In(n,()=>{e?.forEach(t=>t())})}function hw(){return!1}var ko=(()=>{class n{static __NG_ELEMENT_ID__=xU}return n})();function xU(n){return wU(Mn(),Le(),(n&16)===16)}function wU(n,e,t){if(Pa(n)&&!t){let i=br(n.index,e);return new Ta(i,i)}else if(n.type&175){let i=e[tr];return new Ta(i,e)}return null}var cw=class{constructor(){}supports(e){return Wx(e)}create(e){return new lw(e)}},CU=(n,e)=>e,lw=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||CU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let a=!i||t&&t.currentIndex<pD(i,r,o)?t:i,l=pD(a,r,o),u=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(t=t._next,a.previousIndex==null)r++;else{o||(o=[]);let f=l-r,g=u-r;if(f!=g){for(let E=0;E<f;E++){let I=E<o.length?o[E]:o[E]=0,R=I+E;g<=R&&R<f&&(o[E]=I+1)}let b=a.previousIndex;o[b]=g-f}}l!==u&&e(a,l,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Wx(e))throw new le(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,a;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],a=this._trackByFn(l,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,l),i=!0):(i&&(t=this._verifyReinsertion(t,o,a,l)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,D2(e,l=>{a=this._trackByFn(r,l),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,l,a,r),i=!0):(i&&(t=this._verifyReinsertion(t,l,a,r)),Object.is(t.item,l)||this._addIdentityChange(t,l)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new uw(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new B_),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new B_),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},uw=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},dw=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},B_=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new dw,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function pD(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function gD(){return new fw([new cw])}var fw=(()=>{class n{factories;static \u0275prov=he({token:n,providedIn:"root",factory:gD});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let i=F(n,{optional:!0,skipSelf:!0});return n.create(t,i||gD())}}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new le(901,!1)}}return n})();function bD(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;Lt(8);try{let o=r?.injector??yU(i),a=[lD({}),{provide:_s,useExisting:dD},PT,...t||[]],l=new of({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return gU({r3Injector:l.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Lt(9)}}function Aa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function xD(n){let e=ys(n);if(!e)return null;let t=new Gc(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ED=null;function Cr(){return ED}function pw(n){ED??=n}var yf=class{},bf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(ID),providedIn:"platform"})}return n})(),gw=new _e(""),ID=(()=>{class n extends bf{_location;_history;_doc=F(Pn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cr().getBaseHref(this._doc)}onPopState(t){let i=Cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=Cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function U_(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function wD(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Kr(n){return n&&n[0]!=="?"?`?${n}`:n}var Zr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(j_),providedIn:"root"})}return n})(),z_=new _e(""),j_=(()=>{class n extends Zr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??F(Pn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U_(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Kr(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Kr(o));this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Kr(o));this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Be(bf),Be(z_,8))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ka=(()=>{class n{_subject=new Jt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=MU(wD(CD(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Kr(i))}normalize(t){return n.stripTrailingSlash(IU(this._basePath,CD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Kr(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Kr(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Kr;static joinWithSlash=U_;static stripTrailingSlash=wD;static \u0275fac=function(i){return new(i||n)(Be(Zr))};static \u0275prov=he({token:n,factory:()=>EU(),providedIn:"root"})}return n})();function EU(){return new ka(Be(Zr))}function IU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function CD(n){return n.replace(/\/index.html$/,"")}function MU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ew=(()=>{class n extends Zr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=U_(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let a=this.prepareExternalUrl(r+Kr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,o){let a=this.prepareExternalUrl(r+Kr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Be(bf),Be(z_,8))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();var Iw=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(Iw||{});var gi=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(gi||{}),Ft=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ft||{}),ji=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(ji||{}),Hi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function DD(n){return zi(n)[fn.LocaleId]}function AD(n,e,t){let i=zi(n),r=[i[fn.DayPeriodsFormat],i[fn.DayPeriodsStandalone]],o=Er(r,e);return Er(o,t)}function kD(n,e,t){let i=zi(n),r=[i[fn.DaysFormat],i[fn.DaysStandalone]],o=Er(r,e);return Er(o,t)}function RD(n,e,t){let i=zi(n),r=[i[fn.MonthsFormat],i[fn.MonthsStandalone]],o=Er(r,e);return Er(o,t)}function ND(n,e){let i=zi(n)[fn.Eras];return Er(i,e)}function xf(n,e){let t=zi(n);return Er(t[fn.DateFormat],e)}function wf(n,e){let t=zi(n);return Er(t[fn.TimeFormat],e)}function Cf(n,e){let i=zi(n)[fn.DateTimeFormat];return Er(i,e)}function Ro(n,e){let t=zi(n),i=t[fn.NumberSymbols][e];if(typeof i>"u"){if(e===Hi.CurrencyDecimal)return t[fn.NumberSymbols][Hi.Decimal];if(e===Hi.CurrencyGroup)return t[fn.NumberSymbols][Hi.Group]}return i}function LD(n,e){return zi(n)[fn.NumberFormats][e]}function FD(n){if(!n[fn.ExtraData])throw new le(2303,!1)}function VD(n){let e=zi(n);return FD(e),(e[fn.ExtraData][2]||[]).map(i=>typeof i=="string"?mw(i):[mw(i[0]),mw(i[1])])}function BD(n,e,t){let i=zi(n);FD(i);let r=[i[fn.ExtraData][0],i[fn.ExtraData][1]],o=Er(r,e)||[];return Er(o,t)||[]}function Er(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new le(2304,!1)}function mw(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var PU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,H_={},SU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function UD(n,e,t,i){let r=FU(n);e=Ts(t,e)||e;let a=[],l;for(;e;)if(l=SU.exec(e),l){a=a.concat(l.slice(1));let g=a.pop();if(!g)break;e=g}else{a.push(e);break}let u=r.getTimezoneOffset();i&&(u=jD(i,u),r=LU(r,i));let f="";return a.forEach(g=>{let b=RU(g);f+=b?b(r,t,u):g==="''"?"'":g.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function K_(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Ts(n,e){let t=DD(n);if(H_[t]??={},H_[t][e])return H_[t][e];let i="";switch(e){case"shortDate":i=xf(n,ji.Short);break;case"mediumDate":i=xf(n,ji.Medium);break;case"longDate":i=xf(n,ji.Long);break;case"fullDate":i=xf(n,ji.Full);break;case"shortTime":i=wf(n,ji.Short);break;case"mediumTime":i=wf(n,ji.Medium);break;case"longTime":i=wf(n,ji.Long);break;case"fullTime":i=wf(n,ji.Full);break;case"short":let r=Ts(n,"shortTime"),o=Ts(n,"shortDate");i=$_(Cf(n,ji.Short),[r,o]);break;case"medium":let a=Ts(n,"mediumTime"),l=Ts(n,"mediumDate");i=$_(Cf(n,ji.Medium),[a,l]);break;case"long":let u=Ts(n,"longTime"),f=Ts(n,"longDate");i=$_(Cf(n,ji.Long),[u,f]);break;case"full":let g=Ts(n,"fullTime"),b=Ts(n,"fullDate");i=$_(Cf(n,ji.Full),[g,b]);break}return i&&(H_[t][e]=i),i}function $_(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function Yr(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let a=String(n);for(;a.length<e;)a="0"+a;return i&&(a=a.slice(a.length-e)),o+a}function TU(n,e){return Yr(n,3).substring(0,e)}function Dn(n,e,t=0,i=!1,r=!1){return function(o,a){let l=OU(n,o);if((t>0||l>-t)&&(l+=t),n===3)l===0&&t===-12&&(l=12);else if(n===6)return TU(l,e);let u=Ro(a,Hi.MinusSign);return Yr(l,e,u,i,r)}}function OU(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new le(2301,!1)}}function Wt(n,e,t=gi.Format,i=!1){return function(r,o){return DU(r,o,n,e,t,i)}}function DU(n,e,t,i,r,o){switch(t){case 2:return RD(e,r,i)[n.getMonth()];case 1:return kD(e,r,i)[n.getDay()];case 0:let a=n.getHours(),l=n.getMinutes();if(o){let f=VD(e),g=BD(e,r,i),b=f.findIndex(E=>{if(Array.isArray(E)){let[I,R]=E,W=a>=I.hours&&l>=I.minutes,q=a<R.hours||a===R.hours&&l<R.minutes;if(I.hours<R.hours){if(W&&q)return!0}else if(W||q)return!0}else if(E.hours===a&&E.minutes===l)return!0;return!1});if(b!==-1)return g[b]}return AD(e,r,i)[a<12?0:1];case 3:return ND(e,i)[n.getFullYear()<=0?0:1];default:let u=t;throw new le(2302,!1)}}function G_(n){return function(e,t,i){let r=-1*i,o=Ro(t,Hi.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+Yr(a,2,o)+Yr(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+Yr(a,1,o);case 2:return"GMT"+(r>=0?"+":"")+Yr(a,2,o)+":"+Yr(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+Yr(a,2,o)+":"+Yr(Math.abs(r%60),2,o);default:throw new le(2310,!1)}}}var AU=0,W_=4;function kU(n){let e=K_(n,AU,1).getDay();return K_(n,0,1+(e<=W_?W_:W_+7)-e)}function zD(n){let e=n.getDay(),t=e===0?-3:W_-e;return K_(n.getFullYear(),n.getMonth(),n.getDate()+t)}function _w(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,a=t.getDate();r=1+Math.floor((a+o)/7)}else{let o=zD(t),a=kU(o.getFullYear()),l=o.getTime()-a.getTime();r=1+Math.round(l/6048e5)}return Yr(r,n,Ro(i,Hi.MinusSign))}}function q_(n,e=!1){return function(t,i){let o=zD(t).getFullYear();return Yr(o,n,Ro(i,Hi.MinusSign),e)}}var vw={};function RU(n){if(vw[n])return vw[n];let e;switch(n){case"G":case"GG":case"GGG":e=Wt(3,Ft.Abbreviated);break;case"GGGG":e=Wt(3,Ft.Wide);break;case"GGGGG":e=Wt(3,Ft.Narrow);break;case"y":e=Dn(0,1,0,!1,!0);break;case"yy":e=Dn(0,2,0,!0,!0);break;case"yyy":e=Dn(0,3,0,!1,!0);break;case"yyyy":e=Dn(0,4,0,!1,!0);break;case"Y":e=q_(1);break;case"YY":e=q_(2,!0);break;case"YYY":e=q_(3);break;case"YYYY":e=q_(4);break;case"M":case"L":e=Dn(1,1,1);break;case"MM":case"LL":e=Dn(1,2,1);break;case"MMM":e=Wt(2,Ft.Abbreviated);break;case"MMMM":e=Wt(2,Ft.Wide);break;case"MMMMM":e=Wt(2,Ft.Narrow);break;case"LLL":e=Wt(2,Ft.Abbreviated,gi.Standalone);break;case"LLLL":e=Wt(2,Ft.Wide,gi.Standalone);break;case"LLLLL":e=Wt(2,Ft.Narrow,gi.Standalone);break;case"w":e=_w(1);break;case"ww":e=_w(2);break;case"W":e=_w(1,!0);break;case"d":e=Dn(2,1);break;case"dd":e=Dn(2,2);break;case"c":case"cc":e=Dn(7,1);break;case"ccc":e=Wt(1,Ft.Abbreviated,gi.Standalone);break;case"cccc":e=Wt(1,Ft.Wide,gi.Standalone);break;case"ccccc":e=Wt(1,Ft.Narrow,gi.Standalone);break;case"cccccc":e=Wt(1,Ft.Short,gi.Standalone);break;case"E":case"EE":case"EEE":e=Wt(1,Ft.Abbreviated);break;case"EEEE":e=Wt(1,Ft.Wide);break;case"EEEEE":e=Wt(1,Ft.Narrow);break;case"EEEEEE":e=Wt(1,Ft.Short);break;case"a":case"aa":case"aaa":e=Wt(0,Ft.Abbreviated);break;case"aaaa":e=Wt(0,Ft.Wide);break;case"aaaaa":e=Wt(0,Ft.Narrow);break;case"b":case"bb":case"bbb":e=Wt(0,Ft.Abbreviated,gi.Standalone,!0);break;case"bbbb":e=Wt(0,Ft.Wide,gi.Standalone,!0);break;case"bbbbb":e=Wt(0,Ft.Narrow,gi.Standalone,!0);break;case"B":case"BB":case"BBB":e=Wt(0,Ft.Abbreviated,gi.Format,!0);break;case"BBBB":e=Wt(0,Ft.Wide,gi.Format,!0);break;case"BBBBB":e=Wt(0,Ft.Narrow,gi.Format,!0);break;case"h":e=Dn(3,1,-12);break;case"hh":e=Dn(3,2,-12);break;case"H":e=Dn(3,1);break;case"HH":e=Dn(3,2);break;case"m":e=Dn(4,1);break;case"mm":e=Dn(4,2);break;case"s":e=Dn(5,1);break;case"ss":e=Dn(5,2);break;case"S":e=Dn(6,1);break;case"SS":e=Dn(6,2);break;case"SSS":e=Dn(6,3);break;case"Z":case"ZZ":case"ZZZ":e=G_(0);break;case"ZZZZZ":e=G_(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=G_(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=G_(2);break;default:return null}return vw[n]=e,e}function jD(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function NU(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function LU(n,e,t){let r=n.getTimezoneOffset(),o=jD(e,r);return NU(n,-1*(o-r))}function FU(n){if(MD(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,a=1]=n.split("-").map(l=>+l);return K_(r,o-1,a)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(PU))return VU(i)}let e=new Date(n);if(!MD(e))throw new le(2311,!1);return e}function VU(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let a=Number(n[4]||0)-t,l=Number(n[5]||0)-i,u=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,a,l,u,f),e}function MD(n){return n instanceof Date&&!isNaN(n.valueOf())}var BU=/^(\d+)?\.((\d+)(-(\d+))?)?$/,PD=22,Z_=".",Ef="0",UU=";",zU=",",yw="#";function jU(n,e,t,i,r,o,a=!1){let l="",u=!1;if(!isFinite(n))l=Ro(t,Hi.Infinity);else{let f=GU(n);a&&(f=$U(f));let g=e.minInt,b=e.minFrac,E=e.maxFrac;if(o){let ge=o.match(BU);if(ge===null)throw new le(2306,!1);let we=ge[1],Re=ge[3],jt=ge[5];we!=null&&(g=bw(we)),Re!=null&&(b=bw(Re)),jt!=null?E=bw(jt):Re!=null&&b>E&&(E=b)}qU(f,b,E);let I=f.digits,R=f.integerLen,W=f.exponent,q=[];for(u=I.every(ge=>!ge);R<g;R++)I.unshift(0);for(;R<0;R++)I.unshift(0);R>0?q=I.splice(R,I.length):(q=I,I=[0]);let ie=[];for(I.length>=e.lgSize&&ie.unshift(I.splice(-e.lgSize,I.length).join(""));I.length>e.gSize;)ie.unshift(I.splice(-e.gSize,I.length).join(""));I.length&&ie.unshift(I.join("")),l=ie.join(Ro(t,i)),q.length&&(l+=Ro(t,r)+q.join("")),W&&(l+=Ro(t,Hi.Exponential)+"+"+W)}return n<0&&!u?l=e.negPre+l+e.negSuf:l=e.posPre+l+e.posSuf,l}function HD(n,e,t){let i=LD(e,Iw.Decimal),r=HU(i,Ro(e,Hi.MinusSign));return jU(n,r,e,Hi.Group,Hi.Decimal,t)}function HU(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(UU),r=i[0],o=i[1],a=r.indexOf(Z_)!==-1?r.split(Z_):[r.substring(0,r.lastIndexOf(Ef)+1),r.substring(r.lastIndexOf(Ef)+1)],l=a[0],u=a[1]||"";t.posPre=l.substring(0,l.indexOf(yw));for(let g=0;g<u.length;g++){let b=u.charAt(g);b===Ef?t.minFrac=t.maxFrac=g+1:b===yw?t.maxFrac=g+1:t.posSuf+=b}let f=l.split(zU);if(t.gSize=f[1]?f[1].length:0,t.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let g=r.length-t.posPre.length-t.posSuf.length,b=o.indexOf(yw);t.negPre=o.substring(0,b).replace(/'/g,""),t.negSuf=o.slice(b+g).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function $U(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function GU(n){let e=Math.abs(n)+"",t=0,i,r,o,a,l;for((r=e.indexOf(Z_))>-1&&(e=e.replace(Z_,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===Ef;o++);if(o===(l=e.length))i=[0],r=1;else{for(l--;e.charAt(l)===Ef;)l--;for(r-=o,i=[],a=0;o<=l;o++,a++)i[a]=Number(e.charAt(o))}return r>PD&&(i=i.splice(0,PD-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function qU(n,e,t){if(e>t)throw new le(2307,!1);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),a=o+n.integerLen,l=i[a];if(a>0){i.splice(Math.max(n.integerLen,a));for(let b=a;b<i.length;b++)i[b]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let b=1;b<a;b++)i[b]=0}if(l>=5)if(a-1<0){for(let b=0;b>a;b--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[a-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+n.integerLen,g=i.reduceRight(function(b,E,I,R){return E=E+b,R[I]=E<10?E:E-10,u&&(R[I]===0&&I>=f?R.pop():u=!1),E>=10?1:0},0);g&&(i.unshift(g),n.integerLen++)}function bw(n){let e=parseInt(n);if(isNaN(e))throw new le(2305,!1);return e}var xw=/\s+/,SD=[],Os=(()=>{class n{_ngEl;_renderer;initialClasses=SD;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(xw):SD}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(xw):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(xw).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(De(fi),De(wr))};static \u0275dir=qt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Y_=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},An=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,a)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new Y_(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let l=i.get(o);i.move(l,a),TD(l,r)}});for(let r=0,o=i.length;r<o;r++){let l=i.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);TD(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(De(Is),De(Oa),De(fw))};static \u0275dir=qt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function TD(n,e){n.context.$implicit=e.item}var zt=(()=>{class n{_viewContainer;_context=new Q_;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){OD(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){OD(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(De(Is),De(Oa))};static \u0275dir=qt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Q_=class{$implicit=null;ngIf=null};function OD(n,e){if(n&&!n.createEmbeddedView)throw new le(2020,!1)}function J_(n,e){return new le(2100,!1)}var ww=class{createSubscription(e,t,i){return On(()=>e.subscribe({next:t,error:i}))}dispose(e){On(()=>e.unsubscribe())}},Cw=class{createSubscription(e,t,i){return e.then(r=>t?.(r),r=>i?.(r)),{unsubscribe:()=>{t=null,i=null}}}dispose(e){e.unsubscribe()}},WU=new Cw,KU=new ww,ln=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=F(Di);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i),i=>this.applicationErrorHandler(i))}_selectStrategy(t){if(Ms(t))return WU;if(R_(t))return KU;throw J_(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(De(ko,16))};static \u0275pipe=Bu({name:"async",type:n,pure:!1})}return n})();var Ds=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw J_(n,t);return t.toUpperCase()}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Bu({name:"uppercase",type:n,pure:!0})}return n})(),ZU="mediumDate",$D=new _e(""),GD=new _e(""),Qr=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let a=i??this.defaultOptions?.dateFormat??ZU,l=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return UD(t,a,o||this.locale,l)}catch(a){throw J_(n,a.message)}}static \u0275fac=function(i){return new(i||n)(De(zu,16),De($D,24),De(GD,24))};static \u0275pipe=Bu({name:"date",type:n,pure:!0})}return n})();var If=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,r){if(!YU(t))return null;r||=this._locale;try{let o=QU(t);return HD(o,r,i)}catch(o){throw J_(n,o.message)}}static \u0275fac=function(i){return new(i||n)(De(zu,16))};static \u0275pipe=Bu({name:"number",type:n,pure:!0})}return n})();function YU(n){return!(n==null||n===""||n!==n)}function QU(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new le(2309,!1);return n}var ht=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ao({type:n});static \u0275inj=zr({})}return n})();function Mw(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Mf=class{};var Sw="browser";function qD(n){return n===Sw}var WD=(()=>{class n{static \u0275prov=he({token:n,providedIn:"root",factory:()=>new Pw(F(Pn),window)})}return n})(),Pw=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ye(X({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let i=JU(this.document,e);i&&(this.scrollToElement(i,t),i.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(wa(2400,!1))}}scrollToElement(e,t){let i=e.getBoundingClientRect(),r=i.left+this.window.pageXOffset,o=i.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(ye(X({},t),{left:r-a[0],top:o-a[1]}))}};function JU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}var Pf=class{_doc;constructor(e){this._doc=e}manager},X_=(()=>{class n extends Pf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Be(Pn))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),t0=new _e(""),kw=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(a=>{a.manager=this});let r=t.filter(a=>!(a instanceof X_));this._plugins=r.slice().reverse();let o=t.find(a=>a instanceof X_);o&&this._plugins.push(o)}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new le(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Be(t0),Be(mt))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Tw="ng-app-id";function KD(n){for(let e of n)e.remove()}function ZD(n,e){let t=e.createElement("style");return t.textContent=n,t}function XU(n,e,t,i){let r=n.head?.querySelectorAll(`style[${Tw}="${e}"],link[${Tw}="${e}"]`);if(r)for(let o of r)o.removeAttribute(Tw),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Dw(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Rw=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,XU(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,ZD);i?.forEach(r=>this.addUsage(r,this.external,Dw))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(KD(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])KD(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,ZD(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,Dw(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Be(Pn),Be(v_),Be(b_,8),Be(Cs))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Ow={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Nw=/%COMP%/g;var QD="%COMP%",ez=`_nghost-${QD}`,tz=`_ngcontent-${QD}`,nz=!0,iz=new _e("",{providedIn:"root",factory:()=>nz});function rz(n){return tz.replace(Nw,n)}function oz(n){return ez.replace(Nw,n)}function JD(n,e){return e.map(t=>t.replace(Nw,n))}var Lw=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,a,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new Sf(t,a,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof e0?r.applyToHost(t):r instanceof Tf&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,l=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,b=this.platformIsServer,E=this.tracingService;switch(i.encapsulation){case ws.Emulated:o=new e0(u,f,i,this.appId,g,a,l,b,E);break;case ws.ShadowDom:return new Aw(u,f,t,i,a,l,this.nonce,b,E);default:o=new Tf(u,f,i,g,a,l,b,E);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(Be(kw),Be(Rw),Be(v_),Be(iz),Be(Pn),Be(mt),Be(b_),Be(Zc,8))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),Sf=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Ow[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(YD(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(YD(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new le(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=Ow[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Ow[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(So.DashCase|So.Important)?e.style.setProperty(t,i,r&So.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&So.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=Cr().getGlobalEventTarget(this.doc,e),!e))throw new le(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function YD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Aw=class extends Sf{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,a,l,u,f){super(e,o,a,u,f),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let g=r.styles;g=JD(r.id,g);for(let E of g){let I=document.createElement("style");l&&I.setAttribute("nonce",l),I.textContent=E,this.shadowRoot.appendChild(I)}let b=r.getExternalStyles?.();if(b)for(let E of b){let I=Dw(E,o);l&&I.setAttribute("nonce",l),this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Tf=class extends Sf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,a,l,u,f){super(e,o,a,l,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let g=i.styles;this.styles=f?JD(f,g):g,this.styleUrls=i.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Hc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},e0=class extends Tf{contentAttr;hostAttr;constructor(e,t,i,r,o,a,l,u,f){let g=r+"-"+i.id;super(e,t,i,o,a,l,u,f,g),this.contentAttr=rz(g),this.hostAttr=oz(g)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var n0=class n extends yf{supportsDOMEvents=!0;static makeCurrent(){pw(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=sz();return t==null?null:az(t)}resetBaseElement(){Of=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Mw(document.cookie,e)}},Of=null;function sz(){return Of=Of||document.head.querySelector("base"),Of?Of.getAttribute("href"):null}function az(n){return new URL(n,document.baseURI).pathname}var cz=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),XD=["alt","control","meta","shift"],lz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uz={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},eA=(()=>{class n extends Pf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let a=n.parseEventName(i),l=n.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cr().onAndCancel(t,a.domEventName,l,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),XD.forEach(f=>{let g=i.indexOf(f);g>-1&&(i.splice(g,1),a+=f+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(t,i){let r=lz[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),XD.forEach(a=>{if(a!==r){let l=uz[a];l(t)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Be(Pn))};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function Fw(n,e,t){let i=X({rootComponent:n,platformRef:t?.platformRef},dz(e));return bD(i)}function dz(n){return{appProviders:[...mz,...n?.providers??[]],platformProviders:gz}}function hz(){n0.makeCurrent()}function fz(){return new Br}function pz(){return yx(document),document}var gz=[{provide:Cs,useValue:Sw},{provide:y_,useValue:hz,multi:!0},{provide:Pn,useFactory:pz}];var mz=[{provide:zh,useValue:"root"},{provide:Br,useFactory:fz},{provide:t0,useClass:X_,multi:!0,deps:[Pn]},{provide:t0,useClass:eA,multi:!0,deps:[Pn]},Lw,Rw,kw,{provide:$c,useExisting:Lw},{provide:Mf,useClass:cz},[]];var tA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(Be(Pn))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qe="primary",Hf=Symbol("RouteTitle"),jw=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function nl(n){return new jw(n)}function lA(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],l=n[o];if(a[0]===":")r[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function vz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!No(n[t],e[t]))return!1;return!0}function No(n,e){let t=n?Hw(n):void 0,i=e?Hw(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!uA(n[r],e[r]))return!1;return!0}function Hw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function uA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function dA(n){return n.length>0?n[n.length-1]:null}function As(n){return yb(n)?n:Ms(n)?Nt(Promise.resolve(n)):Me(n)}var yz={exact:fA,subset:pA},hA={exact:bz,subset:xz,ignored:()=>!0};function nA(n,e,t){return yz[t.paths](n.root,e.root,t.matrixParams)&&hA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function bz(n,e){return No(n,e)}function fA(n,e,t){if(!el(n.segments,e.segments)||!o0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!fA(n.children[i],e.children[i],t))return!1;return!0}function xz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uA(n[t],e[t]))}function pA(n,e,t){return gA(n,e,e.segments,t)}function gA(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!el(r,t)||e.hasChildren()||!o0(r,t,i))}else if(n.segments.length===t.length){if(!el(n.segments,t)||!o0(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!pA(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!el(n.segments,r)||!o0(n.segments,r,i)||!n.children[qe]?!1:gA(n.children[qe],e,o,i)}}function o0(n,e,t){return e.every((i,r)=>hA[t](n[r].parameters,i.parameters))}var Fo=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ot([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=nl(this.queryParams),this._queryParamMap}toString(){return Ez.serialize(this)}},Ot=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return s0(this)}},Ra=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=nl(this.parameters),this._parameterMap}toString(){return _A(this)}};function wz(n,e){return el(n,e)&&n.every((t,i)=>No(t.parameters,e[i].parameters))}function el(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function Cz(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===qe&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==qe&&(t=t.concat(e(r,i)))}),t}var il=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>new Na,providedIn:"root"})}return n})(),Na=class{parse(e){let t=new Gw(e);return new Fo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Df(e.root,!0)}`,i=Pz(e.queryParams),r=typeof e.fragment=="string"?`#${Iz(e.fragment)}`:"";return`${t}${i}${r}`}},Ez=new Na;function s0(n){return n.segments.map(e=>_A(e)).join("/")}function Df(n,e){if(!n.hasChildren())return s0(n);if(e){let t=n.children[qe]?Df(n.children[qe],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==qe&&i.push(`${r}:${Df(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Cz(n,(i,r)=>r===qe?[Df(n.children[qe],!1)]:[`${r}:${Df(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[qe]!=null?`${s0(n)}/${t[0]}`:`${s0(n)}/(${t.join("//")})`}}function mA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function i0(n){return mA(n).replace(/%3B/gi,";")}function Iz(n){return encodeURI(n)}function $w(n){return mA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function a0(n){return decodeURIComponent(n)}function iA(n){return a0(n.replace(/\+/g,"%20"))}function _A(n){return`${$w(n.path)}${Mz(n.parameters)}`}function Mz(n){return Object.entries(n).map(([e,t])=>`;${$w(e)}=${$w(t)}`).join("")}function Pz(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${i0(t)}=${i0(r)}`).join("&"):`${i0(t)}=${i0(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Sz=/^[^\/()?;#]+/;function Vw(n){let e=n.match(Sz);return e?e[0]:""}var Tz=/^[^\/()?;=#]+/;function Oz(n){let e=n.match(Tz);return e?e[0]:""}var Dz=/^[^=?&#]+/;function Az(n){let e=n.match(Dz);return e?e[0]:""}var kz=/^[^&#]+/;function Rz(n){let e=n.match(kz);return e?e[0]:""}var Gw=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ot([],{}):new Ot([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[qe]=new Ot(e,t)),i}parseSegment(){let e=Vw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new le(4009,!1);return this.capture(e),new Ra(a0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Oz(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Vw(this.remaining);r&&(i=r,this.capture(i))}e[a0(t)]=a0(i)}parseQueryParam(e){let t=Az(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=Rz(this.remaining);a&&(i=a,this.capture(i))}let r=iA(t),o=iA(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Vw(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new le(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=qe);let a=this.parseChildren();t[o??qe]=Object.keys(a).length===1&&a[qe]?a[qe]:new Ot([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new le(4011,!1)}};function vA(n){return n.segments.length>0?new Ot([],{[qe]:n}):n}function yA(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=yA(r);if(i===qe&&o.segments.length===0&&o.hasChildren())for(let[a,l]of Object.entries(o.children))e[a]=l;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Ot(n.segments,e);return Nz(t)}function Nz(n){if(n.numberOfChildren===1&&n.children[qe]){let e=n.children[qe];return new Ot(n.segments.concat(e.segments),e.children)}return n}function La(n){return n instanceof Fo}function bA(n,e,t=null,i=null){let r=xA(n);return wA(r,e,t,i)}function xA(n){let e;function t(o){let a={};for(let u of o.children){let f=t(u);a[u.outlet]=f}let l=new Ot(o.url,a);return o===n&&(e=l),l}let i=t(n.root),r=vA(i);return e??r}function wA(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Bw(r,r,r,t,i);let o=Lz(e);if(o.toRoot())return Bw(r,r,new Ot([],{}),t,i);let a=Fz(o,r,n),l=a.processChildren?kf(a.segmentGroup,a.index,o.commands):EA(a.segmentGroup,a.index,o.commands);return Bw(r,a.segmentGroup,l,t,i)}function c0(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Nf(n){return typeof n=="object"&&n!=null&&n.outlets}function Bw(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(g=>`${g}`):`${f}`});let a;n===e?a=t:a=CA(n,e,t);let l=vA(yA(a));return new Fo(l,o,r)}function CA(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=CA(o,e,t)}),new Ot(n.segments,i)}var l0=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&c0(i[0]))throw new le(4003,!1);let r=i.find(Nf);if(r&&r!==dA(i))throw new le(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Lz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new l0(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let l={};return Object.entries(o.outlets).forEach(([u,f])=>{l[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?t=!0:l===".."?e++:l!=""&&r.push(l))}),r):[...r,o]},[]);return new l0(t,e,i)}var $u=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function Fz(n,e,t){if(n.isAbsolute)return new $u(e,!0,0);if(!t)return new $u(e,!1,NaN);if(t.parent===null)return new $u(t,!0,0);let i=c0(n.commands[0])?0:1,r=t.segments.length-1+i;return Vz(t,r,n.numberOfDoubleDots)}function Vz(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new le(4005,!1);r=i.segments.length}return new $u(i,!1,r-o)}function Bz(n){return Nf(n[0])?n[0].outlets:{[qe]:n}}function EA(n,e,t){if(n??=new Ot([],{}),n.segments.length===0&&n.hasChildren())return kf(n,e,t);let i=Uz(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Ot(n.segments.slice(0,i.pathIndex),{});return o.children[qe]=new Ot(n.segments.slice(i.pathIndex),n.children),kf(o,0,r)}else return i.match&&r.length===0?new Ot(n.segments,{}):i.match&&!n.hasChildren()?qw(n,e,t):i.match?kf(n,0,r):qw(n,e,t)}function kf(n,e,t){if(t.length===0)return new Ot(n.segments,{});{let i=Bz(t),r={};if(Object.keys(i).some(o=>o!==qe)&&n.children[qe]&&n.numberOfChildren===1&&n.children[qe].segments.length===0){let o=kf(n.children[qe],e,t);return new Ot(n.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=EA(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new Ot(n.segments,r)}}function Uz(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let a=n.segments[r],l=t[i];if(Nf(l))break;let u=`${l}`,f=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!oA(u,f,a))return o;i+=2}else{if(!oA(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function qw(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Nf(o)){let u=zz(o.outlets);return new Ot(i,u)}if(r===0&&c0(t[0])){let u=n.segments[e];i.push(new Ra(u.path,rA(t[0]))),r++;continue}let a=Nf(o)?o.outlets[qe]:`${o}`,l=r<t.length-1?t[r+1]:null;a&&l&&c0(l)?(i.push(new Ra(a,rA(l))),r+=2):(i.push(new Ra(a,{})),r++)}return new Ot(i,{})}function zz(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=qw(new Ot([],{}),0,i))}),e}function rA(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function oA(n,e,t){return n==t.path&&No(e,t.parameters)}var Gu="imperative",zn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(zn||{}),sr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Fa=class extends sr{type=zn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ar=class extends sr{urlAfterRedirects;type=zn.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ai=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Ai||{}),Wu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Wu||{}),Lo=class extends sr{reason;code;type=zn.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Vo=class extends sr{reason;code;type=zn.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},Ku=class extends sr{error;target;type=zn.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lf=class extends sr{urlAfterRedirects;state;type=zn.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},u0=class extends sr{urlAfterRedirects;state;type=zn.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},d0=class extends sr{urlAfterRedirects;state;shouldActivate;type=zn.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},h0=class extends sr{urlAfterRedirects;state;type=zn.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},f0=class extends sr{urlAfterRedirects;state;type=zn.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},p0=class{route;type=zn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},g0=class{route;type=zn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},m0=class{snapshot;type=zn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_0=class{snapshot;type=zn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},v0=class{snapshot;type=zn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},y0=class{snapshot;type=zn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zu=class{routerEvent;position;anchor;type=zn.Scroll;constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ff=class{},Yu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function jz(n){return!(n instanceof Ff)&&!(n instanceof Yu)}function Hz(n,e){return n.providers&&!n._injector&&(n._injector=Vu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jr(n){return n.outlet||qe}function $z(n,e){let t=n.filter(i=>Jr(i)===e);return t.push(...n.filter(i=>Jr(i)!==e)),t}function Xu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var b0=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Xu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new rl(this.rootInjector)}},rl=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new b0(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(Be(yn))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),x0=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Ww(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Ww(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Kw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Kw(e,this._root).map(t=>t.value)}};function Ww(n,e){if(n===e.value)return e;for(let t of e.children){let i=Ww(n,t);if(i)return i}return null}function Kw(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Kw(n,t);if(i.length)return i.unshift(e),i}return[]}var or=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Hu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Vf=class extends x0{snapshot;constructor(e,t){super(e),this.snapshot=t,nC(this,e)}toString(){return this.snapshot.toString()}};function IA(n){let e=Gz(n),t=new bt([new Ra("",{})]),i=new bt({}),r=new bt({}),o=new bt({}),a=new bt(""),l=new mi(t,i,o,a,r,qe,n,e.root);return l.snapshot=e.root,new Vf(new or(l,[]),e)}function Gz(n){let e={},t={},i={},o=new tl([],e,i,"",t,qe,n,null,{});return new Bf("",new or(o,[]))}var mi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,a,l,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ue(f=>f[Hf]))??Me(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>nl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>nl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function w0(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:X(X({},e.params),n.params),data:X(X({},e.data),n.data),resolve:X(X(X(X({},n.data),e.data),r?.data),n._resolvedData)}:i={params:X({},n.params),data:X({},n.data),resolve:X(X({},n.data),n._resolvedData??{})},r&&PA(r)&&(i.resolve[Hf]=r.title),i}var tl=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Hf]}constructor(e,t,i,r,o,a,l,u,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=nl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=nl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Bf=class extends x0{url;constructor(e,t){super(t),this.url=e,nC(this,t)}toString(){return MA(this._root)}};function nC(n,e){e.value._routerState=n,e.children.forEach(t=>nC(n,t))}function MA(n){let e=n.children.length>0?` { ${n.children.map(MA).join(", ")} } `:"";return`${n.value}${e}`}function Uw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,No(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),No(e.params,t.params)||n.paramsSubject.next(t.params),vz(e.url,t.url)||n.urlSubject.next(t.url),No(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zw(n,e){let t=No(n.params,e.params)&&wz(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Zw(n.parent,e.parent))}function PA(n){return typeof n.title=="string"||n.title===null}var SA=new _e(""),$f=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=qe;activateEvents=new an;deactivateEvents=new an;attachEvents=new an;detachEvents=new an;routerOutletData=yD();parentContexts=F(rl);location=F(Is);changeDetector=F(ko);inputBinder=F(Gf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new le(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new le(4013,!1);this._activatedRoute=t;let r=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new Yw(t,l,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[To]})}return n})(),Yw=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===mi?this.route:e===rl?this.childContexts:e===SA?this.outletData:this.parent.get(e,t)}},Gf=new _e(""),iC=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=Mi([i.queryParams,i.params,i.data]).pipe(ri(([o,a,l],u)=>(l=X(X(X({},o),a),l),u===0?Me(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let a=xD(i.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})(),rC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=st({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&re(0,"router-outlet")},dependencies:[$f],encapsulation:2})}return n})();function oC(n){let e=n.children&&n.children.map(oC),t=e?ye(X({},n),{children:e}):X({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qe&&(t.component=rC),t}function qz(n,e,t){let i=Uf(n,e._root,t?t._root:void 0);return new Vf(i,e)}function Uf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=Wz(n,e,t);return new or(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(l=>Uf(n,l)),a}}let i=Kz(e.value),r=e.children.map(o=>Uf(n,o));return new or(i,r)}}function Wz(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Uf(n,i,r);return Uf(n,i)})}function Kz(n){return new mi(new bt(n.url),new bt(n.params),new bt(n.queryParams),new bt(n.fragment),new bt(n.data),n.outlet,n.component,n)}var Qu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},TA="ngNavigationCancelingError";function C0(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=La(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=OA(!1,Ai.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function OA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[TA]=!0,t.cancellationCode=e,t}function Zz(n){return DA(n)&&La(n.url)}function DA(n){return!!n&&n[TA]}var Yz=(n,e,t,i)=>ue(r=>(new Qw(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Qw=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Uw(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Hu(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Hu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),l=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Hu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Hu(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new y0(o.value.snapshot))}),e.children.length&&this.forwardEvent(new _0(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Uw(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),Uw(l.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},E0=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Qz(n,e,t){let i=n._root,r=e?e._root:null;return Af(i,r,t,[i.value])}function Jz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ed(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Lb(n)?n:e.get(n):i}function Af(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Hu(e);return n.children.forEach(a=>{Xz(a,o[a.value.outlet],t,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,l])=>Rf(l,t.getContext(a),r)),r}function Xz(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=ej(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new E0(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Af(n,e,l?l.children:null,i,r):Af(n,e,t,i,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new qu(l.outlet.component,a))}else a&&Rf(e,l,r),r.canActivateChecks.push(new E0(i)),o.component?Af(n,null,l?l.children:null,i,r):Af(n,null,t,i,r);return r}function ej(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!el(n.url,e.url);case"pathParamsOrQueryParamsChange":return!el(n.url,e.url)||!No(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zw(n,e)||!No(n.queryParams,e.queryParams);case"paramsChange":default:return!Zw(n,e)}}function Rf(n,e,t){let i=Hu(n),r=n.value;Object.entries(i).forEach(([o,a])=>{r.component?e?Rf(a,e.children.getContext(o),t):Rf(a,null,t):Rf(a,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new qu(e.outlet.component,r)):t.canDeactivateChecks.push(new qu(null,r)):t.canDeactivateChecks.push(new qu(null,r))}function qf(n){return typeof n=="function"}function tj(n){return typeof n=="boolean"}function nj(n){return n&&qf(n.canLoad)}function ij(n){return n&&qf(n.canActivate)}function rj(n){return n&&qf(n.canActivateChild)}function oj(n){return n&&qf(n.canDeactivate)}function sj(n){return n&&qf(n.canMatch)}function AA(n){return n instanceof Vr||n?.name==="EmptyError"}var r0=Symbol("INITIAL_VALUE");function Ju(){return ri(n=>Mi(n.map(e=>e.pipe(Zn(1),Ui(r0)))).pipe(ue(e=>{for(let t of e)if(t!==!0){if(t===r0)return r0;if(t===!1||aj(t))return t}return!0}),Pi(e=>e!==r0),Zn(1)))}function aj(n){return La(n)||n instanceof Qu}function cj(n,e){return vn(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?Me(ye(X({},t),{guardsResult:!0})):lj(a,i,r,n).pipe(vn(l=>l&&tj(l)?uj(i,o,n,e):Me(l)),ue(l=>ye(X({},t),{guardsResult:l})))})}function lj(n,e,t,i){return Nt(n).pipe(vn(r=>gj(r.component,r.route,t,e,i)),ps(r=>r!==!0,!0))}function uj(n,e,t,i){return Nt(e).pipe(_a(r=>vu(hj(r.route.parent,i),dj(r.route,i),pj(n,r.path,t),fj(n,r.route,t))),ps(r=>r!==!0,!0))}function dj(n,e){return n!==null&&e&&e(new v0(n)),Me(!0)}function hj(n,e){return n!==null&&e&&e(new m0(n)),Me(!0)}function fj(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Me(!0);let r=i.map(o=>kh(()=>{let a=Xu(e)??t,l=ed(o,a),u=ij(l)?l.canActivate(e,n):In(a,()=>l(e,n));return As(u).pipe(ps())}));return Me(r).pipe(Ju())}function pj(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>Jz(a)).filter(a=>a!==null).map(a=>kh(()=>{let l=a.guards.map(u=>{let f=Xu(a.node)??t,g=ed(u,f),b=rj(g)?g.canActivateChild(i,n):In(f,()=>g(i,n));return As(b).pipe(ps())});return Me(l).pipe(Ju())}));return Me(o).pipe(Ju())}function gj(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Me(!0);let a=o.map(l=>{let u=Xu(e)??r,f=ed(l,u),g=oj(f)?f.canDeactivate(n,e,t,i):In(u,()=>f(n,e,t,i));return As(g).pipe(ps())});return Me(a).pipe(Ju())}function mj(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Me(!0);let o=r.map(a=>{let l=ed(a,n),u=nj(l)?l.canLoad(e,t):In(n,()=>l(e,t));return As(u)});return Me(o).pipe(Ju(),kA(i))}function kA(n){return Wg(Yn(e=>{if(typeof e!="boolean")throw C0(n,e)}),ue(e=>e===!0))}function _j(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Me(!0);let o=r.map(a=>{let l=ed(a,n),u=sj(l)?l.canMatch(e,t):In(n,()=>l(e,t));return As(u)});return Me(o).pipe(Ju(),kA(i))}var zf=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},jf=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ju(n){return _u(new zf(n))}function vj(n){return _u(new le(4e3,!1))}function yj(n){return _u(OA(!1,Ai.GuardRejected))}var Jw=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Me(i);if(r.numberOfChildren>1||!r.children[qe])return vj(`${e.redirectTo}`);r=r.children[qe]}}applyRedirectCommands(e,t,i,r,o){return bj(t,r,o).pipe(ue(a=>{if(a instanceof Fo)throw new jf(a);let l=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,i);if(a[0]==="/")throw new jf(l);return l}))}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new Fo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let l=o.substring(1);i[r]=t[l]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),a={};return Object.entries(t.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(e,u,i,r)}),new Ot(o,a)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new le(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function bj(n,e,t){if(typeof n=="string")return Me(n);let i=n,{queryParams:r,fragment:o,routeConfig:a,url:l,outlet:u,params:f,data:g,title:b}=e;return As(In(t,()=>i({params:f,data:g,queryParams:r,fragment:o,routeConfig:a,url:l,outlet:u,title:b})))}var Xw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xj(n,e,t,i,r){let o=RA(n,e,t);return o.matched?(i=Hz(e,i),_j(i,e,t,r).pipe(ue(a=>a===!0?o:X({},Xw)))):Me(o)}function RA(n,e,t){if(e.path==="**")return wj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?X({},Xw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||lA)(t,n,e);if(!r)return X({},Xw);let o={};Object.entries(r.posParams??{}).forEach(([l,u])=>{o[l]=u.path});let a=r.consumed.length>0?X(X({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function wj(n){return{matched:!0,parameters:n.length>0?dA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function sA(n,e,t,i){return t.length>0&&Ij(n,t,i)?{segmentGroup:new Ot(e,Ej(i,new Ot(t,n.children))),slicedSegments:[]}:t.length===0&&Mj(n,t,i)?{segmentGroup:new Ot(n.segments,Cj(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Ot(n.segments,n.children),slicedSegments:t}}function Cj(n,e,t,i){let r={};for(let o of t)if(M0(n,e,o)&&!i[Jr(o)]){let a=new Ot([],{});r[Jr(o)]=a}return X(X({},i),r)}function Ej(n,e){let t={};t[qe]=e;for(let i of n)if(i.path===""&&Jr(i)!==qe){let r=new Ot([],{});t[Jr(i)]=r}return t}function Ij(n,e,t){return t.some(i=>M0(n,e,i)&&Jr(i)!==qe)}function Mj(n,e,t){return t.some(i=>M0(n,e,i))}function M0(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Pj(n,e,t){return e.length===0&&!n.children[t]}var eC=class{};function Sj(n,e,t,i,r,o,a="emptyOnly"){return new tC(n,e,t,i,r,a,o).recognize()}var Tj=31,tC=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,a,l){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new Jw(this.urlSerializer,this.urlTree)}noMatchError(e){return new le(4002,`'${e.segmentGroup}'`)}recognize(){let e=sA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:t,rootSnapshot:i})=>{let r=new or(i,t),o=new Bf("",r),a=bA(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new tl([],Object.freeze({}),Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),qe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,qe,t).pipe(ue(i=>({children:i,rootSnapshot:t})),fs(i=>{if(i instanceof jf)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof zf?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(ue(a=>a instanceof or?[a]:[]))}processChildren(e,t,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return Nt(o).pipe(_a(a=>{let l=i.children[a],u=$z(t,a);return this.processSegmentGroup(e,u,l,a,r)}),gm((a,l)=>(a.push(...l),a)),va(null),xb(),vn(a=>{if(a===null)return ju(i);let l=NA(a);return Oj(l),Me(l)}))}processSegment(e,t,i,r,o,a,l){return Nt(t).pipe(_a(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,o,a,l).pipe(fs(f=>{if(f instanceof zf)return Me(null);throw f}))),ps(u=>!!u),fs(u=>{if(AA(u))return Pj(i,r,o)?Me(new eC):ju(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,o,a,l,u){return Jr(i)!==a&&(a===qe||!M0(r,o,i))?ju(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,a,u):ju(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,a,l){let{matched:u,parameters:f,consumedSegments:g,positionalParamSegments:b,remainingSegments:E}=RA(t,r,o);if(!u)return ju(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Tj&&(this.allowRedirects=!1));let I=new tl(o,f,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,aA(r),Jr(r),r.component??r._loadedComponent??null,r,cA(r)),R=w0(I,l,this.paramsInheritanceStrategy);return I.params=Object.freeze(R.params),I.data=Object.freeze(R.data),this.applyRedirects.applyRedirectCommands(g,r.redirectTo,b,I,e).pipe(ri(q=>this.applyRedirects.lineralizeSegments(r,q)),vn(q=>this.processSegment(e,i,t,q.concat(E),a,!1,l)))}matchSegmentAgainstRoute(e,t,i,r,o,a){let l=xj(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),l.pipe(ri(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(ri(({routes:f})=>{let g=i._loadedInjector??e,{parameters:b,consumedSegments:E,remainingSegments:I}=u,R=new tl(E,b,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,aA(i),Jr(i),i.component??i._loadedComponent??null,i,cA(i)),W=w0(R,a,this.paramsInheritanceStrategy);R.params=Object.freeze(W.params),R.data=Object.freeze(W.data);let{segmentGroup:q,slicedSegments:ie}=sA(t,E,I,f);if(ie.length===0&&q.hasChildren())return this.processChildren(g,f,q,R).pipe(ue(we=>new or(R,we)));if(f.length===0&&ie.length===0)return Me(new or(R,[]));let ge=Jr(i)===o;return this.processSegment(g,f,q,ie,ge?qe:o,!0,R).pipe(ue(we=>new or(R,we instanceof or?[we]:[])))}))):ju(t)))}getChildConfig(e,t,i){return t.children?Me({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Me({routes:t._loadedRoutes,injector:t._loadedInjector}):mj(e,t,i,this.urlSerializer).pipe(vn(r=>r?this.configLoader.loadChildren(e,t).pipe(Yn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):yj(t))):Me({routes:[],injector:e})}};function Oj(n){n.sort((e,t)=>e.value.outlet===qe?-1:t.value.outlet===qe?1:e.value.outlet.localeCompare(t.value.outlet))}function Dj(n){let e=n.value.routeConfig;return e&&e.path===""}function NA(n){let e=[],t=new Set;for(let i of n){if(!Dj(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=NA(i.children);e.push(new or(i.value,r))}return e.filter(i=>!t.has(i))}function aA(n){return n.data||{}}function cA(n){return n.resolve||{}}function Aj(n,e,t,i,r,o){return vn(a=>Sj(n,e,t,i,a.extractedUrl,r,o).pipe(ue(({state:l,tree:u})=>ye(X({},a),{targetSnapshot:l,urlAfterRedirects:u}))))}function kj(n,e){return vn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Me(t);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of LA(u))a.add(f);let l=0;return Nt(a).pipe(_a(u=>o.has(u)?Rj(u,i,n,e):(u.data=w0(u,u.parent,n).resolve,Me(void 0))),Yn(()=>l++),yu(1),vn(u=>l===a.size?Me(t):Vi))})}function LA(n){let e=n.children.map(t=>LA(t)).flat();return[n,...e]}function Rj(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!PA(r)&&(o[Hf]=r.title),kh(()=>(n.data=w0(n,n.parent,t).resolve,Nj(o,n,e,i).pipe(ue(a=>(n._resolvedData=a,n.data=X(X({},n.data),a),null)))))}function Nj(n,e,t,i){let r=Hw(n);if(r.length===0)return Me({});let o={};return Nt(r).pipe(vn(a=>Lj(n[a],e,t,i).pipe(ps(),Yn(l=>{if(l instanceof Qu)throw C0(new Na,l);o[a]=l}))),yu(1),ue(()=>o),fs(a=>AA(a)?Vi:_u(a)))}function Lj(n,e,t,i){let r=Xu(e)??i,o=ed(n,r),a=o.resolve?o.resolve(e,t):In(r,()=>o(e,t));return As(a)}function zw(n){return ri(e=>{let t=n(e);return t?Nt(t).pipe(ue(()=>e)):Me(e)})}var sC=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===qe);return i}getResolvedTitleForRoute(t){return t.data[Hf]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(FA),providedIn:"root"})}return n})(),FA=(()=>{class n extends sC{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Be(tA))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Va=new _e("",{providedIn:"root",factory:()=>({})}),ol=new _e(""),P0=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=F(sw);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Me(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=As(In(t,()=>i.loadComponent())).pipe(ue(BA),ri(UA),Yn(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Nh(()=>{this.componentLoaders.delete(i)})),o=new fu(r,()=>new Jt).pipe(hu());return this.componentLoaders.set(i,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Me({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=VA(i,this.compiler,t,this.onLoadEndListener).pipe(Nh(()=>{this.childrenLoaders.delete(i)})),a=new fu(o,()=>new Jt).pipe(hu());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VA(n,e,t,i){return As(In(t,()=>n.loadChildren())).pipe(ue(BA),ri(UA),vn(r=>r instanceof k_||Array.isArray(r)?Me(r):Nt(e.compileModuleAsync(r))),ue(r=>{i&&i(n);let o,a,l=!1;return Array.isArray(r)?(a=r,l=!0):(o=r.create(t).injector,a=o.get(ol,[],{optional:!0,self:!0}).flat()),{routes:a.map(oC),injector:o}}))}function Fj(n){return n&&typeof n=="object"&&"default"in n}function BA(n){return Fj(n)?n.default:n}function UA(n){return Me(n)}var S0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(Vj),providedIn:"root"})}return n})(),Vj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aC=new _e(""),cC=new _e("");function zA(n,e,t){let i=n.get(cC),r=n.get(Pn);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),l=r.startViewTransition(()=>(o(),Bj(n)));l.ready.catch(f=>{});let{onViewTransitionCreated:u}=i;return u&&In(n,()=>u({transition:l,from:e,to:t})),a}function Bj(n){return new Promise(e=>{uf({read:()=>setTimeout(e)},{injector:n})})}var lC=new _e(""),T0=(()=>{class n{currentNavigation=Ut(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Jt;transitionAbortWithErrorSubject=new Jt;configLoader=F(P0);environmentInjector=F(yn);destroyRef=F(Gr);urlSerializer=F(il);rootContexts=F(rl);location=F(ka);inputBindingEnabled=F(Gf,{optional:!0})!==null;titleStrategy=F(sC);options=F(Va,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=F(S0);createViewTransition=F(aC,{optional:!0});navigationErrorHandler=F(lC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Me(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new p0(r)),i=r=>this.events.next(new g0(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;On(()=>{this.transitions?.next(ye(X({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(t){return this.transitions=new bt(null),this.transitions.pipe(Pi(i=>i!==null),ri(i=>{let r=!1;return Me(i).pipe(ri(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Ai.SupersededByNewNavigation),Vi;this.currentTransition=i,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ye(X({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload")return this.events.next(new Vo(o.id,this.urlSerializer.serialize(o.rawUrl),"",Wu.IgnoredSameUrlNavigation)),o.resolve(!1),Vi;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Me(o).pipe(ri(u=>(this.events.next(new Fa(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Vi:Promise.resolve(u))),Aj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Yn(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=u.urlAfterRedirects,g));let f=new Lf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:f,source:g,restoredState:b,extras:E}=o,I=new Fa(u,this.urlSerializer.serialize(f),g,b);this.events.next(I);let R=IA(this.rootComponentType).snapshot;return this.currentTransition=i=ye(X({},o),{targetSnapshot:R,urlAfterRedirects:f,extras:ye(X({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(W=>(W.finalUrl=f,W)),Me(i)}else return this.events.next(new Vo(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Wu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Vi}),Yn(o=>{let a=new u0(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ue(o=>(this.currentTransition=i=ye(X({},o),{guards:Qz(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),cj(this.environmentInjector,o=>this.events.next(o)),Yn(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw C0(this.urlSerializer,o.guardsResult);let a=new d0(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Pi(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ai.GuardRejected),!1)),zw(o=>{if(o.guards.canActivateChecks.length!==0)return Me(o).pipe(Yn(a=>{let l=new h0(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),ri(a=>{let l=!1;return Me(a).pipe(kj(this.paramsInheritanceStrategy,this.environmentInjector),Yn({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Ai.NoDataFromResolver)}}))}),Yn(a=>{let l=new f0(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),zw(o=>{let a=l=>{let u=[];if(l.routeConfig?.loadComponent){let f=Xu(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(f,l.routeConfig).pipe(Yn(g=>{l.component=g}),ue(()=>{})))}for(let f of l.children)u.push(...a(f));return u};return Mi(a(o.targetSnapshot.root)).pipe(va(null),Zn(1))}),zw(()=>this.afterPreactivation()),ri(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return l?Nt(l).pipe(ue(()=>i)):Me(i)}),ue(o=>{let a=qz(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=ye(X({},o),{targetRouterState:a}),this.currentNavigation.update(l=>(l.targetRouterState=a,l)),i}),Yn(()=>{this.events.next(new Ff)}),Yz(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Zn(1),bu(new Ae(o=>{let a=i.abortController.signal,l=()=>o.next();return a.addEventListener("abort",l),()=>a.removeEventListener("abort",l)}).pipe(Pi(()=>!r&&!i.targetRouterState),Yn(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Ai.Aborted)}))),Yn({next:o=>{r=!0,this.lastSuccessfulNavigation=On(this.currentNavigation),this.events.next(new ar(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),bu(this.transitionAbortWithErrorSubject.pipe(Yn(o=>{throw o}))),Nh(()=>{r||this.cancelNavigationTransition(i,"",Ai.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),fs(o=>{if(this.destroyed)return i.resolve(!1),Vi;if(r=!0,DA(o))this.events.next(new Lo(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),Zz(o)?this.events.next(new Yu(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Ku(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let l=In(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Qu){let{message:u,cancellationCode:f}=C0(this.urlSerializer,l);this.events.next(new Lo(i.id,this.urlSerializer.serialize(i.extractedUrl),u,f)),this.events.next(new Yu(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Vi}))}))}cancelNavigationTransition(t,i,r){let o=new Lo(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=On(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Uj(n){return n!==Gu}var jA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(zj),providedIn:"root"})}return n})(),I0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},zj=(()=>{class n extends I0{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Oo(n)))(r||n)}})();static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HA=(()=>{class n{urlSerializer=F(il);options=F(Va,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=F(ka);urlHandlingStrategy=F(S0);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Fo;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,a=r??o;return a instanceof Fo?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=IA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:()=>F(jj),providedIn:"root"})}return n})(),jj=(()=>{class n extends HA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Fa?this.updateStateMemento():t instanceof Vo?this.commitTransition(i):t instanceof Lf?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Ff?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Lo&&t.code!==Ai.SupersededByNewNavigation&&t.code!==Ai.Redirect?this.restoreHistory(i):t instanceof Ku?this.restoreHistory(i,!0):t instanceof ar&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:a}=i;if(this.location.isCurrentPathEqualTo(t)||o){let l=this.browserPageId,u=X(X({},a),this.generateNgRouterState(r,l));this.location.replaceState(t,"",u)}else{let l=X(X({},a),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",l)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Oo(n)))(r||n)}})();static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function O0(n,e){n.events.pipe(Pi(t=>t instanceof ar||t instanceof Lo||t instanceof Ku||t instanceof Vo),ue(t=>t instanceof ar||t instanceof Vo?0:(t instanceof Lo?t.code===Ai.Redirect||t.code===Ai.SupersededByNewNavigation:!1)?2:1),Pi(t=>t!==2),Zn(1)).subscribe(()=>{e()})}var Hj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$j={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Mt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=F(Yx);stateManager=F(HA);options=F(Va,{optional:!0})||{};pendingTasks=F(Mo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=F(T0);urlSerializer=F(il);location=F(ka);urlHandlingStrategy=F(S0);injector=F(yn);_events=new Jt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=F(jA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=F(ol,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!F(Gf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new dn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=On(this.navigationTransitions.currentNavigation);if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Lo&&i.code!==Ai.Redirect&&i.code!==Ai.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ar)this.navigated=!0;else if(i instanceof Yu){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=X({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Uj(r.source)},a);this.scheduleNavigation(l,Gu,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}jz(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let u=X({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(t);this.scheduleNavigation(l,i,a,o).catch(u=>{this.disposed||this.injector.get(Di)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return On(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(oC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:u}=i,f=u?this.currentUrlTree.fragment:a,g=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":g=X(X({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let b;try{let E=r?r.snapshot:this.routerState.snapshot.root;b=xA(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),b=this.currentUrlTree.root}return wA(b,t,g,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=La(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Gu,null,i)}navigate(t,i={skipLocationChange:!1}){return Gj(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(wa(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=X({},Hj):i===!1?r=X({},$j):r=i,La(t))return nA(this.currentUrlTree,t,r);let o=this.parseUrl(t);return nA(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let l,u,f;a?(l=a.resolve,u=a.reject,f=a.promise):f=new Promise((b,E)=>{l=b,u=E});let g=this.pendingTasks.add();return O0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(b=>Promise.reject(b))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new le(4008,!1)}var Gi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ut(null);get href(){return On(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Jt;applicationErrorHandler=F(Di);options=F(Va,{optional:!0});constructor(t,i,r,o,a,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=l,this.reactiveHref.set(F(new V_("href"),{optional:!0}));let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,i=r=>r==="merge"||r==="preserve";t||=i(this.queryParamsHandling),t||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(r=>{r instanceof ar&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(La(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||i||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,u)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:La(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(De(Mt),De(mi),af("tabindex"),De(wr),De(fi),De(Zr))};static \u0275dir=qt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&J("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Tt("href",r.reactiveHref(),Ix)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Aa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Aa],replaceUrl:[2,"replaceUrl","replaceUrl",Aa],routerLink:"routerLink"},features:[To]})}return n})(),dC=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new an;constructor(t,i,r,o,a){this.router=t,this.element=i,this.renderer=r,this.cdr=o,this.link=a,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof ar&&this.update()})}ngAfterContentInit(){Me(this.links.changes,Me(null)).pipe(ma()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Nt(t).pipe(ma()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){let i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let i=qj(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?t.isActive(o,i):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(i){return new(i||n)(De(Mt),De(fi),De(wr),De(ko),De(Gi,8))};static \u0275dir=qt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&nw(o,Gi,5),i&2){let a;mf(a=_f())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[To]})}return n})();function qj(n){return!!n.paths}var Wf=class{};var $A=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,i,r,o){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Pi(t=>t instanceof ar),_a(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Vu(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(l,o.children??o._loadedRoutes))}return Nt(r).pipe(ma())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=Me(null);let o=r.pipe(vn(a=>a===null?Me(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(t,i);return Nt([o,a]).pipe(ma())}else return o})}static \u0275fac=function(i){return new(i||n)(Be(Mt),Be(yn),Be(Wf),Be(P0))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GA=new _e(""),Wj=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Gu;restoredId=0;store={};constructor(t,i,r,o,a={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Fa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ar?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Vo&&t.code===Wu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Zu))return;let i={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,i):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>S(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new Zu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){$x()};static \u0275prov=he({token:n,factory:n.\u0275fac})}return n})();function hC(n,...e){return Oi([{provide:ol,multi:!0,useValue:n},[],{provide:mi,useFactory:qA,deps:[Mt]},{provide:pf,multi:!0,useFactory:WA},e.map(t=>t.\u0275providers)])}function qA(n){return n.routerState.root}function Kf(n,e){return{\u0275kind:n,\u0275providers:e}}function WA(){let n=F(Gt);return e=>{let t=n.get(Ps);if(e!==t.components[0])return;let i=n.get(Mt),r=n.get(KA);n.get(fC)===1&&i.initialNavigation(),n.get(QA,null,{optional:!0})?.setUpPreloading(),n.get(GA,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var KA=new _e("",{factory:()=>new Jt}),fC=new _e("",{providedIn:"root",factory:()=>1});function ZA(){let n=[{provide:xx,useValue:!0},{provide:fC,useValue:0},N_(()=>{let e=F(Gt);return e.get(gw,Promise.resolve()).then(()=>new Promise(i=>{let r=e.get(Mt),o=e.get(KA);O0(r,()=>{i(!0)}),e.get(T0).afterPreactivation=()=>(i(!0),o.closed?Me(void 0):o),r.initialNavigation()}))})];return Kf(2,n)}function YA(){let n=[N_(()=>{F(Mt).setUpLocationChangeListener()}),{provide:fC,useValue:2}];return Kf(3,n)}var QA=new _e("");function JA(n){return Kf(0,[{provide:QA,useExisting:$A},{provide:Wf,useExisting:n}])}function XA(){return Kf(8,[iC,{provide:Gf,useExisting:iC}])}function ek(n){Do("NgRouterViewTransitions");let e=[{provide:aC,useValue:zA},{provide:cC,useValue:X({skipNextTransition:!!n?.skipInitialTransition},n)}];return Kf(9,e)}var tk=[ka,{provide:il,useClass:Na},Mt,rl,{provide:mi,useFactory:qA,deps:[Mt]},P0,[]],Xr=(()=>{class n{constructor(){}static forRoot(t,i){return{ngModule:n,providers:[tk,[],{provide:ol,multi:!0,useValue:t},[],i?.errorHandler?{provide:lC,useValue:i.errorHandler}:[],{provide:Va,useValue:i||{}},i?.useHash?Zj():Yj(),Kj(),i?.preloadingStrategy?JA(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Qj(i):[],i?.bindToComponentInputs?XA().\u0275providers:[],i?.enableViewTransitions?ek().\u0275providers:[],Jj()]}}static forChild(t){return{ngModule:n,providers:[{provide:ol,multi:!0,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ao({type:n});static \u0275inj=zr({})}return n})();function Kj(){return{provide:GA,useFactory:()=>{let n=F(WD),e=F(mt),t=F(Va),i=F(T0),r=F(il);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Wj(r,i,n,e,t)}}}function Zj(){return{provide:Zr,useClass:Ew}}function Yj(){return{provide:Zr,useClass:j_}}function Qj(n){return[n.initialNavigation==="disabled"?YA().\u0275providers:[],n.initialNavigation==="enabledBlocking"?ZA().\u0275providers:[]]}var uC=new _e("");function Jj(){return[{provide:uC,useFactory:WA},{provide:pf,multi:!0,useExisting:uC}]}var nk=()=>{};var ok=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Xj=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=n[t++],a=n[t++],l=n[t++],u=((r&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},D0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let o=n[r],a=r+1<n.length,l=a?n[r+1]:0,u=r+2<n.length,f=u?n[r+2]:0,g=o>>2,b=(o&3)<<4|l>>4,E=(l&15)<<2|f>>6,I=f&63;u||(I=64,a||(E=64)),i.push(t[g],t[b],t[E],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ok(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Xj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let o=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;let f=r<n.length?t[n.charAt(r)]:64;++r;let b=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||l==null||f==null||b==null)throw new gC;let E=o<<2|l>>4;if(i.push(E),f!==64){let I=l<<4&240|f>>2;if(i.push(I),b!==64){let R=f<<6&192|b;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},gC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},e9=function(n){let e=ok(n);return D0.encodeByteArray(e,!0)},Qf=function(n){return e9(n).replace(/\./g,"")},A0=function(n){try{return D0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _C(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var t9=()=>_C().__FIREBASE_DEFAULTS__,n9=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},i9=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&A0(n[1]);return e&&JSON.parse(e)},k0=()=>{try{return nk()||t9()||n9()||i9()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vC=n=>{var e,t;return(t=(e=k0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},td=n=>{let e=vC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},yC=()=>{var n;return(n=k0())===null||n===void 0?void 0:n.config},bC=n=>{var e;return(e=k0())===null||e===void 0?void 0:e[`_${n}`]};var sl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function cr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ba(n){return S(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function R0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qf(JSON.stringify(t)),Qf(JSON.stringify(a)),""].join(".")}var Yf={};function r9(){let n={prod:[],emulator:[]};for(let e of Object.keys(Yf))Yf[e]?n.emulator.push(e):n.prod.push(e);return n}function o9(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var ik=!1;function Ua(n,e){if(typeof window>"u"||typeof document>"u"||!cr(window.location.host)||Yf[n]===e||Yf[n]||ik)return;Yf[n]=e;function t(E){return`__firebase__banner__${E}`}let i="__firebase__banner",o=r9().prod.length>0;function a(){let E=document.getElementById(i);E&&E.remove()}function l(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function u(E,I){E.setAttribute("width","24"),E.setAttribute("id",I),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{ik=!0,a()},E}function g(E,I){E.setAttribute("id",I),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function b(){let E=o9(i),I=t("text"),R=document.getElementById(I)||document.createElement("span"),W=t("learnmore"),q=document.getElementById(W)||document.createElement("a"),ie=t("preprendIcon"),ge=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let we=E.element;l(we),g(q,W);let Re=f();u(ge,ie),we.append(ge,R,q,Re),document.body.appendChild(we)}o?(R.innerText="Preview backend disconnected.",ge.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ge.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function s9(){var n;let e=(n=k0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ak(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ck(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uk(){let n=Qn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function dk(){return!s9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jf(){try{return typeof indexedDB=="object"}catch{return!1}}function hk(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var a9="FirebaseError",ai=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=a9,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eo.prototype.create)}},eo=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?c9(o,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new ai(r,l,i)}};function c9(n,e){return n.replace(l9,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var l9=/\{\$([^}]+)}/g;function fk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bo(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let o=n[r],a=e[r];if(rk(o)&&rk(a)){if(!Bo(o,a))return!1}else if(o!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function rk(n){return n!==null&&typeof n=="object"}function nd(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function id(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function rd(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function pk(n,e){let t=new mC(n,e);return t.subscribe.bind(t)}var mC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");u9(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=pC),r.error===void 0&&(r.error=pC),r.complete===void 0&&(r.complete=pC);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function u9(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pC(){}var kme=14400*1e3;function _t(n){return n&&n._delegate?n._delegate:n}var jn=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var al="[DEFAULT]";var xC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new sl;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(h9(e))try{this.getOrInitializeService({instanceIdentifier:al})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=al){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=al){return this.instances.has(e)}getOptions(e=al){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[o,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);let a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:d9(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=al){return this.component?this.component.multipleInstances?e:al:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function d9(n){return n===al?void 0:n}function h9(n){return n.instantiationMode==="EAGER"}var N0=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new xC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var f9=[],at=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(at||{}),p9={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},g9=at.INFO,m9={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},_9=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=m9[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Uo=class{constructor(e){this.name=e,this._logLevel=g9,this._logHandler=_9,this._userLogHandler=null,f9.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}};var v9=(n,e)=>e.some(t=>n instanceof t),gk,mk;function y9(){return gk||(gk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b9(){return mk||(mk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _k=new WeakMap,CC=new WeakMap,vk=new WeakMap,wC=new WeakMap,IC=new WeakMap;function x9(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(zo(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&_k.set(t,n)}).catch(()=>{}),IC.set(e,n),e}function w9(n){if(CC.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});CC.set(n,e)}var EC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return CC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vk.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function yk(n){EC=n(EC)}function C9(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(L0(this),e,...t);return vk.set(i,e.sort?e.sort():[e]),zo(i)}:b9().includes(n)?function(...e){return n.apply(L0(this),e),zo(_k.get(this))}:function(...e){return zo(n.apply(L0(this),e))}}function E9(n){return typeof n=="function"?C9(n):(n instanceof IDBTransaction&&w9(n),v9(n,y9())?new Proxy(n,EC):n)}function zo(n){if(n instanceof IDBRequest)return x9(n);if(wC.has(n))return wC.get(n);let e=E9(n);return e!==n&&(wC.set(n,e),IC.set(e,n)),e}var L0=n=>IC.get(n);function xk(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){let a=indexedDB.open(n,e),l=zo(a);return i&&a.addEventListener("upgradeneeded",u=>{i(zo(a.result),u.oldVersion,u.newVersion,zo(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var I9=["get","getKey","getAll","getAllKeys","count"],M9=["put","add","delete","clear"],MC=new Map;function bk(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(MC.get(e))return MC.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=M9.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||I9.includes(t)))return;let o=function(a,...l){return S(this,null,function*(){let u=this.transaction(a,r?"readwrite":"readonly"),f=u.store;return i&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),r&&u.done]))[0]})};return MC.set(e,o),o}yk(n=>ye(X({},n),{get:(e,t,i)=>bk(e,t)||n.get(e,t,i),has:(e,t)=>!!bk(e,t)||n.has(e,t)}));var SC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(P9(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function P9(n){let e=n.getComponent();return e?.type==="VERSION"}var TC="@firebase/app",wk="0.13.2";var ks=new Uo("@firebase/app"),S9="@firebase/app-compat",T9="@firebase/analytics-compat",O9="@firebase/analytics",D9="@firebase/app-check-compat",A9="@firebase/app-check",k9="@firebase/auth",R9="@firebase/auth-compat",N9="@firebase/database",L9="@firebase/data-connect",F9="@firebase/database-compat",V9="@firebase/functions",B9="@firebase/functions-compat",U9="@firebase/installations",z9="@firebase/installations-compat",j9="@firebase/messaging",H9="@firebase/messaging-compat",$9="@firebase/performance",G9="@firebase/performance-compat",q9="@firebase/remote-config",W9="@firebase/remote-config-compat",K9="@firebase/storage",Z9="@firebase/storage-compat",Y9="@firebase/firestore",Q9="@firebase/ai",J9="@firebase/firestore-compat",X9="firebase",e7="11.10.0";var OC="[DEFAULT]",t7={[TC]:"fire-core",[S9]:"fire-core-compat",[O9]:"fire-analytics",[T9]:"fire-analytics-compat",[A9]:"fire-app-check",[D9]:"fire-app-check-compat",[k9]:"fire-auth",[R9]:"fire-auth-compat",[N9]:"fire-rtdb",[L9]:"fire-data-connect",[F9]:"fire-rtdb-compat",[V9]:"fire-fn",[B9]:"fire-fn-compat",[U9]:"fire-iid",[z9]:"fire-iid-compat",[j9]:"fire-fcm",[H9]:"fire-fcm-compat",[$9]:"fire-perf",[G9]:"fire-perf-compat",[q9]:"fire-rc",[W9]:"fire-rc-compat",[K9]:"fire-gcs",[Z9]:"fire-gcs-compat",[Y9]:"fire-fst",[J9]:"fire-fst-compat",[Q9]:"fire-vertex","fire-js":"fire-js",[X9]:"fire-js-all"};var Xf=new Map,n7=new Map,DC=new Map;function Ck(n,e){try{n.container.addComponent(e)}catch(t){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ki(n){let e=n.name;if(DC.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;DC.set(e,n);for(let t of Xf.values())Ck(t,n);for(let t of n7.values())Ck(t,n);return!0}function jo(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Hn(n){return n==null?!1:n.settings!==void 0}var i7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},za=new eo("app","Firebase",i7);var AC=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw za.create("app-deleted",{appName:this._name})}};var Ho=e7;function NC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:OC,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw za.create("bad-app-name",{appName:String(r)});if(t||(t=yC()),!t)throw za.create("no-options");let o=Xf.get(r);if(o){if(Bo(t,o.options)&&Bo(i,o.config))return o;throw za.create("duplicate-app",{appName:r})}let a=new N0(r);for(let u of DC.values())a.addComponent(u);let l=new AC(t,i,a);return Xf.set(r,l),l}function to(n=OC){let e=Xf.get(n);if(!e&&n===OC&&yC())return NC();if(!e)throw za.create("no-app",{appName:n});return e}function F0(){return Array.from(Xf.values())}function Pt(n,e,t){var i;let r=(i=t7[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let l=[`Unable to register library "${r}" with version "${e}":`];o&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(l.join(" "));return}ki(new jn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var r7="firebase-heartbeat-database",o7=1,ep="firebase-heartbeat-store",PC=null;function Pk(){return PC||(PC=xk(r7,o7,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ep)}catch(t){console.warn(t)}}}}).catch(n=>{throw za.create("idb-open",{originalErrorMessage:n.message})})),PC}function s7(n){return S(this,null,function*(){try{let t=(yield Pk()).transaction(ep),i=yield t.objectStore(ep).get(Sk(n));return yield t.done,i}catch(e){if(e instanceof ai)ks.warn(e.message);else{let t=za.create("idb-get",{originalErrorMessage:e?.message});ks.warn(t.message)}}})}function Ek(n,e){return S(this,null,function*(){try{let i=(yield Pk()).transaction(ep,"readwrite");yield i.objectStore(ep).put(e,Sk(n)),yield i.done}catch(t){if(t instanceof ai)ks.warn(t.message);else{let i=za.create("idb-set",{originalErrorMessage:t?.message});ks.warn(i.message)}}})}function Sk(n){return`${n.name}!${n.options.appId}`}var a7=1024,c7=30,kC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new RC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return S(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ik();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>c7){let a=u7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ks.warn(i)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Ik(),{heartbeatsToSend:i,unsentEntries:r}=l7(this._heartbeatsCache.heartbeats),o=Qf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ks.warn(t),""}})}};function Ik(){return new Date().toISOString().substring(0,10)}function l7(n,e=a7){let t=[],i=n.slice();for(let r of n){let o=t.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Mk(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Mk(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var RC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return Jf()?hk().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield s7(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ek(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ek(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Mk(n){return Qf(JSON.stringify({version:2,heartbeats:n})).length}function u7(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function d7(n){ki(new jn("platform-logger",e=>new SC(e),"PRIVATE")),ki(new jn("heartbeat",e=>new kC(e),"PRIVATE")),Pt(TC,wk,n),Pt(TC,wk,"esm2017"),Pt("fire-js","")}d7("");var h7="firebase",f7="11.10.0";Pt(h7,f7,"app");function Tk(n){n===void 0&&(n=F(Gt));let e=n.get(Ou);return t=>new Ae(i=>{let r=e.add(),o=!1;function a(){o||(r(),o=!0)}let l=t.subscribe({next:u=>{i.next(u),a()},complete:()=>{i.complete(),a()},error:u=>{i.error(u),a()}});return l.add(()=>{i.unsubscribe(),a()}),l})}var Ir=new ya("ANGULARFIRE2_VERSION");function Rs(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var $o=(n,e)=>{let t=e?[e]:F0(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},od=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(od||{}),Ok=hw()&&typeof Zone<"u"?od.WARN:od.SILENT;var V0=class{zone;delegate;constructor(e,t=vb){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,o=function(a){r?r.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(o,t,i)}},Mr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=F(mt);this.outsideAngular=t.runOutsideAngular(()=>new V0(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new V0(typeof Zone>"u"?void 0:Zone.current,Ah))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dk=!1;function p7(n,e){!Dk&&(Ok>od.SILENT||hw())&&(Dk=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Ok>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function g7(n){let e=F(mt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function cl(n){let e=F(mt,{optional:!0});return e?e.run(()=>n()):n()}var m7=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),In(t,()=>cl(()=>n.apply(void 0,i)))),vt=(n,e,t)=>(t||=e?od.WARN:od.VERBOSE,function(){let i,r=arguments,o,a,l;try{o=F(Mr),a=F(Ou),l=F(yn)}catch{return p7(n,t),n.apply(this,r)}for(let f=0;f<arguments.length;f++)typeof r[f]=="function"&&(e&&(i||=cl(()=>a.add())),r[f]=m7(r[f],i,l));let u=g7(()=>n.apply(this,r));return e?u instanceof Ae?u.pipe(pa(o.outsideAngular),fa(o.insideAngular),Tk(l)):u instanceof Promise?cl(()=>{let f=a.add();return new Promise((g,b)=>{u.then(E=>In(l,()=>cl(()=>g(E))),E=>In(l,()=>cl(()=>b(E)))).finally(f)})}):typeof u=="function"&&i?function(){return setTimeout(i,0),u.apply(this,arguments)}:cl(()=>u):u instanceof Ae?u.pipe(pa(o.outsideAngular),fa(o.insideAngular)):cl(()=>u)});var lr=class{constructor(e){return e}},no=class{constructor(){return F0()}};function _7(n){return n&&n.length===1?n[0]:new lr(to())}var LC=new _e("angularfire2._apps"),v7={provide:lr,useFactory:_7,deps:[[new cn,LC]]},y7={provide:no,deps:[[new cn,LC]]};function b7(n){return(e,t)=>{let i=t.get(Cs);Pt("angularfire",Ir.full,"core"),Pt("angularfire",Ir.full,"app"),Pt("angular",Rb.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new lr(r)}}function Ak(n,...e){return Oi([v7,y7,{provide:LC,useFactory:b7(n),multi:!0,deps:[mt,Gt,Mr,...e]}])}var kk=vt(NC,!0);var x7=new Map,w7={activated:!1,tokenObservers:[]},C7={initialized:!1,enabled:!1};function io(n){return x7.get(n)||Object.assign({},w7)}function Fk(){return C7}var E7="https://content-firebaseappcheck.googleapis.com/v1";var I7="exchangeDebugToken",Rk={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},L_e=1440*60*1e3;var BC=class{constructor(e,t,i,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return S(this,null,function*(){this.stop();try{this.pending=new sl,this.pending.promise.catch(t=>{}),yield M7(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new sl,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function M7(n){return new Promise(e=>{setTimeout(e,n)})}var P7={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ja=new eo("appCheck","AppCheck",P7);function Vk(n){if(!io(n).activated)throw ja.create("use-before-activation",{appName:n.name})}function Bk(i,r){return S(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let I=yield a.getHeartbeatsHeader();I&&(o["X-Firebase-Client"]=I)}let l={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,l)}catch(I){throw ja.create("fetch-network-error",{originalErrorMessage:I?.message})}if(u.status!==200)throw ja.create("fetch-status-error",{httpStatus:u.status});let f;try{f=yield u.json()}catch(I){throw ja.create("fetch-parse-error",{originalErrorMessage:I?.message})}let g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw ja.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let b=Number(g[1])*1e3,E=Date.now();return{token:f.token,expireTimeMillis:E+b,issuedAtTimeMillis:E}})}function Uk(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${E7}/projects/${t}/apps/${i}:${I7}?key=${r}`,body:{debug_token:e}}}var S7="firebase-app-check-database",T7=1,UC="firebase-app-check-store";var B0=null;function O7(){return B0||(B0=new Promise((n,e)=>{try{let t=indexedDB.open(S7,T7);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(ja.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(UC,{keyPath:"compositeKey"})}}}catch(t){e(ja.create("storage-open",{originalErrorMessage:t?.message}))}}),B0)}function D7(n,e){return A7(k7(n),e)}function A7(n,e){return S(this,null,function*(){let i=(yield O7()).transaction(UC,"readwrite"),o=i.objectStore(UC).put({compositeKey:n,value:e});return new Promise((a,l)=>{o.onsuccess=u=>{a()},i.onerror=u=>{var f;l(ja.create("storage-set",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})})}function k7(n){return`${n.options.appId}-${n.name}`}var tp=new Uo("@firebase/app-check");function FC(n,e){return Jf()?D7(n,e).catch(t=>{tp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zk(){return Fk().enabled}function jk(){return S(this,null,function*(){let n=Fk();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var R7={error:"UNKNOWN_ERROR"};function N7(n){return D0.encodeString(JSON.stringify(n),!1)}function zC(n,e=!1,t=!1){return S(this,null,function*(){let i=n.app;Vk(i);let r=io(i),o=r.token,a;if(o&&!np(o)&&(r.token=void 0,o=void 0),!o){let f=yield r.cachedTokenPromise;f&&(np(f)?o=f:yield FC(i,void 0))}if(!e&&o&&np(o))return{token:o.token};let l=!1;if(zk())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=Bk(Uk(i,yield jk()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);let f=yield r.exchangeTokenPromise;return yield FC(i,f),r.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?tp.warn(f.message):t&&tp.error(f),VC(f)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield io(i).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?tp.warn(f.message):t&&tp.error(f),a=f}let u;return o?a?np(o)?u={token:o.token,internalError:a}:u=VC(a):(u={token:o.token},r.token=o,yield FC(i,o)):u=VC(a),l&&B7(i,u),u})}function L7(n){return S(this,null,function*(){let e=n.app;Vk(e);let{provider:t}=io(e);if(zk()){let i=yield jk(),{token:r}=yield Bk(Uk(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function F7(n,e,t,i){let{app:r}=n,o=io(r),a={next:t,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&np(o.token)){let l=o.token;Promise.resolve().then(()=>{t({token:l.token}),Nk(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Nk(n))}function Hk(n,e){let t=io(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function Nk(n){let{app:e}=n,t=io(e),i=t.tokenRefresher;i||(i=V7(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function V7(n){let{app:e}=n;return new BC(()=>S(null,null,function*(){let t=io(e),i;if(t.token?i=yield zC(n,!0):i=yield zC(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=io(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},Rk.RETRIAL_MIN_WAIT,Rk.RETRIAL_MAX_WAIT)}function B7(n,e){let t=io(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function np(n){return n.expireTimeMillis-Date.now()>0}function VC(n){return{token:N7(R7),error:n}}var jC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=io(this.app);for(let t of e)Hk(this.app,t.next);return Promise.resolve()}};function U7(n,e){return new jC(n,e)}function z7(n){return{getToken:e=>zC(n,e),getLimitedUseToken:()=>L7(n),addTokenListener:e=>F7(n,"INTERNAL",e),removeTokenListener:e=>Hk(n.app,e)}}var j7="@firebase/app-check",H7="0.10.1";var $7="app-check",Lk="app-check-internal";function G7(){ki(new jn($7,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return U7(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Lk).initialize()})),ki(new jn(Lk,n=>{let e=n.getProvider("app-check").getImmediate();return z7(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Pt(j7,H7)}G7();var q7="app-check";var Go=class{constructor(){return $o(q7)}};var W7=["localhost","0.0.0.0","127.0.0.1"],Z_e=typeof window<"u"&&W7.includes(window.location.hostname);function oR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sR=oR,aR=new eo("auth","Firebase",oR());var G0=new Uo("@firebase/auth");function K7(n,...e){G0.logLevel<=at.WARN&&G0.warn(`Auth (${Ho}): ${n}`,...e)}function z0(n,...e){G0.logLevel<=at.ERROR&&G0.error(`Auth (${Ho}): ${n}`,...e)}function Pr(n,...e){throw dE(n,...e)}function ro(n,...e){return dE(n,...e)}function uE(n,e,t){let i=Object.assign(Object.assign({},sR()),{[e]:t});return new eo("auth","Firebase",i).create(e,{appName:n.name})}function Fs(n){return uE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z7(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Pr(n,"argument-error"),uE(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dE(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return aR.create(n,...e)}function Pe(n,e,...t){if(!n)throw dE(e,...t)}function Ns(n){let e="INTERNAL ASSERTION FAILED: "+n;throw z0(e),new Error(e)}function Vs(n,e){n||Ns(e)}function GC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Y7(){return $k()==="http:"||$k()==="https:"}function $k(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Q7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y7()||ck()||"connection"in navigator)?navigator.onLine:!0}function J7(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ll=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vs(t>e,"Short delay should be less than long delay!"),this.isMobile=sk()||lk()}get(){return Q7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hE(n,e){Vs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var q0=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var X7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var eH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tH=new ll(3e4,6e4);function Bs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function oo(o,a,l,u){return S(this,arguments,function*(n,e,t,i,r={}){return cR(n,r,()=>S(null,null,function*(){let f={},g={};i&&(e==="GET"?g=i:f={body:JSON.stringify(i)});let b=nd(Object.assign({key:n.config.apiKey},g)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let I=Object.assign({method:e,headers:E},f);return ak()||(I.referrerPolicy="no-referrer"),n.emulatorConfig&&cr(n.emulatorConfig.host)&&(I.credentials="include"),q0.fetch()(yield lR(n,n.config.apiHost,t,b),I)}))})}function cR(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},X7),e);try{let r=new qC(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw U0(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let l=o.ok?a.errorMessage:a.error.message,[u,f]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw U0(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw U0(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw U0(n,"user-disabled",a);let g=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw uE(n,g,f);Pr(n,g)}}catch(r){if(r instanceof ai)throw r;Pr(n,"network-request-failed",{message:String(r)})}})}function hp(o,a,l,u){return S(this,arguments,function*(n,e,t,i,r={}){let f=yield oo(n,e,t,i,r);return"mfaPendingCredential"in f&&Pr(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function lR(n,e,t,i){return S(this,null,function*(){let r=`${e}${t}?${i}`,o=n,a=o.config.emulator?hE(n.config,r):`${n.config.apiScheme}://${r}`;return eH.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a})}function nH(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var qC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ro(this.auth,"network-request-failed")),tH.get())})}};function U0(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=ro(n,e,i);return r.customData._tokenResponse=t,r}function Gk(n){return n!==void 0&&n.enterprise!==void 0}var WC=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nH(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function iH(n,e){return S(this,null,function*(){return oo(n,"GET","/v2/recaptchaConfig",Bs(n,e))})}function rH(n,e){return S(this,null,function*(){return oo(n,"POST","/v1/accounts:delete",e)})}function W0(n,e){return S(this,null,function*(){return oo(n,"POST","/v1/accounts:lookup",e)})}function rp(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function fE(n,e=!1){return S(this,null,function*(){let t=_t(n),i=yield t.getIdToken(e),r=pE(i);Pe(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,a=o?.sign_in_provider;return{claims:r,token:i,authTime:rp(HC(r.auth_time)),issuedAtTime:rp(HC(r.iat)),expirationTime:rp(HC(r.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function HC(n){return Number(n)*1e3}function pE(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return z0("JWT malformed, contained fewer than 3 sections"),null;try{let r=A0(t);return r?JSON.parse(r):(z0("Failed to decode base64 JWT payload"),null)}catch(r){return z0("Caught error parsing JWT payload as JSON",r?.toString()),null}}function qk(n){let e=pE(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ul(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof ai&&oH(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function oH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var KC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var sp=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rp(this.lastLoginAt),this.creationTime=rp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function K0(n){return S(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield ul(n,W0(t,{idToken:i}));Pe(r?.users.length,t,"internal-error");let o=r.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?uR(o.providerUserInfo):[],l=sH(n.providerData,a),u=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,g=u?f:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new sp(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,b)})}function gE(n){return S(this,null,function*(){let e=_t(n);yield K0(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function sH(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function uR(n){return n.map(e=>{var{providerId:t}=e,i=Xg(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function aH(n,e){return S(this,null,function*(){let t=yield cR(n,{},()=>S(null,null,function*(){let i=nd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,a=yield lR(n,r,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:l,body:i};return n.emulatorConfig&&cr(n.emulatorConfig.host)&&(u.credentials="include"),q0.fetch()(a,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function cH(n,e){return S(this,null,function*(){return oo(n,"POST","/v2/accounts:revokeToken",Bs(n,e))})}var op=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");let t=qk(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield aH(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,a=new n;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Pe(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(Pe(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ns("not implemented")}};function Ha(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var $a=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=Xg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new sp(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield ul(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return fE(this,e)}reload(){return gE(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield K0(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(Hn(this.auth.app))return Promise.reject(Fs(this.auth));let e=yield this.getIdToken();return yield ul(this,rH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,a,l,u,f,g;let b=(i=t.displayName)!==null&&i!==void 0?i:void 0,E=(r=t.email)!==null&&r!==void 0?r:void 0,I=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,R=(a=t.photoURL)!==null&&a!==void 0?a:void 0,W=(l=t.tenantId)!==null&&l!==void 0?l:void 0,q=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,ie=(f=t.createdAt)!==null&&f!==void 0?f:void 0,ge=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:we,emailVerified:Re,isAnonymous:jt,providerData:ct,stsTokenManager:V}=t;Pe(we&&V,e,"internal-error");let O=op.fromJSON(this.name,V);Pe(typeof we=="string",e,"internal-error"),Ha(b,e.name),Ha(E,e.name),Pe(typeof Re=="boolean",e,"internal-error"),Pe(typeof jt=="boolean",e,"internal-error"),Ha(I,e.name),Ha(R,e.name),Ha(W,e.name),Ha(q,e.name),Ha(ie,e.name),Ha(ge,e.name);let D=new n({uid:we,auth:e,email:E,emailVerified:Re,displayName:b,isAnonymous:jt,photoURL:R,phoneNumber:I,tenantId:W,stsTokenManager:O,createdAt:ie,lastLoginAt:ge});return ct&&Array.isArray(ct)&&(D.providerData=ct.map(N=>Object.assign({},N))),q&&(D._redirectEventId=q),D}static _fromIdTokenResponse(e,t,i=!1){return S(this,null,function*(){let r=new op;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield K0(o),o})}static _fromGetAccountInfoResponse(e,t,i){return S(this,null,function*(){let r=t.users[0];Pe(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?uR(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!o?.length,l=new op;l.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new sp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(u,f),u})}};var Wk=new Map;function Ls(n){Vs(n instanceof Function,"Expected a class definition");let e=Wk.get(n);return e?(Vs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Wk.set(n,e),e)}var lH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,i){return S(this,null,function*(){this.storage[t]=i})}_get(t){return S(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),ZC=lH;function j0(n,e,t){return`firebase:${n}:${e}:${t}`}var Z0=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=j0(this.userKey,r.apiKey,o),this.fullPersistenceKey=j0("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield W0(this.auth,{idToken:e}).catch(()=>{});return t?$a._fromGetAccountInfoResponse(this.auth,t,e):null}return $a._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return S(this,null,function*(){if(!t.length)return new n(Ls(ZC),e,i);let r=(yield Promise.all(t.map(f=>S(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=r[0]||Ls(ZC),a=j0(i,e.config.apiKey,e.name),l=null;for(let f of t)try{let g=yield f._get(a);if(g){let b;if(typeof g=="string"){let E=yield W0(e,{idToken:g}).catch(()=>{});if(!E)break;b=yield $a._fromGetAccountInfoResponse(e,E,g)}else b=$a._fromJSON(e,g);f!==o&&(l=b),o=f;break}}catch{}let u=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,i):(o=u[0],l&&(yield o._set(a,l.toJSON())),yield Promise.all(t.map(f=>S(null,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,i))})}};function Kk(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mR(e))return"Blackberry";if(_R(e))return"Webos";if(hR(e))return"Safari";if((e.includes("chrome/")||fR(e))&&!e.includes("edge/"))return"Chrome";if(gR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function dR(n=Qn()){return/firefox\//i.test(n)}function hR(n=Qn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fR(n=Qn()){return/crios\//i.test(n)}function pR(n=Qn()){return/iemobile/i.test(n)}function gR(n=Qn()){return/android/i.test(n)}function mR(n=Qn()){return/blackberry/i.test(n)}function _R(n=Qn()){return/webos/i.test(n)}function mE(n=Qn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uH(n=Qn()){var e;return mE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dH(){return uk()&&document.documentMode===10}function vR(n=Qn()){return mE(n)||gR(n)||_R(n)||mR(n)||/windows phone/i.test(n)||pR(n)}function yR(n,e=[]){let t;switch(n){case"Browser":t=Kk(Qn());break;case"Worker":t=`${Kk(Qn())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ho}/${i}`}var YC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((a,l)=>{try{let u=e(o);a(u)}catch(u){l(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function hH(t){return S(this,arguments,function*(n,e={}){return oo(n,"GET","/v2/passwordPolicy",Bs(n,e))})}var fH=6,QC=class{constructor(e){var t,i,r,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:fH,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,a,l;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var JC=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y0(this),this.idTokenSubscription=new Y0(this),this.beforeStateQueue=new YC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ls(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var i,r,o;if(!this._deleted&&(this.persistenceManager=yield Z0.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield W0(this,{idToken:e}),i=yield $a._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var t;if(Hn(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield K0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=J7()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(Hn(this.app))return Promise.reject(Fs(this));let t=e?_t(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return Hn(this.app)?Promise.reject(Fs(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Hn(this.app)?Promise.reject(Fs(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(Ls(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield hH(this),t=new QC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eo("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield cH(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ls(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=yield Z0.create(this,[Ls(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{a=!0,u()}}else{let u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return S(this,null,function*(){var e;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&K7(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ga(n){return _t(n)}var Y0=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=pk(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var iv={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pH(n){iv=n}function bR(n){return iv.loadJS(n)}function gH(){return iv.recaptchaEnterpriseScript}function mH(){return iv.gapiScript}function xR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var XC=class{constructor(){this.enterprise=new eE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},eE=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var _H="recaptcha-enterprise",wR="NO_RECAPTCHA",tE=class{constructor(e){this.type=_H,this.auth=Ga(e)}verify(e="verify",t=!1){return S(this,null,function*(){function i(o){return S(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,l)=>S(null,null,function*(){iH(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{let f=new WC(u);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(u=>{l(u)})}))})}function r(o,a,l){let u=window.grecaptcha;Gk(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(wR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XC().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{i(this.auth).then(l=>{if(!t&&Gk(window.grecaptcha))r(l,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=gH();u.length!==0&&(u+=l),bR(u).then(()=>{r(l,o,a)}).catch(f=>{a(f)})}}).catch(l=>{a(l)})})})}};function ip(n,e,t,i=!1,r=!1){return S(this,null,function*(){let o=new tE(n),a;if(r)a=wR;else try{a=yield o.verify(t)}catch{a=yield o.verify(t,!0)}let l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){let u=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){let u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l})}function nE(n,e,t,i,r){return S(this,null,function*(){var o,a;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let l=yield ip(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(l=>S(null,null,function*(){if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield ip(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(l)}));else if(r==="PHONE_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("PHONE_PROVIDER")){let l=yield ip(n,e,t);return i(n,l).catch(u=>S(null,null,function*(){var f;if(((f=n._getRecaptchaConfig())===null||f===void 0?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let g=yield ip(n,e,t,!1,!0);return i(n,g)}return Promise.reject(u)}))}else{let l=yield ip(n,e,t,!1,!0);return i(n,l)}else return Promise.reject(r+" provider is not supported.")})}function _E(n,e){let t=jo(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),o=t.getOptions();if(Bo(o,e??{}))return r;Pr(r,"already-initialized")}return t.initialize({options:e})}function vH(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ls);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function vE(n,e,t){let i=Ga(n);Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,o=CR(e),{host:a,port:l}=yH(e),u=l===null?"":`:${l}`,f={url:`${o}//${a}${u}/`},g=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pe(Bo(f,i.config.emulator)&&Bo(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,cr(a)?(Ba(`${o}//${a}${u}`),Ua("Auth",!0)):r||bH()}function CR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yH(n){let e=CR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:Zk(i.substr(o.length+1))}}else{let[o,a]=i.split(":");return{host:o,port:Zk(a)}}}function Zk(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function bH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ad=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ns("not implemented")}_getIdTokenResponse(e){return Ns("not implemented")}_linkToIdToken(e,t){return Ns("not implemented")}_getReauthenticationResolver(e){return Ns("not implemented")}};function xH(n,e){return S(this,null,function*(){return oo(n,"POST","/v1/accounts:update",e)})}function wH(n,e){return S(this,null,function*(){return oo(n,"POST","/v1/accounts:signUp",e)})}function CH(n,e){return S(this,null,function*(){return hp(n,"POST","/v1/accounts:signInWithPassword",Bs(n,e))})}function EH(n,e){return S(this,null,function*(){return oo(n,"POST","/v1/accounts:sendOobCode",Bs(n,e))})}function IH(n,e){return S(this,null,function*(){return EH(n,e)})}function MH(n,e){return S(this,null,function*(){return hp(n,"POST","/v1/accounts:signInWithEmailLink",Bs(n,e))})}function PH(n,e){return S(this,null,function*(){return hp(n,"POST","/v1/accounts:signInWithEmailLink",Bs(n,e))})}var ap=class n extends ad{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return S(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nE(e,t,"signInWithPassword",CH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return MH(e,{email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}})}_linkToIdToken(e,t){return S(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nE(e,i,"signUpPassword",wH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return PH(e,{idToken:t,email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function sd(n,e){return S(this,null,function*(){return hp(n,"POST","/v1/accounts:signInWithIdp",Bs(n,e))})}var SH="http://localhost",cp=class n extends ad{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,o=Xg(t,["providerId","signInMethod"]);if(!i||!r)return null;let a=new n(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return sd(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,sd(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,sd(e,t)}buildRequest(){let e={requestUri:SH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nd(t)}return e}};function TH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OH(n){let e=id(rd(n)).link,t=e?id(rd(e)).deep_link_id:null,i=id(rd(n)).deep_link_id;return(i?id(rd(i)).link:null)||i||t||e||n}var Q0=class n{constructor(e){var t,i,r,o,a,l;let u=id(rd(e)),f=(t=u.apiKey)!==null&&t!==void 0?t:null,g=(i=u.oobCode)!==null&&i!==void 0?i:null,b=TH((r=u.mode)!==null&&r!==void 0?r:null);Pe(f&&g&&b,"argument-error"),this.apiKey=f,this.operation=b,this.code=g,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){let t=OH(e);try{return new n(t)}catch{return null}}};var rv=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return ap._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=Q0.parseLink(i);return Pe(r,"argument-error"),ap._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),lp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var up=class extends lp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var yE=(()=>{class n extends up{constructor(){super("facebook.com")}static credential(t){return cp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}n.FACEBOOK_SIGN_IN_METHOD="facebook.com",n.PROVIDER_ID="facebook.com";return n})(),bE=(()=>{class n extends up{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return cp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function DH(n,e){return S(this,null,function*(){return hp(n,"POST","/v1/accounts:signUp",Bs(n,e))})}var cd=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return S(this,null,function*(){let o=yield $a._fromIdTokenResponse(e,i,r),a=Yk(i);return new n({user:o,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return S(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=Yk(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function Yk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var iE=class n extends ai{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function ER(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?iE._fromErrorAndOperation(n,o,e,i):o})}function AH(n,e,t=!1){return S(this,null,function*(){let i=yield ul(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return cd._forOperation(n,"link",i)})}function IR(n,e,t=!1){return S(this,null,function*(){let{auth:i}=n;if(Hn(i.app))return Promise.reject(Fs(i));let r="reauthenticate";try{let o=yield ul(n,ER(i,r,e,n),t);Pe(o.idToken,i,"internal-error");let a=pE(o.idToken);Pe(a,i,"internal-error");let{sub:l}=a;return Pe(n.uid===l,i,"user-mismatch"),cd._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&Pr(i,"user-mismatch"),o}})}function MR(n,e,t=!1){return S(this,null,function*(){if(Hn(n.app))return Promise.reject(Fs(n));let i="signIn",r=yield ER(n,i,e),o=yield cd._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})}function xE(n,e){return S(this,null,function*(){return MR(Ga(n),e)})}function wE(n,e){return S(this,null,function*(){return IR(_t(n),e)})}function kH(n,e,t){var i;Pe(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),Pe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Pe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Pe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Pe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function PR(n){return S(this,null,function*(){let e=Ga(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function CE(n,e,t){return S(this,null,function*(){if(Hn(n.app))return Promise.reject(Fs(n));let i=Ga(n),a=yield nE(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DH,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&PR(n),u}),l=yield cd._fromIdTokenResponse(i,"signIn",a);return yield i._updateCurrentUser(l.user),l})}function EE(n,e,t){return Hn(n.app)?Promise.reject(Fs(n)):xE(_t(n),rv.credential(e,t)).catch(i=>S(null,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&PR(n),i}))}function IE(n,e){return S(this,null,function*(){let t=_t(n),r={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&kH(t.auth,r,e);let{email:o}=yield IH(t.auth,r);o!==n.email&&(yield n.reload())})}function RH(n,e){return S(this,null,function*(){return oo(n,"POST","/v1/accounts:update",e)})}function ME(i,r){return S(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=_t(n),l={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield ul(o,RH(o.auth,l));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let f=o.providerData.find(({providerId:g})=>g==="password");f&&(f.displayName=o.displayName,f.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function PE(n,e){return NH(_t(n),null,e)}function NH(n,e,t){return S(this,null,function*(){let{auth:i}=n,o={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let a=yield ul(n,xH(i,o));yield n._updateTokensIfNecessary(a,!0)})}function fp(n,e,t,i){return _t(n).onIdTokenChanged(e,t,i)}function SE(n,e,t){return _t(n).beforeAuthStateChanged(e,t)}function TE(n){return _t(n).signOut()}var J0="__sak";var X0=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(J0,"1"),this.storage.removeItem(J0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var LH=1e3,FH=10,VH=(()=>{class n extends X0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}let r=t.key;i?this.detachListener():this.stopPolling();let o=()=>{let l=this.storage.getItem(r);!i&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);dH()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,FH):o()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},LH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return S(this,null,function*(){yield ua(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return S(this,null,function*(){let i=yield ua(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return S(this,null,function*(){yield ua(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),SR=VH;var BH=(()=>{class n extends X0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),OE=BH;function UH(n){return Promise.all(n.map(e=>S(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var zH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return S(this,null,function*(){let i=t,{eventId:r,eventType:o,data:a}=i.data,l=this.handlersMap[o];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let u=Array.from(l).map(g=>S(this,null,function*(){return g(i.origin,a)})),f=yield UH(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function DE(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var rE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return S(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{let f=DE("",20);r.port1.start();let g=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(b){let E=b;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(E.data.response);break;default:clearTimeout(g),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function qo(){return window}function jH(n){qo().location.href=n}function TR(){return typeof qo().WorkerGlobalScope<"u"&&typeof qo().importScripts=="function"}function HH(){return S(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function $H(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function GH(){return TR()?self:null}var OR="firebaseLocalStorageDb",qH=1,ev="firebaseLocalStorage",DR="fbase_key",dl=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ov(n,e){return n.transaction([ev],e?"readwrite":"readonly").objectStore(ev)}function WH(){let n=indexedDB.deleteDatabase(OR);return new dl(n).toPromise()}function oE(){let n=indexedDB.open(OR,qH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(ev,{keyPath:DR})}catch(r){t(r)}}),n.addEventListener("success",()=>S(null,null,function*(){let i=n.result;i.objectStoreNames.contains(ev)?e(i):(i.close(),yield WH(),e(yield oE()))}))})}function Qk(n,e,t){return S(this,null,function*(){let i=ov(n,!0).put({[DR]:e,value:t});return new dl(i).toPromise()})}function KH(n,e){return S(this,null,function*(){let t=ov(n,!1).get(e),i=yield new dl(t).toPromise();return i===void 0?null:i.value})}function Jk(n,e){let t=ov(n,!0).delete(e);return new dl(t).toPromise()}var ZH=800,YH=3,QH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return S(this,null,function*(){return this.db?this.db:(this.db=yield oE(),this.db)})}_withRetries(t){return S(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>YH)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return S(this,null,function*(){return TR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return S(this,null,function*(){this.receiver=zH._getInstance(GH()),this.receiver._subscribe("keyChanged",(t,i)=>S(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>S(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return S(this,null,function*(){var t,i;if(this.activeServiceWorker=yield HH(),!this.activeServiceWorker)return;this.sender=new rE(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return S(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||$H()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return S(this,null,function*(){try{if(!indexedDB)return!1;let t=yield oE();return yield Qk(t,J0,"1"),yield Jk(t,J0),!0}catch{}return!1})}_withPendingWrite(t){return S(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(r=>Qk(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return S(this,null,function*(){let i=yield this._withRetries(r=>KH(r,t));return this.localCache[t]=i,i})}_remove(t){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(i=>Jk(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return S(this,null,function*(){let t=yield this._withRetries(o=>{let a=ov(o,!1).getAll();return new dl(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>S(this,null,function*(){return this._poll()}),ZH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),AR=QH;var i0e=xR("rcb"),r0e=new ll(3e4,6e4);function kR(n,e){return e?Ls(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var dp=class extends ad{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sd(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function JH(n){return MR(n.auth,new dp(n),n.bypassAuthState)}function XH(n){let{auth:e,user:t}=n;return Pe(t,e,"internal-error"),IR(t,new dp(n),n.bypassAuthState)}function e$(n){return S(this,null,function*(){let{auth:e,user:t}=n;return Pe(t,e,"internal-error"),AH(t,new dp(n),n.bypassAuthState)})}var tv=class{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>S(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return S(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(u))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JH;case"linkViaPopup":case"linkViaRedirect":return e$;case"reauthViaPopup":case"reauthViaRedirect":return XH;default:Pr(this.auth,"internal-error")}}resolve(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var t$=new ll(2e3,1e4);function AE(n,e,t){return S(this,null,function*(){if(Hn(n.app))return Promise.reject(ro(n,"operation-not-supported-in-this-environment"));let i=Ga(n);Z7(n,e,lp);let r=kR(i,t);return new n$(i,"signInViaPopup",e,r).executeNotNull()})}var n$=(()=>{class n extends tv{constructor(t,i,r,o,a){super(t,i,o,a),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return S(this,null,function*(){let t=yield this.execute();return Pe(t,this.auth,"internal-error"),t})}onExecution(){return S(this,null,function*(){Vs(this.filter.length===1,"Popup operations only handle one event");let t=DE();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(ro(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ro(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ro(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,t$.get())};t()}}n.currentPopupAction=null;return n})(),i$="pendingRedirect",H0=new Map,sE=class n extends tv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return S(this,null,function*(){let e=H0.get(this.auth._key());if(!e){try{let i=(yield r$(this.resolver,this.auth))?yield ua(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}H0.set(this.auth._key(),e)}return this.bypassAuthState||H0.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return S(this,null,function*(){if(e.type==="signInViaRedirect")return ua(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ua(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return S(this,null,function*(){})}cleanUp(){}};function r$(n,e){return S(this,null,function*(){let t=a$(e),i=s$(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function o$(n,e){H0.set(n._key(),e)}function s$(n){return Ls(n._redirectPersistence)}function a$(n){return j0(i$,n.config.apiKey,n.name)}function c$(n,e,t=!1){return S(this,null,function*(){if(Hn(n.app))return Promise.reject(Fs(n));let i=Ga(n),r=kR(i,e),a=yield new sE(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var l$=600*1e3,aE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!RR(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ro(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l$&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xk(e))}saveEventToCache(e){this.cachedEventUids.add(Xk(e)),this.lastProcessedEventTime=Date.now()}};function Xk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function RR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function u$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RR(n);default:return!1}}function d$(t){return S(this,arguments,function*(n,e={}){return oo(n,"GET","/v1/projects",e)})}var h$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f$=/^https?/;function p$(n){return S(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield d$(n);for(let t of e)try{if(g$(t))return}catch{}Pr(n,"unauthorized-domain")})}function g$(n){let e=GC(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!f$.test(t))return!1;if(h$.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var m$=new ll(3e4,6e4);function eR(){let n=qo().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _$(n){return new Promise((e,t)=>{var i,r,o;function a(){eR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eR(),t(ro(n,"network-request-failed"))},timeout:m$.get()})}if(!((r=(i=qo().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=qo().gapi)===null||o===void 0)&&o.load)a();else{let l=xR("iframefcb");return qo()[l]=()=>{gapi.load?a():t(ro(n,"network-request-failed"))},bR(`${mH()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw $0=null,e})}var $0=null;function v$(n){return $0=$0||_$(n),$0}var y$=new ll(5e3,15e3),b$="__/auth/iframe",x$="emulator/auth/iframe",w$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E$(n){let e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?hE(e,x$):`https://${n.config.authDomain}/${b$}`,i={apiKey:e.apiKey,appName:n.name,v:Ho},r=C$.get(n.config.apiHost);r&&(i.eid=r);let o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${nd(i).slice(1)}`}function I$(n){return S(this,null,function*(){let e=yield v$(n),t=qo().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:E$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w$,dontclear:!0},i=>new Promise((r,o)=>S(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=ro(n,"network-request-failed"),l=qo().setTimeout(()=>{o(a)},y$.get());function u(){qo().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{o(a)})})))})}var M$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P$=500,S$=600,T$="_blank",O$="http://localhost",nv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function D$(n,e,t,i=P$,r=S$){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),l="",u=Object.assign(Object.assign({},M$),{width:i.toString(),height:r.toString(),top:o,left:a}),f=Qn().toLowerCase();t&&(l=fR(f)?T$:t),dR(f)&&(e=e||O$,u.scrollbars="yes");let g=Object.entries(u).reduce((E,[I,R])=>`${E}${I}=${R},`,"");if(uH(f)&&l!=="_self")return A$(e||"",l),new nv(null);let b=window.open(e||"",l,g);Pe(b,n,"popup-blocked");try{b.focus()}catch{}return new nv(b)}function A$(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var k$="__/auth/handler",R$="emulator/auth/handler",N$=encodeURIComponent("fac");function tR(n,e,t,i,r,o){return S(this,null,function*(){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ho,eventId:r};if(e instanceof lp){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",fk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[g,b]of Object.entries(o||{}))a[g]=b}if(e instanceof up){let g=e.getScopes().filter(b=>b!=="");g.length>0&&(a.scopes=g.join(","))}n.tenantId&&(a.tid=n.tenantId);let l=a;for(let g of Object.keys(l))l[g]===void 0&&delete l[g];let u=yield n._getAppCheckToken(),f=u?`#${N$}=${encodeURIComponent(u)}`:"";return`${L$(n)}?${nd(l).slice(1)}${f}`})}function L$({config:n}){return n.emulator?hE(n,R$):`https://${n.authDomain}/${k$}`}var $C="webStorageSupport",cE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OE,this._completeRedirectFn=c$,this._overrideRedirectResult=o$}_openPopup(e,t,i,r){return S(this,null,function*(){var o;Vs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield tR(e,t,i,GC(),r);return D$(e,a,DE())})}_openRedirect(e,t,i,r){return S(this,null,function*(){yield this._originValidation(e);let o=yield tR(e,t,i,GC(),r);return jH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(Vs(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return S(this,null,function*(){let t=yield I$(e),i=new aE(e);return t.register("authEvent",r=>(Pe(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($C,{type:$C},r=>{var o;let a=(o=r?.[0])===null||o===void 0?void 0:o[$C];a!==void 0&&t(!!a),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=p$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vR()||hR()||mE()}},NR=cE;var nR="@firebase/auth",iR="1.10.8";var lE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function F$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V$(n){ki(new jn("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Pe(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yR(n)},f=new JC(i,r,o,u);return vH(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ki(new jn("auth-internal",e=>{let t=Ga(e.getProvider("auth").getImmediate());return(i=>new lE(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pt(nR,iR,F$(n)),Pt(nR,iR,"esm2017")}var B$=300,U$=bC("authIdTokenMaxAge")||B$,rR=null,z$=n=>e=>S(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>U$)return;let r=t?.token;rR!==r&&(rR=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function kE(n=to()){let e=jo(n,"auth");if(e.isInitialized())return e.getImmediate();let t=_E(n,{popupRedirectResolver:NR,persistence:[AR,SR,OE]}),i=bC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let a=z$(o.toString());SE(t,a,()=>a(t.currentUser)),fp(t,l=>a(l))}}let r=vC("auth");return r&&vE(t,`http://${r}`),t}function j$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}pH({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=ro("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",j$().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V$("Browser");function VR(n){return new Ae(function(e){var t=fp(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var BR="auth",Us=class{constructor(e){return e}},zs=class{constructor(){return $o(BR)}};var RE=new _e("angularfire2.auth-instances");function EG(n,e){let t=Rs(BR,n,e);return t&&new Us(t)}function IG(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Us(i)}}var MG={provide:zs,deps:[[new cn,RE]]},PG={provide:Us,useFactory:EG,deps:[[new cn,RE],lr]};function UR(n,...e){return Pt("angularfire",Ir.full,"auth"),Oi([PG,MG,{provide:RE,useFactory:IG(n),multi:!0,deps:[mt,Gt,Mr,no,[new cn,Go],...e]}])}var zR=vt(VR,!0);var jR=vt(CE,!0,2);var HR=vt(kE,!0);var $R=vt(wE,!0,2);var GR=vt(IE,!0,2);var qR=vt(EE,!0,2);var NE=vt(AE,!0,2);var WR=vt(TE,!0,2);var KR=vt(PE,!0,2);var pp=vt(ME,!0,2);var ZR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},YR={};var js,LE;(function(){var n;function e(V,O){function D(){}D.prototype=O.prototype,V.D=O.prototype,V.prototype=new D,V.prototype.constructor=V,V.C=function(N,B,$){for(var k=Array(arguments.length-2),nn=2;nn<arguments.length;nn++)k[nn-2]=arguments[nn];return O.prototype[B].apply(N,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(V,O,D){D||(D=0);var N=Array(16);if(typeof O=="string")for(var B=0;16>B;++B)N[B]=O.charCodeAt(D++)|O.charCodeAt(D++)<<8|O.charCodeAt(D++)<<16|O.charCodeAt(D++)<<24;else for(B=0;16>B;++B)N[B]=O[D++]|O[D++]<<8|O[D++]<<16|O[D++]<<24;O=V.g[0],D=V.g[1],B=V.g[2];var $=V.g[3],k=O+($^D&(B^$))+N[0]+3614090360&4294967295;O=D+(k<<7&4294967295|k>>>25),k=$+(B^O&(D^B))+N[1]+3905402710&4294967295,$=O+(k<<12&4294967295|k>>>20),k=B+(D^$&(O^D))+N[2]+606105819&4294967295,B=$+(k<<17&4294967295|k>>>15),k=D+(O^B&($^O))+N[3]+3250441966&4294967295,D=B+(k<<22&4294967295|k>>>10),k=O+($^D&(B^$))+N[4]+4118548399&4294967295,O=D+(k<<7&4294967295|k>>>25),k=$+(B^O&(D^B))+N[5]+1200080426&4294967295,$=O+(k<<12&4294967295|k>>>20),k=B+(D^$&(O^D))+N[6]+2821735955&4294967295,B=$+(k<<17&4294967295|k>>>15),k=D+(O^B&($^O))+N[7]+4249261313&4294967295,D=B+(k<<22&4294967295|k>>>10),k=O+($^D&(B^$))+N[8]+1770035416&4294967295,O=D+(k<<7&4294967295|k>>>25),k=$+(B^O&(D^B))+N[9]+2336552879&4294967295,$=O+(k<<12&4294967295|k>>>20),k=B+(D^$&(O^D))+N[10]+4294925233&4294967295,B=$+(k<<17&4294967295|k>>>15),k=D+(O^B&($^O))+N[11]+2304563134&4294967295,D=B+(k<<22&4294967295|k>>>10),k=O+($^D&(B^$))+N[12]+1804603682&4294967295,O=D+(k<<7&4294967295|k>>>25),k=$+(B^O&(D^B))+N[13]+4254626195&4294967295,$=O+(k<<12&4294967295|k>>>20),k=B+(D^$&(O^D))+N[14]+2792965006&4294967295,B=$+(k<<17&4294967295|k>>>15),k=D+(O^B&($^O))+N[15]+1236535329&4294967295,D=B+(k<<22&4294967295|k>>>10),k=O+(B^$&(D^B))+N[1]+4129170786&4294967295,O=D+(k<<5&4294967295|k>>>27),k=$+(D^B&(O^D))+N[6]+3225465664&4294967295,$=O+(k<<9&4294967295|k>>>23),k=B+(O^D&($^O))+N[11]+643717713&4294967295,B=$+(k<<14&4294967295|k>>>18),k=D+($^O&(B^$))+N[0]+3921069994&4294967295,D=B+(k<<20&4294967295|k>>>12),k=O+(B^$&(D^B))+N[5]+3593408605&4294967295,O=D+(k<<5&4294967295|k>>>27),k=$+(D^B&(O^D))+N[10]+38016083&4294967295,$=O+(k<<9&4294967295|k>>>23),k=B+(O^D&($^O))+N[15]+3634488961&4294967295,B=$+(k<<14&4294967295|k>>>18),k=D+($^O&(B^$))+N[4]+3889429448&4294967295,D=B+(k<<20&4294967295|k>>>12),k=O+(B^$&(D^B))+N[9]+568446438&4294967295,O=D+(k<<5&4294967295|k>>>27),k=$+(D^B&(O^D))+N[14]+3275163606&4294967295,$=O+(k<<9&4294967295|k>>>23),k=B+(O^D&($^O))+N[3]+4107603335&4294967295,B=$+(k<<14&4294967295|k>>>18),k=D+($^O&(B^$))+N[8]+1163531501&4294967295,D=B+(k<<20&4294967295|k>>>12),k=O+(B^$&(D^B))+N[13]+2850285829&4294967295,O=D+(k<<5&4294967295|k>>>27),k=$+(D^B&(O^D))+N[2]+4243563512&4294967295,$=O+(k<<9&4294967295|k>>>23),k=B+(O^D&($^O))+N[7]+1735328473&4294967295,B=$+(k<<14&4294967295|k>>>18),k=D+($^O&(B^$))+N[12]+2368359562&4294967295,D=B+(k<<20&4294967295|k>>>12),k=O+(D^B^$)+N[5]+4294588738&4294967295,O=D+(k<<4&4294967295|k>>>28),k=$+(O^D^B)+N[8]+2272392833&4294967295,$=O+(k<<11&4294967295|k>>>21),k=B+($^O^D)+N[11]+1839030562&4294967295,B=$+(k<<16&4294967295|k>>>16),k=D+(B^$^O)+N[14]+4259657740&4294967295,D=B+(k<<23&4294967295|k>>>9),k=O+(D^B^$)+N[1]+2763975236&4294967295,O=D+(k<<4&4294967295|k>>>28),k=$+(O^D^B)+N[4]+1272893353&4294967295,$=O+(k<<11&4294967295|k>>>21),k=B+($^O^D)+N[7]+4139469664&4294967295,B=$+(k<<16&4294967295|k>>>16),k=D+(B^$^O)+N[10]+3200236656&4294967295,D=B+(k<<23&4294967295|k>>>9),k=O+(D^B^$)+N[13]+681279174&4294967295,O=D+(k<<4&4294967295|k>>>28),k=$+(O^D^B)+N[0]+3936430074&4294967295,$=O+(k<<11&4294967295|k>>>21),k=B+($^O^D)+N[3]+3572445317&4294967295,B=$+(k<<16&4294967295|k>>>16),k=D+(B^$^O)+N[6]+76029189&4294967295,D=B+(k<<23&4294967295|k>>>9),k=O+(D^B^$)+N[9]+3654602809&4294967295,O=D+(k<<4&4294967295|k>>>28),k=$+(O^D^B)+N[12]+3873151461&4294967295,$=O+(k<<11&4294967295|k>>>21),k=B+($^O^D)+N[15]+530742520&4294967295,B=$+(k<<16&4294967295|k>>>16),k=D+(B^$^O)+N[2]+3299628645&4294967295,D=B+(k<<23&4294967295|k>>>9),k=O+(B^(D|~$))+N[0]+4096336452&4294967295,O=D+(k<<6&4294967295|k>>>26),k=$+(D^(O|~B))+N[7]+1126891415&4294967295,$=O+(k<<10&4294967295|k>>>22),k=B+(O^($|~D))+N[14]+2878612391&4294967295,B=$+(k<<15&4294967295|k>>>17),k=D+($^(B|~O))+N[5]+4237533241&4294967295,D=B+(k<<21&4294967295|k>>>11),k=O+(B^(D|~$))+N[12]+1700485571&4294967295,O=D+(k<<6&4294967295|k>>>26),k=$+(D^(O|~B))+N[3]+2399980690&4294967295,$=O+(k<<10&4294967295|k>>>22),k=B+(O^($|~D))+N[10]+4293915773&4294967295,B=$+(k<<15&4294967295|k>>>17),k=D+($^(B|~O))+N[1]+2240044497&4294967295,D=B+(k<<21&4294967295|k>>>11),k=O+(B^(D|~$))+N[8]+1873313359&4294967295,O=D+(k<<6&4294967295|k>>>26),k=$+(D^(O|~B))+N[15]+4264355552&4294967295,$=O+(k<<10&4294967295|k>>>22),k=B+(O^($|~D))+N[6]+2734768916&4294967295,B=$+(k<<15&4294967295|k>>>17),k=D+($^(B|~O))+N[13]+1309151649&4294967295,D=B+(k<<21&4294967295|k>>>11),k=O+(B^(D|~$))+N[4]+4149444226&4294967295,O=D+(k<<6&4294967295|k>>>26),k=$+(D^(O|~B))+N[11]+3174756917&4294967295,$=O+(k<<10&4294967295|k>>>22),k=B+(O^($|~D))+N[2]+718787259&4294967295,B=$+(k<<15&4294967295|k>>>17),k=D+($^(B|~O))+N[9]+3951481745&4294967295,V.g[0]=V.g[0]+O&4294967295,V.g[1]=V.g[1]+(B+(k<<21&4294967295|k>>>11))&4294967295,V.g[2]=V.g[2]+B&4294967295,V.g[3]=V.g[3]+$&4294967295}i.prototype.u=function(V,O){O===void 0&&(O=V.length);for(var D=O-this.blockSize,N=this.B,B=this.h,$=0;$<O;){if(B==0)for(;$<=D;)r(this,V,$),$+=this.blockSize;if(typeof V=="string"){for(;$<O;)if(N[B++]=V.charCodeAt($++),B==this.blockSize){r(this,N),B=0;break}}else for(;$<O;)if(N[B++]=V[$++],B==this.blockSize){r(this,N),B=0;break}}this.h=B,this.o+=O},i.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var O=1;O<V.length-8;++O)V[O]=0;var D=8*this.o;for(O=V.length-8;O<V.length;++O)V[O]=D&255,D/=256;for(this.u(V),V=Array(16),O=D=0;4>O;++O)for(var N=0;32>N;N+=8)V[D++]=this.g[O]>>>N&255;return V};function o(V,O){var D=l;return Object.prototype.hasOwnProperty.call(D,V)?D[V]:D[V]=O(V)}function a(V,O){this.h=O;for(var D=[],N=!0,B=V.length-1;0<=B;B--){var $=V[B]|0;N&&$==O||(D[B]=$,N=!1)}this.g=D}var l={};function u(V){return-128<=V&&128>V?o(V,function(O){return new a([O|0],0>O?-1:0)}):new a([V|0],0>V?-1:0)}function f(V){if(isNaN(V)||!isFinite(V))return b;if(0>V)return q(f(-V));for(var O=[],D=1,N=0;V>=D;N++)O[N]=V/D|0,D*=4294967296;return new a(O,0)}function g(V,O){if(V.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(V.charAt(0)=="-")return q(g(V.substring(1),O));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(O,8)),N=b,B=0;B<V.length;B+=8){var $=Math.min(8,V.length-B),k=parseInt(V.substring(B,B+$),O);8>$?($=f(Math.pow(O,$)),N=N.j($).add(f(k))):(N=N.j(D),N=N.add(f(k)))}return N}var b=u(0),E=u(1),I=u(16777216);n=a.prototype,n.m=function(){if(W(this))return-q(this).m();for(var V=0,O=1,D=0;D<this.g.length;D++){var N=this.i(D);V+=(0<=N?N:4294967296+N)*O,O*=4294967296}return V},n.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(R(this))return"0";if(W(this))return"-"+q(this).toString(V);for(var O=f(Math.pow(V,6)),D=this,N="";;){var B=Re(D,O).g;D=ie(D,B.j(O));var $=((0<D.g.length?D.g[0]:D.h)>>>0).toString(V);if(D=B,R(D))return $+N;for(;6>$.length;)$="0"+$;N=$+N}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function R(V){if(V.h!=0)return!1;for(var O=0;O<V.g.length;O++)if(V.g[O]!=0)return!1;return!0}function W(V){return V.h==-1}n.l=function(V){return V=ie(this,V),W(V)?-1:R(V)?0:1};function q(V){for(var O=V.g.length,D=[],N=0;N<O;N++)D[N]=~V.g[N];return new a(D,~V.h).add(E)}n.abs=function(){return W(this)?q(this):this},n.add=function(V){for(var O=Math.max(this.g.length,V.g.length),D=[],N=0,B=0;B<=O;B++){var $=N+(this.i(B)&65535)+(V.i(B)&65535),k=($>>>16)+(this.i(B)>>>16)+(V.i(B)>>>16);N=k>>>16,$&=65535,k&=65535,D[B]=k<<16|$}return new a(D,D[D.length-1]&-2147483648?-1:0)};function ie(V,O){return V.add(q(O))}n.j=function(V){if(R(this)||R(V))return b;if(W(this))return W(V)?q(this).j(q(V)):q(q(this).j(V));if(W(V))return q(this.j(q(V)));if(0>this.l(I)&&0>V.l(I))return f(this.m()*V.m());for(var O=this.g.length+V.g.length,D=[],N=0;N<2*O;N++)D[N]=0;for(N=0;N<this.g.length;N++)for(var B=0;B<V.g.length;B++){var $=this.i(N)>>>16,k=this.i(N)&65535,nn=V.i(B)>>>16,Ar=V.i(B)&65535;D[2*N+2*B]+=k*Ar,ge(D,2*N+2*B),D[2*N+2*B+1]+=$*Ar,ge(D,2*N+2*B+1),D[2*N+2*B+1]+=k*nn,ge(D,2*N+2*B+1),D[2*N+2*B+2]+=$*nn,ge(D,2*N+2*B+2)}for(N=0;N<O;N++)D[N]=D[2*N+1]<<16|D[2*N];for(N=O;N<2*O;N++)D[N]=0;return new a(D,0)};function ge(V,O){for(;(V[O]&65535)!=V[O];)V[O+1]+=V[O]>>>16,V[O]&=65535,O++}function we(V,O){this.g=V,this.h=O}function Re(V,O){if(R(O))throw Error("division by zero");if(R(V))return new we(b,b);if(W(V))return O=Re(q(V),O),new we(q(O.g),q(O.h));if(W(O))return O=Re(V,q(O)),new we(q(O.g),O.h);if(30<V.g.length){if(W(V)||W(O))throw Error("slowDivide_ only works with positive integers.");for(var D=E,N=O;0>=N.l(V);)D=jt(D),N=jt(N);var B=ct(D,1),$=ct(N,1);for(N=ct(N,2),D=ct(D,2);!R(N);){var k=$.add(N);0>=k.l(V)&&(B=B.add(D),$=k),N=ct(N,1),D=ct(D,1)}return O=ie(V,B.j(O)),new we(B,O)}for(B=b;0<=V.l(O);){for(D=Math.max(1,Math.floor(V.m()/O.m())),N=Math.ceil(Math.log(D)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),$=f(D),k=$.j(O);W(k)||0<k.l(V);)D-=N,$=f(D),k=$.j(O);R($)&&($=E),B=B.add($),V=ie(V,k)}return new we(B,V)}n.A=function(V){return Re(this,V).h},n.and=function(V){for(var O=Math.max(this.g.length,V.g.length),D=[],N=0;N<O;N++)D[N]=this.i(N)&V.i(N);return new a(D,this.h&V.h)},n.or=function(V){for(var O=Math.max(this.g.length,V.g.length),D=[],N=0;N<O;N++)D[N]=this.i(N)|V.i(N);return new a(D,this.h|V.h)},n.xor=function(V){for(var O=Math.max(this.g.length,V.g.length),D=[],N=0;N<O;N++)D[N]=this.i(N)^V.i(N);return new a(D,this.h^V.h)};function jt(V){for(var O=V.g.length+1,D=[],N=0;N<O;N++)D[N]=V.i(N)<<1|V.i(N-1)>>>31;return new a(D,V.h)}function ct(V,O){var D=O>>5;O%=32;for(var N=V.g.length-D,B=[],$=0;$<N;$++)B[$]=0<O?V.i($+D)>>>O|V.i($+D+1)<<32-O:V.i($+D);return new a(B,V.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,LE=YR.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,js=YR.Integer=a}).apply(typeof ZR<"u"?ZR:typeof self<"u"?self:typeof window<"u"?window:{});var sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hs={};var FE,SG,ld,VE,gp,av,BE,UE,zE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,m,x){return d==Array.prototype||d==Object.prototype||(d[m]=x.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof sv=="object"&&sv];for(var m=0;m<d.length;++m){var x=d[m];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=t(this);function r(d,m){if(m)e:{var x=i;d=d.split(".");for(var P=0;P<d.length-1;P++){var U=d[P];if(!(U in x))break e;x=x[U]}d=d[d.length-1],P=x[d],m=m(P),m!=P&&m!=null&&e(x,d,{configurable:!0,writable:!0,value:m})}}function o(d,m){d instanceof String&&(d+="");var x=0,P=!1,U={next:function(){if(!P&&x<d.length){var Y=x++;return{value:m(Y,d[Y]),done:!1}}return P=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}r("Array.prototype.values",function(d){return d||function(){return o(this,function(m,x){return x})}});var a=a||{},l=this||self;function u(d){var m=typeof d;return m=m!="object"?m:d?Array.isArray(d)?"array":m:"null",m=="array"||m=="object"&&typeof d.length=="number"}function f(d){var m=typeof d;return m=="object"&&d!=null||m=="function"}function g(d,m,x){return d.call.apply(d.bind,arguments)}function b(d,m,x){if(!d)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,P),d.apply(m,U)}}return function(){return d.apply(m,arguments)}}function E(d,m,x){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:b,E.apply(null,arguments)}function I(d,m){var x=Array.prototype.slice.call(arguments,1);return function(){var P=x.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function R(d,m){function x(){}x.prototype=m.prototype,d.aa=m.prototype,d.prototype=new x,d.prototype.constructor=d,d.Qb=function(P,U,Y){for(var ce=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)ce[tt-2]=arguments[tt];return m.prototype[U].apply(P,ce)}}function W(d){let m=d.length;if(0<m){let x=Array(m);for(let P=0;P<m;P++)x[P]=d[P];return x}return[]}function q(d,m){for(let x=1;x<arguments.length;x++){let P=arguments[x];if(u(P)){let U=d.length||0,Y=P.length||0;d.length=U+Y;for(let ce=0;ce<Y;ce++)d[U+ce]=P[ce]}else d.push(P)}}class ie{constructor(m,x){this.i=m,this.j=x,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ge(d){return/^[\s\xa0]*$/.test(d)}function we(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function Re(d){return Re[" "](d),d}Re[" "]=function(){};var jt=we().indexOf("Gecko")!=-1&&!(we().toLowerCase().indexOf("webkit")!=-1&&we().indexOf("Edge")==-1)&&!(we().indexOf("Trident")!=-1||we().indexOf("MSIE")!=-1)&&we().indexOf("Edge")==-1;function ct(d,m,x){for(let P in d)m.call(x,d[P],P,d)}function V(d,m){for(let x in d)m.call(void 0,d[x],x,d)}function O(d){let m={};for(let x in d)m[x]=d[x];return m}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(d,m){let x,P;for(let U=1;U<arguments.length;U++){P=arguments[U];for(x in P)d[x]=P[x];for(let Y=0;Y<D.length;Y++)x=D[Y],Object.prototype.hasOwnProperty.call(P,x)&&(d[x]=P[x])}}function B(d){var m=1;d=d.split(":");let x=[];for(;0<m&&d.length;)x.push(d.shift()),m--;return d.length&&x.push(d.join(":")),x}function $(d){l.setTimeout(()=>{throw d},0)}function k(){var d=Vt;let m=null;return d.g&&(m=d.g,d.g=d.g.next,d.g||(d.h=null),m.next=null),m}class nn{constructor(){this.h=this.g=null}add(m,x){let P=Ar.get();P.set(m,x),this.h?this.h.next=P:this.g=P,this.h=P}}var Ar=new ie(()=>new Ge,d=>d.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(m,x){this.h=m,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ys,Ne=!1,Vt=new nn,ti=()=>{let d=l.Promise.resolve(void 0);Ys=()=>{d.then(li)}};var li=()=>{for(var d;d=k();){try{d.h.call(d.g)}catch(x){$(x)}var m=Ar;m.j(d),100>m.h&&(m.h++,d.next=m.g,m.g=d)}Ne=!1};function kt(){this.s=this.s,this.C=this.C}kt.prototype.s=!1,kt.prototype.ma=function(){this.s||(this.s=!0,this.N())},kt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ze(d,m){this.type=d,this.g=this.target=m,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var lt=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,m=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let x=()=>{};l.addEventListener("test",x,m),l.removeEventListener("test",x,m)}catch{}return d})();function xi(d,m){if(ze.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var x=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=m,m=d.relatedTarget){if(jt){e:{try{Re(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else x=="mouseover"?m=d.fromElement:x=="mouseout"&&(m=d.toElement);this.relatedTarget=m,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:lo[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&xi.aa.h.call(this)}}R(xi,ze);var lo={2:"touch",3:"pen",4:"mouse"};xi.prototype.h=function(){xi.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Qs="closure_listenable_"+(1e6*Math.random()|0),qd=0;function Wd(d,m,x,P,U){this.listener=d,this.proxy=null,this.src=m,this.type=x,this.capture=!!P,this.ha=U,this.key=++qd,this.da=this.fa=!1}function uo(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Js(d){this.src=d,this.g={},this.h=0}Js.prototype.add=function(d,m,x,P,U){var Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);var ce=Al(d,m,P,U);return-1<ce?(m=d[ce],x||(m.fa=!1)):(m=new Wd(m,this.src,Y,!!P,U),m.fa=x,d.push(m)),m};function Kd(d,m){var x=m.type;if(x in d.g){var P=d.g[x],U=Array.prototype.indexOf.call(P,m,void 0),Y;(Y=0<=U)&&Array.prototype.splice.call(P,U,1),Y&&(uo(m),d.g[x].length==0&&(delete d.g[x],d.h--))}}function Al(d,m,x,P){for(var U=0;U<d.length;++U){var Y=d[U];if(!Y.da&&Y.listener==m&&Y.capture==!!x&&Y.ha==P)return U}return-1}var kl="closure_lm_"+(1e6*Math.random()|0),cc={};function lc(d,m,x,P,U){if(P&&P.once)return Rl(d,m,x,P,U);if(Array.isArray(m)){for(var Y=0;Y<m.length;Y++)lc(d,m[Y],x,P,U);return null}return x=Fl(x),d&&d[Qs]?d.K(m,x,f(P)?!!P.capture:!!P,U):Zp(d,m,x,!1,P,U)}function Zp(d,m,x,P,U,Y){if(!m)throw Error("Invalid event type");var ce=f(U)?!!U.capture:!!U,tt=uc(d);if(tt||(d[kl]=tt=new Js(d)),x=tt.add(m,x,P,ce,Y),x.proxy)return x;if(P=Yp(),x.proxy=P,P.src=d,P.listener=x,d.addEventListener)lt||(U=ce),U===void 0&&(U=!1),d.addEventListener(m.toString(),P,U);else if(d.attachEvent)d.attachEvent(Qp(m.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Yp(){function d(x){return m.call(d.src,d.listener,x)}let m=Gy;return d}function Rl(d,m,x,P,U){if(Array.isArray(m)){for(var Y=0;Y<m.length;Y++)Rl(d,m[Y],x,P,U);return null}return x=Fl(x),d&&d[Qs]?d.L(m,x,f(P)?!!P.capture:!!P,U):Zp(d,m,x,!0,P,U)}function Zd(d,m,x,P,U){if(Array.isArray(m))for(var Y=0;Y<m.length;Y++)Zd(d,m[Y],x,P,U);else P=f(P)?!!P.capture:!!P,x=Fl(x),d&&d[Qs]?(d=d.i,m=String(m).toString(),m in d.g&&(Y=d.g[m],x=Al(Y,x,P,U),-1<x&&(uo(Y[x]),Array.prototype.splice.call(Y,x,1),Y.length==0&&(delete d.g[m],d.h--)))):d&&(d=uc(d))&&(m=d.g[m.toString()],d=-1,m&&(d=Al(m,x,P,U)),(x=-1<d?m[d]:null)&&Nl(x))}function Nl(d){if(typeof d!="number"&&d&&!d.da){var m=d.src;if(m&&m[Qs])Kd(m.i,d);else{var x=d.type,P=d.proxy;m.removeEventListener?m.removeEventListener(x,P,d.capture):m.detachEvent?m.detachEvent(Qp(x),P):m.addListener&&m.removeListener&&m.removeListener(P),(x=uc(m))?(Kd(x,d),x.h==0&&(x.src=null,m[kl]=null)):uo(d)}}}function Qp(d){return d in cc?cc[d]:cc[d]="on"+d}function Gy(d,m){if(d.da)d=!0;else{m=new xi(m,this);var x=d.listener,P=d.ha||d.src;d.fa&&Nl(d),d=x.call(P,m)}return d}function uc(d){return d=d[kl],d instanceof Js?d:null}var Ll="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fl(d){return typeof d=="function"?d:(d[Ll]||(d[Ll]=function(m){return d.handleEvent(m)}),d[Ll])}function Gn(){kt.call(this),this.i=new Js(this),this.M=this,this.F=null}R(Gn,kt),Gn.prototype[Qs]=!0,Gn.prototype.removeEventListener=function(d,m,x,P){Zd(this,d,m,x,P)};function qn(d,m){var x,P=d.F;if(P)for(x=[];P;P=P.F)x.push(P);if(d=d.M,P=m.type||m,typeof m=="string")m=new ze(m,d);else if(m instanceof ze)m.target=m.target||d;else{var U=m;m=new ze(P,d),N(m,U)}if(U=!0,x)for(var Y=x.length-1;0<=Y;Y--){var ce=m.g=x[Y];U=dc(ce,P,!0,m)&&U}if(ce=m.g=d,U=dc(ce,P,!0,m)&&U,U=dc(ce,P,!1,m)&&U,x)for(Y=0;Y<x.length;Y++)ce=m.g=x[Y],U=dc(ce,P,!1,m)&&U}Gn.prototype.N=function(){if(Gn.aa.N.call(this),this.i){var d=this.i,m;for(m in d.g){for(var x=d.g[m],P=0;P<x.length;P++)uo(x[P]);delete d.g[m],d.h--}}this.F=null},Gn.prototype.K=function(d,m,x,P){return this.i.add(String(d),m,!1,x,P)},Gn.prototype.L=function(d,m,x,P){return this.i.add(String(d),m,!0,x,P)};function dc(d,m,x,P){if(m=d.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,Y=0;Y<m.length;++Y){var ce=m[Y];if(ce&&!ce.da&&ce.capture==x){var tt=ce.listener,Qt=ce.ha||ce.src;ce.fa&&Kd(d.i,ce),U=tt.call(Qt,P)!==!1&&U}}return U&&!P.defaultPrevented}function Jp(d,m,x){if(typeof d=="function")x&&(d=E(d,x));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout(d,m||0)}function Yd(d){d.g=Jp(()=>{d.g=null,d.i&&(d.i=!1,Yd(d))},d.l);let m=d.h;d.h=null,d.m.apply(null,m)}class Qd extends kt{constructor(m,x){super(),this.m=m,this.l=x,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Yd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(d){kt.call(this),this.h=d,this.g={}}R(Xs,kt);var Xp=[];function ea(d){ct(d.g,function(m,x){this.g.hasOwnProperty(x)&&Nl(m)},d),d.g={}}Xs.prototype.N=function(){Xs.aa.N.call(this),ea(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jd=l.JSON.stringify,qy=l.JSON.parse,eg=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Vl(){}Vl.prototype.h=null;function Xd(d){return d.h||(d.h=d.i())}function tg(){}var hc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eh(){ze.call(this,"d")}R(eh,ze);function th(){ze.call(this,"c")}R(th,ze);var is={},ng=null;function ta(){return ng=ng||new Gn}is.La="serverreachability";function ig(d){ze.call(this,is.La,d)}R(ig,ze);function fc(d){let m=ta();qn(m,new ig(m))}is.STAT_EVENT="statevent";function rg(d,m){ze.call(this,is.STAT_EVENT,d),this.stat=m}R(rg,ze);function ni(d){let m=ta();qn(m,new rg(m,d))}is.Ma="timingevent";function Zi(d,m){ze.call(this,is.Ma,d),this.size=m}R(Zi,ze);function Ce(d,m){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},m)}function na(){this.g=!0}na.prototype.xa=function(){this.g=!1};function og(d,m,x,P,U,Y){d.info(function(){if(d.g)if(Y)for(var ce="",tt=Y.split("&"),Qt=0;Qt<tt.length;Qt++){var gt=tt[Qt].split("=");if(1<gt.length){var $t=gt[0];gt=gt[1];var Wn=$t.split("_");ce=2<=Wn.length&&Wn[1]=="type"?ce+($t+"="+gt+"&"):ce+($t+"=redacted&")}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+P+") [attempt "+U+"]: "+m+`
`+x+`
`+ce})}function sg(d,m,x,P,U,Y,ce){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+U+"]: "+m+`
`+x+`
`+Y+" "+ce})}function rs(d,m,x,P){d.info(function(){return"XMLHTTP TEXT ("+m+"): "+ag(d,x)+(P?" "+P:"")})}function nh(d,m){d.info(function(){return"TIMEOUT: "+m})}na.prototype.info=function(){};function ag(d,m){if(!d.g)return m;if(!m)return null;try{var x=JSON.parse(m);if(x){for(d=0;d<x.length;d++)if(Array.isArray(x[d])){var P=x[d];if(!(2>P.length)){var U=P[1];if(Array.isArray(U)&&!(1>U.length)){var Y=U[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ce=1;ce<U.length;ce++)U[ce]=""}}}}return Jd(x)}catch{return m}}var kr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ih={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rh;function Bl(){}R(Bl,Vl),Bl.prototype.g=function(){return new XMLHttpRequest},Bl.prototype.i=function(){return{}},rh=new Bl;function ho(d,m,x,P){this.j=d,this.i=m,this.l=x,this.R=P||1,this.U=new Xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cg}function cg(){this.i=null,this.g="",this.h=!1}var oh={},sh={};function ia(d,m,x){d.L=1,d.v=oa(ii(m)),d.m=x,d.P=!0,lg(d,null)}function lg(d,m){d.F=Date.now(),Ul(d),d.A=ii(d.v);var x=d.A,P=d.R;Array.isArray(P)||(P=[String(P)]),Rt(x.i,"t",P),d.C=0,x=d.j.J,d.h=new cg,d.g=Ic(d.j,x?m:null,!d.m),0<d.O&&(d.M=new Qd(E(d.Y,d,d.g),d.O)),m=d.U,x=d.g,P=d.ca;var U="readystatechange";Array.isArray(U)||(U&&(Xp[0]=U.toString()),U=Xp);for(var Y=0;Y<U.length;Y++){var ce=lc(x,U[Y],P||m.handleEvent,!1,m.h||m);if(!ce)break;m.g[ce.key]=ce}m=d.H?O(d.H):{},d.m?(d.u||(d.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,m)):(d.u="GET",d.g.ea(d.A,d.u,null,m)),fc(),og(d.i,d.u,d.A,d.l,d.R,d.m)}ho.prototype.ca=function(d){d=d.target;let m=this.M;m&&Qi(d)==3?m.j():this.Y(d)},ho.prototype.Y=function(d){try{if(d==this.g)e:{let Wn=Qi(this.g);var m=this.g.Ba();let Xi=this.g.Z();if(!(3>Wn)&&(Wn!=3||this.g&&(this.h.h||this.g.oa()||mg(this.g)))){this.J||Wn!=4||m==7||(m==8||0>=Xi?fc(3):fc(2)),pc(this);var x=this.g.Z();this.X=x;t:if(ug(this)){var P=mg(this.g);d="";var U=P.length,Y=Qi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fo(this),Rr(this);var ce="";break t}this.h.i=new l.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,d+=this.h.i.decode(P[m],{stream:!(Y&&m==U-1)});P.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=x==200,sg(this.i,this.u,this.A,this.l,this.R,Wn,x),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Qt=this.g;if((tt=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ge(tt)){var gt=tt;break t}}gt=null}if(x=gt)rs(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zl(this,x);else{this.o=!1,this.s=3,ni(12),fo(this),Rr(this);break e}}if(this.P){x=!0;let er;for(;!this.J&&this.C<ce.length;)if(er=Wy(this,ce),er==sh){Wn==4&&(this.s=4,ni(14),x=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(er==oh){this.s=4,ni(15),rs(this.i,this.l,ce,"[Invalid Chunk]"),x=!1;break}else rs(this.i,this.l,er,null),zl(this,er);if(ug(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wn!=4||ce.length!=0||this.h.h||(this.s=1,ni(16),x=!1),this.o=this.o&&x,!x)rs(this.i,this.l,ce,"[Invalid Chunked Response]"),fo(this),Rr(this);else if(0<ce.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Wl($t),$t.M=!0,ni(11))}}else rs(this.i,this.l,ce,null),zl(this,ce);Wn==4&&fo(this),this.o&&!this.J&&(Wn==4?bg(this.j,this):(this.o=!1,Ul(this)))}else _g(this.g),x==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ni(12)):(this.s=0,ni(13)),fo(this),Rr(this)}}}catch{}finally{}};function ug(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Wy(d,m){var x=d.C,P=m.indexOf(`
`,x);return P==-1?sh:(x=Number(m.substring(x,P)),isNaN(x)?oh:(P+=1,P+x>m.length?sh:(m=m.slice(P,P+x),d.C=P+x,m)))}ho.prototype.cancel=function(){this.J=!0,fo(this)};function Ul(d){d.S=Date.now()+d.I,dg(d,d.I)}function dg(d,m){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ce(E(d.ba,d),m)}function pc(d){d.B&&(l.clearTimeout(d.B),d.B=null)}ho.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(nh(this.i,this.A),this.L!=2&&(fc(),ni(17)),fo(this),this.s=2,Rr(this)):dg(this,this.S-d)};function Rr(d){d.j.G==0||d.J||bg(d.j,d)}function fo(d){pc(d);var m=d.M;m&&typeof m.ma=="function"&&m.ma(),d.M=null,ea(d.U),d.g&&(m=d.g,d.g=null,m.abort(),m.ma())}function zl(d,m){try{var x=d.j;if(x.G!=0&&(x.g==d||po(x.h,d))){if(!d.K&&po(x.h,d)&&x.G==3){try{var P=x.Da.g.parse(m)}catch{P=null}if(Array.isArray(P)&&P.length==3){var U=P;if(U[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<d.F)Kl(x),$l(x);else break e;vh(x),ni(18)}}else x.za=U[1],0<x.za-x.T&&37500>U[2]&&x.F&&x.v==0&&!x.C&&(x.C=Ce(E(x.Za,x),6e3));if(1>=mc(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else cs(x,11)}else if((d.K||x.g==d)&&Kl(x),!ge(m))for(U=x.Da.g.parse(m),m=0;m<U.length;m++){let gt=U[m];if(x.T=gt[0],gt=gt[1],x.G==2)if(gt[0]=="c"){x.K=gt[1],x.ia=gt[2];let $t=gt[3];$t!=null&&(x.la=$t,x.j.info("VER="+x.la));let Wn=gt[4];Wn!=null&&(x.Aa=Wn,x.j.info("SVER="+x.Aa));let Xi=gt[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(P=1.5*Xi,x.L=P,x.j.info("backChannelRequestTimeoutMs_="+P)),P=x;let er=d.g;if(er){let vo=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vo){var Y=P.h;Y.g||vo.indexOf("spdy")==-1&&vo.indexOf("quic")==-1&&vo.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(go(Y,Y.h),Y.h=null))}if(P.D){let Ql=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;Ql&&(P.ya=Ql,St(P.I,P.D,Ql))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-d.F,x.j.info("Handshake RTT: "+x.R+"ms")),P=x;var ce=d;if(P.qa=xh(P,P.J?P.ia:null,P.W),ce.K){jl(P.h,ce);var tt=ce,Qt=P.L;Qt&&(tt.I=Qt),tt.B&&(pc(tt),Ul(tt)),P.g=ce}else ql(P);0<x.i.length&&Gl(x)}else gt[0]!="stop"&&gt[0]!="close"||cs(x,7);else x.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?cs(x,7):Ec(x):gt[0]!="noop"&&x.l&&x.l.ta(gt),x.v=0)}}fc(4)}catch{}}var gc=class{constructor(d,m){this.g=d,this.map=m}};function pt(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ht(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function mc(d){return d.h?1:d.g?d.g.size:0}function po(d,m){return d.h?d.h==m:d.g?d.g.has(m):!1}function go(d,m){d.g?d.g.add(m):d.h=m}function jl(d,m){d.h&&d.h==m?d.h=null:d.g&&d.g.has(m)&&d.g.delete(m)}pt.prototype.cancel=function(){if(this.i=Ke(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Ke(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let m=d.i;for(let x of d.g.values())m=m.concat(x.D);return m}return W(d.i)}function rn(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var m=[],x=d.length,P=0;P<x;P++)m.push(d[P]);return m}m=[],x=0;for(P in d)m[x++]=d[P];return m}function ah(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var m=[];d=d.length;for(var x=0;x<d;x++)m.push(x);return m}m=[],x=0;for(let P in d)m[x++]=P;return m}}}function _c(d,m){if(d.forEach&&typeof d.forEach=="function")d.forEach(m,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,m,void 0);else for(var x=ah(d),P=rn(d),U=P.length,Y=0;Y<U;Y++)m.call(void 0,P[Y],x&&x[Y],d)}var wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ky(d,m){if(d){d=d.split("&");for(var x=0;x<d.length;x++){var P=d[x].indexOf("="),U=null;if(0<=P){var Y=d[x].substring(0,P);U=d[x].substring(P+1)}else Y=d[x];m(Y,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function hr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof hr){this.h=d.h,Kt(this,d.j),this.o=d.o,this.g=d.g,fr(this,d.s),this.l=d.l;var m=d.i,x=new ss;x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),ra(this,x),this.m=d.m}else d&&(m=String(d).match(wi))?(this.h=!1,Kt(this,m[1]||"",!0),this.o=Nr(m[2]||""),this.g=Nr(m[3]||"",!0),fr(this,m[4]),this.l=Nr(m[5]||"",!0),ra(this,m[6]||"",!0),this.m=Nr(m[7]||"")):(this.h=!1,this.i=new ss(null,this.h))}hr.prototype.toString=function(){var d=[],m=this.j;m&&d.push(os(m,vc,!0),":");var x=this.g;return(x||m=="file")&&(d.push("//"),(m=this.o)&&d.push(os(m,vc,!0),"@"),d.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&d.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(os(x,x.charAt(0)=="/"?uh:lh,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",os(x,hg)),d.join("")};function ii(d){return new hr(d)}function Kt(d,m,x){d.j=x?Nr(m,!0):m,d.j&&(d.j=d.j.replace(/:$/,""))}function fr(d,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);d.s=m}else d.s=null}function ra(d,m,x){m instanceof ss?(d.i=m,dh(d.i,d.h)):(x||(m=os(m,Hl)),d.i=new ss(m,d.h))}function St(d,m,x){d.i.set(m,x)}function oa(d){return St(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Nr(d,m){return d?m?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function os(d,m,x){return typeof d=="string"?(d=encodeURI(d).replace(m,ch),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ch(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var vc=/[#\/\?@]/g,lh=/[#\?:]/g,uh=/[#\?]/g,Hl=/[#\?@]/g,hg=/#/g;function ss(d,m){this.h=this.g=null,this.i=d||null,this.j=!!m}function mo(d){d.g||(d.g=new Map,d.h=0,d.i&&Ky(d.i,function(m,x){d.add(decodeURIComponent(m.replace(/\+/g," ")),x)}))}n=ss.prototype,n.add=function(d,m){mo(this),this.i=null,d=as(this,d);var x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(m),this.h+=1,this};function je(d,m){mo(d),m=as(d,m),d.g.has(m)&&(d.i=null,d.h-=d.g.get(m).length,d.g.delete(m))}function Yi(d,m){return mo(d),m=as(d,m),d.g.has(m)}n.forEach=function(d,m){mo(this),this.g.forEach(function(x,P){x.forEach(function(U){d.call(m,U,P,this)},this)},this)},n.na=function(){mo(this);let d=Array.from(this.g.values()),m=Array.from(this.g.keys()),x=[];for(let P=0;P<m.length;P++){let U=d[P];for(let Y=0;Y<U.length;Y++)x.push(m[P])}return x},n.V=function(d){mo(this);let m=[];if(typeof d=="string")Yi(this,d)&&(m=m.concat(this.g.get(as(this,d))));else{d=Array.from(this.g.values());for(let x=0;x<d.length;x++)m=m.concat(d[x])}return m},n.set=function(d,m){return mo(this),this.i=null,d=as(this,d),Yi(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[m]),this.h+=1,this},n.get=function(d,m){return d?(d=this.V(d),0<d.length?String(d[0]):m):m};function Rt(d,m,x){je(d,m),0<x.length&&(d.i=null,d.g.set(as(d,m),W(x)),d.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],m=Array.from(this.g.keys());for(var x=0;x<m.length;x++){var P=m[x];let Y=encodeURIComponent(String(P)),ce=this.V(P);for(P=0;P<ce.length;P++){var U=Y;ce[P]!==""&&(U+="="+encodeURIComponent(String(ce[P]))),d.push(U)}}return this.i=d.join("&")};function as(d,m){return m=String(m),d.j&&(m=m.toLowerCase()),m}function dh(d,m){m&&!d.j&&(mo(d),d.i=null,d.g.forEach(function(x,P){var U=P.toLowerCase();P!=U&&(je(this,P),Rt(this,U,x))},d)),d.j=m}function hh(d,m){let x=new na;if(l.Image){let P=new Image;P.onload=I(ui,x,"TestLoadImage: loaded",!0,m,P),P.onerror=I(ui,x,"TestLoadImage: error",!1,m,P),P.onabort=I(ui,x,"TestLoadImage: abort",!1,m,P),P.ontimeout=I(ui,x,"TestLoadImage: timeout",!1,m,P),l.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else m(!1)}function fh(d,m){let x=new na,P=new AbortController,U=setTimeout(()=>{P.abort(),ui(x,"TestPingServer: timeout",!1,m)},1e4);fetch(d,{signal:P.signal}).then(Y=>{clearTimeout(U),Y.ok?ui(x,"TestPingServer: ok",!0,m):ui(x,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),ui(x,"TestPingServer: error",!1,m)})}function ui(d,m,x,P,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),P(x)}catch{}}function ph(){this.g=new eg}function yc(d,m,x){let P=x||"";try{_c(d,function(U,Y){let ce=U;f(U)&&(ce=Jd(U)),m.push(P+Y+"="+encodeURIComponent(ce))})}catch(U){throw m.push(P+"type="+encodeURIComponent("_badmap")),U}}function on(d){this.l=d.Ub||null,this.j=d.eb||!1}R(on,Vl),on.prototype.g=function(){return new pr(this.l,this.j)},on.prototype.i=(function(d){return function(){return d}})({});function pr(d,m){Gn.call(this),this.D=d,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(pr,Gn),n=pr.prototype,n.open=function(d,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=m,this.readyState=1,bc(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(m.body=d),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sa(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,bc(this)),this.g&&(this.readyState=3,bc(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gh(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function gh(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var m=d.value?d.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!d.done}))&&(this.response=this.responseText+=m)}d.done?sa(this):bc(this),this.readyState==3&&gh(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,sa(this))},n.Qa=function(d){this.g&&(this.response=d,sa(this))},n.ga=function(){this.g&&sa(this)};function sa(d){d.readyState=4,d.l=null,d.j=null,d.v=null,bc(d)}n.setRequestHeader=function(d,m){this.u.append(d,m)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],m=this.h.entries();for(var x=m.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=m.next();return d.join(`\r
`)};function bc(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(pr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function mh(d){let m="";return ct(d,function(x,P){m+=P,m+=":",m+=x,m+=`\r
`}),m}function xc(d,m,x){e:{for(P in x){var P=!1;break e}P=!0}P||(x=mh(x),typeof d=="string"?x!=null&&encodeURIComponent(String(x)):St(d,m,x))}function Yt(d){Gn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Yt,Gn);var fg=/^https?$/i,ut=["POST","PUT"];n=Yt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,m,x,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);m=m?m.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rh.g(),this.v=this.o?Xd(this.o):Xd(rh),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(d),!0),this.B=!1}catch(Y){pg(this,Y);return}if(d=x||"",x=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var U in P)x.set(U,P[U]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(let Y of P.keys())x.set(Y,P.get(Y));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(x.keys()).find(Y=>Y.toLowerCase()=="content-type"),U=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ut,m,void 0))||P||U||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[Y,ce]of x)this.g.setRequestHeader(Y,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gg(this),this.u=!0,this.g.send(d),this.u=!1}catch(Y){pg(this,Y)}};function pg(d,m){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=m,d.m=5,Li(d),wc(d)}function Li(d){d.A||(d.A=!0,qn(d,"complete"),qn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,qn(this,"complete"),qn(this,"abort"),wc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wc(this,!0)),Yt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?aa(this):this.bb())},n.bb=function(){aa(this)};function aa(d){if(d.h&&typeof a<"u"&&(!d.v[1]||Qi(d)!=4||d.Z()!=2)){if(d.u&&Qi(d)==4)Jp(d.Ea,0,d);else if(qn(d,"readystatechange"),Qi(d)==4){d.h=!1;try{let ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var x;if(!(x=m)){var P;if(P=ce===0){var U=String(d.D).match(wi)[1]||null;!U&&l.self&&l.self.location&&(U=l.self.location.protocol.slice(0,-1)),P=!fg.test(U?U.toLowerCase():"")}x=P}if(x)qn(d,"complete"),qn(d,"success");else{d.m=6;try{var Y=2<Qi(d)?d.g.statusText:""}catch{Y=""}d.l=Y+" ["+d.Z()+"]",Li(d)}}finally{wc(d)}}}}function wc(d,m){if(d.g){gg(d);let x=d.g,P=d.v[0]?()=>{}:null;d.g=null,d.v=null,m||qn(d,"ready");try{x.onreadystatechange=P}catch{}}}function gg(d){d.I&&(l.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Qi(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Qi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var m=this.g.responseText;return d&&m.indexOf(d)==0&&(m=m.substring(d.length)),qy(m)}};function mg(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function _g(d){let m={};d=(d.g&&2<=Qi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(ge(d[P]))continue;var x=B(d[P]);let U=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();let Y=m[U]||[];m[U]=Y,Y.push(x)}V(m,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cc(d,m,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||m}function vg(d){this.Aa=0,this.i=[],this.j=new na,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cc("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cc("baseRetryDelayMs",5e3,d),this.cb=Cc("retryDelaySeedMs",1e4,d),this.Wa=Cc("forwardChannelMaxRetries",2,d),this.wa=Cc("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new pt(d&&d.concurrentRequestLimit),this.Da=new ph,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=vg.prototype,n.la=8,n.G=1,n.connect=function(d,m,x,P){ni(0),this.W=d,this.H=m||{},x&&P!==void 0&&(this.H.OSID=x,this.H.OAID=P),this.F=this.X,this.I=xh(this,null,this.W),Gl(this)};function Ec(d){if(Ji(d),d.G==3){var m=d.U++,x=ii(d.I);if(St(x,"SID",d.K),St(x,"RID",m),St(x,"TYPE","terminate"),ca(d,x),m=new ho(d,d.j,m),m.L=2,m.v=oa(ii(x)),x=!1,l.navigator&&l.navigator.sendBeacon)try{x=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!x&&l.Image&&(new Image().src=m.v,x=!0),x||(m.g=Ic(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ul(m)}bh(d)}function $l(d){d.g&&(Wl(d),d.g.cancel(),d.g=null)}function Ji(d){$l(d),d.u&&(l.clearTimeout(d.u),d.u=null),Kl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Gl(d){if(!Ht(d.h)&&!d.s){d.s=!0;var m=d.Ga;Ys||ti(),Ne||(Ys(),Ne=!0),Vt.add(m,d),d.B=0}}function yg(d,m){return mc(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=m.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ce(E(d.Ga,d,m),Zl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let U=new ho(this,this.j,d),Y=this.o;if(this.S&&(Y?(Y=O(Y),N(Y,this.S)):Y=this.S),this.m!==null||this.O||(U.H=Y,Y=null),this.P)e:{for(var m=0,x=0;x<this.i.length;x++){t:{var P=this.i[x];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(m+=P,4096<m){m=x;break e}if(m===4096||x===this.i.length-1){m=x+1;break e}}m=1e3}else m=1e3;m=_h(this,U,m),x=ii(this.I),St(x,"RID",d),St(x,"CVER",22),this.D&&St(x,"X-HTTP-Session-Id",this.D),ca(this,x),Y&&(this.O?m="headers="+encodeURIComponent(String(mh(Y)))+"&"+m:this.m&&xc(x,this.m,Y)),go(this.h,U),this.Ua&&St(x,"TYPE","init"),this.P?(St(x,"$req",m),St(x,"SID","null"),U.T=!0,ia(U,x,null)):ia(U,x,m),this.G=2}}else this.G==3&&(d?Lr(this,d):this.i.length==0||Ht(this.h)||Lr(this))};function Lr(d,m){var x;m?x=m.l:x=d.U++;let P=ii(d.I);St(P,"SID",d.K),St(P,"RID",x),St(P,"AID",d.T),ca(d,P),d.m&&d.o&&xc(P,d.m,d.o),x=new ho(d,d.j,x,d.B+1),d.m===null&&(x.H=d.o),m&&(d.i=m.D.concat(d.i)),m=_h(d,x,1e3),x.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),go(d.h,x),ia(x,P,m)}function ca(d,m){d.H&&ct(d.H,function(x,P){St(m,P,x)}),d.l&&_c({},function(x,P){St(m,P,x)})}function _h(d,m,x){x=Math.min(d.i.length,x);var P=d.l?E(d.l.Na,d.l,d):null;e:{var U=d.i;let Y=-1;for(;;){let ce=["count="+x];Y==-1?0<x?(Y=U[0].g,ce.push("ofs="+Y)):Y=0:ce.push("ofs="+Y);let tt=!0;for(let Qt=0;Qt<x;Qt++){let gt=U[Qt].g,$t=U[Qt].map;if(gt-=Y,0>gt)Y=Math.max(0,U[Qt].g-100),tt=!1;else try{yc($t,ce,"req"+gt+"_")}catch{P&&P($t)}}if(tt){P=ce.join("&");break e}}}return d=d.i.splice(0,x),m.D=d,P}function ql(d){if(!d.g&&!d.u){d.Y=1;var m=d.Fa;Ys||ti(),Ne||(Ys(),Ne=!0),Vt.add(m,d),d.v=0}}function vh(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ce(E(d.Fa,d),Zl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,yh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ce(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ni(10),$l(this),yh(this))};function Wl(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function yh(d){d.g=new ho(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var m=ii(d.qa);St(m,"RID","rpc"),St(m,"SID",d.K),St(m,"AID",d.T),St(m,"CI",d.F?"0":"1"),!d.F&&d.ja&&St(m,"TO",d.ja),St(m,"TYPE","xmlhttp"),ca(d,m),d.m&&d.o&&xc(m,d.m,d.o),d.L&&(d.g.I=d.L);var x=d.g;d=d.ia,x.L=1,x.v=oa(ii(m)),x.m=null,x.P=!0,lg(x,d)}n.Za=function(){this.C!=null&&(this.C=null,$l(this),vh(this),ni(19))};function Kl(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function bg(d,m){var x=null;if(d.g==m){Kl(d),Wl(d),d.g=null;var P=2}else if(po(d.h,m))x=m.D,jl(d.h,m),P=1;else return;if(d.G!=0){if(m.o)if(P==1){x=m.m?m.m.length:0,m=Date.now()-m.F;var U=d.B;P=ta(),qn(P,new Zi(P,x)),Gl(d)}else ql(d);else if(U=m.s,U==3||U==0&&0<m.X||!(P==1&&yg(d,m)||P==2&&vh(d)))switch(x&&0<x.length&&(m=d.h,m.i=m.i.concat(x)),U){case 1:cs(d,5);break;case 4:cs(d,10);break;case 3:cs(d,6);break;default:cs(d,2)}}}function Zl(d,m){let x=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(x*=2),x*m}function cs(d,m){if(d.j.info("Error code "+m),m==2){var x=E(d.fb,d),P=d.Xa;let U=!P;P=new hr(P||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Kt(P,"https"),oa(P),U?hh(P.toString(),x):fh(P.toString(),x)}else ni(2);d.G=0,d.l&&d.l.sa(m),bh(d),Ji(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),ni(2)):(this.j.info("Failed to ping google.com"),ni(1))};function bh(d){if(d.G=0,d.ka=[],d.l){let m=Ke(d.h);(m.length!=0||d.i.length!=0)&&(q(d.ka,m),q(d.ka,d.i),d.h.i.length=0,W(d.i),d.i.length=0),d.l.ra()}}function xh(d,m,x){var P=x instanceof hr?ii(x):new hr(x);if(P.g!="")m&&(P.g=m+"."+P.g),fr(P,P.s);else{var U=l.location;P=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var Y=new hr(null);P&&Kt(Y,P),m&&(Y.g=m),U&&fr(Y,U),x&&(Y.l=x),P=Y}return x=d.D,m=d.ya,x&&m&&St(P,x,m),St(P,"VER",d.la),ca(d,P),P}function Ic(d,m,x){if(m&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=d.Ca&&!d.pa?new Yt(new on({eb:x})):new Yt(d.pa),m.Ha(d.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _o(){}n=_o.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Yl(){}Yl.prototype.g=function(d,m){return new Bn(d,m)};function Bn(d,m){Gn.call(this),this.g=new vg(m),this.l=d,this.h=m&&m.messageUrlParams||null,d=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(d?d["X-WebChannel-Content-Type"]=m.messageContentType:d={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(d?d["X-WebChannel-Client-Profile"]=m.va:d={"X-WebChannel-Client-Profile":m.va}),this.g.S=d,(d=m&&m.Sb)&&!ge(d)&&(this.g.m=d),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ge(m)&&(this.g.D=m,d=this.h,d!==null&&m in d&&(d=this.h,m in d&&delete d[m])),this.j=new ls(this)}R(Bn,Gn),Bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){Ec(this.g)},Bn.prototype.o=function(d){var m=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.u&&(x={},x.__data__=Jd(d),d=x);m.i.push(new gc(m.Ya++,d)),m.G==3&&Gl(m)},Bn.prototype.N=function(){this.g.l=null,delete this.j,Ec(this.g),delete this.g,Bn.aa.N.call(this)};function Ci(d){eh.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var m=d.__sm__;if(m){e:{for(let x in m){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,m=m!==null&&d in m?m[d]:void 0),this.data=m}else this.data=d}R(Ci,eh);function wh(){th.call(this),this.status=1}R(wh,th);function ls(d){this.g=d}R(ls,_o),ls.prototype.ua=function(){qn(this.g,"a")},ls.prototype.ta=function(d){qn(this.g,new Ci(d))},ls.prototype.sa=function(d){qn(this.g,new wh)},ls.prototype.ra=function(){qn(this.g,"b")},Yl.prototype.createWebChannel=Yl.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,zE=Hs.createWebChannelTransport=function(){return new Yl},UE=Hs.getStatEventTarget=function(){return ta()},BE=Hs.Event=is,av=Hs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kr.NO_ERROR=0,kr.TIMEOUT=8,kr.HTTP_ERROR=6,gp=Hs.ErrorCode=kr,ih.COMPLETE="complete",VE=Hs.EventType=ih,tg.EventType=hc,hc.OPEN="a",hc.CLOSE="b",hc.ERROR="c",hc.MESSAGE="d",Gn.prototype.listen=Gn.prototype.K,ld=Hs.WebChannel=tg,SG=Hs.FetchXmlHttpFactory=on,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,FE=Hs.XhrIo=Yt}).apply(typeof sv<"u"?sv:typeof self<"u"?self:typeof window<"u"?window:{});var QR="@firebase/firestore",JR="4.8.0";var Jn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");var Od="11.10.0";var ml=new Uo("@firebase/firestore");function ud(){return ml.logLevel}function ve(n,...e){if(ml.logLevel<=at.DEBUG){let t=e.map(AM);ml.debug(`Firestore (${Od}): ${n}`,...t)}}function $s(n,...e){if(ml.logLevel<=at.ERROR){let t=e.map(AM);ml.error(`Firestore (${Od}): ${n}`,...t)}}function Qa(n,...e){if(ml.logLevel<=at.WARN){let t=e.map(AM);ml.warn(`Firestore (${Od}): ${n}`,...t)}}function AM(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Fe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,$N(n,i,t)}function $N(n,e,t){let i=`FIRESTORE (${Od}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw $s(i),new Error(i)}function At(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||$N(e,r,i)}function We(n,e){return n}var ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},de=class extends ai{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wo=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var pv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jn.UNAUTHENTICATED))}shutdown(){}},WE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},KE=class{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){At(this.o===void 0,42304);let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),o=new Wo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wo,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>S(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},l=u=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?l(u):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wo)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(At(typeof i.accessToken=="string",31837,{l:i}),new pv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return At(e===null||typeof e=="string",2055,{h:e}),new Jn(e)}},ZE=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},YE=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new ZE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},gv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},QE=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){At(this.o===void 0,3512);let i=o=>{o.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,ve("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?r(o):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new gv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function TG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function GN(){return new TextEncoder}var xp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=TG(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}};function nt(n,e){return n<e?-1:n>e?1:0}function JE(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return nt(i,r);{let o=GN(),a=OG(o.encode(XR(n,t)),o.encode(XR(e,t)));return a!==0?a:nt(i,r)}}t+=i>65535?2:1}return nt(n.length,e.length)}function XR(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function OG(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return nt(n[t],e[t]);return nt(n.length,e.length)}function vd(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var eN="__name__",mv=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Fe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Fe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=n.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return nt(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):JE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return js.fromString(e.substring(4,e.length-2))}},tn=class n extends mv{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},DG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dr=class n extends mv{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return DG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eN}static keyField(){return new n([eN])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},a=!1;for(;r<e.length;){let l=e[r];if(l==="\\"){if(r+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(o(),r++)}if(o(),a)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Oe=class n{constructor(e){this.path=e}static fromPath(e){return new n(tn.fromString(e))}static fromName(e){return new n(tn.fromString(e).popFirst(5))}static empty(){return new n(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new tn(e.slice()))}};function qN(n,e,t){if(!t)throw new de(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AG(n,e,t,i){if(e===!0&&i===!0)throw new de(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tN(n){if(!Oe.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nN(n){if(Oe.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Qv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Fe(12329,{type:typeof n})}function Ko(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Qv(n);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kG(n,e){if(e<=0)throw new de(ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Ln(n,e){let t={typeString:n};return e&&(t.value=e),t}function Ap(n,e){if(!WN(n))throw new de(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let a=n[i];if(r&&typeof a!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new de(ee.INVALID_ARGUMENT,t);return!0}var iN=-62135596800,rN=1e6,Fn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*rN);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<iN)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rN}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ap(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-iN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Fn._jsonSchemaVersion="firestore/timestamp/1.0",Fn._jsonSchema={type:Ln("string",Fn._jsonSchemaVersion),seconds:Ln("number"),nanoseconds:Ln("number")};var Ye=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Fn(0,0))}static max(){return new n(new Fn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var wp=-1,XE=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};XE.UNKNOWN_ID=-1;function RG(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ye.fromTimestamp(i===1e9?new Fn(t+1,0):new Fn(t,i));return new _l(r,Oe.empty(),e)}function NG(n){return new _l(n.readTime,n.key,wp)}var _l=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Ye.min(),Oe.empty(),wp)}static max(){return new n(Ye.max(),Oe.empty(),wp)}};function LG(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:nt(n.largestBatchId,e.largestBatchId))}var FG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",eI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Dd(n){return S(this,null,function*(){if(n.code!==ee.FAILED_PRECONDITION||n.message!==FG)throw n;ve("LocalStore","Unexpectedly lost primary lease")})}var se=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++o,a&&o===r&&t()},u=>i(u))}),a=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,a=new Array(o),l=0;for(let u=0;u<o;u++){let f=u;t(e[f]).next(g=>{a[f]=g,++l,l===o&&i(a)},g=>r(g))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};function VG(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ad(n){return n.name==="IndexedDbTransactionError"}var kM=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this._e(r),this.ae=r=>i.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),RM=-1;function Jv(n){return n==null}function Cp(n){return n===0&&1/n==-1/0}function BG(n){return typeof n=="number"&&Number.isInteger(n)&&!Cp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var KN="";function UG(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oN(e)),e=zG(n.get(t),e);return oN(e)}function zG(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":t+="";break;case KN:t+="";break;default:t+=o}}return t}function oN(n){return n+KN+""}var jG="remoteDocuments",ZN="owner";var YN="mutationQueues";var QN="mutations";var JN="documentMutations",HG="remoteDocumentsV14";var XN="remoteDocumentGlobal";var eL="targets";var tL="targetDocuments";var nL="targetGlobal",iL="collectionParents";var rL="clientMetadata";var oL="bundles";var sL="namedQueries";var $G="indexConfiguration";var GG="indexState";var qG="indexEntries";var aL="documentOverlays";var WG="globals";var KG=[YN,QN,JN,jG,eL,ZN,nL,tL,rL,XN,iL,oL,sL],ave=[...KG,aL],ZG=[YN,QN,JN,HG,eL,ZN,nL,tL,rL,XN,iL,oL,sL,aL],YG=ZG,QG=[...YG,$G,GG,qG];var cve=[...QG,WG];function sN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var pn=class n{constructor(e,t){this.comparator=e,this.root=t||Zo.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zo.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pd(this.root,e,this.comparator,!0)}},pd=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zo=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}};Zo.EMPTY=null,Zo.RED=!0,Zo.BLACK=!1;Zo.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new Zo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xn=class n{constructor(e){this.comparator=e,this.data=new pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _v(this.data.getIterator())}getIteratorFrom(e){return new _v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_v=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Tr=class n{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new n([])}unionWith(e){let t=new Xn(dr.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vd(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var vv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var vi=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new vv("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};vi.EMPTY_BYTE_STRING=new vi("");var JG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gs(n){if(At(!!n,39018),typeof n=="string"){let e=0,t=JG.exec(n);if(At(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:en(n.seconds),nanos:en(n.nanos)}}function en(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qs(n){return typeof n=="string"?vi.fromBase64String(n):vi.fromUint8Array(n)}var lL="server_timestamp",uL="__type__",dL="__previous_value__",hL="__local_write_time__";function NM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[uL])===null||t===void 0?void 0:t.stringValue)===lL}function Xv(n){let e=n.mapValue.fields[dL];return NM(e)?Xv(e):e}function Ep(n){let e=Gs(n.mapValue.fields[hL].timestampValue);return new Fn(e.seconds,e.nanos)}var tI=class{constructor(e,t,i,r,o,a,l,u,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=g}},yv="(default)",bv=class n{constructor(e,t){this.projectId=e,this.database=t||yv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===yv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var LM="__type__",fL="__max__",cv={mapValue:{fields:{__type__:{stringValue:fL}}}},FM="__vector__",yd="value";function Ja(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?NM(n)?4:gL(n)?9007199254740991:pL(n)?10:11:Fe(28295,{value:n})}function Jo(n,e){if(n===e)return!0;let t=Ja(n);if(t!==Ja(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ep(n).isEqual(Ep(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=Gs(r.timestampValue),l=Gs(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return qs(r.bytesValue).isEqual(qs(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return en(r.geoPointValue.latitude)===en(o.geoPointValue.latitude)&&en(r.geoPointValue.longitude)===en(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return en(r.integerValue)===en(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=en(r.doubleValue),l=en(o.doubleValue);return a===l?Cp(a)===Cp(l):isNaN(a)&&isNaN(l)}return!1})(n,e);case 9:return vd(n.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:case 11:return(function(r,o){let a=r.mapValue.fields||{},l=o.mapValue.fields||{};if(sN(a)!==sN(l))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Jo(a[u],l[u])))return!1;return!0})(n,e);default:return Fe(52216,{left:n})}}function Ip(n,e){return(n.values||[]).find(t=>Jo(t,e))!==void 0}function bd(n,e){if(n===e)return 0;let t=Ja(n),i=Ja(e);if(t!==i)return nt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return nt(n.booleanValue,e.booleanValue);case 2:return(function(o,a){let l=en(o.integerValue||o.doubleValue),u=en(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(n,e);case 3:return aN(n.timestampValue,e.timestampValue);case 4:return aN(Ep(n),Ep(e));case 5:return JE(n.stringValue,e.stringValue);case 6:return(function(o,a){let l=qs(o),u=qs(a);return l.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,a){let l=o.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){let g=nt(l[f],u[f]);if(g!==0)return g}return nt(l.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,a){let l=nt(en(o.latitude),en(a.latitude));return l!==0?l:nt(en(o.longitude),en(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return cN(n.arrayValue,e.arrayValue);case 10:return(function(o,a){var l,u,f,g;let b=o.fields||{},E=a.fields||{},I=(l=b[yd])===null||l===void 0?void 0:l.arrayValue,R=(u=E[yd])===null||u===void 0?void 0:u.arrayValue,W=nt(((f=I?.values)===null||f===void 0?void 0:f.length)||0,((g=R?.values)===null||g===void 0?void 0:g.length)||0);return W!==0?W:cN(I,R)})(n.mapValue,e.mapValue);case 11:return(function(o,a){if(o===cv.mapValue&&a===cv.mapValue)return 0;if(o===cv.mapValue)return 1;if(a===cv.mapValue)return-1;let l=o.fields||{},u=Object.keys(l),f=a.fields||{},g=Object.keys(f);u.sort(),g.sort();for(let b=0;b<u.length&&b<g.length;++b){let E=JE(u[b],g[b]);if(E!==0)return E;let I=bd(l[u[b]],f[g[b]]);if(I!==0)return I}return nt(u.length,g.length)})(n.mapValue,e.mapValue);default:throw Fe(23264,{le:t})}}function aN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return nt(n,e);let t=Gs(n),i=Gs(e),r=nt(t.seconds,i.seconds);return r!==0?r:nt(t.nanos,i.nanos)}function cN(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let o=bd(t[r],i[r]);if(o)return o}return nt(t.length,i.length)}function xd(n){return nI(n)}function nI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=Gs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return qs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Oe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=nI(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${nI(t.fields[a])}`;return r+"}"})(n.mapValue):Fe(61005,{value:n})}function dv(n){switch(Ja(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Xv(n);return e?16+dv(e):16;case 5:return 2*n.stringValue.length;case 6:return qs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,o)=>r+dv(o),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return rc(i.fields,(o,a)=>{r+=o.length+dv(a)}),r})(n.mapValue);default:throw Fe(13486,{value:n})}}function lN(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iI(n){return!!n&&"integerValue"in n}function VM(n){return!!n&&"arrayValue"in n}function uN(n){return!!n&&"nullValue"in n}function dN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hv(n){return!!n&&"mapValue"in n}function pL(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[LM])===null||t===void 0?void 0:t.stringValue)===FM}function _p(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return rc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=_p(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_p(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fL}var uve={mapValue:{fields:{[LM]:{stringValue:FM},[yd]:{arrayValue:{}}}}};var ur=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!hv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_p(t)}setAll(e){let t=dr.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){let u=this.getFieldsMap(t);this.applyChanges(u,i,r),i={},r=[],t=l.popLast()}a?i[l.lastSegment()]=_p(a):r.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());hv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];hv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){rc(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(_p(this.value))}};function mL(n){let e=[];return rc(n.fields,(t,i)=>{let r=new dr([t]);if(hv(i)){let o=mL(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new Tr(e)}var so=class n{constructor(e,t,i,r,o,a,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new n(e,0,Ye.min(),Ye.min(),Ye.min(),ur.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Ye.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Ye.min(),Ye.min(),ur.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ye.min(),Ye.min(),ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wd=class{constructor(e,t){this.position=e,this.inclusive=t}};function hN(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],a=n.position[r];if(o.field.isKeyField()?i=Oe.comparator(Oe.fromName(a.referenceValue),t.key):i=bd(a,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function fN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jo(n.position[t],e.position[t]))return!1;return!0}var vl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function XG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var xv=class{},Nn=class n extends xv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new oI(e,t,i):t==="array-contains"?new cI(e,i):t==="in"?new lI(e,i):t==="not-in"?new uI(e,i):t==="array-contains-any"?new dI(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new sI(e,i):new aI(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bd(t,this.value)):t!==null&&Ja(this.value)===Ja(t)&&this.matchesComparison(bd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ao=class n extends xv{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return _L(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function _L(n){return n.op==="and"}function vL(n){return eq(n)&&_L(n)}function eq(n){for(let e of n.filters)if(e instanceof ao)return!1;return!0}function rI(n){if(n instanceof Nn)return n.field.canonicalString()+n.op.toString()+xd(n.value);if(vL(n))return n.filters.map(e=>rI(e)).join(",");{let e=n.filters.map(t=>rI(t)).join(",");return`${n.op}(${e})`}}function yL(n,e){return n instanceof Nn?(function(i,r){return r instanceof Nn&&i.op===r.op&&i.field.isEqual(r.field)&&Jo(i.value,r.value)})(n,e):n instanceof ao?(function(i,r){return r instanceof ao&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,l)=>o&&yL(a,r.filters[l]),!0):!1})(n,e):void Fe(19439)}function bL(n){return n instanceof Nn?(function(t){return`${t.field.canonicalString()} ${t.op} ${xd(t.value)}`})(n):n instanceof ao?(function(t){return t.op.toString()+" {"+t.getFilters().map(bL).join(" ,")+"}"})(n):"Filter"}var oI=class extends Nn{constructor(e,t,i){super(e,t,i),this.key=Oe.fromName(i.referenceValue)}matches(e){let t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}},sI=class extends Nn{constructor(e,t){super(e,"in",t),this.keys=xL("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},aI=class extends Nn{constructor(e,t){super(e,"not-in",t),this.keys=xL("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function xL(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Oe.fromName(i.referenceValue))}var cI=class extends Nn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return VM(t)&&Ip(t.arrayValue,this.value)}},lI=class extends Nn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ip(this.value.arrayValue,t)}},uI=class extends Nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ip(this.value.arrayValue,t)}},dI=class extends Nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!VM(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ip(this.value.arrayValue,i))}};var hI=class{constructor(e,t=null,i=[],r=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=l,this.Pe=null}};function pN(n,e=null,t=[],i=[],r=null,o=null,a=null){return new hI(n,e,t,i,r,o,a)}function BM(n){let e=We(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>rI(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(o){return o.field.canonicalString()+o.dir})(i)).join(","),Jv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>xd(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>xd(i)).join(",")),e.Pe=t}return e.Pe}function UM(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!XG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fN(n.startAt,e.startAt)&&fN(n.endAt,e.endAt)}function fI(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Xa=class{constructor(e,t=null,i=[],r=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function tq(n,e,t,i,r,o,a,l){return new Xa(n,e,t,i,r,o,a,l)}function ey(n){return new Xa(n)}function gN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wL(n){return n.collectionGroup!==null}function vp(n){let e=We(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Xn(dr.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new vl(o,i))}),t.has(dr.keyField().canonicalString())||e.Te.push(new vl(dr.keyField(),i))}return e.Te}function Yo(n){let e=We(n);return e.Ie||(e.Ie=nq(e,vp(n))),e.Ie}function nq(n,e){if(n.limitType==="F")return pN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new vl(r.field,o)});let t=n.endAt?new wd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new wd(n.startAt.position,n.startAt.inclusive):null;return pN(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function pI(n,e){let t=n.filters.concat([e]);return new Xa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function wv(n,e,t){return new Xa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ty(n,e){return UM(Yo(n),Yo(e))&&n.limitType===e.limitType}function CL(n){return`${BM(Yo(n))}|lt:${n.limitType}`}function dd(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>bL(r)).join(", ")}]`),Jv(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>xd(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>xd(r)).join(",")),`Target(${i})`})(Yo(n))}; limitType=${n.limitType})`}function ny(n,e){return e.isFoundDocument()&&(function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(let o of vp(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(a,l,u){let f=hN(a,l,u);return a.inclusive?f<=0:f<0})(i.startAt,vp(i),r)||i.endAt&&!(function(a,l,u){let f=hN(a,l,u);return a.inclusive?f>=0:f>0})(i.endAt,vp(i),r))})(n,e)}function iq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EL(n){return(e,t)=>{let i=!1;for(let r of vp(n)){let o=rq(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function rq(n,e,t){let i=n.field.isKeyField()?Oe.comparator(e.key,t.key):(function(o,a,l){let u=a.data.field(o),f=l.data.field(o);return u!==null&&f!==null?bd(u,f):Fe(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Fe(19790,{direction:n.dir})}}var Ws=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){rc(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return cL(this.inner)}size(){return this.innerSize}};var oq=new pn(Oe.comparator);function Ks(){return oq}var IL=new pn(Oe.comparator);function mp(...n){let e=IL;for(let t of n)e=e.insert(t.key,t);return e}function ML(n){let e=IL;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function hl(){return yp()}function PL(){return yp()}function yp(){return new Ws(n=>n.toString(),(n,e)=>n.isEqual(e))}var sq=new pn(Oe.comparator),aq=new Xn(Oe.comparator);function ft(...n){let e=aq;for(let t of n)e=e.add(t);return e}var cq=new Xn(nt);function lq(){return cq}function zM(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cp(e)?"-0":e}}function SL(n){return{integerValue:""+n}}function uq(n,e){return BG(e)?SL(e):zM(n,e)}var Cd=class{constructor(){this._=void 0}};function dq(n,e,t){return n instanceof yl?(function(r,o){let a={fields:{[uL]:{stringValue:lL},[hL]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&NM(o)&&(o=Xv(o)),o&&(a.fields[dL]=o),{mapValue:a}})(t,e):n instanceof bl?OL(n,e):n instanceof xl?DL(n,e):(function(r,o){let a=TL(r,o),l=mN(a)+mN(r.Ee);return iI(a)&&iI(r.Ee)?SL(l):zM(r.serializer,l)})(n,e)}function hq(n,e,t){return n instanceof bl?OL(n,e):n instanceof xl?DL(n,e):t}function TL(n,e){return n instanceof Ed?(function(i){return iI(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}var yl=class extends Cd{},bl=class extends Cd{constructor(e){super(),this.elements=e}};function OL(n,e){let t=AL(e);for(let i of n.elements)t.some(r=>Jo(r,i))||t.push(i);return{arrayValue:{values:t}}}var xl=class extends Cd{constructor(e){super(),this.elements=e}};function DL(n,e){let t=AL(e);for(let i of n.elements)t=t.filter(r=>!Jo(r,i));return{arrayValue:{values:t}}}var Ed=class extends Cd{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function mN(n){return en(n.integerValue||n.doubleValue)}function AL(n){return VM(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var gI=class{constructor(e,t){this.field=e,this.transform=t}};function fq(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof bl&&r instanceof bl||i instanceof xl&&r instanceof xl?vd(i.elements,r.elements,Jo):i instanceof Ed&&r instanceof Ed?Jo(i.Ee,r.Ee):i instanceof yl&&r instanceof yl})(n.transform,e.transform)}var mI=class{constructor(e,t){this.version=e,this.transformResults=t}},qa=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Id=class{};function kL(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cv(n.key,qa.none()):new wl(n.key,n.data,qa.none());{let t=n.data,i=ur.empty(),r=new Xn(dr.comparator);for(let o of e.fields)if(!r.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Xo(n.key,i,new Tr(r.toArray()),qa.none())}}function pq(n,e,t){n instanceof wl?(function(r,o,a){let l=r.value.clone(),u=vN(r.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):n instanceof Xo?(function(r,o,a){if(!fv(r.precondition,o))return void o.convertToUnknownDocument(a.version);let l=vN(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(RL(r)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):(function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function bp(n,e,t,i){return n instanceof wl?(function(o,a,l,u){if(!fv(o.precondition,a))return l;let f=o.value.clone(),g=yN(o.fieldTransforms,u,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof Xo?(function(o,a,l,u){if(!fv(o.precondition,a))return l;let f=yN(o.fieldTransforms,u,a),g=a.data;return g.setAll(RL(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))})(n,e,t,i):(function(o,a,l){return fv(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(n,e,t)}function gq(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),o=TL(i.transform,r||null);o!=null&&(t===null&&(t=ur.empty()),t.set(i.field,o))}return t||null}function _N(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&vd(i,r,(o,a)=>fq(o,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var wl=class extends Id{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Xo=class extends Id{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function RL(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function vN(n,e,t){let i=new Map;At(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let r=0;r<t.length;r++){let o=n[r],a=o.transform,l=e.data.field(o.field);i.set(o.field,hq(a,l,t[r]))}return i}function yN(n,e,t){let i=new Map;for(let r of n){let o=r.transform,a=t.data.field(r.field);i.set(r.field,dq(o,a,e))}return i}var Cv=class extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},_I=class extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var vI=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&pq(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=bp(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=bp(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=PL();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,l=this.applyToLocalView(a,o.mutatedFields);l=t.has(r.key)?null:l;let u=kL(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Ye.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ft())}isEqual(e){return this.batchId===e.batchId&&vd(this.mutations,e.mutations,(t,i)=>_N(t,i))&&vd(this.baseMutations,e.baseMutations,(t,i)=>_N(t,i))}},yI=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){At(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return sq})(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new n(e,t,i,r)}};var bI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var kn,yt;function mq(n){switch(n){case ee.OK:return Fe(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Fe(15467,{code:n})}}function NL(n){if(n===void 0)return $s("GRPC error has no .code"),ee.UNKNOWN;switch(n){case kn.OK:return ee.OK;case kn.CANCELLED:return ee.CANCELLED;case kn.UNKNOWN:return ee.UNKNOWN;case kn.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case kn.INTERNAL:return ee.INTERNAL;case kn.UNAVAILABLE:return ee.UNAVAILABLE;case kn.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case kn.NOT_FOUND:return ee.NOT_FOUND;case kn.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case kn.ABORTED:return ee.ABORTED;case kn.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case kn.DATA_LOSS:return ee.DATA_LOSS;default:return Fe(39323,{code:n})}}(yt=kn||(kn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";var bN=null;var _q=new js([4294967295,4294967295],0);function xN(n){let e=GN().encode(n),t=new LE;return t.update(e),new Uint8Array(t.digest())}function wN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new js([t,i],0),new js([r,o],0)]}var wI=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new fl(`Invalid padding: ${t}`);if(i<0)throw new fl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new fl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new fl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=js.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply(js.fromNumber(i)));return r.compare(_q)===1&&(r=new js([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=xN(e),[i,r]=wN(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(i,r,o);if(!this.ye(a))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,r,t);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;let t=xN(e),[i,r]=wN(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(i,r,o);this.we(a)}}we(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},fl=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ev=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Mp.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Ye.min(),r,new pn(nt),Ks(),ft())}},Mp=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,ft(),ft(),ft())}};var gd=class{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}},Iv=class{constructor(e,t){this.targetId=e,this.De=t}},Mv=class{constructor(e,t,i=vi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Pv=class{constructor(){this.ve=0,this.Ce=CN(),this.Fe=vi.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ft(),t=ft(),i=ft();return this.Ce.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Fe(38017,{changeType:o})}}),new Mp(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=CN()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,At(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},CI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ks(),this.je=lv(),this.Je=lv(),this.He=new pn(nt)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Fe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,r)=>{this.nt(r)&&t(r)})}it(e){let t=e.targetId,i=e.De.count,r=this.st(t);if(r){let o=r.target;if(fI(o))if(i===0){let a=new Oe(o.path);this.Xe(t,a,so.newNoDocument(a,Ye.min()))}else At(i===1,20013,{expectedCount:i});else{let a=this.ot(t);if(a!==i){let l=this._t(e),u=l?this.ut(l,e,a):1;if(u!==0){this.rt(t);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,f)}bN?.ct((function(g,b,E,I,R){var W,q,ie,ge,we,Re;let jt={localCacheCount:g,existenceFilterCount:b.count,databaseId:E.database,projectId:E.projectId},ct=b.unchangedNames;return ct&&(jt.bloomFilter={applied:R===0,hashCount:(W=ct?.hashCount)!==null&&W!==void 0?W:0,bitmapLength:(ge=(ie=(q=ct?.bits)===null||q===void 0?void 0:q.bitmap)===null||ie===void 0?void 0:ie.length)!==null&&ge!==void 0?ge:0,padding:(Re=(we=ct?.bits)===null||we===void 0?void 0:we.padding)!==null&&Re!==void 0?Re:0,mightContain:V=>{var O;return(O=I?.mightContain(V))!==null&&O!==void 0&&O}}),jt})(a,e.De,this.We.lt(),l,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,a,l;try{a=qs(i).toUint8Array()}catch(u){if(u instanceof vv)return Qa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new wI(a,r,o)}catch(u){return Qa(u instanceof fl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){let i=this.We.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Xe(t,o,null),r++)}),r}Pt(e){let t=new Map;this.Ge.forEach((o,a)=>{let l=this.st(a);if(l){if(o.current&&fI(l.target)){let u=new Oe(l.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,so.newNoDocument(u,e))}o.Ne&&(t.set(a,o.Le()),o.ke())}});let i=ft();this.Je.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{let f=this.st(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.ze.forEach((o,a)=>a.setReadTime(e));let r=new Ev(e,t,this.He,this.ze,i);return this.ze=Ks(),this.je=lv(),this.Je=lv(),this.He=new pn(nt),r}Ze(e,t){if(!this.nt(e))return;let i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Pv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Xn(nt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Xn(nt),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Pv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function lv(){return new pn(Oe.comparator)}function CN(){return new pn(Oe.comparator)}var vq={asc:"ASCENDING",desc:"DESCENDING"},yq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bq={and:"AND",or:"OR"},EI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function II(n,e){return n.useProto3Json||Jv(e)?e:{value:e}}function Sv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xq(n,e){return Sv(n,e.toTimestamp())}function Qo(n){return At(!!n,49232),Ye.fromTimestamp((function(t){let i=Gs(t);return new Fn(i.seconds,i.nanos)})(n))}function jM(n,e){return MI(n,e).canonicalString()}function MI(n,e){let t=(function(r){return new tn(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function FL(n){let e=tn.fromString(n);return At(jL(e),10190,{key:e.toString()}),e}function PI(n,e){return jM(n.databaseId,e.path)}function jE(n,e){let t=FL(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(BL(t))}function VL(n,e){return jM(n.databaseId,e)}function wq(n){let e=FL(n);return e.length===4?tn.emptyPath():BL(e)}function SI(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BL(n){return At(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function EN(n,e,t){return{name:PI(n,e),fields:t.value.mapValue.fields}}function Cq(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Fe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(At(g===void 0||typeof g=="string",58123),vi.fromBase64String(g||"")):(At(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),vi.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(f){let g=f.code===void 0?ee.UNKNOWN:NL(f.code);return new de(g,f.message||"")})(a);t=new Mv(i,r,o,l||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=jE(n,i.document.name),o=Qo(i.document.updateTime),a=i.document.createTime?Qo(i.document.createTime):Ye.min(),l=new ur({mapValue:{fields:i.document.fields}}),u=so.newFoundDocument(r,o,a,l),f=i.targetIds||[],g=i.removedTargetIds||[];t=new gd(f,g,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=jE(n,i.document),o=i.readTime?Qo(i.readTime):Ye.min(),a=so.newNoDocument(r,o),l=i.removedTargetIds||[];t=new gd([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=jE(n,i.document),o=i.removedTargetIds||[];t=new gd([],o,r,null)}else{if(!("filter"in e))return Fe(11601,{At:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new xI(r,o),l=i.targetId;t=new Iv(l,a)}}return t}function Eq(n,e){let t;if(e instanceof wl)t={update:EN(n,e.key,e.value)};else if(e instanceof Cv)t={delete:PI(n,e.key)};else if(e instanceof Xo)t={update:EN(n,e.key,e.data),updateMask:kq(e.fieldMask)};else{if(!(e instanceof _I))return Fe(16599,{Rt:e.type});t={verify:PI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>(function(o,a){let l=a.transform;if(l instanceof yl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ed)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw Fe(20930,{transform:a.transform})})(0,i))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:xq(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Fe(27497)})(n,e.precondition)),t}function Iq(n,e){return n&&n.length>0?(At(e!==void 0,14353),n.map(t=>(function(r,o){let a=r.updateTime?Qo(r.updateTime):Qo(o);return a.isEqual(Ye.min())&&(a=Qo(o)),new mI(a,r.transformResults||[])})(t,e))):[]}function Mq(n,e){return{documents:[VL(n,e.path)]}}function Pq(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=VL(n,r);let o=(function(f){if(f.length!==0)return zL(ao.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let a=(function(f){if(f.length!==0)return f.map(g=>(function(E){return{field:hd(E.field),direction:Oq(E.dir)}})(g))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let l=II(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:t,parent:r}}function Sq(n){let e=wq(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){At(i===1,65062);let g=t.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(b){let E=UL(b);return E instanceof ao&&vL(E)?E.getFilters():[E]})(t.where));let a=[];t.orderBy&&(a=(function(b){return b.map(E=>(function(R){return new vl(fd(R.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(E))})(t.orderBy));let l=null;t.limit&&(l=(function(b){let E;return E=typeof b=="object"?b.value:b,Jv(E)?null:E})(t.limit));let u=null;t.startAt&&(u=(function(b){let E=!!b.before,I=b.values||[];return new wd(I,E)})(t.startAt));let f=null;return t.endAt&&(f=(function(b){let E=!b.before,I=b.values||[];return new wd(I,E)})(t.endAt)),tq(e,r,a,o,l,"F",u,f)}function Tq(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function UL(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=fd(t.unaryFilter.field);return Nn.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=fd(t.unaryFilter.field);return Nn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=fd(t.unaryFilter.field);return Nn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=fd(t.unaryFilter.field);return Nn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Nn.create(fd(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ao.create(t.compositeFilter.filters.map(i=>UL(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(t.compositeFilter.op))})(n):Fe(30097,{filter:n})}function Oq(n){return vq[n]}function Dq(n){return yq[n]}function Aq(n){return bq[n]}function hd(n){return{fieldPath:n.canonicalString()}}function fd(n){return dr.fromServerFormat(n.fieldPath)}function zL(n){return n instanceof Nn?(function(t){if(t.op==="=="){if(dN(t.value))return{unaryFilter:{field:hd(t.field),op:"IS_NAN"}};if(uN(t.value))return{unaryFilter:{field:hd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dN(t.value))return{unaryFilter:{field:hd(t.field),op:"IS_NOT_NAN"}};if(uN(t.value))return{unaryFilter:{field:hd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hd(t.field),op:Dq(t.op),value:t.value}}})(n):n instanceof ao?(function(t){let i=t.getFilters().map(r=>zL(r));return i.length===1?i[0]:{compositeFilter:{op:Aq(t.op),filters:i}}})(n):Fe(54877,{filter:n})}function kq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Pp=class n{constructor(e,t,i,r,o=Ye.min(),a=Ye.min(),l=vi.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var TI=class{constructor(e){this.gt=e}};function Rq(n){let e=Sq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?wv(e,e.limit,"L"):e}var Tv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(en(e.integerValue));else if("doubleValue"in e){let i=en(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),Cp(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=Gs(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(qs(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?gL(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):pL(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Fe(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let r of Object.keys(i))this.xt(r,t),this.Dt(i[r],t)}Lt(e,t){var i,r;let o=e.fields||{};this.Ct(t,53);let a=yd,l=((r=(i=o[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Ct(t,15),t.Ft(en(l)),this.xt(a,t),this.Dt(o[a],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let r of i)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),Oe.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Tv.Ut=new Tv;var OI=class{constructor(){this.Dn=new DI}addToCollectionParentIndex(e,t){return this.Dn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(_l.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(_l.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}},DI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Xn(tn.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Xn(tn.comparator)).toArray()}};var dve=new Uint8Array(0);var IN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HL=41943040,Sr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(HL,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);var Sp=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var MN="LruGarbageCollector",Nq=1048576;function PN([n,e],[t,i]){let r=nt(n,t);return r===0?nt(e,i):r}var AI=class{constructor(e){this.Tr=e,this.buffer=new Xn(PN),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();PN(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},kI=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ve(MN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>S(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ad(t)?ve(MN,"Ignoring IndexedDB error during garbage collection: ",t):yield Dd(t)}yield this.Rr(3e5)}))}},RI=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return se.resolve(kM.ue);let i=new AI(t);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(IN)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IN):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,o,a,l,u,f,g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),r=this.params.maximumSequenceNumbersToCollect):r=b,a=Date.now(),this.nthSequenceNumber(e,r))).next(b=>(i=b,l=Date.now(),this.removeTargets(e,i,t))).next(b=>(o=b,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(b=>(f=Date.now(),ud()<=at.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${b} documents in `+(f-u)+`ms
Total Duration: ${f-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:b})))}};function Lq(n,e){return new RI(n,e)}var NI=class{constructor(){this.changes=new Ws(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,so.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var LI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var FI=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&bp(i.mutation,r,Tr.empty(),Fn.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ft()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ft()){let r=hl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let a=mp();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let i=hl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ft()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,i,r){let o=Ks(),a=yp(),l=(function(){return yp()})();return t.forEach((u,f)=>{let g=i.get(f.key);r.has(f.key)&&(g===void 0||g.mutation instanceof Xo)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),bp(g.mutation,f,g.mutation.getFieldMask(),Fn.now())):a.set(f.key,Tr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,g)=>a.set(f,g)),t.forEach((f,g)=>{var b;return l.set(f,new LI(g,(b=a.get(f))!==null&&b!==void 0?b:null))}),l))}recalculateAndSaveOverlays(e,t){let i=yp(),r=new pn((a,l)=>a-l),o=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let l of a)l.keys().forEach(u=>{let f=t.get(u);if(f===null)return;let g=i.get(u)||Tr.empty();g=l.applyToLocalView(f,g),i.set(u,g);let b=(r.get(l.batchId)||ft()).add(u);r=r.insert(l.batchId,b)})}).next(()=>{let a=[],l=r.getReverseIterator();for(;l.hasNext();){let u=l.getNext(),f=u.key,g=u.value,b=PL();g.forEach(E=>{if(!o.has(E)){let I=kL(t.get(E),i.get(E));I!==null&&b.set(E,I),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,b))}return se.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(a){return Oe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wL(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):se.resolve(hl()),l=wp,u=o;return a.next(f=>se.forEach(f,(g,b)=>(l<b.largestBatchId&&(l=b.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{u=u.insert(g,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,ft())).next(g=>({batchId:l,changes:ML(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(i=>{let r=mp();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,a=mp();return this.indexManager.getCollectionParents(e,o).next(l=>se.forEach(l,u=>{let f=(function(b,E){return new Xa(E,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(g=>{g.forEach((b,E)=>{a=a.insert(b,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(a=>{o.forEach((u,f)=>{let g=f.getKey();a.get(g)===null&&(a=a.insert(g,so.newInvalidDocument(g)))});let l=mp();return a.forEach((u,f)=>{let g=o.get(u);g!==void 0&&bp(g.mutation,f,Tr.empty(),Fn.now()),ny(t,f)&&(l=l.insert(u,f))}),l})}};var VI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return se.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Qo(r.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:Rq(r.bundledQuery),readTime:Qo(r.readTime)}})(t)),se.resolve()}};var BI=class{constructor(){this.overlays=new pn(Oe.comparator),this.kr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){let i=hl();return se.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.wt(e,t,o)}),se.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.kr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){let r=hl(),o=t.length+1,a=new Oe(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){let u=l.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return se.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new pn((f,g)=>f-g),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=hl(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}let l=hl(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,g)=>l.set(f,g)),!(l.size()>=r)););return se.resolve(l)}wt(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new bI(t,i));let o=this.kr.get(t);o===void 0&&(o=ft(),this.kr.set(t,o)),this.kr.set(t,o.add(i.key))}};var UI=class{constructor(){this.sessionToken=vi.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}};var Tp=class{constructor(){this.qr=new Xn(Rn.Qr),this.$r=new Xn(Rn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let i=new Rn(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new Rn(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){let t=new Oe(new tn([])),i=new Rn(t,e),r=new Rn(t,e+1),o=[];return this.$r.forEachInRange([i,r],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Oe(new tn([])),i=new Rn(t,e),r=new Rn(t,e+1),o=ft();return this.$r.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new Rn(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Rn=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Oe.comparator(e.key,t.key)||nt(e.Hr,t.Hr)}static Ur(e,t){return nt(e.Hr,t.Hr)||Oe.comparator(e.key,t.key)}};var zI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Xn(Rn.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new vI(o,t,i,r);this.mutationQueue.push(a);for(let l of r)this.Yr=this.Yr.add(new Rn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return se.resolve(a)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Xr(i),o=r<0?0:r;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?RM:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Rn(t,0),r=new Rn(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],a=>{let l=this.Zr(a.Hr);o.push(l)}),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xn(nt);return t.forEach(r=>{let o=new Rn(r,0),a=new Rn(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],l=>{i=i.add(l.Hr)})}),se.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;Oe.isDocumentKey(o)||(o=o.child(""));let a=new Rn(new Oe(o),0),l=new Xn(nt);return this.Yr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(l=l.add(u.Hr)),!0)},a),se.resolve(this.ei(l))}ei(e){let t=[];return e.forEach(i=>{let r=this.Zr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){At(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return se.forEach(t.mutations,r=>{let o=new Rn(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){let i=new Rn(t,0),r=this.Yr.firstAfterOrEqual(i);return se.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var jI=class{constructor(e){this.ni=e,this.docs=(function(){return new pn(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,a=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():so.newInvalidDocument(t))}getEntries(e,t){let i=Ks();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():so.newInvalidDocument(r))}),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Ks(),a=t.path,l=new Oe(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){let{key:f,value:{document:g}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||LG(NG(g),i)<=0||(r.has(g.key)||ny(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,i,r){Fe(9500)}ri(e,t){return se.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new HI(this)}getSize(e){return se.resolve(this.size)}},HI=class extends NI{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),se.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var $I=class{constructor(e){this.persistence=e,this.ii=new Ws(t=>BM(t),UM),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.si=0,this.oi=new Tp,this.targetCount=0,this._i=Sp.ar()}forEachTarget(e,t){return this.ii.forEach((i,r)=>t(r)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),se.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Sp(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.hr(t),se.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),se.waitFor(o).next(()=>r)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){let i=this.ii.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),se.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),se.resolve()}getMatchingKeysForTargetId(e,t){let i=this.oi.Jr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.oi.containsKey(t))}};var Ov=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new kM(0),this.ci=!1,this.ci=!0,this.li=new UI,this.referenceDelegate=e(this),this.hi=new $I(this),this.indexManager=new OI,this.remoteDocumentCache=(function(r){return new jI(r)})(i=>this.referenceDelegate.Pi(i)),this.serializer=new TI(t),this.Ti=new VI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new zI(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);let r=new GI(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(e,t){return se.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}},GI=class extends eI{constructor(e){super(),this.currentSequenceNumber=e}},qI=class n{constructor(e){this.persistence=e,this.Ai=new Tp,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Fe(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(r=>this.mi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,i=>{let r=Oe.fromPath(i);return this.fi(e,r).next(o=>{o||t.removeEntry(r,Ye.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return se.or([()=>se.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Dv=class n{constructor(e,t){this.persistence=e,this.gi=new Ws(i=>UG(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=Lq(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return se.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(o=>o?se.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,a=>this.Sr(e,a,t).next(l=>{l||(i++,o.removeEntry(a,Ye.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dv(e.data.value)),t}Sr(e,t,i){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.gi.get(t);return se.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var WI=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=ft(),r=ft();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var KI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ZI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return dk()?8:VG(Qn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.ps(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,t,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new KI;return this.ws(e,t,a).next(l=>{if(o.result=l,this.Rs)return this.Ss(e,t,a,l.size)})}).next(()=>o.result)}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(ud()<=at.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",dd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(ud()<=at.DEBUG&&ve("QueryEngine","Query:",dd(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(ud()<=at.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",dd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yo(t))):se.resolve())}ps(e,t){if(gN(t))return se.resolve(null);let i=Yo(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=wv(t,null,"F"),i=Yo(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=ft(...o);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.bs(t,l);return this.Ds(t,f,a,u.readTime)?this.ps(e,wv(t,null,"F")):this.vs(e,f,t,u)}))})))}ys(e,t,i,r){return gN(t)||r.isEqual(Ye.min())?se.resolve(null):this.gs.getDocuments(e,i).next(o=>{let a=this.bs(t,o);return this.Ds(t,a,i,r)?se.resolve(null):(ud()<=at.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dd(t)),this.vs(e,a,t,RG(r,wp)).next(l=>l))})}bs(e,t){let i=new Xn(EL(e));return t.forEach((r,o)=>{ny(e,o)&&(i=i.add(o))}),i}Ds(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,t,i){return ud()<=at.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",dd(t)),this.gs.getDocumentsMatchingQuery(e,t,_l.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var HM="LocalStore",Fq=3e8,YI=class{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new pn(nt),this.Ms=new Ws(o=>BM(o),UM),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Vq(n,e,t,i){return new YI(n,e,t,i)}function $L(n,e){return S(this,null,function*(){let t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],l=[],u=ft();for(let f of r){a.push(f.batchId);for(let g of f.mutations)u=u.add(g.key)}for(let f of o){l.push(f.batchId);for(let g of f.mutations)u=u.add(g.key)}return t.localDocuments.getDocuments(i,u).next(f=>({Bs:f,removedBatchIds:a,addedBatchIds:l}))})})})}function Bq(n,e){let t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,g){let b=f.batch,E=b.keys(),I=se.resolve();return E.forEach(R=>{I=I.next(()=>g.getEntry(u,R)).next(W=>{let q=f.docVersions.get(R);At(q!==null,48541),W.version.compareTo(q)<0&&(b.applyToRemoteDocument(W,f),W.isValidDocument()&&(W.setReadTime(f.commitVersion),g.addEntry(W)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(u,b))})(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(l){let u=ft();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function GL(n){let e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Uq(n,e){let t=We(n),i=e.snapshotVersion,r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;let l=[];e.targetChanges.forEach((g,b)=>{let E=r.get(b);if(!E)return;l.push(t.hi.removeMatchingKeys(o,g.removedDocuments,b).next(()=>t.hi.addMatchingKeys(o,g.addedDocuments,b)));let I=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?I=I.withResumeToken(vi.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):g.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(g.resumeToken,i)),r=r.insert(b,I),(function(W,q,ie){return W.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=Fq?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(E,I,g)&&l.push(t.hi.updateTargetData(o,I))});let u=Ks(),f=ft();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),l.push(zq(o,a,e.documentUpdates).next(g=>{u=g.Ls,f=g.ks})),!i.isEqual(Ye.min())){let g=t.hi.getLastRemoteSnapshotVersion(o).next(b=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(g)}return se.waitFor(l).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(t.Fs=r,o))}function zq(n,e,t){let i=ft(),r=ft();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=Ks();return t.forEach((l,u)=>{let f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Ye.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):ve(HM,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{Ls:a,ks:r}})}function jq(n,e){let t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=RM),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Hq(n,e){let t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.hi.getTargetData(i,e).next(o=>o?(r=o,se.resolve(r)):t.hi.allocateTargetId(i).next(a=>(r=new Pp(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}function QI(n,e,t){return S(this,null,function*(){let i=We(n),r=i.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Ad(a))throw a;ve(HM,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)})}function SN(n,e,t){let i=We(n),r=Ye.min(),o=ft();return i.persistence.runTransaction("Execute query","readwrite",a=>(function(u,f,g){let b=We(u),E=b.Ms.get(g);return E!==void 0?se.resolve(b.Fs.get(E)):b.hi.getTargetData(f,g)})(i,a,Yo(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,t?r:Ye.min(),t?o:ft())).next(l=>($q(i,iq(e),l),{documents:l,qs:o})))}function $q(n,e,t){let i=n.xs.get(e)||Ye.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.xs.set(e,i)}var Av=class{constructor(){this.activeTargetIds=lq()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var JI=class{constructor(){this.Fo=new Av,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Av,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var XI=class{xo(e){}shutdown(){}};var TN="ConnectivityMonitor",kv=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ve(TN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ve(TN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var uv=null;function eM(){return uv===null?uv=(function(){return 268435456+Math.round(2147483648*Math.random())})():uv++,"0x"+uv.toString(16)}var HE="RestConnection",Gq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},tM=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===yv?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,o){let a=eM(),l=this.Go(e,t.toUriEncodedString());ve(HE,`Sending RPC '${e}' ${a}:`,l,i);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,r,o);let{host:f}=new URL(l),g=cr(f);return this.jo(e,l,u,i,g).then(b=>(ve(HE,`Received RPC '${e}' ${a}: `,b),b),b=>{throw Qa(HE,`RPC '${e}' ${a} failed with error: `,b,"url: ",l,"request:",i),b})}Jo(e,t,i,r,o,a){return this.Wo(e,t,i,r,o)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Od})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}Go(e,t){let i=Gq[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}};var nM=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var _i="WebChannelConnection",iM=class extends tM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,o){let a=eM();return new Promise((l,u)=>{let f=new FE;f.setWithCredentials(!0),f.listenOnce(VE.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case gp.NO_ERROR:let b=f.getResponseJson();ve(_i,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),l(b);break;case gp.TIMEOUT:ve(_i,`RPC '${e}' ${a} timed out`),u(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case gp.HTTP_ERROR:let E=f.getStatus();if(ve(_i,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);let R=I?.error;if(R&&R.status&&R.message){let W=(function(ie){let ge=ie.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ge)>=0?ge:ee.UNKNOWN})(R.status);u(new de(W,R.message))}else u(new de(ee.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new de(ee.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{c_:e,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{ve(_i,`RPC '${e}' ${a} completed.`)}});let g=JSON.stringify(r);ve(_i,`RPC '${e}' ${a} sending request:`,r),f.send(t,"POST",g,i,15)})}P_(e,t,i){let r=eM(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=zE(),l=UE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;let g=o.join("");ve(_i,`Creating RPC '${e}' stream ${r}: ${g}`,u);let b=a.createWebChannel(g,u);this.T_(b);let E=!1,I=!1,R=new nM({Ho:q=>{I?ve(_i,`Not sending because RPC '${e}' stream ${r} is closed:`,q):(E||(ve(_i,`Opening RPC '${e}' stream ${r} transport.`),b.open(),E=!0),ve(_i,`RPC '${e}' stream ${r} sending:`,q),b.send(q))},Yo:()=>b.close()}),W=(q,ie,ge)=>{q.listen(ie,we=>{try{ge(we)}catch(Re){setTimeout(()=>{throw Re},0)}})};return W(b,ld.EventType.OPEN,()=>{I||(ve(_i,`RPC '${e}' stream ${r} transport opened.`),R.s_())}),W(b,ld.EventType.CLOSE,()=>{I||(I=!0,ve(_i,`RPC '${e}' stream ${r} transport closed`),R.__(),this.I_(b))}),W(b,ld.EventType.ERROR,q=>{I||(I=!0,Qa(_i,`RPC '${e}' stream ${r} transport errored. Name:`,q.name,"Message:",q.message),R.__(new de(ee.UNAVAILABLE,"The operation could not be completed")))}),W(b,ld.EventType.MESSAGE,q=>{var ie;if(!I){let ge=q.data[0];At(!!ge,16349);let we=ge,Re=we?.error||((ie=we[0])===null||ie===void 0?void 0:ie.error);if(Re){ve(_i,`RPC '${e}' stream ${r} received error:`,Re);let jt=Re.status,ct=(function(D){let N=kn[D];if(N!==void 0)return NL(N)})(jt),V=Re.message;ct===void 0&&(ct=ee.INTERNAL,V="Unknown error status: "+jt+" with message "+Re.message),I=!0,R.__(new de(ct,V)),b.close()}else ve(_i,`RPC '${e}' stream ${r} received:`,ge),R.a_(ge)}}),W(l,BE.STAT_EVENT,q=>{q.stat===av.PROXY?ve(_i,`RPC '${e}' stream ${r} detected buffering proxy`):q.stat===av.NOPROXY&&ve(_i,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function $E(){return typeof document<"u"?document:null}function iy(n){return new EI(n,!0)}var Rv=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ON="PersistentStream",Nv=class{constructor(e,t,i,r,o,a,l,u){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Rv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return S(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return S(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return S(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?($s(t.toString()),$s("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===t&&this.W_(i,r)},i=>{e(()=>{let r=new de(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,t){let i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(()=>S(this,null,function*(){this.state=0,this.start()}))}G_(e){return ve(ON,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ve(ON,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rM=class extends Nv{constructor(e,t,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Cq(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Ye.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?Ye.min():a.readTime?Qo(a.readTime):Ye.min()})(e);return this.listener.J_(t,i)}H_(e){let t={};t.database=SI(this.serializer),t.addTarget=(function(o,a){let l,u=a.target;if(l=fI(u)?{documents:Mq(o,u)}:{query:Pq(o,u).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=LL(o,a.resumeToken);let f=II(o,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(Ye.min())>0){l.readTime=Sv(o,a.snapshotVersion.toTimestamp());let f=II(o,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);let i=Tq(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){let t={};t.database=SI(this.serializer),t.removeTarget=e,this.k_(t)}},oM=class extends Nv{constructor(e,t,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,a),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return At(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,At(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){At(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=Iq(e.writeResults,e.commitTime),i=Qo(e.commitTime);return this.listener.ta(i,t)}na(){let e={};e.database=SI(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>Eq(this.serializer,i))};this.k_(t)}};var sM=class{},aM=class extends sM{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,MI(t,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(ee.UNKNOWN,o.toString())})}Jo(e,t,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,MI(t,i),r,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(ee.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},cM=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?($s(t),this._a=!1):ve("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Cl="RemoteStore",lM=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{i.enqueueAndForget(()=>S(this,null,function*(){El(this)&&(ve(Cl,"Restarting streams for network reachability change."),yield(function(u){return S(this,null,function*(){let f=We(u);f.Ia.add(4),yield kp(f),f.Aa.set("Unknown"),f.Ia.delete(4),yield ry(f)})})(this))}))}),this.Aa=new cM(i,r)}};function ry(n){return S(this,null,function*(){if(El(n))for(let e of n.da)yield e(!0)})}function kp(n){return S(this,null,function*(){for(let e of n.da)yield e(!1)})}function qL(n,e){let t=We(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),WM(t)?qM(t):kd(t).x_()&&GM(t,e))}function $M(n,e){let t=We(n),i=kd(t);t.Ta.delete(e),i.x_()&&WL(t,e),t.Ta.size===0&&(i.x_()?i.B_():El(t)&&t.Aa.set("Unknown"))}function GM(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}kd(n).H_(e)}function WL(n,e){n.Ra.$e(e),kd(n).Y_(e)}function qM(n){n.Ra=new CI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),kd(n).start(),n.Aa.aa()}function WM(n){return El(n)&&!kd(n).M_()&&n.Ta.size>0}function El(n){return We(n).Ia.size===0}function KL(n){n.Ra=void 0}function qq(n){return S(this,null,function*(){n.Aa.set("Online")})}function Wq(n){return S(this,null,function*(){n.Ta.forEach((e,t)=>{GM(n,e)})})}function Kq(n,e){return S(this,null,function*(){KL(n),WM(n)?(n.Aa.la(e),qM(n)):n.Aa.set("Unknown")})}function Zq(n,e,t){return S(this,null,function*(){if(n.Aa.set("Online"),e instanceof Mv&&e.state===2&&e.cause)try{yield(function(r,o){return S(this,null,function*(){let a=o.cause;for(let l of o.targetIds)r.Ta.has(l)&&(yield r.remoteSyncer.rejectListen(l,a),r.Ta.delete(l),r.Ra.removeTarget(l))})})(n,e)}catch(i){ve(Cl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Lv(n,i)}else if(e instanceof gd?n.Ra.Ye(e):e instanceof Iv?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ye.min()))try{let i=yield GL(n.localStore);t.compareTo(i)>=0&&(yield(function(o,a){let l=o.Ra.Pt(a);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let g=o.Ta.get(f);g&&o.Ta.set(f,g.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,f)=>{let g=o.Ta.get(u);if(!g)return;o.Ta.set(u,g.withResumeToken(vi.EMPTY_BYTE_STRING,g.snapshotVersion)),WL(o,u);let b=new Pp(g.target,u,f,g.sequenceNumber);GM(o,b)}),o.remoteSyncer.applyRemoteEvent(l)})(n,t))}catch(i){ve(Cl,"Failed to raise snapshot:",i),yield Lv(n,i)}})}function Lv(n,e,t){return S(this,null,function*(){if(!Ad(e))throw e;n.Ia.add(1),yield kp(n),n.Aa.set("Offline"),t||(t=()=>GL(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(null,null,function*(){ve(Cl,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield ry(n)}))})}function ZL(n,e){return e().catch(t=>Lv(n,t,e))}function oy(n){return S(this,null,function*(){let e=We(n),t=ec(e),i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:RM;for(;Yq(e);)try{let r=yield jq(e.localStore,i);if(r===null){e.Pa.length===0&&t.B_();break}i=r.batchId,Qq(e,r)}catch(r){yield Lv(e,r)}YL(e)&&QL(e)})}function Yq(n){return El(n)&&n.Pa.length<10}function Qq(n,e){n.Pa.push(e);let t=ec(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function YL(n){return El(n)&&!ec(n).M_()&&n.Pa.length>0}function QL(n){ec(n).start()}function Jq(n){return S(this,null,function*(){ec(n).na()})}function Xq(n){return S(this,null,function*(){let e=ec(n);for(let t of n.Pa)e.X_(t.mutations)})}function eW(n,e,t){return S(this,null,function*(){let i=n.Pa.shift(),r=yI.from(i,e,t);yield ZL(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield oy(n)})}function tW(n,e){return S(this,null,function*(){e&&ec(n).Z_&&(yield(function(i,r){return S(this,null,function*(){if((function(a){return mq(a)&&a!==ee.ABORTED})(r.code)){let o=i.Pa.shift();ec(i).N_(),yield ZL(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield oy(i)}})})(n,e)),YL(n)&&QL(n)})}function DN(n,e){return S(this,null,function*(){let t=We(n);t.asyncQueue.verifyOperationInProgress(),ve(Cl,"RemoteStore received new credentials");let i=El(t);t.Ia.add(3),yield kp(t),i&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield ry(t)})}function nW(n,e){return S(this,null,function*(){let t=We(n);e?(t.Ia.delete(2),yield ry(t)):e||(t.Ia.add(2),yield kp(t),t.Aa.set("Unknown"))})}function kd(n){return n.Va||(n.Va=(function(t,i,r){let o=We(t);return o.ia(),new rM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:qq.bind(null,n),e_:Wq.bind(null,n),n_:Kq.bind(null,n),J_:Zq.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.Va.N_(),WM(n)?qM(n):n.Aa.set("Unknown")):(yield n.Va.stop(),KL(n))}))),n.Va}function ec(n){return n.ma||(n.ma=(function(t,i,r){let o=We(t);return o.ia(),new oM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Jq.bind(null,n),n_:tW.bind(null,n),ea:Xq.bind(null,n),ta:eW.bind(null,n)}),n.da.push(e=>S(null,null,function*(){e?(n.ma.N_(),yield oy(n)):(yield n.ma.stop(),n.Pa.length>0&&(ve(Cl,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var uM=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Wo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let a=Date.now()+i,l=new n(e,t,a,r,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function KM(n,e){if($s("AsyncQueue",`${e}: ${n}`),Ad(n))return new de(ee.UNAVAILABLE,`${e}: ${n}`);throw n}var Fv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Oe.comparator(t.key,i.key):(t,i)=>Oe.comparator(t.key,i.key),this.keyedMap=mp(),this.sortedSet=new pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Vv=class{constructor(){this.fa=new pn(Oe.comparator)}track(e){let t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Fe(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}},Md=class n{constructor(e,t,i,r,o,a,l,u,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,o){let a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new n(e,t,Fv.emptySet(t),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ty(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var dM=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},hM=class{constructor(){this.queries=AN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){let r=We(t),o=r.queries;r.queries=AN(),o.forEach((a,l)=>{for(let u of l.wa)u.onError(i)})})(this,new de(ee.ABORTED,"Firestore shutting down"))}};function AN(){return new Ws(n=>CL(n),ty)}function JL(n,e){return S(this,null,function*(){let t=We(n),i=3,r=e.query,o=t.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new dM,i=e.ba()?0:1);try{switch(i){case 0:o.ya=yield t.onListen(r,!0);break;case 1:o.ya=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(a){let l=KM(a,`Initialization of query '${dd(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&ZM(t)})}function XL(n,e){return S(this,null,function*(){let t=We(n),i=e.query,r=3,o=t.queries.get(i);if(o){let a=o.wa.indexOf(e);a>=0&&(o.wa.splice(a,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function iW(n,e){let t=We(n),i=!1;for(let r of e){let o=r.query,a=t.queries.get(o);if(a){for(let l of a.wa)l.Ca(r)&&(i=!0);a.ya=r}}i&&ZM(t)}function rW(n,e,t){let i=We(n),r=i.queries.get(e);if(r)for(let o of r.wa)o.onError(t);i.queries.delete(e)}function ZM(n){n.Da.forEach(e=>{e.next()})}var fM,kN;(kN=fM||(fM={})).Fa="default",kN.Cache="cache";var Bv=class{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Md(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Md.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==fM.Cache}};var Uv=class{constructor(e){this.key=e}},zv=class{constructor(e){this.key=e}},pM=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ft(),this.mutatedKeys=ft(),this.Xa=EL(e),this.eu=new Fv(this.Xa)}get tu(){return this.Ha}nu(e,t){let i=t?t.ru:new Vv,r=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,a=r,l=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,b)=>{let E=r.get(g),I=ny(this.query,b)?b:null,R=!!E&&this.mutatedKeys.has(E.key),W=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),q=!1;E&&I?E.data.isEqual(I.data)?R!==W&&(i.track({type:3,doc:I}),q=!0):this.iu(E,I)||(i.track({type:2,doc:I}),q=!0,(u&&this.Xa(I,u)>0||f&&this.Xa(I,f)<0)&&(l=!0)):!E&&I?(i.track({type:0,doc:I}),q=!0):E&&!I&&(i.track({type:1,doc:E}),q=!0,(u||f)&&(l=!0)),q&&(I?(a=a.add(I),o=W?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{eu:a,ru:i,Ds:l,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort((g,b)=>(function(I,R){let W=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{At:q})}};return W(I)-W(R)})(g.type,b.type)||this.Xa(g.doc,b.doc)),this.su(i),r=r!=null&&r;let l=t&&!r?this.ou():[],u=this.Za.size===0&&this.current&&!r?1:0,f=u!==this.Ya;return this.Ya=u,a.length!==0||f?{snapshot:new Md(this.query,e.eu,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Vv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ft(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});let t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new zv(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new Uv(i))}),t}uu(e){this.Ha=e.qs,this.Za=ft();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Md.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},YM="SyncEngine",gM=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},mM=class{constructor(e){this.key=e,this.lu=!1}},_M=class{constructor(e,t,i,r,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Ws(l=>CL(l),ty),this.Tu=new Map,this.Iu=new Set,this.du=new pn(Oe.comparator),this.Eu=new Map,this.Au=new Tp,this.Ru={},this.Vu=new Map,this.mu=Sp.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function oW(n,e,t=!0){return S(this,null,function*(){let i=o4(n),r,o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=yield e4(i,e,t,!0),r})}function sW(n,e){return S(this,null,function*(){let t=o4(n);yield e4(t,e,!0,!1)})}function e4(n,e,t,i){return S(this,null,function*(){let r=yield Hq(n.localStore,Yo(e)),o=r.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),l;return i&&(l=yield aW(n,e,o,a==="current",r.resumeToken)),n.isPrimaryClient&&t&&qL(n.remoteStore,r),l})}function aW(n,e,t,i,r){return S(this,null,function*(){n.gu=(b,E,I)=>(function(W,q,ie,ge){return S(this,null,function*(){let we=q.view.nu(ie);we.Ds&&(we=yield SN(W.localStore,q.query,!1).then(({documents:V})=>q.view.nu(V,we)));let Re=ge&&ge.targetChanges.get(q.targetId),jt=ge&&ge.targetMismatches.get(q.targetId)!=null,ct=q.view.applyChanges(we,W.isPrimaryClient,Re,jt);return NN(W,q.targetId,ct._u),ct.snapshot})})(n,b,E,I);let o=yield SN(n.localStore,e,!0),a=new pM(e,o.qs),l=a.nu(o.documents),u=Mp.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=a.applyChanges(l,n.isPrimaryClient,u);NN(n,t,f._u);let g=new gM(e,t,a);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),f.snapshot})}function cW(n,e,t){return S(this,null,function*(){let i=We(n),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter(a=>!ty(a,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield QI(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&$M(i.remoteStore,r.targetId),vM(i,r.targetId)}).catch(Dd))):(vM(i,r.targetId),yield QI(i.localStore,r.targetId,!0))})}function lW(n,e){return S(this,null,function*(){let t=We(n),i=t.Pu.get(e),r=t.Tu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),$M(t.remoteStore,i.targetId))})}function uW(n,e,t){return S(this,null,function*(){let i=_W(n);try{let r=yield(function(a,l){let u=We(a),f=Fn.now(),g=l.reduce((I,R)=>I.add(R.key),ft()),b,E;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let R=Ks(),W=ft();return u.Os.getEntries(I,g).next(q=>{R=q,R.forEach((ie,ge)=>{ge.isValidDocument()||(W=W.add(ie))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,R)).next(q=>{b=q;let ie=[];for(let ge of l){let we=gq(ge,b.get(ge.key).overlayedDocument);we!=null&&ie.push(new Xo(ge.key,we,mL(we.value.mapValue),qa.exists(!0)))}return u.mutationQueue.addMutationBatch(I,f,ie,l)}).next(q=>{E=q;let ie=q.applyToLocalDocumentSet(b,W);return u.documentOverlayCache.saveOverlays(I,q.batchId,ie)})}).then(()=>({batchId:E.batchId,changes:ML(b)}))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(a,l,u){let f=a.Ru[a.currentUser.toKey()];f||(f=new pn(nt)),f=f.insert(l,u),a.Ru[a.currentUser.toKey()]=f})(i,r.batchId,t),yield Rp(i,r.changes),yield oy(i.remoteStore)}catch(r){let o=KM(r,"Failed to persist write");t.reject(o)}})}function t4(n,e){return S(this,null,function*(){let t=We(n);try{let i=yield Uq(t.localStore,e);e.targetChanges.forEach((r,o)=>{let a=t.Eu.get(o);a&&(At(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.lu=!0:r.modifiedDocuments.size>0?At(a.lu,14607):r.removedDocuments.size>0&&(At(a.lu,42227),a.lu=!1))}),yield Rp(t,i,e)}catch(i){yield Dd(i)}})}function RN(n,e,t){let i=We(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Pu.forEach((o,a)=>{let l=a.view.va(e);l.snapshot&&r.push(l.snapshot)}),(function(a,l){let u=We(a);u.onlineState=l;let f=!1;u.queries.forEach((g,b)=>{for(let E of b.wa)E.va(l)&&(f=!0)}),f&&ZM(u)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function dW(n,e,t){return S(this,null,function*(){let i=We(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Eu.get(e),o=r&&r.key;if(o){let a=new pn(Oe.comparator);a=a.insert(o,so.newNoDocument(o,Ye.min()));let l=ft().add(o),u=new Ev(Ye.min(),new Map,new pn(nt),a,l);yield t4(i,u),i.du=i.du.remove(o),i.Eu.delete(e),QM(i)}else yield QI(i.localStore,e,!1).then(()=>vM(i,e,t)).catch(Dd)})}function hW(n,e){return S(this,null,function*(){let t=We(n),i=e.batch.batchId;try{let r=yield Bq(t.localStore,e);i4(t,i,null),n4(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Rp(t,r)}catch(r){yield Dd(r)}})}function fW(n,e,t){return S(this,null,function*(){let i=We(n);try{let r=yield(function(a,l){let u=We(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return u.mutationQueue.lookupMutationBatch(f,l).next(b=>(At(b!==null,37113),g=b.keys(),u.mutationQueue.removeMutationBatch(f,b))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,g,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>u.localDocuments.getDocuments(f,g))})})(i.localStore,e);i4(i,e,t),n4(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Rp(i,r)}catch(r){yield Dd(r)}})}function n4(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function i4(n,e,t){let i=We(n),r=i.Ru[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function vM(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||r4(n,i)})}function r4(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&($M(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),QM(n))}function NN(n,e,t){for(let i of t)i instanceof Uv?(n.Au.addReference(i.key,e),pW(n,i)):i instanceof zv?(ve(YM,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||r4(n,i.key)):Fe(19791,{yu:i})}function pW(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(ve(YM,"New document in limbo: "+t),n.Iu.add(i),QM(n))}function QM(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Oe(tn.fromString(e)),i=n.mu.next();n.Eu.set(i,new mM(t)),n.du=n.du.insert(t,i),qL(n.remoteStore,new Pp(Yo(ey(t.path)),i,"TargetPurposeLimboResolution",kM.ue))}}function Rp(n,e,t){return S(this,null,function*(){let i=We(n),r=[],o=[],a=[];i.Pu.isEmpty()||(i.Pu.forEach((l,u)=>{a.push(i.gu(u,e,t).then(f=>{var g;if((f||t)&&i.isPrimaryClient){let b=f?!f.fromCache:(g=t?.targetChanges.get(u.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(u.targetId,b?"current":"not-current")}if(f){r.push(f);let b=WI.Es(u.targetId,f);o.push(b)}}))}),yield Promise.all(a),i.hu.J_(r),yield(function(u,f){return S(this,null,function*(){let g=We(u);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>se.forEach(f,E=>se.forEach(E.Is,I=>g.persistence.referenceDelegate.addReference(b,E.targetId,I)).next(()=>se.forEach(E.ds,I=>g.persistence.referenceDelegate.removeReference(b,E.targetId,I)))))}catch(b){if(!Ad(b))throw b;ve(HM,"Failed to update sequence numbers: "+b)}for(let b of f){let E=b.targetId;if(!b.fromCache){let I=g.Fs.get(E),R=I.snapshotVersion,W=I.withLastLimboFreeSnapshotVersion(R);g.Fs=g.Fs.insert(E,W)}}})})(i.localStore,o))})}function gW(n,e){return S(this,null,function*(){let t=We(n);if(!t.currentUser.isEqual(e)){ve(YM,"User change. New user:",e.toKey());let i=yield $L(t.localStore,e);t.currentUser=e,(function(o,a){o.Vu.forEach(l=>{l.forEach(u=>{u.reject(new de(ee.CANCELLED,a))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Rp(t,i.Bs)}})}function mW(n,e){let t=We(n),i=t.Eu.get(e);if(i&&i.lu)return ft().add(i.key);{let r=ft(),o=t.Tu.get(e);if(!o)return r;for(let a of o){let l=t.Pu.get(a);r=r.unionWith(l.view.tu)}return r}}function o4(n){let e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=t4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dW.bind(null,e),e.hu.J_=iW.bind(null,e.eventManager),e.hu.pu=rW.bind(null,e.eventManager),e}function _W(n){let e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fW.bind(null,e),e}var s4=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=iy(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,i){return null}Fu(t,i){return null}vu(t){return Vq(this.persistence,new ZI,t.initialUser,this.serializer)}Du(t){return new Ov(qI.Vi,this.serializer)}bu(t){return new JI}terminate(){return S(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),yM=class extends s4{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){At(this.persistence.referenceDelegate instanceof Dv,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new kI(i,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new Ov(i=>Dv.Vi(i,t),this.serializer)}};var vW=(()=>{class n{initialize(t,i){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>RN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gW.bind(null,this.syncEngine),yield nW(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new hM})()}createDatastore(t){let i=iy(t.databaseInfo.databaseId),r=(function(a){return new iM(a)})(t.databaseInfo);return(function(a,l,u,f){return new aM(a,l,u,f)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,o,a,l,u){return new lM(r,o,a,l,u)})(this.localStore,this.datastore,t.asyncQueue,i=>RN(this.syncEngine,i,0),(function(){return kv.C()?new kv:new XI})())}createSyncEngine(t,i){return(function(o,a,l,u,f,g,b){let E=new _M(o,a,l,u,f,g);return b&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return S(this,null,function*(){var t,i;yield(function(o){return S(this,null,function*(){let a=We(o);ve(Cl,"RemoteStore shutting down."),a.Ia.add(5),yield kp(a),a.Ea.shutdown(),a.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var jv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):$s("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var tc="FirestoreClient",bM=class{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Jn.UNAUTHENTICATED,this.clientId=xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,a=>S(this,null,function*(){ve(tc,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(ve(tc,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=KM(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function GE(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ve(tc,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>S(null,null,function*(){i.isEqual(r)||(yield $L(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>{Qa("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ve("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Qa("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=e})}function LN(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield yW(n);ve(tc,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>DN(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>DN(e.remoteStore,r)),n._onlineComponents=e})}function yW(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(tc,"Using user provided OfflineComponentProvider");try{yield GE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ee.FAILED_PRECONDITION||r.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Qa("Error using user provided cache. Falling back to memory cache: "+t),yield GE(n,new s4)}}else ve(tc,"Using default OfflineComponentProvider"),yield GE(n,new yM(void 0));return n._offlineComponents})}function a4(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(tc,"Using user provided OnlineComponentProvider"),yield LN(n,n._uninitializedComponentsProvider._online)):(ve(tc,"Using default OnlineComponentProvider"),yield LN(n,new vW))),n._onlineComponents})}function bW(n){return a4(n).then(e=>e.syncEngine)}function xM(n){return S(this,null,function*(){let e=yield a4(n),t=e.eventManager;return t.onListen=oW.bind(null,e.syncEngine),t.onUnlisten=cW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lW.bind(null,e.syncEngine),t})}function xW(n,e,t={}){let i=new Wo;return n.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return(function(o,a,l,u,f){let g=new jv({next:E=>{g.Ou(),a.enqueueAndForget(()=>XL(o,b));let I=E.docs.has(l);!I&&E.fromCache?f.reject(new de(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&u&&u.source==="server"?f.reject(new de(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),b=new Bv(ey(l.path),g,{includeMetadataChanges:!0,ka:!0});return JL(o,b)})(yield xM(n),n.asyncQueue,e,t,i)})),i.promise}function c4(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var FN=new Map;var l4="firestore.googleapis.com",VN=!0,Hv=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=l4,this.ssl=VN}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:VN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Nq)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c4((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Pd=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new qE;switch(i.type){case"firstParty":return new YE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=FN.get(t);i&&(ve("ComponentProvider","Removing Datastore"),FN.delete(t),i.terminate())})(this),Promise.resolve()}};function u4(n,e,t,i={}){var r;n=Ko(n,Pd);let o=cr(e),a=n._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Ba(`https://${u}`),Ua("Firestore",!0)),a.host!==l4&&a.host!==u&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f=Object.assign(Object.assign({},a),{host:u,ssl:o,emulatorOptions:i});if(!Bo(f,l)&&(n._setSettings(f),i.mockUserToken)){let g,b;if(typeof i.mockUserToken=="string")g=i.mockUserToken,b=Jn.MOCK_USER;else{g=R0(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Jn(E)}n._authCredentials=new WE(new pv(g,b))}}var nc=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$n=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ap(t,n._jsonSchema))return new n(e,i||null,new Oe(tn.fromString(t.referencePath)))}};$n._jsonSchemaVersion="firestore/documentReference/1.0",$n._jsonSchema={type:Ln("string",$n._jsonSchemaVersion),referencePath:Ln("string")};var Wa=class n extends nc{constructor(e,t,i){super(e,t,ey(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Oe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function d4(n,e,...t){if(n=_t(n),qN("collection","path",e),n instanceof Pd){let i=tn.fromString(e,...t);return nN(i),new Wa(n,null,i)}{if(!(n instanceof $n||n instanceof Wa))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(tn.fromString(e,...t));return nN(i),new Wa(n.firestore,null,i)}}function h4(n,e,...t){if(n=_t(n),arguments.length===1&&(e=xp.newId()),qN("doc","path",e),n instanceof Pd){let i=tn.fromString(e,...t);return tN(i),new $n(n,null,new Oe(i))}{if(!(n instanceof $n||n instanceof Wa))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(tn.fromString(e,...t));return tN(i),new $n(n.firestore,n instanceof Wa?n.converter:null,new Oe(i))}}var BN="AsyncQueue",$v=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Rv(this,"async_queue_retry"),this.oc=()=>{let i=$E();i&&ve(BN,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=$E();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=$E();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Wo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return S(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ad(e))throw e;ve(BN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,$s("INTERNAL UNHANDLED ERROR: ",UN(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=uM.createAndSchedule(this,e,t,i,o=>this.lc(o));return this.ec.push(r),r}ac(){this.tc&&Fe(47125,{hc:UN(this.tc)})}verifyOperationInProgress(){}Pc(){return S(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function UN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function zN(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}var ic=class extends Pd{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new $v,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new $v(e),this._firestoreClient=void 0,yield e}})}};function f4(n,e){let t=typeof n=="object"?n:to(),i=typeof n=="string"?n:e||yv,r=jo(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=td("firestore");o&&u4(r,...o)}return r}function JM(n){if(n._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wW(n),n._firestoreClient}function wW(n){var e,t,i;let r=n._freezeSettings(),o=(function(l,u,f,g){return new tI(l,u,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,c4(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new bM(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(l){let u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(n._componentsProvider))}var Ka=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(vi.fromBase64String(e))}catch(t){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ap(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ka._jsonSchemaVersion="firestore/bytes/1.0",Ka._jsonSchema={type:Ln("string",Ka._jsonSchemaVersion),bytes:Ln("string")};var Sd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Td=class{constructor(e){this._methodName=e}};var Za=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Ap(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Za._jsonSchemaVersion="firestore/geoPoint/1.0",Za._jsonSchema={type:Ln("string",Za._jsonSchemaVersion),latitude:Ln("number"),longitude:Ln("number")};var Ya=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ap(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new de(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ya._jsonSchemaVersion="firestore/vectorValue/1.0",Ya._jsonSchema={type:Ln("string",Ya._jsonSchemaVersion),vectorValues:Ln("object")};var CW=/^__.*__$/,wM=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Xo(e,this.data,this.fieldMask,t,this.fieldTransforms):new wl(e,this.data,t,this.fieldTransforms)}},Gv=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Xo(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function p4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ec:n})}}var CM=class n{constructor(e,t,i,r,o,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Wv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(p4(this.Ec)&&CW.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},EM=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||iy(e)}Dc(e,t,i,r=!1){return new CM({Ec:e,methodName:t,bc:i,path:dr.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function XM(n){let e=n._freezeSettings(),t=iy(n._databaseId);return new EM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function EW(n,e,t,i,r,o={}){let a=n.Dc(o.merge||o.mergeFields?2:0,e,t,r);eP("Data must be an object, but it was:",a,i);let l=g4(i,a),u,f;if(o.merge)u=new Tr(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let g=[];for(let b of o.mergeFields){let E=MM(e,b,t);if(!a.contains(E))throw new de(ee.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);_4(g,E)||g.push(E)}u=new Tr(g),f=a.fieldTransforms.filter(b=>u.covers(b.field))}else u=null,f=a.fieldTransforms;return new wM(new ur(l),u,f)}var qv=class n extends Td{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var IM=class n extends Td{_toFieldTransform(e){return new gI(e.path,new yl)}isEqual(e){return e instanceof n}};function IW(n,e,t,i){let r=n.Dc(1,e,t);eP("Data must be an object, but it was:",r,i);let o=[],a=ur.empty();rc(i,(u,f)=>{let g=tP(e,u,t);f=_t(f);let b=r.gc(g);if(f instanceof qv)o.push(g);else{let E=Np(f,b);E!=null&&(o.push(g),a.set(g,E))}});let l=new Tr(o);return new Gv(a,l,r.fieldTransforms)}function MW(n,e,t,i,r,o){let a=n.Dc(1,e,t),l=[MM(e,i,t)],u=[r];if(o.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)l.push(MM(e,o[E])),u.push(o[E+1]);let f=[],g=ur.empty();for(let E=l.length-1;E>=0;--E)if(!_4(f,l[E])){let I=l[E],R=u[E];R=_t(R);let W=a.gc(I);if(R instanceof qv)f.push(I);else{let q=Np(R,W);q!=null&&(f.push(I),g.set(I,q))}}let b=new Tr(f);return new Gv(g,b,a.fieldTransforms)}function PW(n,e,t,i=!1){return Np(t,n.Dc(i?4:3,e))}function Np(n,e){if(m4(n=_t(n)))return eP("Unsupported field value:",e,n),g4(n,e);if(n instanceof Td)return(function(i,r){if(!p4(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){let o=[],a=0;for(let l of i){let u=Np(l,r.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=_t(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return uq(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Fn.fromDate(i);return{timestampValue:Sv(r.serializer,o)}}if(i instanceof Fn){let o=new Fn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Sv(r.serializer,o)}}if(i instanceof Za)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ka)return{bytesValue:LL(r.serializer,i._byteString)};if(i instanceof $n){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jM(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ya)return(function(a,l){return{mapValue:{fields:{[LM]:{stringValue:FM},[yd]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return zM(l.serializer,f)})}}}}}})(i,r);throw r.wc(`Unsupported field value: ${Qv(i)}`)})(n,e)}function g4(n,e){let t={};return cL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rc(n,(i,r)=>{let o=Np(r,e.Vc(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function m4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Fn||n instanceof Za||n instanceof Ka||n instanceof $n||n instanceof Td||n instanceof Ya)}function eP(n,e,t){if(!m4(t)||!WN(t)){let i=Qv(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function MM(n,e,t){if((e=_t(e))instanceof Sd)return e._internalPath;if(typeof e=="string")return tP(n,e);throw Wv("Field path arguments must be of type string or ",n,!1,void 0,t)}var SW=new RegExp("[~\\*/\\[\\]]");function tP(n,e,t){if(e.search(SW)>=0)throw Wv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sd(...e.split("."))._internalPath}catch{throw Wv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wv(n,e,t,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new de(ee.INVALID_ARGUMENT,l+n+u)}function _4(n,e){return n.some(t=>t.isEqual(e))}var Kv=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new PM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(sy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},PM=class extends Kv{data(){return super.data()}};function sy(n,e){return typeof e=="string"?tP(n,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}function TW(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Op=class{},Dp=class extends Op{};function v4(n,e,...t){let i=[];e instanceof Op&&i.push(e),i=i.concat(t),(function(o){let a=o.filter(u=>u instanceof SM).length,l=o.filter(u=>u instanceof Zv).length;if(a>1||a>0&&l>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(let r of i)n=r._apply(n);return n}var Zv=class n extends Dp{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return w4(e._query,t),new nc(e.firestore,e.converter,pI(e._query,t))}_parse(e){let t=XM(e.firestore);return(function(o,a,l,u,f,g,b){let E;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){HN(b,g);let R=[];for(let W of b)R.push(jN(u,o,W));E={arrayValue:{values:R}}}else E=jN(u,o,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||HN(b,g),E=PW(l,a,b,g==="in"||g==="not-in");return Nn.create(f,g,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function y4(n,e,t){let i=e,r=sy("where",n);return Zv._create(r,i,t)}var SM=class n extends Op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:ao.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let a=r,l=o.getFlattenedFilters();for(let u of l)w4(a,u),a=pI(a,u)})(e._query,t),new nc(e.firestore,e.converter,pI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var TM=class n extends Dp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(r,o,a){if(r.startAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vl(o,a)})(e._query,this._field,this._direction);return new nc(e.firestore,e.converter,(function(r,o){let a=r.explicitOrderBy.concat([o]);return new Xa(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}};function b4(n,e="asc"){let t=e,i=sy("orderBy",n);return TM._create(i,t)}var OM=class n extends Dp{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new nc(e.firestore,e.converter,wv(e._query,this._limit,this._limitType))}};function x4(n){return kG("limit",n),OM._create("limit",n,"F")}function jN(n,e,t){if(typeof(t=_t(t))=="string"){if(t==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wL(e)&&t.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(tn.fromString(t));if(!Oe.isDocumentKey(i))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return lN(n,new Oe(i))}if(t instanceof $n)return lN(n,t._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qv(t)}.`)}function HN(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w4(n,e){let t=(function(r,o){for(let a of r)for(let l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var DM=class{convertValue(e,t="none"){switch(Ja(e)){case 0:return null;case 1:return e.booleanValue;case 2:return en(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return rc(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,r;let o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[yd].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>en(a.doubleValue));return new Ya(o)}convertGeoPoint(e){return new Za(en(e.latitude),en(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Xv(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ep(e));default:return null}}convertTimestamp(e){let t=Gs(e);return new Fn(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=tn.fromString(e);At(jL(i),9688,{name:e});let r=new bv(i.get(1),i.get(3)),o=new Oe(i.popFirst(5));return r.isEqual(t)||$s(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function OW(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var pl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gl=class n extends Kv{constructor(e,t,i,r,o,a){super(e,t,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(sy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};gl._jsonSchemaVersion="firestore/documentSnapshot/1.0",gl._jsonSchema={type:Ln("string",gl._jsonSchemaVersion),bundleSource:Ln("string","DocumentSnapshot"),bundleName:Ln("string"),bundle:Ln("string")};var md=class extends gl{data(e={}){return super.data(e)}},_d=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new md(this._firestore,this._userDataWriter,i.key,i,new pl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{let u=new md(r._firestore,r._userDataWriter,l.doc.key,l.doc,new pl(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{let u=new md(r._firestore,r._userDataWriter,l.doc.key,l.doc,new pl(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,g=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),g=a.indexOf(l.doc.key)),{type:DW(l.type),doc:u,oldIndex:f,newIndex:g}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function DW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:n})}}function C4(n){n=Ko(n,$n);let e=Ko(n.firestore,ic);return xW(JM(e),n._key).then(t=>P4(e,n,t))}_d._jsonSchemaVersion="firestore/querySnapshot/1.0",_d._jsonSchema={type:Ln("string",_d._jsonSchemaVersion),bundleSource:Ln("string","QuerySnapshot"),bundleName:Ln("string"),bundle:Ln("string")};var Yv=class extends DM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ka(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}};function E4(n,e,t){n=Ko(n,$n);let i=Ko(n.firestore,ic),r=OW(n.converter,e,t);return M4(i,[EW(XM(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,qa.none())])}function I4(n,e,t,...i){n=Ko(n,$n);let r=Ko(n.firestore,ic),o=XM(r),a;return a=typeof(e=_t(e))=="string"||e instanceof Sd?MW(o,"updateDoc",n._key,e,t,i):IW(o,"updateDoc",n._key,e),M4(r,[a.toMutation(n._key,qa.exists(!0))])}function nP(n,...e){var t,i,r;n=_t(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||zN(e[a])||(o=e[a++]);let l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(zN(e[a])){let b=e[a];e[a]=(t=b.next)===null||t===void 0?void 0:t.bind(b),e[a+1]=(i=b.error)===null||i===void 0?void 0:i.bind(b),e[a+2]=(r=b.complete)===null||r===void 0?void 0:r.bind(b)}let u,f,g;if(n instanceof $n)f=Ko(n.firestore,ic),g=ey(n._key.path),u={next:b=>{e[a]&&e[a](P4(f,n,b))},error:e[a+1],complete:e[a+2]};else{let b=Ko(n,nc);f=Ko(b.firestore,ic),g=b._query;let E=new Yv(f);u={next:I=>{e[a]&&e[a](new _d(f,E,b,I))},error:e[a+1],complete:e[a+2]},TW(n._query)}return(function(E,I,R,W){let q=new jv(W),ie=new Bv(I,q,R);return E.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return JL(yield xM(E),ie)})),()=>{q.Ou(),E.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return XL(yield xM(E),ie)}))}})(JM(f),g,l,u)}function M4(n,e){return(function(i,r){let o=new Wo;return i.asyncQueue.enqueueAndForget(()=>S(null,null,function*(){return uW(yield bW(i),r,o)})),o.promise})(JM(n),e)}function P4(n,e,t){let i=t.docs.get(e._key),r=new Yv(n);return new gl(n,r,e._key,i,new pl(t.hasPendingWrites,t.fromCache),e.converter)}function Or(){return new IM("serverTimestamp")}(function(e,t=!0){(function(r){Od=r})(Ho),ki(new jn("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),l=new ic(new KE(i.getProvider("auth-internal")),new QE(a,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bv(f.options.projectId,g)})(a,r),a);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Pt(QR,JR,e),Pt(QR,JR,"esm2017")})();var ay=function(){return ay=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ay.apply(this,arguments)};var RW={includeMetadataChanges:!1};function S4(n,e){return e===void 0&&(e=RW),new Ae(function(t){var i=nP(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function T4(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:ay(ay({},i),(t={},t[e.idField]=n.id,t))}function O4(n){return S4(n,{includeMetadataChanges:!0}).pipe(ue(function(e){return e.docs}))}function D4(n,e){return e===void 0&&(e={}),O4(n).pipe(ue(function(t){return t.map(function(i){return T4(i,e)})}))}var Zs=class{constructor(e){return e}},A4="firestore",iP=class{constructor(){return $o(A4)}};var rP=new _e("angularfire2.firestore-instances");function NW(n,e){let t=Rs(A4,n,e);return t&&new Zs(t)}function LW(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Zs(i)}}var FW={provide:iP,deps:[[new cn,rP]]},VW={provide:Zs,useFactory:NW,deps:[[new cn,rP],lr]};function k4(n,...e){return Pt("angularfire",Ir.full,"fst"),Oi([VW,FW,{provide:rP,useFactory:LW(n),multi:!0,deps:[mt,Gt,Mr,no,[new cn,zs],[new cn,Go],...e]}])}var Rd=vt(D4,!0);var cy=vt(d4,!0,2);var yi=vt(h4,!0,2);var Lp=vt(C4,!0);var R4=vt(f4,!0);var N4=vt(x4,!0,2);var ly=vt(b4,!0,2),Fp=vt(v4,!0,2);var Il=vt(E4,!0,2);var Ml=vt(I4,!0,2);var oP=vt(y4,!0,2);var Nd=class n{firestore=F(Zs);incidentsCollection=cy(this.firestore,"incidents");alertsCollection=cy(this.firestore,"alerts");riskZonesCollection=cy(this.firestore,"riskZones");getSafetyFeed(e){let i=Rd(Fp(this.incidentsCollection,ly("createdAt","desc")),{idField:"id"}).pipe(ue(o=>o.map(a=>ye(X({},a),{type:"incident"})))).pipe(ue(o=>e==="user"?o.filter(a=>a.recipient!=="admin"):o)),r=Rd(Fp(this.alertsCollection,ly("createdAt","desc")),{idField:"id"}).pipe(ue(o=>o.map(a=>ye(X({},a),{type:"alert"}))));return Mi([i,r]).pipe(ue(([o,a])=>[...o,...a].sort((u,f)=>f.createdAt.toMillis()-u.createdAt.toMillis())))}reportIncident(e){return S(this,null,function*(){let t=yi(this.incidentsCollection).id,i=yi(this.incidentsCollection,t),r=X({id:t,type:"incident",status:"pending",createdAt:Or(),location:e.location||{lat:0,lng:0},description:e.description||"N/A",priority:e.priority||"medium",recipient:e.recipient||"both"},e);return yield Il(i,r),t})}createUserProfile(e,t){return S(this,null,function*(){let i=yi(this.firestore,`users/${e}`),r=yi(this.firestore,"config/adminExists"),a=!(yield Lp(r)).exists(),l={uid:e,email:t.email||"",displayName:t.displayName||"",phoneNumber:t.phoneNumber||"",role:a?"admin":"citizen",createdAt:Or(),lastActive:Or()};return yield Il(i,l),a&&(yield Il(r,{ownerUid:e,createdAt:Or()})),l})}issueAlert(e){return S(this,null,function*(){let t=yi(this.alertsCollection).id,i=yi(this.alertsCollection,t);return yield Il(i,ye(X({},e),{type:"alert",createdAt:Or()})),t})}updateIncidentStatus(e,t){return S(this,null,function*(){let i=yi(this.incidentsCollection,e),r={status:t};t==="approved"&&(r.recipient="both"),yield Ml(i,r)})}updateIncident(e,t){return S(this,null,function*(){let i=yi(this.incidentsCollection,e);yield Ml(i,t)})}getRiskZones(){return Rd(this.riskZonesCollection,{idField:"id"})}getUserProfile(e){return S(this,null,function*(){let t=yi(this.firestore,`users/${e}`),i=yield Lp(t);if(i.exists()){let r=i.data();return X({uid:e,email:r.email||"",displayName:r.displayName||"",role:r.role||"user"},r)}return null})}updateUserProfile(e,t){return S(this,null,function*(){let i=yi(this.firestore,`users/${e}`);yield Ml(i,ye(X({},t),{updatedAt:Or()}))})}getUserReportsCount(e){return S(this,null,function*(){let t=Fp(this.incidentsCollection,oP("userId","==",e));return(yield Rd(t,{idField:"id"}).pipe(ue(r=>r.length)).toPromise())||0})}getUserRecentActivity(e,t=10){let i=Fp(this.incidentsCollection,oP("userId","==",e),ly("createdAt","desc"),N4(t));return Rd(i,{idField:"id"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var BW="type.googleapis.com/google.protobuf.Int64Value",UW="type.googleapis.com/google.protobuf.UInt64Value";function B4(n,e){let t={};for(let i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function uy(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>uy(e));if(typeof n=="function"||typeof n=="object")return B4(n,e=>uy(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Ld(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case BW:case UW:{let e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Ld(e)):typeof n=="function"||typeof n=="object"?B4(n,e=>Ld(e)):n}var lP="functions";var L4={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qi=class n extends ai{constructor(e,t,i){super(`${lP}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,n.prototype)}};function zW(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function dy(n,e){let t=zW(n),i=t,r;try{let o=e&&e.error;if(o){let a=o.status;if(typeof a=="string"){if(!L4[a])return new qi("internal","internal");t=L4[a],i=a}let l=o.message;typeof l=="string"&&(i=l),r=o.details,r!==void 0&&(r=Ld(r))}}catch{}return t==="ok"?null:new qi(t,i,r)}var sP=class{constructor(e,t,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Hn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r?.get().then(o=>this.appCheck=o,()=>{})}getAuthToken(){return S(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return S(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return S(this,null,function*(){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return S(this,null,function*(){let t=yield this.getAuthToken(),i=yield this.getMessagingToken(),r=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:r}})}};var aP="us-central1",jW=/^data: (.*?)(?:\n|$)/;function HW(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new qi("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}var cP=class{constructor(e,t,i,r,o=aP,a=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new sP(e,t,i,r),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{let l=new URL(o);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=aP}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function $W(n,e,t){let i=cr(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(Ba(n.emulatorOrigin),Ua("Functions",!0))}function GW(n,e,t){let i=r=>WW(n,e,r,t||{});return i.stream=(r,o)=>ZW(n,e,r,o),i}function qW(n,e,t,i){return S(this,null,function*(){t["Content-Type"]="application/json";let r;try{r=yield i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=yield r.json()}catch{}return{status:r.status,json:o}})}function U4(n,e){return S(this,null,function*(){let t={},i=yield n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t})}function WW(n,e,t,i){let r=n._url(e);return KW(n,r,t,i)}function KW(n,e,t,i){return S(this,null,function*(){t=uy(t);let r={data:t},o=yield U4(n,i),a=i.timeout||7e4,l=HW(a),u=yield Promise.race([qW(e,r,o,n.fetchImpl),l.promise,n.cancelAllRequests]);if(l.cancel(),!u)throw new qi("cancelled","Firebase Functions instance was deleted.");let f=dy(u.status,u.json);if(f)throw f;if(!u.json)throw new qi("internal","Response is not valid JSON object.");let g=u.json.data;if(typeof g>"u"&&(g=u.json.result),typeof g>"u")throw new qi("internal","Response is missing data field.");return{data:Ld(g)}})}function ZW(n,e,t,i){let r=n._url(e);return YW(n,r,t,i||{})}function YW(n,e,t,i){return S(this,null,function*(){var r;t=uy(t);let o={data:t},a=yield U4(n,i);a["Content-Type"]="application/json",a.Accept="text/event-stream";let l;try{l=yield n.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:a,signal:i?.signal})}catch(I){if(I instanceof Error&&I.name==="AbortError"){let W=new qi("cancelled","Request was cancelled.");return{data:Promise.reject(W),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(W)}}}}}}let R=dy(0,null);return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}let u,f,g=new Promise((I,R)=>{u=I,f=R});(r=i?.signal)===null||r===void 0||r.addEventListener("abort",()=>{let I=new qi("cancelled","Request was cancelled.");f(I)});let b=l.body.getReader(),E=QW(b,u,f,i?.signal);return{stream:{[Symbol.asyncIterator](){let I=E.getReader();return{next(){return S(this,null,function*(){let{value:W,done:q}=yield I.read();return{value:W,done:q}})},return(){return S(this,null,function*(){return yield I.cancel(),{done:!0,value:void 0}})}}}},data:g}})}function QW(n,e,t,i){let r=(a,l)=>{let u=a.match(jW);if(!u)return;let f=u[1];try{let g=JSON.parse(f);if("result"in g){e(Ld(g.result));return}if("message"in g){l.enqueue(Ld(g.message));return}if("error"in g){let b=dy(0,g);l.error(b),t(b);return}}catch(g){if(g instanceof qi){l.error(g),t(g);return}}},o=new TextDecoder;return new ReadableStream({start(a){let l="";return u();function u(){return S(this,null,function*(){if(i?.aborted){let f=new qi("cancelled","Request was cancelled");return a.error(f),t(f),Promise.resolve()}try{let{value:f,done:g}=yield n.read();if(g){l.trim()&&r(l.trim(),a),a.close();return}if(i?.aborted){let E=new qi("cancelled","Request was cancelled");a.error(E),t(E),yield n.cancel();return}l+=o.decode(f,{stream:!0});let b=l.split(`
`);l=b.pop()||"";for(let E of b)E.trim()&&r(E.trim(),a);return u()}catch(f){let g=f instanceof qi?f:dy(0,null);a.error(g),t(g)}})}},cancel(){return n.cancel()}})}var F4="@firebase/functions",V4="0.12.9";var JW="auth-internal",XW="app-check-internal",eK="messaging-internal";function tK(n){let e=(t,{instanceIdentifier:i})=>{let r=t.getProvider("app").getImmediate(),o=t.getProvider(JW),a=t.getProvider(eK),l=t.getProvider(XW);return new cP(r,o,a,l,i)};ki(new jn(lP,e,"PUBLIC").setMultipleInstances(!0)),Pt(F4,V4,n),Pt(F4,V4,"esm2017")}function z4(n=to(),e=aP){let i=jo(_t(n),lP).getImmediate({identifier:e}),r=td("functions");return r&&j4(i,...r),i}function j4(n,e,t){$W(_t(n),e,t)}function H4(n,e,t){return GW(_t(n),e,t)}tK();var Pl=class{constructor(e){return e}},$4="functions",uP=class{constructor(){return $o($4)}};var dP=new _e("angularfire2.functions-instances");function nK(n,e){let t=Rs($4,n,e);return t&&new Pl(t)}function iK(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Pl(i)}}var rK={provide:uP,deps:[[new cn,dP]]},oK={provide:Pl,useFactory:nK,deps:[[new cn,dP],lr]};function G4(n,...e){return Pt("angularfire",Ir.full,"fn"),Oi([oK,rK,{provide:dP,useFactory:iK(n),multi:!0,deps:[mt,Gt,Mr,no,[new cn,zs],[new cn,Go],...e]}])}var q4=vt(z4,!0),W4=vt(H4,!0);var un=class n{auth=F(Us);router=F(Mt);data=F(Nd);functions=F(Pl);currentUser$=zR(this.auth);isAdmin$=this.currentUser$.pipe(ri(e=>e?Nt(e.getIdTokenResult()).pipe(ue(t=>!!t.claims?.admin)):Me(!1)));login(e,t){return S(this,null,function*(){try{let i=yield qR(this.auth,e,t);console.log("Login successful for:",i.user.email);try{yield W4(this.functions,"verifyAdminOnSignIn")({}),console.log("Admin verification completed")}catch(r){console.warn("Admin verification skipped:",r)}yield i.user.getIdToken(!0);try{let r=this.auth.currentUser;if(r){let a=!!(yield r.getIdTokenResult(!0)).claims?.admin;console.log("User admin status:",a),this.router.navigate([a?"/admin-dashboard":"/dashboard"])}else this.router.navigate(["/dashboard"])}catch(r){console.error("Token check error:",r),this.router.navigate(["/dashboard"])}}catch(i){console.error("Login failed:",i.code,i.message);let r="Login failed: ";switch(i.code){case"auth/user-not-found":r+="No account found with this email. Please sign up first.";break;case"auth/wrong-password":r+="Incorrect password. Please try again.";break;case"auth/invalid-email":r+="Invalid email address format.";break;case"auth/user-disabled":r+="This account has been disabled.";break;case"auth/invalid-credential":r+="Invalid credentials. Please check your email and password.";break;default:r+=i.message||"An error occurred. Please try again."}throw new Error(r)}})}logout(){return S(this,null,function*(){yield WR(this.auth),this.router.navigate(["/"])})}loginWithGoogle(){return S(this,null,function*(){try{let e=new bE;e.addScope("email"),e.addScope("profile");let i=(yield NE(this.auth,e)).user;console.log("Google login successful:",i.email);try{i&&(yield this.data.createUserProfile(i.uid,{email:i.email||"",displayName:i.displayName||"Google User",phoneNumber:i.phoneNumber||""}))}catch(r){console.warn("Failed to create/update user profile:",r)}try{let o=!!(yield i.getIdTokenResult()).claims?.admin;this.router.navigate([o?"/admin-dashboard":"/dashboard"])}catch(r){console.error("Token check error:",r),this.router.navigate(["/dashboard"])}}catch(e){console.error("Google login failed:",e);let t="Google login failed: ";switch(e.code){case"auth/account-exists-with-different-credential":t+="An account already exists with the same email. Try signing in with a different method.";break;case"auth/popup-blocked":t+="Popup was blocked. Please allow popups for this site.";break;case"auth/popup-closed-by-user":t+="Login popup was closed. Please try again.";break;case"auth/cancelled-popup-request":t+="Login was cancelled. Please try again.";break;case"auth/network-request-failed":t+="Network error. Please check your connection.";break;default:t+=e.message||"An error occurred. Please try again."}throw new Error(t)}})}loginWithFacebook(){return S(this,null,function*(){try{let e=new yE;e.addScope("email"),e.addScope("public_profile");let i=(yield NE(this.auth,e)).user;console.log("Facebook login successful:",i.email);try{i&&(yield this.data.createUserProfile(i.uid,{email:i.email||"",displayName:i.displayName||"Facebook User",phoneNumber:i.phoneNumber||""}))}catch(r){console.warn("Failed to create/update user profile:",r)}try{let o=!!(yield i.getIdTokenResult()).claims?.admin;this.router.navigate([o?"/admin-dashboard":"/dashboard"])}catch(r){console.error("Token check error:",r),this.router.navigate(["/dashboard"])}}catch(e){console.error("Facebook login failed:",e);let t="Facebook login failed: ";switch(e.code){case"auth/account-exists-with-different-credential":t+="An account already exists with the same email. Try signing in with a different method.";break;case"auth/popup-blocked":t+="Popup was blocked. Please allow popups for this site.";break;case"auth/popup-closed-by-user":t+="Login popup was closed. Please try again.";break;case"auth/cancelled-popup-request":t+="Login was cancelled. Please try again.";break;case"auth/network-request-failed":t+="Network error. Please check your connection.";break;default:t+=e.message||"An error occurred. Please try again."}throw new Error(t)}})}sendVerificationEmail(){return S(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("No authenticated user to send verification to");try{yield GR(e)}catch(t){throw console.error("Failed to send verification email:",t),t}})}register(e,t,i){return S(this,null,function*(){try{let r=yield jR(this.auth,e,t);i&&(yield pp(r.user,{displayName:i}));try{r.user&&(yield this.data.createUserProfile(r.user.uid,{email:r.user.email??"",displayName:r.user.displayName??"",phoneNumber:r.user.phoneNumber??""}))}catch(o){console.warn("Failed to create user profile automatically:",o)}this.router.navigate(["/"])}catch(r){throw console.error("Registration failed:",r),new Error(r?.message||"Registration failed")}})}isLoggedIn(){return new Ae(e=>{this.currentUser$.subscribe(t=>{e.next(!!t)})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var es=class n{STORAGE_KEY="mountain_sentinel_notifications";notificationsSubject=new bt(this.loadNotificationsFromStorage());constructor(){}loadNotificationsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading notifications from storage:",e),[]}}saveNotificationsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving notifications to storage:",t)}}addSosNotification(){let e={id:this.generateId(),message:"Emergency SOS sent! Police have been notified and are on their way. Stay calm and safe.",type:"sos",createdAt:new Date().toISOString(),read:!1},t=this.notificationsSubject.value,i=[e,...t];this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}addEmergencySOSAlert(e,t,i){let r=i?` Location: ${i.lat.toFixed(6)}, ${i.lng.toFixed(6)}`:"",o={id:this.generateId(),message:`EMERGENCY SOS from ${e} (${t}).${r} Immediate assistance required!`,type:"sos",createdAt:new Date().toISOString(),read:!1,sosDetails:{userName:e,userEmail:t,location:i,timestamp:new Date().toISOString(),status:"pending"}},a=this.notificationsSubject.value,l=[o,...a];this.notificationsSubject.next(l),this.saveNotificationsToStorage(l)}markSOSAsResponded(e){let i=this.notificationsSubject.value.map(r=>r.id===e&&r.sosDetails?ye(X({},r),{read:!0,sosDetails:ye(X({},r.sosDetails),{status:"responded"})}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}markSOSAsResolved(e){let i=this.notificationsSubject.value.map(r=>r.id===e&&r.sosDetails?ye(X({},r),{sosDetails:ye(X({},r.sosDetails),{status:"resolved"})}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}notifySOSResponse(e,t,i){let r=i==="responded"?"Your emergency SOS has been received! Help is on the way. An admin/police officer is responding to your location. Stay calm and safe.":"Your emergency SOS has been resolved. The situation has been addressed by authorities. Thank you for using Mountain Sentinel.",o={id:this.generateId(),message:r,type:"action",createdAt:new Date().toISOString(),read:!1},a=this.notificationsSubject.value,l=[o,...a];this.notificationsSubject.next(l),this.saveNotificationsToStorage(l)}notifyReportAction(e,t,i,r,o){let a=r==="approved"?"Your safety report has been reviewed and approved by the admin. Authorities have been notified and appropriate action is being taken.":"Your safety report has been reviewed. The admin has determined that no further action is required at this time.",l={id:this.generateId(),message:`Report Update: "${o.substring(0,50)}${o.length>50?"...":""}" - ${a}`,type:"action",createdAt:new Date().toISOString(),read:!1,reportDetails:{reportId:i,action:r}},u=this.notificationsSubject.value,f=[l,...u];this.notificationsSubject.next(f),this.saveNotificationsToStorage(f)}addNotification(e,t="info"){let i={id:this.generateId(),message:e,type:t,createdAt:new Date().toISOString(),read:!1},r=this.notificationsSubject.value,o=[i,...r];this.notificationsSubject.next(o),this.saveNotificationsToStorage(o)}getNotifications(){return this.notificationsSubject.asObservable()}getUnreadCount(){return new Ae(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>!r.read).length;e.next(i)})})}getSOSCount(){return new Ae(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>r.type==="sos"&&!r.read).length;e.next(i)})})}getAdminNotifications(){return new Ae(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>r.type==="sos"||r.reportDetails&&r.type==="action");e.next(i)})})}getCitizenNotifications(){return new Ae(e=>{this.notificationsSubject.subscribe(t=>{let i=t.filter(r=>r.type==="alert"||r.type==="info"||r.reportDetails&&r.type==="action");e.next(i)})})}markAsRead(e){let i=this.notificationsSubject.value.map(r=>r.id===e?ye(X({},r),{read:!0}):r);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}deleteNotification(e){let i=this.notificationsSubject.value.filter(r=>r.id!==e);this.notificationsSubject.next(i),this.saveNotificationsToStorage(i)}clearAll(){this.notificationsSubject.next([]),this.saveNotificationsToStorage([])}generateId(){return`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var gn=class n{STORAGE_KEY="mountain_sentinel_reports";reportsSubject=new bt(this.loadReportsFromStorage());notificationService=F(es);constructor(){}loadReportsFromStorage(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading reports from storage:",e),[]}}saveReportsToStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving reports to storage:",t)}}submitReport(e){let t=new Date().toISOString(),i=ye(X({},e),{id:this.generateId(),status:"pending",createdAt:t,updatedAt:t}),o=[...this.reportsSubject.value,i];return this.reportsSubject.next(o),this.saveReportsToStorage(o),this.reportsSubject.asObservable().pipe(ue(a=>a.find(l=>l.id===i.id)))}getAllReports(){return this.reportsSubject.asObservable()}getPendingReports(){return this.reportsSubject.asObservable().pipe(ue(e=>e.filter(t=>t.status==="pending")))}getApprovedReports(){return this.reportsSubject.asObservable().pipe(ue(e=>e.filter(t=>t.status==="approved")))}approveReport(e){let t=this.reportsSubject.value,i=t.find(o=>o.id===e),r=t.map(o=>o.id===e?ye(X({},o),{status:"approved",updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r),i&&i.reporterId!=="ADMIN"&&this.notificationService.notifyReportAction(i.reporterEmail||"unknown",i.reporterName||"Reporter",e,"approved",i.description)}rejectReport(e){let t=this.reportsSubject.value,i=t.find(o=>o.id===e),r=t.map(o=>o.id===e?ye(X({},o),{status:"rejected",updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r),i&&i.reporterId!=="ADMIN"&&this.notificationService.notifyReportAction(i.reporterEmail||"unknown",i.reporterName||"Reporter",e,"rejected",i.description)}updateReport(e,t){let r=this.reportsSubject.value.map(o=>o.id===e?ye(X(X({},o),t),{updatedAt:new Date().toISOString()}):o);this.reportsSubject.next(r),this.saveReportsToStorage(r)}deleteReport(e){let i=this.reportsSubject.value.filter(r=>r.id!==e);this.reportsSubject.next(i),this.saveReportsToStorage(i)}sendEmergencySOS(e,t,i){this.notificationService.addEmergencySOSAlert(t,e,i),this.notificationService.addSosNotification()}generateId(){return`report_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};var Dr=class n{observer=null;isBrowser;constructor(e){this.isBrowser=qD(e)}initScrollRevealObserver(){if(!this.isBrowser)return;let e={threshold:.1,rootMargin:"0px 0px -50px 0px"};this.observer=new IntersectionObserver(i=>{i.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),this.observer?.unobserve(r.target))})},e),document.querySelectorAll(".scroll-reveal").forEach(i=>this.observer?.observe(i))}destroyScrollObserver(){this.observer&&(this.observer.disconnect(),this.observer=null)}initParallaxEffect(){if(!this.isBrowser)return;let e=document.querySelectorAll("[data-parallax]");e.length!==0&&window.addEventListener("scroll",()=>{let t=window.scrollY;e.forEach(i=>{let r=parseFloat(i.dataset.parallax||"0.5"),o=t*r;i.style.transform=`translateY(${o}px)`})},{passive:!0})}addAnimationClass(e,t,i=0){return new Promise(r=>{setTimeout(()=>{e.classList.add(t),r()},i)})}triggerPulse(e){e&&(e.style.animation="none",setTimeout(()=>{e.style.animation="pulse 0.6s cubic-bezier(0.4, 0, 0.2, 1)"},10))}triggerBounce(e,t=.1){if(!e)return;let i=e.style.transform;e.style.transform=`scale(${1-t})`,setTimeout(()=>{e.style.transition="transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)",e.style.transform=i||"scale(1)"},50)}addShimmerEffect(e){if(!e)return;let t=document.createElement("div");t.className="shimmer-effect",t.style.cssText=`
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmerSlide 0.8s infinite;
    `,e.style.position==="static"&&(e.style.position="relative"),e.appendChild(t)}smoothScrollToElement(e,t=60){if(!this.isBrowser)return;let i=typeof e=="string"?document.querySelector(e):e;if(!i)return;let r=i.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:r,behavior:"smooth"})}staggerAnimation(e,t,i=100){Array.from(e).forEach((r,o)=>{setTimeout(()=>{r.classList.add(t)},o*i)})}createFloatingEffect(e,t=10){if(!e)return;e.style.animation="float 3s ease-in-out infinite";let i=document.createElement("style");i.textContent=`
      @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-${t}px); }
      }
    `,document.head.appendChild(i)}onElementVisible(e,t,i=!0){if(!this.isBrowser)return;let r={threshold:.1},o=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&(t(),i&&o.unobserve(l.target))})},r);o.observe(e)}addRippleEffect(e){e&&e.addEventListener("click",t=>{let i=document.createElement("span"),r=e.getBoundingClientRect(),o=t.clientX-r.left,a=t.clientY-r.top,l=Math.max(r.width,r.height);i.style.cssText=`
        position: absolute;
        left: ${o-l/2}px;
        top: ${a-l/2}px;
        width: ${l}px;
        height: ${l}px;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        pointer-events: none;
        animation: rippleOut 0.6s ease-out;
      `,e.style.position="relative",e.style.overflow="hidden",e.appendChild(i),setTimeout(()=>i.remove(),600)})}triggerShake(e){e&&(e.style.animation="shake 0.5s cubic-bezier(0.4, 0, 0.2, 1)",setTimeout(()=>{e.style.animation=""},500))}addSkeletonEffect(e){e&&(e.style.cssText=`
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: skeleton 1.5s infinite;
    `)}static \u0275fac=function(t){return new(t||n)(Be(Cs))};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})},sK=`
  @keyframes shimmerSlide {
    0% { left: -100%; }
    100% { left: 100%; }
  }

  @keyframes rippleOut {
    0% {
      opacity: 1;
      transform: scale(0);
    }
    100% {
      opacity: 0;
      transform: scale(1);
    }
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
  }

  @keyframes skeleton {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }
`;if(typeof document<"u"){let n=document.createElement("style");n.textContent=sK,document.head.appendChild(n)}var ei=class n{toasts=Ut([]);generateId(){return`toast_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}show(e,t="info",i=4e3){let r={id:this.generateId(),message:e,type:t,duration:i};this.toasts.update(o=>[...o,r]),i>0&&setTimeout(()=>{this.dismiss(r.id)},i)}success(e,t=4e3){this.show(e,"success",t)}error(e,t=5e3){this.show(e,"error",t)}warning(e,t=4e3){this.show(e,"warning",t)}info(e,t=4e3){this.show(e,"info",t)}dismiss(e){this.toasts.update(t=>t.filter(i=>i.id!==e))}dismissAll(){this.toasts.set([])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};function aK(n,e){n&1&&(_(0,"span",43),w(1,"Location obtained"),v())}function cK(n,e){n&1&&(_(0,"span",44),w(1,"Obtaining your location..."),v())}function lK(n,e){if(n&1&&(_(0,"div",34),re(1,"div",35)(2,"div",36)(3,"div",37),_(4,"div",38),ne(),_(5,"svg",39),re(6,"polygon",15)(7,"line",16)(8,"line",17),v()()(),fe(),_(9,"h2",40),w(10,"SENDING EMERGENCY SOS"),v(),_(11,"p",41),w(12,"Please wait while we alert emergency services..."),v(),_(13,"div",42),Ee(14,aK,2,0,"span",43)(15,cK,2,0,"span",44),v(),_(16,"div",45),re(17,"div",46),v(),_(18,"p",47),w(19),v()),n&2){let t=T(2);C(14),Ie(t.userLocation?14:15),C(3),Jc("width",t.sosProgress,"%"),C(2),be("",t.sosCountdown," seconds remaining")}}function uK(n,e){n&1&&(_(0,"span"),w(1,"Your location has been shared"),v())}function dK(n,e){n&1&&(_(0,"span"),w(1,"Location not available - please share your location manually"),v())}function hK(n,e){if(n&1){let t=pe();_(0,"div",33)(1,"div",48),ne(),_(2,"svg",49),re(3,"polyline",50),v()(),fe(),_(4,"h2",51),w(5,"EMERGENCY RECEIVED"),v(),_(6,"p",52),w(7,"Admin has been notified immediately."),v(),_(8,"p",53),w(9,"Help is on the way. Stay calm and safe."),v(),_(10,"div",54)(11,"div",55),re(12,"div",56),Ee(13,uK,2,0,"span")(14,dK,2,0,"span"),v(),_(15,"div",55),re(16,"div",57),_(17,"span"),w(18,"Emergency services alerted"),v()(),_(19,"div",55),re(20,"div",58),_(21,"span"),w(22,"Admin notified in real-time"),v()()(),_(23,"button",59),J("click",function(){z(t);let r=T(2);return j(r.closeSosOverlay())}),w(24,"Close"),v()()}if(n&2){let t=T(2);C(11),ke("success",t.userLocation)("warning",!t.userLocation),C(2),Ie(t.userLocation?13:14)}}function fK(n,e){if(n&1&&(_(0,"div",31)(1,"div",32),Ee(2,lK,20,4)(3,hK,25,5,"div",33),v()()),n&2){let t=T();ke("sos-success",t.sosSuccess),C(2),Ie(t.sosSuccess?3:2)}}function pK(n,e){if(n&1&&(_(0,"div",98),re(1,"img",99),v()),n&2){let t=T().$implicit;C(),H("src",t.imageUrl,Zt)("alt",t.description)}}function gK(n,e){if(n&1){let t=pe();_(0,"article",63),J("click",function(){let r=z(t).$implicit,o=T(3);return j(o.viewReportDetail(r.id))})("keydown.enter",function(){let r=z(t).$implicit,o=T(3);return j(o.viewReportDetail(r.id))})("keydown.space",function(){let r=z(t).$implicit,o=T(3);return j(o.viewReportDetail(r.id))}),_(1,"div",64),w(2),v(),_(3,"div",65)(4,"div",66)(5,"div",67),ne(),_(6,"svg",68),re(7,"path",69),v()(),fe(),_(8,"div",70)(9,"span",71),w(10),v(),_(11,"span",72),ne(),_(12,"svg",73),re(13,"circle",74)(14,"polyline",75),v(),w(15," Just now "),fe(),_(16,"span",76),w(17,"\u2022"),v(),ne(),_(18,"svg",73),re(19,"path",11)(20,"circle",12),v(),w(21),v()()()(),fe(),_(22,"div",77),te(23,pK,2,2,"div",78),_(24,"p",79),w(25),v()(),_(26,"div",80),ne(),_(27,"svg",81),re(28,"path",11)(29,"circle",12),v(),fe(),_(30,"span"),w(31),v()(),_(32,"div",82)(33,"button",83),J("click",function(r){let o=z(t).$implicit;return T(3).viewReportDetail(o.id),j(r.stopPropagation())}),ne(),_(34,"svg",84),re(35,"path",85)(36,"circle",86),v(),w(37," Details "),v(),fe(),_(38,"div",87)(39,"button",88),J("click",function(r){let o=z(t).$implicit,a=T(3);return j(a.shareReport(r,o))}),ne(),_(40,"svg",89),re(41,"circle",90)(42,"circle",91)(43,"circle",92)(44,"line",93)(45,"line",94),v()(),fe(),_(46,"button",95),J("click",function(r){let o=z(t).$implicit,a=T(3);return j(a.toggleSaveReport(r,o.id))}),ne(),_(47,"svg",96),re(48,"path",97),v()()()()()}if(n&2){let t=e.$implicit,i=e.index,r=T(3);Jc("animation-delay",i*.08+"s"),ke("priority-high",t.priority==="high")("priority-medium",t.priority==="medium")("priority-low",t.priority==="low"||!t.priority),Tt("aria-label","Safety report - "+(t.priority==="high"?"Urgent":t.priority==="medium"?"Alert":"Info")+" priority"),C(),ke("high",t.priority==="high")("medium",t.priority==="medium")("low",t.priority==="low"||!t.priority),C(),be(" ",t.priority==="high"?"URGENT":t.priority==="medium"?"ALERT":"INFO"," "),C(8),ae(t.reporterName||"Anonymous Citizen"),C(11),be(" ",t.barangay," "),C(2),H("ngIf",t.imageUrl),C(2),ae(t.description),C(6),xn("",t.street,", ",t.barangay),C(15),ke("saved",r.isReportSaved(t.id)),Tt("aria-label",r.isReportSaved(t.id)?"Remove from saved reports":"Save this report")("aria-pressed",r.isReportSaved(t.id)),C(),Tt("fill",r.isReportSaved(t.id)?"currentColor":"none")}}function mK(n,e){if(n&1&&(_(0,"div",61),te(1,gK,49,27,"article",62),v()),n&2){let t=T().ngIf;C(),H("ngForOf",t)}}function _K(n,e){n&1&&(_(0,"div",100)(1,"div",101),ne(),_(2,"svg",102),re(3,"path",103)(4,"polyline",104),v()(),fe(),_(5,"h3"),w(6,"All Clear!"),v(),_(7,"p"),w(8,"No safety reports at this time."),re(9,"br"),w(10,"The community is safe. Stay vigilant!"),v()())}function vK(n,e){if(n&1&&(_(0,"div"),te(1,mK,2,1,"div",60)(2,_K,11,0,"ng-template",null,0,It),v()),n&2){let t=e.ngIf,i=dt(3);C(),H("ngIf",t.length>0)("ngIfElse",i)}}var hy=class n{authService=F(un);reportService=F(gn);notificationService=F(es);router=F(Mt);animationService=F(Dr);toastService=F(ei);sosSubscription;currentUser$=this.authService.currentUser$;isAdmin$=this.authService.isAdmin$;savedReports=new Set;SAVED_REPORTS_KEY="mountain_sentinel_saved_reports";citizenReports$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.status==="approved"&&!t.isAdminReport&&t.reporterId!=="ADMIN")));filter$=new bt("all");search$=new bt("");currentFilter="all";filteredReports$=Mi([this.citizenReports$,this.filter$.pipe(Ui("all")),this.search$.pipe(Rh(150),Ui(""))]).pipe(ue(([e,t,i])=>{let r=(i||"").trim().toLowerCase();return e.filter(o=>t&&t!=="all"&&(o.priority||"low")!==t?!1:r?((o.description||"")+" "+(o.reporterName||"")+" "+(o.street||"")+" "+(o.barangay||"")).toLowerCase().indexOf(r)!==-1:!0)}));adminAlerts$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.status==="approved"&&(t.isAdminReport||t.reporterId==="ADMIN"))));approvedReports$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.status==="approved")));sosActive=!1;sosSuccess=!1;sosProgress=0;sosCountdown=5;sosDuration=5;userLocation=null;locationError=null;ngOnInit(){this.loadSavedReports()}loadSavedReports(){try{let e=localStorage.getItem(this.SAVED_REPORTS_KEY);e&&(this.savedReports=new Set(JSON.parse(e)))}catch(e){console.warn("Failed to load saved reports:",e)}}persistSavedReports(){try{localStorage.setItem(this.SAVED_REPORTS_KEY,JSON.stringify([...this.savedReports]))}catch(e){console.warn("Failed to save reports:",e)}}isReportSaved(e){return this.savedReports.has(e)}toggleSaveReport(e,t){e.stopPropagation(),this.savedReports.has(t)?(this.savedReports.delete(t),this.toastService.info("Report removed from saved items")):(this.savedReports.add(t),this.toastService.success("Report saved successfully!")),this.persistSavedReports()}shareReport(e,t){return S(this,null,function*(){e.stopPropagation();let i={title:"Safety Alert - Mountain Sentinel",text:`${t.description}
\u{1F4CD} ${t.street}, ${t.barangay}`,url:`${window.location.origin}/report-detail/${t.id}`};try{navigator.share&&navigator.canShare?.(i)?(yield navigator.share(i),this.toastService.success("Shared successfully!")):(yield navigator.clipboard.writeText(i.url),this.toastService.success("Link copied to clipboard!"))}catch(r){if(r.name!=="AbortError")try{yield navigator.clipboard.writeText(i.url),this.toastService.success("Link copied to clipboard!")}catch{this.toastService.error("Unable to share. Please copy the link manually.")}}})}ngOnDestroy(){this.animationService.destroyScrollObserver(),this.sosSubscription&&this.sosSubscription.unsubscribe()}navigateToReport(){this.router.navigate(["/report"])}viewFullMap(){this.router.navigate(["/map"])}triggerSOS(){this.authService.currentUser$.pipe(Zn(1)).subscribe(e=>{if(!e){this.toastService.warning("Please log in to send an emergency SOS alert."),this.router.navigate(["/login"]);return}this.router.navigate(["/emergency-call"])})}getLocationAsync(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{this.userLocation={lat:e.coords.latitude,lng:e.coords.longitude},console.log("Location obtained:",this.userLocation)},e=>{console.warn("Location error:",e.message),this.locationError=e.message,navigator.geolocation.getCurrentPosition(t=>{this.userLocation={lat:t.coords.latitude,lng:t.coords.longitude},console.log("Location obtained (low accuracy):",this.userLocation)},t=>{console.error("Location failed completely:",t.message)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4})},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}completeSOS(e){this.userLocation?this.sendSOSToAdmin(e,this.userLocation):navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{let i={lat:t.coords.latitude,lng:t.coords.longitude};this.sendSOSToAdmin(e,i)},()=>{console.warn("Could not obtain location for SOS"),this.sendSOSToAdmin(e)},{enableHighAccuracy:!1,timeout:3e3,maximumAge:6e4}):this.sendSOSToAdmin(e)}sendSOSToAdmin(e,t){this.reportService.sendEmergencySOS(e.email||"emergency-user@sos.alert",e.displayName||"Unknown User",t),this.sosSuccess=!0,navigator.vibrate&&navigator.vibrate([200,100,200])}closeSosOverlay(){this.sosActive=!1,this.sosSuccess=!1,this.sosProgress=0,this.sosCountdown=this.sosDuration,this.router.navigate(["/notification"],{queryParams:{sos:"sent"}})}viewReportDetail(e){this.router.navigate(["/report-detail",e])}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}setFilter(e){this.currentFilter=e,this.filter$.next(e)}onSearch(e){this.search$.next(e||"")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-dashboard"]],decls:46,vars:23,consts:[["noReports",""],["role","main","id","main-content",1,"dashboard-container"],["role","alertdialog","aria-modal","true","aria-labelledby","sos-title","aria-describedby","sos-desc",1,"sos-overlay",3,"sos-success"],[1,"dashboard-content"],["aria-label","Quick actions",1,"fab-stack"],["routerLink","/police-reports","aria-label","View Police Issuance Reports","role","button",1,"fab-btn","alerts-fab"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor","aria-hidden","true"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],[1,"fab-label"],["type","button","aria-label","View Incident Map",1,"fab-btn","map-fab",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["type","button","aria-label","Trigger Emergency SOS",1,"fab-btn","sos-fab",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["role","region","aria-labelledby","feed-title",1,"main-feed-layout"],["aria-label","Safety reports feed",1,"feed-column"],[1,"feed-header-bar","scroll-reveal","animate-on-load"],["id","feed-title",1,"feed-title"],["role","search",1,"feed-search"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","search","placeholder","Search...","aria-label","Search reports","id","feed-search-input",3,"input"],["aria-label","Filter reports by priority",1,"feed-nav-filters"],["type","button",1,"nav-filter-btn",3,"click"],["role","feed","aria-busy","false",1,"feed-cards-container"],[4,"ngIf"],["role","alertdialog","aria-modal","true","aria-labelledby","sos-title","aria-describedby","sos-desc",1,"sos-overlay"],[1,"sos-modal","scroll-reveal","animate-on-load"],[1,"sos-success-container"],[1,"sos-sending"],[1,"sos-pulse-ring"],[1,"sos-pulse-ring","delay-1"],[1,"sos-pulse-ring","delay-2"],[1,"sos-icon-large"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["id","sos-title",1,"sos-title"],["id","sos-desc",1,"sos-subtitle"],[1,"sos-location-status"],[1,"location-obtained"],[1,"location-pending"],[1,"sos-progress-bar"],[1,"sos-progress-fill"],[1,"sos-countdown"],[1,"sos-success-icon"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["points","20 6 9 17 4 12"],[1,"sos-title","success"],[1,"sos-subtitle"],[1,"sos-info"],[1,"sos-details"],[1,"sos-detail-item"],[1,"detail-icon","location"],[1,"detail-icon","services"],[1,"detail-icon","admin"],[1,"sos-close-btn",3,"click"],["class","feed-cards","role","list",4,"ngIf","ngIfElse"],["role","list",1,"feed-cards"],["class","feed-card scroll-reveal animate-on-load","tabindex","0","role","listitem",3,"priority-high","priority-medium","priority-low","animation-delay","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["tabindex","0","role","listitem",1,"feed-card","scroll-reveal","animate-on-load",3,"click","keydown.enter","keydown.space"],[1,"priority-ribbon"],[1,"card-header"],[1,"user-info"],[1,"user-avatar"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"user-details"],[1,"user-name"],[1,"post-meta"],["xmlns","http://www.w3.org/2000/svg","width","12","height","12","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["points","12 6 12 12 16 14"],[1,"meta-dot"],[1,"card-content"],["class","card-image",4,"ngIf"],[1,"content-text"],[1,"location-badge"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"card-footer"],["type","button","aria-label","View report details",1,"footer-action","primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],[1,"footer-secondary"],["type","button","aria-label","Share this report",1,"footer-action","icon-only",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],["type","button",1,"footer-action","icon-only",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"],[1,"card-image"],["loading","lazy",3,"src","alt"],[1,"empty-feed"],[1,"empty-icon"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],["points","9 12 12 15 16 10"]],template:function(t,i){t&1&&(_(0,"div",1),Ee(1,fK,4,3,"div",2),_(2,"div",3)(3,"nav",4)(4,"a",5),ne(),_(5,"svg",6),re(6,"path",7),v(),fe(),_(7,"span",8),w(8,"Police Reports"),v()(),_(9,"button",9),J("click",function(){return i.viewFullMap()}),ne(),_(10,"svg",10),re(11,"path",11)(12,"circle",12),v(),fe(),_(13,"span",8),w(14,"Incident Map"),v()(),_(15,"button",13),xe(16,"async"),xe(17,"async"),J("click",function(){return i.triggerSOS()}),ne(),_(18,"svg",14),re(19,"polygon",15)(20,"line",16)(21,"line",17),v(),fe(),_(22,"span",8),w(23,"Emergency SOS"),v()()(),_(24,"main",18)(25,"section",19)(26,"header",20)(27,"h2",21),w(28,"Community Safety Feed"),v(),_(29,"div",22),ne(),_(30,"svg",23),re(31,"circle",24)(32,"line",25),v(),fe(),_(33,"input",26),J("input",function(o){return i.onSearch(o.target.value)}),v()(),_(34,"nav",27)(35,"button",28),J("click",function(){return i.setFilter("all")}),w(36," All "),v(),_(37,"button",28),J("click",function(){return i.setFilter("high")}),w(38," Urgent "),v(),_(39,"button",28),J("click",function(){return i.setFilter("medium")}),w(40," Alerts "),v(),_(41,"button",28),J("click",function(){return i.setFilter("low")}),w(42," Info "),v()()(),_(43,"div",29),te(44,vK,4,2,"div",30),xe(45,"async"),v()()()()()),t&2&&(C(),Ie(i.sosActive?1:-1),C(14),ke("disabled",!Te(16,17,i.currentUser$)),Tt("aria-disabled",!Te(17,19,i.currentUser$)),C(20),ke("active",i.currentFilter==="all"),Tt("aria-pressed",i.currentFilter==="all"),C(2),ke("active",i.currentFilter==="high"),Tt("aria-pressed",i.currentFilter==="high"),C(2),ke("active",i.currentFilter==="medium"),Tt("aria-pressed",i.currentFilter==="medium"),C(2),ke("active",i.currentFilter==="low"),Tt("aria-pressed",i.currentFilter==="low"),C(3),H("ngIf",Te(45,21,i.filteredReports$)))},dependencies:[ht,An,zt,Xr,Gi,ln],styles:['.dashboard-container[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#f5f7fa,#e9ecef);min-height:calc(100vh - 60px);padding:0;font-family:inherit}.dashboard-tabs[_ngcontent-%COMP%]{display:flex;gap:0;margin:0;padding:0 30px;border-bottom:1px solid rgba(0,0,0,.08);background:#fff;overflow-x:auto;box-shadow:0 4px 12px #00000014;-webkit-overflow-scrolling:touch}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{flex:0 0 auto;padding:16px 28px;border:none;background:transparent;color:#666;font-size:13px;font-weight:600;cursor:pointer;border-bottom:3px solid transparent;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;white-space:nowrap;text-transform:uppercase;letter-spacing:.5px;overflow:hidden}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;left:-100%;width:100%;height:3px;background:#1a2a5e;transition:left .4s cubic-bezier(.4,0,.2,1)}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{color:#333;background:#00000005}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:before{left:0}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{color:#1a2a5e;border-bottom-color:#1a2a5e;font-weight:700}.dashboard-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]:before{left:0}.dashboard-content[_ngcontent-%COMP%]{display:block;padding:24px;width:100%;max-width:100%;margin:0 auto;min-height:calc(100vh - 120px);box-sizing:border-box}.fab-stack[_ngcontent-%COMP%]{position:fixed;left:16px;bottom:24px;display:flex;flex-direction:column;gap:14px;z-index:1000;animation:_ngcontent-%COMP%_fabStackSlideIn .6s cubic-bezier(.34,1.56,.64,1) forwards}@keyframes _ngcontent-%COMP%_fabStackSlideIn{0%{opacity:0;transform:translate(-60px)}to{opacity:1;transform:translate(0)}}.fab-btn[_ngcontent-%COMP%]{width:auto;height:52px;border-radius:26px;display:flex;align-items:center;justify-content:flex-start;gap:10px;padding:0 18px 0 14px;cursor:pointer;transition:all .3s cubic-bezier(.175,.885,.32,1.275);border:none;text-decoration:none;position:relative;box-shadow:0 4px 20px #0000001f}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:26px;height:26px;flex-shrink:0}.fab-label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;white-space:nowrap;letter-spacing:.3px}.fab-btn.alerts-fab[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border:2px solid rgba(212,168,75,.5);box-shadow:0 6px 20px #1a2a5e80}.fab-btn.alerts-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;fill:#d4a84b}.fab-btn.alerts-fab[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{color:#fff}.fab-btn.alerts-fab[_ngcontent-%COMP%]:hover{transform:scale(1.05) translate(4px);box-shadow:0 8px 28px #1a2a5e99;border-color:#d4a84b}.fab-btn.map-fab[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#c9a227);border:2px solid rgba(255,255,255,.4);box-shadow:0 6px 20px #d4a84b80}.fab-btn.map-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;stroke:#1a2a5e}.fab-btn.map-fab[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{color:#1a2a5e}.fab-btn.map-fab[_ngcontent-%COMP%]:hover{transform:scale(1.05) translate(4px);box-shadow:0 8px 28px #d4a84b99}.fab-btn.sos-fab[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#8b0000);border:2px solid rgba(255,255,255,.4);box-shadow:0 6px 20px #c41e3a99;animation:_ngcontent-%COMP%_sosHeartbeat 1.5s ease-in-out infinite}.fab-btn.sos-fab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;stroke:#fff}.fab-btn.sos-fab[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{color:#fff}.fab-btn.sos-fab[_ngcontent-%COMP%]:hover{transform:scale(1.08) translate(4px);box-shadow:0 10px 32px #c41e3ab3;animation:none}.fab-btn.sos-fab.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;animation:none}@keyframes _ngcontent-%COMP%_sosHeartbeat{0%,to{transform:scale(1)}15%{transform:scale(1.08)}30%{transform:scale(1)}45%{transform:scale(1.05)}60%{transform:scale(1)}}.main-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 1fr;gap:24px;max-width:1600px;margin:0 auto}.citizen-reports-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 20px #00000014}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid rgba(26,42,94,.1)}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#1a2a5e;font-weight:700;display:flex;align-items:center;gap:10px}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";width:4px;height:22px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:2px}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:6px 0 0;font-size:13px;color:#888}.police-alerts-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:16px;padding:20px;box-shadow:0 4px 20px #1a2a5e4d;height:fit-content;position:sticky;top:24px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.1)}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#d4a84b;font-weight:700;display:flex;align-items:center;gap:8px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:4px 0 0;font-size:11px;color:#fff9}.main-feed-layout[_ngcontent-%COMP%]{display:block;width:100%;max-width:100%;margin:0 auto;padding:0 60px 0 80px}.feed-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%;max-width:100%}.feed-header-bar[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:18px 28px;box-shadow:0 2px 16px #00000014;display:flex;align-items:center;gap:24px;flex-wrap:wrap}.feed-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:800;color:#1a2a5e;white-space:nowrap;letter-spacing:-.5px}.feed-nav-filters[_ngcontent-%COMP%]{display:flex;gap:12px;flex:0 0 auto;align-items:center;margin-left:auto}.nav-filter-btn[_ngcontent-%COMP%]{width:90px!important;height:44px!important;min-width:90px!important;max-width:90px!important;min-height:44px!important;max-height:44px!important;padding:0!important;margin:0!important;border:none;background:#f0f2f5;border-radius:22px;font-size:14px;font-weight:600;color:#555;cursor:pointer;transition:all .2s ease;white-space:nowrap;text-align:center;box-shadow:0 2px 6px #0000000f;display:inline-flex;align-items:center;justify-content:center;line-height:1;box-sizing:border-box}.nav-filter-btn[_ngcontent-%COMP%]:hover{background:#e4e6e9;color:#1a2a5e;transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.nav-filter-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;box-shadow:0 4px 12px #1a2a5e4d}.feed-search[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#f5f7fa;border-radius:20px;padding:8px 14px;min-width:160px;max-width:220px}.feed-search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#999;flex-shrink:0}.feed-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:transparent;font-size:13px;width:100%;color:#333;outline:none}.feed-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa}.feed-section-header[_ngcontent-%COMP%], .feed-controls[_ngcontent-%COMP%]{display:none}.filter-tab.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-color:#1a2a5e;color:#fff}.filter-tab.urgent[_ngcontent-%COMP%]:hover, .filter-tab.urgent.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#8b0000);border-color:#c41e3a;color:#fff}.filter-tab.alert[_ngcontent-%COMP%]:hover, .filter-tab.alert.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#b8860b);border-color:#d4a84b;color:#fff}.filter-tab.info[_ngcontent-%COMP%]:hover, .filter-tab.info.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#1e7e34);border-color:#28a745;color:#fff}.search-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 16px;background:#f8f9fa;border-radius:25px;border:2px solid transparent;transition:all .25s ease;min-width:240px}.search-wrapper[_ngcontent-%COMP%]:focus-within{border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.search-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#888;flex-shrink:0}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{border:none;background:transparent;outline:none;font-size:14px;width:100%;color:#333}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.feed-cards-container[_ngcontent-%COMP%]{min-height:400px;width:100%;display:flex;flex-direction:column}.feed-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:28px;width:100%}.feed-card[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:0;box-shadow:0 4px 24px #00000014;cursor:pointer;transition:all .35s cubic-bezier(.175,.885,.32,1.275);position:relative;overflow:hidden;animation:_ngcontent-%COMP%_cardSlideIn .5s ease forwards;opacity:0;display:flex;flex-direction:column;height:100%;min-height:340px;border:1px solid rgba(0,0,0,.05)}@keyframes _ngcontent-%COMP%_cardSlideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.feed-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 50px #1a2a5e26;border-color:#d4a84b4d}.priority-ribbon[_ngcontent-%COMP%]{position:absolute;top:16px;right:-32px;padding:6px 40px;font-size:10px;font-weight:800;letter-spacing:1px;transform:rotate(45deg);z-index:2}.priority-ribbon.high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#dc3545);color:#fff;box-shadow:0 2px 8px #c41e3a66}.priority-ribbon.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#f0ad4e);color:#1a2a5e;box-shadow:0 2px 8px #d4a84b66}.priority-ribbon.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#5cb85c);color:#fff;box-shadow:0 2px 8px #28a7454d}.card-header[_ngcontent-%COMP%]{padding:28px 32px 4px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.user-avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#e9ecef,#dee2e6);display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative}.user-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px;color:#555}.user-avatar.verified[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;bottom:-2px;right:-2px;width:18px;height:18px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:50%;font-size:10px;color:#fff;display:flex;align-items:center;justify-content:center;border:2px solid white}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.user-name[_ngcontent-%COMP%]{font-weight:700;font-size:17px;color:#1a2a5e}.post-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px;color:#999}.post-meta[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.6}.meta-dot[_ngcontent-%COMP%]{opacity:.4}.card-content[_ngcontent-%COMP%]{padding:20px 32px;flex:1}.card-image[_ngcontent-%COMP%]{width:100%;max-height:240px;overflow:hidden;border-radius:16px;margin-bottom:16px;background:#f0f2f5}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.feed-card[_ngcontent-%COMP%]:hover   .card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.content-text[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:1.8;color:#333;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.location-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;margin:0 32px 20px;padding:14px 20px;background:linear-gradient(135deg,#1a2a5e14,#1a2a5e0a);border-radius:12px;border-left:4px solid #1a2a5e}.location-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;flex-shrink:0}.location-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.card-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 32px;background:linear-gradient(180deg,#f8f9fa,#f1f3f5);border-top:1px solid rgba(0,0,0,.06);margin-top:auto}.footer-action[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 18px;border:none;border-radius:12px;font-size:13px;font-weight:600;cursor:pointer;transition:all .25s ease}.footer-action.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;font-size:13px;padding:10px 18px}.footer-action.primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1a2a5e59}.footer-secondary[_ngcontent-%COMP%]{display:flex;gap:10px}.footer-action.icon-only[_ngcontent-%COMP%]{padding:10px;background:#fff;color:#999;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #00000014}.footer-action.icon-only[_ngcontent-%COMP%]:hover{background:#1a2a5e14;color:#1a2a5e;transform:scale(1.1)}.footer-action.icon-only.saved[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#c9a227);color:#fff}.footer-action.icon-only.shared[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff}.empty-feed[_ngcontent-%COMP%]{text-align:center;padding:80px 40px;background:#fff;border-radius:16px;box-shadow:0 4px 24px #0000000f;width:100%;max-width:100%;min-height:400px;display:flex;flex-direction:column;align-items:center;justify-content:center}.empty-icon[_ngcontent-%COMP%]{width:100px;height:100px;margin:0 auto 20px;background:linear-gradient(135deg,#28a7451a,#28a7450d);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#28a745}.empty-feed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.75rem;color:#1a2a5e;font-weight:700}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;line-height:1.6;font-size:1rem}@media (max-width: 768px){.empty-feed[_ngcontent-%COMP%]{padding:60px 24px;min-height:300px}.empty-icon[_ngcontent-%COMP%]{width:80px;height:80px}.empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px}.empty-feed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}}@media (max-width: 480px){.empty-feed[_ngcontent-%COMP%]{padding:40px 16px;min-height:250px}.empty-icon[_ngcontent-%COMP%]{width:64px;height:64px}.empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px}.empty-feed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem}}.alerts-sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;position:sticky;top:90px;height:fit-content}.sidebar-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:16px;overflow:hidden;box-shadow:0 8px 32px #1a2a5e4d}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:18px 20px;border-bottom:1px solid rgba(255,255,255,.1);background:#00000026}.sidebar-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#d4a84b;font-weight:700;font-size:14px}.sidebar-title[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b}.sidebar-badge[_ngcontent-%COMP%]{padding:4px 10px;background:#d4a84b33;border:1px solid rgba(212,168,75,.4);border-radius:6px;font-size:10px;font-weight:700;color:#d4a84b;letter-spacing:1px}.sidebar-content[_ngcontent-%COMP%]{padding:16px;max-height:400px;overflow-y:auto}.official-alerts-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.official-alert-item[_ngcontent-%COMP%]{background:#ffffff0f;border-radius:12px;padding:16px;cursor:pointer;transition:all .25s ease;border:1px solid rgba(255,255,255,.05)}.official-alert-item[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translate(4px)}.alert-badge-row[_ngcontent-%COMP%]{margin-bottom:10px}.official-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;background:linear-gradient(135deg,#d4a84b40,#d4a84b26);border-radius:6px;font-size:10px;font-weight:700;color:#d4a84b;letter-spacing:.5px}.official-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b}.alert-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px;font-weight:600;color:#fff;line-height:1.5}.alert-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px;color:#fff9;margin-bottom:12px}.alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.7}.alert-priority-tag[_ngcontent-%COMP%]{display:inline-block;padding:5px 12px;border-radius:6px;font-size:10px;font-weight:700;letter-spacing:.5px}.alert-priority-tag.high[_ngcontent-%COMP%]{background:#c41e3a33;color:#ff6b6b}.alert-priority-tag.medium[_ngcontent-%COMP%]{background:#d4a84b33;color:#d4a84b}.alert-priority-tag.low[_ngcontent-%COMP%]{background:#28a74533;color:#5cb85c}.sidebar-empty[_ngcontent-%COMP%]{text-align:center;padding:30px 20px;color:#fff9}.sidebar-empty[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:12px;opacity:.5}.sidebar-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px}.stats-card[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{padding:0}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}.stat-item[_ngcontent-%COMP%]{padding:20px;text-align:center;border-right:1px solid rgba(255,255,255,.08);border-bottom:1px solid rgba(255,255,255,.08)}.stat-item[_ngcontent-%COMP%]:last-child{border-right:none}.stat-value[_ngcontent-%COMP%]{display:block;font-size:28px;font-weight:800;color:#d4a84b;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:11px;color:#fff9;text-transform:uppercase;letter-spacing:.5px}@media (max-width: 1200px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 40px 0 70px}}@media (max-width: 992px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 20px 0 70px}.alerts-sidebar[_ngcontent-%COMP%]{position:relative;top:0;flex-direction:row;flex-wrap:wrap}.sidebar-card[_ngcontent-%COMP%]{flex:1;min-width:280px}}@media (max-width: 768px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 16px 0 70px}.feed-header-bar[_ngcontent-%COMP%]{flex-wrap:wrap;gap:12px;padding:12px 16px}.feed-title[_ngcontent-%COMP%]{font-size:1.1rem;width:100%}.feed-nav-filters[_ngcontent-%COMP%]{flex:none;width:auto}.feed-search[_ngcontent-%COMP%]{flex:1;min-width:120px}.feed-section-header[_ngcontent-%COMP%]{padding:18px 20px}.section-title[_ngcontent-%COMP%]{font-size:1.25rem}.feed-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-tabs[_ngcontent-%COMP%]{justify-content:center}.search-wrapper[_ngcontent-%COMP%]{min-width:100%}.feed-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.feed-card[_ngcontent-%COMP%]{border-radius:20px;min-height:300px}.card-header[_ngcontent-%COMP%]{padding:20px 24px 0}.card-content[_ngcontent-%COMP%]{padding:16px 24px}.location-badge[_ngcontent-%COMP%]{margin:0 24px 16px}.card-footer[_ngcontent-%COMP%]{padding:16px 24px;flex-wrap:wrap;gap:12px}.priority-ribbon[_ngcontent-%COMP%]{top:12px;right:-36px;padding:4px 40px;font-size:9px}.user-avatar[_ngcontent-%COMP%]{width:42px;height:42px}.user-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}}@media (max-width: 480px){.main-feed-layout[_ngcontent-%COMP%]{padding:0 12px 0 60px}.dashboard-content[_ngcontent-%COMP%]{padding:16px 8px}.feed-header-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px;padding:12px 14px}.feed-title[_ngcontent-%COMP%]{font-size:1.1rem}.feed-nav-filters[_ngcontent-%COMP%]{width:100%;overflow-x:auto;padding-bottom:4px;-webkit-overflow-scrolling:touch}.nav-filter-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.feed-search[_ngcontent-%COMP%]{width:100%;max-width:100%}.feed-section-header[_ngcontent-%COMP%]{padding:16px}.section-title-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.filter-tabs[_ngcontent-%COMP%]{width:100%;overflow-x:auto;padding-bottom:8px;-webkit-overflow-scrolling:touch}.filter-tab[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px;white-space:nowrap}.card-header[_ngcontent-%COMP%]{padding:16px 18px 0}.card-content[_ngcontent-%COMP%], .card-footer[_ngcontent-%COMP%]{padding:12px 18px}.location-badge[_ngcontent-%COMP%]{margin-left:18px;margin-right:18px;margin-bottom:12px}.footer-action.primary[_ngcontent-%COMP%]{flex:1;justify-content:center;font-size:12px;padding:8px 12px}.footer-action.icon-only[_ngcontent-%COMP%]{width:40px;height:40px;padding:8px}.feed-cards[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:18px}.feed-card[_ngcontent-%COMP%]{min-height:260px}.alerts-sidebar[_ngcontent-%COMP%]{flex-direction:column}.sidebar-card[_ngcontent-%COMP%]{min-width:100%}}@media (max-width: 1400px){.dashboard-content[_ngcontent-%COMP%]{padding:20px}.main-grid[_ngcontent-%COMP%]{gap:20px}}@media (max-width: 1200px){.dashboard-content[_ngcontent-%COMP%]{padding:16px}.main-grid[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr}.fab-stack[_ngcontent-%COMP%]{left:16px;bottom:20px;gap:10px}.fab-btn[_ngcontent-%COMP%]{height:44px;padding:0 14px 0 12px}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.fab-label[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 992px){.dashboard-content[_ngcontent-%COMP%]{padding:16px}.main-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.police-alerts-section[_ngcontent-%COMP%]{position:relative;top:0}}@media (max-width: 768px){.dashboard-content[_ngcontent-%COMP%]{padding:12px 12px 20px}.fab-stack[_ngcontent-%COMP%]{left:12px;bottom:16px;gap:8px}.fab-btn[_ngcontent-%COMP%]{height:42px;padding:0 12px 0 10px;gap:8px}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.fab-label[_ngcontent-%COMP%]{font-size:11px}.citizen-reports-section[_ngcontent-%COMP%], .police-alerts-section[_ngcontent-%COMP%]{padding:16px;border-radius:12px}.citizen-reports-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.dashboard-content[_ngcontent-%COMP%]{padding:10px 10px 10px 70px}.fab-stack[_ngcontent-%COMP%]{left:10px;bottom:12px;gap:6px}.fab-btn[_ngcontent-%COMP%]{height:38px;padding:0 10px 0 8px;gap:6px;border-radius:19px}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.fab-label[_ngcontent-%COMP%]{font-size:10px}.citizen-reports-section[_ngcontent-%COMP%], .police-alerts-section[_ngcontent-%COMP%]{padding:12px}}.alerts-grid[_ngcontent-%COMP%]{background:transparent;padding:0;border-radius:0;box-shadow:none;border:none;position:relative}.feed-timeline[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;position:relative}.feed-item[_ngcontent-%COMP%]{display:flex;gap:16px;cursor:pointer;padding:0 0 24px;transition:all .3s ease;animation:_ngcontent-%COMP%_feedSlideIn .4s ease forwards;opacity:0}.feed-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.05s}.feed-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.feed-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.15s}.feed-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.2s}.feed-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.25s}@keyframes _ngcontent-%COMP%_feedSlideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.timeline-node[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex-shrink:0;width:24px}.node-dot[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;background:#1a2a5e;border:3px solid white;box-shadow:0 2px 8px #1a2a5e4d;z-index:2;transition:all .3s ease}.node-dot.high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#dc3545);box-shadow:0 2px 12px #c41e3a66;animation:_ngcontent-%COMP%_nodePulse 2s ease-in-out infinite}.node-dot.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b,#f0ad4e);box-shadow:0 2px 8px #d4a84b66}.node-dot.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#5cb85c);box-shadow:0 2px 8px #28a7454d}@keyframes _ngcontent-%COMP%_nodePulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.node-line[_ngcontent-%COMP%]{width:2px;flex-grow:1;background:linear-gradient(to bottom,#1a2a5e33,#1a2a5e0d);margin-top:4px}.feed-item[_ngcontent-%COMP%]:last-child   .node-line[_ngcontent-%COMP%]{display:none}.feed-content[_ngcontent-%COMP%]{flex:1;background:#fff;border-radius:16px;padding:18px 20px;box-shadow:0 2px 12px #0000000f;border:1px solid rgba(26,42,94,.06);transition:all .3s cubic-bezier(.175,.885,.32,1.275);position:relative;overflow:hidden}.feed-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:#1a2a5e;opacity:0;transition:opacity .3s ease}.feed-item.priority-high[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#c41e3a,#dc3545);opacity:1}.feed-item.priority-medium[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#d4a84b,#f0ad4e);opacity:1}.feed-item.priority-low[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#28a745,#5cb85c);opacity:.6}.feed-item[_ngcontent-%COMP%]:hover   .feed-content[_ngcontent-%COMP%]{transform:translate(8px);box-shadow:0 8px 24px #0000001a;border-color:#1a2a5e26}.feed-item[_ngcontent-%COMP%]:hover   .node-dot[_ngcontent-%COMP%]{transform:scale(1.3)}.feed-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.reporter-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#e9ecef,#dee2e6);display:flex;align-items:center;justify-content:center;flex-shrink:0}.reporter-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px;color:#6c757d}.reporter-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;flex:1}.reporter-name[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#1a2a5e}.report-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#888}.report-time[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.6}.priority-tag[_ngcontent-%COMP%]{padding:4px 10px;border-radius:20px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.priority-tag.high[_ngcontent-%COMP%]{background:#c41e3a1a;color:#c41e3a}.priority-tag.medium[_ngcontent-%COMP%]{background:#d4a84b26;color:#b8860b}.priority-tag.low[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.feed-body[_ngcontent-%COMP%]{margin-bottom:12px}.feed-text[_ngcontent-%COMP%]{margin:0;font-size:15px;line-height:1.6;color:#333}.feed-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 12px;background:#1a2a5e0a;border-radius:8px;margin-bottom:12px}.feed-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;flex-shrink:0}.feed-location[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#555}.feed-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding-top:12px;border-top:1px solid rgba(0,0,0,.06)}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease}.action-btn.view-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff}.action-btn.view-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #1a2a5e4d}.action-btn.share-btn[_ngcontent-%COMP%]{background:transparent;color:#888;padding:8px}.action-btn.share-btn[_ngcontent-%COMP%]:hover{background:#0000000d;color:#1a2a5e}@media (max-width: 768px){.feed-item[_ngcontent-%COMP%]{gap:12px}.timeline-node[_ngcontent-%COMP%]{width:20px}.node-dot[_ngcontent-%COMP%]{width:12px;height:12px}.feed-content[_ngcontent-%COMP%]{padding:14px 16px;border-radius:12px}.reporter-avatar[_ngcontent-%COMP%]{width:36px;height:36px}.reporter-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.priority-tag[_ngcontent-%COMP%]{padding:3px 8px;font-size:10px}.feed-text[_ngcontent-%COMP%]{font-size:14px}.feed-actions[_ngcontent-%COMP%]{flex-wrap:wrap}}@media (max-width: 480px){.feed-header[_ngcontent-%COMP%]{flex-wrap:wrap}.priority-tag[_ngcontent-%COMP%]{order:-1;width:100%;text-align:center;margin-bottom:8px}.feed-content[_ngcontent-%COMP%]{padding:12px 14px}.action-btn.view-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}}.alerts-controls[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-bottom:24px;background:#fff;padding:12px 16px;border-radius:12px;box-shadow:0 2px 12px #0000000f;position:relative;z-index:1}.alerts-controls[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{padding:10px 14px;border-radius:10px;border:1px solid rgba(26,42,94,.15);background:#fff;font-weight:600;color:#1a2a5e;cursor:pointer;transition:all .3s ease}.alerts-controls[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:hover{border-color:#1a2a5e}.alerts-controls[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1 1 auto;padding:10px 16px;border-radius:10px;border:1px solid rgba(26,42,94,.15);background:#fafafa;font-size:14px;transition:all .3s ease}.alerts-controls[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.alerts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;position:relative;z-index:1}@media (max-width: 768px){.alerts-container[_ngcontent-%COMP%]{gap:0}}.alert-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;background:#fff;border-radius:12px;overflow:visible;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 12px #0000000f;border:1px solid rgba(26,42,94,.08);position:relative;animation:_ngcontent-%COMP%_feedSlideIn .5s cubic-bezier(.4,0,.2,1) backwards;min-height:auto;margin-left:40px;margin-bottom:20px;padding:0}.alert-card[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-28px;top:20px;width:12px;height:12px;border-radius:50%;background:#d4a84b;border:3px solid #fff;box-shadow:0 2px 8px #d4a84b66;z-index:2}.alert-card.priority-high[_ngcontent-%COMP%]:before{background:#dc3545;box-shadow:0 2px 8px #dc354566}.alert-card.priority-medium[_ngcontent-%COMP%]:before{background:#fd7e14;box-shadow:0 2px 8px #fd7e1466}.alert-card.priority-low[_ngcontent-%COMP%]:before{background:#28a745;box-shadow:0 2px 8px #28a74566}@media (max-width: 768px){.alert-card[_ngcontent-%COMP%]{margin-left:32px}.alert-card[_ngcontent-%COMP%]:before{left:-24px;width:10px;height:10px}}.alert-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.05s}.alert-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.alert-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.15s}.alert-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.2s}.alert-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.25s}.alert-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.3s}.alert-card[_ngcontent-%COMP%]:nth-child(n+7){animation-delay:.35s}@keyframes _ngcontent-%COMP%_feedSlideIn{0%{opacity:0;transform:translate(-30px)}to{opacity:1;transform:translate(0)}}.alert-card[_ngcontent-%COMP%]:hover{transform:translate(8px);box-shadow:0 8px 24px #1a2a5e1f;border-color:#1a2a5e26}.alert-card.priority-high[_ngcontent-%COMP%]{border-left:4px solid #dc3545;border-top:none}.alert-card.priority-medium[_ngcontent-%COMP%]{border-left:4px solid #fd7e14;border-top:none}.alert-card.priority-low[_ngcontent-%COMP%]{border-left:4px solid #28a745;border-top:none}.priority-badge[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:16px;font-size:.6rem;font-weight:700;letter-spacing:.4px;text-transform:uppercase;z-index:2}.priority-badge.high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;box-shadow:0 2px 8px #dc354559}.priority-badge.medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fd7e14,#e76f00);color:#fff;box-shadow:0 2px 8px #fd7e1459}.priority-badge.low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#218838);color:#fff;box-shadow:0 2px 8px #28a74559}.priority-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.card-body[_ngcontent-%COMP%]{flex:1;padding:16px 18px;display:flex;flex-direction:column;gap:8px}.alert-title[_ngcontent-%COMP%]{margin:0;font-size:.95rem;font-weight:700;color:#1a2a5e;line-height:1.4;padding-right:70px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.alert-location[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:5px;color:#777;font-size:.8rem;line-height:1.4}.alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;flex-shrink:0;margin-top:2px;width:14px;height:14px}.alert-location[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.alert-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:4px;padding-top:10px;border-top:1px solid rgba(0,0,0,.05);flex-wrap:wrap}.alert-meta[_ngcontent-%COMP%]   .reporter[_ngcontent-%COMP%], .alert-meta[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.75rem;color:#999}.alert-meta[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#bbb;width:11px;height:11px}.card-arrow[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;padding:10px 16px;background:transparent;color:#d4a84b;transition:all .3s ease;font-size:.75rem;font-weight:700;gap:4px;border-top:1px solid rgba(0,0,0,.05)}.card-arrow[_ngcontent-%COMP%]:before{content:"Read More"}.alert-card[_ngcontent-%COMP%]:hover   .card-arrow[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e0f,#1a2a5e1a);color:#1a2a5e}.alert-card[_ngcontent-%COMP%]:hover   .card-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:translate(4px)}.card-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform .3s ease;width:16px;height:16px}.no-alerts[_ngcontent-%COMP%]{text-align:center;padding:80px 40px;color:#666;background:#fff;border-radius:16px;box-shadow:0 4px 16px #00000014;grid-column:1 / -1}.no-alerts-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 20px;background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-radius:50%;display:flex;align-items:center;justify-content:center}.no-alerts-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#4caf50}.no-alerts[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.3rem;color:#333;font-weight:600}.no-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:#777}@media (max-width: 768px){.alerts-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.alerts-controls[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%], .alerts-controls[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%}.alert-card[_ngcontent-%COMP%]{min-height:160px}.priority-badge[_ngcontent-%COMP%]{top:12px;right:12px;padding:4px 10px;font-size:.6rem}.card-body[_ngcontent-%COMP%]{padding:14px 16px}.alert-title[_ngcontent-%COMP%]{font-size:.95rem;padding-right:70px}.alert-location[_ngcontent-%COMP%]{font-size:.8rem}.card-arrow[_ngcontent-%COMP%]{padding:10px 16px;font-size:.75rem}}.map-preview[_ngcontent-%COMP%]{display:none;position:relative;width:100%;border-radius:12px;overflow:hidden;cursor:pointer;transition:all .3s ease}.map-preview[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.map-preview[_ngcontent-%COMP%]:hover   .map-overlay[_ngcontent-%COMP%]{opacity:1}.map-illustration[_ngcontent-%COMP%]{width:100%;height:180px;background:linear-gradient(135deg,#e3f2fd,#bbdefb);display:flex;align-items:center;justify-content:center}.map-illustration[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.map-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#1a3a52b3;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;opacity:0;transition:opacity .3s ease;color:#fff}.map-overlay[_ngcontent-%COMP%]   .map-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center}.map-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.map-legend[_ngcontent-%COMP%]{display:none;justify-content:center;gap:20px;padding:10px 0;border-top:1px solid rgba(0,0,0,.06);border-bottom:1px solid rgba(0,0,0,.06)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.8rem;color:#666}.legend-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.legend-dot.high[_ngcontent-%COMP%]{background:#dc3545;box-shadow:0 0 0 3px #dc354533}.legend-dot.medium[_ngcontent-%COMP%]{background:#fd7e14;box-shadow:0 0 0 3px #fd7e1433}.legend-dot.low[_ngcontent-%COMP%]{background:#28a745;box-shadow:0 0 0 3px #28a74533}.sos-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#1a3a52f7,#142d41fa);display:flex;align-items:center;justify-content:center;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .3s ease;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.sos-overlay.sos-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a3a52f7,#142d41fa)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sos-modal[_ngcontent-%COMP%]{text-align:center;padding:50px 40px;max-width:480px;width:90%;background:#ffffff0d;border-radius:20px;border:1px solid rgba(255,255,255,.1);box-shadow:0 25px 50px #0000004d}.sos-sending[_ngcontent-%COMP%]{position:relative;width:140px;height:140px;margin:0 auto 35px}.sos-pulse-ring[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;border:3px solid rgba(220,53,69,.6);animation:_ngcontent-%COMP%_pulseRing 1.5s ease-out infinite}.sos-pulse-ring.delay-1[_ngcontent-%COMP%]{animation-delay:.5s}.sos-pulse-ring.delay-2[_ngcontent-%COMP%]{animation-delay:1s}@keyframes _ngcontent-%COMP%_pulseRing{0%{transform:scale(.5);opacity:1}to{transform:scale(1.8);opacity:0}}.sos-icon-large[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:linear-gradient(135deg,#dc3545,#c82333);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 0 40px #dc354580;animation:_ngcontent-%COMP%_iconGlow 1s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_iconGlow{0%{box-shadow:0 0 30px #dc354566}to{box-shadow:0 0 50px #dc3545b3}}.sos-title[_ngcontent-%COMP%]{font-size:26px;color:#fff;margin:0 0 12px;font-weight:700;letter-spacing:2px;text-transform:uppercase}.sos-title.success[_ngcontent-%COMP%]{color:#2ecc71}.sos-subtitle[_ngcontent-%COMP%]{font-size:15px;color:#ffffffb3;margin:0 0 25px;font-weight:400}.sos-info[_ngcontent-%COMP%]{font-size:14px;color:#fff9;margin:0 0 30px}.sos-countdown[_ngcontent-%COMP%]{font-size:14px;color:#fff9;margin:20px 0 0;font-weight:500}.sos-location-status[_ngcontent-%COMP%]{margin-bottom:20px;padding:8px 16px;border-radius:20px;font-size:13px;font-weight:500;display:inline-block}.sos-location-status[_ngcontent-%COMP%]   .location-pending[_ngcontent-%COMP%]{color:#ffffffb3;animation:_ngcontent-%COMP%_blink 1.5s ease-in-out infinite}.sos-location-status[_ngcontent-%COMP%]   .location-obtained[_ngcontent-%COMP%]{color:#2ecc71;font-weight:600}.sos-location-status[_ngcontent-%COMP%]   .location-obtained[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:8px;height:8px;background:#2ecc71;border-radius:50%;margin-right:8px;animation:pulse 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.5}}.sos-modal[_ngcontent-%COMP%]   .sos-progress-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:#ffffff26;border-radius:3px;overflow:hidden;margin:0}.sos-modal[_ngcontent-%COMP%]   .sos-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#dc3545,#e74c3c);border-radius:3px;transition:width .1s linear}.sos-success-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease}.sos-success-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#27ae60,#2ecc71);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 25px;color:#fff;box-shadow:0 10px 30px #27ae604d;animation:_ngcontent-%COMP%_successPop .5s ease}@keyframes _ngcontent-%COMP%_successPop{0%{transform:scale(0);opacity:0}50%{transform:scale(1.1)}to{transform:scale(1);opacity:1}}.sos-details[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:12px;padding:20px;margin:25px 0;border:1px solid rgba(255,255,255,.08)}.sos-detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 0;color:#ffffffd9;font-size:14px;font-weight:500}.sos-detail-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(255,255,255,.08)}.sos-detail-item.success[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#2ecc71f2}.sos-detail-item.warning[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e74c3ce6}.detail-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.detail-icon.location[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)}.detail-icon.location[_ngcontent-%COMP%]:before{content:"";width:12px;height:12px;background:#fff;border-radius:50%;box-shadow:0 0 0 3px #ffffff4d}.detail-icon.services[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e67e22,#d35400)}.detail-icon.services[_ngcontent-%COMP%]:before{content:"";width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:10px solid white}.detail-icon.admin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b6,#8e44ad)}.detail-icon.admin[_ngcontent-%COMP%]:before{content:"";width:10px;height:10px;background:#fff;border-radius:50%;position:relative}.detail-icon.admin[_ngcontent-%COMP%]:after{content:"";position:absolute;width:16px;height:8px;background:#fff;border-radius:0 0 8px 8px;margin-top:6px;margin-left:-3px}.sos-close-btn[_ngcontent-%COMP%]{margin-top:10px;padding:14px 50px;font-size:14px;background:linear-gradient(135deg,#1a3a52,#2a5a7a);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;text-transform:uppercase;font-weight:600;letter-spacing:1px}.sos-close-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #1a3a5266}@media (max-width: 768px){.sos-modal[_ngcontent-%COMP%]{padding:40px 25px}.sos-sending[_ngcontent-%COMP%]{width:120px;height:120px}.sos-icon-large[_ngcontent-%COMP%]{width:65px;height:65px}.sos-icon-large[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.sos-title[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1px}.sos-close-btn[_ngcontent-%COMP%]{padding:12px 40px}}@media (max-width: 480px){.sos-modal[_ngcontent-%COMP%]{padding:30px 20px;margin:15px;width:calc(100% - 30px)}.sos-sending[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:25px}.sos-icon-large[_ngcontent-%COMP%]{width:55px;height:55px}.sos-icon-large[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.sos-title[_ngcontent-%COMP%]{font-size:18px}.sos-subtitle[_ngcontent-%COMP%]{font-size:14px}.sos-success-icon[_ngcontent-%COMP%]{width:65px;height:65px}.sos-success-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px}.sos-details[_ngcontent-%COMP%]{padding:15px}.sos-detail-item[_ngcontent-%COMP%]{font-size:13px}}.police-alerts-wrapper[_ngcontent-%COMP%]{margin-top:30px}.police-alerts-section[_ngcontent-%COMP%]{margin-top:0}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:22px;color:#1a2a5e;font-weight:700;display:flex;align-items:center;gap:10px}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e}.police-alerts-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:4px 0 0;font-size:12px;color:#666;font-weight:400}.police-alerts-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-height:calc(100vh - 250px);overflow-y:auto;padding-right:4px}.police-alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.police-alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}.police-alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d4a84b80;border-radius:4px}@media (max-width: 992px){.police-alerts-container[_ngcontent-%COMP%]{max-height:400px}}.police-alert-card[_ngcontent-%COMP%]{background:#ffffff14;border-radius:12px;padding:14px;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;border:1px solid rgba(255,255,255,.1)}.police-alert-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:3px;height:100%;background:#d4a84b;transition:width .3s ease}.police-alert-card[_ngcontent-%COMP%]:hover{background:#ffffff1f;transform:translate(4px)}.police-alert-card[_ngcontent-%COMP%]:hover:before{width:5px}.police-alert-card.priority-high[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#dc3545,#c41e3a)}.police-alert-card.priority-medium[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#fd7e14,#e67e22)}.police-alert-card.priority-low[_ngcontent-%COMP%]:before{background:linear-gradient(to bottom,#28a745,#20c997)}.police-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:#d4a84b33;padding:3px 8px;border-radius:10px;margin-bottom:8px}.police-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;width:12px;height:12px}.police-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:9px;font-weight:700;color:#d4a84b;letter-spacing:.8px}.police-alert-title[_ngcontent-%COMP%]{margin:0 0 6px;font-size:13px;font-weight:600;color:#fff;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.police-alert-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;color:#ffffffa6;font-size:11px;margin-bottom:8px}.police-alert-location[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;opacity:.7;width:12px;height:12px}.police-alert-priority[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:8px;font-size:9px;font-weight:700;letter-spacing:.4px}.police-alert-priority.high[_ngcontent-%COMP%]{background:#dc354540;color:#ff8a8a}.police-alert-priority.medium[_ngcontent-%COMP%]{background:#fd7e1440;color:#ffb366}.police-alert-priority.low[_ngcontent-%COMP%]{background:#28a74540;color:#7ce08a}.no-police-alerts[_ngcontent-%COMP%]{text-align:center;padding:24px 16px;background:#ffffff0d;border-radius:12px;color:#fff9}.no-police-alerts[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b80;margin-bottom:8px}.no-police-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px}.no-police-alerts[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#28a745;margin-bottom:10px}.no-police-alerts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#777}@media (max-width: 768px){.police-alerts-section[_ngcontent-%COMP%]{margin-top:20px}.police-alert-card[_ngcontent-%COMP%]{padding:14px}.police-alert-title[_ngcontent-%COMP%]{font-size:.9rem}.police-alert-location[_ngcontent-%COMP%]{font-size:.75rem}}.fab-btn[_ngcontent-%COMP%]:focus-visible, .nav-filter-btn[_ngcontent-%COMP%]:focus-visible, .footer-action[_ngcontent-%COMP%]:focus-visible, .feed-card[_ngcontent-%COMP%]:focus-visible{outline:3px solid var(--wcag-focus-color, #4a90d9);outline-offset:2px}.fab-btn[_ngcontent-%COMP%]{min-width:44px;min-height:44px}.nav-filter-btn[_ngcontent-%COMP%]{min-height:44px;padding:12px 16px}.footer-action[_ngcontent-%COMP%]{min-width:44px;min-height:44px}@media (prefers-contrast: high){.feed-card[_ngcontent-%COMP%]{border:2px solid #000}.priority-ribbon[_ngcontent-%COMP%]{border:1px solid currentColor}.nav-filter-btn.active[_ngcontent-%COMP%]{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){.fab-stack[_ngcontent-%COMP%], .feed-card[_ngcontent-%COMP%], .scroll-reveal[_ngcontent-%COMP%], .animate-on-load[_ngcontent-%COMP%], .sos-pulse-ring[_ngcontent-%COMP%]{animation:none!important;transition-duration:.01ms!important}}@media print{.fab-stack[_ngcontent-%COMP%], .sos-overlay[_ngcontent-%COMP%]{display:none!important}.feed-card[_ngcontent-%COMP%]{break-inside:avoid;page-break-inside:avoid;border:1px solid #000;box-shadow:none}.dashboard-container[_ngcontent-%COMP%]{background:#fff}}',"@media (max-width: 768px){.fab-stack[_ngcontent-%COMP%]{left:10px!important;bottom:16px!important;gap:10px!important}.fab-btn[_ngcontent-%COMP%]{height:42px!important;border-radius:21px!important;padding:0 14px 0 10px!important;gap:8px!important;box-shadow:0 3px 15px #0000001a!important}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px!important;height:22px!important}.fab-label[_ngcontent-%COMP%]{font-size:11px!important;letter-spacing:.2px!important}}@media (max-width: 480px){.fab-stack[_ngcontent-%COMP%]{left:8px!important;bottom:12px!important;gap:8px!important}.fab-btn[_ngcontent-%COMP%]{height:38px!important;border-radius:19px!important;padding:0 12px 0 8px!important;gap:6px!important;box-shadow:0 2px 12px #00000014!important}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:19px!important;height:19px!important}.fab-label[_ngcontent-%COMP%]{font-size:10px!important;letter-spacing:.1px!important}}@media (max-width: 375px){.fab-stack[_ngcontent-%COMP%]{left:6px!important;bottom:10px!important;gap:6px!important}.fab-btn[_ngcontent-%COMP%]{height:34px!important;border-radius:17px!important;padding:0 10px 0 6px!important;gap:5px!important}.fab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:17px!important;height:17px!important}.fab-label[_ngcontent-%COMP%]{font-size:9px!important;letter-spacing:0px!important}}"]})};var i3=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(De(wr),De(fi))};static \u0275dir=qt({type:n})}return n})(),pP=(()=>{class n extends i3{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Oo(n)))(r||n)}})();static \u0275dir=qt({type:n,features:[rr]})}return n})(),xy=new _e("");var yK={provide:xy,useExisting:mr(()=>bi),multi:!0};function bK(){let n=Cr()?Cr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var xK=new _e(""),bi=(()=>{class n extends i3{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!bK())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(De(wr),De(fi),De(xK,8))};static \u0275dir=qt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&J("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[Ss([yK]),rr]})}return n})();function wK(n){return n==null||r3(n)===0}function r3(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var wy=new _e(""),o3=new _e("");function CK(n){return wK(n.value)?{required:!0}:null}function EK(n){return e=>{let t=e.value?.length??r3(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function K4(n){return null}function s3(n){return n!=null}function a3(n){return Ms(n)?Nt(n):n}function c3(n){let e={};return n.forEach(t=>{e=t!=null?X(X({},e),t):e}),Object.keys(e).length===0?null:e}function l3(n,e){return e.map(t=>t(n))}function IK(n){return!n.validate}function u3(n){return n.map(e=>IK(e)?e:t=>e.validate(t))}function MK(n){if(!n)return null;let e=n.filter(s3);return e.length==0?null:function(t){return c3(l3(t,e))}}function gP(n){return n!=null?MK(u3(n)):null}function PK(n){if(!n)return null;let e=n.filter(s3);return e.length==0?null:function(t){let i=l3(t,e).map(a3);return bb(i).pipe(ue(c3))}}function mP(n){return n!=null?PK(u3(n)):null}function Z4(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function SK(n){return n._rawValidators}function TK(n){return n._rawAsyncValidators}function hP(n){return n?Array.isArray(n)?n:[n]:[]}function py(n,e){return Array.isArray(n)?n.includes(e):n===e}function Y4(n,e){let t=hP(e);return hP(n).forEach(r=>{py(t,r)||t.push(r)}),t}function Q4(n,e){return hP(e).filter(t=>!py(n,t))}var gy=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Bd=class extends gy{name;get formDirective(){return null}get path(){return null}},Hp=class extends gy{_parent=null;name=null;valueAccessor=null},my=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},OK={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},f1e=ye(X({},OK),{"[class.ng-submitted]":"isSubmitted"}),Wi=(()=>{class n extends my{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(De(Hp,2))};static \u0275dir=qt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&ke("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[rr]})}return n})(),Ud=(()=>{class n extends my{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(De(Bd,10))};static \u0275dir=qt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&ke("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[rr]})}return n})();var Vp="VALID",fy="INVALID",Fd="PENDING",Bp="DISABLED",oc=class{},_y=class extends oc{value;source;constructor(e,t){super(),this.value=e,this.source=t}},zp=class extends oc{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},jp=class extends oc{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Vd=class extends oc{status;source;constructor(e,t){super(),this.status=e,this.source=t}},fP=class extends oc{source;constructor(e){super(),this.source=e}},vy=class extends oc{source;constructor(e){super(),this.source=e}};function d3(n){return(Cy(n)?n.validators:n)||null}function DK(n){return Array.isArray(n)?gP(n):n||null}function h3(n,e){return(Cy(e)?e.asyncValidators:n)||null}function AK(n){return Array.isArray(n)?mP(n):n||null}function Cy(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function kK(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new le(1e3,"");if(!i[t])throw new le(1001,"")}function RK(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new le(1002,"")})}var yy=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return On(this.statusReactive)}set status(e){On(()=>this.statusReactive.set(e))}_status=Da(()=>this.statusReactive());statusReactive=Ut(void 0);get valid(){return this.status===Vp}get invalid(){return this.status===fy}get pending(){return this.status==Fd}get disabled(){return this.status===Bp}get enabled(){return this.status!==Bp}errors;get pristine(){return On(this.pristineReactive)}set pristine(e){On(()=>this.pristineReactive.set(e))}_pristine=Da(()=>this.pristineReactive());pristineReactive=Ut(!0);get dirty(){return!this.pristine}get touched(){return On(this.touchedReactive)}set touched(e){On(()=>this.touchedReactive.set(e))}_touched=Da(()=>this.touchedReactive());touchedReactive=Ut(!1);get untouched(){return!this.touched}_events=new Jt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Y4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Y4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Q4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Q4(e,this._rawAsyncValidators))}hasValidator(e){return py(this._rawValidators,e)}hasAsyncValidator(e){return py(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye(X({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new jp(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new jp(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye(X({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new zp(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new zp(!0,i))}markAsPending(e={}){this.status=Fd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye(X({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bp,this.errors=null,this._forEachChild(r=>{r.disable(ye(X({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _y(this.value,i)),this._events.next(new Vd(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(X({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vp,this._forEachChild(i=>{i.enable(ye(X({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(X({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vp||this.status===Fd)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _y(this.value,t)),this._events.next(new Vd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye(X({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bp:Vp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Fd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=a3(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Vd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new an,this.statusChanges=new an}_calculateStatus(){return this._allControlsDisabled()?Bp:this.errors?fy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fd)?Fd:this._anyControlsHaveStatus(fy)?fy:Vp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new zp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new jp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cy(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=DK(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=AK(this._rawAsyncValidators)}},by=class extends yy{constructor(e,t,i){super(d3(t),h3(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){RK(this,!0,e),Object.keys(e).forEach(i=>{kK(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new vy(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var _P=new _e("",{providedIn:"root",factory:()=>vP}),vP="always";function NK(n,e){return[...e.path,n]}function f3(n,e,t=vP){p3(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),FK(n,e),BK(n,e),VK(n,e),LK(n,e)}function J4(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LK(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function p3(n,e){let t=SK(n);e.validator!==null?n.setValidators(Z4(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=TK(n);e.asyncValidator!==null?n.setAsyncValidators(Z4(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();J4(e._rawValidators,r),J4(e._rawAsyncValidators,r)}function FK(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&g3(n,e)})}function VK(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&g3(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function g3(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function BK(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function UK(n,e){n==null,p3(n,e)}function zK(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function jK(n){return Object.getPrototypeOf(n.constructor)===pP}function HK(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function $K(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===bi?t=o:jK(o)?i=o:r=o}),r||i||t||null}var GK={provide:Bd,useExisting:mr(()=>Sl)},Up=Promise.resolve(),Sl=(()=>{class n extends Bd{callSetDisabledState;get submitted(){return On(this.submittedReactive)}_submitted=Da(()=>this.submittedReactive());submittedReactive=Ut(!1);_directives=new Set;form;ngSubmit=new an;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new by({},gP(t),mP(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Up.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),f3(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Up.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Up.then(()=>{let i=this._findContainer(t.path),r=new by({});UK(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Up.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Up.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),HK(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new fP(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(De(wy,10),De(o3,10),De(_P,8))};static \u0275dir=qt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&J("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ss([GK]),rr]})}return n})();function X4(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function e3(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qK=class extends yy{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(d3(t),h3(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(e3(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new vy(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){X4(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){X4(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){e3(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var WK={provide:Hp,useExisting:mr(()=>Ri)},t3=Promise.resolve(),Ri=(()=>{class n extends Hp{_changeDetectorRef;callSetDisabledState;control=new qK;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new an;constructor(t,i,r,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=$K(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),zK(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){f3(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){t3.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Aa(i);t3.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?NK(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(De(Bd,9),De(wy,10),De(o3,10),De(xy,10),De(ko,8),De(_P,8))};static \u0275dir=qt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ss([WK]),rr,To]})}return n})();var zd=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var KK={provide:xy,useExisting:mr(()=>ts),multi:!0};function m3(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function ZK(n){return n.split(":")[0]}var ts=(()=>{class n extends pP{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=F(Ps).injector;destroyRef=F(Gr);cdr=F(ko);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,uf({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=m3(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=ZK(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Oo(n)))(r||n)}})();static \u0275dir=qt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&J("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ss([KK]),rr]})}return n})(),sc=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(m3(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(De(fi),De(wr),De(ts,9))};static \u0275dir=qt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),YK={provide:xy,useExisting:mr(()=>_3),multi:!0};function n3(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function QK(n){return n.split(":")[0]}var _3=(()=>{class n extends pP{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let l=0;l<a.length;l++){let u=a[l],f=this._getOptionValue(u.value);r.push(f)}}else{let a=i.options;for(let l=0;l<a.length;l++){let u=a[l];if(u.selected){let f=this._getOptionValue(u.value);r.push(f)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=QK(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Oo(n)))(r||n)}})();static \u0275dir=qt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&J("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ss([YK]),rr]})}return n})(),ac=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(n3(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(n3(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(De(fi),De(wr),De(_3,9))};static \u0275dir=qt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function JK(n){return typeof n=="number"?n:parseInt(n,10)}var v3=(()=>{class n{_validator=K4;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):K4,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=qt({type:n,features:[To]})}return n})();var XK={provide:wy,useExisting:mr(()=>Tl),multi:!0};var Tl=(()=>{class n extends v3{required;inputName="required";normalizeInput=Aa;createValidator=t=>CK;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Oo(n)))(r||n)}})();static \u0275dir=qt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Tt("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ss([XK]),rr]})}return n})();var eZ={provide:wy,useExisting:mr(()=>yP),multi:!0},yP=(()=>{class n extends v3{minlength;inputName="minlength";normalizeInput=t=>JK(t);createValidator=t=>EK(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=Oo(n)))(r||n)}})();static \u0275dir=qt({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Tt("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[Ss([eZ]),rr]})}return n})();var tZ=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ao({type:n});static \u0275inj=zr({})}return n})();var mn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_P,useValue:t.callSetDisabledState??vP}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ao({type:n});static \u0275inj=zr({imports:[tZ]})}return n})();var Vn=oS(bP());var Ki={"A. Bonifacio-Caguioa-Rimando (ABCR)":[16.4142,120.5947],"Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)":[16.4153,120.5934],"Alfonso Tabora":[16.4234,120.5969],Ambiong:[16.4288,120.6081],"Andres Bonifacio (Lower Bokawkan)":[16.4174,120.5856],"Apugan-Loakan":[16.3828,120.6175],"Asin Road":[16.4046,120.5636],"Atok Trail":[16.3792,120.6307],"Aurora Hill Proper (Malvar-Sgt. Floresca)":[16.4245,120.603],"Aurora Hill, North Central":[16.4278,120.6042],"Aurora Hill, South Central":[16.4254,120.6069],"Bagong Lipunan (Market Area)":[16.4153,120.596],"Baguio Dairy Farm":[16.382,120.5694],"Bakakeng Central":[16.3908,120.5839],"Bakakeng North":[16.3969,120.5878],"Bal-Marcoville (Marcoville)":[16.4089,120.6017],Balsigan:[16.4047,120.5889],"Bayan Park East":[16.4278,120.6125],"Bayan Park Village":[16.4264,120.6108],"Bayan Park West (Bayan Park)":[16.4267,120.6083],"BGH Compound":[16.4008,120.5922],Brookside:[16.4225,120.6058],Brookspoint:[16.4258,120.6153],"Cabinet Hill-Teacher's Camp":[16.4158,120.6067],"Camdas Subdivision":[16.4272,120.5975],"Camp 7":[16.3769,120.5939],"Camp 8":[16.3917,120.5967],"Camp Allen":[16.4147,120.5892],"Campo Filipino":[16.4169,120.5861],"City Camp Central":[16.4117,120.5869],"City Camp Proper":[16.4108,120.5858],"Country Club Village":[16.41,120.6189],"Cresencia Village":[16.4142,120.5867],Dagisitan:[16.4269,120.5986],"Dagsian, Lower":[16.3986,120.6028],"Dagsian, Upper":[16.4011,120.6025],"Dizon Subdivision":[16.4286,120.5989],"Dominican Hill-Mirador":[16.4097,120.5794],Dontogan:[16.3758,120.5736],"DPS Area":[16.4039,120.5986],"Engineers' Hill":[16.4111,120.6011],"Fairview Village":[16.4128,120.5819],"Ferdinand (Happy Homes-Campo Sioco)":[16.4061,120.5869],"Fort del Pilar":[16.3886,120.6192],"Gabriel Silang":[16.4006,120.6053],"General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)":[16.4239,120.5919],"General Luna, Lower":[16.4136,120.5997],"General Luna, Upper":[16.415,120.6014],Gibraltar:[16.4183,120.6278],"Greenwater Village":[16.4056,120.6083],"Guisad Central":[16.4217,120.5839],"Guisad Sorong":[16.425,120.5819],"Happy Hollow":[16.4036,120.6306],"Happy Homes (Happy Homes-Lucban)":[16.4239,120.5936],"Harrison-Claudio Carantes":[16.4131,120.5956],Hillside:[16.3981,120.605],"Holy Ghost Extension":[16.4189,120.5994],"Holy Ghost Proper":[16.4172,120.5969],"Honeymoon (Honeymoon-Holy Ghost)":[16.4206,120.5947],"Imelda R. Marcos (La Salle)":[16.4083,120.6014],"Imelda Village":[16.4167,120.6056],Irisan:[16.4083,120.5606],Kabayanihan:[16.4144,120.5931],Kagitingan:[16.4156,120.5908],"Kayang Extension":[16.4167,120.5925],"Kayang-Hilltop":[16.4161,120.5942],Kias:[16.3667,120.6233],"Legarda-Burnham-Kisad":[16.4111,120.5917],"Liwanag-Loakan":[16.3889,120.6125],"Loakan Proper":[16.3833,120.6167],"Lopez Jaena":[16.4183,120.6011],"Lourdes Subdivision Extension":[16.4089,120.585],"Lourdes Subdivision, Lower":[16.4097,120.5883],"Lourdes Subdivision, Proper":[16.4086,120.5869],Lualhati:[16.4136,120.615],Lucnab:[16.4133,120.6308],"Magsaysay Private Road":[16.4192,120.5964],"Magsaysay, Lower":[16.4208,120.5947],"Magsaysay, Upper":[16.4222,120.5958],"Malcolm Square-Perfecto (Jose Abad Santos)":[16.415,120.5958],"Manuel A. Roxas":[16.4183,120.6031],"Market Subdivision, Upper":[16.4164,120.5975],"Middle Quezon Hill Subdivision (Quezon Hill Middle)":[16.42,120.58],"Military Cut-off":[16.4067,120.5983],"Mines View Park":[16.4244,120.6331],"Modern Site, East":[16.425,120.6042],"Modern Site, West":[16.425,120.6028],"MRR-Queen of Peace":[16.4111,120.5844],"New Lucban":[16.4214,120.5925],"Outlook Drive":[16.4139,120.6225],Pacdal:[16.425,120.6194],"Padre Burgos":[16.4161,120.59],"Padre Zamora":[16.4194,120.5939],"Palma-Urbano (Cari\xF1o-Palma)":[16.405,120.595],"Phil-Am":[16.42,120.605],Pinget:[16.435,120.58],"Pinsao Pilot Project":[16.4294,120.575],"Pinsao Proper":[16.4333,120.5722],Poliwes:[16.3983,120.5933],Pucsusan:[16.4214,120.6264],"Quezon Hill Proper":[16.4233,120.5783],"Quezon Hill, Upper":[16.425,120.5767],"Quirino Hill, East":[16.43,120.5883],"Quirino Hill, Lower":[16.4283,120.59],"Quirino Hill, Middle":[16.43,120.59],"Quirino Hill, West":[16.43,120.5867],"Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)":[16.4225,120.5933],"Rizal Monument Area":[16.4131,120.5931],"Rock Quarry, Lower":[16.4083,120.5883],"Rock Quarry, Middle":[16.4094,120.5867],"Rock Quarry, Upper":[16.4106,120.585],"Salud Mitra":[16.4167,120.5983],"San Antonio Village":[16.4167,120.6083],"San Luis Village":[16.3917,120.5833],"San Roque Village":[16.395,120.575],"San Vicente":[16.3917,120.5917],"Sanitary Camp, North":[16.4367,120.6028],"Sanitary Camp, South":[16.435,120.6028],"Santa Escolastica":[16.4044,120.6017],"Santo Rosario":[16.4161,120.5833],"Santo Tomas Proper":[16.37,120.56],"Santo Tomas School Area":[16.375,120.565],"Scout Barrio":[16.3992,120.6133],"Session Road Area":[16.4125,120.5964],"Slaughter House Area (Santo Ni\xF1o Slaughter)":[16.4267,120.5942],"SLU-SVP Housing Village":[16.4022,120.59],"South Drive":[16.4139,120.6139],"Teodora Alonzo":[16.4117,120.59],Trancoville:[16.4222,120.6028],"Upper General Luna":[16.415,120.6014],"Victoria Village":[16.4172,120.5811],"Websters Subdivision":[16.4178,120.585]};var Iy=class n{suggestions$=new bt([]);STREETS_AND_LANDMARKS=[{name:"Session Road",barangay:"Session Road Area",coordinates:[16.4125,120.5964],type:"street",matchScore:0},{name:"Burnham Road",barangay:"Legarda-Burnham-Kisad",coordinates:[16.4111,120.5917],type:"street",matchScore:0},{name:"Bokawkan Road",barangay:"Andres Bonifacio (Lower Bokawkan)",coordinates:[16.4174,120.5856],type:"street",matchScore:0},{name:"Marcos Highway",barangay:"Magsaysay, Upper",coordinates:[16.4222,120.5958],type:"street",matchScore:0},{name:"Governor Pack Road",barangay:"New Lucban",coordinates:[16.4214,120.5925],type:"street",matchScore:0},{name:"Loakan Road",barangay:"Loakan Proper",coordinates:[16.3833,120.6167],type:"street",matchScore:0},{name:"Mines View Road",barangay:"Mines View Park",coordinates:[16.4244,120.6331],type:"street",matchScore:0},{name:"Outlook Drive",barangay:"Outlook Drive",coordinates:[16.4139,120.6225],type:"street",matchScore:0},{name:"South Drive",barangay:"South Drive",coordinates:[16.4139,120.6139],type:"street",matchScore:0},{name:"Santo Tomas Road",barangay:"Santo Tomas Proper",coordinates:[16.37,120.56],type:"street",matchScore:0},{name:"Mines View Park",barangay:"Mines View Park",coordinates:[16.4244,120.6331],type:"street",matchScore:0},{name:"Rizal Monument",barangay:"Rizal Monument Area",coordinates:[16.4131,120.5931],type:"street",matchScore:0},{name:"Baguio Cathedral",barangay:"Session Road Area",coordinates:[16.4125,120.5964],type:"street",matchScore:0},{name:"SM City Baguio",barangay:"Holy Ghost Extension",coordinates:[16.4189,120.5994],type:"street",matchScore:0},{name:"Ayala Technohub",barangay:"New Lucban",coordinates:[16.4214,120.5925],type:"street",matchScore:0},{name:"PNP Camp",barangay:"Camp 7",coordinates:[16.3769,120.5939],type:"street",matchScore:0}];constructor(){}searchLocations(e){if(!e||e.trim().length===0)return this.suggestions$.next([]),this.suggestions$.asObservable();let t=e.toLowerCase().trim(),i=[];Object.entries(Ki).forEach(([o,a])=>{let l=this.calculateMatchScore(t,o.toLowerCase());l>0&&i.push({name:o,barangay:o,coordinates:a,type:"barangay",matchScore:l})}),this.STREETS_AND_LANDMARKS.forEach(o=>{let a=this.calculateMatchScore(t,o.name.toLowerCase());a>0&&i.push(ye(X({},o),{matchScore:a}))});let r=i.sort((o,a)=>a.matchScore-o.matchScore).slice(0,12);return this.suggestions$.next(r),this.suggestions$.asObservable()}calculateMatchScore(e,t){if(t===e)return 100;if(t.startsWith(e))return 80;if(t.includes(e))return 60;let i=e.split(/\s+/),r=t.split(/\s+/),o=i.filter(a=>r.some(l=>l.startsWith(a)));return o.length>0?40+o.length*10:0}getAllBarangays(){return Object.entries(Ki).map(([e,t])=>({name:e,barangay:e,coordinates:t,type:"barangay",matchScore:0}))}getLocationCoordinates(e){if(Ki[e])return Ki[e];let t=this.STREETS_AND_LANDMARKS.find(i=>i.name.toLowerCase()===e.toLowerCase());return t?t.coordinates:null}getNearbyLocations(e,t,i=1){let r=[];return Object.entries(Ki).forEach(([o,[a,l]])=>{let u=this.calculateDistance(e,t,a,l);u<=i&&r.push({name:o,barangay:o,coordinates:[a,l],type:"barangay",matchScore:100-u/i*100})}),r.sort((o,a)=>a.matchScore-o.matchScore)}calculateDistance(e,t,i,r){let a=(i-e)*Math.PI/180,l=(r-t)*Math.PI/180,u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=he({token:n,factory:n.\u0275fac,providedIn:"root"})};function nZ(n,e){if(n&1){let t=pe();_(0,"div",11)(1,"span",12),w(2),v(),_(3,"button",13),J("click",function(){z(t);let r=T();return j(r.notificationMessage="")}),w(4,"Close"),v()()}if(n&2){let t=T();ke("notification-error",t.notificationType==="error")("notification-success",t.notificationType==="success")("notification-warning",t.notificationType==="warning"),C(2),ae(t.notificationMessage)}}var My=class n{data=F(Nd);auth=F(un);reportService=F(gn);router=F(Mt);animationService=F(Dr);locationSearchService=F(Iy);map;BAGUIO_COORDS=[16.4167,120.5933];BAGUIO_BOUNDS=[[16.35,120.52],[16.48,120.66]];searchQuery="";locationSuggestions=[];showSuggestions=!1;selectedSearchLocation=null;searchMarker=null;notificationMessage="";notificationType="error";notificationTimeout;BARANGAY_CENTROIDS={"A. Bonifacio-Caguioa-Rimando (ABCR)":[16.4142,120.5947],"Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)":[16.4153,120.5934],"Alfonso Tabora":[16.4234,120.5969],Ambiong:[16.4288,120.6081],"Andres Bonifacio (Lower Bokawkan)":[16.4174,120.5856],"Apugan-Loakan":[16.3828,120.6175],"Asin Road":[16.4046,120.5636],"Atok Trail":[16.3792,120.6307],"Aurora Hill Proper (Malvar-Sgt. Floresca)":[16.4245,120.603],"Aurora Hill, North Central":[16.4278,120.6042],"Aurora Hill, South Central":[16.4254,120.6069],"Bagong Lipunan (Market Area)":[16.4153,120.596],"Baguio Dairy Farm":[16.382,120.5694],"Bakakeng Central":[16.3908,120.5839],"Bakakeng North":[16.3969,120.5878],"Bal-Marcoville (Marcoville)":[16.4089,120.6017],Balsigan:[16.4047,120.5889],"Bayan Park East":[16.4278,120.6125],"Bayan Park Village":[16.4264,120.6108],"Bayan Park West (Bayan Park)":[16.4267,120.6083],"BGH Compound":[16.4008,120.5922],Brookside:[16.4225,120.6058],Brookspoint:[16.4258,120.6153],"Cabinet Hill-Teacher's Camp":[16.4158,120.6067],"Camdas Subdivision":[16.4272,120.5975],"Camp 7":[16.3769,120.5939],"Camp 8":[16.3917,120.5967],"Camp Allen":[16.4147,120.5892],"Campo Filipino":[16.4169,120.5861],"City Camp Central":[16.4117,120.5869],"City Camp Proper":[16.4108,120.5858],"Country Club Village":[16.41,120.6189],"Cresencia Village":[16.4142,120.5867],Dagisitan:[16.4269,120.5986],"Dagsian, Lower":[16.3986,120.6028],"Dagsian, Upper":[16.4011,120.6025],"Dizon Subdivision":[16.4286,120.5989],"Dominican Hill-Mirador":[16.4097,120.5794],Dontogan:[16.3758,120.5736],"DPS Area":[16.4039,120.5986],"Engineers' Hill":[16.4111,120.6011],"Fairview Village":[16.4128,120.5819],"Ferdinand (Happy Homes-Campo Sioco)":[16.4061,120.5869],"Fort del Pilar":[16.3886,120.6192],"Gabriel Silang":[16.4006,120.6053],"General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)":[16.4239,120.5919],"General Luna, Lower":[16.4136,120.5997],"General Luna, Upper":[16.415,120.6014],Gibraltar:[16.4183,120.6278],"Greenwater Village":[16.4056,120.6083],"Guisad Central":[16.4217,120.5839],"Guisad Sorong":[16.425,120.5819],"Happy Hollow":[16.4036,120.6306],"Happy Homes (Happy Homes-Lucban)":[16.4239,120.5936],"Harrison-Claudio Carantes":[16.4131,120.5956],Hillside:[16.3981,120.605],"Holy Ghost Extension":[16.4189,120.5994],"Holy Ghost Proper":[16.4172,120.5969],"Honeymoon (Honeymoon-Holy Ghost)":[16.4206,120.5947],"Imelda R. Marcos (La Salle)":[16.4083,120.6014],"Imelda Village":[16.4167,120.6056],Irisan:[16.4083,120.5606],Kabayanihan:[16.4144,120.5931],Kagitingan:[16.4156,120.5908],"Kayang Extension":[16.4167,120.5925],"Kayang-Hilltop":[16.4161,120.5942],Kias:[16.3667,120.6233],"Legarda-Burnham-Kisad":[16.4111,120.5917],"Liwanag-Loakan":[16.3889,120.6125],"Loakan Proper":[16.3833,120.6167],"Lopez Jaena":[16.4183,120.6011],"Lourdes Subdivision Extension":[16.4089,120.585],"Lourdes Subdivision, Lower":[16.4097,120.5883],"Lourdes Subdivision, Proper":[16.4086,120.5869],Lualhati:[16.4136,120.615],Lucnab:[16.4133,120.6308],"Magsaysay Private Road":[16.4192,120.5964],"Magsaysay, Lower":[16.4208,120.5947],"Magsaysay, Upper":[16.4222,120.5958],"Malcolm Square-Perfecto (Jose Abad Santos)":[16.415,120.5958],"Manuel A. Roxas":[16.4183,120.6031],"Market Subdivision, Upper":[16.4164,120.5975],"Middle Quezon Hill Subdivision (Quezon Hill Middle)":[16.42,120.58],"Military Cut-off":[16.4067,120.5983],"Mines View Park":[16.4244,120.6331],"Modern Site, East":[16.425,120.6042],"Modern Site, West":[16.425,120.6028],"MRR-Queen of Peace":[16.4111,120.5844],"New Lucban":[16.4214,120.5925],"Outlook Drive":[16.4139,120.6225],Pacdal:[16.425,120.6194],"Padre Burgos":[16.4161,120.59],"Padre Zamora":[16.4194,120.5939],"Palma-Urbano (Cari\xF1o-Palma)":[16.405,120.595],"Phil-Am":[16.42,120.605],Pinget:[16.435,120.58],"Pinsao Pilot Project":[16.4294,120.575],"Pinsao Proper":[16.4333,120.5722],Poliwes:[16.3983,120.5933],Pucsusan:[16.4214,120.6264],"Quezon Hill Proper":[16.4233,120.5783],"Quezon Hill, Upper":[16.425,120.5767],"Quirino Hill, East":[16.43,120.5883],"Quirino Hill, Lower":[16.4283,120.59],"Quirino Hill, Middle":[16.43,120.59],"Quirino Hill, West":[16.43,120.5867],"Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)":[16.4225,120.5933],"Rizal Monument Area":[16.4131,120.5931],"Rock Quarry, Lower":[16.4083,120.5883],"Rock Quarry, Middle":[16.4094,120.5867],"Rock Quarry, Upper":[16.4106,120.585],"Salud Mitra":[16.4167,120.5983],"San Antonio Village":[16.4167,120.6083],"San Luis Village":[16.3917,120.5833],"San Roque Village":[16.395,120.575],"San Vicente":[16.3917,120.5917],"Sanitary Camp, North":[16.4367,120.6028],"Sanitary Camp, South":[16.435,120.6028],"Santa Escolastica":[16.4044,120.6017],"Santo Rosario":[16.4161,120.5833],"Santo Tomas Proper":[16.37,120.56],"Santo Tomas School Area":[16.375,120.565],"Scout Barrio":[16.3992,120.6133],"Session Road Area":[16.4125,120.5964],"Slaughter House Area (Santo Ni\xF1o Slaughter)":[16.4267,120.5942],"SLU-SVP Housing Village":[16.4022,120.59],"South Drive":[16.4139,120.6139],"Teodora Alonzo":[16.4117,120.59],Trancoville:[16.4222,120.6028],"Upper General Luna":[16.415,120.6014],"Victoria Village":[16.4172,120.5811],"Websters Subdivision":[16.4178,120.585]};incidentsLayer=Vn.layerGroup();eventListenerBound=!1;allReports=[];reportsSubscription;activeFilter="all";ngOnInit(){setTimeout(()=>{this.initMap(),this.loadApprovedReports()},100),this.eventListenerBound||(window.addEventListener("viewIncidentDetail",(e=>{this.viewReportDetail(e.detail)})),this.eventListenerBound=!0)}setFilter(e){this.activeFilter=e,this.displayFilteredMarkers(),setTimeout(()=>{this.zoomToFilteredMarkers()},100)}onSearchInput(e){if(this.searchQuery=e,e.trim().length===0){this.locationSuggestions=[],this.showSuggestions=!1;return}this.locationSearchService.searchLocations(e).subscribe(t=>{this.locationSuggestions=t,this.showSuggestions=t.length>0})}selectLocation(e){if(!this.isLocationInBaguio(e.coordinates)){this.showNotification("\u26A0\uFE0F Location is outside Baguio City bounds. Please select a location within Baguio.","error");return}this.selectedSearchLocation=e,this.searchQuery=e.name,this.showSuggestions=!1,this.searchMarker&&this.map.removeLayer(this.searchMarker);let t=Vn.divIcon({className:"search-marker-icon",html:`<div style="
        width: 32px; 
        height: 32px; 
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%; 
        border: 3px solid white;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.6);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
      ">
        \u{1F4CD}
      </div>`,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});this.searchMarker=Vn.marker(e.coordinates,{icon:t});let i=`
      <div style="padding: 10px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
        <h4 style="margin: 0 0 8px 0; color: #333;">${e.name}</h4>
        <p style="margin: 0; font-size: 12px; color: #666;">
          <strong>Type:</strong> ${e.type==="barangay"?"Barangay":"Street/Landmark"}
        </p>
        <p style="margin: 8px 0 0 0; font-size: 11px; color: #888;">
          Lat: ${e.coordinates[0].toFixed(4)}, Lng: ${e.coordinates[1].toFixed(4)}
        </p>
      </div>
    `;this.searchMarker.bindPopup(i).openPopup(),this.map.addLayer(this.searchMarker),this.map.setView(e.coordinates,15,{animate:!0,duration:.5})}saveSelectedLocation(){if(!this.selectedSearchLocation){this.showNotification("No location selected","error");return}if(!this.isLocationInBaguio(this.selectedSearchLocation.coordinates)){this.showNotification("\u26A0\uFE0F Cannot save: Location is outside Baguio City. Please select a location within Baguio.","error");return}let e={barangay:this.selectedSearchLocation.barangay,street:this.selectedSearchLocation.name,latitude:this.selectedSearchLocation.coordinates[0],longitude:this.selectedSearchLocation.coordinates[1],type:this.selectedSearchLocation.type},t=new CustomEvent("locationSelected",{detail:e});window.dispatchEvent(t),this.showNotification(`\u2713 Location "${this.selectedSearchLocation.name}" saved successfully!`,"success")}isLocationInBaguio(e){let[t,i]=e,r=this.BAGUIO_BOUNDS,[o,a]=r[0],[l,u]=r[1];return t>=o&&t<=l&&i>=a&&i<=u}showNotification(e,t="error"){this.notificationMessage=e,this.notificationType=t,this.notificationTimeout&&clearTimeout(this.notificationTimeout),this.notificationTimeout=setTimeout(()=>{this.notificationMessage=""},5e3)}clearSearch(){this.searchQuery="",this.locationSuggestions=[],this.showSuggestions=!1,this.selectedSearchLocation=null,this.searchMarker&&(this.map.removeLayer(this.searchMarker),this.searchMarker=null)}searchLocation(){this.locationSuggestions.length>0?this.selectLocation(this.locationSuggestions[0]):this.searchQuery.trim().length===0?this.showNotification("Please enter a location to search","warning"):this.showNotification("No locations found. Try searching by barangay or street name.","warning")}ngOnDestroy(){this.animationService.destroyScrollObserver(),this.map&&this.map.remove(),this.reportsSubscription&&this.reportsSubscription.unsubscribe()}initMap(){this.map||(this.map=Vn.map("mountainSentinelMap",{center:this.BAGUIO_COORDS,zoom:13,maxBounds:this.BAGUIO_BOUNDS,maxBoundsViscosity:.5}),Vn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:12,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.incidentsLayer.addTo(this.map),this.map.fitBounds(this.BAGUIO_BOUNDS))}loadApprovedReports(){this.reportsSubscription=this.reportService.getAllReports().pipe(ue(e=>{console.log("All reports:",e);let t=e.filter(i=>i.status==="approved");return console.log("Approved reports with location:",t.filter(i=>i.location)),t})).subscribe(e=>{this.allReports=e,this.displayFilteredMarkers(),this.activeFilter==="all"&&setTimeout(()=>this.zoomToFilteredMarkers(),300)})}displayFilteredMarkers(){this.incidentsLayer.clearLayers();let e=this.activeFilter==="all"?this.allReports:this.allReports.filter(r=>r.priority===this.activeFilter),t=e.filter(r=>r.location&&r.location.lat&&r.location.lng),i=e.filter(r=>!r.location||!r.location.lat||!r.location.lng);if(!(t.length===0&&i.length===0)&&(t.length>0&&this.createClusters(t).forEach(o=>{if(o.reports.length===1){let a=o.reports[0],l=a.priority||"low",u=[a.location.lat,a.location.lng],f=Vn.divIcon({className:"custom-marker-icon",html:`<div class="marker-pin marker-${l}" style="
              width: 35px; 
              height: 35px; 
              background-color: ${this.getPriorityColor(l)}; 
              border-radius: 50% 50% 50% 0; 
              transform: rotate(-45deg); 
              border: 3px solid white;
              box-shadow: 0 3px 8px rgba(0,0,0,0.4);
              position: relative;
              cursor: pointer;
            ">
              <div style="
                position: absolute;
                width: 16px;
                height: 16px;
                background-color: white;
                border-radius: 50%;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
              "></div>
            </div>`,iconSize:[35,35],iconAnchor:[17.5,35],popupAnchor:[0,-35]}),g=Vn.marker(u,{icon:f});this.addMarkerPopup(g,a),this.incidentsLayer.addLayer(g)}else{let a=o.center,l=Vn.divIcon({className:"cluster-icon",html:`<div class="cluster-pin" style="
              width: 45px; 
              height: 45px; 
              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
              border-radius: 50%; 
              border: 3px solid white;
              box-shadow: 0 4px 12px rgba(255, 107, 107, 0.5);
              position: relative;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              color: white;
              font-size: 18px;
              text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            ">
              ${o.reports.length}
            </div>`,iconSize:[45,45],iconAnchor:[22.5,45],popupAnchor:[0,-45]}),u=Vn.marker(a,{icon:l}),f=this.createClusterPopup(o);u.bindPopup(f,{maxWidth:380,className:"cluster-popup"}),u.on("click",()=>{u.openPopup()}),this.incidentsLayer.addLayer(u)}}),i.length>0)){let r={};i.forEach(o=>{let a=o.barangay||"Unknown Location";r[a]||(r[a]=[]),r[a].push(o)}),Object.entries(r).forEach(([o,a])=>{let l=this.getBarangayCentroid(o);if(!l){console.warn(`No coordinates found for barangay: ${o}`);return}let u=a[0]?.priority||"low";if(a.length===1){let f=a[0],g=Vn.divIcon({className:"fallback-marker-icon",html:`<div class="marker-pin marker-fallback" style="
              width: 35px; 
              height: 35px; 
              background-color: #999; 
              border-radius: 50% 50% 50% 0; 
              transform: rotate(-45deg); 
              border: 3px solid white;
              box-shadow: 0 3px 8px rgba(0,0,0,0.2);
              position: relative;
              cursor: pointer;
              opacity: 0.7;
            ">
              <div style="
                position: absolute;
                width: 16px;
                height: 16px;
                background-color: white;
                border-radius: 50%;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
              "></div>
            </div>`,iconSize:[35,35],iconAnchor:[17.5,35],popupAnchor:[0,-35]}),b=Vn.marker(l,{icon:g});this.addMarkerPopup(b,f),this.incidentsLayer.addLayer(b)}else{let f=Vn.divIcon({className:"barangay-cluster-icon",html:`<div class="barangay-cluster-pin" style="
              width: 45px; 
              height: 45px; 
              background: linear-gradient(135deg, #9370DB 0%, #6A5ACD 100%);
              border-radius: 50%; 
              border: 3px solid white;
              box-shadow: 0 4px 12px rgba(147, 112, 219, 0.5);
              position: relative;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              color: white;
              font-size: 18px;
              text-shadow: 0 1px 2px rgba(0,0,0,0.3);
              opacity: 0.8;
            ">
              ${a.length}+
            </div>`,iconSize:[45,45],iconAnchor:[22.5,45],popupAnchor:[0,-45]}),g=Vn.marker(l,{icon:f}),b=`
            <div style="padding: 12px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
              <h3 style="margin: 0 0 12px 0; color: #333; font-size: 14px; border-bottom: 2px solid #9370DB; padding-bottom: 8px;">
                ${o} (${a.length} reports without GPS)
              </h3>
              <div style="max-height: 200px; overflow-y: auto; margin-bottom: 12px;">
                ${a.map(E=>`
                  <div style="padding: 8px; border-bottom: 1px solid #eee; cursor: pointer; font-size: 12px;"
                       onclick="window.dispatchEvent(new CustomEvent('viewIncidentDetail', { detail: '${E.id}' }))"
                       onmouseover="this.style.backgroundColor='#f5f5f5';" 
                       onmouseout="this.style.backgroundColor='transparent';">
                    <div style="font-weight: 600; color: ${this.getPriorityColor(E.priority||"low")};">
                      ${this.getPriorityIcon(E.priority||"low")} ${E.description.substring(0,40)}...
                    </div>
                  </div>
                `).join("")}
              </div>
              <small style="color: #666;">Note: These reports use barangay-based mapping (no GPS available)</small>
            </div>
          `;g.bindPopup(b,{maxWidth:380,className:"cluster-popup"}),g.on("click",()=>{g.openPopup()}),this.incidentsLayer.addLayer(g)}})}}createClusters(e){let t=[],i=new Set,r=this.map?this.map.getZoom():13,o=1;return r>=15?o=.25:r>=13?o=.5:o=1.5,o=Math.min(o,.05),e.forEach(l=>{if(i.has(l.id))return;let u={center:[l.location.lat,l.location.lng],reports:[l]};if(i.add(l.id),e.forEach(f=>{if(i.has(f.id)||f.id===l.id)return;this.haversineDistance(l.location.lat,l.location.lng,f.location.lat,f.location.lng)<=o&&(u.reports.push(f),i.add(f.id))}),u.reports.length>1){let f=u.reports.reduce((b,E)=>b+E.location.lat,0)/u.reports.length,g=u.reports.reduce((b,E)=>b+E.location.lng,0)/u.reports.length;u.center=[f,g]}t.push(u)}),t}getBarangayCentroid(e){if(!e)return null;let t=e.trim();if(this.BARANGAY_CENTROIDS[t])return this.BARANGAY_CENTROIDS[t];let i=Object.entries(this.BARANGAY_CENTROIDS).find(([o])=>o.toLowerCase()===t.toLowerCase());if(i)return i[1];let r=Object.entries(this.BARANGAY_CENTROIDS).find(([o])=>o.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(o.toLowerCase()));return r?r[1]:null}haversineDistance(e,t,i,r){let a=(i-e)*Math.PI/180,l=(r-t)*Math.PI/180,u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}createClusterPopup(e){let t=e.reports.map((i,r)=>{let o=i.priority||"low",a=this.getPriorityColor(o),l=(i.description||"No description").substring(0,45),u=l.length>=45?"...":"";return`
      <div style="padding: 10px; border-bottom: 1px solid #eee; cursor: pointer;" 
           onclick="window.dispatchEvent(new CustomEvent('viewIncidentDetail', { detail: '${i.id}' }))"
           onmouseover="this.style.backgroundColor='#f5f5f5';" 
           onmouseout="this.style.backgroundColor='transparent';">
        <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 4px;">
          <div style="width: 8px; height: 8px; background: ${a}; border-radius: 50%; flex-shrink: 0;"></div>
          <strong style="font-size: 12px; color: #333; flex: 1; word-break: break-word;">${l}${u}</strong>
        </div>
        <small style="color: #666; font-size: 11px;">Location: ${i.barangay}</small>
      </div>
    `}).join("");return`
      <div style="padding: 12px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #fff; border-radius: 8px;">
        <h3 style="margin: 0 0 12px 0; color: #333; font-size: 14px; border-bottom: 2px solid #ff6b6b; padding-bottom: 8px; font-weight: 700;">
          Multiple Incidents (${e.reports.length})
        </h3>
        <div style="max-height: 300px; overflow-y: auto; margin-bottom: 10px;">
          ${t}
        </div>
        <button 
          onclick="console.log('View all incidents in cluster')"
          style="
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 700;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(255, 107, 107, 0.2);
          "
          onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(255, 107, 107, 0.3)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(255, 107, 107, 0.2)'"
        >
          View All Incidents
        </button>
      </div>
    `}addMarkerPopup(e,t){let i=t.priority||"low",r=this.getPriorityColor(i),o=i.charAt(0).toUpperCase()+i.slice(1),a=(t.description||"No description").substring(0,60),l=a.length>=60?"...":"",u=`
      <div style="padding: 12px; min-width: 280px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #fff; border-radius: 8px;">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px; padding-bottom: 10px; border-bottom: 2px solid ${r};">
          <div style="width: 12px; height: 12px; background: ${r}; border-radius: 50%;"></div>
          <h3 style="margin: 0; color: #333; font-size: 14px; font-weight: 700; flex: 1; word-break: break-word;">
            ${a}${l}
          </h3>
        </div>
        
        <div style="margin-bottom: 10px;">
          <div style="font-size: 12px; color: #555; margin-bottom: 8px; line-height: 1.5;">
            <strong>Location:</strong><br>
            <span style="color: #666; font-size: 11px;">
              ${t.street?t.street+"<br>":""}
              ${t.barangay||"N/A"}, ${t.city||"Baguio City"}
            </span>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px; padding: 8px; background: #f8f9fa; border-radius: 6px;">
          <div style="font-size: 11px;">
            <div style="color: #999; font-weight: 600; text-transform: uppercase; margin-bottom: 4px;">Status</div>
            <div style="color: #28a745; font-weight: 700;">Approved</div>
          </div>
          <div style="font-size: 11px;">
            <div style="color: #999; font-weight: 600; text-transform: uppercase; margin-bottom: 4px;">Priority</div>
            <div style="color: ${r}; font-weight: 700; text-transform: uppercase;">${o}</div>
          </div>
        </div>

        ${t.reporterName?`
          <div style="font-size: 11px; color: #666; margin-bottom: 8px; padding: 6px; background: #f0f0f0; border-radius: 4px;">
            <strong>Reported by:</strong> ${t.reporterName}
          </div>
        `:""}

        ${t.timestamp||t.createdAt?`
          <div style="font-size: 10px; color: #999; margin-bottom: 10px;">
            ${new Date(t.timestamp||t.createdAt).toLocaleDateString()} at ${new Date(t.timestamp||t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}
          </div>
        `:""}

        <button 
          onclick="window.dispatchEvent(new CustomEvent('viewIncidentDetail', { detail: '${t.id}' }))"
          style="
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,123,255,0.2);
          "
          onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,123,255,0.3)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,123,255,0.2)'"
        >
          View Full Report Details
        </button>
      </div>
    `;e.bindPopup(u,{maxWidth:350,className:"custom-popup"}),e.on("click",()=>{e.openPopup()})}zoomToFilteredMarkers(){let t=(this.activeFilter==="all"?this.allReports:this.allReports.filter(i=>i.priority===this.activeFilter)).filter(i=>i.location&&i.location.lat&&i.location.lng);if(t.length>0){let i=Vn.latLngBounds(t.map(r=>[r.location.lat,r.location.lng]));this.map.fitBounds(i,{padding:[80,80],maxZoom:16})}else this.map.fitBounds(this.BAGUIO_BOUNDS)}viewReportDetail(e){this.router.navigate(["/report-detail",e])}getPriorityColor(e){switch(e){case"high":return"#dc3545";case"medium":return"#ffc107";case"low":return"#28a745";default:return"#6c757d"}}getPriorityIcon(e){switch(e){case"high":return"[HIGH]";case"medium":return"[MED]";case"low":return"[LOW]";default:return"[--]"}}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-map"]],decls:16,vars:9,consts:[[1,"full-map-container","scroll-reveal","animate-on-load"],["class","location-notification",3,"notification-error","notification-success","notification-warning",4,"ngIf"],[1,"map-controls"],[1,"map-title"],[1,"filter-controls"],[1,"filter-btn",3,"click"],[1,"filter-btn","filter-high",3,"click"],[1,"filter-btn","filter-medium",3,"click"],[1,"filter-btn","filter-low",3,"click"],[1,"map-wrapper-fullscreen"],["id","mountainSentinelMap",1,"map-container"],[1,"location-notification"],[1,"notification-text"],[1,"notification-close",3,"click"]],template:function(t,i){t&1&&(_(0,"div",0),te(1,nZ,5,7,"div",1),_(2,"div",2)(3,"h2",3),w(4,"Incident Map View"),v(),_(5,"div",4)(6,"button",5),J("click",function(){return i.setFilter("all")}),w(7," ALL INCIDENTS "),v(),_(8,"button",6),J("click",function(){return i.setFilter("high")}),w(9," HIGH PRIORITY "),v(),_(10,"button",7),J("click",function(){return i.setFilter("medium")}),w(11," MEDIUM PRIORITY "),v(),_(12,"button",8),J("click",function(){return i.setFilter("low")}),w(13," LOW PRIORITY "),v()()(),_(14,"div",9),re(15,"div",10),v()()),t&2&&(C(),H("ngIf",i.notificationMessage),C(5),ke("active",i.activeFilter==="all"),C(2),ke("active",i.activeFilter==="high"),C(2),ke("active",i.activeFilter==="medium"),C(2),ke("active",i.activeFilter==="low"))},dependencies:[ht,zt,mn],styles:['[_ngcontent-%COMP%]:root{--primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--accent-green: #51cf66;--sos-red: #ff6b6b;--light-gray: #f5f7fa;--shadow: 0 8px 24px rgba(0, 0, 0, .12);--soft-shadow: 0 4px 12px rgba(0, 0, 0, .08)}.location-notification[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;padding:16px 20px;border-radius:8px;display:flex;align-items:center;gap:12px;background:#fff;border-left:4px solid #667eea;box-shadow:0 8px 24px #00000026;z-index:10000;max-width:400px;animation:_ngcontent-%COMP%_slideInRight .3s ease-out}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(400px)}to{opacity:1;transform:translate(0)}}.notification-error[_ngcontent-%COMP%]{border-left-color:#ff6b6b;background:#fff5f5}.notification-success[_ngcontent-%COMP%]{border-left-color:#51cf66;background:#f1fdf4}.notification-warning[_ngcontent-%COMP%]{border-left-color:#ffc107;background:#fffbf0}.notification-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.notification-text[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500;flex:1;line-height:1.4}.notification-close[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;color:#999;padding:0;margin-left:8px;transition:color .2s ease}.notification-close[_ngcontent-%COMP%]:hover{color:#333}@media (max-width: 600px){.location-notification[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}}.selected-location-panel[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 8px);left:0;right:0;background:#fff;border:2px solid #667eea;border-radius:12px;padding:16px;box-shadow:0 8px 32px #667eea33;z-index:999;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.location-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.location-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding-bottom:12px;border-bottom:1px solid #f0f0f0}.location-pin[_ngcontent-%COMP%]{font-size:28px;flex-shrink:0}.location-info[_ngcontent-%COMP%]{flex:1;min-width:0}.location-name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333;margin-bottom:4px;word-break:break-word}.location-meta[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:capitalize}.location-coordinates[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:12px;background:#f8f9fa;border-radius:8px}.coord-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;font-size:13px}.coord-label[_ngcontent-%COMP%]{font-weight:600;color:#666;flex-shrink:0}.coord-value[_ngcontent-%COMP%]{font-family:Monaco,Courier New,monospace;color:#333;font-weight:500;word-break:break-all}.location-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:4px}.save-location-btn[_ngcontent-%COMP%], .cancel-location-btn[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;min-height:40px}.save-location-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea4d}.save-location-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #667eea66}.cancel-location-btn[_ngcontent-%COMP%]{background:#f0f0f0;color:#333}.cancel-location-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}.search-container[_ngcontent-%COMP%]{position:relative;min-width:300px;max-width:500px;order:-1;flex:1 1 auto;margin-right:30px}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]{max-width:400px;margin-right:20px}}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]{order:2;margin-right:0;width:100%;max-width:100%}}.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:8px 12px;gap:8px;transition:all .3s ease;min-height:44px}.search-bar[_ngcontent-%COMP%]:focus-within{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;background:#fafbfc}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;font-size:14px;padding:8px 4px;font-family:inherit;background:transparent;color:#333;min-width:0}.search-input[_ngcontent-%COMP%]::placeholder{color:#999}.search-button[_ngcontent-%COMP%], .clear-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:6px;padding:8px 14px;cursor:pointer;font-size:16px;font-weight:600;min-width:44px;min-height:28px;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.search-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.clear-button[_ngcontent-%COMP%]{background:#ccc;padding:6px 10px}.clear-button[_ngcontent-%COMP%]:hover{background:#999}.suggestions-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 4px);left:0;right:0;background:#fff;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 8px 24px #0000001f;max-height:400px;overflow-y:auto;z-index:1000;animation:_ngcontent-%COMP%_slideDown .2s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.suggestion-item[_ngcontent-%COMP%]{padding:12px 16px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:all .2s ease;border-bottom:1px solid #f0f0f0}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-item[_ngcontent-%COMP%]:hover{background:#f8f9fa;padding-left:20px}.suggestion-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.suggestion-content[_ngcontent-%COMP%]{flex:1;min-width:0}.suggestion-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:4px}.suggestion-type[_ngcontent-%COMP%]{font-size:12px;color:#999;text-transform:capitalize}.suggestion-match-score[_ngcontent-%COMP%]{flex-shrink:0;color:#51cf66;font-weight:700;font-size:16px}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;border-radius:3px}.suggestions-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#999}.full-map-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 60px);width:100%;background:#f5f5f5}.map-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 30px;background:#fff;border-bottom:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014;flex-shrink:0;gap:20px;flex-wrap:wrap}@media (max-width: 1024px){.map-controls[_ngcontent-%COMP%]{flex-wrap:wrap;gap:15px}}@media (max-width: 768px){.map-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:stretch;padding:15px 20px}}@media (max-width: 480px){.map-controls[_ngcontent-%COMP%]{padding:12px 15px;gap:12px}}.map-title[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:800;color:#1a1a1a;letter-spacing:-.5px;flex-shrink:0}@media (max-width: 768px){.map-title[_ngcontent-%COMP%]{font-size:20px;text-align:center;order:1;width:100%}}@media (max-width: 480px){.map-title[_ngcontent-%COMP%]{font-size:18px}}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}@media (max-width: 768px){.filter-controls[_ngcontent-%COMP%]{justify-content:center;gap:8px}}@media (max-width: 480px){.filter-controls[_ngcontent-%COMP%]{gap:6px}}.filter-btn[_ngcontent-%COMP%]{padding:12px 20px;border:2px solid #e0e0e0;background:#fff;border-radius:8px;font-size:13px;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);color:#666;min-height:44px;text-transform:uppercase;position:relative;overflow:hidden;animation:_ngcontent-%COMP%_popIn .4s cubic-bezier(.175,.885,.32,1.275) backwards}.filter-btn[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.filter-btn[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.filter-btn[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.filter-btn[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}@keyframes _ngcontent-%COMP%_popIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.filter-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,rgba(102,126,234,.2) 0%,transparent 70%);border-radius:50%;transform:translate(-50%,-50%);pointer-events:none}.filter-btn[_ngcontent-%COMP%]:hover:before{animation:_ngcontent-%COMP%_ripple .6s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_ripple{0%{width:0;height:0}to{width:300px;height:300px}}.filter-btn[_ngcontent-%COMP%]:hover{border-color:#667eea;color:#667eea;transform:translateY(-2px);box-shadow:0 8px 16px #667eea33}@media (max-width: 480px){.filter-btn[_ngcontent-%COMP%]{padding:8px 14px;font-size:12px;flex:1 1 calc(50% - 6px);min-width:0}}.filter-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 20px #0000001f;border-color:#667eea}.filter-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-color:#667eea;box-shadow:0 8px 20px #667eea4d}.filter-btn.filter-high.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);border-color:#ff6b6b;box-shadow:0 8px 20px #ff6b6b4d}.filter-btn.filter-medium.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa94d,#fd7e14);border-color:#ffa94d;color:#fff;box-shadow:0 8px 20px #ffa04d4d}.filter-btn.filter-low.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);border-color:#51cf66;box-shadow:0 8px 20px #51cf664d}@media (max-width: 768px){.map-controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}.filter-controls[_ngcontent-%COMP%]{width:100%}.filter-btn[_ngcontent-%COMP%]{flex:1;min-width:calc(50% - 5px)}}.map-wrapper-fullscreen[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;overflow:hidden}.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{width:100%;height:100%;min-height:600px}@media (max-width: 768px){.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{min-height:400px}}@media (max-width: 480px){.map-wrapper-fullscreen[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{min-height:350px}}.map-container[_ngcontent-%COMP%]{width:100%;height:100%;min-height:600px}@media (max-width: 768px){.map-container[_ngcontent-%COMP%]{min-height:400px}}.map-layout-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1.2fr;gap:30px;padding:30px;background:linear-gradient(135deg,#f5f7fa,#e9ecef);min-height:calc(100vh - 60px);max-width:1400px;margin:0 auto}@media (max-width: 1200px){.map-layout-container[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr;gap:20px;padding:20px}}@media (max-width: 992px){.map-layout-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}}@media (max-width: 768px){.map-layout-container[_ngcontent-%COMP%]{padding:15px;gap:15px}}@media (max-width: 480px){.map-layout-container[_ngcontent-%COMP%]{padding:10px;gap:12px}}.left-section[_ngcontent-%COMP%]   .emergency-sos[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f,#c92a2a);color:#fff;padding:40px 30px;border-radius:16px;text-align:center;box-shadow:0 16px 40px #ff6b6b4d,0 0 1px #fff3 inset;border:1px solid rgba(255,255,255,.15);display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;min-height:280px}.emergency-sos[_ngcontent-%COMP%]   .sos-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:15px;animation:_ngcontent-%COMP%_pulse 2s infinite}.emergency-sos[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;margin:0 0 8px;font-weight:800;letter-spacing:-.5px;line-height:1.2}.emergency-sos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin:0 0 20px;opacity:.95;font-weight:500}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]{background:#fff;color:#ff6b6b;border:none;padding:12px 32px;border-radius:8px;font-size:15px;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 8px 20px #00000040;text-transform:uppercase;letter-spacing:.3px}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 30px #0000004d;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.emergency-sos[_ngcontent-%COMP%]   .sos-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px)}.middle-section[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;min-height:500px}.map-wrapper[_ngcontent-%COMP%]   #mountainSentinelMap[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:12px;box-shadow:0 8px 24px #0000001f;z-index:1}.custom-marker-icon[_ngcontent-%COMP%]{background:none;border:none}.marker-pin[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s}.marker-pin[_ngcontent-%COMP%]:hover{transform:rotate(-45deg) scale(1.1)}.marker-high[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 2s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:rotate(-45deg) translateY(0)}50%{transform:rotate(-45deg) translateY(-5px)}}.leaflet-popup-content-wrapper[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 8px 24px #0003;border:1px solid rgba(0,0,0,.05)}.leaflet-popup-content[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.leaflet-popup-tip[_ngcontent-%COMP%]{box-shadow:0 8px 24px #0003}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:20px}.right-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#1a1a1a;font-weight:800;letter-spacing:-.3px}.right-section[_ngcontent-%COMP%]   .updates-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px;background:#fff;padding:20px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014;max-height:400px;overflow-y:auto}.updates-list[_ngcontent-%COMP%]   .update-item[_ngcontent-%COMP%]{display:flex;gap:14px;padding:14px;background-color:#f8f9fa;border-radius:8px;transition:all .3s cubic-bezier(.4,0,.2,1);align-items:flex-start;cursor:pointer;border:1px solid #e0e0e0}.updates-list[_ngcontent-%COMP%]   .update-item[_ngcontent-%COMP%]:hover{background-color:linear-gradient(135deg,rgba(102,126,234,.05) 0%,rgba(118,75,162,.05) 100%);transform:translateY(-2px);box-shadow:0 8px 20px #667eea26;border-color:#667eea}.update-item[_ngcontent-%COMP%]   .update-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0;margin-top:2px}.update-item[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]{flex:1}.update-content[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#222;margin-bottom:4px}.update-content[_ngcontent-%COMP%]   .update-description[_ngcontent-%COMP%]{margin:0 0 4px;font-size:12px;color:#666;line-height:1.4}.update-content[_ngcontent-%COMP%]   .update-reporter[_ngcontent-%COMP%]{margin:0 0 8px;font-size:11px;color:#888;font-style:italic}.update-content[_ngcontent-%COMP%]   .update-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;color:#fff;white-space:nowrap}.updates-list[_ngcontent-%COMP%]   .no-updates[_ngcontent-%COMP%]{padding:40px 20px;text-align:center;color:#999}.no-updates[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}']})};var Ni=oS(bP());var iZ=["mapContainer"];function rZ(n,e){n&1&&re(0,"div",22)}function oZ(n,e){if(n&1){let t=pe();_(0,"div",27),J("click",function(){let r=z(t).$implicit,o=T(2);return j(o.selectSuggestion(r))}),ne(),_(1,"svg",28),re(2,"path",29),v(),fe(),_(3,"div",30)(4,"strong"),w(5),v(),_(6,"small"),w(7),v()()()}if(n&2){let t=e.$implicit;C(5),ae(t.name),C(2),ae(t.address)}}function sZ(n,e){if(n&1){let t=pe();_(0,"div",23)(1,"div",24)(2,"span"),w(3,"Locations in Baguio City"),v(),_(4,"button",25),J("click",function(){z(t);let r=T();return j(r.closeSuggestions())}),w(5," \u2715 "),v()(),te(6,oZ,8,2,"div",26),v()}if(n&2){let t=T();C(6),H("ngForOf",t.searchSuggestions)}}function aZ(n,e){n&1&&(_(0,"div",31),ne(),_(1,"svg",32),re(2,"path",33),v(),fe(),_(3,"span"),w(4,"This location is outside Baguio City. Please select a location within Baguio City only."),v()())}function cZ(n,e){if(n&1&&(_(0,"div",34),ne(),_(1,"svg",35),re(2,"path",36)(3,"circle",37),v(),fe(),_(4,"span"),w(5),v()()),n&2){let t=T();C(5),ae(t.currentLocation.address)}}function lZ(n,e){n&1&&(_(0,"div",38),ne(),_(1,"svg",15),re(2,"path",16),v(),fe(),_(3,"span"),w(4,"Location saved!"),v()())}var jd=class n{locationSelected=new an;defaultLocation={lat:16.4023,lng:120.5961};set barangayInput(e){e&&e!==this._lastBarangay&&(this._lastBarangay=e,this.geocodeBarangayToMap(e))}set streetInput(e){e&&(this._lastStreet=e)}_lastBarangay="";_lastStreet="";mapContainer;currentLocation=X({},this.defaultLocation);searchQuery="";searchSuggestions=[];showSuggestions=!1;isLoading=!1;outsideBaguioWarning=!1;locationConfirmed=!1;map;marker;destroy$=new Jt;searchSubject$=new Jt;baguioBounds=Ni.latLngBounds(Ni.latLng(16.35,120.52),Ni.latLng(16.48,120.66));markerIcon=Ni.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});nominatimUrl="https://nominatim.openstreetmap.org";ngOnInit(){this.initializeMap(),this.setupSearch()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.map&&this.map.remove()}initializeMap(){this.map=Ni.map(this.mapContainer.nativeElement,{maxBounds:this.baguioBounds,maxBoundsViscosity:1,minZoom:12,maxZoom:19}).setView([this.currentLocation.lat,this.currentLocation.lng],14),Ni.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors",maxZoom:19}).addTo(this.map),this.marker=Ni.marker([this.currentLocation.lat,this.currentLocation.lng],{draggable:!0,icon:this.markerIcon}).addTo(this.map),this.marker.bindPopup("Drag me or click on the map").openPopup(),this.map.on("click",e=>{this.baguioBounds.contains(e.latlng)?(this.outsideBaguioWarning=!1,this.updateMarkerPosition(e.latlng.lat,e.latlng.lng)):(this.outsideBaguioWarning=!0,setTimeout(()=>{this.outsideBaguioWarning=!1},4e3))}),this.marker.on("dragend",()=>{let e=this.marker.getLatLng();this.baguioBounds.contains(e)?(this.outsideBaguioWarning=!1,this.updateMarkerPosition(e.lat,e.lng)):(this.marker.setLatLng([this.currentLocation.lat,this.currentLocation.lng]),this.outsideBaguioWarning=!0,setTimeout(()=>{this.outsideBaguioWarning=!1},4e3))})}updateMarkerPosition(e,t){this.currentLocation.lat=e,this.currentLocation.lng=t,this.marker.setLatLng([e,t]),this.marker.setPopupContent("Location selected"),this.reverseGeocode(e,t),this.locationSelected.emit(X({},this.currentLocation))}setupSearch(){this.searchSubject$.pipe(Rh(500),fm(),bu(this.destroy$)).subscribe(e=>{e.length>2?this.performSearch(e):this.searchSuggestions=[]})}onSearchInput(){this.searchSubject$.next(this.searchQuery),this.searchQuery.length>0?this.showSuggestions=!0:(this.showSuggestions=!1,this.searchSuggestions=[])}onSearchFocus(){this.searchSuggestions.length>0&&(this.showSuggestions=!0)}closeSuggestions(){this.showSuggestions=!1}performSearch(e){this.isLoading=!0;let t=e.toLowerCase().trim(),r=Object.entries(Ki).filter(([a])=>a.toLowerCase().includes(t)).slice(0,5).map(([a,l])=>({name:a,address:`${a}, Baguio City, Benguet, Philippines`,lat:l[0],lng:l[1]}));if(r.length>0){this.searchSuggestions=r,this.showSuggestions=!0,this.isLoading=!1;return}let o=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e+", Baguio City")}&limit=5&viewbox=120.52,16.48,120.66,16.35&bounded=1`;fetch(o).then(a=>a.json()).then(a=>{a&&a.length>0?(this.searchSuggestions=a.map(l=>({name:l.display_name.split(",")[0],address:l.display_name,lat:parseFloat(l.lat),lng:parseFloat(l.lon)})),this.showSuggestions=!0,this.isLoading=!1):this.performGlobalSearch(e)}).catch(()=>{this.isLoading=!1,this.searchSuggestions=[]})}performGlobalSearch(e){let t=`${this.nominatimUrl}/search?format=json&q=${encodeURIComponent(e)}&limit=3&addressdetails=1`;fetch(t).then(i=>i.json()).then(i=>{this.searchSuggestions=i.slice(0,3).map(r=>({name:r.display_name.split(",")[0],address:r.display_name,lat:parseFloat(r.lat),lng:parseFloat(r.lon)})),this.showSuggestions=!0,this.isLoading=!1}).catch(()=>{this.isLoading=!1,this.searchSuggestions=[]})}searchLocation(){this.searchQuery.length>0&&this.performSearch(this.searchQuery)}selectSuggestion(e){let t=Ni.latLng(e.lat,e.lng);if(!this.baguioBounds.contains(t)){this.outsideBaguioWarning=!0,this.showSuggestions=!1,this.searchQuery="",setTimeout(()=>{this.outsideBaguioWarning=!1},4e3);return}this.currentLocation={lat:e.lat,lng:e.lng,address:e.address},this.showSuggestions=!1,this.searchQuery="",this.outsideBaguioWarning=!1,this.marker.setLatLng([e.lat,e.lng]),this.map.flyTo([e.lat,e.lng],16,{duration:.8,easeLinearity:.25}),this.locationSelected.emit(X({},this.currentLocation))}reverseGeocode(e,t){let i=`${this.nominatimUrl}/reverse?format=json&lat=${e}&lon=${t}`;fetch(i).then(r=>r.json()).then(r=>{this.currentLocation.address=r.address?r.display_name:void 0,this.locationSelected.emit(X({},this.currentLocation))}).catch(()=>{this.locationSelected.emit(X({},this.currentLocation))})}onCoordinateChange(){this.isLocationValid()&&this.updateMarkerPosition(this.currentLocation.lat,this.currentLocation.lng)}isLocationValid(){return this.currentLocation.lat>=-90&&this.currentLocation.lat<=90&&this.currentLocation.lng>=-180&&this.currentLocation.lng<=180}confirmLocation(){if(!this.isLocationValid())return;let e=Ni.latLng(this.currentLocation.lat,this.currentLocation.lng);if(!this.baguioBounds.contains(e)){this.outsideBaguioWarning=!0,this.locationConfirmed=!1,setTimeout(()=>{this.outsideBaguioWarning=!1},4e3);return}this.locationConfirmed=!0,this.marker.setPopupContent("Location saved"),this.marker.openPopup(),this.locationSelected.emit(X({},this.currentLocation)),setTimeout(()=>{this.marker.setPopupContent("Location selected")},3e3)}geocodeBarangayToMap(e){if(!this.map||!this.marker)return;let t=Ki,i=e.trim().toLowerCase(),r=Object.entries(t).find(([o])=>o.toLowerCase()===i||o.toLowerCase().includes(i)||i.includes(o.toLowerCase().split("(")[0].trim()));if(r){let[o,a]=r,l=a[0],u=a[1];this.currentLocation.lat=l,this.currentLocation.lng=u,this.currentLocation.address=`${o}, Baguio City, Philippines`,this.marker.setLatLng([l,u]),this.map.flyTo([l,u],15,{duration:.8})}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-interactive-location-picker"]],viewQuery:function(t,i){if(t&1&&iw(iZ,7),t&2){let r;mf(r=_f())&&(i.mapContainer=r.first)}},inputs:{defaultLocation:"defaultLocation",barangayInput:"barangayInput",streetInput:"streetInput"},outputs:{locationSelected:"locationSelected"},decls:26,vars:12,consts:[["mapContainer",""],[1,"location-picker-container"],[1,"search-bar-wrapper"],["type","text","placeholder","Search for streets, barangays, or landmarks in Baguio City...",1,"location-search-input",3,"ngModelChange","input","focus","ngModel","disabled"],["title","Search location in Baguio City",1,"search-btn",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["class","spinner",4,"ngIf"],[1,"search-help-text"],["class","search-suggestions",4,"ngIf"],[1,"map-wrapper"],["class","outside-baguio-warning",4,"ngIf"],[1,"map-container"],[1,"pin-instruction"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"],[1,"address-section"],["class","address-display",4,"ngIf"],["class","location-confirmed-message",4,"ngIf"],["type","button","title","Save this location to the form fields",1,"confirm-location-btn",3,"click","disabled"],["points","20 6 9 17 4 12"],[1,"spinner"],[1,"search-suggestions"],[1,"suggestions-header"],["title","Close suggestions",1,"close-suggestions",3,"click"],["class","suggestion-item",3,"click",4,"ngFor","ngForOf"],[1,"suggestion-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"],[1,"suggestion-content"],[1,"outside-baguio-warning"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],[1,"address-display"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"location-confirmed-message"]],template:function(t,i){if(t&1){let r=pe();_(0,"div",1)(1,"div",2)(2,"input",3),wt("ngModelChange",function(a){return z(r),Et(i.searchQuery,a)||(i.searchQuery=a),j(a)}),J("input",function(){return z(r),j(i.onSearchInput())})("focus",function(){return z(r),j(i.onSearchFocus())}),v(),_(3,"button",4),J("click",function(){return z(r),j(i.searchLocation())}),ne(),_(4,"svg",5),re(5,"circle",6)(6,"path",7),v()(),te(7,rZ,1,0,"div",8),v(),fe(),_(8,"p",9),w(9," Type to search and select from suggestions below, or click on the map "),v(),te(10,sZ,7,1,"div",10),_(11,"div",11),te(12,aZ,5,0,"div",12),re(13,"div",13,0),_(15,"div",14),ne(),_(16,"svg",15),re(17,"path",16),v(),w(18," Click to drop pin \u2022 Drag to move "),v()(),fe(),_(19,"div",17),te(20,cZ,6,1,"div",18)(21,lZ,5,0,"div",19),_(22,"button",20),J("click",function(){return z(r),j(i.confirmLocation())}),ne(),_(23,"svg",5),re(24,"polyline",21),v(),w(25),v()()()}t&2&&(C(2),xt("ngModel",i.searchQuery),H("disabled",i.isLoading),C(),H("disabled",!i.searchQuery||i.isLoading),C(4),H("ngIf",i.isLoading),C(3),H("ngIf",i.searchSuggestions.length>0&&i.showSuggestions),C(2),H("ngIf",i.outsideBaguioWarning),C(8),H("ngIf",i.currentLocation.address),C(),H("ngIf",i.locationConfirmed),C(),ke("confirmed",i.locationConfirmed),H("disabled",!i.isLocationValid()),C(3),be(" ",i.locationConfirmed?"Location Saved":"Save Location to Form"," "))},dependencies:[ht,An,zt,mn,bi,Wi,Ri],styles:[".location-picker-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;background:#fff;padding:20px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 2px 8px #0000001a}.search-bar-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;gap:8px;align-items:center;flex-wrap:wrap}.location-search-input[_ngcontent-%COMP%]{flex:1;min-width:200px;padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;font-size:.95rem;background:#f8f9fa;color:#1a1a1a;transition:all .3s ease;font-family:inherit}.location-search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 3px #667eea1a}.location-search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.search-btn[_ngcontent-%COMP%]{padding:10px 14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:transform .2s ease;display:flex;align-items:center;justify-content:center}.search-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.search-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.search-help-text[_ngcontent-%COMP%]{font-size:.85rem;color:#666;margin:-8px 0 0;padding:0 4px}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #e0e0e0;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.search-suggestions[_ngcontent-%COMP%]{position:relative;width:100%;max-height:250px;overflow-y:auto;background:#fff;border:2px solid #667eea;border-radius:10px;box-shadow:0 8px 24px #0003;z-index:1000;margin-bottom:8px}.suggestions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-weight:600;font-size:.9rem;border-radius:8px 8px 0 0;position:sticky;top:0;z-index:10}.close-suggestions[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;cursor:pointer;padding:4px 8px;border-radius:4px;font-size:1rem;line-height:1;transition:background .2s ease}.close-suggestions[_ngcontent-%COMP%]:hover{background:#ffffff4d}.suggestion-item[_ngcontent-%COMP%]{padding:12px 14px;cursor:pointer;border-bottom:1px solid #f0f0f0;transition:background .2s ease;display:flex;align-items:flex-start;gap:10px}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-item[_ngcontent-%COMP%]:hover{background:#f5f7ff}.suggestion-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#667eea;flex-shrink:0;margin-top:2px}.suggestion-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.suggestion-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.95rem;color:#1a1a1a}.suggestion-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;color:#999}.map-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:8px}.outside-baguio-warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 16px;background:linear-gradient(135deg,#fff3cd,#ffeeba);border:2px solid #ffc107;border-radius:10px;color:#856404;font-size:.9rem;font-weight:500;animation:_ngcontent-%COMP%_warningSlideIn .3s ease-out;box-shadow:0 4px 12px #ffc1074d}.outside-baguio-warning[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#e67e22;flex-shrink:0}@keyframes _ngcontent-%COMP%_warningSlideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.map-container[_ngcontent-%COMP%]{width:100%;height:320px;border-radius:8px;border:2px solid #1a2a5e;overflow:hidden;background:#f0f0f0;cursor:crosshair}.map-container[_ngcontent-%COMP%]   .leaflet-marker-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.map-container[_ngcontent-%COMP%]   .leaflet-popup-content-wrapper[_ngcontent-%COMP%]{background:#1a2a5e;color:#fff;border-radius:8px;font-weight:600}.map-container[_ngcontent-%COMP%]   .leaflet-popup-tip[_ngcontent-%COMP%]{background:#1a2a5e}.pin-instruction[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.85rem;color:#28a745;padding:10px 14px;background:#28a7451a;border-radius:8px;border:1px solid rgba(40,167,69,.2);font-weight:500}.address-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.address-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 14px;background:linear-gradient(135deg,#f0f8ff,#e8f4fd);border:1px solid #d0e8ff;border-radius:8px;font-size:.95rem;color:#1a2a5e;font-weight:500}.address-display[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e;flex-shrink:0}.location-confirmed-message[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;background:#d4edda;border:1px solid #28a745;border-radius:6px;color:#155724;font-size:.85rem;font-weight:600;animation:_ngcontent-%COMP%_confirmSlideIn .3s ease-out}.location-confirmed-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#28a745;flex-shrink:0;width:16px;height:16px}@keyframes _ngcontent-%COMP%_confirmSlideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.confirm-location-btn[_ngcontent-%COMP%]{padding:14px 24px;background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 2px 8px #28a74533}.confirm-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #28a74566}.confirm-location-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.confirm-location-btn.confirmed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#155724,#28a745);box-shadow:0 2px 8px #1557244d}.confirm-location-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}@media (max-width: 768px){.location-picker-container[_ngcontent-%COMP%]{padding:16px;gap:14px}.search-bar-wrapper[_ngcontent-%COMP%]{flex-direction:row}.location-search-input[_ngcontent-%COMP%]{min-width:0;padding:10px 12px;font-size:.9rem}.search-btn[_ngcontent-%COMP%]{padding:10px 12px}.search-suggestions[_ngcontent-%COMP%]{max-height:200px}.suggestion-item[_ngcontent-%COMP%]{padding:10px}.map-container[_ngcontent-%COMP%]{height:280px}}@media (max-width: 480px){.location-picker-container[_ngcontent-%COMP%]{padding:12px;gap:12px}.location-search-input[_ngcontent-%COMP%]{padding:10px;font-size:.85rem}.search-btn[_ngcontent-%COMP%]{padding:8px 10px}.map-container[_ngcontent-%COMP%]{height:220px}.suggestion-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.85rem}.suggestion-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}.pin-instruction[_ngcontent-%COMP%]{font-size:.8rem;padding:8px 12px}.address-display[_ngcontent-%COMP%]{font-size:.85rem;padding:10px 12px}}"]})};var uZ=()=>({lat:16.4023,lng:120.5961});function dZ(n,e){if(n&1&&(_(0,"div",53),w(1),v()),n&2){let t=T(2);C(),be(" ",t.successMessage," ")}}function hZ(n,e){if(n&1&&(_(0,"div",54),w(1),v()),n&2){let t=T(2);C(),be(" ",t.errorMessage," ")}}function fZ(n,e){if(n&1&&(_(0,"span",55),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.fullName," ")}}function pZ(n,e){if(n&1&&(_(0,"span",56),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.email," ")}}function gZ(n,e){if(n&1&&(_(0,"span",57),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.description," ")}}function mZ(n,e){if(n&1){let t=pe();_(0,"div",58)(1,"app-interactive-location-picker",59),J("locationSelected",function(r){z(t);let o=T(2);return j(o.onMapLocationSelected(r))}),v()()}if(n&2){let t=T(2);C(),H("defaultLocation",t.location||Uu(3,uZ))("barangayInput",t.barangay)("streetInput",t.street)}}function _Z(n,e){if(n&1&&(_(0,"span",60),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.location," ")}}function vZ(n,e){if(n&1){let t=pe();_(0,"li",64),J("click",function(){let r=z(t).$implicit,o=T(3);return j(o.selectBarangay(r))}),w(1),v()}if(n&2){let t=e.$implicit;C(),be(" ",t," ")}}function yZ(n,e){if(n&1&&(_(0,"li",65),w(1),v()),n&2){let t=T(3);C(),be(" + ",t.filteredBarangays.length-8," more results ")}}function bZ(n,e){if(n&1){let t=pe();_(0,"ul",61),J("mousedown",function(r){return z(t),j(r.preventDefault())}),te(1,vZ,2,1,"li",62)(2,yZ,2,1,"li",63),v()}if(n&2){let t=T(2);C(),H("ngForOf",t.filteredBarangays.slice(0,8)),C(),H("ngIf",t.filteredBarangays.length>8)}}function xZ(n,e){if(n&1&&(_(0,"span",66),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.barangay," ")}}function wZ(n,e){if(n&1&&(_(0,"span",67),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.street," ")}}function CZ(n,e){if(n&1&&(_(0,"div",71),re(1,"img",72),v()),n&2){let t=T(3);C(),H("src",t.proofImageUrl,Zt)}}function EZ(n,e){if(n&1&&(_(0,"div",68)(1,"p",69),w(2," Selected file: "),_(3,"strong"),w(4),v()(),te(5,CZ,2,1,"div",70),v()),n&2){let t=T(2);C(4),ae(t.proofImageFileName),C(),H("ngIf",t.proofImageUrl)}}function IZ(n,e){if(n&1){let t=pe();Je(0),_(1,"form",6,1),J("ngSubmit",function(){z(t);let r=T();return j(r.onSubmit())}),te(3,dZ,2,1,"div",7)(4,hZ,2,1,"div",8),_(5,"fieldset",9)(6,"legend",10),w(7,"Reporter Information"),v(),_(8,"div",11)(9,"label",12),w(10,"Full Name *"),v(),_(11,"input",13),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.fullName,r)||(o.fullName=r),j(r)}),v(),te(12,fZ,2,1,"span",14),v(),_(13,"div",11)(14,"label",15),w(15,"Email Address *"),v(),_(16,"input",16),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.email,r)||(o.email=r),j(r)}),v(),te(17,pZ,2,1,"span",17),v()(),_(18,"fieldset",9)(19,"legend",10),w(20,"Safety Alert Details"),v(),_(21,"div",11)(22,"label",18),w(23,"Describe the Safety Concern *"),v(),_(24,"textarea",19),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.description,r)||(o.description=r),j(r)}),J("blur",function(){z(t);let r=T();return j(r.saveFormProgress())}),v(),te(25,gZ,2,1,"span",20),v(),_(26,"div",11)(27,"label",21),w(28,"Priority Level *"),v(),_(29,"select",22),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.priority,r)||(o.priority=r),j(r)}),J("blur",function(){z(t);let r=T();return j(r.saveFormProgress())}),_(30,"option",23),w(31,"Info - General information, no immediate concern"),v(),_(32,"option",24),w(33,"Alert - Moderate concern, needs attention"),v(),_(34,"option",25),w(35,"Urgent - Requires immediate action"),v()()()(),_(36,"fieldset",9)(37,"legend",10),w(38,"Location Information"),v(),_(39,"p",26),w(40,"Baguio City, Philippines"),v(),_(41,"div",27)(42,"label",28),w(43,"Pin Location on Map"),v(),_(44,"p",29),w(45," Click on the map to mark the exact incident location. The address fields below will update automatically. "),v(),_(46,"button",30),J("click",function(){z(t);let r=T();return j(r.toggleInteractiveMap())}),ne(),_(47,"svg",31),re(48,"path",32)(49,"circle",33),v(),w(50),v(),te(51,mZ,2,4,"div",34)(52,_Z,2,1,"span",35),v(),fe(),_(53,"div",11)(54,"label",36),w(55,"City"),v(),_(56,"input",37),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.city,r)||(o.city=r),j(r)}),v()(),_(57,"div",38)(58,"label",39),w(59,"Barangay *"),v(),_(60,"input",40),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.barangay,r)||(o.barangay=r),j(r)}),J("input",function(r){z(t);let o=T();return j(o.filterBarangays(r))})("focus",function(){z(t);let r=T();return j(r.showBarangaySuggestions=!0)})("blur",function(){z(t);let r=T();return r.onBarangayBlur(),j(r.hideBarangaySuggestions())}),v(),te(61,bZ,3,2,"ul",41)(62,xZ,2,1,"span",42),v(),_(63,"div",11)(64,"label",43),w(65,"Street / Purok *"),v(),_(66,"input",44),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.street,r)||(o.street=r),j(r)}),J("blur",function(){z(t);let r=T();return j(r.saveFormProgress())})("input",function(){z(t);let r=T();return j(r.onStreetChange())}),v(),te(67,wZ,2,1,"span",45),v(),_(68,"div",11)(69,"label",46),w(70,"Landmark or Nearby Location (Optional)"),v(),_(71,"input",47),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.landmark,r)||(o.landmark=r),j(r)}),J("blur",function(){z(t);let r=T();return j(r.saveFormProgress())}),v()()(),_(72,"fieldset",9)(73,"legend",10),w(74,"Evidence"),v(),_(75,"div",11)(76,"label",48),w(77,"Photo of Incident (Optional)"),v(),_(78,"input",49),J("change",function(r){z(t);let o=T();return j(o.onProofImageSelected(r))}),v(),_(79,"p",50),w(80," Upload a clear photo of the incident. Maximum 5MB. This helps with verification. "),v(),te(81,EZ,6,2,"div",51),v()(),_(82,"button",52),w(83),v()(),Xe()}if(n&2){let t=T();C(3),H("ngIf",t.successMessage),C(),H("ngIf",t.errorMessage),C(7),xt("ngModel",t.fullName),Tt("aria-invalid",t.validationErrors.fullName?"true":null)("aria-describedby",t.validationErrors.fullName?"fullName-error":null),C(),H("ngIf",t.validationErrors.fullName),C(4),xt("ngModel",t.email),Tt("aria-invalid",t.validationErrors.email?"true":null)("aria-describedby",t.validationErrors.email?"email-error":null),C(),H("ngIf",t.validationErrors.email),C(7),xt("ngModel",t.description),Tt("aria-invalid",t.validationErrors.description?"true":null)("aria-describedby",t.validationErrors.description?"description-error":null),C(),H("ngIf",t.validationErrors.description),C(4),xt("ngModel",t.priority),C(21),be(" ",t.showInteractiveMap?"Hide Location Map":"Select Location on Map"," "),C(),H("ngIf",t.showInteractiveMap),C(),H("ngIf",t.validationErrors.location),C(4),xt("ngModel",t.city),C(4),xt("ngModel",t.barangay),Tt("aria-controls",t.showBarangaySuggestions&&t.filteredBarangays.length>0?"barangay-suggestions":null)("aria-invalid",t.validationErrors.barangay?"true":null)("aria-describedby",t.validationErrors.barangay?"barangay-error":null),C(),H("ngIf",t.showBarangaySuggestions&&t.filteredBarangays.length>0),C(),H("ngIf",t.validationErrors.barangay),C(4),xt("ngModel",t.street),Tt("aria-invalid",t.validationErrors.street?"true":null)("aria-describedby",t.validationErrors.street?"street-error":null),C(),H("ngIf",t.validationErrors.street),C(4),xt("ngModel",t.landmark),C(10),H("ngIf",t.proofImageFileName),C(),H("disabled",t.isLoading),Tt("aria-busy",t.isLoading),C(),be(" ",t.isLoading?"Submitting Alert...":"Submit Safety Alert"," ")}}function MZ(n,e){n&1&&(_(0,"div",73)(1,"div",74)(2,"h3"),w(3,"Authentication Required"),v(),_(4,"p",75),w(5," You need to create an account or sign in before you can submit a safety alert. "),v(),_(6,"p",76),w(7," Creating an account helps us verify reports and keep the community safe. "),v(),_(8,"div",77)(9,"a",78),w(10,"Sign In"),v(),_(11,"span",79),w(12,"or"),v(),_(13,"a",80),w(14,"Sign Up"),v()()()())}var Py=class n{reportService=F(gn);authService=F(un);router=F(Mt);animationService=F(Dr);toastService=F(ei);description="";street="";barangay="";landmark="";city="Baguio City";priority="medium";fullName="";email="";idImageUrl=null;idImageFile=null;idImageFileName=null;proofImageUrl=null;proofImageFile=null;proofImageFileName=null;location=null;showInteractiveMap=!1;errorMessage=null;successMessage=null;isLoading=!1;validationErrors={};baguioBarangays=["A. Bonifacio-Caguioa-Rimando (ABCR)","Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)","Alfonso Tabora","Ambiong","Andres Bonifacio (Lower Bokawkan)","Apugan-Loakan","Asin Road","Atok Trail","Aurora Hill Proper (Malvar-Sgt. Floresca)","Aurora Hill, North Central","Aurora Hill, South Central","Bagong Lipunan (Market Area)","Baguio Dairy Farm","Bakakeng Central","Bakakeng North","Bal-Marcoville (Marcoville)","Balsigan","Bayan Park East","Bayan Park Village","Bayan Park West (Bayan Park)","BGH Compound","Brookside","Brookspoint","Cabinet Hill-Teacher's Camp","Camdas Subdivision","Camp 7","Camp 8","Camp Allen","Campo Filipino","City Camp Central","City Camp Proper","Country Club Village","Cresencia Village","Dagisitan","Dagsian, Lower","Dagsian, Upper","Dizon Subdivision","Dominican Hill-Mirador","Dontogan","DPS Area","Engineers' Hill","Fairview Village","Ferdinand (Happy Homes-Campo Sioco)","Fort del Pilar","Gabriel Silang","General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)","General Luna, Lower","General Luna, Upper","Gibraltar","Greenwater Village","Guisad Central","Guisad Sorong","Happy Hollow","Happy Homes (Happy Homes-Lucban)","Harrison-Claudio Carantes","Hillside","Holy Ghost Extension","Holy Ghost Proper","Honeymoon (Honeymoon-Holy Ghost)","Imelda R. Marcos (La Salle)","Imelda Village","Irisan","Kabayanihan","Kagitingan","Kayang Extension","Kayang-Hilltop","Kias","Legarda-Burnham-Kisad","Liwanag-Loakan","Loakan Proper","Lopez Jaena","Lourdes Subdivision Extension","Lourdes Subdivision, Lower","Lourdes Subdivision, Proper","Lualhati","Lucnab","Magsaysay Private Road","Magsaysay, Lower","Magsaysay, Upper","Malcolm Square-Perfecto (Jose Abad Santos)","Manuel A. Roxas","Market Subdivision, Upper","Middle Quezon Hill Subdivision (Quezon Hill Middle)","Military Cut-off","Mines View Park","Modern Site, East","Modern Site, West","MRR-Queen of Peace","New Lucban","Outlook Drive","Pacdal","Padre Burgos","Padre Zamora","Palma-Urbano (Cari\xF1o-Palma)","Phil-Am","Pinget","Pinsao Pilot Project","Pinsao Proper","Poliwes","Pucsusan","Quezon Hill Proper","Quezon Hill, Upper","Quirino Hill, East","Quirino Hill, Lower","Quirino Hill, Middle","Quirino Hill, West","Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)","Rizal Monument Area","Rock Quarry, Lower","Rock Quarry, Middle","Rock Quarry, Upper","Salud Mitra","San Antonio Village","San Luis Village","San Roque Village","San Vicente","Sanitary Camp, North","Sanitary Camp, South","Santa Escolastica","Santo Rosario","Santo Tomas Proper","Santo Tomas School Area","Scout Barrio","Session Road Area","Slaughter House Area (Santo Ni\xF1o Slaughter)","SLU-SVP Housing Village","South Drive","Teodora Alonzo","Trancoville","Upper General Luna","Victoria Village","Websters Subdivision"];filteredBarangays=[...this.baguioBarangays];showBarangaySuggestions=!1;ngOnInit(){this.authService.currentUser$.subscribe(t=>{t&&(this.email=t.email||"",this.fullName=t.displayName||"")});let e=sessionStorage.getItem("reportFormData");if(e){let t=JSON.parse(e);this.description=t.description||"",this.street=t.street||"",this.barangay=t.barangay||"",this.landmark=t.landmark||"",this.priority=t.priority||"medium"}}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.showBarangaySuggestions=!0,!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.barangay=e,this.showBarangaySuggestions=!1,this.filteredBarangays=[...this.baguioBarangays],this.saveFormProgress()}onStreetChange(){this.saveFormProgress()}hideBarangaySuggestions(){setTimeout(()=>{this.showBarangaySuggestions=!1,this.saveFormProgress()},150)}onBarangayBlur(){return S(this,null,function*(){let e=(this.barangay||"").trim();if(e&&!this.location)try{let t=yield this.geocodeBarangay(e);t&&(this.location=t,this.saveFormProgress())}catch(t){console.warn("Failed to geocode barangay on blur: - report.ts",t)}})}onMapLocationSelected(e){this.location={lat:e.lat,lng:e.lng},this.getAddressFromCoordinates(e.lat,e.lng),this.saveFormProgress(),console.log("Location updated from map:",this.location)}toggleInteractiveMap(){this.showInteractiveMap=!this.showInteractiveMap}getAddressFromCoordinates(e,t){return S(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,a=o.road||o.street||o.neighbourhood||"",l=o.suburb||o.neighbourhood||o.quarter||o.village||"",u=o.city_district||o.district||"";a&&(this.street=a),(o.amenity||o.building||o.shop)&&(this.landmark=o.amenity||o.building||o.shop);let f=[l,u,o.neighbourhood,o.quarter].filter(Boolean);for(let g of f){if(!g)continue;let b=g.toLowerCase(),E=this.baguioBarangays.find(I=>{let R=I.toLowerCase(),W=R.split("(")[0].trim();return R.includes(b)||b.includes(W)||W.includes(b)||b.split(" ").some(q=>q.length>3&&W.includes(q))});if(E){this.barangay=E;break}}if(!this.barangay){let g=this.findNearestBarangay(e,t);g&&(this.barangay=g)}}}catch(i){console.warn("Could not fetch address details: - report.ts:279",i)}})}findNearestBarangay(e,t){let i=Ki,r=null,o=1/0;for(let[a,l]of Object.entries(i)){let[u,f]=l,g=Math.sqrt(Math.pow(e-u,2)+Math.pow(t-f,2));g<o&&(o=g,r=a)}return o<.02?this.baguioBarangays.find(l=>l.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes(l.toLowerCase().split("(")[0].trim()))||r:null}geocodeBarangay(e){return S(this,null,function*(){let t=Ki,i=e.trim(),r=t[i];if(r)return{lat:r[0],lng:r[1]};let o=Object.entries(t).find(([a])=>a.toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes(a.toLowerCase()));if(o){let a=o[1];return{lat:a[0],lng:a[1]}}return null})}onProofImageSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.errorMessage="Proof image must be less than 5MB.",this.toastService.error("Proof image must be less than 5MB.");return}this.proofImageFile=t,this.proofImageFileName=t.name;let i=new FileReader;i.onload=r=>{this.proofImageUrl=r.target?.result,this.successMessage="Proof image uploaded successfully!",this.toastService.success("Proof image uploaded successfully!"),setTimeout(()=>{this.successMessage==="Proof image uploaded successfully!"&&(this.successMessage=null)},3e3)},i.readAsDataURL(t)}}onIdImageSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.errorMessage="ID image must be less than 5MB.",this.toastService.error("ID image must be less than 5MB.");return}this.idImageFile=t,this.idImageFileName=t.name;let i=new FileReader;i.onload=r=>{this.idImageUrl=r.target?.result,this.successMessage="ID image uploaded successfully!",this.toastService.success("ID image uploaded successfully!"),setTimeout(()=>{this.successMessage==="ID image uploaded successfully!"&&(this.successMessage=null)},3e3)},i.readAsDataURL(t)}}validateForm(){return this.validationErrors={},this.description.trim()||(this.validationErrors.description="Incident description is required."),this.fullName.trim()||(this.validationErrors.fullName="Full name is required."),(!this.email.trim()||!this.isValidEmail(this.email))&&(this.validationErrors.email="Valid email address is required."),this.street.trim()||(this.validationErrors.street="Street address is required."),this.barangay.trim()||(this.validationErrors.barangay="Barangay is required."),Object.keys(this.validationErrors).length===0}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}onSubmit(){return S(this,null,function*(){if(this.errorMessage=null,this.successMessage=null,!this.validateForm()){this.toastService.warning("Please fill in all required fields.");return}this.isLoading=!0;try{let e=yield ga(this.authService.currentUser$);if(!e){this.errorMessage="You must be logged in to submit a report. Redirecting to login...",this.toastService.error("You must be logged in to submit a report."),setTimeout(()=>this.router.navigate(["/login"]),900),this.isLoading=!1;return}let t={reporterId:e.uid||e.email||"unknown",reporterName:this.fullName.trim(),reporterEmail:this.email.trim(),description:this.description.trim(),street:this.street.trim(),barangay:this.barangay.trim(),landmark:this.landmark.trim()||void 0,city:this.city,priority:this.priority,location:this.location||void 0,timestamp:new Date().toISOString(),imageUrl:this.proofImageUrl||void 0,idImageUrl:this.idImageUrl||void 0};yield ga(this.reportService.submitReport(t)),this.successMessage="Report submitted successfully and is awaiting admin approval.",this.toastService.success("Safety report submitted successfully! Awaiting admin approval."),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{this.clearForm(),sessionStorage.removeItem("reportFormData")},800)},100)}catch(e){console.error("Report submission failed: - report.ts:616",e),this.errorMessage="Submission failed. Please try again.",this.toastService.error("Submission failed. Please try again.")}finally{this.isLoading=!1}})}clearForm(){this.description="",this.street="",this.barangay="",this.landmark="",this.priority="medium",this.proofImageUrl=null,this.proofImageFile=null,this.proofImageFileName=null,this.idImageUrl=null,this.idImageFile=null,this.idImageFileName=null,this.location=null}saveFormProgress(){let e={description:this.description,street:this.street,barangay:this.barangay,landmark:this.landmark,priority:this.priority};sessionStorage.setItem("reportFormData",JSON.stringify(e))}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}ngOnDestroy(){this.animationService.destroyScrollObserver()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-report"]],decls:10,vars:4,consts:[["notLogged",""],["reportForm","ngForm"],["role","main",1,"report-page","scroll-reveal","animate-on-load"],["role","region","aria-labelledby","report-title",1,"report-container"],["id","report-title"],[4,"ngIf","ngIfElse"],["aria-describedby","form-status",3,"ngSubmit"],["class","message success","role","status","aria-live","polite","id","form-status",4,"ngIf"],["class","message error","role","alert","aria-live","assertive","id","form-status",4,"ngIf"],[1,"form-section","scroll-reveal","animate-on-load"],[1,"section-title"],[1,"form-group"],["for","fullName"],["id","fullName","type","text","name","fullName","required","","placeholder","Enter your full name","aria-required","true","autocomplete","name",3,"ngModelChange","ngModel"],["class","error-text","id","fullName-error","role","alert",4,"ngIf"],["for","email"],["id","email","type","email","name","email","required","","placeholder","your.email@example.com","aria-required","true","autocomplete","email",3,"ngModelChange","ngModel"],["class","error-text","id","email-error","role","alert",4,"ngIf"],["for","description"],["id","description","name","description","rows","5","required","","placeholder","Describe what happened in detail...","aria-required","true",3,"ngModelChange","blur","ngModel"],["class","error-text","id","description-error","role","alert",4,"ngIf"],["for","priority"],["id","priority","name","priority","required","","aria-required","true",3,"ngModelChange","blur","ngModel"],["value","low"],["value","medium"],["value","high"],[1,"hierarchy-note"],[1,"form-group","location-info"],["id","map-label"],["id","map-help",1,"help-text"],["type","button","aria-describedby","map-help",1,"map-picker-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","aria-hidden","true"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["class","interactive-map-wrapper","role","application","aria-label","Interactive location picker map",4,"ngIf"],["class","error-text","role","alert",4,"ngIf"],["for","city"],["id","city","type","text","name","city","readonly","","aria-readonly","true",1,"readonly-field",3,"ngModelChange","ngModel"],[1,"form-group","barangay-group"],["for","barangay"],["id","barangay","type","text","name","barangay","required","","placeholder","Start typing to search from 128 barangays...","autocomplete","off","aria-required","true","role","combobox","aria-expanded","false","aria-autocomplete","list",3,"ngModelChange","input","focus","blur","ngModel"],["class","barangay-suggestions","id","barangay-suggestions","role","listbox","aria-label","Barangay suggestions",3,"mousedown",4,"ngIf"],["class","error-text","id","barangay-error","role","alert",4,"ngIf"],["for","street"],["id","street","type","text","name","street","required","","placeholder","e.g., Purok 3, Session Road","aria-required","true",3,"ngModelChange","blur","input","ngModel"],["class","error-text","id","street-error","role","alert",4,"ngIf"],["for","landmark"],["id","landmark","type","text","name","landmark","placeholder","e.g., Near Burnham Park, In front of SM Baguio",3,"ngModelChange","blur","ngModel"],["for","proofImage"],["id","proofImage","type","file","name","proofImage","accept","image/*","aria-describedby","proofImage-help",3,"change"],["id","proofImage-help",1,"help-text"],["class","image-preview-container",4,"ngIf"],["type","submit",1,"submit-btn",3,"disabled"],["role","status","aria-live","polite","id","form-status",1,"message","success"],["role","alert","aria-live","assertive","id","form-status",1,"message","error"],["id","fullName-error","role","alert",1,"error-text"],["id","email-error","role","alert",1,"error-text"],["id","description-error","role","alert",1,"error-text"],["role","application","aria-label","Interactive location picker map",1,"interactive-map-wrapper"],[3,"locationSelected","defaultLocation","barangayInput","streetInput"],["role","alert",1,"error-text"],["id","barangay-suggestions","role","listbox","aria-label","Barangay suggestions",1,"barangay-suggestions",3,"mousedown"],["class","suggestion-item","role","option",3,"click",4,"ngFor","ngForOf"],["class","suggestion-more","role","status",4,"ngIf"],["role","option",1,"suggestion-item",3,"click"],["role","status",1,"suggestion-more"],["id","barangay-error","role","alert",1,"error-text"],["id","street-error","role","alert",1,"error-text"],[1,"image-preview-container"],[1,"file-name"],["class","image-preview",4,"ngIf"],[1,"image-preview"],["alt","Preview of uploaded incident photo",3,"src"],["role","alert",1,"not-logged"],[1,"auth-prompt-box"],[1,"login-warning"],[1,"help-text"],["role","group","aria-label","Authentication options",1,"action-row"],["routerLink","/login",1,"btn","login-btn"],["aria-hidden","true",1,"or-text"],["routerLink","/login",1,"btn","signup-btn"]],template:function(t,i){if(t&1&&(_(0,"main",2)(1,"div",3)(2,"h2",4),w(3,"Submit a Safety Alert"),v(),_(4,"p"),w(5,"Report safety concerns in your neighborhood. All fields marked with * are required."),v(),te(6,IZ,84,34,"ng-container",5),xe(7,"async"),te(8,MZ,15,0,"ng-template",null,0,It),v()()),t&2){let r=dt(9);C(6),H("ngIf",Te(7,2,i.authService.currentUser$))("ngIfElse",r)}},dependencies:[ht,An,zt,mn,zd,sc,ac,bi,ts,Wi,Ud,Tl,Ri,Sl,Xr,Gi,jd,ln],styles:[".report-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#1a2a5e,#2d4a8e,#d4a84b);background-size:cover;background-position:center;background-attachment:fixed;display:flex;align-items:flex-start;justify-content:center;padding:40px 20px}@media (max-width: 768px){.report-page[_ngcontent-%COMP%]{padding:20px 15px}}@media (max-width: 480px){.report-page[_ngcontent-%COMP%]{padding:15px 10px}}.report-container[_ngcontent-%COMP%]{max-width:1200px;width:95%;margin:0 auto;padding:40px 48px;background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d,0 0 1px #ffffff80 inset;border:1px solid rgba(255,255,255,.6);color:#1a1a1a;animation:_ngcontent-%COMP%_containerFadeUp .7s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_containerFadeUp{0%{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 1280px){.report-container[_ngcontent-%COMP%]{max-width:1000px;width:92%;padding:36px 40px}}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]{max-width:100%;width:95%;padding:28px 20px;border-radius:12px}}@media (max-width: 480px){.report-container[_ngcontent-%COMP%]{width:98%;padding:20px 15px;border-radius:10px}}.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:2rem;font-weight:800;margin-bottom:10px;text-align:center;letter-spacing:-.5px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}}@media (max-width: 480px){.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}}.report-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px;font-size:.9rem;line-height:1.5;text-align:center;font-weight:400}@media (max-width: 480px){.report-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:20px;font-size:.85rem}}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}@media (max-width: 480px){form[_ngcontent-%COMP%]{gap:18px}}.form-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:25px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #0000000f;animation:_ngcontent-%COMP%_slideInUp .6s cubic-bezier(.4,0,.2,1) backwards}.form-section[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.form-section[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.form-section[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.form-section[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.form-section[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.form-section[_ngcontent-%COMP%]{padding:18px 15px}}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0 0 20px;padding-bottom:12px;border-bottom:2px solid #1a2a5e;letter-spacing:-.5px}@media (max-width: 480px){.section-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:15px}}.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:.9rem;letter-spacing:0px}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;box-sizing:border-box;font-size:16px;font-family:inherit;transition:all .3s cubic-bezier(.4,0,.2,1);background:#f8f9fa;color:#333;min-height:44px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px 14px}}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder{color:#aaa}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:120px}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding:12px;border:2px solid #e0e0e0;border-radius:8px;width:100%;box-sizing:border-box;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);background:#f8f9fa;color:#666;font-size:.95rem}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.help-text[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin-top:8px;font-style:normal}.error-text[_ngcontent-%COMP%]{display:block;color:#ff6b6b;font-size:.85rem;margin-top:6px;font-weight:600}.form-group[_ngcontent-%COMP%]{position:relative}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;background:#fff;border:2px solid #1a2a5e;border-top:none;border-radius:0 0 8px 8px;max-height:350px;overflow-y:auto;overflow-x:hidden;width:100%;box-shadow:0 8px 24px #1a2a5e26;z-index:1000;color:#333;top:100%;left:0;right:0}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1a2a5e;border-radius:4px}.barangay-suggestions[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#2a3f7a}.suggestion-item[_ngcontent-%COMP%]{padding:12px 15px;cursor:pointer;transition:all .15s ease;border-bottom:1px solid #e0e0e0;font-size:.95rem;line-height:1.4;white-space:normal;word-wrap:break-word;-webkit-user-select:none;user-select:none}.suggestion-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#1a2a5e;padding-left:18px}.suggestion-item[_ngcontent-%COMP%]:active{background-color:#e8ebf7;color:#1a2a5e}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-more[_ngcontent-%COMP%]{padding:10px 15px;background:#f0f4f8;color:#6c757d;font-style:italic;font-size:.85rem;text-align:center;border-top:1px solid #e0e0e0}.readonly-field[_ngcontent-%COMP%]{background-color:#e9ecef!important;color:#6c757d!important;cursor:not-allowed}.hierarchy-note[_ngcontent-%COMP%]{color:#1a2a5e;font-size:.9rem;font-weight:600;margin-bottom:16px;padding:10px 14px;background:linear-gradient(135deg,#d4a84b1f,#d4a84b0d);border-left:3px solid #d4a84b;border-radius:4px}.barangay-group[_ngcontent-%COMP%]{margin-bottom:16px}.location-info[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:20px;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 2px 8px #0000000f}.get-location-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);margin-bottom:15px;box-shadow:0 8px 20px #1a2a5e4d;text-transform:uppercase;letter-spacing:.3px}.get-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px);box-shadow:0 12px 30px #1a2a5e66}.get-location-btn[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed;opacity:.6;transform:none;box-shadow:none}.map-picker-btn[_ngcontent-%COMP%]{width:100%;padding:12px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:.95rem;font-weight:600;transition:all .3s cubic-bezier(.4,0,.2,1);margin-top:15px;margin-bottom:15px;box-shadow:0 4px 12px #1a2a5e4d;display:flex;align-items:center;justify-content:center;gap:8px}.map-picker-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1a2a5e66}.map-picker-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.map-picker-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.interactive-map-wrapper[_ngcontent-%COMP%]{width:100%;margin:15px 0;animation:_ngcontent-%COMP%_slideDown .3s cubic-bezier(.4,0,.2,1)}.location-display[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:15px;border-radius:8px;margin-bottom:10px;border:2px solid #e0e0e0}.location-coords[_ngcontent-%COMP%]{margin:10px 0;color:#1a1a1a;font-size:1rem;font-weight:600;font-family:Monaco,Courier New,monospace;color:#1a2a5e}.location-accuracy[_ngcontent-%COMP%]{margin:10px 0;color:#666;font-size:.9rem}.location-error[_ngcontent-%COMP%]{background-color:#ffebee;color:#ff6b6b;padding:12px;border-radius:8px;border-left:4px solid #ff6b6b;margin-bottom:10px;font-size:.9rem}.image-preview-container[_ngcontent-%COMP%]{margin-top:15px;padding:20px;background-color:#f8f9fa;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 2px 8px #0000000f}.file-name[_ngcontent-%COMP%]{margin:0 0 15px;color:#666;font-size:.95rem;font-weight:600}.image-preview[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:12px}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:350px;width:auto;height:auto;border-radius:8px;border:1px solid #e0e0e0;box-shadow:0 8px 24px #0000001f;transition:all .3s cubic-bezier(.4,0,.2,1)}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.03);box-shadow:0 12px 32px #1a2a5e33}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);margin-top:10px;box-shadow:0 8px 20px #1a2a5e4d;text-transform:uppercase;letter-spacing:.3px}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px);box-shadow:0 12px 30px #1a2a5e66}.submit-btn[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed;opacity:.6;transform:none;box-shadow:none}.message[_ngcontent-%COMP%]{padding:15px 20px;margin-bottom:20px;border-radius:8px;font-weight:600;text-align:center;font-size:.95rem;animation:_ngcontent-%COMP%_slideDown .4s cubic-bezier(.4,0,.2,1)}.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf661a,#40c0571a);color:#40c057;border:2px solid #51cf66;box-shadow:0 4px 12px #40c05733}.error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b1a,#ee5a6f1a);color:#ff6b6b;border:2px solid #ff6b6b;box-shadow:0 4px 12px #ff6b6b33}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.not-logged[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;margin-top:20px}.auth-prompt-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e1a,#d4a84b1a);border:2px solid #1a2a5e;border-radius:12px;padding:40px;max-width:600px;margin:0 auto;box-shadow:0 8px 24px #1a2a5e26}.auth-prompt-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;color:#1a2a5e;margin-bottom:15px;font-weight:800}.login-warning[_ngcontent-%COMP%]{font-size:1.15rem;color:#333;margin-bottom:10px;font-weight:600;line-height:1.5}.auth-prompt-box[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-bottom:25px;opacity:.9;line-height:1.6}.not-logged[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;align-items:center;margin-top:20px}.or-text[_ngcontent-%COMP%]{font-size:1rem;color:#856404;font-weight:600}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%], .not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]{padding:14px 30px;color:#fff;border-radius:6px;text-decoration:none;font-weight:700;border:none;cursor:pointer;transition:all .2s;font-size:1rem;display:inline-block}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{background-color:#2c5282}.not-logged[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background-color:#1e3a5f;transform:translateY(-2px);box-shadow:0 4px 12px #2c52824d}.not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]{background-color:#28a745}.not-logged[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]:hover{background-color:#218838;transform:translateY(-2px);box-shadow:0 4px 12px #28a7454d}.name-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.name-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:0}}@media (max-width: 768px){.report-page[_ngcontent-%COMP%]{padding:20px 15px}.report-container[_ngcontent-%COMP%]{padding:30px 20px}.report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.1rem}.form-section[_ngcontent-%COMP%]{padding:20px 15px}.name-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}fieldset.form-section[_ngcontent-%COMP%]{border:none;margin:0 0 24px;padding:28px;background:#fafbfc;border-radius:14px;border:1px solid rgba(0,0,0,.06)}fieldset.form-section[_ngcontent-%COMP%]   legend.section-title[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:700;color:#1a2a5e;margin-bottom:20px;padding:0 8px;width:auto}.report-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible, .report-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible, .report-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .report-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible, .suggestion-item[_ngcontent-%COMP%]:focus-visible{outline:3px solid var(--wcag-focus-color, #4a90d9);outline-offset:2px}.submit-btn[_ngcontent-%COMP%], .map-picker-btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.suggestion-item[_ngcontent-%COMP%]{min-height:44px;display:flex;align-items:center}@media (prefers-contrast: high){.report-container[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:2px solid #000}.submit-btn[_ngcontent-%COMP%]{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){.report-container[_ngcontent-%COMP%], .scroll-reveal[_ngcontent-%COMP%], .animate-on-load[_ngcontent-%COMP%]{animation:none!important;transition-duration:.01ms!important}}@media print{.report-page[_ngcontent-%COMP%]{background:#fff;min-height:auto}.report-container[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #000}.map-picker-btn[_ngcontent-%COMP%], .interactive-map-wrapper[_ngcontent-%COMP%]{display:none!important}}"]})};function PZ(n,e){if(n&1&&(_(0,"div",8)(1,"h3"),w(2,"Incident Photo"),v(),re(3,"img",13),v()),n&2){let t=T().ngIf;C(3),H("src",t.imageUrl,Zt)}}function SZ(n,e){if(n&1){let t=pe();_(0,"div",3)(1,"button",4),J("click",function(){z(t);let r=T();return j(r.goBack())}),w(2,"\u2190 Back"),v(),_(3,"div",5)(4,"h1"),w(5),v(),_(6,"div",6),w(7),xe(8,"uppercase"),v()(),_(9,"div",7)(10,"div",8)(11,"h3"),w(12,"Location Information"),v(),_(13,"div",9)(14,"div",10)(15,"label"),w(16,"Street:"),v(),_(17,"p"),w(18),v()(),_(19,"div",10)(20,"label"),w(21,"Barangay:"),v(),_(22,"p"),w(23),v()()()(),_(24,"div",8)(25,"h3"),w(26,"Reporter Information"),v(),_(27,"div",9)(28,"div",10)(29,"label"),w(30,"Name:"),v(),_(31,"p"),w(32),v()(),_(33,"div",10)(34,"label"),w(35,"ID:"),v(),_(36,"p"),w(37),v()()()(),_(38,"div",8)(39,"h3"),w(40,"Description"),v(),_(41,"p",11),w(42),v()(),te(43,PZ,4,1,"div",12),_(44,"div",8)(45,"h3"),w(46,"Timeline"),v(),_(47,"div",9)(48,"div",10)(49,"label"),w(50,"Reported:"),v(),_(51,"p"),w(52),xe(53,"date"),v()(),_(54,"div",10)(55,"label"),w(56,"Last Updated:"),v(),_(57,"p"),w(58),xe(59,"date"),v()()()()()()}if(n&2){let t=e.ngIf,i=T();C(5),ae(t.description),C(),Jc("background-color",i.getStatusBadgeColor(t.status)),C(),be(" ",Te(8,12,t.status)," "),C(11),ae(t.street),C(5),ae(t.barangay),C(9),ae(t.reporterName||"Anonymous"),C(5),ae(t.reporterId),C(5),ae(t.description),C(),H("ngIf",t.imageUrl),C(9),ae(Tn(53,14,t.createdAt,"medium")),C(6),ae(Tn(59,17,t.updatedAt,"medium"))}}function TZ(n,e){n&1&&(_(0,"div",14)(1,"p"),w(2,"Loading report details..."),v()())}var Sy=class n{route=F(mi);router=F(Mt);reportService=F(gn);reportId=this.route.snapshot.paramMap.get("id");report$=this.reportService.getAllReports().pipe(ue(e=>e.find(t=>t.id===this.reportId)));ngOnInit(){}goBack(){this.router.navigate(["/"])}getStatusBadgeColor(e){switch(e){case"approved":return"#4caf50";case"pending":return"#ff9800";case"rejected":return"#f44336";default:return"#999"}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-report-detail"]],decls:5,vars:4,consts:[["loading",""],[1,"report-detail-container"],["class","report-detail-content",4,"ngIf","ngIfElse"],[1,"report-detail-content"],[1,"back-btn",3,"click"],[1,"report-header"],[1,"status-badge"],[1,"report-body"],[1,"report-section"],[1,"info-grid"],[1,"info-item"],[1,"description-text"],["class","report-section",4,"ngIf"],["alt","Report photo",1,"report-image",3,"src"],[1,"loading"]],template:function(t,i){if(t&1&&(_(0,"div",1),te(1,SZ,60,20,"div",2),xe(2,"async"),te(3,TZ,3,0,"ng-template",null,0,It),v()),t&2){let r=dt(4);C(),H("ngIf",Te(2,2,i.report$))("ngIfElse",r)}},dependencies:[ht,zt,ln,Ds,Qr],styles:[".report-detail-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:30px;background:#fff;min-height:calc(100vh - 60px)}.report-detail-container[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f0f0f0;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:14px;font-weight:600;color:#333;margin-bottom:20px;transition:all .2s ease}.report-detail-container[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;transform:translate(-4px)}.report-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #e0e0e0}.report-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;color:#333;flex:1}.report-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;color:#fff;font-weight:600;font-size:12px;white-space:nowrap;margin-left:20px}.report-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.report-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;color:#333;font-weight:600;border-bottom:2px solid #f0f0f0;padding-bottom:8px}.report-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.report-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#888;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333;line-height:1.5;word-wrap:break-word}.report-section[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#555;line-height:1.6;background:#f9f9f9;padding:16px;border-radius:4px}.report-section[_ngcontent-%COMP%]   .report-image[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px;box-shadow:0 4px 12px #0000001a;margin-top:12px}.report-detail-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}"]})};function OZ(n,e){if(n&1&&(Je(0),_(1,"small"),w(2),v(),Xe()),n&2){let t=T().$implicit;C(2),ae(t.city)}}function DZ(n,e){if(n&1&&(Je(0),re(1,"img",21),Xe()),n&2){let t=T().$implicit;C(),H("src",t.imageUrl,Zt)}}function AZ(n,e){n&1&&(_(0,"span",22),w(1,"No image"),v())}function kZ(n,e){if(n&1){let t=pe();_(0,"tr")(1,"td")(2,"div",14)(3,"div"),w(4),xe(5,"date"),v(),_(6,"small"),w(7),xe(8,"date"),v()()(),_(9,"td")(10,"strong"),w(11),v()(),_(12,"td")(13,"span",15),w(14),xe(15,"uppercase"),v()(),_(16,"td")(17,"div",16)(18,"div"),w(19),v(),_(20,"small"),w(21),v(),te(22,OZ,3,1,"ng-container",8),v()(),_(23,"td")(24,"div",17)(25,"p")(26,"strong"),w(27),v()(),_(28,"small"),w(29),v()()(),_(30,"td"),te(31,DZ,2,1,"ng-container",11)(32,AZ,2,0,"ng-template",null,2,It),v(),_(34,"td",18)(35,"button",19),J("click",function(){let r=z(t).$implicit,o=T(4);return j(o.approveReport(r.id))}),w(36," Accept "),v(),_(37,"button",20),J("click",function(){let r=z(t).$implicit,o=T(4);return j(o.deleteReport(r.id))}),w(38,"Delete"),v()()()}if(n&2){let t=e.$implicit,i=dt(33);Tt("data-id",t.id),C(4),ae(Tn(5,13,t.createdAt,"MMM d, y")),C(3),ae(Tn(8,16,t.createdAt,"h:mm a")),C(4),ae(t.description),C(2),H("ngClass","priority-"+(t.priority||"medium")),C(),be(" ",Te(15,19,t.priority||"medium")," "),C(5),ae(t.street),C(2),ae(t.barangay),C(),H("ngIf",t.city),C(5),ae(t.reporterName||"N/A"),C(2),ae(t.reporterId),C(2),H("ngIf",t.imageUrl)("ngIfElse",i)}}function RZ(n,e){if(n&1&&(Je(0),_(1,"div",12)(2,"table")(3,"thead")(4,"tr")(5,"th"),w(6,"Submitted"),v(),_(7,"th"),w(8,"Description"),v(),_(9,"th"),w(10,"Priority"),v(),_(11,"th"),w(12,"Location"),v(),_(13,"th"),w(14,"Reporter"),v(),_(15,"th"),w(16,"Image"),v(),_(17,"th"),w(18,"Actions"),v()()(),_(19,"tbody"),te(20,kZ,39,21,"tr",13),v()()(),Xe()),n&2){let t=T().ngIf,i=T(2);C(20),H("ngForOf",t)("ngForTrackBy",i.trackById)}}function NZ(n,e){n&1&&(_(0,"div",23)(1,"p"),w(2,"No pending reports. All reports have been reviewed!"),v()())}function LZ(n,e){if(n&1&&(Je(0),te(1,RZ,21,2,"ng-container",11)(2,NZ,3,0,"ng-template",null,1,It),Xe()),n&2){let t=e.ngIf,i=dt(3);C(),H("ngIf",t.length>0)("ngIfElse",i)}}function FZ(n,e){n&1&&(_(0,"div",24),w(1,"Loading reports..."),v())}function VZ(n,e){if(n&1&&(Je(0),_(1,"div",9)(2,"h3",10),w(3,"Pending Safety Alerts - Awaiting Review"),v(),te(4,LZ,4,2,"ng-container",11),xe(5,"async"),te(6,FZ,2,0,"ng-template",null,0,It),v(),Xe()),n&2){let t=dt(7),i=T();C(4),H("ngIf",Te(5,2,i.pendingReports$))("ngIfElse",t)}}function BZ(n,e){if(n&1&&(Je(0),_(1,"div",36),w(2),v(),Xe()),n&2){let t=T().ngIf,i=T().ngIf;C(2),xn(" Showing ",t.length," of ",i.length," approved reports ")}}function UZ(n,e){if(n&1&&(Je(0),_(1,"span",48),w(2),v(),Xe()),n&2){let t=T().$implicit;C(2),ae(t.city)}}function zZ(n,e){if(n&1&&(Je(0),_(1,"div",45)(2,"strong"),w(3,"Coordinates:"),v(),_(4,"span",49),w(5),xe(6,"number"),xe(7,"number"),v()(),Xe()),n&2){let t=T().$implicit;C(5),xn(" ",Tn(6,2,t.location.lat,"1.6-6"),", ",Tn(7,5,t.location.lng,"1.6-6")," ")}}function jZ(n,e){if(n&1&&(Je(0),_(1,"div",45)(2,"strong"),w(3,"Email:"),v(),_(4,"span"),w(5),v()(),Xe()),n&2){let t=T().$implicit;C(5),ae(t.reporterEmail)}}function HZ(n,e){if(n&1&&(Je(0),_(1,"div",50),re(2,"img",51),v(),Xe()),n&2){let t=T().$implicit;C(2),H("src",t.imageUrl,Zt)}}function $Z(n,e){if(n&1){let t=pe();_(0,"div",39)(1,"div",40)(2,"span",15),w(3),xe(4,"uppercase"),v(),_(5,"span",41),w(6),xe(7,"date"),v()(),_(8,"div",42)(9,"h4",43),w(10),v(),_(11,"div",44)(12,"div",45)(13,"strong"),w(14,"Location:"),v(),_(15,"span"),w(16),v(),te(17,UZ,3,1,"ng-container",8),v(),te(18,zZ,8,8,"ng-container",8),_(19,"div",45)(20,"strong"),w(21,"Reporter:"),v(),_(22,"span"),w(23),v()(),te(24,jZ,6,1,"ng-container",8),v(),te(25,HZ,3,1,"ng-container",8),v(),_(26,"div",46)(27,"button",47),J("click",function(){let r=z(t).$implicit,o=T(5);return j(o.deleteApprovedReport(r.id))}),w(28," Delete Report "),v()()()}if(n&2){let t=e.$implicit;C(2),H("ngClass","priority-"+(t.priority||"medium")),C(),be(" ",Te(4,11,t.priority||"medium")," "),C(3),be(" ",t.timestamp?t.timestamp:Tn(7,13,t.createdAt,"MMM d, y h:mm a")," "),C(4),ae(t.description),C(6),xn("",t.street,", ",t.barangay),C(),H("ngIf",t.city),C(),H("ngIf",t.location),C(5),ae(t.reporterName||"N/A"),C(),H("ngIf",t.reporterEmail),C(),H("ngIf",t.imageUrl)}}function GZ(n,e){if(n&1&&(Je(0),_(1,"div",37),te(2,$Z,29,16,"div",38),v(),Xe()),n&2){let t=T().ngIf,i=T(3);C(2),H("ngForOf",t)("ngForTrackBy",i.trackById)}}function qZ(n,e){n&1&&(Je(0),_(1,"p"),w(2,"No approved reports match your filters."),v(),Xe())}function WZ(n,e){n&1&&(Je(0),_(1,"p"),w(2,"No approved reports yet."),v(),Xe())}function KZ(n,e){if(n&1&&(_(0,"div",23),te(1,qZ,3,0,"ng-container",8)(2,WZ,3,0,"ng-container",8),v()),n&2){let t=T(2).ngIf,i=T(2);C(),H("ngIf",i.approvedFilterPriority!=="all"||i.approvedFilterSearch),C(),H("ngIf",i.approvedFilterPriority==="all"&&!i.approvedFilterSearch&&t.length===0)}}function ZZ(n,e){if(n&1&&(Je(0),te(1,BZ,3,2,"ng-container",8)(2,GZ,3,2,"ng-container",11)(3,KZ,3,2,"ng-template",null,4,It),Xe()),n&2){let t=e.ngIf,i=dt(4),r=T().ngIf;C(),H("ngIf",r.length>0),C(),H("ngIf",t.length>0)("ngIfElse",i)}}function YZ(n,e){if(n&1&&(Je(0),te(1,ZZ,5,3,"ng-container",8),Xe()),n&2){let t=e.ngIf,i=T(2);C(),H("ngIf",i.getFilteredApprovedReports(t))}}function QZ(n,e){n&1&&(_(0,"div",24),w(1,"Loading approved reports..."),v())}function JZ(n,e){if(n&1){let t=pe();Je(0),_(1,"div",9)(2,"h3",10),w(3,"Published Safety Alerts - Visible to Residents"),v(),_(4,"div",25)(5,"div",26)(6,"label",27),w(7,"Filter by Priority:"),v(),_(8,"select",28),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.approvedFilterPriority,r)||(o.approvedFilterPriority=r),j(r)}),_(9,"option",29),w(10,"All Priorities"),v(),_(11,"option",30),w(12,"High Priority"),v(),_(13,"option",31),w(14,"Medium Priority"),v(),_(15,"option",32),w(16,"Low Priority"),v()()(),_(17,"div",26)(18,"label",33),w(19,"Search:"),v(),_(20,"input",34),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.approvedFilterSearch,r)||(o.approvedFilterSearch=r),j(r)}),v()(),_(21,"button",35),J("click",function(){z(t);let r=T();return j(r.resetFilters())}),w(22,"Reset Filters"),v()(),te(23,YZ,2,1,"ng-container",11),xe(24,"async"),te(25,QZ,2,0,"ng-template",null,3,It),v(),Xe()}if(n&2){let t=dt(26),i=T();C(8),xt("ngModel",i.approvedFilterPriority),C(12),xt("ngModel",i.approvedFilterSearch),C(3),H("ngIf",Te(24,4,i.approvedReports$))("ngIfElse",t)}}var Ty=class n{reportService=F(gn);toastService=F(ei);activeView="pending";pendingReports$=this.reportService.getPendingReports();approvedReports$=this.reportService.getApprovedReports();approvedFilterPriority="all";approvedFilterSearch="";ngOnInit(){}switchView(e){this.activeView=e}filterByPriority(e){return this.approvedFilterPriority==="all"?e:e.filter(t=>t.priority===this.approvedFilterPriority)}filterBySearch(e){if(!this.approvedFilterSearch.trim())return e;let t=this.approvedFilterSearch.toLowerCase();return e.filter(i=>i.description?.toLowerCase().includes(t)||i.barangay?.toLowerCase().includes(t)||i.street?.toLowerCase().includes(t)||i.reporterName?.toLowerCase().includes(t))}getFilteredApprovedReports(e){let t=this.filterByPriority(e);return t=this.filterBySearch(t),t}resetFilters(){this.approvedFilterPriority="all",this.approvedFilterSearch=""}approveReport(e){confirm("Are you sure you want to accept this report for publication?")&&(this.reportService.approveReport(e),this.toastService.success("Report accepted and published to user dashboard"))}deleteReport(e){confirm("Are you sure you want to delete this report permanently?")&&(this.reportService.deleteReport(e),this.toastService.success("Report deleted successfully"))}deleteApprovedReport(e){confirm("This will permanently delete this approved report and remove it from the user dashboard and map. Continue?")&&(this.reportService.deleteReport(e),this.toastService.success("Approved report deleted successfully"))}trackById(e,t){return t?.id??e.toString()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-admin-dashboard"]],decls:12,vars:6,consts:[["pendingLoading",""],["noPendingReports",""],["noImage",""],["approvedLoading",""],["noApprovedMatches",""],[1,"admin-dashboard-container"],[1,"dashboard-tabs"],[1,"tab-btn",3,"click"],[4,"ngIf"],[1,"reports-management"],[1,"section-subtitle"],[4,"ngIf","ngIfElse"],[1,"reports-table"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"date-display"],[1,"priority-badge",3,"ngClass"],[1,"location-display"],[1,"reporter-info"],[1,"actions"],[1,"btn-approve",3,"click"],[1,"btn-delete",3,"click"],["alt","Report image",1,"thumbnail",3,"src"],[1,"no-image"],[1,"no-reports-message"],[1,"loading"],[1,"filters-bar"],[1,"filter-group"],["for","priorityFilter"],["id","priorityFilter",1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","high"],["value","medium"],["value","low"],["for","searchFilter"],["type","text","id","searchFilter","placeholder","Search by description, location, or reporter...",1,"filter-input",3,"ngModelChange","ngModel"],[1,"btn-reset-filters",3,"click"],[1,"results-count"],[1,"reports-grid"],["class","report-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"report-card"],[1,"card-header"],[1,"report-date"],[1,"card-body"],[1,"report-title"],[1,"report-details"],[1,"detail-item"],[1,"card-footer"],[1,"btn-delete-approved",3,"click"],[1,"text-muted"],[1,"coords"],[1,"report-image"],["alt","Report evidence",3,"src"]],template:function(t,i){t&1&&(_(0,"div",5)(1,"h2"),w(2,"Admin Dashboard"),v(),_(3,"p"),w(4,"Manage incident reports submitted by users."),v(),_(5,"div",6)(6,"button",7),J("click",function(){return i.switchView("pending")}),w(7," Pending Alerts "),v(),_(8,"button",7),J("click",function(){return i.switchView("approved")}),w(9," Published Alerts "),v()(),te(10,VZ,8,4,"ng-container",8)(11,JZ,27,6,"ng-container",8),v()),t&2&&(C(6),ke("active",i.activeView==="pending"),C(2),ke("active",i.activeView==="approved"),C(2),H("ngIf",i.activeView==="pending"),C(),H("ngIf",i.activeView==="approved"))},dependencies:[ht,Os,An,zt,mn,sc,ac,bi,ts,Wi,Ri,ln,Ds,If,Qr],styles:[".admin-dashboard-container[_ngcontent-%COMP%]{padding:30px;max-width:1400px;margin:0 auto;background:linear-gradient(135deg,#f5f7fa,#e9ecef);min-height:100vh}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:2rem;font-weight:800;margin-bottom:10px;letter-spacing:-.5px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.admin-dashboard-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.dashboard-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:30px;border-bottom:1px solid rgba(0,0,0,.08);background:#fff;padding:0;border-radius:12px 12px 0 0;box-shadow:0 2px 8px #0000000f}.tab-btn[_ngcontent-%COMP%]{padding:16px 28px;background:transparent;border:none;border-bottom:3px solid transparent;font-size:.95rem;font-weight:700;color:#666;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);margin-bottom:0;text-transform:uppercase;letter-spacing:.3px}.tab-btn[_ngcontent-%COMP%]:hover{color:#1a2a5e;background:#1a2a5e0d}.tab-btn.active[_ngcontent-%COMP%]{color:#1a2a5e;border-bottom-color:#1a2a5e;background:transparent}.section-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:#1a1a1a;margin-bottom:20px;font-weight:800;letter-spacing:-.3px}.filters-bar[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-end;padding:24px;background:#fff;border-radius:12px;margin-bottom:20px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014}.filter-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#333;font-size:.9rem;letter-spacing:0px}.filter-select[_ngcontent-%COMP%], .filter-input[_ngcontent-%COMP%]{padding:12px 14px;border:2px solid #e0e0e0;border-radius:8px;background:#f8f9fa;font-size:.95rem;transition:all .3s cubic-bezier(.4,0,.2,1)}.filter-select[_ngcontent-%COMP%]:hover, .filter-input[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.filter-select[_ngcontent-%COMP%]:focus, .filter-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.btn-reset-filters[_ngcontent-%COMP%]{padding:12px 24px;background:#fff;color:#333;border:2px solid #e0e0e0;border-radius:8px;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;text-transform:uppercase;letter-spacing:.3px;font-size:.85rem}.btn-reset-filters[_ngcontent-%COMP%]:hover{background:#f8f9fa;border-color:#1a2a5e;color:#1a2a5e;transform:translateY(-2px);box-shadow:0 8px 20px #1a2a5e26}.results-count[_ngcontent-%COMP%]{margin-bottom:15px;color:#666;font-weight:500}.reports-table[_ngcontent-%COMP%]{overflow-x:auto;background:#fff;border-radius:12px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;padding:16px;text-align:left;font-weight:700;font-size:.85rem;text-transform:uppercase;letter-spacing:.3px}td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e0e0e0;vertical-align:top;color:#333}tr[_ngcontent-%COMP%]:hover{background:#1a2a5e08}.date-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.date-display[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 14px;border-radius:6px;font-size:.7rem;font-weight:800;text-transform:uppercase;letter-spacing:.2px}.priority-high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b33,#ee5a6f33);color:#ff6b6b;border:1px solid #ff6b6b}.priority-medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa04d33,#fd7e1433);color:#fd7e14;border:1px solid #ffa94d}.priority-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf6633,#40c05733);color:#51cf66;border:1px solid #51cf66}.location-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.location-display[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.reporter-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.reporter-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.reporter-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.8rem}.thumbnail[_ngcontent-%COMP%]{max-width:100px;max-height:100px;width:auto;height:auto;border-radius:8px;border:1px solid #e0e0e0;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px #0000000f}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 8px 20px #667eea26;border-color:#667eea}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.08);z-index:10;position:relative}.no-image[_ngcontent-%COMP%]{color:#999;font-style:italic}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-approve[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:8px;font-size:.8rem;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;text-transform:uppercase;letter-spacing:.2px;min-height:36px}.btn-edit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea33}.btn-edit[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#764ba2,#667eea);transform:translateY(-2px);box-shadow:0 8px 20px #667eea4d}.btn-save[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff;box-shadow:0 4px 12px #51cf6633}.btn-save[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40c057,#51cf66);transform:translateY(-2px);box-shadow:0 8px 20px #51cf664d}.btn-cancel[_ngcontent-%COMP%]{background:#e0e0e0;color:#333;border:1px solid #d0d0d0}.btn-cancel[_ngcontent-%COMP%]:hover{background:#d0d0d0;transform:translateY(-2px)}.btn-approve[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff;box-shadow:0 4px 12px #51cf6633}.btn-approve[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40c057,#51cf66);transform:translateY(-2px);box-shadow:0 8px 20px #51cf664d}.btn-delete[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff;box-shadow:0 4px 12px #ff6b6b33}.btn-delete[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ee5a6f,#ff6b6b);transform:translateY(-2px);box-shadow:0 8px 20px #ff6b6b4d}.reports-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.report-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:all .3s}.report-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 16px #00000026}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;background:#f5f7ff;border-bottom:2px solid #9fa8da}.report-date[_ngcontent-%COMP%]{font-size:.85rem;color:#666;font-weight:500}.card-body[_ngcontent-%COMP%]{padding:20px}.report-title[_ngcontent-%COMP%]{font-size:1.1rem;color:#1a237e;margin-bottom:15px;font-weight:700}.report-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a237e;font-size:.9rem}.detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-size:.95rem}.text-muted[_ngcontent-%COMP%]{color:#666!important;font-size:.85rem!important}.coords[_ngcontent-%COMP%]{font-family:monospace;font-size:.85rem!important;background:#f5f7ff;padding:4px 8px;border-radius:4px}.report-image[_ngcontent-%COMP%]{margin-top:15px}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:6px;border:2px solid #e0e0e0}.card-footer[_ngcontent-%COMP%]{padding:15px;background:#f9f9f9;border-top:1px solid #e0e0e0}.btn-delete-approved[_ngcontent-%COMP%]{width:100%;padding:10px;background:#f44336;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s}.btn-delete-approved[_ngcontent-%COMP%]:hover{background:#d32f2f;transform:translateY(-2px);box-shadow:0 4px 8px #f443364d}.edit-location[_ngcontent-%COMP%], .edit-reporter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.edit-location[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-reporter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:8px;border:2px solid #9fa8da;border-radius:4px;font-size:.9rem}.edit-location[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .edit-reporter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a237e}.no-reports-message[_ngcontent-%COMP%]{padding:40px;text-align:center;background:#f5f7ff;border-radius:8px;color:#1a237e;font-size:1.1rem;font-weight:500}.loading[_ngcontent-%COMP%]{padding:40px;text-align:center;color:#666;font-size:1.1rem}@media (max-width: 992px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:20px}.dashboard-tabs[_ngcontent-%COMP%]{flex-wrap:wrap;gap:5px}.tab-btn[_ngcontent-%COMP%]{padding:10px 18px;font-size:.9rem}}@media (max-width: 768px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:15px}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.filters-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:15px;padding:15px}.filter-group[_ngcontent-%COMP%]{width:100%}.reports-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.reports-table[_ngcontent-%COMP%]{font-size:.85rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:6px}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-approve[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem;flex:1;min-width:70px}.thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.dashboard-tabs[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:5px}.tab-btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:.85rem;white-space:nowrap}.section-subtitle[_ngcontent-%COMP%]{font-size:1.3rem}}@media (max-width: 480px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:10px}.admin-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.admin-dashboard-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:.85rem}.tab-btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem}.filters-bar[_ngcontent-%COMP%]{padding:12px;gap:12px}.filter-select[_ngcontent-%COMP%], .filter-input[_ngcontent-%COMP%]{padding:10px;font-size:16px}.btn-reset-filters[_ngcontent-%COMP%]{padding:12px 16px;font-size:.9rem}.reports-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .reports-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block}.reports-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.reports-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid #e0e0e0;border-radius:8px;padding:10px}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;text-align:left;position:relative;padding:8px 10px 8px 40%}.reports-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:10px;font-weight:600;color:#1a237e;font-size:.8rem}.report-card[_ngcontent-%COMP%]{border-radius:10px}.card-header[_ngcontent-%COMP%]{padding:12px}.card-body[_ngcontent-%COMP%]{padding:15px}.card-footer[_ngcontent-%COMP%]{padding:12px}.report-title[_ngcontent-%COMP%]{font-size:1rem}}"]})};function XZ(n,e){if(n&1&&(_(0,"div",47),w(1),v()),n&2){let t=T(2);C(),ae(t.successMessage)}}function eY(n,e){if(n&1&&(_(0,"div",48),w(1),v()),n&2){let t=T(2);C(),ae(t.errorMessage)}}function tY(n,e){if(n&1&&(_(0,"span",49),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.description," ")}}function nY(n,e){if(n&1&&(_(0,"div",50),ne(),_(1,"svg",30),re(2,"path",51)(3,"polyline",52),v(),fe(),_(4,"span"),w(5),v()()),n&2){let t=T(2);C(5),xn("Location saved: ",t.location.lat.toFixed(5),", ",t.location.lng.toFixed(5))}}function iY(n,e){if(n&1&&(_(0,"span",49),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.location," ")}}function rY(n,e){if(n&1){let t=pe();_(0,"div",56),J("click",function(){let r=z(t).$implicit,o=T(3);return j(o.selectBarangay(r))}),w(1),v()}if(n&2){let t=e.$implicit;C(),be(" ",t," ")}}function oY(n,e){if(n&1&&(_(0,"div",57),w(1),v()),n&2){let t=T(3);C(),be(" + ",t.filteredBarangays.length-8," more results ")}}function sY(n,e){if(n&1){let t=pe();_(0,"div",53),J("mousedown",function(r){return z(t),j(r.preventDefault())}),te(1,rY,2,1,"div",54)(2,oY,2,1,"div",55),v()}if(n&2){let t=T(2);C(),H("ngForOf",t.filteredBarangays.slice(0,8)),C(),H("ngIf",t.filteredBarangays.length>8)}}function aY(n,e){if(n&1&&(_(0,"span",49),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.barangay," ")}}function cY(n,e){if(n&1&&(_(0,"span",49),w(1),v()),n&2){let t=T(2);C(),be(" ",t.validationErrors.street," ")}}function lY(n,e){if(n&1){let t=pe();_(0,"div",58),re(1,"img",59),_(2,"button",60),J("click",function(){z(t);let r=T(2);return j(r.removePhoto())}),w(3," Remove Photo "),v()()}if(n&2){let t=T(2);C(),H("src",t.imagePreview,Zt)}}function uY(n,e){if(n&1){let t=pe();Je(0),_(1,"form",5,1),J("ngSubmit",function(){z(t);let r=T();return j(r.onSubmit())}),te(3,XZ,2,1,"div",6)(4,eY,2,1,"div",7),_(5,"div",8)(6,"div",9),ne(),_(7,"svg",10),re(8,"path",11),v()(),fe(),_(9,"div",12)(10,"strong"),w(11,"Police Admin Report"),v(),_(12,"span"),w(13,"Submitted by: Police Admin"),v()()(),_(14,"div",13)(15,"h3",14),w(16,"Alert Details"),v(),_(17,"div",15)(18,"label",16),w(19,"Description *"),v(),_(20,"textarea",17),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.description,r)||(o.description=r),j(r)}),v(),te(21,tY,2,1,"span",18),v(),_(22,"div",15)(23,"label",19),w(24,"Priority *"),v(),_(25,"select",20),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.priority,r)||(o.priority=r),j(r)}),_(26,"option",21),w(27,"Urgent"),v(),_(28,"option",22),w(29,"Important"),v(),_(30,"option",23),w(31,"Advisory"),v()()()(),_(32,"div",13)(33,"h3",14),w(34,"Location"),v(),_(35,"div",24)(36,"label"),w(37,"Pin Location *"),v(),_(38,"p",25),w(39,"Click on the map or search to select location."),v(),_(40,"app-interactive-location-picker",26),J("locationSelected",function(r){z(t);let o=T();return j(o.onMapLocationSelected(r))}),v(),te(41,nY,6,2,"div",27)(42,iY,2,1,"span",18),v(),_(43,"div",28)(44,"div",29),ne(),_(45,"svg",30),re(46,"path",31)(47,"circle",32),v(),fe(),_(48,"span"),w(49,"Philippines > Benguet > Baguio City"),v()()(),_(50,"div",33)(51,"label",34),w(52,"Barangay *"),v(),_(53,"input",35),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.barangay,r)||(o.barangay=r),j(r)}),J("input",function(r){z(t);let o=T();return j(o.filterBarangays(r))})("focus",function(){z(t);let r=T();return j(r.showBarangaySuggestions=!0)})("blur",function(){z(t);let r=T();return j(r.showBarangaySuggestions=!1)}),v(),te(54,sY,3,2,"div",36)(55,aY,2,1,"span",18),v(),_(56,"div",15)(57,"label",37),w(58,"Street *"),v(),_(59,"input",38),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.street,r)||(o.street=r),j(r)}),v(),te(60,cY,2,1,"span",18),v(),_(61,"div",15)(62,"label",39),w(63,"Landmark (Optional)"),v(),_(64,"input",40),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.landmark,r)||(o.landmark=r),j(r)}),v()(),_(65,"div",15)(66,"label",41),w(67,"Attach Photo (Optional)"),v(),_(68,"input",42),J("change",function(r){z(t);let o=T();return j(o.onFileSelected(r))}),v(),te(69,lY,4,1,"div",43),v()(),_(70,"div",44)(71,"button",45),w(72),v(),_(73,"a",46),w(74," Cancel "),v()()(),Xe()}if(n&2){let t=T();C(3),H("ngIf",t.successMessage),C(),H("ngIf",t.errorMessage),C(16),xt("ngModel",t.description),C(),H("ngIf",t.validationErrors.description),C(4),xt("ngModel",t.priority),C(15),H("barangayInput",t.barangay)("streetInput",t.street),C(),H("ngIf",t.location),C(),H("ngIf",t.validationErrors.location),C(11),xt("ngModel",t.barangay),C(),H("ngIf",t.showBarangaySuggestions&&t.filteredBarangays.length>0),C(),H("ngIf",t.validationErrors.barangay),C(4),xt("ngModel",t.street),C(),H("ngIf",t.validationErrors.street),C(4),xt("ngModel",t.landmark),C(5),H("ngIf",t.imagePreview),C(2),H("disabled",t.isLoading),C(),be(" ",t.isLoading?"Issuing Alert...":"Issue Safety Alert"," ")}}function dY(n,e){n&1&&(_(0,"div",61)(1,"p",62),w(2,"You must be signed in as admin to create reports."),v(),_(3,"div",63)(4,"a",64),w(5,"Sign In"),v()()())}var Oy=class n{reportService=F(gn);authService=F(un);router=F(Mt);toastService=F(ei);description="";street="";barangay="";landmark="";city="Baguio City";priority="high";location=null;locationAccuracy=null;isGettingLocation=!1;locationError=null;selectedFile=null;imagePreview=null;imageUrl=null;isUploadingImage=!1;errorMessage=null;successMessage=null;isLoading=!1;validationErrors={};baguioBarangays=["A. Bonifacio-Caguioa-Rimando (ABCR)","Abanao-Zandueta-Kayong-Chugum-Otek (AZKCO)","Alfonso Tabora","Ambiong","Andres Bonifacio (Lower Bokawkan)","Apugan-Loakan","Asin Road","Atok Trail","Aurora Hill Proper (Malvar-Sgt. Floresca)","Aurora Hill, North Central","Aurora Hill, South Central","Bagong Lipunan (Market Area)","Baguio Dairy Farm","Bakakeng Central","Bakakeng North","Bal-Marcoville (Marcoville)","Balsigan","Bayan Park East","Bayan Park Village","Bayan Park West (Bayan Park)","BGH Compound","Brookside","Brookspoint","Cabinet Hill-Teacher's Camp","Camdas Subdivision","Camp 7","Camp 8","Camp Allen","Campo Filipino","City Camp Central","City Camp Proper","Country Club Village","Cresencia Village","Dagisitan","Dagsian, Lower","Dagsian, Upper","Dizon Subdivision","Dominican Hill-Mirador","Dontogan","DPS Area","Engineers' Hill","Fairview Village","Ferdinand (Happy Homes-Campo Sioco)","Fort del Pilar","Gabriel Silang","General Emilio F. Aguinaldo (Quirino-Magsaysay, Upper)","General Luna, Lower","General Luna, Upper","Gibraltar","Greenwater Village","Guisad Central","Guisad Sorong","Happy Hollow","Happy Homes (Happy Homes-Lucban)","Harrison-Claudio Carantes","Hillside","Holy Ghost Extension","Holy Ghost Proper","Honeymoon (Honeymoon-Holy Ghost)","Imelda R. Marcos (La Salle)","Imelda Village","Irisan","Kabayanihan","Kagitingan","Kayang Extension","Kayang-Hilltop","Kias","Legarda-Burnham-Kisad","Liwanag-Loakan","Loakan Proper","Lopez Jaena","Lourdes Subdivision Extension","Lourdes Subdivision, Lower","Lourdes Subdivision, Proper","Lualhati","Lucnab","Magsaysay Private Road","Magsaysay, Lower","Magsaysay, Upper","Malcolm Square-Perfecto (Jose Abad Santos)","Manuel A. Roxas","Market Subdivision, Upper","Middle Quezon Hill Subdivision (Quezon Hill Middle)","Military Cut-off","Mines View Park","Modern Site, East","Modern Site, West","MRR-Queen of Peace","New Lucban","Outlook Drive","Pacdal","Padre Burgos","Padre Zamora","Palma-Urbano (Cari\xF1o-Palma)","Phil-Am","Pinget","Pinsao Pilot Project","Pinsao Proper","Poliwes","Pucsusan","Quezon Hill Proper","Quezon Hill, Upper","Quirino Hill, East","Quirino Hill, Lower","Quirino Hill, Middle","Quirino Hill, West","Quirino-Magsaysay, Lower (Quirino-Magsaysay, West)","Rizal Monument Area","Rock Quarry, Lower","Rock Quarry, Middle","Rock Quarry, Upper","Salud Mitra","San Antonio Village","San Luis Village","San Roque Village","San Vicente","Sanitary Camp, North","Sanitary Camp, South","Santa Escolastica","Santo Rosario","Santo Tomas Proper","Santo Tomas School Area","Scout Barrio","Session Road Area","Slaughter House Area (Santo Ni\xF1o Slaughter)","SLU-SVP Housing Village","South Drive","Teodora Alonzo","Trancoville","Upper General Luna","Victoria Village","Websters Subdivision"];filteredBarangays=[...this.baguioBarangays];showBarangaySuggestions=!1;recentReports=[];ngOnInit(){this.reportService.getAllReports().subscribe(e=>{this.recentReports=(e||[]).slice(-30).reverse()})}onSelectLocation(e){if(e){if(e.startsWith("brgy:")){let t=e.replace("brgy:","");this.barangay=t;let i=this.recentReports.find(r=>(r.barangay||"").toLowerCase()===t.toLowerCase());i&&i.location?(this.location=i.location,this.street=this.street||i.street||"",this.locationAccuracy=i.locationAccuracy||null,this.locationError=null):(this.location=null,this.locationAccuracy=null,this.locationError="No coordinates found for selected barangay from recent reports. You may use Get Current Location.")}else if(e.startsWith("rpt:")){let t=e.replace("rpt:",""),i=this.recentReports.find(r=>r.id===t);i&&(this.location=i.location||null,this.locationAccuracy=i.locationAccuracy||null,this.barangay=i.barangay||this.barangay,this.street=i.street||this.street,this.locationError=null)}}}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.showBarangaySuggestions=!0,!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.barangay=e,this.showBarangaySuggestions=!1,this.filteredBarangays=[...this.baguioBarangays]}getAddressFromCoordinates(e,t){return S(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,a=o.road||o.street||o.neighbourhood||"",l=o.suburb||o.neighbourhood||o.quarter||"";if(a&&!this.street&&(this.street=a),l){let u=this.baguioBarangays.find(f=>f.toLowerCase().includes(l.toLowerCase())||l.toLowerCase().includes(f.toLowerCase().split("(")[0].trim().toLowerCase()));u&&!this.barangay&&(this.barangay=u)}}}catch(i){console.warn("Could not fetch address details:",i)}})}getCurrentLocation(){if(!navigator.geolocation){this.locationError="Geolocation is not supported by your browser.";return}this.isGettingLocation=!0,this.locationError=null,navigator.geolocation.getCurrentPosition(e=>S(this,null,function*(){let t=e.coords.latitude,i=e.coords.longitude;t>=16.35&&t<=16.48&&i>=120.52&&i<=120.66?(this.location={lat:t,lng:i},this.locationAccuracy=e.coords.accuracy,this.locationError=null,yield this.getAddressFromCoordinates(t,i)):(this.locationError="Your location is outside Baguio City. Please ensure you are within Baguio City to report an incident.",this.location=null),this.isGettingLocation=!1}),e=>{switch(this.isGettingLocation=!1,e.code){case e.PERMISSION_DENIED:this.locationError="Location access denied. Please enable location access to submit a report.";break;case e.POSITION_UNAVAILABLE:this.locationError="Location information unavailable. Please check your GPS settings.";break;case e.TIMEOUT:this.locationError="Location request timed out. Please try again.";break;default:this.locationError="Unable to get your location. Please try again."}this.location=null},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}validateForm(){this.validationErrors={};let e=[];return this.description.trim()||(this.validationErrors.description="Description is required.",e.push("Description")),this.location||(this.validationErrors.location="Please select a location on the map.",e.push("Location")),this.barangay.trim()||(this.validationErrors.barangay="Barangay is required.",e.push("Barangay")),this.street.trim()||(this.validationErrors.street="Street is required.",e.push("Street")),e.length>0&&this.toastService.warning(`Please fill in: ${e.join(", ")}`),Object.keys(this.validationErrors).length===0}onSubmit(){return S(this,null,function*(){if(this.errorMessage=null,this.successMessage=null,!!this.validateForm()){this.isLoading=!0;try{let e=yield ga(this.authService.currentUser$);if(!e){this.toastService.error("You must be logged in as admin to create reports."),this.errorMessage="You must be logged in as admin to create reports.",setTimeout(()=>this.router.navigate(["/login"]),900),this.isLoading=!1;return}if(!this.location){this.toastService.warning("Location is required. Please enable location access and try again."),this.errorMessage="Location is required. Please enable location access and try again.",this.isLoading=!1;return}let t={reporterId:"ADMIN",reporterName:"Police Admin",reporterEmail:e.email||"admin@mountainsentinel.com",description:this.description.trim(),street:this.street.trim(),barangay:this.barangay.trim(),landmark:this.landmark.trim()||void 0,city:this.city,priority:this.priority,location:this.location,locationAccuracy:this.locationAccuracy??void 0,timestamp:new Date().toISOString(),isAdminReport:!0,imageUrl:this.imageUrl||void 0};yield ga(this.reportService.submitReport(t));let i=yield ga(this.reportService.getAllReports()),r=i[i.length-1];r&&this.reportService.approveReport(r.id),this.toastService.success("Safety alert issued and published successfully!"),this.successMessage="Safety alert issued and published successfully!",this.clearForm(),setTimeout(()=>{this.router.navigate(["/admin-dashboard"])},1500)}catch(e){console.error("Report creation failed:",e),this.toastService.error("Submission failed. Please try again."),this.errorMessage="Submission failed. Please try again."}finally{this.isLoading=!1}}})}clearForm(){this.description="",this.street="",this.barangay="",this.landmark="",this.priority="high",this.location=null,this.locationAccuracy=null}onMapLocationSelected(e){this.location={lat:e.lat,lng:e.lng},this.locationAccuracy=10,this.locationError=null,this.validationErrors.location&&delete this.validationErrors.location,e.address?this.parseAddressToFields(e.address):this.reverseGeocodeAndFill(e.lat,e.lng)}parseAddressToFields(e){let t=e.split(",").map(i=>i.trim());for(let i of t){let r=this.baguioBarangays.find(o=>o.toLowerCase().includes(i.toLowerCase())||i.toLowerCase().includes(o.toLowerCase().split("(")[0].trim().toLowerCase()));if(r){this.barangay=r;break}}if(t.length>0&&!this.street){let i=t[0];this.baguioBarangays.some(r=>r.toLowerCase().includes(i.toLowerCase()))||(this.street=i)}}reverseGeocodeAndFill(e,t){return S(this,null,function*(){try{let r=yield(yield fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`)).json();if(r&&r.address){let o=r.address,a=o.road||o.street||o.neighbourhood||o.hamlet||"";a&&!this.street&&(this.street=a);let l=o.suburb||o.neighbourhood||o.quarter||o.village||"";if(l){let u=this.baguioBarangays.find(f=>f.toLowerCase().includes(l.toLowerCase())||l.toLowerCase().includes(f.toLowerCase().split("(")[0].trim().toLowerCase()));u&&!this.barangay&&(this.barangay=u)}}}catch(i){console.warn("Could not reverse geocode for auto-fill:",i)}})}saveFormProgress(){}onFileSelected(e){let t=e.target;if(t.files&&t.files[0]){let i=t.files[0];if(!i.type.startsWith("image/")){this.toastService.error("Please select an image file.");return}if(i.size>5*1024*1024){this.toastService.error("Image size must be less than 5MB.");return}this.selectedFile=i;let r=new FileReader;r.onload=o=>{this.imagePreview=o.target?.result,this.imageUrl=this.imagePreview},r.readAsDataURL(i)}}removePhoto(){this.selectedFile=null,this.imagePreview=null,this.imageUrl=null}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-admin-report"]],decls:9,vars:4,consts:[["notLogged",""],["reportForm","ngForm"],[1,"admin-report-container"],[1,"subtitle"],[4,"ngIf","ngIfElse"],[3,"ngSubmit"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],[1,"admin-info-banner"],[1,"badge-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 6c1.4 0 2.8 1.1 2.8 2.5V11c.6.3 1 .9 1 1.5v3c0 1-.8 1.8-1.8 1.8h-4c-1 0-1.8-.8-1.8-1.8v-3c0-.6.4-1.2 1-1.5V9.5C9.2 8.1 10.6 7 12 7zm0 1.2c-.8 0-1.5.5-1.5 1.3v1.5h3V9.5c0-.8-.7-1.3-1.5-1.3z"],[1,"badge-text"],[1,"form-section"],[1,"section-title"],[1,"form-group"],["for","description"],["id","description","name","description","rows","5","required","","placeholder","Provide a detailed description of the incident...",3,"ngModelChange","ngModel"],["class","error-text",4,"ngIf"],["for","priority"],["id","priority","name","priority","required","",3,"ngModelChange","ngModel"],["value","high"],["value","medium"],["value","low"],[1,"form-group","map-picker-group"],[1,"help-text"],[3,"locationSelected","barangayInput","streetInput"],["class","location-confirmed-badge",4,"ngIf"],[1,"location-hierarchy"],[1,"hierarchy-label"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"form-group","barangay-group"],["for","barangay"],["id","barangay","type","text","name","barangay","required","","placeholder","Type to search barangay...","autocomplete","off",3,"ngModelChange","input","focus","blur","ngModel"],["class","barangay-suggestions",3,"mousedown",4,"ngIf"],["for","street"],["id","street","type","text","name","street","required","","placeholder","Enter street or purok...",3,"ngModelChange","ngModel"],["for","landmark"],["id","landmark","type","text","name","landmark","placeholder","e.g., Near Burnham Park, SM Baguio",3,"ngModelChange","ngModel"],["for","photo"],["id","photo","type","file","accept","image/*",3,"change"],["class","photo-preview",4,"ngIf"],[1,"button-group"],["type","submit",1,"submit-btn",3,"disabled"],["routerLink","/admin-dashboard",1,"cancel-btn"],[1,"message","success"],[1,"message","error"],[1,"error-text"],[1,"location-confirmed-badge"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"barangay-suggestions",3,"mousedown"],["class","suggestion-item",3,"click",4,"ngFor","ngForOf"],["class","suggestion-more",4,"ngIf"],[1,"suggestion-item",3,"click"],[1,"suggestion-more"],[1,"photo-preview"],["alt","Photo preview",3,"src"],["type","button",1,"remove-photo-btn",3,"click"],[1,"not-logged"],[1,"login-warning"],[1,"action-row"],["href","/login",1,"btn","login-btn"]],template:function(t,i){if(t&1&&(_(0,"div",2)(1,"h2"),w(2,"Issue Police Alert"),v(),_(3,"p",3),w(4,"This alert will be published immediately."),v(),te(5,uY,75,18,"ng-container",4),xe(6,"async"),te(7,dY,6,0,"ng-template",null,0,It),v()),t&2){let r=dt(8);C(5),H("ngIf",Te(6,2,i.authService.currentUser$))("ngIfElse",r)}},dependencies:[ht,An,zt,mn,zd,sc,ac,bi,ts,Wi,Ud,Tl,Ri,Sl,Xr,Gi,jd,ln],styles:[".admin-report-container[_ngcontent-%COMP%]{max-width:900px;margin:20px auto;padding:25px;background:linear-gradient(135deg,#e8eef5,#f0f4f8);border-radius:12px;box-shadow:0 4px 12px #00000026}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#1a2a5e;font-size:clamp(1.25rem,4vw,2.5rem);margin-bottom:8px;font-weight:700;letter-spacing:.5px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:16px;font-size:clamp(.85rem,3vw,1rem);line-height:1.4}.admin-info-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:8px;margin-bottom:16px;color:#fff;box-shadow:0 3px 8px #1a2a5e4d}.badge-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:44px;height:44px;background:#ffffff26;border-radius:50%;flex-shrink:0}.badge-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#fff}.badge-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.badge-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(.95rem,2.5vw,1.2rem);line-height:1.2}.badge-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:clamp(.8rem,2vw,.9rem);opacity:.9;line-height:1.2}.form-section[_ngcontent-%COMP%]{background:#f0f4f8;padding:16px;border-radius:8px;margin-bottom:16px;box-shadow:0 2px 4px #0000000d}.section-title[_ngcontent-%COMP%]{color:#1a2a5e;font-size:clamp(1.1rem,3vw,1.4rem);font-weight:700;margin-bottom:14px;padding-bottom:8px;border-bottom:3px solid #d4a84b;line-height:1.2}.form-group[_ngcontent-%COMP%]{margin-bottom:14px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:700;color:#1a2a5e;font-size:clamp(.85rem,2.5vw,1rem)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:2px solid #c5cdd8;border-radius:6px;font-size:1rem;background:#f8fafc;transition:all .3s;font-family:inherit;min-height:44px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;padding:10px}.photo-preview[_ngcontent-%COMP%]{margin-top:8px;display:flex;flex-direction:column;align-items:flex-start;gap:6px}.photo-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:180px;max-height:140px;border-radius:8px;border:1px solid #c5cdd8;box-shadow:0 2px 8px #00000014}.remove-photo-btn[_ngcontent-%COMP%]{background:#d32f2f;color:#fff;border:none;border-radius:6px;padding:6px 12px;font-size:.9rem;cursor:pointer;margin-top:3px;transition:background .2s;min-height:36px}.remove-photo-btn[_ngcontent-%COMP%]:hover{background:#b71c1c}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;z-index:1000;background:#fff;border:2px solid #1a2a5e;border-radius:8px;max-height:200px;overflow-y:auto;box-shadow:0 8px 24px #0003;margin-top:2px;width:100%;left:0;right:0}.suggestion-item[_ngcontent-%COMP%]{padding:10px 14px;cursor:pointer;transition:all .15s ease;border-bottom:1px solid #eef2f7;font-size:.9rem;color:#1a2a5e;min-height:40px;display:flex;align-items:center}.suggestion-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e8eef5,#f0f4f8);padding-left:18px}.suggestion-more[_ngcontent-%COMP%]{padding:8px 14px;text-align:center;color:#666;font-size:.8rem;background:#f8fafc;border-top:1px solid #eef2f7;min-height:36px;display:flex;align-items:center;justify-content:center}.location-info[_ngcontent-%COMP%]{position:relative}.get-location-btn[_ngcontent-%COMP%]{width:100%;padding:10px;background:#1a2a5e;color:#fff;border:none;border-radius:6px;font-size:.95rem;font-weight:700;cursor:pointer;transition:all .3s;text-transform:uppercase;letter-spacing:.5px;margin-bottom:12px;min-height:44px}.get-location-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2a3f7a;transform:translateY(-2px);box-shadow:0 4px 12px #1a2a5e4d}.get-location-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.location-display[_ngcontent-%COMP%]{padding:12px;background:#fff;border:2px solid #c5cdd8;border-radius:6px;margin-bottom:12px}.location-coords[_ngcontent-%COMP%]{margin:6px 0;font-size:.9rem;color:#333;word-break:break-all}.location-accuracy[_ngcontent-%COMP%]{margin:6px 0;font-size:.85rem;color:#666;font-style:italic}.location-error[_ngcontent-%COMP%]{padding:10px;background:#ffebee;color:#c62828;border-radius:6px;border:2px solid #ef5350;margin-bottom:12px;font-weight:500;font-size:.9rem}.help-text[_ngcontent-%COMP%]{font-size:.8rem;color:#666;margin:6px 0 0;font-style:italic}.hierarchy-note[_ngcontent-%COMP%]{color:#1a2a5e;font-size:.85rem;font-weight:600;margin-bottom:12px;padding:10px 12px;background:linear-gradient(135deg,#d4a84b1f,#d4a84b0d);border-left:3px solid #d4a84b;border-radius:4px;line-height:1.4}.readonly-field[_ngcontent-%COMP%]{background-color:#e9ecef!important;color:#6c757d!important;cursor:not-allowed}.barangay-group[_ngcontent-%COMP%]{position:relative}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;background:#fff;border:2px solid #1a2a5e;border-top:none;border-radius:0 0 8px 8px;max-height:200px;overflow-y:auto;width:100%;box-shadow:0 8px 24px #1a2a5e26;z-index:1000;color:#333;top:100%;left:0;right:0}.suggestion-item[_ngcontent-%COMP%]{padding:10px 14px;cursor:pointer;transition:all .15s ease;border-bottom:1px solid #e0e0e0;font-size:.9rem;min-height:40px;display:flex;align-items:center}.suggestion-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#1a2a5e;padding-left:16px}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-more[_ngcontent-%COMP%]{padding:8px 14px;background:#f0f4f8;color:#6c757d;font-style:italic;font-size:.8rem;text-align:center;border-top:1px solid #e0e0e0;min-height:36px;display:flex;align-items:center;justify-content:center}.message[_ngcontent-%COMP%]{padding:12px;border-radius:6px;margin-bottom:16px;font-weight:600;text-align:center;font-size:.95rem}.message.success[_ngcontent-%COMP%]{background:#c8e6c9;color:#2e7d32;border:2px solid #66bb6a}.message.error[_ngcontent-%COMP%]{background:#ffcdd2;color:#c62828;border:2px solid #ef5350}.error-text[_ngcontent-%COMP%]{display:block;color:#c62828;font-size:.8rem;margin-top:4px;font-weight:600}.button-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}.submit-btn[_ngcontent-%COMP%]{flex:1;min-width:140px;padding:12px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:none;border-radius:8px;font-size:clamp(.9rem,2.5vw,1.1rem);font-weight:700;cursor:pointer;transition:all .3s;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 12px #1a2a5e4d;min-height:44px}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-2px);box-shadow:0 6px 16px #1a2a5e66}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.cancel-btn[_ngcontent-%COMP%]{flex:0 1 auto;padding:12px 20px;background:#9e9e9e;color:#fff;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s;text-decoration:none;text-align:center;display:flex;align-items:center;justify-content:center;min-height:44px}.cancel-btn[_ngcontent-%COMP%]:hover{background:#757575;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.not-logged[_ngcontent-%COMP%]{text-align:center;padding:30px 20px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a}.login-warning[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.2rem);color:#666;margin-bottom:16px}.action-row[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;flex-wrap:wrap}.login-btn[_ngcontent-%COMP%]{padding:12px 20px;background:#1a237e;color:#fff;text-decoration:none;border-radius:6px;font-weight:600;transition:all .3s;min-height:44px;display:flex;align-items:center;justify-content:center;font-size:.95rem}.login-btn[_ngcontent-%COMP%]:hover{background:#0d1654;transform:translateY(-2px);box-shadow:0 4px 12px #1a237e4d}.map-picker-group[_ngcontent-%COMP%]{margin-bottom:16px}.map-picker-group[_ngcontent-%COMP%]   app-interactive-location-picker[_ngcontent-%COMP%]{display:block;margin-top:8px;border-radius:8px;overflow:hidden;box-shadow:0 4px 16px #00000026}.location-confirmed-badge[_ngcontent-%COMP%]{gap:8px;margin-top:10px;padding:10px 12px;background:linear-gradient(135deg,#2ecc71,#27ae60);color:#fff;border-radius:8px;font-size:.85rem;font-weight:600;box-shadow:0 3px 10px #2ecc714d;min-height:40px;display:flex;align-items:center}.location-confirmed-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;width:16px;height:16px}.location-hierarchy[_ngcontent-%COMP%]{margin:12px 0;padding:10px 12px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);border-radius:8px;border-left:4px solid #d4a84b}.hierarchy-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#fff;font-size:.85rem;font-weight:500;word-break:break-word}.hierarchy-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#d4a84b;flex-shrink:0;width:18px;height:18px}@media (max-width: 768px){.admin-report-container[_ngcontent-%COMP%]{padding:16px;margin:12px;max-width:100%}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:6px}.subtitle[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:12px}.admin-info-banner[_ngcontent-%COMP%]{gap:10px;padding:12px;margin-bottom:12px}.badge-icon[_ngcontent-%COMP%]{width:40px;height:40px}.badge-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.badge-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1rem}.badge-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem}.form-section[_ngcontent-%COMP%]{padding:14px;margin-bottom:12px}.section-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:12px}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:4px;font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:9px;font-size:1rem}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:70px}.barangay-suggestions[_ngcontent-%COMP%]{max-height:180px}.suggestion-item[_ngcontent-%COMP%]{padding:9px 12px;font-size:.85rem;min-height:38px}.map-picker-group[_ngcontent-%COMP%]   app-interactive-location-picker[_ngcontent-%COMP%]{border-radius:8px}.location-hierarchy[_ngcontent-%COMP%]{padding:8px 10px;margin:10px 0}.hierarchy-label[_ngcontent-%COMP%]{font-size:.8rem;gap:6px}.button-group[_ngcontent-%COMP%]{flex-direction:column;gap:8px;margin-top:12px}.submit-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%]{width:100%;padding:11px;min-width:unset;font-size:.9rem}.message[_ngcontent-%COMP%]{padding:10px;font-size:.9rem;margin-bottom:12px}}@media (max-width: 480px){.admin-report-container[_ngcontent-%COMP%]{padding:12px;margin:8px}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:4px}.subtitle[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:10px}.admin-info-banner[_ngcontent-%COMP%]{gap:8px;padding:10px;margin-bottom:10px}.badge-icon[_ngcontent-%COMP%]{width:36px;height:36px}.badge-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.badge-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.9rem}.badge-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7rem}.form-section[_ngcontent-%COMP%]{padding:12px;margin-bottom:10px;border-radius:6px}.section-title[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:10px;border-bottom-width:2px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:4px;font-size:.85rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px;font-size:16px;min-height:42px;border-radius:5px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:60px}.photo-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:140px;max-height:110px}.remove-photo-btn[_ngcontent-%COMP%]{padding:5px 10px;font-size:.85rem;min-height:32px}.barangay-suggestions[_ngcontent-%COMP%]{max-height:160px;border-radius:6px;margin-top:0}.suggestion-item[_ngcontent-%COMP%]{padding:8px 10px;font-size:.8rem;min-height:36px}.suggestion-more[_ngcontent-%COMP%]{font-size:.75rem;padding:6px 10px;min-height:32px}.get-location-btn[_ngcontent-%COMP%]{padding:9px;font-size:.85rem;letter-spacing:0;min-height:42px}.location-display[_ngcontent-%COMP%]{padding:10px;margin-bottom:10px;border-radius:5px}.location-coords[_ngcontent-%COMP%]{font-size:.8rem;margin:4px 0}.location-accuracy[_ngcontent-%COMP%]{font-size:.75rem;margin:4px 0}.location-error[_ngcontent-%COMP%]{padding:8px;font-size:.8rem;margin-bottom:10px}.help-text[_ngcontent-%COMP%]{font-size:.75rem;margin:4px 0 0}.hierarchy-note[_ngcontent-%COMP%]{font-size:.8rem;padding:8px 10px;margin-bottom:10px;border-left-width:2px}.location-confirmed-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:8px 10px;margin-top:8px;min-height:36px;gap:6px}.location-confirmed-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.location-hierarchy[_ngcontent-%COMP%]{padding:8px 10px;margin:10px 0;border-left-width:3px}.hierarchy-label[_ngcontent-%COMP%]{font-size:.75rem;gap:6px}.hierarchy-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.button-group[_ngcontent-%COMP%]{gap:6px;margin-top:10px}.submit-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:.85rem;min-height:42px;border-radius:6px}.not-logged[_ngcontent-%COMP%]{padding:20px 16px;margin:10px}.login-warning[_ngcontent-%COMP%]{font-size:.95rem;margin-bottom:12px}.action-row[_ngcontent-%COMP%]{gap:8px}.login-btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:.85rem;min-height:42px}.message[_ngcontent-%COMP%]{padding:8px;font-size:.85rem;margin-bottom:10px}.error-text[_ngcontent-%COMP%]{font-size:.75rem;margin-top:3px}}@media (max-width: 375px){.admin-report-container[_ngcontent-%COMP%]{padding:10px;margin:6px}.admin-report-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:7px;font-size:16px}.submit-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:9px}.badge-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.85rem}.hierarchy-label[_ngcontent-%COMP%]{font-size:.7rem}}"]})};function hY(n,e){if(n&1){let t=pe();_(0,"button",11),J("click",function(){z(t);let r=T();return j(r.clearSearch())}),ne(),_(1,"svg",12),re(2,"line",13)(3,"line",14),v()()}}function fY(n,e){if(n&1&&(_(0,"div",24),re(1,"img",25),v()),n&2){let t=T().$implicit;C(),H("src",t.imageUrl,Zt)}}function pY(n,e){if(n&1&&(_(0,"div",19)(1,"div",20)(2,"h3"),w(3),v(),_(4,"span",21),w(5),v()(),_(6,"div",22)(7,"p")(8,"strong"),w(9,"Location:"),v(),w(10),v(),_(11,"p")(12,"strong"),w(13,"Reporter:"),v(),w(14),v(),_(15,"p")(16,"strong"),w(17,"Reported:"),v(),w(18),xe(19,"date"),v()(),te(20,fY,2,1,"div",23),v()),n&2){let t=e.$implicit;C(3),ae(t.description),C(2),ae(t.status),C(5),xn(" ",t.street,", ",t.barangay),C(4),be(" ",t.reporterName||t.reporterId),C(4),be(" ",Tn(19,7,t.createdAt,"short")),C(2),H("ngIf",t.imageUrl)}}function gY(n,e){if(n&1&&(Je(0),te(1,pY,21,10,"div",18),Xe()),n&2){let t=T().ngIf;C(),H("ngForOf",t)}}function mY(n,e){n&1&&(_(0,"p"),w(1,"No incidents match your search. Try different keywords."),v())}function _Y(n,e){n&1&&(_(0,"p"),w(1,"No incidents reported at this time. Stay safe!"),v())}function vY(n,e){if(n&1&&(_(0,"div",26),te(1,mY,2,0,"p",27)(2,_Y,2,0,"p",27),v()),n&2){let t=T(2);C(),H("ngIf",t.searchQuery.value),C(),H("ngIf",!t.searchQuery.value)}}function yY(n,e){if(n&1&&(_(0,"div",15)(1,"div",16),te(2,gY,2,1,"ng-container",17)(3,vY,3,2,"ng-template",null,1,It),v()()),n&2){let t=e.ngIf,i=dt(4);C(2),H("ngIf",t.length>0)("ngIfElse",i)}}function bY(n,e){n&1&&(_(0,"div",28),w(1,"Loading safety feed..."),v())}var Dy=class n{reportService=F(gn);searchQuery=new bt("");allApprovedReports$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.status==="approved")));filteredReports$=Mi([this.allApprovedReports$,this.searchQuery.pipe(Ui(""))]).pipe(ue(([e,t])=>{if(!t.trim())return e;let i=t.toLowerCase();return e.filter(r=>{let o=(r.description||"").toLowerCase(),a=(r.street||"").toLowerCase(),l=(r.barangay||"").toLowerCase(),u=(r.landmark||"").toLowerCase(),f=(r.reporterName||"").toLowerCase(),g=(r.createdAt||"").toString().toLowerCase();return o.includes(i)||a.includes(i)||l.includes(i)||u.includes(i)||f.includes(i)||g.includes(i)})}));ngOnInit(){}onSearchChange(e){this.searchQuery.next(e)}clearSearch(){this.searchQuery.next("")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-safety-feed"]],decls:16,vars:6,consts:[["loading",""],["emptyFeed",""],[1,"safety-feed-container"],[1,"search-container"],[1,"search-wrapper"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Search by location, keyword, or date...","aria-label","Search incident reports",1,"report-search-input",3,"input","value"],["class","clear-search-btn","title","Clear search","aria-label","Clear search",3,"click",4,"ngIf"],["class","feed-wrapper",4,"ngIf","ngIfElse"],["title","Clear search","aria-label","Clear search",1,"clear-search-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"feed-wrapper"],[1,"feed-list"],[4,"ngIf","ngIfElse"],["class","feed-item approved",4,"ngFor","ngForOf"],[1,"feed-item","approved"],[1,"item-header"],[1,"status-badge"],[1,"item-details"],["class","item-image",4,"ngIf"],[1,"item-image"],["alt","Incident",3,"src"],[1,"empty-feed"],[4,"ngIf"],[1,"loading"]],template:function(t,i){if(t&1){let r=pe();_(0,"div",2)(1,"h2"),w(2,"Real-Time Safety Feed"),v(),_(3,"p"),w(4,"View approved incident reports in real-time."),v(),_(5,"div",3)(6,"div",4),ne(),_(7,"svg",5),re(8,"circle",6)(9,"path",7),v(),fe(),_(10,"input",8),J("input",function(a){return z(r),j(i.onSearchChange(a.target.value))}),v(),te(11,hY,4,0,"button",9),v()(),te(12,yY,5,2,"div",10),xe(13,"async"),te(14,bY,2,0,"ng-template",null,0,It),v()}if(t&2){let r=dt(15);C(10),H("value",i.searchQuery.value),C(),H("ngIf",i.searchQuery.value),C(),H("ngIf",Te(13,4,i.filteredReports$))("ngIfElse",r)}},dependencies:[ht,An,zt,mn,ln,Qr],styles:[".safety-feed-container[_ngcontent-%COMP%]{padding:30px;max-width:1200px;margin:0 auto;display:flex;flex-direction:column;height:100vh}@media (max-width: 600px){.safety-feed-container[_ngcontent-%COMP%]{padding:10px 8px}}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%]{padding:20px 15px}}@media (max-width: 480px){.safety-feed-container[_ngcontent-%COMP%]{padding:15px 10px}}.safety-feed-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#1a3a52;margin-bottom:10px;text-align:center;flex-shrink:0}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.safety-feed-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:20px;flex-shrink:0}@media (max-width: 768px){.safety-feed-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:15px;font-size:.9rem}}.search-container[_ngcontent-%COMP%]{flex-shrink:0;margin-bottom:20px}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-icon[_ngcontent-%COMP%]{position:absolute;left:14px;color:#1a2a5e;pointer-events:none;z-index:1}.report-search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px;border:2px solid #e0e0e0;border-radius:8px;font-size:.95rem;background:#f8f9fa;color:#1a1a1a;transition:all .3s cubic-bezier(.4,0,.2,1);font-family:inherit}.report-search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.report-search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:12px;background:transparent;border:none;cursor:pointer;color:#999;padding:6px;display:flex;align-items:center;justify-content:center;transition:color .2s ease}.clear-search-btn[_ngcontent-%COMP%]:hover{color:#1a2a5e}.feed-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;border:1px solid #e0e0e0;border-radius:8px;background:#f5f5f5;padding:4px}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1a2a5e;border-radius:4px;transition:background .2s ease}.feed-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#2a3f7a}.feed-wrapper[_ngcontent-%COMP%]{scrollbar-color:#1a2a5e #f1f1f1;scrollbar-width:thin}.feed-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:8px}@media (max-width: 768px){.feed-list[_ngcontent-%COMP%]{gap:10px}}@media (max-width: 480px){.feed-list[_ngcontent-%COMP%]{gap:6px;padding:4px}}@media (max-width: 375px){.feed-list[_ngcontent-%COMP%]{gap:4px;padding:2px}}.feed-item[_ngcontent-%COMP%]{border-left:5px solid #ccc;padding:16px;margin-bottom:0;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;transition:box-shadow .2s ease}.feed-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001f}@media (max-width: 768px){.feed-item[_ngcontent-%COMP%]{padding:12px;border-radius:6px}}@media (max-width: 480px){.feed-item[_ngcontent-%COMP%]{padding:8px 6px;border-left-width:4px;border-radius:6px}}@media (max-width: 375px){.feed-item[_ngcontent-%COMP%]{padding:6px;border-left-width:3px}}.feed-item.approved[_ngcontent-%COMP%]{border-left-color:#4caf50}.feed-item.feed-item-high[_ngcontent-%COMP%]{border-left-color:#d32f2f;background-color:#fdeaea}.feed-item.feed-item-medium[_ngcontent-%COMP%]{border-left-color:#ffb300;background-color:#fff9e6}.feed-item.feed-item-low[_ngcontent-%COMP%]{border-left-color:#43a047;background-color:#edf7ed}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;font-weight:700;gap:12px}@media (max-width: 768px){.item-header[_ngcontent-%COMP%]{margin-bottom:10px}}@media (max-width: 480px){.item-header[_ngcontent-%COMP%]{flex-direction:column;gap:6px;margin-bottom:8px}}.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#333;flex:1}@media (max-width: 768px){.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 375px){.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.8rem}}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:.75rem;font-weight:700;background:#4caf50;color:#fff;text-transform:uppercase;white-space:nowrap}.item-details[_ngcontent-%COMP%]{margin-bottom:10px}@media (max-width: 768px){.item-details[_ngcontent-%COMP%]{margin-bottom:8px}}@media (max-width: 480px){.item-details[_ngcontent-%COMP%]{margin-bottom:6px}}.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:6px;font-size:.9rem}@media (max-width: 768px){.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:4px}}@media (max-width: 480px){.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:3px}}} .item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:.95rem;color:#555}@media (max-width: 768px){.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 480px){.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;margin:4px 0}}@media (max-width: 375px){.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem;margin:2px 0}}.type-tag[_ngcontent-%COMP%], .priority-tag[_ngcontent-%COMP%]{padding:2px 6px;border-radius:3px;font-size:.75rem;color:#fff}.type-tag[_ngcontent-%COMP%]{background-color:#3f51b5}.priority-tag.priority-high[_ngcontent-%COMP%]{background-color:#d32f2f}.priority-tag.priority-medium[_ngcontent-%COMP%]{background-color:#ffb300}.priority-tag.priority-low[_ngcontent-%COMP%]{background-color:#43a047}.item-description[_ngcontent-%COMP%]{margin:0 0 5px;font-size:.9rem}.item-footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:.7rem}.empty-feed[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;border:2px dashed #ccc;color:#888;border-radius:8px;background:#fafafa}@media (max-width: 768px){.empty-feed[_ngcontent-%COMP%]{padding:30px 15px}}@media (max-width: 600px){.empty-feed[_ngcontent-%COMP%]{padding:20px 10px}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em}.empty-feed[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .empty-feed[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .empty-feed[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:48px;height:48px;max-width:48px;max-height:48px}}.empty-feed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;font-size:1rem}.item-image[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:center}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:250px;width:auto;height:auto;border-radius:8px;border:1px solid #ddd;box-shadow:0 2px 8px #0000001a}@media (max-width: 768px){.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}}@media (max-width: 480px){.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:120px}}@media (max-width: 375px){.item-image[_ngcontent-%COMP%]{margin-top:8px}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100px}}"]})};var xY=n=>({"no-image":n}),wY=n=>["/report-detail",n],CY=(n,e)=>e.id;function EY(n,e){if(n&1){let t=pe();_(0,"button",24),J("click",function(){z(t);let r=T();return j(r.clearSearch())}),ne(),_(1,"svg",25),re(2,"line",26)(3,"line",27),v()()}}function IY(n,e){n&1&&(_(0,"div",28)(1,"div",29),ne(),_(2,"svg",30),re(3,"path",9)(4,"line",31)(5,"line",32),v()(),fe(),_(6,"h3"),w(7,"No Police Reports Found"),v(),_(8,"p"),w(9,"There are no official alerts matching your criteria at this time."),v()())}function MY(n,e){if(n&1&&(_(0,"span",51),ne(),_(1,"svg",52),re(2,"path",53),v(),fe(),_(3,"span"),w(4),v()()),n&2){let t=T().$implicit;C(4),ae(t.landmark)}}function PY(n,e){if(n&1&&(_(0,"div",54),re(1,"img",55),v()),n&2){let t=T().$implicit;C(),H("src",t.imageUrl,Zt)}}function SY(n,e){if(n&1&&(_(0,"div",34)(1,"div",35)(2,"span",36),w(3),v()(),_(4,"div",37)(5,"div",38),w(6),v(),_(7,"div",39)(8,"span",40),ne(),_(9,"svg",41),re(10,"path",42)(11,"circle",43),v(),fe(),_(12,"span"),w(13),v()(),te(14,MY,5,1,"span",44),_(15,"span",45),w(16),v()()(),te(17,PY,2,1,"div",46),_(18,"div",47)(19,"a",48),ne(),_(20,"svg",25),re(21,"line",49)(22,"polyline",50),v()()()()),n&2){let t=e.$implicit,i=T(3);Xc(ow("feed-item approved ",i.getPriorityClass(t.priority))),H("ngClass",L_(12,xY,!t.imageUrl)),C(3),ae(i.getPriorityLabel(t.priority)),C(3),ae(t.description),C(7),xn("",t.street,"",t.barangay?", "+t.barangay:""),C(),H("ngIf",t.landmark),C(2),ae(i.formatDate(t.createdAt)),C(),H("ngIf",t.imageUrl),C(2),H("routerLink",L_(14,wY,t.id))}}function TY(n,e){if(n&1&&Yc(0,SY,23,16,"div",33,CY),n&2){let t=T();Qc(t)}}function OY(n,e){n&1&&Ee(0,IY,10,0,"div",28)(1,TY,2,0),n&2&&Ie(e.length===0?0:1)}var Ay=class n{reportService=F(gn);searchQuery=new bt("");selectedPriority=new bt("all");allPoliceReports$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.isAdminReport&&t.status==="approved")));filteredReports$=Mi([this.allPoliceReports$,this.searchQuery.pipe(Ui("")),this.selectedPriority.pipe(Ui("all"))]).pipe(ue(([e,t,i])=>{let r=e;if(i!=="all"&&(r=r.filter(o=>o.priority===i)),t.trim()){let o=t.toLowerCase();r=r.filter(a=>{let l=(a.description||"").toLowerCase(),u=(a.street||"").toLowerCase(),f=(a.barangay||"").toLowerCase(),g=(a.landmark||"").toLowerCase();return l.includes(o)||u.includes(o)||f.includes(o)||g.includes(o)})}return r.sort((o,a)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}));ngOnInit(){}onSearchChange(e){this.searchQuery.next(e)}clearSearch(){this.searchQuery.next("")}onPriorityChange(e){this.selectedPriority.next(e)}getPriorityClass(e){switch(e){case"high":return"priority-high";case"medium":return"priority-medium";case"low":return"priority-low";default:return"priority-medium"}}getPriorityLabel(e){switch(e){case"high":return"Urgent";case"medium":return"Important";case"low":return"Advisory";default:return"Alert"}}formatDate(e){let t=new Date(e),i=new Date,r=i.getTime()-t.getTime(),o=Math.floor(r/6e4),a=Math.floor(r/36e5),l=Math.floor(r/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:l<7?`${l}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==i.getFullYear()?"numeric":void 0})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-police-issuance-reports"]],decls:40,vars:25,consts:[[1,"police-reports-page"],[1,"page-header"],["routerLink","/","aria-label","Go back to dashboard",1,"back-button"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M19 12H5"],["points","12 19 5 12 12 5"],[1,"header-content"],[1,"header-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],[1,"header-text"],[1,"controls-section"],[1,"search-container"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","placeholder","Search alerts...",1,"search-input",3,"ngModelChange","ngModel"],["aria-label","Clear search",1,"clear-search"],[1,"filter-tabs"],[1,"filter-tab",3,"click"],[1,"filter-tab","priority-high",3,"click"],[1,"filter-tab","priority-medium",3,"click"],[1,"filter-tab","priority-low",3,"click"],[1,"reports-list"],["aria-label","Clear search",1,"clear-search",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"empty-state"],[1,"empty-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[3,"class","ngClass"],[3,"ngClass"],[1,"item-header"],[1,"status-badge"],[1,"item-details"],[1,"report-desc"],[1,"meta-row"],[1,"location-row"],["width","16","height","16","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["class","landmark-row",4,"ngIf"],[1,"date-row"],["class","item-image",4,"ngIf"],[1,"item-footer"],[1,"view-details-btn",3,"routerLink"],["x1","5","y1","12","x2","19","y2","12"],["points","12 5 19 12 12 19"],[1,"landmark-row"],["width","14","height","14","fill","none","stroke","currentColor","stroke-width","2"],["d","M3 21h18M9 8h1M9 12h1M9 16h1M14 8h1M14 12h1M14 16h1M5 21V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16"],[1,"item-image"],["alt","Incident",3,"src"]],template:function(t,i){if(t&1&&(_(0,"div",0)(1,"header",1)(2,"a",2),ne(),_(3,"svg",3),re(4,"path",4)(5,"polyline",5),v()(),fe(),_(6,"div",6)(7,"div",7),ne(),_(8,"svg",8),re(9,"path",9),v()(),fe(),_(10,"div",10)(11,"h1"),w(12,"Police Issuance Reports"),v(),_(13,"p"),w(14,"Official alerts issued by Baguio City authorities"),v()()()(),_(15,"section",11)(16,"div",12),ne(),_(17,"svg",13),re(18,"circle",14)(19,"line",15),v(),fe(),_(20,"input",16),xe(21,"async"),J("ngModelChange",function(o){return i.onSearchChange(o)}),v(),Ee(22,EY,4,0,"button",17),xe(23,"async"),v(),_(24,"div",18)(25,"button",19),xe(26,"async"),J("click",function(){return i.onPriorityChange("all")}),w(27," All "),v(),_(28,"button",20),xe(29,"async"),J("click",function(){return i.onPriorityChange("high")}),w(30," Urgent "),v(),_(31,"button",21),xe(32,"async"),J("click",function(){return i.onPriorityChange("medium")}),w(33," Important "),v(),_(34,"button",22),xe(35,"async"),J("click",function(){return i.onPriorityChange("low")}),w(36," Advisory "),v()()(),_(37,"main",23),Ee(38,OY,2,1),xe(39,"async"),v()()),t&2){let r;C(20),H("ngModel",Te(21,11,i.searchQuery)),C(2),Ie(Te(23,13,i.searchQuery)!==""?22:-1),C(3),ke("active",Te(26,15,i.selectedPriority)==="all"),C(3),ke("active",Te(29,17,i.selectedPriority)==="high"),C(3),ke("active",Te(32,19,i.selectedPriority)==="medium"),C(3),ke("active",Te(35,21,i.selectedPriority)==="low"),C(4),Ie((r=Te(39,23,i.filteredReports$))?38:-1,r)}},dependencies:[ht,Os,zt,mn,bi,Wi,Ri,Xr,Gi,ln],styles:[".police-reports-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#0d1a3d,#1a2a5e,#0d1a3d);padding:12px 12px 32px}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);padding:10px 16px;display:flex;align-items:center;gap:12px;border-bottom:1px solid rgba(212,168,75,.2);position:sticky;top:0;z-index:10;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}.back-button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#ffffff1a;border:1px solid rgba(255,255,255,.15);color:#fff;text-decoration:none}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;background:#ffffff14;display:flex;align-items:center;justify-content:center;color:#d4a84b}.header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;color:#fff}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0 0;color:#ffffffbf;font-size:.95rem}.controls-section[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:12px auto 0;display:flex;flex-direction:column;gap:10px;align-items:center}.search-container[_ngcontent-%COMP%]{width:100%;max-width:720px;display:flex;align-items:center;position:relative;background:#fff;border:1px solid #dcdfe6;border-radius:12px;padding:10px 12px;box-shadow:0 4px 16px #00000014}.search-icon[_ngcontent-%COMP%]{width:18px;height:18px;color:#888;margin-right:10px}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;font-size:1rem;color:#333}.clear-search[_ngcontent-%COMP%]{border:none;background:transparent;cursor:pointer;padding:4px;color:#888}.filter-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}.filter-tab[_ngcontent-%COMP%]{padding:10px 16px;border-radius:24px;border:1px solid rgba(255,255,255,.2);background:#ffffff14;color:#fff;cursor:pointer;transition:all .2s ease}.filter-tab.active[_ngcontent-%COMP%]{background:#d4a84b33;border-color:#d4a84b;color:#d4a84b}.filter-tab.priority-high.active[_ngcontent-%COMP%]{background:#c41e3a2e;border-color:#c41e3a;color:#ff6b6b}.filter-tab.priority-medium.active[_ngcontent-%COMP%]{background:#d4a84b33;border-color:#d4a84b;color:#d4a84b}.filter-tab.priority-low.active[_ngcontent-%COMP%]{background:#2ecc7133;border-color:#2ecc71;color:#2ecc71}.reports-list[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:16px auto 24px;padding:0 12px;display:flex;flex-direction:column;gap:16px;align-items:center}.feed-item[_ngcontent-%COMP%]{border-left:5px solid #ccc;padding:24px 20px 16px;margin-bottom:12px;background-color:#fff;border-radius:12px;box-shadow:0 4px 16px #0000001a;transition:box-shadow .2s ease;width:100%;max-width:720px;word-break:break-word;display:flex;flex-direction:column;gap:12px}.feed-item[_ngcontent-%COMP%]:hover{box-shadow:0 6px 18px #00000024}.feed-item.approved[_ngcontent-%COMP%]{border-left-color:#4caf50}.feed-item.priority-high[_ngcontent-%COMP%]{border-left-color:#c41e3a}.feed-item.priority-medium[_ngcontent-%COMP%]{border-left-color:#d4a84b}.feed-item.priority-low[_ngcontent-%COMP%]{border-left-color:#2ecc71}.feed-item.no-image[_ngcontent-%COMP%]{padding-bottom:8px}.feed-item.no-image[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{display:none}.item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:10px;font-size:.8rem;font-weight:600;text-transform:capitalize;background:#0000000f;color:#333}.item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.report-desc[_ngcontent-%COMP%]{font-size:1.08rem;color:#222;font-weight:600;margin:0}.meta-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:14px;align-items:center;font-size:.98rem;color:#444}.meta-row[_ngcontent-%COMP%]   .location-row[_ngcontent-%COMP%], .meta-row[_ngcontent-%COMP%]   .landmark-row[_ngcontent-%COMP%], .meta-row[_ngcontent-%COMP%]   .date-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.meta-row[_ngcontent-%COMP%]   .date-row[_ngcontent-%COMP%]{color:#888;font-size:.95rem}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:220px;width:auto;height:auto;border-radius:8px;border:1px solid #ddd;box-shadow:0 2px 8px #00000014;margin:0 auto;display:block}.item-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:6px}.view-details-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:10px;background:linear-gradient(135deg,#d4a84b,#c9a227);color:#1a2a5e;text-decoration:none;font-weight:600;transition:all .2s ease}.view-details-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #d4a84b59;transform:translateY(-1px)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 24px;color:#fff}.empty-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 18px;border-radius:50%;background:#ffffff0d;display:flex;align-items:center;justify-content:center;color:#fff9}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#ffffffb3}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{padding:10px 12px}.header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem}.controls-section[_ngcontent-%COMP%]{padding:0 8px}.feed-item[_ngcontent-%COMP%]{padding:18px 14px 12px}.report-desc[_ngcontent-%COMP%]{font-size:1rem}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:180px}}@media (max-width: 480px){.filter-tab[_ngcontent-%COMP%]{padding:8px 12px}.meta-row[_ngcontent-%COMP%]{gap:10px}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:150px}}"]})};function DY(n,e){if(n&1&&(_(0,"option",19),w(1),v()),n&2){let t=e.$implicit;H("value",t),C(),be(" ",t," ")}}function AY(n,e){if(n&1){let t=pe();_(0,"div",7)(1,"select",8),wt("ngModelChange",function(r){z(t);let o=T(2);return Et(o.filterBarangay,r)||(o.filterBarangay=r),j(r)}),_(2,"option",17),w(3,"All Barangays"),v(),te(4,DY,2,2,"option",18),v()()}if(n&2){let t=T(2);C(),xt("ngModel",t.filterBarangay),C(3),H("ngForOf",t.barangayList)}}function kY(n,e){if(n&1&&(_(0,"p"),w(1," Showing "),_(2,"strong"),w(3),v(),w(4," of "),_(5,"strong"),w(6),v(),w(7," reports "),v()),n&2){let t=T().ngIf,i=T().ngIf;C(3),ae(t.length),C(3),ae(i.length)}}function RY(n,e){if(n&1&&(_(0,"div",20),te(1,kY,8,2,"p",21),v()),n&2){let t=T().ngIf;C(),H("ngIf",t.length>0)}}function NY(n,e){if(n&1&&(_(0,"p")(1,"strong"),w(2,"City:"),v(),w(3),v()),n&2){let t=T().$implicit;C(3),be(" ",t.city)}}function LY(n,e){if(n&1&&(_(0,"p",28)(1,"strong"),w(2,"GPS:"),v(),_(3,"span",30),w(4),xe(5,"number"),xe(6,"number"),v()()),n&2){let t=T().$implicit;C(4),xn("",Tn(5,2,t.location.lat,"1.4-4"),", ",Tn(6,5,t.location.lng,"1.4-4"))}}function FY(n,e){if(n&1&&(_(0,"div",31),re(1,"img",32),v()),n&2){let t=T().$implicit;C(),H("src",t.imageUrl,Zt)}}function VY(n,e){if(n&1&&(_(0,"div",24)(1,"div",25)(2,"h3"),w(3),v(),_(4,"span",26),w(5),xe(6,"uppercase"),v()(),_(7,"div",27)(8,"p")(9,"strong"),w(10,"Location:"),v(),w(11),v(),_(12,"p")(13,"strong"),w(14,"Reporter:"),v(),w(15),v(),_(16,"p")(17,"strong"),w(18,"Submitted:"),v(),w(19),xe(20,"date"),v(),Ee(21,NY,4,1,"p"),Ee(22,LY,7,8,"p",28),v(),te(23,FY,2,1,"div",29),v()),n&2){let t=e.$implicit;C(3),ae(t.description),C(),Xc("priority-"+(t.priority||"medium")),C(),be(" ",Te(6,11,t.priority||"medium")," "),C(6),xn(" ",t.street,", ",t.barangay),C(4),be(" ",t.reporterName||"N/A"),C(4),be(" ",Tn(20,13,t.createdAt,"short")," "),C(2),Ie(t.city?21:-1),C(),Ie(t.location?22:-1),C(),H("ngIf",t.imageUrl)}}function BY(n,e){if(n&1&&(Je(0),te(1,VY,24,16,"div",23),Xe()),n&2){let t=T().ngIf;C(),H("ngForOf",t)}}function UY(n,e){n&1&&(_(0,"p"),w(1,"No approved reports available at this time."),v())}function zY(n,e){n&1&&(_(0,"p"),w(1," No reports match your search criteria. "),v())}function jY(n,e){if(n&1&&(_(0,"div",33),te(1,UY,2,0,"p",21)(2,zY,2,0,"p",21),v()),n&2){let t=T(2).ngIf,i=T();C(),H("ngIf",t.length===0),C(),H("ngIf",t.length>0&&i.getFilteredReports(t).length===0)}}function HY(n,e){if(n&1&&(_(0,"div",22),te(1,BY,2,1,"ng-container",3)(2,jY,3,2,"ng-template",null,1,It),v()),n&2){let t=e.ngIf,i=dt(3);C(),H("ngIf",t.length>0)("ngIfElse",i)}}function $Y(n,e){if(n&1){let t=pe();_(0,"div")(1,"div",4)(2,"div",5)(3,"input",6),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.searchTerm,r)||(o.searchTerm=r),j(r)}),v()(),_(4,"div",7)(5,"select",8),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.filterPriority,r)||(o.filterPriority=r),j(r)}),_(6,"option",9),w(7,"All Priorities"),v(),_(8,"option",10),w(9,"High Priority"),v(),_(10,"option",11),w(11,"Medium Priority"),v(),_(12,"option",12),w(13,"Low Priority"),v()()(),te(14,AY,5,2,"div",13),_(15,"button",14),J("click",function(){z(t);let r=T();return j(r.resetFilters())}),w(16,"Reset Filters"),v()(),te(17,RY,2,1,"div",15)(18,HY,4,2,"div",16),v()}if(n&2){let t=e.ngIf,i=T();C(3),xt("ngModel",i.searchTerm),C(2),xt("ngModel",i.filterPriority),C(9),H("ngIf",i.uniqueBarangays.size>0),C(3),H("ngIf",i.getFilteredReports(t)),C(),H("ngIf",i.getFilteredReports(t))}}function GY(n,e){n&1&&(_(0,"div",34),w(1,"Loading reports..."),v())}var ky=class n{reportService=F(gn);searchTerm="";filterPriority="all";filterBarangay="";uniqueBarangays=new Set;approvedReports$=this.reportService.getAllReports().pipe(ue(e=>{let t=e.filter(i=>i.status==="approved");return this.uniqueBarangays=new Set(t.map(i=>i.barangay).filter(i=>i)),t}));get barangayList(){return Array.from(this.uniqueBarangays)}getFilteredReports(e){let t=e;if(this.searchTerm.trim()){let i=this.searchTerm.toLowerCase();t=t.filter(r=>r.description.toLowerCase().includes(i)||r.street?.toLowerCase().includes(i)||r.barangay?.toLowerCase().includes(i)||r.reporterName?.toLowerCase().includes(i))}return this.filterPriority!=="all"&&(t=t.filter(i=>i.priority===this.filterPriority)),this.filterBarangay&&(t=t.filter(i=>i.barangay===this.filterBarangay)),t}resetFilters(){this.searchTerm="",this.filterPriority="all",this.filterBarangay=""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-user-dashboard"]],decls:9,vars:4,consts:[["loading",""],["noReports",""],[1,"user-dashboard-container"],[4,"ngIf","ngIfElse"],[1,"filters-bar"],[1,"filter-group","search-group"],["type","text","placeholder","Search by description, location, or reporter name...",1,"search-input",3,"ngModelChange","ngModel"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","high"],["value","medium"],["value","low"],["class","filter-group",4,"ngIf"],[1,"btn-reset",3,"click"],["class","results-info",4,"ngIf"],["class","reports-scroll-container",4,"ngIf"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"results-info"],[4,"ngIf"],[1,"reports-scroll-container"],["class","report-card",4,"ngFor","ngForOf"],[1,"report-card"],[1,"report-header"],[1,"status-badge","approved"],[1,"report-details"],[1,"gps-info"],["class","report-image",4,"ngIf"],[1,"coords"],[1,"report-image"],["alt","Incident image",3,"src"],[1,"no-reports"],[1,"loading"]],template:function(t,i){if(t&1&&(_(0,"div",2)(1,"h2"),w(2,"Report Management"),v(),_(3,"p"),w(4,"View all approved incident reports in Baguio City."),v(),te(5,$Y,19,5,"div",3),xe(6,"async"),te(7,GY,2,0,"ng-template",null,0,It),v()),t&2){let r=dt(8);C(5),H("ngIf",Te(6,2,i.approvedReports$))("ngIfElse",r)}},dependencies:[ht,An,zt,mn,sc,ac,bi,ts,Wi,Ri,ln,Ds,If,Qr],styles:[".user-dashboard-container[_ngcontent-%COMP%]{max-width:900px;margin:16px auto;padding:16px}.user-dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:clamp(1.25rem,4vw,2rem);font-weight:800;letter-spacing:-.3px;border-bottom:2px solid #1a2a5e;padding-bottom:12px;margin-bottom:8px}.user-dashboard-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:16px;font-size:clamp(.85rem,2.5vw,.95rem);line-height:1.5}.filters-bar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:16px;padding:14px;background-color:#fff;border-radius:10px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014}.filter-group[_ngcontent-%COMP%]{flex:1;min-width:140px}.filter-group.search-group[_ngcontent-%COMP%]{flex:1 1 100%;min-width:100%}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:2px solid #e0e0e0;border-radius:6px;font-size:.9rem;font-family:inherit;background-color:#f8f9fa;color:#333;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:44px}.search-input[_ngcontent-%COMP%]:hover, .filter-select[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background-color:#fff}.search-input[_ngcontent-%COMP%]:focus, .filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background-color:#fff;box-shadow:0 0 0 3px #1a2a5e1a}.btn-reset[_ngcontent-%COMP%]{padding:10px 16px;background-color:#fff;border:2px solid #e0e0e0;border-radius:6px;font-size:.85rem;font-weight:600;color:#333;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:44px;white-space:nowrap}.btn-reset[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#1a2a5e;color:#1a2a5e;transform:translateY(-2px);box-shadow:0 8px 24px #1a2a5e26}@media (max-width: 768px){.filters-bar[_ngcontent-%COMP%]{gap:8px;padding:12px}.filter-group[_ngcontent-%COMP%]{min-width:120px}.btn-reset[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem;min-height:40px}}@media (max-width: 480px){.filters-bar[_ngcontent-%COMP%]{flex-direction:column;gap:8px;padding:10px}.filter-group[_ngcontent-%COMP%], .filter-group.search-group[_ngcontent-%COMP%]{flex:1 1 100%;min-width:100%}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%]{padding:8px 10px;font-size:16px;min-height:44px}.btn-reset[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:.75rem}}.results-info[_ngcontent-%COMP%]{margin-bottom:10px;padding:6px 0;font-size:clamp(.8rem,2vw,.9rem);color:#666}.results-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.reports-scroll-container[_ngcontent-%COMP%]{height:500px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:10px;padding:12px;background-color:#fff;display:flex;flex-direction:column;gap:12px;box-shadow:0 4px 12px #0000000f}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f5f5;border-radius:8px}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:8px}.reports-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#764ba2,#667eea);box-shadow:0 0 6px #667eea4d}.reports-scroll-container[_ngcontent-%COMP%]{scrollbar-color:#667eea #f5f5f5;scrollbar-width:thin}@media (max-width: 768px){.reports-scroll-container[_ngcontent-%COMP%]{height:400px;padding:10px;gap:10px}}@media (max-width: 480px){.reports-scroll-container[_ngcontent-%COMP%]{height:350px;padding:8px;gap:8px}}.report-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:10px;padding:14px;background-color:#fff;box-shadow:0 2px 8px #0000000f;transition:all .3s cubic-bezier(.4,0,.2,1);flex-shrink:0}.report-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #667eea26;border-color:#667eea;transform:translateY(-3px)}.report-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px;gap:8px;flex-wrap:wrap}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#1a1a1a;font-size:clamp(.9rem,2.5vw,1.05rem);font-weight:700;flex:1;word-break:break-word;min-width:150px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:5px 10px;border-radius:16px;font-size:.65rem;font-weight:700;white-space:nowrap;text-transform:uppercase;letter-spacing:.3px;flex-shrink:0}.status-badge.priority-high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff;box-shadow:0 4px 12px #ff6b6b33}.status-badge.priority-medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa94d,#fd7e14);color:#fff;box-shadow:0 4px 12px #ffa04d33}.status-badge.priority-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff;box-shadow:0 4px 12px #51cf6633}.report-details[_ngcontent-%COMP%]{margin-bottom:10px;line-height:1.5;font-size:.85rem}.report-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;color:#555}.report-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a1a1a;font-weight:600}.coords[_ngcontent-%COMP%]{font-family:Monaco,Courier New,monospace;background-color:#f8f9fa;padding:3px 6px;border-radius:3px;font-size:.75rem;color:#667eea;word-break:break-all}.gps-info[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.report-image[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:160px;max-height:120px;width:auto;height:auto;border-radius:6px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000014;transition:all .3s cubic-bezier(.4,0,.2,1)}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 24px #667eea33}.no-reports[_ngcontent-%COMP%]{text-align:center;padding:40px 16px;color:#999;font-size:.9rem;display:flex;align-items:center;justify-content:center;min-height:150px}.no-reports[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading[_ngcontent-%COMP%]{text-align:center;padding:30px 16px;color:#999;font-style:italic;font-size:.9rem}@media (max-width: 768px){.report-card[_ngcontent-%COMP%]{padding:12px}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.95rem}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;font-size:.6rem}.report-details[_ngcontent-%COMP%]{font-size:.8rem}.coords[_ngcontent-%COMP%]{font-size:.7rem;padding:2px 4px}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:140px;max-height:100px}}@media (max-width: 480px){.report-card[_ngcontent-%COMP%]{padding:10px;margin:0;border-radius:8px}.report-header[_ngcontent-%COMP%]{margin-bottom:8px;gap:6px}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.85rem;min-width:120px}.status-badge[_ngcontent-%COMP%]{padding:3px 6px;font-size:.55rem;border-radius:12px}.report-details[_ngcontent-%COMP%]{font-size:.75rem;margin-bottom:8px;line-height:1.4}.report-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0}.coords[_ngcontent-%COMP%]{font-size:.65rem;padding:2px 4px}.gps-info[_ngcontent-%COMP%]{font-size:.7rem}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:130px;max-height:90px}.no-reports[_ngcontent-%COMP%]{padding:30px 12px;min-height:120px;font-size:.8rem}.loading[_ngcontent-%COMP%]{padding:20px 12px;font-size:.8rem}}@media (max-width: 375px){.user-dashboard-container[_ngcontent-%COMP%]{padding:10px;margin:8px auto}.filters-bar[_ngcontent-%COMP%]{padding:8px;gap:6px}.report-card[_ngcontent-%COMP%]{padding:8px}.report-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.8rem}.report-details[_ngcontent-%COMP%]{font-size:.7rem}.report-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:120px;max-height:80px}.reports-scroll-container[_ngcontent-%COMP%]{height:320px;padding:6px;gap:6px}}"]})};function qY(n,e){if(n&1){let t=pe();_(0,"div",6)(1,"div",7)(2,"strong"),w(3),v(),_(4,"button",8),J("click",function(){z(t);let r=T();return j(r.closeAlert())}),w(5,"\xD7"),v()()()}if(n&2){let t=T();C(3),ae(t.sosMessage)}}function WY(n,e){if(n&1&&(_(0,"div",18)(1,"span",19),w(2,"GPS Location:"),v(),_(3,"span",24),w(4),v()()),n&2){let t=T(4);C(4),xn(" ",t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null||t.selectedSOS.sosDetails.location.lat==null?null:t.selectedSOS.sosDetails.location.lat.toFixed(6),", ",t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null||t.selectedSOS.sosDetails.location.lng==null?null:t.selectedSOS.sosDetails.location.lng.toFixed(6)," ")}}function KY(n,e){if(n&1&&(_(0,"div",18)(1,"span",19),w(2,"Map Link:"),v(),_(3,"a",25),w(4," Open in Google Maps "),v()()),n&2){let t=T(4);C(3),H("href","https://www.google.com/maps?q="+(t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null?null:t.selectedSOS.sosDetails.location.lat)+","+(t.selectedSOS.sosDetails==null||t.selectedSOS.sosDetails.location==null?null:t.selectedSOS.sosDetails.location.lng),Zt)}}function ZY(n,e){if(n&1){let t=pe();_(0,"div",26)(1,"button",27),J("click",function(){z(t);let r=T(4);return j(r.respondToSOS(r.selectedSOS.id))}),w(2," Mark as Responded "),v()()}}function YY(n,e){if(n&1){let t=pe();_(0,"div",26)(1,"button",28),J("click",function(){z(t);let r=T(4);return j(r.resolveSOS(r.selectedSOS.id))}),w(2," Mark as Resolved "),v()()}}function QY(n,e){n&1&&(_(0,"div",29),w(1," This emergency has been resolved. "),v())}function JY(n,e){if(n&1){let t=pe();_(0,"div",12),J("click",function(){z(t);let r=T(3);return j(r.closeSOSDetail())}),_(1,"div",13),J("click",function(r){return z(t),j(r.stopPropagation())}),_(2,"div",14)(3,"h3"),w(4,"Emergency SOS Details"),v(),_(5,"button",15),J("click",function(){z(t);let r=T(3);return j(r.closeSOSDetail())}),w(6,"\xD7"),v()(),_(7,"div",16)(8,"div",17),w(9),xe(10,"uppercase"),v(),_(11,"div",18)(12,"span",19),w(13,"Reporter Name:"),v(),_(14,"span",20),w(15),v()(),_(16,"div",18)(17,"span",19),w(18,"Email:"),v(),_(19,"span",20),w(20),v()(),_(21,"div",18)(22,"span",19),w(23,"Time Reported:"),v(),_(24,"span",20),w(25),xe(26,"date"),v()(),te(27,WY,5,2,"div",21)(28,KY,5,1,"div",21),v(),te(29,ZY,3,0,"div",22)(30,YY,3,0,"div",22)(31,QY,2,0,"div",23),v()()}if(n&2){let t=T(3);C(8),H("ngClass","status-"+(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)),C(),be(" ",Te(10,10,t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)," "),C(6),ae(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.userName),C(5),ae(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.userEmail),C(5),ae(Tn(26,12,t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.timestamp,"medium")),C(2),H("ngIf",t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.location),C(),H("ngIf",t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.location),C(),H("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="pending"),C(),H("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="responded"),C(),H("ngIf",(t.selectedSOS.sosDetails==null?null:t.selectedSOS.sosDetails.status)==="resolved")}}function XY(n,e){if(n&1){let t=pe();_(0,"div",49)(1,"span",50),w(2),xe(3,"uppercase"),v(),_(4,"button",51),J("click",function(r){z(t);let o=T().$implicit;return T(5).onNotificationClick(o),j(r.stopPropagation())}),w(5," View Details "),v()()}if(n&2){let t=T().$implicit;C(),H("ngClass","status-"+t.sosDetails.status),C(),be(" ",Te(3,2,t.sosDetails.status)," ")}}function eQ(n,e){if(n&1){let t=pe();_(0,"button",52),J("click",function(r){z(t);let o=T().$implicit;return T(5).quickRespondToSOS(o),j(r.stopPropagation())}),ne(),_(1,"svg",46),re(2,"path",53),v(),w(3," Respond "),v()}}function tQ(n,e){if(n&1){let t=pe();_(0,"button",54),J("click",function(r){z(t);let o=T().$implicit;return T(5).markAsRead(o.id),j(r.stopPropagation())}),ne(),_(1,"svg",55),re(2,"polyline",56),v()()}}function nQ(n,e){if(n&1){let t=pe();_(0,"div",36),xe(1,"async"),re(2,"div",37),_(3,"div",38),J("click",function(){let r=z(t).$implicit,o=T(5);return j(o.onNotificationClick(r))}),_(4,"p",39),w(5),v(),_(6,"small",40),w(7),xe(8,"date"),v(),te(9,XY,6,4,"div",41),v(),_(10,"div",42),te(11,eQ,4,0,"button",43)(12,tQ,3,0,"button",44),_(13,"button",45),J("click",function(r){let o=z(t).$implicit;return T(5).deleteNotification(o.id),j(r.stopPropagation())}),ne(),_(14,"svg",46),re(15,"polyline",47)(16,"path",48),v()()()()}if(n&2){let t=e.$implicit,i=T(5);ke("clickable",t.sosDetails&&Te(1,9,i.isAdmin$)),H("ngClass",i.getNotificationClass(t)),C(2),H("innerHTML",i.getNotificationIcon(t.type),C_),C(3),ae(t.message),C(2),be(" ",Tn(8,11,t.createdAt,"short")," "),C(2),H("ngIf",t.sosDetails),C(2),H("ngIf",t.sosDetails&&t.sosDetails.status==="pending"),C(),H("ngIf",!t.read)}}function iQ(n,e){if(n&1){let t=pe();Je(0),_(1,"div",31)(2,"p",32)(3,"strong"),w(4,"Emergency SOS Alerts"),v(),w(5," - You have "),_(6,"strong"),w(7),v(),w(8," alert(s) "),v(),_(9,"button",33),J("click",function(){z(t);let r=T(4);return j(r.clearAll())}),w(10,"Clear All"),v()(),_(11,"div",34),te(12,nQ,17,14,"div",35),v(),Xe()}if(n&2){let t=T().ngIf;C(7),ae(t.length),C(5),H("ngForOf",t)}}function rQ(n,e){n&1&&(_(0,"div",57)(1,"p"),w(2,"No emergency SOS alerts at this time."),v()())}function oQ(n,e){if(n&1&&(_(0,"div",30),te(1,iQ,13,2,"ng-container",5)(2,rQ,3,0,"ng-template",null,2,It),v()),n&2){let t=e.ngIf,i=dt(3);C(),H("ngIf",t.length>0)("ngIfElse",i)}}function sQ(n,e){if(n&1&&(Je(0),te(1,JY,32,15,"div",10)(2,oQ,4,2,"div",11),xe(3,"async"),Xe()),n&2){let t=T(2),i=dt(9);C(),H("ngIf",t.selectedSOS),C(),H("ngIf",Te(3,3,t.adminNotifications$))("ngIfElse",i)}}function aQ(n,e){if(n&1&&(_(0,"p",66),w(1),v()),n&2){let t=T(2).$implicit;C(),be(" Admin Note: ",t.reportDetails.adminNote," ")}}function cQ(n,e){if(n&1&&(_(0,"div",63)(1,"span",64),w(2),xe(3,"uppercase"),v(),te(4,aQ,2,1,"p",65),v()),n&2){let t=T().$implicit;C(),H("ngClass","status-"+t.reportDetails.action),C(),be(" Report ",Te(3,3,t.reportDetails.action)," "),C(2),H("ngIf",t.reportDetails.adminNote)}}function lQ(n,e){if(n&1){let t=pe();_(0,"button",54),J("click",function(r){z(t);let o=T().$implicit;return T(5).markAsRead(o.id),j(r.stopPropagation())}),ne(),_(1,"svg",55),re(2,"polyline",56),v()()}}function uQ(n,e){if(n&1){let t=pe();_(0,"div",60),re(1,"div",37),_(2,"div",61)(3,"p",39),w(4),v(),_(5,"small",40),w(6),xe(7,"date"),v(),te(8,cQ,5,5,"div",62),v(),_(9,"div",42),te(10,lQ,3,0,"button",44),_(11,"button",45),J("click",function(r){let o=z(t).$implicit;return T(5).deleteNotification(o.id),j(r.stopPropagation())}),ne(),_(12,"svg",46),re(13,"polyline",47)(14,"path",48),v()()()()}if(n&2){let t=e.$implicit,i=T(5);H("ngClass",i.getNotificationClass(t)),C(),H("innerHTML",i.getNotificationIcon(t.type),C_),C(3),ae(t.message),C(2),be(" ",Tn(7,6,t.createdAt,"short")," "),C(2),H("ngIf",t.reportDetails),C(2),H("ngIf",!t.read)}}function dQ(n,e){if(n&1){let t=pe();Je(0),_(1,"div",31)(2,"p",32)(3,"strong"),w(4,"Your Updates"),v(),w(5," - You have "),_(6,"strong"),w(7),v(),w(8," notification(s) "),v(),_(9,"button",33),J("click",function(){z(t);let r=T(4);return j(r.clearAll())}),w(10,"Clear All"),v()(),_(11,"div",58),te(12,uQ,15,9,"div",59),v(),Xe()}if(n&2){let t=T().ngIf;C(7),ae(t.length),C(5),H("ngForOf",t)}}function hQ(n,e){n&1&&(_(0,"div",57)(1,"p"),w(2,"No notifications yet. Stay safe!"),v()())}function fQ(n,e){if(n&1&&(_(0,"div",30),te(1,dQ,13,2,"ng-container",5)(2,hQ,3,0,"ng-template",null,2,It),v()),n&2){let t=e.ngIf,i=dt(3);C(),H("ngIf",t.length>0)("ngIfElse",i)}}function pQ(n,e){if(n&1&&(Je(0),te(1,fQ,4,2,"div",11),xe(2,"async"),Xe()),n&2){let t=T(2),i=dt(9);C(),H("ngIf",Te(2,2,t.citizenNotifications$))("ngIfElse",i)}}function gQ(n,e){if(n&1&&(Je(0),te(1,sQ,4,5,"ng-container",9),xe(2,"async"),te(3,pQ,3,4,"ng-container",9),xe(4,"async"),Xe()),n&2){let t=T();C(),H("ngIf",Te(2,2,t.isAdmin$)),C(2),H("ngIf",!Te(4,4,t.isAdmin$))}}function mQ(n,e){n&1&&(_(0,"div",67),ne(),_(1,"svg",68),re(2,"path",69)(3,"circle",70),v(),fe(),_(4,"h3"),w(5,"Please Log In"),v(),_(6,"p"),w(7,"You need to be logged in to view notifications and safety alerts."),v(),_(8,"p"),w(9,"Log in to receive important updates about your reports and emergency alerts."),v()())}function _Q(n,e){n&1&&(_(0,"div",71),w(1,"Loading notifications..."),v())}var Ry=class n{route=F(mi);notificationService=F(es);authService=F(un);toastService=F(ei);showSosAlert=!1;sosMessage="";selectedSOS=null;notifications$=this.notificationService.getNotifications();isAdmin$=this.authService.isAdmin$;currentUser$=this.authService.currentUser$;adminNotifications$=this.notificationService.getAdminNotifications();citizenNotifications$=this.notificationService.getCitizenNotifications();ngOnInit(){this.route.snapshot.queryParamMap.get("sos")==="sent"&&this.triggerSosAlert()}triggerSosAlert(){this.sosMessage="EMERGENCY SOS SENT - Police/Admin have been notified and will respond immediately. Stay safe!",this.showSosAlert=!0,setTimeout(()=>{this.showSosAlert=!1},1e4)}closeAlert(){this.showSosAlert=!1}onNotificationClick(e){e.sosDetails&&this.authService.isAdmin$.pipe(Zn(1)).subscribe(t=>{t&&(this.selectedSOS=e)})}closeSOSDetail(){this.selectedSOS=null}respondToSOS(e){this.selectedSOS&&this.selectedSOS.sosDetails&&(this.notificationService.markSOSAsResponded(e),this.notificationService.notifySOSResponse(this.selectedSOS.sosDetails.userName,this.selectedSOS.sosDetails.userEmail,"responded"),this.selectedSOS=ye(X({},this.selectedSOS),{sosDetails:ye(X({},this.selectedSOS.sosDetails),{status:"responded"})}),this.toastService.success("SOS marked as responded. User has been notified."))}resolveSOS(e){this.selectedSOS&&this.selectedSOS.sosDetails&&(this.notificationService.markSOSAsResolved(e),this.notificationService.notifySOSResponse(this.selectedSOS.sosDetails.userName,this.selectedSOS.sosDetails.userEmail,"resolved"),this.selectedSOS=ye(X({},this.selectedSOS),{sosDetails:ye(X({},this.selectedSOS.sosDetails),{status:"resolved"})}),this.toastService.success("SOS has been resolved. User has been notified."))}quickRespondToSOS(e){e.sosDetails&&(this.notificationService.markSOSAsResponded(e.id),this.notificationService.notifySOSResponse(e.sosDetails.userName,e.sosDetails.userEmail,"responded"),this.toastService.success("Quick response sent. User has been notified."))}deleteNotification(e){this.notificationService.deleteNotification(e),this.selectedSOS&&this.selectedSOS.id===e&&(this.selectedSOS=null),this.toastService.info("Notification deleted")}markAsRead(e){this.notificationService.markAsRead(e)}clearAll(){confirm("Clear all notifications?")&&(this.notificationService.clearAll(),this.selectedSOS=null,this.toastService.info("All notifications cleared"))}getNotificationIcon(e){switch(e){case"sos":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc3545" stroke-width="2"><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>';case"alert":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>';case"action":return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>';default:return'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>'}}getNotificationClass(e){return{[`notification-${e.type}`]:!0,unread:!e.read}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-notification"]],decls:10,vars:5,consts:[["notLoggedIn",""],["loading",""],["noNotifications",""],[1,"notification-container"],["class","sos-alert",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"sos-alert"],[1,"alert-content"],[1,"close-btn",3,"click"],[4,"ngIf"],["class","sos-detail-modal",3,"click",4,"ngIf"],["class","notifications-panel",4,"ngIf","ngIfElse"],[1,"sos-detail-modal",3,"click"],[1,"sos-detail-content",3,"click"],[1,"sos-detail-header"],[1,"modal-close-btn",3,"click"],[1,"sos-detail-body"],[1,"sos-status-badge",3,"ngClass"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-row",4,"ngIf"],["class","sos-detail-actions",4,"ngIf"],["class","sos-resolved-notice",4,"ngIf"],[1,"detail-value","coordinates"],["target","_blank",1,"map-link",3,"href"],[1,"sos-detail-actions"],[1,"action-btn","respond-btn",3,"click"],[1,"action-btn","resolve-btn",3,"click"],[1,"sos-resolved-notice"],[1,"notifications-panel"],[1,"notifications-header"],[1,"header-title"],[1,"clear-btn",3,"click"],[1,"notifications-list","admin-list"],["class","notification-item admin-notification",3,"ngClass","clickable",4,"ngFor","ngForOf"],[1,"notification-item","admin-notification",3,"ngClass"],[1,"notification-icon",3,"innerHTML"],[1,"notification-content",3,"click"],[1,"notification-message"],[1,"notification-time"],["class","sos-quick-info",4,"ngIf"],[1,"notification-actions"],["class","quick-respond-btn","title","Respond to Emergency",3,"click",4,"ngIf"],["class","mark-read-btn","title","Mark as read",3,"click",4,"ngIf"],["title","Delete",1,"delete-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"sos-quick-info"],[1,"sos-status",3,"ngClass"],[1,"view-details-btn",3,"click"],["title","Respond to Emergency",1,"quick-respond-btn",3,"click"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],["title","Mark as read",1,"mark-read-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["points","20 6 9 17 4 12"],[1,"no-notifications"],[1,"notifications-list","citizen-list"],["class","notification-item citizen-notification",3,"ngClass",4,"ngFor","ngForOf"],[1,"notification-item","citizen-notification",3,"ngClass"],[1,"notification-content"],["class","report-update-info",4,"ngIf"],[1,"report-update-info"],[1,"report-status",3,"ngClass"],["class","admin-note",4,"ngIf"],[1,"admin-note"],[1,"not-logged-in-message"],["width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"loading"]],template:function(t,i){if(t&1&&(_(0,"div",3)(1,"h2"),w(2,"Safety Alerts & Notifications"),v(),te(3,qY,6,1,"div",4)(4,gQ,5,6,"ng-container",5),xe(5,"async"),te(6,mQ,10,0,"ng-template",null,0,It)(8,_Q,2,0,"ng-template",null,1,It),v()),t&2){let r=dt(7);C(3),H("ngIf",i.showSosAlert),C(),H("ngIf",Te(5,3,i.currentUser$))("ngIfElse",r)}},dependencies:[ht,Os,An,zt,ln,Ds,Qr],styles:[".notification-container[_ngcontent-%COMP%]{max-width:700px;margin:30px auto;padding:20px}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]{margin:20px auto;padding:15px}}@media (max-width: 480px){.notification-container[_ngcontent-%COMP%]{margin:15px auto;padding:10px}}.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:2rem;font-weight:800;letter-spacing:-.5px;border-bottom:2px solid #1a2a5e;padding-bottom:12px;margin-bottom:24px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.not-logged-in-message[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:linear-gradient(135deg,#f0f4f8,#e8ecf1);border-radius:8px;border-left:4px solid #1a2a5e}.not-logged-in-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:#1a2a5e;margin-bottom:20px;opacity:.7}.not-logged-in-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1a2a5e;font-size:1.5rem;margin-bottom:12px}.not-logged-in-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:.95rem;margin:8px 0;line-height:1.6}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}}@media (max-width: 480px){.notification-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:15px}}.sos-alert[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b1a,#ee5a6f1a);border:2px solid #ff6b6b;border-radius:12px;margin-bottom:20px;animation:_ngcontent-%COMP%_slideDown .4s cubic-bezier(.34,1.56,.64,1);box-shadow:0 8px 24px #ff6b6b26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.alert-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;color:#ff6b6b;font-weight:700;font-size:1rem;letter-spacing:.3px}@media (max-width: 480px){.alert-content[_ngcontent-%COMP%]{padding:12px;font-size:.9rem}}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#ff6b6b;padding:0;width:40px;height:40px;min-width:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .3s cubic-bezier(.4,0,.2,1)}.close-btn[_ngcontent-%COMP%]:hover{background-color:#ff6b6b26;transform:rotate(90deg)}.sos-detail-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.sos-detail-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;max-width:500px;width:100%;box-shadow:0 20px 50px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.sos-detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0;background:linear-gradient(135deg,#1a2a5e,#2a3f7a);border-radius:12px 12px 0 0}.sos-detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.2rem;font-weight:600}.modal-close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;font-size:1.5rem;width:36px;height:36px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}.modal-close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.sos-detail-body[_ngcontent-%COMP%]{padding:24px}.sos-status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 16px;border-radius:20px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;margin-bottom:20px}.sos-status-badge.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.sos-status-badge.status-responded[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.sos-status-badge.status-resolved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.detail-row[_ngcontent-%COMP%]{display:flex;padding:12px 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-label[_ngcontent-%COMP%]{font-weight:600;color:#666;min-width:130px;font-size:.9rem}.detail-value[_ngcontent-%COMP%]{color:#333;font-size:.95rem;word-break:break-word}.detail-value.coordinates[_ngcontent-%COMP%]{font-family:Courier New,monospace;background:#f5f5f5;padding:4px 8px;border-radius:4px;font-size:.85rem}.map-link[_ngcontent-%COMP%]{color:#1a2a5e;text-decoration:none;font-weight:600;display:inline-flex;align-items:center;gap:6px}.map-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#2a3f7a}.sos-detail-actions[_ngcontent-%COMP%]{padding:20px 24px;border-top:1px solid #e0e0e0;display:flex;gap:12px;justify-content:flex-end}.action-btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.respond-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1565c0,#1976d2);color:#fff}.respond-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #1565c04d}.resolve-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2e7d32,#43a047);color:#fff}.resolve-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #2e7d324d}.sos-resolved-notice[_ngcontent-%COMP%]{padding:16px 24px;background:#e8f5e9;color:#2e7d32;text-align:center;font-weight:500;border-radius:0 0 12px 12px}@media (max-width: 480px){.sos-detail-content[_ngcontent-%COMP%]{margin:10px}.sos-detail-header[_ngcontent-%COMP%]{padding:16px 20px}.sos-detail-body[_ngcontent-%COMP%]{padding:20px}.detail-row[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.detail-label[_ngcontent-%COMP%]{min-width:auto}.sos-detail-actions[_ngcontent-%COMP%]{padding:16px 20px;flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%}}.notifications-panel[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;padding:20px}@media (max-width: 480px){.notifications-panel[_ngcontent-%COMP%]{padding:15px;border-radius:6px}}.notifications-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #f0f0f0;gap:12px}.notifications-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#1a2a5e;font-weight:500}.notifications-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a2a5e;font-weight:700}@media (max-width: 480px){.notifications-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:10px}.notifications-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:.9rem}}.notifications-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333;font-size:.95rem}.clear-btn[_ngcontent-%COMP%]{padding:10px 16px;background-color:#f5f5f5;color:#666;border:1px solid #ddd;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .2s;min-height:44px;white-space:nowrap}@media (max-width: 480px){.clear-btn[_ngcontent-%COMP%]{width:100%;text-align:center}}.clear-btn[_ngcontent-%COMP%]:hover{background-color:#eee;border-color:#ccc}.notifications-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.notification-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:15px;border-radius:6px;background-color:#f9f9f9;border-left:4px solid #ccc;transition:all .2s}.notification-item.clickable[_ngcontent-%COMP%]{cursor:pointer}.notification-item.clickable[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;transform:translate(4px)}@media (max-width: 480px){.notification-item[_ngcontent-%COMP%]{padding:12px;gap:10px;flex-wrap:wrap}}.notification-item.unread[_ngcontent-%COMP%]{background-color:#f0f7ff;border-left-color:var(--sentinel-blue, #0b57a4)}.notification-item.notification-sos[_ngcontent-%COMP%]{background-color:#ffebee;border-left-color:#d32f2f}.notification-item.notification-alert[_ngcontent-%COMP%]{background-color:#fff3e0;border-left-color:#ffb300}.notification-item.notification-info[_ngcontent-%COMP%]{background-color:#e3f2fd;border-left-color:#1976d2}.notification-item.notification-action[_ngcontent-%COMP%]{background-color:#e8f5e9;border-left-color:#43a047}.notification-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 6px #0000001a}.notification-icon[_ngcontent-%COMP%]{min-width:40px;display:flex;align-items:flex-start;justify-content:center;padding-top:2px}@media (max-width: 480px){.notification-icon[_ngcontent-%COMP%]{min-width:35px}.notification-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}}.notification-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px;min-width:0}.notification-message[_ngcontent-%COMP%]{margin:0;color:#333;font-weight:500;font-size:.95rem;word-break:break-word}@media (max-width: 480px){.notification-message[_ngcontent-%COMP%]{font-size:.9rem}}.notification-time[_ngcontent-%COMP%]{color:#999;font-size:.85rem}.sos-quick-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:8px;flex-wrap:wrap}.sos-status[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase;padding:3px 8px;border-radius:10px;letter-spacing:.3px}.sos-status.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.sos-status.status-responded[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.sos-status.status-resolved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.view-details-btn[_ngcontent-%COMP%]{font-size:.75rem;padding:4px 12px;background:linear-gradient(135deg,#1a3a52,#2a5a7a);color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:all .2s}.view-details-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #1a3a524d}.quick-respond-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:.8rem;font-weight:600;transition:all .2s;white-space:nowrap}.quick-respond-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #27ae6066}.quick-respond-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.click-hint[_ngcontent-%COMP%]{font-size:.75rem;color:#999;font-style:italic}.notification-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap}@media (max-width: 480px){.notification-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end;padding-top:8px;border-top:1px solid #eee;margin-top:8px}.quick-respond-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}}.mark-read-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{padding:8px 12px;border:none;background-color:transparent;cursor:pointer;transition:all .2s;border-radius:4px;min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center}.mark-read-btn[_ngcontent-%COMP%]:hover, .delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mark-read-btn[_ngcontent-%COMP%]{color:#4caf50}.mark-read-btn[_ngcontent-%COMP%]:hover{background-color:#4caf501a}.delete-btn[_ngcontent-%COMP%]{color:#999}.delete-btn[_ngcontent-%COMP%]:hover{color:#d32f2f;background-color:#d32f2f1a}.no-notifications[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#999}.notifications-list.admin-list[_ngcontent-%COMP%]   .admin-notification[_ngcontent-%COMP%]{border-left:4px solid #dc3545;background:linear-gradient(90deg,rgba(220,53,69,.03) 0%,transparent 100%)}.admin-notification[_ngcontent-%COMP%]   .sos-quick-info[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-top:8px;padding-top:8px;border-top:1px solid #f0f0f0}.sos-status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:4px;font-size:.75rem;font-weight:700;letter-spacing:.5px}.sos-status.status-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.sos-status.status-responded[_ngcontent-%COMP%]{background:#cfe2ff;color:#084298}.sos-status.status-resolved[_ngcontent-%COMP%]{background:#d1e7dd;color:#0f5132}.view-details-btn[_ngcontent-%COMP%]{padding:4px 12px;background:linear-gradient(135deg,#1a2a5e,#2a3f7a);color:#fff;border:none;border-radius:4px;font-size:.75rem;font-weight:600;cursor:pointer;transition:all .2s}.view-details-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #1a2a5e4d}.notifications-list.citizen-list[_ngcontent-%COMP%]   .citizen-notification[_ngcontent-%COMP%]{border-left:4px solid #4caf50;background:linear-gradient(90deg,rgba(76,175,80,.03) 0%,transparent 100%)}.citizen-notification[_ngcontent-%COMP%]   .report-update-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:8px;padding-top:8px;border-top:1px solid #f0f0f0}.report-status[_ngcontent-%COMP%]{padding:6px 12px;border-radius:4px;font-size:.8rem;font-weight:700;letter-spacing:.5px;width:fit-content}.report-status.status-approved[_ngcontent-%COMP%]{background:#d1e7dd;color:#0f5132}.report-status.status-rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.admin-note[_ngcontent-%COMP%]{font-size:.85rem;color:#555;font-style:italic;margin:0;line-height:1.4}.notification-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 8px;background:#f0f0f0;color:#666;border-radius:3px;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#1a2a5e;font-weight:500}@media (max-width: 480px){.no-notifications[_ngcontent-%COMP%]{padding:30px 15px}}.no-notifications[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:30px;color:#999;font-style:italic}"]})};function vQ(n,e){if(n&1&&(_(0,"div",18),w(1),v()),n&2){let t=T(2);C(),be(" ",t.errorMessage," ")}}function yQ(n,e){if(n&1){let t=pe();_(0,"section",6)(1,"h2",8),w(2,"Sign In"),v(),_(3,"form",9,0),J("ngSubmit",function(){z(t);let r=T();return j(r.onSubmitLogin())}),_(5,"div",10)(6,"label",11),w(7,"Email Address"),v(),_(8,"input",12),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.email,r)||(o.email=r),j(r)}),v()(),_(9,"div",10)(10,"label",13),w(11,"Password"),v(),_(12,"div",14)(13,"div",15)(14,"input",16),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.password,r)||(o.password=r),j(r)}),v()(),_(15,"button",17),J("click",function(){z(t);let r=T();return j(r.togglePasswordVisibility("login"))}),w(16),v()()(),Ee(17,vQ,2,1,"div",18),_(18,"button",19),w(19),v()(),_(20,"div",20)(21,"span"),w(22,"or"),v()(),_(23,"div",21)(24,"button",22),J("click",function(){z(t);let r=T();return j(r.loginWithGoogle())}),ne(),_(25,"svg",23),re(26,"path",24)(27,"path",25)(28,"path",26)(29,"path",27),v(),w(30," Continue with Google "),v()(),fe(),_(31,"div",28)(32,"p"),w(33," Don't have an account? "),_(34,"button",29),J("click",function(){z(t);let r=T();return j(r.setTab("signup"))}),w(35,"Create one"),v()()()()}if(n&2){let t=dt(4),i=T();C(8),xt("ngModel",i.email),C(5),ke("show-password",i.showLoginPassword)("hide-password",!i.showLoginPassword),C(),H("type",i.showLoginPassword?"text":"password"),xt("ngModel",i.password),C(),Tt("aria-pressed",i.showLoginPassword)("aria-label",i.showLoginPassword?"Hide password":"Show password"),C(),be(" ",i.showLoginPassword?"Hide":"Show"," "),C(),Ie(i.errorMessage?17:-1),C(),H("disabled",t.invalid||i.isLoading),Tt("aria-busy",i.isLoading),C(),be(" ",i.isLoading?"Signing in...":"Sign In"," "),C(5),H("disabled",i.isLoading)}}function bQ(n,e){if(n&1&&(_(0,"div",42),w(1),v()),n&2){let t=T(2);C(),be(" ",t.errorMessage," ")}}function xQ(n,e){if(n&1&&(_(0,"div",43),w(1),v()),n&2){let t=T(2);C(),ae(t.successMessage)}}function wQ(n,e){if(n&1){let t=pe();_(0,"section",7)(1,"h2",30),w(2,"Create Account"),v(),_(3,"p",31),w(4,"Join Mountain Sentinel community"),v(),_(5,"form",32,1),J("ngSubmit",function(){z(t);let r=T();return j(r.onSubmitSignup())}),_(7,"div",10)(8,"label",33),w(9,"Email Address"),v(),_(10,"input",34),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.email,r)||(o.email=r),j(r)}),v()(),_(11,"div",10)(12,"label",35),w(13,"Full Name (Optional)"),v(),_(14,"input",36),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.displayName,r)||(o.displayName=r),j(r)}),v()(),_(15,"div",10)(16,"label",37),w(17,"Password"),v(),_(18,"div",14)(19,"div",15)(20,"input",38),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.password,r)||(o.password=r),j(r)}),v()(),_(21,"button",17),J("click",function(){z(t);let r=T();return j(r.togglePasswordVisibility("signup"))}),w(22),v()(),_(23,"small",39),w(24,"Minimum 6 characters"),v()(),_(25,"div",10)(26,"label",40),w(27,"Confirm Password"),v(),_(28,"div",14)(29,"div",15)(30,"input",41),wt("ngModelChange",function(r){z(t);let o=T();return Et(o.confirmPassword,r)||(o.confirmPassword=r),j(r)}),v()(),_(31,"button",17),J("click",function(){z(t);let r=T();return j(r.togglePasswordVisibility("confirm"))}),w(32),v()()(),Ee(33,bQ,2,1,"div",42),Ee(34,xQ,2,1,"div",43),_(35,"button",44),w(36),v()(),_(37,"div",28)(38,"p"),w(39," Already have an account? "),_(40,"button",29),J("click",function(){z(t);let r=T();return j(r.setTab("unified"))}),w(41,"Sign in"),v()()()()}if(n&2){let t=dt(6),i=T();C(10),xt("ngModel",i.email),C(4),xt("ngModel",i.displayName),C(5),ke("show-password",i.showSignupPassword)("hide-password",!i.showSignupPassword),C(),H("type",i.showSignupPassword?"text":"password"),xt("ngModel",i.password),C(),Tt("aria-pressed",i.showSignupPassword)("aria-label",i.showSignupPassword?"Hide password":"Show password"),C(),be(" ",i.showSignupPassword?"Hide":"Show"," "),C(7),ke("show-password",i.showConfirmPassword)("hide-password",!i.showConfirmPassword),C(),H("type",i.showConfirmPassword?"text":"password"),xt("ngModel",i.confirmPassword),C(),Tt("aria-pressed",i.showConfirmPassword)("aria-label",i.showConfirmPassword?"Hide password":"Show password"),C(),be(" ",i.showConfirmPassword?"Hide":"Show"," "),C(),Ie(i.errorMessage?33:-1),C(),Ie(i.successMessage?34:-1),C(),H("disabled",t.invalid||i.isLoading),Tt("aria-busy",i.isLoading),C(),be(" ",i.isLoading?"Creating account...":"Create Account"," ")}}var Ny=class n{authService=F(un);animationService=F(Dr);toastService=F(ei);tab="unified";email="";password="";displayName="";confirmPassword="";errorMessage=null;successMessage=null;isLoading=!1;showLoginPassword=!1;showSignupPassword=!1;showConfirmPassword=!1;ngOnInit(){this.tab="unified"}setTab(e){this.tab=e,this.errorMessage=null,this.successMessage=null}onSubmitLogin(){return S(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{yield this.authService.login(this.email,this.password),this.toastService.success("Login successful! Welcome back.")}catch(e){this.errorMessage=e.message||"Login failed. Please check your credentials.",this.toastService.error(this.errorMessage||"Login failed")}finally{this.isLoading=!1}})}onSubmitSignup(){return S(this,null,function*(){this.errorMessage=null,this.successMessage=null,this.isLoading=!0;try{if(this.password!==this.confirmPassword){this.errorMessage="Passwords do not match.",this.toastService.error("Passwords do not match."),this.isLoading=!1;return}if(this.password.length<6){this.errorMessage="Password must be at least 6 characters.",this.toastService.error("Password must be at least 6 characters."),this.isLoading=!1;return}yield this.authService.register(this.email,this.password,this.displayName||void 0),this.successMessage="Account created successfully! Redirecting...",this.toastService.success("Account created successfully! Welcome to Baguio Finest."),this.clearForm()}catch(e){this.errorMessage=e.message||"Signup failed.",this.toastService.error(this.errorMessage||"Signup failed")}finally{this.isLoading=!1}})}clearForm(){this.email="",this.password="",this.displayName="",this.confirmPassword=""}loginWithGoogle(){return S(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{yield this.authService.loginWithGoogle(),this.toastService.success("Google login successful! Welcome.")}catch(e){this.errorMessage=e.message||"Google login failed. Please try again.",this.toastService.error(this.errorMessage||"Google login failed")}finally{this.isLoading=!1}})}loginWithFacebook(){return S(this,null,function*(){this.errorMessage=null,this.isLoading=!0;try{yield this.authService.loginWithFacebook(),this.toastService.success("Facebook login successful! Welcome.")}catch(e){this.errorMessage=e.message||"Facebook login failed. Please try again.",this.toastService.error(this.errorMessage||"Facebook login failed")}finally{this.isLoading=!1}})}ngAfterViewInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect(),document.querySelectorAll("button").forEach(t=>{this.animationService.addRippleEffect(t)})}togglePasswordVisibility(e){e==="login"?this.showLoginPassword=!this.showLoginPassword:e==="signup"?this.showSignupPassword=!this.showSignupPassword:e==="confirm"&&(this.showConfirmPassword=!this.showConfirmPassword)}ngOnDestroy(){this.animationService.destroyScrollObserver()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-login"]],decls:9,vars:2,consts:[["loginForm","ngForm"],["signupFormRef","ngForm"],["role","main",1,"login-bg"],["role","region","aria-labelledby","login-title",1,"login-card","scroll-reveal","animate-on-load"],[1,"login-header"],["id","login-title"],["aria-labelledby","signin-heading",1,"unified-login-section","scroll-reveal","animate-on-load"],["aria-labelledby","signup-heading",1,"signup-section"],["id","signin-heading"],["aria-describedby","login-error",1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["id","email","type","email","name","email","required","","placeholder","your@email.com","autocomplete","email","aria-required","true",3,"ngModelChange","ngModel"],["for","password"],[1,"password-field"],[1,"password-input-wrapper"],["id","password","name","password","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","current-password","aria-required","true",1,"password-input",3,"ngModelChange","type","ngModel"],["type","button",1,"password-toggle-btn",3,"click"],["id","login-error","role","alert","aria-live","polite",1,"error-message"],["type","submit",1,"login-btn","primary-btn",3,"disabled"],[1,"social-divider"],["role","group","aria-label","Social sign in options",1,"social-login-buttons"],["type","button","aria-label","Sign in with Google",1,"btn-social","google-btn","full-width",3,"click","disabled"],["viewBox","0 0 24 24","width","20","height","20","aria-hidden","true",1,"social-icon"],["fill","#4285F4","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","#34A853","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","#FBBC05","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","#EA4335","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],[1,"auth-switch"],["type","button",1,"link-btn",3,"click"],["id","signup-heading"],[1,"subtitle"],["aria-describedby","signup-error",1,"signup-form",3,"ngSubmit"],["for","signupEmail"],["id","signupEmail","type","email","name","email","required","","placeholder","your@email.com","autocomplete","email","aria-required","true",3,"ngModelChange","ngModel"],["for","displayName"],["id","displayName","type","text","name","displayName","placeholder","Your Full Name","autocomplete","name",3,"ngModelChange","ngModel"],["for","signupPassword"],["id","signupPassword","name","password","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","minlength","6","autocomplete","new-password","aria-required","true","aria-describedby","password-hint",1,"password-input",3,"ngModelChange","type","ngModel"],["id","password-hint"],["for","confirm"],["id","confirm","name","confirm","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","new-password","aria-required","true",1,"password-input",3,"ngModelChange","type","ngModel"],["id","signup-error","role","alert","aria-live","polite",1,"error-message"],["role","status","aria-live","polite",1,"success-message"],["type","submit",1,"signup-btn",3,"disabled"]],template:function(t,i){t&1&&(_(0,"main",2)(1,"div",3)(2,"header",4)(3,"h1",5),w(4,"Baguio Safety Alert"),v(),_(5,"p"),w(6,"Community Emergency Response System"),v()(),Ee(7,yQ,36,15,"section",6),Ee(8,wQ,42,25,"section",7),v()()),t&2&&(C(7),Ie(i.tab==="unified"?7:-1),C(),Ie(i.tab==="signup"?8:-1))},dependencies:[ht,mn,zd,bi,Wi,Ud,Tl,yP,Ri,Sl],styles:['.login-bg[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#1a2a5ef2,#0d1a3dfa,#2a3f7af2);background-size:cover;background-position:center;background-attachment:fixed;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;position:relative;overflow:hidden}.login-bg[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.05) 1px,transparent 1px);background-size:50px 50px;animation:_ngcontent-%COMP%_float 20s linear infinite}@keyframes _ngcontent-%COMP%_float{0%{transform:translate(0)}to{transform:translate(50px,50px)}}@media (max-width: 768px){.login-bg[_ngcontent-%COMP%]{padding:50px 15px 30px;justify-content:flex-start;background-attachment:scroll}}@media (max-width: 480px){.login-bg[_ngcontent-%COMP%]{padding:30px 10px 20px}}.login-card[_ngcontent-%COMP%]{background:#fffffffa;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);color:#1a1a1a;max-width:480px;width:100%;padding:50px 45px;border-radius:24px;box-shadow:0 25px 80px #00000059,0 0 1px #ffffff80 inset;position:relative;border:1px solid rgba(255,255,255,.6);animation:_ngcontent-%COMP%_slideUp .6s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:35px 25px;border-radius:16px;max-width:100%}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;border-bottom:none;padding-bottom:0}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;margin:0 0 8px;background:linear-gradient(135deg,#1a2a5e,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#666;margin:0;letter-spacing:.3px;font-weight:500}@media (max-width: 480px){.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}.unified-login-section[_ngcontent-%COMP%], .signup-section[_ngcontent-%COMP%]{margin-top:0;padding:0}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a1a1a;font-size:1.6rem;font-weight:700;margin-bottom:12px;text-align:center;letter-spacing:-.5px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#888;font-size:.95rem;margin-bottom:32px;font-weight:400;line-height:1.5}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:8px}.subtitle[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:24px}}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:600;color:#333;font-size:.9rem;letter-spacing:.2px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #e0e0e0;border-radius:10px;box-sizing:border-box;font-size:1rem;background:#f8f9fa;color:#1a1a1a;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:50px;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-color:#d0d0d0;background:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a2a5e;background:#fff;box-shadow:0 0 0 4px #1a2a5e1a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa;font-weight:400}.password-field[_ngcontent-%COMP%]{display:flex;align-items:center}.password-input-wrapper[_ngcontent-%COMP%]{flex:1;position:relative}.password-input-wrapper.show-password[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTEgMTJzNC04IDExLTggMTEgOCAxMSA4LTQgOC0xMSA4LTExLTgtMTEtOHoiPjwvcGF0aD48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIj48L2NpcmNsZT48L3N2Zz4=);background-repeat:no-repeat;background-position:right 10px center}.password-input-wrapper.hide-password[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTE3Ljk0IDE3Ljk0QTEwLjA3IDEwLjA3IDAgMCAxIDEyIDIwYy03IDAtMTEtOC0xMS04YTE4LjQ1IDE4LjQ1IDAgMCAxIDUuMDYtNS45NE05LjkgNC4yNEE5LjEyIDkuMTIgMCAwIDEgMTIgNGM3IDAgMTEgOCAxMSA4YTE4LjUgMTguNSAwIDAgMS0yLjE2IDMuMTltLTYuNzItMS4wN2EzIDMgMCAxIDEtNC4yNC00LjI0Ij48L3BhdGg+PGxpbmUgeDE9IjEiIHkxPSIxIiB4Mj0iMjMiIHkyPSIyMyI+PC9saW5lPjwvc3ZnPg==);background-repeat:no-repeat;background-position:right 10px center}.password-input[_ngcontent-%COMP%]{padding-right:42px}.password-toggle-btn[_ngcontent-%COMP%]{margin-left:10px;background:transparent;border:none;cursor:pointer;color:#1a2a5e;padding:8px 12px;transition:all .2s ease;font-size:.9rem;font-weight:600;border-radius:6px}.password-toggle-btn[_ngcontent-%COMP%]:hover{color:#d4a84b;background:#1a2a5e1a}.password-toggle-btn[_ngcontent-%COMP%]:focus{outline:2px solid #1a2a5e;outline-offset:2px}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]{margin-bottom:18px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 14px;font-size:16px}}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:#7f8c8d;font-size:.8rem;margin-top:4px}.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%]{width:100%;padding:16px 24px;background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;border:2px solid rgba(212,168,75,.4);border-radius:10px;cursor:pointer;font-size:1.05rem;font-weight:800;transition:all .35s cubic-bezier(.175,.885,.32,1.275);margin-top:12px;box-shadow:0 12px 28px #1a2a5e59,inset 0 1px 2px #fff3;min-height:52px;letter-spacing:.4px;text-transform:uppercase;position:relative;overflow:hidden}.login-btn[_ngcontent-%COMP%]:before, .signup-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);animation:_ngcontent-%COMP%_shimmer 3s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}to{left:100%}}.login-btn[_ngcontent-%COMP%]:hover, .signup-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px) scale(1.02);box-shadow:0 16px 40px #1a2a5e73,inset 0 1px 2px #ffffff4d}.login-btn[_ngcontent-%COMP%]:active, .signup-btn[_ngcontent-%COMP%]:active{transform:translateY(-2px) scale(.98)}.login-btn[_ngcontent-%COMP%]:disabled, .signup-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.login-btn[_ngcontent-%COMP%]:hover:not([disabled]), .signup-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-4px);box-shadow:0 16px 40px #1a2a5e73,inset 0 1px 2px #ffffff4d}.login-btn[_ngcontent-%COMP%]:active:not([disabled]), .signup-btn[_ngcontent-%COMP%]:active:not([disabled]){transform:translateY(-2px);box-shadow:0 8px 20px #1a2a5e59,inset 0 1px 2px #fff3}.login-btn[_ngcontent-%COMP%]:disabled, .signup-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;box-shadow:0 4px 12px #0000001a}.social-divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:28px 0;gap:16px}.social-divider[_ngcontent-%COMP%]:before, .social-divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:linear-gradient(90deg,transparent,#ddd,transparent)}.social-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#999;font-size:.85rem;font-weight:600;text-transform:uppercase;letter-spacing:1px}.social-login-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}.social-login-buttons[_ngcontent-%COMP%]   .btn-social[_ngcontent-%COMP%]{flex:1;padding:14px 20px;border:2px solid #e8e8e8;border-radius:12px;color:#333;font-weight:600;font-size:.95rem;cursor:pointer;transition:all .3s ease;min-height:52px;display:flex;align-items:center;justify-content:center;gap:10px;background:#fff}.social-login-buttons[_ngcontent-%COMP%]   .btn-social[_ngcontent-%COMP%]   .social-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.social-login-buttons[_ngcontent-%COMP%]   .google-btn[_ngcontent-%COMP%]{background:#fff;border-color:#e0e0e0;color:#333}.social-login-buttons[_ngcontent-%COMP%]   .google-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#f8f9fa;border-color:#1a2a5e;box-shadow:0 6px 16px #1a2a5e26;transform:translateY(-2px)}.social-login-buttons[_ngcontent-%COMP%]   .google-btn.full-width[_ngcontent-%COMP%]{width:100%;flex:none}.social-login-buttons[_ngcontent-%COMP%]   .facebook-btn[_ngcontent-%COMP%]{background:#1877f2;border-color:#1877f2;color:#fff}.social-login-buttons[_ngcontent-%COMP%]   .facebook-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#0a66c2;border-color:#0a66c2;box-shadow:0 6px 16px #1877f259;transform:translateY(-2px)}.social-login-buttons[_ngcontent-%COMP%]   .btn-social[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.primary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d)!important}.quick-login[_ngcontent-%COMP%]{margin:32px 0 0;padding:24px 0 0;border-top:1px solid rgba(26,42,94,.2)}.quick-login-label[_ngcontent-%COMP%]{text-align:center;color:#999;font-size:.85rem;margin:0 0 18px;letter-spacing:.5px;font-weight:600;text-transform:uppercase}.quick-login-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%}.btn-social[_ngcontent-%COMP%]{width:100%;padding:13px 18px;border:2px solid #e0e0e0;border-radius:10px;color:#333;font-weight:700;font-size:.95rem;cursor:pointer;transition:all .35s cubic-bezier(.4,0,.2,1);min-height:50px;display:flex;align-items:center;justify-content:center;gap:12px;background:#fff;position:relative;overflow:hidden;letter-spacing:.2px}.btn-social[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:_ngcontent-%COMP%_shimmerSocial 3s infinite}@keyframes _ngcontent-%COMP%_shimmerSocial{0%{left:-100%}50%,to{left:100%}}.social-icon[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;min-width:24px;text-align:center;position:relative;z-index:1}.btn-social.google-btn[_ngcontent-%COMP%]{background:#fff;border-color:#e0e0e0;color:#333}.btn-social.google-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#f8f9fa;border-color:#1a2a5e;box-shadow:0 8px 20px #1a2a5e33;transform:translateY(-3px)}.btn-social.facebook-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1877f2,#0a66c2);border-color:transparent;color:#fff;box-shadow:0 4px 12px #1877f24d}.btn-social.facebook-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:linear-gradient(135deg,#0a66c2,#001f54);box-shadow:0 12px 28px #1877f266;transform:translateY(-3px)}.btn-social[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;box-shadow:none}@media (max-width: 480px){.btn-quick[_ngcontent-%COMP%]{min-width:80px;padding:10px 12px;font-size:.85rem}.quick-login[_ngcontent-%COMP%]{margin:24px 0;padding:16px 0}}.auth-switch[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.auth-switch[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#95a5b8;font-size:.9rem}.link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#5dade2;cursor:pointer;font-weight:600;font-size:.9rem;text-decoration:underline;transition:color .2s;padding:0}.link-btn[_ngcontent-%COMP%]:hover{color:#3498db}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{margin:15px 0;padding:12px;border-radius:6px;font-size:.9rem;text-align:center}.error-message[_ngcontent-%COMP%]{background-color:#fdeaea;color:#d32f2f;border:1px solid #d32f2f}.success-message[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32;border:1px solid #2e7d32}@media (max-width: 480px){.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{font-size:.85rem;padding:10px}}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible, .login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible, .link-btn[_ngcontent-%COMP%]:focus-visible, .password-toggle-btn[_ngcontent-%COMP%]:focus-visible{outline:3px solid var(--wcag-focus-color, #4a90d9);outline-offset:2px}.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%], .btn-social[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.password-toggle-btn[_ngcontent-%COMP%]{min-width:44px;min-height:44px}@media (prefers-contrast: high){.login-card[_ngcontent-%COMP%], .login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:2px solid #fff}.login-btn[_ngcontent-%COMP%], .signup-btn[_ngcontent-%COMP%]{border:2px solid currentColor}}@media (prefers-reduced-motion: reduce){.login-bg[_ngcontent-%COMP%]:before, .login-card[_ngcontent-%COMP%], .scroll-reveal[_ngcontent-%COMP%], .animate-on-load[_ngcontent-%COMP%]{animation:none!important;transition-duration:.01ms!important}}@media print{.login-bg[_ngcontent-%COMP%]{background:#fff;min-height:auto}.login-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #000}}']})};function CQ(n,e){n&1&&(ne(),K(0,"svg",3),Ue(1,"path",47)(2,"path",48)(3,"line",49)(4,"line",50),Q())}function EQ(n,e){n&1&&(ne(),K(0,"svg",3),Ue(1,"line",51)(2,"path",52),Q())}function IQ(n,e){n&1&&(ne(),K(0,"svg",3),Ue(1,"polygon",53)(2,"path",54),Q())}function MQ(n,e){n&1&&(ne(),K(0,"svg",3),Ue(1,"polygon",53)(2,"line",55)(3,"line",56),Q())}function PQ(n,e){if(n&1){let t=pe();K(0,"div",0)(1,"div",1)(2,"button",2),ot("click",function(){z(t);let r=T();return j(r.endCall())}),ne(),K(3,"svg",3),Ue(4,"polyline",4),Q()(),fe(),K(5,"div",5)(6,"h3",6),w(7),Q(),K(8,"p",7),w(9),Q(),K(10,"div",8)(11,"span",9),w(12),Q()()(),Ue(13,"div",10),Q(),K(14,"div",11)(15,"div",12),Ue(16,"img",13)(17,"div",14)(18,"div",15)(19,"div",16),Q()(),K(20,"div",17)(21,"div",18)(22,"button",19),ot("click",function(){z(t);let r=T();return j(r.toggleMute())}),Ee(23,CQ,5,0,":svg:svg",3)(24,EQ,3,0,":svg:svg",3),K(25,"span",20),w(26,"Mute"),Q()(),K(27,"button",21),ot("click",function(){z(t);let r=T();return j(r.viewContacts())}),ne(),K(28,"svg",3),Ue(29,"rect",22)(30,"line",23)(31,"line",24)(32,"line",25)(33,"line",26),Q(),fe(),K(34,"span",20),w(35,"Keypad"),Q()(),K(36,"button",27),ot("click",function(){z(t);let r=T();return j(r.toggleSpeaker())}),Ee(37,IQ,3,0,":svg:svg",3)(38,MQ,4,0,":svg:svg",3),K(39,"span",20),w(40,"Speaker"),Q()()(),K(41,"div",28)(42,"button",29),ot("click",function(){z(t);let r=T();return j(r.addCall())}),ne(),K(43,"svg",30),Ue(44,"circle",31)(45,"path",32),Q(),fe(),K(46,"span"),w(47,"+"),Q()(),K(48,"button",33),ot("click",function(){z(t);let r=T();return j(r.holdCall())}),ne(),K(49,"svg",30),Ue(50,"circle",34)(51,"circle",35)(52,"circle",36)(53,"circle",37),Q(),fe(),K(54,"span"),w(55,"\u2261"),Q()(),K(56,"button",38),ot("click",function(){z(t);let r=T();return j(r.viewContacts())}),ne(),K(57,"svg",30),Ue(58,"path",39)(59,"circle",40),Q(),fe(),K(60,"span"),w(61,"\u2261"),Q()()()(),K(62,"div",41)(63,"button",42),ot("click",function(){z(t);let r=T();return j(r.endCall())}),ne(),K(64,"svg",43),Ue(65,"path",44)(66,"path",45),Q()(),fe(),K(67,"p",46),w(68,"End Call"),Q()()()}if(n&2){let t=T();C(7),ae(t.callerName),C(2),ae(t.callerStatus),C(3),ae(t.callDisplayTime),C(4),Sn("alt",rw(t.callerName))("src",t.callerImage,Zt),C(6),ke("active",t.isMuted),C(),Ie(t.isMuted?24:23),C(13),ke("active",t.isSpeakerOn),C(),Ie(t.isSpeakerOn?37:38)}}var Ly=class n{authService=F(un);router=F(Mt);isCallActive=!1;isMuted=!1;isSpeakerOn=!0;callDuration=0;callDisplayTime="0:00";callerImage="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop";callerName="911 Emergency Services";callerStatus="Calling 911\u2026";callTimerSubscription=null;callTimer;ngOnInit(){this.authService.currentUser$.pipe(Zn(1)).subscribe(e=>{if(!e){this.router.navigate(["/login"]);return}this.initializeCall()})}ngOnDestroy(){this.endCall()}initializeCall(){this.isCallActive=!0,this.callDuration=0,this.updateCallTime(),this.callTimer=setInterval(()=>{this.callDuration++,this.updateCallTime()},1e3)}updateCallTime(){let e=Math.floor(this.callDuration/60),t=this.callDuration%60;this.callDisplayTime=`${e}:${t.toString().padStart(2,"0")}`}toggleMute(){this.isMuted=!this.isMuted}toggleSpeaker(){this.isSpeakerOn=!this.isSpeakerOn}volumeUp(){console.log("Volume increased")}volumeDown(){console.log("Volume decreased")}addCall(){console.log("Add call action")}holdCall(){console.log("Hold call toggled")}viewContacts(){console.log("View contacts")}endCall(){this.callTimer&&clearInterval(this.callTimer),this.isCallActive=!1,this.callDuration=0,this.isMuted=!1,this.isSpeakerOn=!0,this.callDisplayTime="0:00",this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-emergency-call"]],decls:1,vars:1,consts:[[1,"call-interface"],[1,"call-header"],["title","End Call",1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["points","15 18 9 12 15 6"],[1,"call-status-info"],[1,"caller-name"],[1,"caller-status"],[1,"call-timer"],[1,"timer-value"],[1,"header-spacer"],[1,"caller-profile"],[1,"caller-image-wrapper"],[1,"caller-image",3,"src","alt"],[1,"pulse-ring","pulse-ring-1"],[1,"pulse-ring","pulse-ring-2"],[1,"pulse-ring","pulse-ring-3"],[1,"call-controls"],[1,"controls-grid"],["title","Toggle Mute",1,"control-btn",3,"click"],[1,"btn-label"],["title","Keypad",1,"control-btn",3,"click"],["x","5","y","2","width","14","height","20","rx","2","ry","2"],["x1","9","y1","6","x2","15","y2","6"],["x1","9","y1","10","x2","15","y2","10"],["x1","9","y1","14","x2","15","y2","14"],["x1","9","y1","18","x2","15","y2","18"],["title","Toggle Speaker",1,"control-btn",3,"click"],[1,"secondary-controls"],["title","Add Call",1,"secondary-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["cx","12","cy","12","r","1"],["d","M12 1v6m8-2l-4.24 4.24M1 12h6m-2 8l4.24-4.24M23 12v0m0 0l-6-6m6 6l-6 6M12 19v4"],["title","Hold",1,"secondary-btn",3,"click"],["cx","12","cy","12","r","10"],["cx","8","cy","12","r","2","fill","currentColor"],["cx","12","cy","12","r","2","fill","currentColor"],["cx","16","cy","12","r","2","fill","currentColor"],["title","Contacts",1,"secondary-btn",3,"click"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"end-call-section"],["title","End Call",1,"end-call-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24","fill","currentColor"],["d","M23.5 12a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"],["d","M20 17.5c-2.5 0-4.5-2-5.5-3.5-1 1.5-3 3.5-5.5 3.5-3 0-5.5-2.5-5.5-5.5v-6c0-3 2.5-5.5 5.5-5.5 2.5 0 4.5 2 5.5 3.5 1-1.5 3-3.5 5.5-3.5 3 0 5.5 2.5 5.5 5.5v6c0 3-2.5 5.5-5.5 5.5z"],[1,"end-call-text"],["d","M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"],["d","M19 10v2a7 7 0 0 1-14 0v-2"],["x1","12","y1","19","x2","12","y2","23"],["x1","8","y1","23","x2","16","y2","23"],["x1","1","y1","1","x2","23","y2","23"],["d","M9 9v3a3 3 0 0 0 5.12 2.12M15.5 1.67A7 7 0 0 1 19 19M9 17H5a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h4"],["points","11 5 6 9 2 9 2 15 6 15 11 19 11 5"],["d","M15.54 8.46a7 7 0 0 1 0 9.9M20.54 3.46a11 11 0 0 1 0 15.56"],["x1","23","y1","9","x2","17","y2","15"],["x1","17","y1","9","x2","23","y2","15"]],template:function(t,i){t&1&&Ee(0,PQ,69,12,"div",0),t&2&&Ie(i.isCallActive?0:-1)},dependencies:[ht],styles:[".call-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px;animation:_ngcontent-%COMP%_fadeInCall .4s ease-out}@keyframes _ngcontent-%COMP%_fadeInCall{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.call-interface[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:420px;height:100vh;max-height:900px;background:linear-gradient(180deg,#1a1a2e,#16213e,#0f3460);border-radius:20px;box-shadow:0 20px 60px #0009,0 0 80px #10c3d333;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .5s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100px);opacity:0}to{transform:translateY(0);opacity:1}}.call-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background:linear-gradient(180deg,#ffffff14,#0003);border-bottom:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.back-btn[_ngcontent-%COMP%]{background:#ffffff1f;border:none;width:44px;height:44px;border-radius:50%;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.34,1.56,.64,1);flex-shrink:0}.back-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.08)}.back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.call-status-info[_ngcontent-%COMP%]{flex:1;text-align:center;color:#fff;margin:0 16px;animation:_ngcontent-%COMP%_fadeIn .6s ease-out .2s both}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.caller-name[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;letter-spacing:.3px;text-shadow:0 2px 4px rgba(0,0,0,.3)}.caller-status[_ngcontent-%COMP%]{margin:4px 0 8px;font-size:13px;opacity:.85;font-weight:500;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.85}50%{opacity:.6}}.call-timer[_ngcontent-%COMP%]{display:inline-block;background:#10c3d326;border:1px solid rgba(16,195,211,.4);border-radius:6px;padding:4px 12px;margin-top:4px}.timer-value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#10c3d3;letter-spacing:1px;font-family:Courier New,monospace}.header-spacer[_ngcontent-%COMP%]{width:44px;flex-shrink:0}.caller-profile[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:40px 20px;animation:_ngcontent-%COMP%_fadeIn .6s ease-out .3s both}.caller-image-wrapper[_ngcontent-%COMP%]{position:relative;width:180px;height:180px}.caller-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;box-shadow:0 10px 40px #00000080,0 0 40px #10c3d34d;border:3px solid rgba(16,195,211,.4);animation:_ngcontent-%COMP%_profileZoom .6s ease-out .4s both}@keyframes _ngcontent-%COMP%_profileZoom{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}.pulse-ring[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border:2px solid rgba(16,195,211,.4);border-radius:50%;animation:_ngcontent-%COMP%_expandPulse 2s ease-out infinite}.pulse-ring-1[_ngcontent-%COMP%]{width:200px;height:200px;animation-delay:0s}.pulse-ring-2[_ngcontent-%COMP%]{width:220px;height:220px;animation-delay:.3s;opacity:.8}.pulse-ring-3[_ngcontent-%COMP%]{width:240px;height:240px;animation-delay:.6s;opacity:.6}@keyframes _ngcontent-%COMP%_expandPulse{0%{opacity:.8}to{opacity:0;transform:translate(-50%,-50%) scale(1.4)}}.call-controls[_ngcontent-%COMP%]{padding:30px 20px;background:#0000004d;border-top:1px solid rgba(255,255,255,.1);animation:_ngcontent-%COMP%_slideUp .5s cubic-bezier(.34,1.56,.64,1) .2s backwards}.controls-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:20px}.control-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;background:linear-gradient(135deg,#ffffff1f,#ffffff14);border:1px solid rgba(255,255,255,.15);color:#ffffffe6;width:100%;aspect-ratio:1;border-radius:12px;cursor:pointer;transition:all .3s cubic-bezier(.34,1.56,.64,1);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;transition:transform .3s ease}.control-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fff3,#ffffff26);border-color:#ffffff4d;transform:translateY(-2px);box-shadow:0 8px 20px #0000004d}.control-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 4px 10px #0003}.control-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10c3d34d,#10c3d326);border-color:#10c3d399;color:#10c3d3;box-shadow:0 0 20px #10c3d34d}.control-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(16,195,211,.6))}.btn-label[_ngcontent-%COMP%]{display:block}.secondary-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.secondary-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;background:#ffffff14;border:1px solid rgba(255,255,255,.12);color:#ffffffb3;height:44px;border-radius:10px;cursor:pointer;transition:all .3s cubic-bezier(.34,1.56,.64,1);font-weight:600;font-size:18px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.secondary-btn[_ngcontent-%COMP%]:hover{background:#ffffff26;border-color:#ffffff40;transform:translateY(-2px);box-shadow:0 6px 16px #0000004d}.secondary-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.end-call-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;gap:12px;animation:_ngcontent-%COMP%_slideUp .5s cubic-bezier(.34,1.56,.64,1) .3s backwards}.end-call-btn[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#d32f2f,#e53935,#f44336);border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.34,1.56,.64,1);box-shadow:0 8px 24px #d32f2f66;animation:_ngcontent-%COMP%_pulseEndCall 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulseEndCall{0%,to{box-shadow:0 8px 24px #d32f2f66}50%{box-shadow:0 12px 32px #d32f2f99}}.end-call-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 12px 36px #d32f2f99}.end-call-btn[_ngcontent-%COMP%]:active{transform:scale(.95);box-shadow:0 4px 16px #d32f2f66}.end-call-text[_ngcontent-%COMP%]{color:#fffc;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin:0}@media (max-width: 480px){.call-interface[_ngcontent-%COMP%]{max-width:100%;border-radius:0;height:100vh}.caller-image-wrapper[_ngcontent-%COMP%]{width:140px;height:140px}.caller-image[_ngcontent-%COMP%]{width:100%;height:100%}.pulse-ring-1[_ngcontent-%COMP%]{width:160px;height:160px}.pulse-ring-2[_ngcontent-%COMP%]{width:180px;height:180px}.pulse-ring-3[_ngcontent-%COMP%]{width:200px;height:200px}.controls-grid[_ngcontent-%COMP%]{gap:12px}.control-btn[_ngcontent-%COMP%]{font-size:10px}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.end-call-btn[_ngcontent-%COMP%]{width:70px;height:70px}.end-call-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.caller-profile[_ngcontent-%COMP%]{padding:30px 20px}}@media (min-width: 481px) and (max-width: 768px){.call-interface[_ngcontent-%COMP%]{max-width:450px}.caller-image-wrapper[_ngcontent-%COMP%]{width:160px;height:160px}.controls-grid[_ngcontent-%COMP%]{gap:14px}.control-btn[_ngcontent-%COMP%]{font-size:11px}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}}@media (min-width: 769px){.call-interface[_ngcontent-%COMP%]{max-width:400px}.control-btn[_ngcontent-%COMP%]:hover{box-shadow:0 12px 28px #0006}.secondary-btn[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #00000059}.end-call-btn[_ngcontent-%COMP%]:hover{box-shadow:0 16px 40px #d32f2f80}}.control-btn[_ngcontent-%COMP%]:focus, .secondary-btn[_ngcontent-%COMP%]:focus, .end-call-btn[_ngcontent-%COMP%]:focus, .back-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(16,195,211,.6);outline-offset:2px}*[_ngcontent-%COMP%]{transition:background-color .3s ease,border-color .3s ease,box-shadow .3s ease}button[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.34,1.56,.64,1)}"]})};function SQ(n,e){if(n&1&&(_(0,"div",8),re(1,"div",9),_(2,"div",10)(3,"div",11)(4,"h3",12),w(5),v(),_(6,"span",13),w(7),v()(),_(8,"div",14)(9,"div",15),ne(),_(10,"svg",16),re(11,"path",17)(12,"circle",18),v(),fe(),_(13,"span",19),w(14),v()(),_(15,"div",15),ne(),_(16,"svg",16),re(17,"path",20)(18,"circle",21),v(),fe(),_(19,"span"),w(20),v()(),_(21,"div",15)(22,"span",22),w(23,"Recent"),v()()(),_(24,"div",23)(25,"button",24),ne(),_(26,"svg",25),re(27,"polyline",26),v()()()()()),n&2){let t=e.$implicit,i=T(3);H("ngClass",i.getPriorityClass(t.priority)),C(5),ae(t.description),C(),H("ngClass",i.getPriorityClass(t.priority)),C(),be(" ",i.getPriorityLabel(t.priority)," "),C(7),xn("",t.street,", ",t.barangay),C(6),ae(t.reporterName||t.reporterId)}}function TQ(n,e){if(n&1&&(Je(0),te(1,SQ,28,7,"div",7),Xe()),n&2){let t=T().ngIf,i=T();C(),H("ngForOf",t)("ngForTrackBy",i.trackById)}}function OQ(n,e){if(n&1&&(Je(0),te(1,TQ,2,2,"ng-container",6),Xe()),n&2){let t=e.ngIf;T();let i=dt(8);C(),H("ngIf",t.length>0)("ngIfElse",i)}}function DQ(n,e){n&1&&(_(0,"p"),w(1,"No incidents match your search. Try different keywords."),v())}function AQ(n,e){n&1&&(_(0,"p"),w(1,"No incidents reported at this time. Stay safe!"),v())}function kQ(n,e){if(n&1&&(_(0,"div",27),ne(),_(1,"svg",28),re(2,"path",29)(3,"line",30)(4,"line",31),v(),te(5,DQ,2,0,"p",6)(6,AQ,2,0,"ng-template",null,2,It),v()),n&2){let t=dt(7),i=T();C(5),H("ngIf",i.searchQuery.value)("ngIfElse",t)}}function RQ(n,e){n&1&&(_(0,"div",32),re(1,"div",33),_(2,"p"),w(3,"Loading community reports..."),v()())}var Fy=class n{reportService=F(gn);searchQuery=new bt("");allApprovedReports$=this.reportService.getAllReports().pipe(ue(e=>e.filter(t=>t.status==="approved")));filteredReports$=Mi([this.allApprovedReports$,this.searchQuery.pipe(Ui(""))]).pipe(ue(([e,t])=>{if(!t.trim())return e;let i=t.toLowerCase();return e.filter(r=>{let o=(r.description||"").toLowerCase(),a=(r.street||"").toLowerCase(),l=(r.barangay||"").toLowerCase(),u=(r.landmark||"").toLowerCase(),f=(r.reporterName||"").toLowerCase(),g=(r.createdAt||"").toString().toLowerCase();return o.includes(i)||a.includes(i)||l.includes(i)||u.includes(i)||f.includes(i)||g.includes(i)})}));ngOnInit(){}trackById(e,t){return t?.id??e}onSearchChange(e){this.searchQuery.next(e)}clearSearch(){this.searchQuery.next("")}getPriorityClass(e){switch(e){case"high":return"priority-high";case"medium":return"priority-medium";case"low":return"priority-low";default:return"priority-low"}}getPriorityLabel(e){return(e||"low").toUpperCase()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-citizen-reports"]],decls:11,vars:4,consts:[["empty",""],["loading",""],["noSearchMatch",""],[1,"citizen-reports-container"],[1,"reports-header"],[1,"reports-wrapper"],[4,"ngIf","ngIfElse"],["class","report-card",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"report-card",3,"ngClass"],[1,"card-border"],[1,"card-content"],[1,"card-header"],[1,"report-title"],[1,"priority-badge",3,"ngClass"],[1,"card-meta"],[1,"meta-item"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"icon"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"location-text"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"recent-label"],[1,"card-footer"],["aria-label","View full report",1,"expand-btn"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","9 18 15 12 9 6"],[1,"empty-state"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"],["x1","12","y1","6","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"loading-state"],[1,"spinner"]],template:function(t,i){if(t&1&&(_(0,"div",3)(1,"div",4)(2,"h2"),w(3,"Citizen Reports"),v()(),_(4,"div",5),te(5,OQ,2,2,"ng-container",6),xe(6,"async"),te(7,kQ,8,2,"ng-template",null,0,It)(9,RQ,4,0,"ng-template",null,1,It),v()()),t&2){let r=dt(10);C(5),H("ngIf",Te(6,2,i.filteredReports$))("ngIfElse",r)}},dependencies:[ht,Os,An,zt,mn,ln],styles:[".citizen-reports-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:16px;height:100vh}.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.8rem;color:#1a3a52}.search-section[_ngcontent-%COMP%]{width:100%}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:none;border-radius:8px;font-size:1rem;box-shadow:0 2px 8px #0000001a}.search-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 2px 12px #1a2a5e4d}.reports-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:12px;padding:8px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1a2a5e;border-radius:4px}.report-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;box-shadow:0 1px 4px #00000014;border-left:4px solid #1a2a5e;flex-shrink:0}.report-card.priority-high[_ngcontent-%COMP%]{border-left-color:#ff5252}.report-card.priority-medium[_ngcontent-%COMP%]{border-left-color:#ffa726}.report-card.priority-low[_ngcontent-%COMP%]{border-left-color:#66bb6a}.report-title[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1rem;color:#1a3a52}.card-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:.9rem;color:#666}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:16px;font-size:.75rem;font-weight:700;color:#fff;background:#1a2a5e;margin-top:8px}.priority-badge.priority-high[_ngcontent-%COMP%]{background:#ff5252}.priority-badge.priority-medium[_ngcontent-%COMP%]{background:#ffa726}.priority-badge.priority-low[_ngcontent-%COMP%]{background:#66bb6a}@media (max-width: 768px){.citizen-reports-container[_ngcontent-%COMP%]{padding:20px 16px;gap:20px}}@media (max-width: 480px){.citizen-reports-container[_ngcontent-%COMP%]{padding:16px 12px;gap:16px}}.reports-header[_ngcontent-%COMP%]{flex-shrink:0;text-align:center}.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1a3a52;margin:0 0 8px;letter-spacing:-.5px}@media (max-width: 768px){.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem}}@media (max-width: 480px){.reports-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#666;margin:0;font-weight:400}@media (max-width: 768px){.subtitle[_ngcontent-%COMP%]{font-size:.9rem}}.search-section[_ngcontent-%COMP%]{flex-shrink:0;width:100%;margin-bottom:16px}.search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;box-shadow:0 2px 12px #00000014;border-radius:10px;overflow:hidden;background:#fff}.search-icon[_ngcontent-%COMP%]{position:absolute;left:14px;color:#667eea;pointer-events:none;z-index:2;flex-shrink:0}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 44px;border:none;border-radius:10px;font-size:.95rem;background:#fff;color:#1a1a1a;transition:all .3s cubic-bezier(.4,0,.2,1);font-family:inherit}.search-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #667eea26}.search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.clear-btn[_ngcontent-%COMP%]{position:absolute;right:12px;background:transparent;border:none;cursor:pointer;color:#999;padding:6px;display:flex;align-items:center;justify-content:center;transition:color .2s ease;z-index:2;flex-shrink:0}.clear-btn[_ngcontent-%COMP%]:hover{color:#667eea}.reports-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column;gap:12px;padding:4px}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:10px}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:10px;transition:background .2s ease}.reports-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#764ba2,#667eea)}.reports-list[_ngcontent-%COMP%]{scrollbar-color:#667eea rgba(255,255,255,.1);scrollbar-width:thin}@media (max-width: 1024px){.reports-list[_ngcontent-%COMP%]{gap:10px}}@media (max-width: 768px){.reports-list[_ngcontent-%COMP%]{gap:8px}}.reports-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:600px;max-height:600px;overflow:hidden;padding:8px;border-radius:12px;background:#ffffff4d}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:10px}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:10px;transition:background .2s ease}.reports-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#764ba2,#667eea)}.reports-wrapper[_ngcontent-%COMP%]{scrollbar-color:#667eea rgba(255,255,255,.1);scrollbar-width:thin}@media (max-width: 1024px){.reports-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}}@media (max-width: 768px){.reports-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:14px}}@media (max-width: 480px){.reports-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.report-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #00000014;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column;position:relative;flex-shrink:0}.report-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #0000001f;transform:translateY(-2px)}.card-border[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2)}.report-card.priority-high[_ngcontent-%COMP%]   .card-border[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff5252,#ff1744)}.report-card.priority-medium[_ngcontent-%COMP%]   .card-border[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ffa726,#ffb300)}.report-card.priority-low[_ngcontent-%COMP%]   .card-border[_ngcontent-%COMP%]{background:linear-gradient(90deg,#66bb6a,#43a047)}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px;flex:1}@media (max-width: 480px){.card-content[_ngcontent-%COMP%]{padding:16px;gap:14px}}.card-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}.report-title[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#1a3a52;margin:0;flex:1;line-height:1.3}.priority-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:6px 12px;border-radius:20px;font-size:.7rem;font-weight:800;color:#fff;text-transform:uppercase;white-space:nowrap;letter-spacing:.5px;background:linear-gradient(135deg,#667eea,#764ba2)}.priority-badge.priority-high[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff5252,#ff1744)}.priority-badge.priority-medium[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa726,#ffb300)}.priority-badge.priority-low[_ngcontent-%COMP%]{background:linear-gradient(135deg,#66bb6a,#43a047)}.card-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:.85rem}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#555}.icon[_ngcontent-%COMP%]{color:#667eea;flex-shrink:0}.location-text[_ngcontent-%COMP%]{font-weight:500;color:#333}.recent-label[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:8px;border-top:1px solid #f0f0f0}.expand-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;flex-shrink:0}.expand-btn[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px #667eea66}.expand-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center;color:#888;background:#ffffff80;border-radius:12px;border:2px dashed #ddd;min-height:200px;flex-shrink:0}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]{padding:40px 30px;min-height:250px}}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ccc;margin-bottom:16px;opacity:.6}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;gap:16px;min-height:200px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid rgba(102,126,234,.2);border-top:3px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:.95rem;margin:0}@media (max-width: 480px){.reports-wrapper[_ngcontent-%COMP%]{max-height:calc(100vh - 280px)}.card-meta[_ngcontent-%COMP%]{font-size:.85rem}.report-title[_ngcontent-%COMP%]{font-size:.95rem}}"]})};var M3="firebasestorage.googleapis.com",P3="storageBucket",NQ=120*1e3,LQ=600*1e3;var _n=class n extends ai{constructor(e,t,i=0){super(xP(e),`Firebase Storage: ${t} (${xP(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},wn=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(wn||{});function xP(n){return"storage/"+n}function PP(){let n="An unknown error occurred, please check the error payload for server response.";return new _n(wn.UNKNOWN,n)}function FQ(n){return new _n(wn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function VQ(n){return new _n(wn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function BQ(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _n(wn.UNAUTHENTICATED,n)}function UQ(){return new _n(wn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zQ(n){return new _n(wn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function jQ(){return new _n(wn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HQ(){return new _n(wn.CANCELED,"User canceled the upload/download.")}function $Q(n){return new _n(wn.INVALID_URL,"Invalid URL '"+n+"'.")}function GQ(n){return new _n(wn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function qQ(){return new _n(wn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+P3+"' property when initializing the app?")}function WQ(){return new _n(wn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function KQ(){return new _n(wn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ZQ(n){return new _n(wn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wP(n){return new _n(wn.INVALID_ARGUMENT,n)}function S3(){return new _n(wn.APP_DELETED,"The Firebase app was deleted.")}function YQ(n){return new _n(wn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gp(n,e){return new _n(wn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function $p(n){throw new _n(wn.INTERNAL_ERROR,"Internal error: "+n)}var co=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(i.path==="")return i;throw GQ(e)}static makeFromUrl(e,t){let i=null,r="([A-Za-z0-9.\\-_]+)";function o(Re){Re.path.charAt(Re.path.length-1)==="/"&&(Re.path_=Re.path_.slice(0,-1))}let a="(/(.*))?$",l=new RegExp("^gs://"+r+a,"i"),u={bucket:1,path:3};function f(Re){Re.path_=decodeURIComponent(Re.path)}let g="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",I=new RegExp(`^https?://${b}/${g}/b/${r}/o${E}`,"i"),R={bucket:1,path:3},W=t===M3?"(?:storage.googleapis.com|storage.cloud.google.com)":t,q="([^?#]*)",ie=new RegExp(`^https?://${W}/${r}/${q}`,"i"),we=[{regex:l,indices:u,postModify:o},{regex:I,indices:R,postModify:f},{regex:ie,indices:{bucket:1,path:2},postModify:f}];for(let Re=0;Re<we.length;Re++){let jt=we[Re],ct=jt.regex.exec(e);if(ct){let V=ct[jt.indices.bucket],O=ct[jt.indices.path];O||(O=""),i=new n(V,O),jt.postModify(i);break}}if(i==null)throw $Q(e);return i}},CP=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function QQ(n,e,t){let i=1,r=null,o=null,a=!1,l=0;function u(){return l===2}let f=!1;function g(...q){f||(f=!0,e.apply(null,q))}function b(q){r=setTimeout(()=>{r=null,n(I,u())},q)}function E(){o&&clearTimeout(o)}function I(q,...ie){if(f){E();return}if(q){E(),g.call(null,q,...ie);return}if(u()||a){E(),g.call(null,q,...ie);return}i<64&&(i*=2);let we;l===1?(l=2,we=0):we=(i+Math.random())*1e3,b(we)}let R=!1;function W(q){R||(R=!0,E(),!f&&(r!==null?(q||(l=2),clearTimeout(r),b(0)):q||(l=1)))}return b(0),o=setTimeout(()=>{a=!0,W(!0)},t),W}function JQ(n){n(!1)}function XQ(n){return n!==void 0}function eJ(n){return typeof n=="object"&&!Array.isArray(n)}function SP(n){return typeof n=="string"||n instanceof String}function b3(n){return TP()&&n instanceof Blob}function TP(){return typeof Blob<"u"}function x3(n,e,t,i){if(i<e)throw wP(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw wP(`Invalid value for '${n}'. Expected ${t} or less.`)}function OP(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function T3(n){let e=encodeURIComponent,t="?";for(let i in n)if(n.hasOwnProperty(i)){let r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}var $d=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})($d||{});function tJ(n,e){let t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||r||o}var EP=class{constructor(e,t,i,r,o,a,l,u,f,g,b,E=!0,I=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=u,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=b,this.retry=E,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,W)=>{this.resolve_=R,this.reject_=W,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new Hd(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let a=l=>{let u=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;let l=o.getErrorCode()===$d.NO_ERROR,u=o.getStatus();if(!l||tJ(u,this.additionalRetryCodes_)&&this.retry){let g=o.getErrorCode()===$d.ABORT;i(!1,new Hd(!1,null,g));return}let f=this.successCodes_.indexOf(u)!==-1;i(!0,new Hd(f,o))})},t=(i,r)=>{let o=this.resolve_,a=this.reject_,l=r.connection;if(r.wasSuccessCode)try{let u=this.callback_(l,l.getResponse());XQ(u)?o(u):o()}catch(u){a(u)}else if(l!==null){let u=PP();u.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,u)):a(u)}else if(r.canceled){let u=this.appDelete_?S3():HQ();a(u)}else{let u=jQ();a(u)}};this.canceled_?t(!1,new Hd(!1,null,!0)):this.backoffId_=QQ(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&JQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Hd=class{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}};function nJ(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function iJ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rJ(n,e){e&&(n["X-Firebase-GMPID"]=e)}function oJ(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function sJ(n,e,t,i,r,o,a=!0,l=!1){let u=T3(n.urlParams),f=n.url+u,g=Object.assign({},n.headers);return rJ(g,e),nJ(g,t),iJ(g,o),oJ(g,i),new EP(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,a,l)}function aJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cJ(...n){let e=aJ();if(e!==void 0){let t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(TP())return new Blob(n);throw new _n(wn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lJ(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function uJ(n){if(typeof atob>"u")throw ZQ("base-64");return atob(n)}var ns={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},qp=class{constructor(e,t){this.data=e,this.contentType=t||null}};function dJ(n,e){switch(n){case ns.RAW:return new qp(O3(e));case ns.BASE64:case ns.BASE64URL:return new qp(D3(n,e));case ns.DATA_URL:return new qp(fJ(e),pJ(e))}throw PP()}function O3(n){let e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=i,a=n.charCodeAt(++t);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function hJ(n){let e;try{e=decodeURIComponent(n)}catch{throw Gp(ns.DATA_URL,"Malformed data URL.")}return O3(e)}function D3(n,e){switch(n){case ns.BASE64:{let r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Gp(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ns.BASE64URL:{let r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Gp(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=uJ(e)}catch(r){throw r.message.includes("polyfill")?r:Gp(n,"Invalid character found")}let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}var By=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Gp(ns.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=t[1]||null;i!=null&&(this.base64=gJ(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}};function fJ(n){let e=new By(n);return e.base64?D3(ns.BASE64,e.rest):hJ(e.rest)}function pJ(n){return new By(n).contentType}function gJ(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Uy=class n{constructor(e,t){let i=0,r="";b3(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(b3(this.data_)){let i=this.data_,r=lJ(i,e,t);return r===null?null:new n(r)}else{let i=new Uint8Array(this.data_.buffer,e,t-e);return new n(i,!0)}}static getBlob(...e){if(TP()){let t=e.map(i=>i instanceof n?i.data_:i);return new n(cJ.apply(null,t))}else{let t=e.map(a=>SP(a)?dJ(ns.RAW,a).data:a.data_),i=0;t.forEach(a=>{i+=a.byteLength});let r=new Uint8Array(i),o=0;return t.forEach(a=>{for(let l=0;l<a.length;l++)r[o++]=a[l]}),new n(r,!0)}}uploadData(){return this.data_}};function A3(n){let e;try{e=JSON.parse(n)}catch{return null}return eJ(e)?e:null}function mJ(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function _J(n,e){let t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function k3(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function vJ(n,e){return e}var ci=class{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||vJ}},Vy=null;function yJ(n){return!SP(n)||n.length<2?n:k3(n)}function R3(){if(Vy)return Vy;let n=[];n.push(new ci("bucket")),n.push(new ci("generation")),n.push(new ci("metageneration")),n.push(new ci("name","fullPath",!0));function e(o,a){return yJ(a)}let t=new ci("name");t.xform=e,n.push(t);function i(o,a){return a!==void 0?Number(a):a}let r=new ci("size");return r.xform=i,n.push(r),n.push(new ci("timeCreated")),n.push(new ci("updated")),n.push(new ci("md5Hash",null,!0)),n.push(new ci("cacheControl",null,!0)),n.push(new ci("contentDisposition",null,!0)),n.push(new ci("contentEncoding",null,!0)),n.push(new ci("contentLanguage",null,!0)),n.push(new ci("contentType",null,!0)),n.push(new ci("metadata","customMetadata",!0)),Vy=n,Vy}function bJ(n,e){function t(){let i=n.bucket,r=n.fullPath,o=new co(i,r);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function xJ(n,e,t){let i={};i.type="file";let r=t.length;for(let o=0;o<r;o++){let a=t[o];i[a.local]=a.xform(i,e[a.server])}return bJ(i,n),i}function N3(n,e,t){let i=A3(e);return i===null?null:xJ(n,i,t)}function wJ(n,e,t,i){let r=A3(e);if(r===null||!SP(r.downloadTokens))return null;let o=r.downloadTokens;if(o.length===0)return null;let a=encodeURIComponent;return o.split(",").map(f=>{let g=n.bucket,b=n.fullPath,E="/b/"+a(g)+"/o/"+a(b),I=OP(E,t,i),R=T3({alt:"media",token:f});return I+R})[0]}function CJ(n,e){let t={},i=e.length;for(let r=0;r<i;r++){let o=e[r];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var zy=class{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function L3(n){if(!n)throw PP()}function EJ(n,e){function t(i,r){let o=N3(n,r,e);return L3(o!==null),o}return t}function IJ(n,e){function t(i,r){let o=N3(n,r,e);return L3(o!==null),wJ(o,r,n.host,n._protocol)}return t}function F3(n){function e(t,i){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=UQ():r=BQ():t.getStatus()===402?r=VQ(n.bucket):t.getStatus()===403?r=zQ(n.path):r=i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}return e}function MJ(n){let e=F3(n);function t(i,r){let o=e(i,r);return i.getStatus()===404&&(o=FQ(n.path)),o.serverResponse=r.serverResponse,o}return t}function PJ(n,e,t){let i=e.fullServerUrl(),r=OP(i,n.host,n._protocol),o="GET",a=n.maxOperationRetryTime,l=new zy(r,o,IJ(n,t),a);return l.errorHandler=MJ(e),l}function SJ(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function TJ(n,e,t){let i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=SJ(null,e)),i}function OJ(n,e,t,i,r){let o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let we="";for(let Re=0;Re<2;Re++)we=we+Math.random().toString().slice(2);return we}let u=l();a["Content-Type"]="multipart/related; boundary="+u;let f=TJ(e,i,r),g=CJ(f,t),b="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+u+`\r
Content-Type: `+f.contentType+`\r
\r
`,E=`\r
--`+u+"--",I=Uy.getBlob(b,i,E);if(I===null)throw WQ();let R={name:f.fullPath},W=OP(o,n.host,n._protocol),q="POST",ie=n.maxUploadRetryTime,ge=new zy(W,q,EJ(n,t),ie);return ge.urlParams=R,ge.headers=a,ge.body=I.uploadData(),ge.errorHandler=F3(e),ge}var ACe=256*1024;var w3=null,IP=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$d.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$d.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$d.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r,o){if(this.sent_)throw $p("cannot .send() more than once");if(cr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(let a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $p("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $p("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $p("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $p("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},MP=class extends IP{initXhr(){this.xhr_.responseType="text"}};function V3(){return w3?w3():new MP}var Gd=class n{constructor(e,t){this._service=e,t instanceof co?this._location=t:this._location=co.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new co(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return k3(this._location.path)}get storage(){return this._service}get parent(){let e=mJ(this._location.path);if(e===null)return null;let t=new co(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw YQ(e)}};function DJ(n,e,t){n._throwIfRoot("uploadBytes");let i=OJ(n.storage,n._location,R3(),new Uy(e,!0),t);return n.storage.makeRequestWithTokens(i,V3).then(r=>({metadata:r,ref:n}))}function AJ(n){n._throwIfRoot("getDownloadURL");let e=PJ(n.storage,n._location,R3());return n.storage.makeRequestWithTokens(e,V3).then(t=>{if(t===null)throw KQ();return t})}function kJ(n,e){let t=_J(n._location.path,e),i=new co(n._location.bucket,t);return new Gd(n.storage,i)}function RJ(n){return/^[A-Za-z]+:\/\//.test(n)}function NJ(n,e){return new Gd(n,e)}function B3(n,e){if(n instanceof Wp){let t=n;if(t._bucket==null)throw qQ();let i=new Gd(t,t._bucket);return e!=null?B3(i,e):i}else return e!==void 0?kJ(n,e):n}function LJ(n,e){if(e&&RJ(e)){if(n instanceof Wp)return NJ(n,e);throw wP("To use ref(service, url), the first argument must be a Storage instance.")}else return B3(n,e)}function C3(n,e){let t=e?.[P3];return t==null?null:co.makeFromBucketSpec(t,n)}function FJ(n,e,t,i={}){n.host=`${e}:${t}`;let r=cr(e);r&&(Ba(`https://${n.host}/b`),Ua("Storage",!0)),n._isUsingEmulator=!0,n._protocol=r?"https":"http";let{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:R0(o,n.app.options.projectId))}var Wp=class{constructor(e,t,i,r,o,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=M3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NQ,this._maxUploadRetryTime=LQ,this._requests=new Set,r!=null?this._bucket=co.makeFromBucketSpec(r,this._host):this._bucket=C3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=co.makeFromBucketSpec(this._url,e):this._bucket=C3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){x3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){x3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return S(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return S(this,null,function*(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gd(this,e)}_makeRequest(e,t,i,r,o=!0){if(this._deleted)return new CP(S3());{let a=sJ(e,this._appId,i,r,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){return S(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()})}},E3="@firebase/storage",I3="0.13.14";var U3="storage";function z3(n,e,t){return n=_t(n),DJ(n,e,t)}function j3(n){return n=_t(n),AJ(n)}function H3(n,e){return n=_t(n),LJ(n,e)}function $3(n=to(),e){n=_t(n);let i=jo(n,U3).getImmediate({identifier:e}),r=td("storage");return r&&G3(i,...r),i}function G3(n,e,t,i={}){FJ(n,e,t,i)}function VJ(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Wp(t,i,r,e,Ho)}function BJ(){ki(new jn(U3,VJ,"PUBLIC").setMultipleInstances(!0)),Pt(E3,I3,""),Pt(E3,I3,"esm2017")}BJ();var Dl=class{constructor(e){return e}},q3="storage",DP=class{constructor(){return $o(q3)}};var AP=new _e("angularfire2.storage-instances");function UJ(n,e){let t=Rs(q3,n,e);return t&&new Dl(t)}function zJ(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Dl(i)}}var jJ={provide:DP,deps:[[new cn,AP]]},HJ={provide:Dl,useFactory:UJ,deps:[[new cn,AP],lr]};function W3(n,...e){return Pt("angularfire",Ir.full,"gcs"),Oi([HJ,jJ,{provide:AP,useFactory:zJ(n),multi:!0,deps:[mt,Gt,Mr,no,[new cn,zs],[new cn,Go],...e]}])}var K3=vt(j3,!0);var Z3=vt($3,!0);var Y3=vt(H3,!0,2);var Q3=vt(z3,!0);function $J(n,e){n&1&&(K(0,"div",6),Ue(1,"div",11),K(2,"p"),w(3,"Loading profile..."),Q()())}function GJ(n,e){if(n&1&&(K(0,"div",7),ne(),K(1,"svg",12),Ue(2,"circle",13)(3,"line",14)(4,"line",15),Q(),w(5),Q()),n&2){let t=T();C(5),be(" ",t.errorMessage()," ")}}function qJ(n,e){if(n&1&&(K(0,"div",8),ne(),K(1,"svg",12),Ue(2,"path",16)(3,"polyline",17),Q(),w(4),Q()),n&2){let t=T();C(4),be(" ",t.successMessage()," ")}}function WJ(n,e){if(n&1&&Ue(0,"img",23),n&2){let t,i=T(2);Sn("src",(t=i.profile())==null?null:t.photoURL,Zt)}}function KJ(n,e){if(n&1&&(K(0,"div",24),w(1),Q()),n&2){let t=T(2);C(),be(" ",t.avatarInitials()," ")}}function ZJ(n,e){if(n&1){let t=pe();K(0,"label",25)(1,"input",43),ot("change",function(r){z(t);let o=T(2);return j(o.uploadPhoto(r))}),Q(),ne(),K(2,"svg",44),Ue(3,"path",45)(4,"circle",46),Q()()}}function YJ(n,e){n&1&&(ne(),K(0,"svg",47),Ue(1,"path",48),Q(),w(2," BCPO Admin "))}function QJ(n,e){n&1&&(ne(),K(0,"svg",47),Ue(1,"path",49),Q(),w(2," Citizen "))}function JJ(n,e){if(n&1&&(K(0,"p",51),w(1),Q()),n&2){let t,i=T(3);C(),ae((t=i.profile())==null?null:t.bio)}}function XJ(n,e){n&1&&(K(0,"div",52),ne(),K(1,"svg",53),Ue(2,"path",54),Q(),w(3," Verified Account "),Q())}function eX(n,e){if(n&1&&(K(0,"h2",50),w(1),Q(),Ee(2,JJ,2,1,"p",51),Ee(3,XJ,4,0,"div",52)),n&2){let t,i,r,o=T(2);C(),ae((t=o.profile())==null?null:t.displayName),C(),Ie((i=o.profile())!=null&&i.bio?2:-1),C(),Ie((r=o.profile())!=null&&r.isVerified?3:-1)}}function tX(n,e){if(n&1){let t=pe();K(0,"div",33)(1,"label"),w(2,"Display Name"),Q(),K(3,"input",55),ot("input",function(r){z(t);let o=T(2);return j(o.updateFormField("displayName",r.target.value))}),Q()(),K(4,"div",33)(5,"label"),w(6,"Bio"),Q(),K(7,"textarea",56),ot("input",function(r){z(t);let o=T(2);return j(o.updateFormField("bio",r.target.value))}),Q()()}if(n&2){let t=T(2);C(3),Sn("value",t.editForm().displayName),C(4),Sn("value",t.editForm().bio)}}function nX(n,e){if(n&1){let t=pe();K(0,"button",57),ot("click",function(){z(t);let r=T(3);return j(r.toggleEditMode())}),ne(),K(1,"svg",44),Ue(2,"path",58)(3,"path",59),Q(),w(4," Edit Profile "),Q(),fe(),K(5,"button",60),ot("click",function(){z(t);let r=T(3);return j(r.openPasswordModal())}),ne(),K(6,"svg",44),Ue(7,"rect",61)(8,"path",62),Q(),w(9," Change Password "),Q()}}function iX(n,e){n&1&&(Ue(0,"div",64),w(1," Saving... "))}function rX(n,e){n&1&&(ne(),K(0,"svg",44),Ue(1,"polyline",65),Q(),w(2," Save Changes "))}function oX(n,e){if(n&1){let t=pe();K(0,"button",63),ot("click",function(){z(t);let r=T(3);return j(r.saveProfile())}),Ee(1,iX,2,0)(2,rX,3,0),Q(),K(3,"button",60),ot("click",function(){z(t);let r=T(3);return j(r.toggleEditMode())}),w(4,"Cancel"),Q()}if(n&2){let t=T(3);Sn("disabled",t.isSaving()),C(),Ie(t.isSaving()?1:2)}}function sX(n,e){if(n&1&&(K(0,"div",28),Ee(1,nX,10,0)(2,oX,5,2),Q()),n&2){let t=T(2);C(),Ie(t.isEditMode()?2:1)}}function aX(n,e){n&1&&(K(0,"span",69),w(1,"Private"),Q())}function cX(n,e){if(n&1&&(K(0,"div",66)(1,"span",67),w(2,"Email"),Q(),K(3,"span",68),w(4),Q(),Ee(5,aX,2,0,"span",69),Q()),n&2){let t,i,r=T(3);C(4),ae((t=r.profile())==null?null:t.email),C(),Ie(!(!((i=r.profile())==null||i.privacy==null)&&i.privacy.showEmail)&&r.isOwnProfile()?5:-1)}}function lX(n,e){n&1&&(K(0,"span",69),w(1,"Private"),Q())}function uX(n,e){if(n&1&&(K(0,"div",66)(1,"span",67),w(2,"Phone"),Q(),K(3,"span",68),w(4),Q(),Ee(5,lX,2,0,"span",69),Q()),n&2){let t,i,r=T(3);C(4),ae(((t=r.profile())==null?null:t.phoneNumber)||"Not set"),C(),Ie(!(!((i=r.profile())==null||i.privacy==null)&&i.privacy.showPhone)&&r.isOwnProfile()?5:-1)}}function dX(n,e){if(n&1&&(K(0,"div",32),Ee(1,cX,6,2,"div",66),Ee(2,uX,6,2,"div",66),Q()),n&2){let t,i,r=T(2);C(),Ie(!((t=r.profile())==null||t.privacy==null)&&t.privacy.showEmail||r.isOwnProfile()?1:-1),C(),Ie((i=r.profile())!=null&&i.phoneNumber&&(!((i=r.profile())==null||i.privacy==null)&&i.privacy.showPhone)||r.isOwnProfile()?2:-1)}}function hX(n,e){if(n&1){let t=pe();K(0,"div",33)(1,"label"),w(2,"Phone Number"),Q(),K(3,"input",70),ot("input",function(r){z(t);let o=T(2);return j(o.updateFormField("phoneNumber",r.target.value))}),Q()()}if(n&2){let t=T(2);C(3),Sn("value",t.editForm().phoneNumber)}}function fX(n,e){n&1&&(K(0,"span",69),w(1,"Address is private"),Q())}function pX(n,e){if(n&1&&(K(0,"div",66)(1,"span",67),w(2,"Street"),Q(),K(3,"span",68),w(4),Q()(),K(5,"div",66)(6,"span",67),w(7,"Barangay"),Q(),K(8,"span",68),w(9),Q()(),K(10,"div",66)(11,"span",67),w(12,"City"),Q(),K(13,"span",68),w(14),Q()(),Ee(15,fX,2,0,"span",69)),n&2){let t,i,r,o,a=T(3);C(4),ae(((t=a.profile())==null||t.address==null?null:t.address.street)||"Not set"),C(5),ae(((i=a.profile())==null||i.address==null?null:i.address.barangay)||"Not set"),C(5),ae(((r=a.profile())==null||r.address==null?null:r.address.city)||"Baguio City"),C(),Ie(!(!((o=a.profile())==null||o.privacy==null)&&o.privacy.showAddress)&&a.isOwnProfile()?15:-1)}}function gX(n,e){n&1&&(K(0,"p",71),w(1,"Address is private"),Q())}function mX(n,e){if(n&1&&(K(0,"div",32),Ee(1,pX,16,4)(2,gX,2,0,"p",71),Q()),n&2){let t,i=T(2);C(),Ie(!((t=i.profile())==null||t.address==null)&&t.address.street&&(!((t=i.profile())==null||t.privacy==null)&&t.privacy.showAddress)||i.isOwnProfile()?1:2)}}function _X(n,e){if(n&1){let t=pe();K(0,"li",82),ot("mousedown",function(){let r=z(t).$implicit,o=T(4);return j(o.selectBarangay(r))}),w(1),Q()}if(n&2){let t=e.$implicit;C(),ae(t)}}function vX(n,e){if(n&1&&(K(0,"li",81),w(1),Q()),n&2){let t=T(4);C(),be(" + ",t.filteredBarangays.length-8," more results ")}}function yX(n,e){if(n&1&&(K(0,"ul",78),Yc(1,_X,2,1,"li",null,tw),Ee(3,vX,2,1,"li",81),Q()),n&2){let t=T(3);C(),Qc(t.filteredBarangays.slice(0,8)),C(2),Ie(t.filteredBarangays.length>8?3:-1)}}function bX(n,e){if(n&1){let t=pe();K(0,"p",72),w(1,"Baguio City, Philippines"),Q(),K(2,"div",33)(3,"label"),w(4,"City"),Q(),Ue(5,"input",73),Q(),K(6,"div",74)(7,"label"),w(8,"Barangay "),K(9,"span",75),w(10,"*"),Q()(),K(11,"div",76)(12,"input",77),ot("input",function(r){z(t);let o=T(2);return j(o.filterBarangays(r))})("focus",function(r){z(t);let o=T(2);return j(o.filterBarangays(r))})("blur",function(){z(t);let r=T(2);return j(r.hideBarangaySuggestions())}),Q(),Ee(13,yX,4,1,"ul",78),Q(),K(14,"small",79),w(15,"Select from 128 Baguio City barangays"),Q()(),K(16,"div",33)(17,"label"),w(18,"Street / Purok"),Q(),K(19,"input",80),ot("input",function(r){z(t);let o=T(2);return j(o.updateFormField("street",r.target.value))}),Q()()}if(n&2){let t=T(2);C(5),Sn("value","Baguio City"),C(7),Sn("value",t.editForm().barangay),C(),Ie(t.showBarangaySuggestions()&&t.filteredBarangays.length>0?13:-1),C(6),Sn("value",t.editForm().street)}}function xX(n,e){if(n&1){let t=pe();K(0,"div",36)(1,"h3"),ne(),K(2,"svg",12),Ue(3,"path",83),Q(),w(4," Privacy Settings "),Q(),fe(),K(5,"p",84),w(6,"Choose what others can see on your profile"),Q(),K(7,"div",85)(8,"label",86)(9,"input",87),ot("change",function(r){z(t);let o=T(2);return j(o.updateFormField("showEmail",r.target.checked))}),Q(),Ue(10,"span",88),K(11,"span",89),w(12,"Show email address"),Q()(),K(13,"label",86)(14,"input",87),ot("change",function(r){z(t);let o=T(2);return j(o.updateFormField("showPhone",r.target.checked))}),Q(),Ue(15,"span",88),K(16,"span",89),w(17,"Show phone number"),Q()(),K(18,"label",86)(19,"input",87),ot("change",function(r){z(t);let o=T(2);return j(o.updateFormField("showAddress",r.target.checked))}),Q(),Ue(20,"span",88),K(21,"span",89),w(22,"Show address"),Q()()()()}if(n&2){let t=T(2);C(9),Sn("checked",t.editForm().showEmail),C(5),Sn("checked",t.editForm().showPhone),C(5),Sn("checked",t.editForm().showAddress)}}function wX(n,e){if(n&1&&(K(0,"div",9)(1,"div",18)(2,"div",19),Ue(3,"div",20),Q(),K(4,"div",21)(5,"div",22),Ee(6,WJ,1,1,"img",23)(7,KJ,2,1,"div",24),Ee(8,ZJ,5,0,"label",25),Q(),K(9,"div",26),Ee(10,YJ,3,0)(11,QJ,3,0),Q()(),K(12,"div",27),Ee(13,eX,4,3)(14,tX,8,2),Q(),Ee(15,sX,3,1,"div",28),Q(),K(16,"div",29)(17,"div",30)(18,"h3"),ne(),K(19,"svg",12),Ue(20,"path",31),Q(),w(21," Contact Information "),Q(),Ee(22,dX,3,2,"div",32)(23,hX,4,1,"div",33),Q(),fe(),K(24,"div",30)(25,"h3"),ne(),K(26,"svg",12),Ue(27,"path",34)(28,"circle",35),Q(),w(29," Address "),Q(),Ee(30,mX,3,1,"div",32)(31,bX,20,4),Q(),Ee(32,xX,23,3,"div",36),fe(),K(33,"div",37)(34,"h3"),ne(),K(35,"svg",12),Ue(36,"polyline",38),Q(),w(37," Activity "),Q(),fe(),K(38,"div",39)(39,"div",40)(40,"span",41),w(41),Q(),K(42,"span",42),w(43,"Reports"),Q()(),K(44,"div",40)(45,"span",41),w(46),Q(),K(47,"span",42),w(48,"Alerts"),Q()(),K(49,"div",40)(50,"span",41),w(51),Q(),K(52,"span",42),w(53,"SOS"),Q()()()()()()),n&2){let t,i,r,o,a,l,u=T();C(6),Ie((t=u.profile())!=null&&t.photoURL?6:7),C(2),Ie(u.isOwnProfile()?8:-1),C(),ke("admin",((i=u.profile())==null?null:i.role)==="admin"),C(),Ie(((r=u.profile())==null?null:r.role)==="admin"?10:11),C(3),Ie(u.isEditMode()?14:13),C(2),Ie(u.isOwnProfile()?15:-1),C(7),Ie(u.isEditMode()?23:22),C(8),Ie(u.isEditMode()?31:30),C(2),Ie(u.isOwnProfile()&&u.isEditMode()?32:-1),C(9),ae(((o=u.profile())==null||o.stats==null?null:o.stats.reportsSubmitted)||0),C(5),ae(((a=u.profile())==null||a.stats==null?null:a.stats.alertsReceived)||0),C(5),ae(((l=u.profile())==null||l.stats==null?null:l.stats.sosTriggered)||0)}}function CX(n,e){if(n&1&&(K(0,"div",97),w(1),Q()),n&2){let t=T(2);C(),ae(t.errorMessage())}}function EX(n,e){n&1&&(Ue(0,"div",64),w(1," Changing... "))}function IX(n,e){n&1&&w(0," Change Password ")}function MX(n,e){if(n&1){let t=pe();K(0,"div",90),ot("click",function(){z(t);let r=T();return j(r.closePasswordModal())}),K(1,"div",91),ot("click",function(r){return z(t),j(r.stopPropagation())}),K(2,"div",92)(3,"h3"),w(4,"Change Password"),Q(),K(5,"button",93),ot("click",function(){z(t);let r=T();return j(r.closePasswordModal())}),ne(),K(6,"svg",3),Ue(7,"line",94)(8,"line",95),Q()()(),fe(),K(9,"div",96),Ee(10,CX,2,1,"div",97),K(11,"div",98)(12,"label"),w(13,"Current Password"),Q(),K(14,"input",99),ot("input",function(r){z(t);let o=T();return j(o.updatePasswordField("currentPassword",r.target.value))}),Q()(),K(15,"div",98)(16,"label"),w(17,"New Password"),Q(),K(18,"input",100),ot("input",function(r){z(t);let o=T();return j(o.updatePasswordField("newPassword",r.target.value))}),Q()(),K(19,"div",98)(20,"label"),w(21,"Confirm New Password"),Q(),K(22,"input",101),ot("input",function(r){z(t);let o=T();return j(o.updatePasswordField("confirmPassword",r.target.value))}),Q()()(),K(23,"div",102)(24,"button",60),ot("click",function(){z(t);let r=T();return j(r.closePasswordModal())}),w(25,"Cancel"),Q(),K(26,"button",63),ot("click",function(){z(t);let r=T();return j(r.changePassword())}),Ee(27,EX,2,0)(28,IX,1,0),Q()()()()}if(n&2){let t=T();C(10),Ie(t.errorMessage()?10:-1),C(4),Sn("value",t.passwordForm().currentPassword),C(4),Sn("value",t.passwordForm().newPassword),C(4),Sn("value",t.passwordForm().confirmPassword),C(4),Sn("disabled",t.isSaving()),C(),Ie(t.isSaving()?27:28)}}var jy=class n{auth=F(Us);firestore=F(Zs);storage=F(Dl);router=F(Mt);route=F(mi);authService=F(un);toastService=F(ei);isLoading=Ut(!0);isSaving=Ut(!1);isOwnProfile=Ut(!0);isEditMode=Ut(!1);showPasswordModal=Ut(!1);errorMessage=Ut("");successMessage=Ut("");profile=Ut(null);profileId=Ut(null);editForm=Ut({displayName:"",phoneNumber:"",bio:"",barangay:"",street:"",city:"",showEmail:!0,showPhone:!1,showAddress:!1});passwordForm=Ut({currentPassword:"",newPassword:"",confirmPassword:""});baguioBarangays=Object.keys(Ki).sort();filteredBarangays=[];showBarangaySuggestions=Ut(!1);currentUser$=this.authService.currentUser$;isAdmin$=this.authService.isAdmin$;avatarInitials=Da(()=>{let e=this.profile()?.displayName||"U",t=e.split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e.substring(0,2).toUpperCase()});ngOnInit(){this.route.params.subscribe(e=>S(this,null,function*(){let t=e.id;if(t){this.profileId.set(t),yield this.loadProfile(t);let i=this.auth.currentUser;this.isOwnProfile.set(i?.uid===t)}else{let i=this.auth.currentUser;i?(this.profileId.set(i.uid),this.isOwnProfile.set(!0),yield this.loadProfile(i.uid)):this.router.navigate(["/login"])}}))}loadProfile(e){return S(this,null,function*(){this.isLoading.set(!0),this.errorMessage.set("");try{let t=yi(this.firestore,"users",e),i=yield Lp(t);if(i.exists()){let r=i.data();this.profile.set(ye(X({},r),{uid:e})),this.populateEditForm(r)}else{let r=this.auth.currentUser;if(r&&r.uid===e){let o=yield this.createDefaultProfile(r);this.profile.set(o),this.populateEditForm(o)}else this.errorMessage.set("Profile not found")}}catch(t){console.error("Error loading profile:",t),this.errorMessage.set("Failed to load profile")}finally{this.isLoading.set(!1)}})}createDefaultProfile(e){return S(this,null,function*(){let i=!!(yield e.getIdTokenResult()).claims?.admin,r={uid:e.uid,email:e.email||"",displayName:e.displayName||e.email?.split("@")[0]||"User",photoURL:e.photoURL||"",phoneNumber:e.phoneNumber||"",bio:"",role:i?"admin":"user",isVerified:e.emailVerified,createdAt:Or(),updatedAt:Or(),privacy:{showEmail:!0,showPhone:!1,showAddress:!1},stats:{reportsSubmitted:0,alertsReceived:0,sosTriggered:0}},o=yi(this.firestore,"users",e.uid);return yield Il(o,r,{merge:!0}),r})}populateEditForm(e){this.editForm.set({displayName:e.displayName||"",phoneNumber:e.phoneNumber||"",bio:e.bio||"",barangay:e.address?.barangay||"",street:e.address?.street||"",city:e.address?.city||"Baguio City",showEmail:e.privacy?.showEmail??!0,showPhone:e.privacy?.showPhone??!1,showAddress:e.privacy?.showAddress??!1})}toggleEditMode(){if(this.isEditMode()){let e=this.profile();e&&this.populateEditForm(e)}this.isEditMode.set(!this.isEditMode()),this.successMessage.set(""),this.errorMessage.set("")}updateFormField(e,t){this.editForm.update(i=>ye(X({},i),{[e]:t}))}filterBarangays(e){let t=e.target.value.toLowerCase();if(this.updateFormField("barangay",e.target.value),this.showBarangaySuggestions.set(!0),!t){this.filteredBarangays=[...this.baguioBarangays];return}this.filteredBarangays=this.baguioBarangays.filter(i=>i.toLowerCase().includes(t))}selectBarangay(e){this.updateFormField("barangay",e),this.showBarangaySuggestions.set(!1),this.filteredBarangays=[...this.baguioBarangays]}hideBarangaySuggestions(){setTimeout(()=>{this.showBarangaySuggestions.set(!1)},200)}saveProfile(){return S(this,null,function*(){if(this.isOwnProfile()){this.isSaving.set(!0),this.errorMessage.set(""),this.successMessage.set("");try{let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let t=this.editForm();yield pp(e,{displayName:t.displayName});let i=yi(this.firestore,"users",e.uid);yield Ml(i,{displayName:t.displayName,phoneNumber:t.phoneNumber,bio:t.bio,address:{barangay:t.barangay,street:t.street,city:t.city},privacy:{showEmail:t.showEmail,showPhone:t.showPhone,showAddress:t.showAddress},updatedAt:Or()}),yield this.loadProfile(e.uid),this.successMessage.set("Profile updated successfully!"),this.toastService.success("Profile updated successfully!"),this.isEditMode.set(!1)}catch(e){console.error("Error saving profile:",e),this.errorMessage.set(e.message||"Failed to save profile"),this.toastService.error(e.message||"Failed to save profile")}finally{this.isSaving.set(!1)}}})}uploadPhoto(e){return S(this,null,function*(){let t=e.target;if(!t.files||!t.files[0])return;let i=t.files[0];if(!i.type.startsWith("image/")){this.errorMessage.set("Please select an image file"),this.toastService.error("Please select an image file");return}if(i.size>5*1024*1024){this.errorMessage.set("Image must be less than 5MB"),this.toastService.error("Image must be less than 5MB");return}this.isSaving.set(!0),this.errorMessage.set("");try{let r=this.auth.currentUser;if(!r)throw new Error("Not authenticated");let o=Y3(this.storage,`profile-photos/${r.uid}`);yield Q3(o,i);let a=yield K3(o);yield pp(r,{photoURL:a});let l=yi(this.firestore,"users",r.uid);yield Ml(l,{photoURL:a,updatedAt:Or()}),yield this.loadProfile(r.uid),this.successMessage.set("Photo updated successfully!"),this.toastService.success("Profile photo updated successfully!")}catch(r){console.error("Error uploading photo:",r),this.errorMessage.set(r.message||"Failed to upload photo"),this.toastService.error(r.message||"Failed to upload photo")}finally{this.isSaving.set(!1)}})}openPasswordModal(){this.passwordForm.set({currentPassword:"",newPassword:"",confirmPassword:""}),this.showPasswordModal.set(!0),this.errorMessage.set("")}closePasswordModal(){this.showPasswordModal.set(!1)}updatePasswordField(e,t){this.passwordForm.update(i=>ye(X({},i),{[e]:t}))}changePassword(){return S(this,null,function*(){let e=this.passwordForm();if(e.newPassword!==e.confirmPassword){this.errorMessage.set("Passwords do not match"),this.toastService.error("Passwords do not match");return}if(e.newPassword.length<6){this.errorMessage.set("Password must be at least 6 characters"),this.toastService.error("Password must be at least 6 characters");return}this.isSaving.set(!0),this.errorMessage.set("");try{let t=this.auth.currentUser;if(!t||!t.email)throw new Error("Not authenticated");let i=rv.credential(t.email,e.currentPassword);yield $R(t,i),yield KR(t,e.newPassword),this.successMessage.set("Password changed successfully!"),this.toastService.success("Password changed successfully!"),this.closePasswordModal()}catch(t){console.error("Error changing password:",t),t.code==="auth/wrong-password"?(this.errorMessage.set("Current password is incorrect"),this.toastService.error("Current password is incorrect")):(this.errorMessage.set(t.message||"Failed to change password"),this.toastService.error(t.message||"Failed to change password"))}finally{this.isSaving.set(!1)}})}goBack(){this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-profile"]],decls:14,vars:6,consts:[[1,"profile-container"],[1,"profile-header"],[1,"back-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","15 18 9 12 15 6"],[1,"header-spacer"],[1,"loading-state"],[1,"error-banner"],[1,"success-banner"],[1,"profile-content"],[1,"modal-overlay"],[1,"spinner"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"profile-card"],[1,"cover-photo"],[1,"cover-gradient"],[1,"avatar-section"],[1,"avatar-wrapper"],["alt","Profile Photo",1,"avatar-image",3,"src"],[1,"avatar-placeholder"],["title","Change photo",1,"avatar-upload-btn"],[1,"role-badge"],[1,"user-info"],[1,"action-buttons"],[1,"details-grid"],[1,"details-card"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"info-list"],[1,"edit-field"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"details-card","privacy-card"],[1,"details-card","stats-card"],["points","22 12 18 12 15 21 9 3 6 12 2 12"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],["type","file","accept","image/*","hidden","",3,"change"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"],["cx","12","cy","13","r","4"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"user-name"],[1,"user-bio"],[1,"verified-badge"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["d","M12 1L9.19 4.69 4.69 4.69 4.69 9.19 1 12l3.69 2.81 0 4.5h4.5L12 23l2.81-3.69h4.5l0-4.5L23 12l-3.69-2.81 0-4.5h-4.5L12 1zm-1.41 14.59L6 11l1.41-1.41 3.18 3.18 6-6L18 8.18l-7.41 7.41z"],["type","text","placeholder","Your name",3,"input","value"],["placeholder","Tell us about yourself...","rows","3",3,"input","value"],[1,"btn-primary",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"btn-secondary",3,"click"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"btn-primary",3,"click","disabled"],[1,"btn-spinner"],["points","20 6 9 17 4 12"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"privacy-indicator"],["type","tel","placeholder","+63 9XX XXX XXXX",3,"input","value"],[1,"private-message"],[1,"address-hierarchy-note"],["type","text","readonly","",1,"readonly-field",3,"value"],[1,"edit-field","barangay-field"],[1,"required"],[1,"autocomplete-wrapper"],["type","text","placeholder","Start typing to search barangay...","autocomplete","off",3,"input","focus","blur","value"],[1,"barangay-suggestions"],[1,"field-hint"],["type","text","placeholder","e.g., Purok 5, Main Street",3,"input","value"],[1,"more-results"],[3,"mousedown"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],[1,"privacy-note"],[1,"toggle-list"],[1,"toggle-item"],["type","checkbox",3,"change","checked"],[1,"toggle-slider"],[1,"toggle-label"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"modal-body"],[1,"error-message"],[1,"form-group"],["type","password","placeholder","Enter current password",3,"input","value"],["type","password","placeholder","Enter new password",3,"input","value"],["type","password","placeholder","Confirm new password",3,"input","value"],[1,"modal-footer"]],template:function(t,i){t&1&&(K(0,"div",0)(1,"header",1)(2,"button",2),ot("click",function(){return i.goBack()}),ne(),K(3,"svg",3),Ue(4,"polyline",4),Q(),w(5," Back "),Q(),fe(),K(6,"h1"),w(7),Q(),Ue(8,"div",5),Q(),Ee(9,$J,4,0,"div",6),Ee(10,GJ,6,1,"div",7),Ee(11,qJ,5,1,"div",8),Ee(12,wX,54,13,"div",9),Ee(13,MX,29,6,"div",10),Q()),t&2&&(C(7),ae(i.isOwnProfile()?"My Profile":"User Profile"),C(2),Ie(i.isLoading()?9:-1),C(),Ie(i.errorMessage()&&!i.isLoading()?10:-1),C(),Ie(i.successMessage()?11:-1),C(),Ie(i.profile()&&!i.isLoading()?12:-1),C(),Ie(i.showPasswordModal()?13:-1))},dependencies:[ht,mn],styles:[`[_nghost-%COMP%]{--navy-primary: #1a2a5e;--navy-dark: #0d1a3d;--navy-light: #2a3a6e;--gold-primary: #d4a84b;--gold-light: #e5c896;--gold-dark: #c9a227;--red-accent: #c41e3a;--red-light: #ff6b6b;--white: #ffffff;--gray-50: #f8f9fa;--gray-100: #f1f3f5;--gray-200: #e9ecef;--gray-300: #dee2e6;--gray-400: #ced4da;--gray-500: #adb5bd;--gray-600: #868e96;--gray-700: #495057;--gray-800: #343a40;--gray-900: #212529;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06);--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);--shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, .15), 0 10px 10px -5px rgba(0, 0, 0, .04);--shadow-gold: 0 4px 14px rgba(212, 168, 75, .3);--shadow-navy: 0 4px 14px rgba(26, 42, 94, .25);--transition-fast: .15s cubic-bezier(.4, 0, .2, 1);--transition-normal: .3s cubic-bezier(.4, 0, .2, 1);--transition-slow: .5s cubic-bezier(.4, 0, .2, 1);--radius-sm: 6px;--radius-md: 10px;--radius-lg: 14px;--radius-xl: 20px;--radius-2xl: 28px;--radius-full: 50%;display:block;min-height:100vh;background:linear-gradient(165deg,#f8f9fb,#eef1f5,#e8edf3)}.profile-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding-bottom:80px;position:relative}.profile-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:100;display:flex;align-items:center;justify-content:space-between;padding:14px 24px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);box-shadow:var(--shadow-navy);border-bottom:2px solid rgba(212,168,75,.3)}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--white);font-size:1.1rem;font-weight:600;letter-spacing:.5px;text-transform:uppercase}.profile-header[_ngcontent-%COMP%]   .header-spacer[_ngcontent-%COMP%]{width:80px}.back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 18px;background:#ffffff1a;border:1px solid rgba(212,168,75,.4);border-radius:var(--radius-lg);color:var(--gold-light);font-size:.9rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}.back-btn[_ngcontent-%COMP%]:hover{background:#d4a84b33;border-color:var(--gold-primary);transform:translate(-3px)}.back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform var(--transition-fast)}.back-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:translate(-3px)}.edit-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 22px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--navy-dark);font-size:.9rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold);text-transform:uppercase;letter-spacing:.5px}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 6px 20px #d4a84b66}.edit-button.cancel[_ngcontent-%COMP%]{background:#ffffff1a;color:var(--white);border:1px solid rgba(255,255,255,.3);box-shadow:none}.edit-button.cancel[_ngcontent-%COMP%]:hover{background:#fff3;border-color:var(--white)}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;padding-top:80px}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:56px;height:56px;border:4px solid rgba(26,42,94,.15);border-top-color:var(--gold-primary);border-radius:var(--radius-full);animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;color:var(--navy-primary);font-size:1rem;font-weight:500}.error-banner[_ngcontent-%COMP%], .success-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:76px 20px 16px;padding:16px 20px;border-radius:var(--radius-lg);font-size:.95rem;font-weight:500;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.error-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a1a,#ff6b6b1a);border:1px solid rgba(196,30,58,.3);color:var(--red-accent)}.success-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b9811a,#34d3991a);border:1px solid rgba(16,185,129,.3);color:#059669}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.profile-content[_ngcontent-%COMP%]{padding-top:76px}.profile-card[_ngcontent-%COMP%]{margin:20px;background:var(--white);border-radius:var(--radius-2xl);box-shadow:var(--shadow-xl);overflow:hidden;border:1px solid rgba(26,42,94,.08)}.cover-section[_ngcontent-%COMP%]{position:relative;margin-top:60px}.cover-photo[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 40%,var(--navy-light) 100%);overflow:hidden}.cover-photo[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 50%,rgba(212,168,75,.15) 0%,transparent 50%),radial-gradient(circle at 80% 30%,rgba(212,168,75,.1) 0%,transparent 40%),url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4a84b' fill-opacity='0.06'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}.cover-gradient[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 0%,rgba(255,255,255,.1) 100%)}.cover-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.cover-photo[_ngcontent-%COMP%]   .default-cover[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 50%,var(--navy-light) 100%);display:flex;align-items:center;justify-content:center}.cover-photo[_ngcontent-%COMP%]   .default-cover[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4a84b' fill-opacity='0.08'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}.cover-photo[_ngcontent-%COMP%]   .default-cover[_ngcontent-%COMP%]   .police-badge[_ngcontent-%COMP%]{font-size:4rem;opacity:.3;z-index:1}.cover-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.4) 0%,transparent 60%);pointer-events:none}.change-cover-btn[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;display:flex;align-items:center;gap:8px;padding:10px 16px;background:#0009;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:var(--radius-md);color:var(--white);font-size:.85rem;font-weight:500;cursor:pointer;transition:all var(--transition-fast)}.change-cover-btn[_ngcontent-%COMP%]:hover{background:#000c;transform:scale(1.02)}.change-cover-btn[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.avatar-section[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;margin-top:-70px;padding:0 20px;z-index:10}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:140px;height:140px}.avatar-container[_ngcontent-%COMP%]{position:relative;width:160px;height:160px}.avatar[_ngcontent-%COMP%], .avatar-image[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:var(--radius-full);border:5px solid var(--white);box-shadow:0 8px 32px #1a2a5e40,0 0 0 4px #d4a84b4d;overflow:hidden;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%)}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar[_ngcontent-%COMP%]   .default-avatar[_ngcontent-%COMP%], .avatar-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);color:var(--gold-primary);font-size:3.5rem;font-weight:700;text-transform:uppercase;letter-spacing:2px}.verified-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;margin-top:12px;padding:8px 16px;background:linear-gradient(135deg,#10b9811a,#34d39926);border:1px solid rgba(16,185,129,.3);border-radius:var(--radius-lg);color:#059669;font-size:.85rem;font-weight:600}.verified-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#10b981}.avatar-upload-btn[_ngcontent-%COMP%], .change-avatar-btn[_ngcontent-%COMP%]{position:absolute;bottom:4px;right:4px;width:40px;height:40px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:3px solid var(--white);border-radius:var(--radius-full);display:flex;align-items:center;justify-content:center;color:var(--navy-dark);font-size:1rem;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold)}.avatar-upload-btn[_ngcontent-%COMP%]:hover, .change-avatar-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 20px #d4a84b66}.role-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;margin-top:16px;padding:10px 20px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-xl);color:var(--gold-primary);font-size:.85rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;box-shadow:var(--shadow-navy);border:2px solid rgba(212,168,75,.3)}.role-badge.admin[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);color:var(--navy-dark);border-color:var(--gold-dark)}.role-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.9}.change-avatar-btn[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.user-info[_ngcontent-%COMP%]{padding:24px 30px 30px;text-align:center}.user-name[_ngcontent-%COMP%]{font-size:1.85rem;font-weight:800;color:var(--navy-dark);letter-spacing:-.5px;margin:0}.user-role[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;margin-top:10px;padding:8px 16px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-lg);color:var(--gold-primary);font-size:.85rem;font-weight:600;text-transform:capitalize}.user-role[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{font-size:.9rem}.user-bio[_ngcontent-%COMP%]{margin-top:16px;font-size:1rem;color:var(--gray-600);line-height:1.6;max-width:500px;margin-left:auto;margin-right:auto}.edit-field[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.edit-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.85rem;font-weight:600;color:var(--navy-primary);text-transform:uppercase;letter-spacing:.5px}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:14px 18px;background:var(--gray-50);border:2px solid var(--gray-200);border-radius:var(--radius-lg);font-size:1rem;color:var(--gray-800);transition:all var(--transition-fast)}.edit-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .edit-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gold-primary);background:var(--white);box-shadow:0 0 0 4px #d4a84b26}.edit-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical;font-family:inherit}.readonly-field[_ngcontent-%COMP%]{background:var(--gray-100)!important;color:var(--gray-600)!important;cursor:not-allowed}.address-hierarchy-note[_ngcontent-%COMP%]{color:var(--navy-primary);font-size:.85rem;font-weight:600;margin-bottom:16px;padding:10px 14px;background:linear-gradient(135deg,#d4a84b1a,#d4a84b0d);border-left:3px solid var(--gold-primary);border-radius:var(--radius-sm)}.edit-field[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--red-accent);font-weight:700}.field-hint[_ngcontent-%COMP%]{display:block;margin-top:6px;color:var(--gray-500);font-size:.75rem}.barangay-field[_ngcontent-%COMP%]   .autocomplete-wrapper[_ngcontent-%COMP%]{position:relative}.barangay-suggestions[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;max-height:280px;margin:0;padding:0;list-style:none;background:var(--white);border:2px solid var(--gold-primary);border-top:none;border-radius:0 0 var(--radius-lg) var(--radius-lg);box-shadow:var(--shadow-lg);overflow-y:auto;z-index:100}.barangay-suggestions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:12px 18px;cursor:pointer;font-size:.9rem;color:var(--gray-700);border-bottom:1px solid var(--gray-100);transition:all var(--transition-fast)}.barangay-suggestions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.barangay-suggestions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d4a84b26,#d4a84b0d);color:var(--navy-primary)}.barangay-suggestions[_ngcontent-%COMP%]   li.more-results[_ngcontent-%COMP%]{background:var(--gray-50);color:var(--gray-500);font-style:italic;font-size:.8rem;cursor:default;text-align:center}.barangay-suggestions[_ngcontent-%COMP%]   li.more-results[_ngcontent-%COMP%]:hover{background:var(--gray-50)}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;padding:0 30px 30px}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px 28px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--navy-dark);font-size:.95rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold)}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #d4a84b66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-secondary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px 28px;background:var(--gray-100);border:2px solid var(--gray-300);border-radius:var(--radius-lg);color:var(--gray-700);font-size:.95rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--gray-200);border-color:var(--gray-400)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;margin:0 20px 20px;background:var(--gray-200);border-radius:var(--radius-xl);overflow:hidden;box-shadow:var(--shadow-md)}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px 16px;background:var(--white);transition:all var(--transition-fast)}.stat-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1a2a5e08,#d4a84b0d)}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:var(--navy-primary);line-height:1}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{margin-top:6px;font-size:.8rem;color:var(--gray-500);font-weight:600;text-transform:uppercase;letter-spacing:.5px}.stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.5rem;color:var(--gold-primary)}.tabs[_ngcontent-%COMP%]{display:flex;gap:4px;margin:0 20px 20px;padding:6px;background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);border:1px solid var(--gray-200)}.tab-btn[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:10px;padding:14px 20px;background:transparent;border:none;border-radius:var(--radius-lg);color:var(--gray-500);font-size:.9rem;font-weight:600;cursor:pointer;transition:all var(--transition-fast)}.tab-btn[_ngcontent-%COMP%]:hover{background:var(--gray-100);color:var(--navy-primary)}.tab-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);color:var(--white);box-shadow:var(--shadow-navy)}.tab-btn.active[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--navy-light) 0%,var(--navy-primary) 100%)}.tab-btn[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{font-size:1.1rem}.tab-content[_ngcontent-%COMP%]{margin:0 20px 20px}.info-section[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;margin-bottom:20px;border:1px solid rgba(26,42,94,.06)}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 24px;padding-bottom:16px;border-bottom:2px solid var(--gray-100);font-size:1.1rem;font-weight:700;color:var(--navy-primary)}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--gold-primary)}.about-panel[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;border:1px solid rgba(26,42,94,.06)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--gray-100);font-size:1.1rem;font-weight:700;color:var(--navy-primary)}.section-title[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{color:var(--gold-primary)}.info-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding:16px;background:linear-gradient(135deg,var(--gray-50) 0%,rgba(212,168,75,.03) 100%);border-radius:var(--radius-lg);border:1px solid var(--gray-200);transition:all var(--transition-fast)}.info-item[_ngcontent-%COMP%]:hover{border-color:#d4a84b4d;transform:translate(4px)}.info-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{flex-shrink:0;width:44px;height:44px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-md);color:var(--gold-primary);font-size:1.1rem}.info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{flex:1}.info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--gray-500);font-weight:700;text-transform:uppercase;letter-spacing:.75px}.info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{margin-top:4px;font-size:1rem;color:var(--gray-800);font-weight:600}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:.85rem;font-weight:700;color:var(--navy-primary);text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:14px 18px;background:var(--gray-50);border:2px solid var(--gray-200);border-radius:var(--radius-lg);font-size:1rem;color:var(--gray-800);transition:all var(--transition-fast)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gold-primary);background:var(--white);box-shadow:0 0 0 4px #d4a84b26}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:120px;resize:vertical;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--gray-400)}.save-button[_ngcontent-%COMP%]{width:100%;padding:16px 28px;background:linear-gradient(135deg,var(--gold-primary) 0%,var(--gold-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--navy-dark);font-size:1rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-gold);text-transform:uppercase;letter-spacing:.5px}.save-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #d4a84b66}.save-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.activity-panel[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;border:1px solid rgba(26,42,94,.06)}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:14px}.activity-item[_ngcontent-%COMP%]{display:flex;gap:16px;padding:18px;background:linear-gradient(135deg,var(--gray-50) 0%,rgba(212,168,75,.03) 100%);border-radius:var(--radius-lg);border:1px solid var(--gray-200);transition:all var(--transition-fast)}.activity-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1a2a5e08,#d4a84b14);border-color:#d4a84b4d;transform:translate(6px)}.activity-icon[_ngcontent-%COMP%]{flex-shrink:0;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border-radius:var(--radius-lg);color:var(--gold-primary);font-size:1.2rem;box-shadow:var(--shadow-navy)}.activity-content[_ngcontent-%COMP%]{flex:1}.activity-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:var(--gray-800)}.activity-description[_ngcontent-%COMP%]{margin-top:4px;font-size:.9rem;color:var(--gray-500);line-height:1.4}.activity-time[_ngcontent-%COMP%]{margin-top:8px;font-size:.75rem;color:var(--gray-400);font-weight:600;text-transform:uppercase;letter-spacing:.5px}.empty-activity[_ngcontent-%COMP%]{text-align:center;padding:50px 20px;color:var(--gray-500)}.empty-activity[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:16px;opacity:.4}.empty-activity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}.settings-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.settings-section[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);padding:28px;border:1px solid rgba(26,42,94,.06)}.settings-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--gray-100);font-size:1.1rem;font-weight:700;color:var(--navy-primary)}.settings-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .settings-icon[_ngcontent-%COMP%]{color:var(--gold-primary)}.password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.change-password-btn[_ngcontent-%COMP%]{width:100%;padding:14px 28px;background:linear-gradient(135deg,var(--navy-primary) 0%,var(--navy-dark) 100%);border:none;border-radius:var(--radius-lg);color:var(--white);font-size:.95rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-navy);text-transform:uppercase;letter-spacing:.5px}.change-password-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #1a2a5e4d;background:linear-gradient(135deg,var(--navy-light) 0%,var(--navy-primary) 100%)}.change-password-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.danger-zone[_ngcontent-%COMP%]{border:2px solid rgba(196,30,58,.3);background:linear-gradient(135deg,#c41e3a05,#ff6b6b08)}.danger-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .danger-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .settings-icon[_ngcontent-%COMP%]{color:var(--red-accent)}.danger-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;width:100%;padding:14px 28px;background:transparent;border:2px solid var(--red-accent);border-radius:var(--radius-lg);color:var(--red-accent);font-size:.95rem;font-weight:700;cursor:pointer;transition:all var(--transition-fast);text-transform:uppercase;letter-spacing:.5px}.danger-btn[_ngcontent-%COMP%]:hover{background:var(--red-accent);color:var(--white);box-shadow:0 4px 16px #c41e3a4d}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1000;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#0d1a3df2,#1a2a5ef2);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.spinner[_ngcontent-%COMP%]{width:56px;height:56px;border:4px solid rgba(212,168,75,.2);border-top-color:var(--gold-primary);border-radius:var(--radius-full);animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;color:var(--white);font-size:1rem;font-weight:500;letter-spacing:.5px}@media (max-width: 768px){.profile-header[_ngcontent-%COMP%]{padding:12px 16px}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:.95rem}.back-btn[_ngcontent-%COMP%]{padding:8px 14px;font-size:.85rem}.edit-button[_ngcontent-%COMP%]{padding:8px 16px;font-size:.85rem}.cover-photo[_ngcontent-%COMP%]{height:160px}.avatar-wrapper[_ngcontent-%COMP%]{width:110px;height:110px}.avatar-placeholder[_ngcontent-%COMP%]{font-size:2.5rem}.avatar-section[_ngcontent-%COMP%]{margin-top:-55px}.role-badge[_ngcontent-%COMP%]{padding:8px 16px;font-size:.75rem}.user-info[_ngcontent-%COMP%]{padding:20px}.user-name[_ngcontent-%COMP%]{font-size:1.5rem}.profile-card[_ngcontent-%COMP%]{margin:16px}.stats-grid[_ngcontent-%COMP%]{margin:0 16px 16px}.stat-item[_ngcontent-%COMP%]{padding:16px 8px}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.7rem}.tabs[_ngcontent-%COMP%]{margin:0 16px 16px;padding:4px}.tab-btn[_ngcontent-%COMP%]{padding:12px 10px;font-size:.85rem;gap:6px}.tab-content[_ngcontent-%COMP%]{margin:0 16px 16px}.about-panel[_ngcontent-%COMP%], .activity-panel[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%], .info-section[_ngcontent-%COMP%]{padding:20px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;padding:0 20px 20px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.profile-header[_ngcontent-%COMP%]{padding:10px 12px}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:.85rem}.back-btn[_ngcontent-%COMP%]{padding:8px 12px}.cover-photo[_ngcontent-%COMP%]{height:120px}.avatar-wrapper[_ngcontent-%COMP%]{width:90px;height:90px}.avatar-placeholder[_ngcontent-%COMP%]{font-size:2rem}.avatar-section[_ngcontent-%COMP%]{margin-top:-45px}.avatar-upload-btn[_ngcontent-%COMP%]{width:32px;height:32px}.user-name[_ngcontent-%COMP%]{font-size:1.3rem}.role-badge[_ngcontent-%COMP%]{padding:6px 14px;font-size:.7rem}.stats-grid[_ngcontent-%COMP%]{margin:0 12px 12px}.stat-item[_ngcontent-%COMP%]{padding:12px 6px}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.3rem}.tabs[_ngcontent-%COMP%]{margin:0 12px 12px}.tab-btn[_ngcontent-%COMP%]{padding:10px 8px;font-size:.75rem}.tab-content[_ngcontent-%COMP%]{margin:0 12px 12px}.info-item[_ngcontent-%COMP%]{padding:12px;gap:12px}.info-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{width:36px;height:36px;font-size:.9rem}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.92)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.profile-card[_ngcontent-%COMP%], .cover-section[_ngcontent-%COMP%], .cover-photo[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s cubic-bezier(.4,0,.2,1)}.avatar-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn .5s cubic-bezier(.4,0,.2,1) .15s both}.role-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1) .25s both}.user-info[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1) .2s both}.stats-grid[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s cubic-bezier(.4,0,.2,1) .3s both}.tabs[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s cubic-bezier(.4,0,.2,1) .35s both}.tab-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1)}.info-section[_ngcontent-%COMP%], .about-panel[_ngcontent-%COMP%], .activity-panel[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1)}.profile-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-xl),0 0 0 1px #d4a84b1a}.info-item[_ngcontent-%COMP%], .activity-item[_ngcontent-%COMP%]{position:relative;overflow:hidden}.info-item[_ngcontent-%COMP%]:before, .activity-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(212,168,75,.05),transparent);transition:left .5s ease}.info-item[_ngcontent-%COMP%]:hover:before, .activity-item[_ngcontent-%COMP%]:hover:before{left:100%}`]})};var kP=(n,e)=>{let t=F(un),i=F(Mt);return t.isAdmin$.pipe(ue(r=>r?!0:i.createUrlTree(["/login"])))},Kp=(n,e)=>{let t=F(un),i=F(Mt);return t.currentUser$.pipe(ue(r=>r?!0:i.createUrlTree(["/login"])))};var J3=[{path:"",component:hy,title:"Mountain Sentinel Home"},{path:"map",component:My,title:"Safety Alert Map"},{path:"login",component:Ny,title:"Login / Sign Up"},{path:"report",component:Py,title:"Submit Safety Alert",canActivate:[Kp]},{path:"report-detail/:id",component:Sy,title:"Alert Details"},{path:"admin-dashboard",component:Ty,title:"Admin Dashboard",canActivate:[kP]},{path:"admin-report",component:Oy,title:"Issue Safety Alert",canActivate:[kP]},{path:"safety-feed",component:Dy,title:"Safety Feed"},{path:"police-reports",component:Ay,title:"Police Issuance Reports"},{path:"citizen-reports",component:Fy,title:"Citizen Reports"},{path:"user-dashboard",component:ky,title:"User Dashboard",canActivate:[Kp]},{path:"notification",component:Ry,title:"Notifications"},{path:"emergency-call",component:Ly,title:"Emergency Call",canActivate:[Kp]},{path:"profile",component:jy,title:"My Profile",canActivate:[Kp]},{path:"**",redirectTo:""}];var PX={apiKey:"AIzaSyC5tdlJxwcSqbHwGAjOjUbd7XVU54ePawk",authDomain:"mountain-sentinel.firebaseapp.com",projectId:"mountain-sentinel",storageBucket:"mountain-sentinel.firebasestorage.app",messagingSenderId:"635510430186",appId:"1:635510430186:web:e333c2a926d64d44383a93",measurementId:"G-5G9M3TM3NW"},X3={providers:[Ak(()=>kk(PX)),k4(()=>R4()),UR(()=>HR()),W3(()=>Z3()),G4(()=>q4()),hC(J3)]};var SX=(n,e)=>e.id;function TX(n,e){n&1&&(ne(),K(0,"svg",4),Ue(1,"path",10)(2,"polyline",11),Q())}function OX(n,e){n&1&&(ne(),K(0,"svg",4),Ue(1,"circle",12)(2,"line",13)(3,"line",14),Q())}function DX(n,e){n&1&&(ne(),K(0,"svg",4),Ue(1,"path",15)(2,"line",16)(3,"line",17),Q())}function AX(n,e){n&1&&(ne(),K(0,"svg",4),Ue(1,"circle",12)(2,"line",18)(3,"line",19),Q())}function kX(n,e){if(n&1){let t=pe();K(0,"div",2),ot("click",function(){let r=z(t).$implicit,o=T();return j(o.dismiss(r.id))}),K(1,"div",3),Ee(2,TX,3,0,":svg:svg",4)(3,OX,4,0,":svg:svg",4)(4,DX,4,0,":svg:svg",4)(5,AX,4,0,":svg:svg",4),Q(),K(6,"span",5),w(7),Q(),K(8,"button",6),ot("click",function(r){let o=z(t).$implicit;return T().dismiss(o.id),j(r.stopPropagation())}),ne(),K(9,"svg",7),Ue(10,"line",8)(11,"line",9),Q()()()}if(n&2){let t,i=e.$implicit;Xc("toast-"+i.type),C(2),Ie((t=i.type)==="success"?2:t==="error"?3:t==="warning"?4:t==="info"?5:-1),C(5),ae(i.message)}}var Hy=class n{toastService=F(ei);dismiss(e){this.toastService.dismiss(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-toast"]],decls:3,vars:0,consts:[[1,"toast-container"],[1,"toast",3,"class"],[1,"toast",3,"click"],[1,"toast-icon"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"toast-message"],[1,"toast-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"]],template:function(t,i){t&1&&(K(0,"div",0),Yc(1,kX,12,4,"div",1,SX),Q()),t&2&&(C(),Qc(i.toastService.toasts()))},dependencies:[ht],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:80px;right:20px;z-index:10000;display:flex;flex-direction:column;gap:12px;max-width:400px}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 18px;border-radius:12px;box-shadow:0 8px 32px #00000026,0 4px 12px #0000001a;cursor:pointer;animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}.toast-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#059669,#10b981);color:#fff}.toast-error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#ef4444);color:#fff}.toast-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d97706,#f59e0b);color:#fff}.toast-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#2563eb);color:#fff}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center}.toast-message[_ngcontent-%COMP%]{flex:1;font-size:.95rem;font-weight:500;line-height:1.4}.toast-close[_ngcontent-%COMP%]{flex-shrink:0;background:#fff3;border:none;border-radius:6px;padding:4px;cursor:pointer;color:inherit;display:flex;align-items:center;justify-content:center;transition:background .2s}.toast-close[_ngcontent-%COMP%]:hover{background:#ffffff4d}@media (max-width: 480px){.toast-container[_ngcontent-%COMP%]{left:12px;right:12px;max-width:none}}"]})};var e5=()=>({exact:!0});function RX(n,e){if(n&1&&(_(0,"span",29),w(1),v()),n&2){let t=e.ngIf;ke("hidden",t===0),C(),ae(t)}}function NX(n,e){if(n&1){let t=pe();Je(0),_(1,"a",17),J("click",function(){z(t);let r=T();return j(r.closeNavMenu())}),ne(),_(2,"svg",18),re(3,"path",19),v(),w(4," Home "),v(),fe(),_(5,"a",20),J("click",function(){z(t);let r=T();return j(r.closeNavMenu())}),ne(),_(6,"svg",18),re(7,"path",21),v(),w(8," Admin Dashboard "),v(),fe(),_(9,"a",22),J("click",function(){z(t);let r=T();return j(r.closeNavMenu())}),ne(),_(10,"svg",18),re(11,"path",23),v(),w(12," Issue Alert "),v(),fe(),_(13,"a",24),J("click",function(){z(t);let r=T();return j(r.closeNavMenu())}),ne(),_(14,"svg",18),re(15,"path",25),v(),w(16," SOS Notifications "),te(17,RX,2,3,"span",26),xe(18,"async"),v(),fe(),_(19,"a",27),J("click",function(){z(t);let r=T();return j(r.closeNavMenu())}),ne(),_(20,"svg",18),re(21,"path",28),v(),w(22," Incident Map "),v(),Xe()}if(n&2){let t=T();C(),H("routerLinkActiveOptions",Uu(4,e5)),C(16),H("ngIf",Te(18,2,t.sosCount$))}}function LX(n,e){if(n&1&&(_(0,"span",37),w(1),v()),n&2){let t=e.ngIf;ke("hidden",t===0),C(),ae(t)}}function FX(n,e){if(n&1){let t=pe();Je(0),_(1,"a",17),J("click",function(){z(t);let r=T();return j(r.closeNavMenu())}),ne(),_(2,"svg",18),re(3,"path",19),v(),w(4," Home "),v(),fe(),_(5,"a",30),J("click",function(){z(t);let r=T();return j(r.closeNavMenu())}),ne(),_(6,"svg",18),re(7,"path",31),v(),w(8," Police Alerts "),v(),fe(),_(9,"a",32),J("click",function(){z(t);let r=T();return j(r.closeNavMenu())}),ne(),_(10,"svg",18),re(11,"path",33),v(),w(12," Notifications "),te(13,LX,2,3,"span",34),xe(14,"async"),v(),fe(),_(15,"a",35),J("click",function(r){z(t);let o=T();return j(o.handleNavReportClick(r))}),ne(),_(16,"svg",18),re(17,"path",36),v(),w(18," Submit Report "),v(),Xe()}if(n&2){let t=T();C(),H("routerLinkActiveOptions",Uu(4,e5)),C(12),H("ngIf",Te(14,2,t.unreadCount$))}}function VX(n,e){if(n&1){let t=pe();Je(0),_(1,"div",51)(2,"button",52),J("click",function(){z(t);let r=T(2);return j(r.navigateToPoliceReports())}),ne(),_(3,"svg",18),re(4,"path",31),v(),fe(),_(5,"span",53),w(6,"Police Reports"),v()(),_(7,"button",54),J("click",function(){z(t);let r=T(2);return j(r.navigateToMap())}),ne(),_(8,"svg",55),re(9,"path",56)(10,"circle",57),v(),fe(),_(11,"span",53),w(12,"Map"),v()(),_(13,"button",58),J("click",function(){z(t);let r=T(2);return j(r.triggerEmergencySOS())}),ne(),_(14,"svg",59),re(15,"polygon",60)(16,"line",61)(17,"line",62),v(),fe(),_(18,"span",53),w(19,"SOS"),v()()(),Xe()}}function BX(n,e){if(n&1){let t=pe();Je(0),_(1,"div",38),xe(2,"async"),_(3,"span",39),w(4),xe(5,"async"),v()(),te(6,VX,20,0,"ng-container",11),xe(7,"async"),_(8,"div",40),J("click",function(){z(t);let r=T();return j(r.toggleProfileMenu())}),_(9,"div",41),ne(),_(10,"svg",18),re(11,"path",42),v()(),fe(),_(12,"div",43)(13,"a",44),J("click",function(){z(t);let r=T();return j(r.closeProfileMenu())}),ne(),_(14,"svg",45),re(15,"path",42),v(),w(16," My Profile "),v(),fe(),_(17,"button",46),J("click",function(){z(t);let r=T();return r.logout(),j(r.closeProfileMenu())}),ne(),_(18,"svg",47),re(19,"path",48)(20,"polyline",49)(21,"line",50),v(),w(22," Logout "),v()()(),Xe()}if(n&2){let t=T();C(),ke("admin-indicator",Te(2,6,t.authService.isAdmin$)),C(3),ae(Te(5,8,t.authService.isAdmin$)?"ADMIN":"CITIZEN"),C(2),H("ngIf",!Te(7,10,t.authService.isAdmin$)),C(6),ke("open",t.profileMenuOpen)}}function UX(n,e){if(n&1){let t=pe();_(0,"a",63),J("click",function(){z(t);let r=T();return j(r.closeMenu())}),ne(),_(1,"svg",64),re(2,"path",42),v(),w(3," Login "),v()}}function zX(n,e){if(n&1){let t=pe();_(0,"div",65),J("click",function(){z(t);let r=T();return j(r.closeAuthPrompt())}),_(1,"div",66),J("click",function(r){return z(t),j(r.stopPropagation())}),_(2,"button",67),J("click",function(){z(t);let r=T();return j(r.closeAuthPrompt())}),w(3,"\xD7"),v(),_(4,"div",68),ne(),_(5,"svg",69),re(6,"rect",70)(7,"path",71),v()(),fe(),_(8,"h2"),w(9,"Authentication Required"),v(),_(10,"p",72),w(11," You need to create an account or sign in before you can submit a safety alert. "),v(),_(12,"p",73),w(13," Creating an account helps us verify reports and keep the community safe. "),v(),_(14,"div",74)(15,"button",75),J("click",function(){z(t);let r=T();return j(r.navigateToLogin())}),w(16," Sign In / Sign Up "),v(),_(17,"button",76),J("click",function(){z(t);let r=T();return j(r.closeAuthPrompt())}),w(18,"Cancel"),v()()()()}}var $y=class n{title="Mountain Sentinel";authService=F(un);notificationService=F(es);animationService=F(Dr);router=F(Mt);unreadCount$;sosCount$;showAuthPrompt=!1;menuOpen=!1;profileMenuOpen=!1;navMenuOpen=!1;constructor(){this.unreadCount$=this.notificationService.getUnreadCount(),this.sosCount$=this.notificationService.getSOSCount()}ngOnInit(){this.animationService.initScrollRevealObserver(),this.animationService.initParallaxEffect()}ngAfterViewInit(){document.querySelectorAll("button:not(.hamburger-btn)").forEach(t=>{this.animationService.addRippleEffect(t)})}ngOnDestroy(){this.animationService.destroyScrollObserver()}toggleMenu(){this.menuOpen=!this.menuOpen,this.profileMenuOpen=!1,this.navMenuOpen=!1}closeMenu(){this.menuOpen=!1}toggleNavMenu(){this.navMenuOpen=!this.navMenuOpen,this.menuOpen=!1,this.profileMenuOpen=!1}closeNavMenu(){this.navMenuOpen=!1}handleNavReportClick(e){this.closeNavMenu(),this.handleReportClick(e)}toggleProfileMenu(){this.profileMenuOpen=!this.profileMenuOpen}closeProfileMenu(){this.profileMenuOpen=!1}handleReportClick(e){this.authService.currentUser$.pipe(Zn(1)).subscribe(t=>{t||(e.preventDefault(),this.showAuthPrompt=!0)})}closeAuthPrompt(){this.showAuthPrompt=!1}navigateToLogin(){this.showAuthPrompt=!1,this.router.navigate(["/login"])}logout(){this.authService.logout()}navigateToPoliceReports(){this.router.navigate(["/safety-feed"]),this.closeProfileMenu()}navigateToMap(){this.router.navigate(["/map"]),this.closeProfileMenu()}triggerEmergencySOS(){this.router.navigate(["/dashboard"]),this.closeProfileMenu()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=st({type:n,selectors:[["app-root"]],decls:33,vars:24,consts:[["loginBtn",""],[1,"app-header"],[1,"header-brand-group"],["aria-label","Navigation menu",1,"nav-hamburger-btn",3,"click"],[1,"nav-hamburger-line"],[1,"logo-area"],[1,"logo-badge"],[1,"app-title"],[1,"nav-slide-menu"],[1,"nav-slide-header"],[1,"nav-close-btn",3,"click"],[4,"ngIf"],[1,"nav-menu-overlay",3,"click"],[1,"header-right"],[4,"ngIf","ngIfElse"],[1,"app-main"],[1,"modal-overlay"],["routerLink","/","routerLinkActive","active",1,"nav-slide-item",3,"click","routerLinkActiveOptions"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","currentColor"],["d","M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"],["routerLink","/admin-dashboard","routerLinkActive","active",1,"nav-slide-item","admin-item",3,"click"],["d","M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"],["routerLink","/admin-report","routerLinkActive","active",1,"nav-slide-item","admin-item",3,"click"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"],["routerLink","/notification","routerLinkActive","active",1,"nav-slide-item","admin-item","sos-item",3,"click"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],["class","nav-badge sos-badge",3,"hidden",4,"ngIf"],["routerLink","/map","routerLinkActive","active",1,"nav-slide-item","admin-item",3,"click"],["d","M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"],[1,"nav-badge","sos-badge"],["routerLink","/safety-feed","routerLinkActive","active",1,"nav-slide-item","police-alerts-item",3,"click"],["d","M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"],["routerLink","/notification","routerLinkActive","active",1,"nav-slide-item",3,"click"],["d","M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"],["class","nav-badge",3,"hidden",4,"ngIf"],["routerLink","/report","routerLinkActive","active",1,"nav-slide-item",3,"click"],["d","M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"],[1,"nav-badge"],[1,"user-role-indicator"],[1,"role-text"],[1,"profile-dropdown",3,"click"],[1,"profile-avatar"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"profile-menu"],["routerLink","/profile",1,"profile-menu-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],[1,"profile-menu-item","logout-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],[1,"header-nav-buttons"],["title","Police Reports","aria-label","View Police Reports",1,"header-nav-btn",3,"click"],[1,"header-nav-label"],["title","Incident Map","aria-label","View Incident Map",1,"header-nav-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],["title","Emergency SOS","aria-label","Trigger Emergency SOS",1,"header-nav-btn","sos-btn-header",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["routerLink","/login","routerLinkActive","active",1,"login-link",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","currentColor"],[1,"modal-overlay",3,"click"],[1,"auth-prompt-modal",3,"click"],["aria-label","Close",1,"close-btn",3,"click"],[1,"modal-icon"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"modal-message"],[1,"modal-submessage"],[1,"modal-actions"],[1,"modal-btn","primary-btn",3,"click"],[1,"modal-btn","secondary-btn",3,"click"]],template:function(t,i){if(t&1){let r=pe();re(0,"app-toast"),_(1,"header",1)(2,"div",2)(3,"button",3),J("click",function(){return z(r),j(i.toggleNavMenu())}),re(4,"span",4)(5,"span",4)(6,"span",4),v(),_(7,"div",5)(8,"div",6),w(9,"BCPO"),v()(),_(10,"h1",7),w(11,"BAGUIO FINEST"),v()(),_(12,"div",8),xe(13,"async"),_(14,"div",9)(15,"span"),w(16),xe(17,"async"),v(),_(18,"button",10),J("click",function(){return z(r),j(i.closeNavMenu())}),w(19,"\xD7"),v()(),te(20,NX,23,5,"ng-container",11),xe(21,"async"),te(22,FX,19,5,"ng-container",11),xe(23,"async"),v(),_(24,"div",12),J("click",function(){return z(r),j(i.closeNavMenu())}),v(),_(25,"div",13),te(26,BX,23,12,"ng-container",14),xe(27,"async"),te(28,UX,4,0,"ng-template",null,0,It),v()(),_(30,"main",15),re(31,"router-outlet"),v(),Ee(32,zX,19,0,"div",16)}if(t&2){let r=dt(29);C(3),ke("active",i.navMenuOpen),C(9),ke("open",i.navMenuOpen)("admin-menu",Te(13,14,i.authService.isAdmin$)),C(4),ae(Te(17,16,i.authService.isAdmin$)?"Admin Panel":"Navigation"),C(4),H("ngIf",Te(21,18,i.authService.isAdmin$)),C(2),H("ngIf",!Te(23,20,i.authService.isAdmin$)),C(2),ke("open",i.navMenuOpen),C(2),H("ngIf",Te(27,22,i.authService.currentUser$))("ngIfElse",r),C(6),Ie(i.showAuthPrompt?32:-1)}},dependencies:[ht,zt,$f,Gi,Xr,dC,Hy,ln],styles:['.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);color:#fff;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 8px 32px #0d1a3d80;height:70px;position:relative;z-index:1000;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:2px solid #d4a84b;animation:_ngcontent-%COMP%_slideDown .6s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.header-brand-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0;flex-shrink:0}.header-brand-group[_ngcontent-%COMP%]   .nav-hamburger-btn[_ngcontent-%COMP%]{margin-right:10px}.header-brand-group[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:46px;height:46px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid rgba(255,255,255,.8);flex-shrink:0;box-shadow:0 4px 16px #d4a84b80,inset 0 1px 2px #ffffff80;transition:all .3s cubic-bezier(.4,0,.2,1);margin-right:10px}.header-brand-group[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 8px 24px #d4a84b99}.header-brand-group[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:11px;font-weight:800;color:#1a3a52;text-align:center;line-height:1}.header-brand-group[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:800;letter-spacing:1px;line-height:1.2;white-space:nowrap;background:linear-gradient(135deg,#fff,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.app-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-shrink:0}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:46px;height:46px;background:linear-gradient(135deg,#d4a84b,#c9a227);border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid rgba(255,255,255,.8);flex-shrink:0;box-shadow:0 4px 16px #d4a84b80,inset 0 1px 2px #ffffff80;transition:all .3s cubic-bezier(.4,0,.2,1)}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 8px 24px #d4a84b99}.header-left[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:11px;font-weight:800;color:#1a3a52;text-align:center;line-height:1}.header-left[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:800;letter-spacing:1px;line-height:1.2;white-space:nowrap;background:linear-gradient(135deg,#fff,#d4a84b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.app-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-shrink:0}.user-role-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;padding:6px 14px;background:linear-gradient(135deg,#50c878,#3ba55c);border-radius:20px;font-size:.7rem;font-weight:700;letter-spacing:.5px;color:#fff;box-shadow:0 2px 6px #50c87859;border:1px solid rgba(255,255,255,.3)}.user-role-indicator[_ngcontent-%COMP%]   .role-text[_ngcontent-%COMP%]{line-height:1}.user-role-indicator.admin-indicator[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#f0c800);color:#1a3a52;box-shadow:0 2px 8px #ffd70073;border:1px solid rgba(255,215,0,.5);animation:_ngcontent-%COMP%_adminGlow 3s ease-in-out infinite}.header-nav-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.header-nav-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;min-height:44px;min-width:44px;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:8px;color:#fff;font-size:.85rem;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap}.header-nav-btn[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#d4a84b99;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.header-nav-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.header-nav-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.header-nav-label[_ngcontent-%COMP%]{display:none}.header-nav-btn.sos-btn-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#dc3545);border-color:#ffffff4d;animation:_ngcontent-%COMP%_sosHeaderPulse 2s infinite}.header-nav-btn.sos-btn-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ff8080,#e64555);box-shadow:0 4px 16px #ff6b6b66}@keyframes _ngcontent-%COMP%_sosHeaderPulse{0%,to{box-shadow:0 0 #dc354566}50%{box-shadow:0 0 0 8px #dc354500}}@media (min-width: 768px){.header-nav-label[_ngcontent-%COMP%]{display:inline}.header-nav-btn[_ngcontent-%COMP%]{padding:8px 14px}}@media (max-width: 600px){.header-nav-buttons[_ngcontent-%COMP%]{gap:4px}.header-nav-btn[_ngcontent-%COMP%]{padding:8px;min-width:44px;justify-content:center}.header-nav-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}}.profile-dropdown[_ngcontent-%COMP%]{position:relative;cursor:pointer}.profile-avatar[_ngcontent-%COMP%]{width:42px;height:42px;background:linear-gradient(135deg,#fff,#e0e0e0);border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid #d4a84b;box-shadow:0 4px 12px #0003;transition:all .3s ease}.profile-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a2a5e}.profile-avatar[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 6px 16px #d4a84b66;border-color:#e5c896}.profile-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);right:0;min-width:180px;background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s cubic-bezier(.4,0,.2,1);overflow:hidden;z-index:1001}.profile-menu.open[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.profile-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:14px 18px;border:none;background:transparent;color:#333;font-size:.9rem;font-weight:500;text-decoration:none;cursor:pointer;transition:all .2s ease}.profile-menu-item[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:#1a2a5e}.profile-menu-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.profile-menu-item.logout-item[_ngcontent-%COMP%]{border-top:1px solid #eee;color:#c41e3a}.profile-menu-item.logout-item[_ngcontent-%COMP%]:hover{background:#fff5f5;color:#a01830}.header-right[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:10px 20px;background:linear-gradient(135deg,#d4a84b,#c9a227);color:#1a2a5e;font-weight:700;font-size:.9rem;border-radius:25px;text-decoration:none;box-shadow:0 4px 12px #d4a84b66;transition:all .3s ease}.header-right[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.header-right[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #d4a84b80}.user-role-indicator.admin-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#1a3a52}@keyframes _ngcontent-%COMP%_adminGlow{0%,to{box-shadow:0 2px 10px #ffd70080}50%{box-shadow:0 4px 18px #ffd700b3}}.nav-hamburger-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:4px;width:42px;height:42px;background:#ffffff1a;border:2px solid rgba(212,168,75,.5);border-radius:10px;cursor:pointer;padding:8px;transition:all .3s cubic-bezier(.4,0,.2,1);z-index:1002;flex-shrink:0;margin-right:8px}.nav-hamburger-btn[_ngcontent-%COMP%]:hover{background:#d4a84b33;border-color:#d4a84b;transform:scale(1.05)}.nav-hamburger-line[_ngcontent-%COMP%]{width:20px;height:2.5px;background:#d4a84b;border-radius:2px;transition:all .3s ease}.nav-hamburger-btn.active[_ngcontent-%COMP%]{background:#d4a84b4d;border-color:#d4a84b}.nav-hamburger-btn.active[_ngcontent-%COMP%]   .nav-hamburger-line[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(4px,5px)}.nav-hamburger-btn.active[_ngcontent-%COMP%]   .nav-hamburger-line[_ngcontent-%COMP%]:nth-child(2){opacity:0;transform:translate(-10px)}.nav-hamburger-btn.active[_ngcontent-%COMP%]   .nav-hamburger-line[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(4px,-5px)}.nav-slide-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:-280px;width:280px;height:100vh;background:linear-gradient(180deg,#1a2a5e,#0d1a3d);box-shadow:4px 0 30px #0000004d;z-index:1100;transition:left .35s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column;overflow-y:auto}.nav-slide-menu.open[_ngcontent-%COMP%]{left:0}.nav-slide-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 20px 16px;border-bottom:2px solid rgba(212,168,75,.3);background:#0003}.nav-slide-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d4a84b;font-size:1.1rem;font-weight:700;letter-spacing:1px;text-transform:uppercase}.nav-close-btn[_ngcontent-%COMP%]{width:36px;height:36px;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:50%;color:#fff;font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.nav-close-btn[_ngcontent-%COMP%]:hover{background:#c41e3a99;border-color:#c41e3a}.nav-slide-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:18px 24px;color:#ffffffe6;text-decoration:none;font-size:1rem;font-weight:500;border-bottom:1px solid rgba(255,255,255,.08);transition:all .25s ease;position:relative}.nav-slide-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;opacity:.8}.nav-slide-item[_ngcontent-%COMP%]:hover{background:#d4a84b26;color:#d4a84b;padding-left:30px}.nav-slide-item[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{opacity:1;color:#d4a84b}.nav-slide-item.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(212,168,75,.25) 0%,transparent 100%);color:#d4a84b;border-left:4px solid #d4a84b}.nav-badge[_ngcontent-%COMP%]{margin-left:auto;background:linear-gradient(135deg,#c41e3a,#a01830);color:#fff;font-size:.7rem;font-weight:700;padding:3px 8px;border-radius:12px;min-width:20px;text-align:center}.nav-badge.hidden[_ngcontent-%COMP%]{display:none}.nav-menu-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;z-index:1099;opacity:0;visibility:hidden;transition:all .3s ease}.nav-menu-overlay.open[_ngcontent-%COMP%]{opacity:1;visibility:visible}.nav-slide-menu.admin-menu[_ngcontent-%COMP%]{background:linear-gradient(180deg,#0d1a3d,#1a2a5e,#0d1a3d);border-right:3px solid rgba(212,168,75,.4)}.nav-slide-menu.admin-menu[_ngcontent-%COMP%]   .nav-slide-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a84b26,#0000004d);border-bottom:2px solid rgba(212,168,75,.5)}.nav-slide-menu.admin-menu[_ngcontent-%COMP%]   .nav-slide-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d4a84b;font-weight:800;letter-spacing:2px}.nav-slide-item.admin-item[_ngcontent-%COMP%]{border-left:3px solid transparent;transition:all .3s ease}.nav-slide-item.admin-item[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,rgba(212,168,75,.2) 0%,transparent 100%);border-left-color:#d4a84b;padding-left:28px}.nav-slide-item.admin-item.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(212,168,75,.3) 0%,transparent 100%);border-left:4px solid #d4a84b;color:#d4a84b}.nav-slide-item.sos-item[_ngcontent-%COMP%]{background:#c41e3a1a;border-left:3px solid rgba(196,30,58,.5)}.nav-slide-item.sos-item[_ngcontent-%COMP%]:hover{background:#c41e3a40;border-left-color:#c41e3a}.nav-slide-item.sos-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ff6b6b}.nav-badge.sos-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c41e3a,#8b0000);animation:_ngcontent-%COMP%_sosPulse 2s infinite}@keyframes _ngcontent-%COMP%_sosPulse{0%,to{transform:scale(1);box-shadow:0 0 #c41e3a80}50%{transform:scale(1.1);box-shadow:0 0 10px 3px #c41e3a66}}.hamburger-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:center;align-items:center;gap:5px;width:44px;height:44px;background:#ffffff1a;border:2px solid rgba(255,255,255,.2);border-radius:8px;cursor:pointer;padding:10px;transition:all .3s ease;z-index:1002}.hamburger-btn[_ngcontent-%COMP%]:hover{background:#fff3}.hamburger-line[_ngcontent-%COMP%]{width:22px;height:3px;background:#fff;border-radius:2px;transition:all .3s ease}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(5px,6px)}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(2){opacity:0;transform:translate(-10px)}.hamburger-btn.active[_ngcontent-%COMP%]   .hamburger-line[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(5px,-6px)}.menu-overlay[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;background:#00000080;z-index:999;opacity:0;transition:opacity .3s ease}.menu-overlay.open[_ngcontent-%COMP%]{opacity:1}.app-header[_ngcontent-%COMP%]   .header-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:12px 24px;border-radius:8px;transition:all .25s ease;font-size:14px;font-weight:600;border:none;background:transparent;cursor:pointer;display:flex;align-items:center;gap:6px;white-space:nowrap;position:relative;overflow:hidden}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:#ffffff1a;transition:left .4s cubic-bezier(.4,0,.2,1);z-index:-1}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{left:100%}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffffff26;transform:translateY(-2px)}.header-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#fff3;box-shadow:inset 0 -2px #ffffff80;animation:_ngcontent-%COMP%_activeLink .5s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_activeLink{0%{transform:scale(.95)}50%{transform:scale(1.05)}to{transform:scale(1)}}.header-nav[_ngcontent-%COMP%]   .report-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);font-weight:700;box-shadow:0 8px 20px #51cf6659;border:1px solid rgba(255,255,255,.2)}.header-nav[_ngcontent-%COMP%]   .report-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40c057,#2da043);transform:translateY(-3px);box-shadow:0 12px 28px #51cf6673}.header-nav[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a2a5e,#0d1a3d);font-weight:700;box-shadow:0 8px 20px #1a2a5e59;border:1px solid rgba(255,255,255,.2)}.header-nav[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2a3f7a,#1a2a5e);transform:translateY(-3px);box-shadow:0 12px 28px #1a2a5e73}.header-nav[_ngcontent-%COMP%]   .profile-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,#d4a84b,#c9a227);color:#1a2a5e;font-weight:700;box-shadow:0 8px 20px #d4a84b59;border:1px solid rgba(255,255,255,.3)}.header-nav[_ngcontent-%COMP%]   .profile-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e5c896,#d4a84b);transform:translateY(-3px);box-shadow:0 12px 28px #d4a84b80;color:#0d1a3d}.header-nav[_ngcontent-%COMP%]   .profile-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{background:#ffffff26;font-size:14px;border:1px solid rgba(255,255,255,.2)}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff40}.header-nav[_ngcontent-%COMP%]   .notification-link[_ngcontent-%COMP%]{position:relative;padding:12px 18px}.header-nav[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background-color:#d32f2f;color:#fff;border-radius:50%;min-width:20px;height:20px;font-size:.75rem;font-weight:700;padding:0 4px;animation:_ngcontent-%COMP%_pulse 2s infinite}.header-nav[_ngcontent-%COMP%]   .unread-badge.hidden[_ngcontent-%COMP%]{display:none}.header-nav[_ngcontent-%COMP%]   .sos-emergency-link[_ngcontent-%COMP%]{background:#d32f2f33;border:2px solid rgba(211,47,47,.5);font-weight:700}.header-nav[_ngcontent-%COMP%]   .sos-emergency-link[_ngcontent-%COMP%]:hover{background:#d32f2f59;transform:translateY(-1px)}.header-nav[_ngcontent-%COMP%]   .sos-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background-color:#d32f2f;color:#fff;border-radius:50%;min-width:22px;height:22px;font-size:.8rem;font-weight:700;padding:0 5px;animation:_ngcontent-%COMP%_urgentPulse 1s infinite;box-shadow:0 0 12px #d32f2fcc}.header-nav[_ngcontent-%COMP%]   .sos-badge.hidden[_ngcontent-%COMP%]{display:none}@keyframes _ngcontent-%COMP%_urgentPulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.8}}.header-nav[_ngcontent-%COMP%]   .admin-link[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   .admin-report-link[_ngcontent-%COMP%]{background:#ffd70026;border:2px solid rgba(255,215,0,.35)}.header-nav[_ngcontent-%COMP%]   .admin-link[_ngcontent-%COMP%]:hover, .header-nav[_ngcontent-%COMP%]   .admin-report-link[_ngcontent-%COMP%]:hover{background:#ffd7004d;transform:translateY(-1px)}.app-main[_ngcontent-%COMP%]{padding:0;min-height:calc(100vh - 70px)}.global-sos[_ngcontent-%COMP%]{position:fixed;right:24px;bottom:120px;width:220px;z-index:1200}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}@media (max-width: 1200px){.app-header[_ngcontent-%COMP%]{padding:12px 40px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 18px;font-size:13px}}@media (max-width: 992px){.app-header[_ngcontent-%COMP%]{padding:10px 25px}.hamburger-btn[_ngcontent-%COMP%]{display:flex}.menu-overlay[_ngcontent-%COMP%], .menu-overlay.open[_ngcontent-%COMP%]{display:block}.header-nav[_ngcontent-%COMP%]{position:fixed;top:0;right:-320px;width:300px;height:100vh;background:linear-gradient(180deg,#1a2a5e,#0d1a3d);flex-direction:column;align-items:stretch;padding:90px 20px 30px;gap:8px;transition:right .3s ease;z-index:1001;box-shadow:-5px 0 30px #0000004d;overflow-y:auto}.header-nav.open[_ngcontent-%COMP%]{right:0}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:15px 20px;font-size:15px;border-radius:10px;justify-content:flex-start;width:100%}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{margin-top:auto;background:#dc354533;border:1px solid rgba(220,53,69,.4)}.header-nav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#dc35454d}}@media (max-width: 600px){.app-header[_ngcontent-%COMP%]{padding:10px 15px;height:auto;min-height:65px}.header-left[_ngcontent-%COMP%]   .brand-section[_ngcontent-%COMP%]{gap:3px}.user-role-indicator[_ngcontent-%COMP%]{padding:3px 8px 3px 5px;font-size:.6rem;gap:4px}.user-role-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{width:16px;height:16px}.user-role-indicator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:9px;height:9px}.header-left[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:42px;height:42px}.logo-area[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:11px}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}.hamburger-btn[_ngcontent-%COMP%]{width:40px;height:40px}.hamburger-line[_ngcontent-%COMP%]{width:20px}.header-nav[_ngcontent-%COMP%]{width:280px;right:-290px;padding:80px 15px 25px}.header-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 16px;font-size:14px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#0009;display:flex;align-items:center;justify-content:center;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.auth-prompt-modal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);border:3px solid #ffc107;border-radius:16px;padding:40px;max-width:500px;width:90%;box-shadow:0 10px 40px #0000004d;position:relative;text-align:center;animation:_ngcontent-%COMP%_slideIn .3s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-30px);opacity:0}to{transform:translateY(0);opacity:1}}.auth-prompt-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:transparent;border:none;font-size:32px;color:#856404;cursor:pointer;line-height:1;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;transition:all .2s}.auth-prompt-modal[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#d32f2f;transform:scale(1.1)}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:20px}.auth-prompt-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#856404;margin:0 0 15px;font-weight:700}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-message[_ngcontent-%COMP%]{font-size:1.1rem;color:#856404;margin:0 0 10px;font-weight:600;line-height:1.5}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-submessage[_ngcontent-%COMP%]{font-size:.95rem;color:#856404;margin:0 0 30px;opacity:.9;line-height:1.6}.modal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.modal-btn[_ngcontent-%COMP%]{padding:14px 30px;font-size:1rem;font-weight:700;border-radius:8px;border:none;cursor:pointer;transition:all .2s;width:100%}.modal-btn.primary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c5282,#1e3a5f);color:#fff;box-shadow:0 4px 12px #2c52824d}.modal-btn.primary-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #2c528266}.modal-btn.secondary-btn[_ngcontent-%COMP%]{background:#fff;color:#856404;border:2px solid #ffc107}.modal-btn.secondary-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;transform:translateY(-1px)}@media (max-width: 600px){.auth-prompt-modal[_ngcontent-%COMP%]{padding:30px 20px;max-width:95%}.auth-prompt-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.auth-prompt-modal[_ngcontent-%COMP%]   .modal-message[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]{padding:8px 12px;height:auto;min-height:56px;flex-wrap:wrap;gap:8px}.header-brand-group[_ngcontent-%COMP%]{gap:6px;width:100%;justify-content:flex-start}.header-brand-group[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:40px;height:40px;border-width:2px;margin-right:6px}.header-brand-group[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:9px}.header-brand-group[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.2rem);letter-spacing:.5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:calc(100% - 100px)}.app-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{width:100%;justify-content:flex-end;gap:8px;order:3}.user-role-indicator[_ngcontent-%COMP%]{padding:4px 10px;font-size:.65rem;min-height:32px;display:flex;align-items:center}.profile-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-width:1.5px}}@media (max-width: 480px){.app-header[_ngcontent-%COMP%]{padding:6px 10px;min-height:52px}.header-brand-group[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]{width:36px;height:36px;border-width:2px;margin-right:6px}.header-brand-group[_ngcontent-%COMP%]   .logo-badge[_ngcontent-%COMP%]{font-size:8px}.header-brand-group[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:.9rem;letter-spacing:0;max-width:calc(100% - 80px)}.header-brand-group[_ngcontent-%COMP%]   .nav-hamburger-btn[_ngcontent-%COMP%]{margin-right:6px}.user-role-indicator[_ngcontent-%COMP%]{padding:3px 8px;font-size:.6rem;min-height:28px;letter-spacing:0}.profile-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-width:1px}}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;max-width:100%}.content-wrapper[_ngcontent-%COMP%]{padding:12px 0}}@media (max-width: 480px){.container[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px;max-width:100%}.content-wrapper[_ngcontent-%COMP%]{padding:8px 0}}@media (max-width: 768px){.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:6px;font-size:.95rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;font-size:1rem;min-height:44px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px}}@media (max-width: 480px){.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;font-size:16px;min-height:44px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:70px}}@media (max-width: 768px){.btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%], a.btn[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .login-btn[_ngcontent-%COMP%], .report-link[_ngcontent-%COMP%], .admin-link[_ngcontent-%COMP%], .notification-link[_ngcontent-%COMP%]{width:100%;padding:12px 16px;font-size:.95rem;min-height:44px}.btn-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){.btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%], a.btn[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .login-btn[_ngcontent-%COMP%], .report-link[_ngcontent-%COMP%], .admin-link[_ngcontent-%COMP%], .notification-link[_ngcontent-%COMP%]{width:100%;padding:10px 12px;font-size:.9rem;min-height:44px}}@media (max-width: 768px){.modal-dialog[_ngcontent-%COMP%]{max-width:calc(100% - 24px);margin:20px auto}.modal-content[_ngcontent-%COMP%]{padding:20px}.modal-header[_ngcontent-%COMP%]{padding:16px;font-size:1.25rem}.modal-body[_ngcontent-%COMP%]{padding:16px}.modal-footer[_ngcontent-%COMP%]{padding:16px;gap:8px;flex-direction:column}}@media (max-width: 480px){.modal-dialog[_ngcontent-%COMP%]{max-width:calc(100% - 16px);margin:10px auto}.modal-content[_ngcontent-%COMP%]{padding:16px;border-radius:8px}.modal-header[_ngcontent-%COMP%]{padding:12px;font-size:1.1rem}.modal-body[_ngcontent-%COMP%]{padding:12px}.modal-footer[_ngcontent-%COMP%]{padding:12px;gap:6px}}@media (max-width: 768px){nav[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]{flex-direction:column}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]{padding:12px 16px;width:100%;border-bottom:1px solid rgba(255,255,255,.1)}}@media (max-width: 480px){nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .nav-item[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem}}@media (max-width: 768px){h1[_ngcontent-%COMP%]{font-size:clamp(1.25rem,4vw,1.75rem);margin-bottom:12px}h2[_ngcontent-%COMP%]{font-size:clamp(1.1rem,3.5vw,1.5rem);margin-bottom:12px}h3[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.25rem);margin-bottom:10px}p[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.5;margin-bottom:10px}}@media (max-width: 480px){h1[_ngcontent-%COMP%]{font-size:clamp(1.1rem,4vw,1.5rem)}h2[_ngcontent-%COMP%]{font-size:clamp(1rem,3.5vw,1.3rem)}h3[_ngcontent-%COMP%]{font-size:clamp(.9rem,3vw,1.1rem)}p[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 768px){.card[_ngcontent-%COMP%], [class*=card][_ngcontent-%COMP%], .alert-card[_ngcontent-%COMP%], .report-card[_ngcontent-%COMP%]{padding:12px;margin:8px;border-radius:8px}}@media (max-width: 480px){.card[_ngcontent-%COMP%], [class*=card][_ngcontent-%COMP%], .alert-card[_ngcontent-%COMP%], .report-card[_ngcontent-%COMP%]{padding:10px;margin:6px;border-radius:6px}}@media (max-width: 768px){.flex[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%], .grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:1fr!important;gap:10px}.flex-row[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 480px){.flex[_ngcontent-%COMP%], .grid[_ngcontent-%COMP%]{gap:8px}}@media (max-width: 768px){.p-lg[_ngcontent-%COMP%], [class*=p-lg][_ngcontent-%COMP%]{padding:16px!important}.m-lg[_ngcontent-%COMP%], [class*=m-lg][_ngcontent-%COMP%]{margin:16px!important}.gap-lg[_ngcontent-%COMP%]{gap:12px!important}}@media (max-width: 480px){.p-lg[_ngcontent-%COMP%], [class*=p-lg][_ngcontent-%COMP%]{padding:12px!important}.m-lg[_ngcontent-%COMP%], [class*=m-lg][_ngcontent-%COMP%]{margin:12px!important}.gap-lg[_ngcontent-%COMP%]{gap:8px!important}.px-lg[_ngcontent-%COMP%]{padding-left:10px!important;padding-right:10px!important}}@media (max-width: 768px){.overflow-x-auto[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;overflow-x:auto}table[_ngcontent-%COMP%]{font-size:.9rem}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:8px}}@media (max-width: 480px){table[_ngcontent-%COMP%]{font-size:.85rem}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:6px}}@media (max-width: 768px){.hide-mobile[_ngcontent-%COMP%]{display:none!important}.show-mobile[_ngcontent-%COMP%]{display:block!important}}@media (min-width: 769px){.show-mobile[_ngcontent-%COMP%]{display:none!important}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%], [class*=sidebar][_ngcontent-%COMP%], .drawer[_ngcontent-%COMP%], [class*=drawer][_ngcontent-%COMP%]{position:fixed;left:0;top:56px;width:100%;max-width:280px;height:calc(100vh - 56px);transform:translate(-100%);transition:transform .3s ease;z-index:999}.sidebar.active[_ngcontent-%COMP%], [class*=sidebar].active[_ngcontent-%COMP%], .drawer.active[_ngcontent-%COMP%], [class*=drawer].active[_ngcontent-%COMP%]{transform:translate(0)}}@media (max-width: 480px){.sidebar[_ngcontent-%COMP%], [class*=sidebar][_ngcontent-%COMP%], .drawer[_ngcontent-%COMP%], [class*=drawer][_ngcontent-%COMP%]{max-width:100%;width:100%}}@media (max-height: 600px) and (orientation: landscape){.app-header[_ngcontent-%COMP%]{min-height:48px}.btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:8px 12px;font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-height:36px;padding:6px 10px}}@media (max-width: 375px){.app-header[_ngcontent-%COMP%]{padding:6px 8px}.header-brand-group[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:.85rem;max-width:calc(100% - 70px)}.btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:.85rem;padding:8px 10px}.form-group[_ngcontent-%COMP%]{margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:4px}}@media (hover: none) and (pointer: coarse){.btn[_ngcontent-%COMP%]:hover, button[_ngcontent-%COMP%]:hover, .card[_ngcontent-%COMP%]:hover{transform:none}.btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%], a.btn[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]{min-height:48px;min-width:48px}.btn[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:active{opacity:.85}}@media (max-width: 768px){.app-header[_ngcontent-%COMP%]{padding:8px 12px;height:56px}}@media (max-width: 480px){.app-header[_ngcontent-%COMP%]{padding:6px 10px;height:50px}}']})};Fw($y,X3).catch(n=>console.error(n));
